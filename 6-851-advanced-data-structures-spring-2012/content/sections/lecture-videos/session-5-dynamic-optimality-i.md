---
about_this_resource_text: '<p><strong>Description:</strong> Dynamic optimality: Binary
  search trees, analytic bounds, splay trees, geometric view, greedy algorithm.</p>
  <p><strong>Speaker:</strong> Prof. Erik Demaine</p>'
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: DZ7jt1F8KKw
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Video-YouTube-Stream
  type: Video
  uid: e3ddf267cf7af03f8a3b908ca2e73ffd
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-5-dynamic-optimality/id735348884?i=169609898
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Video-iTunes U-MP4
  type: Video
  uid: 3f2367462890afb4fcac50f66c260074
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec05_300k.mp4
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Video-Internet Archive-MP4
  type: Video
  uid: a21584f97e1e36e1dd46a09e1367ab94
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/DZ7jt1F8KKw/default.jpg
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 725a18f66c0e2d1a4572f47e00f7c84d
- id: 3Play-3PlayYouTubeid-MP4
  media_location: DZ7jt1F8KKw
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 22739193e5b4a929651144718f410fbb
- id: DZ7jt1F8KKw.srt
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-5-dynamic-optimality-i/DZ7jt1F8KKw.srt
  title: 3play caption file
  type: null
  uid: 18094e854a5f7c42fd5ee77e5678de32
- id: DZ7jt1F8KKw.pdf
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-5-dynamic-optimality-i/DZ7jt1F8KKw.pdf
  title: 3play pdf file
  type: null
  uid: f56af640ec5ecb2905f73509e566c85b
- id: Caption-3Play YouTube id-SRT
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 89ebe91ac088c84a983ba9422ae50c27
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 323f343c7156c492b2f3d029089b99e9
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 87fe034062030af2f8a3ac105b3433ce
inline_embed_id: 55077308session5:dynamicoptimalityi52646821
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-5-dynamic-optimality-i
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-5-dynamic-optimality-i
template_type: Tabbed
title: 'Session 5: Dynamic Optimality I'
transcript: <p><span m='90'>The</span> <span m='180'>following</span> <span m='630'>content</span>
  <span m='1200'>is</span> <span m='1320'>provided</span> <span m='1770'>under</span>
  <span m='2009'>a</span> <span m='2100'>Creative</span> <span m='2490'>Commons</span>
  <span m='2910'>license.</span> <span m='4059'>Your</span> <span m='4200'>support</span>
  <span m='4710'>will</span> <span m='4860'>help</span> <span m='5100'>MIT</span>
  <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span> <span m='6870'>to</span>
  <span m='6960'>offer</span> <span m='7410'>high</span> <span m='7620'>quality</span>
  <span m='8100'>educational</span> <span m='8730'>resources</span> <span m='9360'>for</span>
  <span m='9510'>free.</span> <span m='10720'>To</span> <span m='10740'>make</span>
  <span m='10920'>a</span> <span m='10980'>donation</span> <span m='11730'>or</span>
  <span m='11940'>view</span> <span m='12390'>additional</span> <span m='12810'>materials</span>
  <span m='13320'>from</span> <span m='13500'>hundreds</span> <span m='13920'>of</span>
  <span m='14040'>MIT</span> <span m='14460'>courses,</span> <span m='15550'>visit</span>
  <span m='15780'>MIT</span> <span m='16200'>OpenCourseWare</span> <span m='17280'>at</span>
  <span m='17430'>ocw.mit.edu</span> </p><p><span m='21110'>PROFESSOR:</span> <span
  m='21140'>All</span> <span m='21170'>right</span> <span m='21330'>today</span> <span
  m='21660'>we</span> <span m='21900'>begin</span> <span m='22440'>a</span> <span
  m='22680'>topic</span> <span m='23130'>dear</span> <span m='23370'>to</span> <span
  m='23520'>my</span> <span m='23700'>heart.</span> <span m='24240'>It's</span> <span
  m='24300'>a</span> <span m='24360'>problem</span> <span m='24900'>that's</span>
  <span m='25230'>still</span> <span m='25530'>pretty</span> <span m='25830'>open,</span>
  <span m='26430'>but</span> <span m='26670'>I've</span> <span m='26790'>worked</span>
  <span m='27000'>on</span> <span m='27090'>a</span> <span m='27150'>lot.</span> <span
  m='27840'>Dynamic</span> <span m='28290'>optimality.</span> <span m='29400'>Central</span>
  <span m='29820'>question</span> <span m='30150'>here</span> <span m='30480'>is,</span>
  <span m='30940'>is</span> <span m='31020'>there</span> <span m='31200'>one</span>
  <span m='31560'>binary</span> <span m='31950'>search</span> <span m='32220'>tree</span>
  <span m='32850'>that's</span> <span m='33030'>at</span> <span m='33120'>least</span>
  <span m='33360'>as</span> <span m='33480'>good</span> <span m='33660'>as</span>
  <span m='33780'>all</span> <span m='34050'>other</span> <span m='34230'>binary</span>
  <span m='34560'>search</span> <span m='34830'>trees?</span> <span m='35310'>Is</span>
  <span m='35400'>there</span> <span m='35550'>one</span> <span m='35910'>binary</span>
  <span m='36240'>search</span> <span m='36480'>tree</span> <span m='36660'>to</span>
  <span m='36780'>rule</span> <span m='36930'>them</span> <span m='37080'>all?</span>
  </p><p><span m='38580'>It's</span> <span m='38700'>kind</span> <span m='38880'>of</span>
  <span m='38970'>a</span> <span m='39030'>fundamental</span> <span m='39540'>question.</span>
  <span m='40230'>Goes</span> <span m='40440'>back</span> <span m='40770'>to</span>
  <span m='41130'>the</span> <span m='41260'>'80s.</span> <span m='42980'>In</span>
  <span m='43170'>particular</span> <span m='43620'>splay</span> <span m='43890'>trees,</span>
  <span m='44210'>which</span> <span m='44530'>you</span> <span m='44880'>have</span>
  <span m='45060'>probably</span> <span m='45510'>seen</span> <span m='45720'>before.</span>
  <span m='46580'>We'll</span> <span m='46790'>review</span> <span m='46980'>them</span>
  <span m='47370'>briefly</span> <span m='47730'>here.</span> <span m='49080'>And</span>
  <span m='49230'>there's</span> <span m='49380'>a</span> <span m='49440'>lot</span>
  <span m='49680'>of</span> <span m='49770'>technology</span> <span m='50400'>built</span>
  <span m='50670'>up,</span> <span m='50820'>which</span> <span m='50970'>we'll</span>
  <span m='51090'>talk</span> <span m='51300'>about</span> <span m='51510'>this</span>
  <span m='51900'>lecture</span> <span m='52410'>and</span> <span m='52650'>next</span>
  <span m='52890'>lecture,</span> <span m='53670'>about</span> <span m='53880'>how</span>
  <span m='54120'>to</span> <span m='54270'>tackle</span> <span m='54600'>this</span>
  <span m='54780'>problem.</span> <span m='56050'>It's still</span> <span m='57240'>active</span>
  <span m='57630'>area</span> <span m='57930'>of</span> <span m='58020'>research.</span>
  </p><p><span m='59310'>So</span> <span m='63330'>before</span> <span m='63810'>I</span>
  <span m='63870'>get</span> <span m='64080'>to--</span> <span m='64310'>well</span>
  <span m='64769'>the</span> <span m='64920'>central</span> <span m='65220'>question</span>
  <span m='65580'>here</span> <span m='65820'>is,</span> <span m='66580'>is</span>
  <span m='66930'>there</span> <span m='69180'>one</span> <span m='70680'>best</span>
  <span m='72570'>binary</span> <span m='72930'>search</span> <span m='73230'>tree?</span>
  <span m='76830'>It's</span> <span m='76980'>a</span> <span m='77040'>natural</span>
  <span m='77400'>question</span> <span m='77790'>because</span> <span m='78180'>we</span>
  <span m='78270'>use</span> <span m='78380'>binary</span> <span m='78690'>search</span>
  <span m='78810'>trees</span> <span m='79050'>all</span> <span m='79170'>the</span>
  <span m='79290'>time.</span> <span m='79560'>Already</span> <span m='79920'>in</span>
  <span m='80010'>this</span> <span m='80160'>class,</span> <span m='80550'>probably</span>
  <span m='80910'>every</span> <span m='81150'>lecture,</span> <span m='81510'>we've</span>
  <span m='81650'>used</span> <span m='81840'>a</span> <span m='81900'>binary</span>
  <span m='82170'>search</span> <span m='82440'>tree</span> <span m='82620'>for</span>
  <span m='82770'>something.</span> </p><p><span m='84190'>And</span> <span m='84330'>we</span>
  <span m='84510'>all</span> <span m='84690'>know</span> <span m='84960'>how</span>
  <span m='85140'>to</span> <span m='85260'>do</span> <span m='86910'>order</span>
  <span m='87700'>log</span> <span m='87965'>in</span> <span m='90050'>balanced</span>
  <span m='90450'>binary</span> <span m='90750'>search</span> <span m='91020'>trees.</span>
  <span m='95760'>And</span> <span m='96000'>the</span> <span m='96090'>question</span>
  <span m='96450'>becomes,</span> <span m='97500'>is</span> <span m='97710'>this</span>
  <span m='97920'>the</span> <span m='98040'>best</span> <span m='98430'>you</span>
  <span m='98580'>can</span> <span m='98730'>do?</span> </p><p><span m='109590'>To</span>
  <span m='110050'>make</span> <span m='110320'>this</span> <span m='111130'>more</span>
  <span m='111490'>formal</span> <span m='112150'>of</span> <span m='112330'>a</span>
  <span m='112390'>problem,</span> <span m='116650'>well,</span> <span m='118460'>yeah.</span>
  <span m='119260'>I</span> <span m='119380'>want</span> <span m='119530'>to</span>
  <span m='119590'>define</span> <span m='120440'>binary</span> <span m='120730'>search</span>
  <span m='121020'>tree</span> <span m='121390'>as</span> <span m='121660'>a</span>
  <span m='121930'>model</span> <span m='122320'>of</span> <span m='122410'>computation.</span>
  <span m='125340'>OK</span> <span m='125560'>we've</span> <span m='125680'>talked</span>
  <span m='125950'>about</span> <span m='126280'>pointer</span> <span m='126550'>machine</span>
  <span m='126850'>model.</span> <span m='127640'>Binary</span> <span m='127930'>search</span>
  <span m='128199'>tree</span> <span m='128350'>model</span> <span m='128680'>is</span>
  <span m='128860'>a</span> <span m='128919'>more</span> <span m='129310'>restricted</span>
  <span m='129910'>version</span> <span m='130930'>of</span> <span m='131320'>pointer</span>
  <span m='131590'>machine.</span> <span m='131980'>So</span> <span m='132330'>it's</span>
  <span m='132550'>less</span> <span m='132930'>than</span> <span m='134360'>pointer</span>
  <span m='134470'>machine.</span> </p><p><span m='138270'>Just</span> <span m='138570'>so</span>
  <span m='138730'>it's</span> <span m='138820'>clear</span> <span m='139270'>what</span>
  <span m='139510'>the</span> <span m='139660'>name</span> <span m='139930'>of</span>
  <span m='140080'>this</span> <span m='140350'>game</span> <span m='140680'>is,</span>
  <span m='141940'>we</span> <span m='142160'>require</span> <span m='144040'>the</span>
  <span m='144130'>data</span> <span m='145720'>to</span> <span m='145870'>be</span>
  <span m='146020'>stored</span> <span m='149980'>in</span> <span m='150130'>a</span>
  <span m='150190'>binary</span> <span m='150520'>search</span> <span m='150820'>tree</span>
  <span m='153670'>as</span> <span m='154060'>it's</span> <span m='154240'>keys.</span>
  <span m='160120'>And</span> <span m='160240'>then</span> <span m='160480'>we</span>
  <span m='160600'>allow</span> <span m='161170'>basic</span> <span m='161590'>operations.</span>
  <span m='166610'>Let</span> <span m='166720'>me</span> <span m='169970'>make</span>
  <span m='170040'>sure</span> <span m='170180'>I</span> <span m='171100'>get</span>
  <span m='171250'>the</span> <span m='171340'>right</span> <span m='171490'>list.</span>
  </p><p><span m='181950'>You</span> <span m='182070'>can</span> <span m='182220'>follow</span>
  <span m='182580'>pointers,</span> <span m='183690'>and</span> <span m='183840'>we're</span>
  <span m='183930'>going</span> <span m='184000'>to</span> <span m='184080'>assume</span>
  <span m='184470'>our</span> <span m='184740'>BST</span> <span m='185160'>has</span>
  <span m='186350'>left triad</span> <span m='186780'>pointers,</span> <span m='187140'>right</span>
  <span m='187300'>triad</span> <span m='187500'>pointers,</span> <span m='187950'>and</span>
  <span m='188160'>parent</span> <span m='188400'>pointers.</span> <span m='189270'>You</span>
  <span m='189360'>can</span> <span m='189510'>do</span> <span m='189600'>each</span>
  <span m='189750'>of</span> <span m='189810'>these</span> <span m='189960'>in</span>
  <span m='190020'>constant</span> <span m='190400'>time.</span> <span m='191370'>And</span>
  <span m='191520'>then</span> <span m='191730'>the</span> <span m='191850'>interesting</span>
  <span m='192270'>one,</span> <span m='193170'>interesting</span> <span m='193530'>thing</span>
  <span m='193710'>you</span> <span m='193830'>can</span> <span m='193950'>do,</span>
  <span m='194850'>is</span> <span m='195060'>rotate</span> <span m='196380'>a</span>
  <span m='196440'>node</span> <span m='197580'>and</span> <span m='197790'>its</span>
  <span m='197940'>parent.</span> </p><p><span m='203550'>So</span> <span m='205340'>sure</span>
  <span m='205640'>you've</span> <span m='205790'>seen</span> <span m='206030'>rotations</span>
  <span m='206510'>before.</span> <span m='214160'>If</span> <span m='214310'>this</span>
  <span m='214520'>is</span> <span m='214640'>my node</span> <span m='215060'>x,</span>
  <span m='215570'>and</span> <span m='215690'>I</span> <span m='215780'>do</span>
  <span m='215990'>rotate</span> <span m='216410'>x,</span> <span m='219430'>it's</span>
  <span m='219620'>going</span> <span m='219740'>to</span> <span m='219800'>be</span>
  <span m='219920'>my</span> <span m='220070'>definition</span> <span m='220640'>of</span>
  <span m='220790'>rotation,</span> <span m='223070'>x</span> <span m='223370'>moves</span>
  <span m='223670'>to</span> <span m='223760'>the</span> <span m='223850'>root.</span>
  <span m='224840'>It's</span> <span m='225500'>in</span> <span m='225620'>this</span>
  <span m='225770'>case</span> <span m='225980'>because</span> <span m='226190'>x</span>
  <span m='226370'>is</span> <span m='226460'>to</span> <span m='226580'>the</span>
  <span m='226700'>right</span> <span m='226910'>of</span> <span m='227030'>it's</span>
  <span m='227300'>parent</span> <span m='227770'>it</span> <span m='227870'>remains</span>
  <span m='228330'>now</span> <span m='229200'>to</span> <span m='229420'>the</span>
  <span m='229490'>right</span> <span m='229730'>of</span> <span m='229920'>it's,</span>
  <span m='231461'>what</span> <span m='231870'>now</span> <span m='232210'>becomes</span>
  <span m='232490'>it's</span> <span m='232670'>child.</span> <span m='236100'>These</span>
  <span m='236420'>sub-trees</span> <span m='236750'>come</span> <span m='236960'>along</span>
  <span m='237230'>for</span> <span m='237320'>the</span> <span m='237410'>ride.</span>
  <span m='238250'>This</span> <span m='238400'>preserves</span> <span m='238880'>the</span>
  <span m='239000'>binary</span> <span m='239300'>search</span> <span m='239570'>tree</span>
  <span m='239720'>property.</span> <span m='241280'>And</span> <span m='241700'>you</span>
  <span m='241850'>could</span> <span m='241970'>get</span> <span m='242150'>back</span>
  <span m='242480'>by</span> <span m='242660'>rotating</span> <span m='243120'>y.</span>
  </p><p><span m='246230'>OK</span> <span m='247580'>by</span> <span m='247730'>this</span>
  <span m='247880'>definition</span> <span m='248330'>of</span> <span m='248390'>rotate</span>
  <span m='248720'>we</span> <span m='248810'>don't</span> <span m='248990'>need</span>
  <span m='249110'>to</span> <span m='249200'>distinguish</span> <span m='249650'>between</span>
  <span m='249890'>left</span> <span m='250130'>and</span> <span m='250250'>right</span>
  <span m='250430'>rotations.</span> <span m='252230'>We</span> <span m='252380'>always</span>
  <span m='252590'>name</span> <span m='252950'>the</span> <span m='253070'>child</span>
  <span m='253780'>and</span> <span m='254000'>it's parent</span> <span m='254390'>is</span>
  <span m='254480'>well</span> <span m='254620'>defined.</span> <span m='255490'>That's</span>
  <span m='255680'>who</span> <span m='255800'>we</span> <span m='255890'>rotate</span>
  <span m='256220'>with.</span> <span m='257190'>So</span> <span m='257320'>it's</span>
  <span m='257420'>just</span> <span m='257870'>flipping</span> <span m='258260'>this</span>
  <span m='258320'>edge.</span> <span m='260010'>So</span> <span m='260089'>these</span>
  <span m='260269'>are</span> <span m='260329'>the</span> <span m='260450'>operations</span>
  <span m='261019'>you</span> <span m='261140'>can</span> <span m='261260'>do,</span>
  <span m='261630'>and</span> <span m='261829'>in</span> <span m='261980'>this</span>
  <span m='262160'>model</span> <span m='263120'>really</span> <span m='263390'>the</span>
  <span m='263510'>only</span> <span m='263720'>thing</span> <span m='263870'>you</span>
  <span m='263960'>can</span> <span m='264110'>do</span> <span m='264290'>is</span>
  <span m='264470'>a</span> <span m='264530'>search.</span> </p><p><span m='265190'>Suppose</span>
  <span m='265550'>I</span> <span m='265640'>want</span> <span m='265760'>to</span>
  <span m='265850'>search</span> <span m='266120'>for</span> <span m='266240'>a</span>
  <span m='266300'>key.</span> <span m='267650'>The</span> <span m='267800'>model</span>
  <span m='268160'>is</span> <span m='269030'>to</span> <span m='269180'>do</span>
  <span m='269300'>a</span> <span m='269360'>search</span> <span m='272670'>I</span>
  <span m='272690'>start</span> <span m='273030'>at</span> <span m='273110'>the</span>
  <span m='273200'>root</span> <span m='276260'>of</span> <span m='276380'>the</span>
  <span m='276500'>tree,</span> <span m='278300'>of</span> <span m='278390'>the</span>
  <span m='278480'>binary</span> <span m='278750'>search</span> <span m='278990'>tree.</span>
  <span m='279620'>I</span> <span m='279680'>can</span> <span m='279860'>do</span>
  <span m='279980'>these</span> <span m='280160'>walks.</span> <span m='280670'>I</span>
  <span m='280790'>could</span> <span m='280940'>do</span> <span m='281060'>rotations.</span>
  <span m='282500'>And</span> <span m='283280'>I</span> <span m='283490'>must</span>
  <span m='283820'>visit--</span> <span m='284930'>if</span> <span m='285050'>I'm</span>
  <span m='285120'>going</span> <span m='285250'>to</span> <span m='285320'>search</span>
  <span m='285650'>for</span> <span m='285950'>x,</span> <span m='288530'>must</span>
  <span m='288840'>visit</span> <span m='290570'>the</span> <span m='290690'>node</span>
  <span m='292450'>with</span> <span m='292770'>key</span> <span m='295970'>equal</span>
  <span m='296330'>to</span> <span m='296550'>x.</span> </p><p><span m='298160'>And</span>
  <span m='298340'>we're</span> <span m='298460'>going</span> <span m='298590'>to</span>
  <span m='298630'>assume</span> <span m='299150'>throughout</span> <span m='299600'>these</span>
  <span m='299780'>lectures</span> <span m='300290'>that</span> <span m='300530'>searches</span>
  <span m='300950'>are</span> <span m='301040'>always</span> <span m='301190'>successful.</span>
  <span m='301850'>You're</span> <span m='302000'>only</span> <span m='302210'>searching</span>
  <span m='302600'>for</span> <span m='302720'>keys</span> <span m='303110'>that</span>
  <span m='303230'>are</span> <span m='303320'>in</span> <span m='303530'>the</span>
  <span m='303620'>tree.</span> <span m='304880'>Doesn't</span> <span m='305150'>make</span>
  <span m='305300'>that</span> <span m='305450'>much</span> <span m='305630'>of</span>
  <span m='305690'>a</span> <span m='305750'>difference</span> <span m='306140'>if</span>
  <span m='306190'>you're</span> <span m='306290'>searching</span> <span m='306680'>for</span>
  <span m='306800'>keys</span> <span m='307040'>that</span> <span m='307130'>are</span>
  <span m='307190'>not</span> <span m='307400'>in</span> <span m='307490'>the</span>
  <span m='307580'>tree.</span> <span m='308000'>Think</span> <span m='308180'>of</span>
  <span m='308270'>it</span> <span m='308360'>as</span> <span m='308420'>searching</span>
  <span m='308750'>for</span> <span m='308870'>the</span> <span m='308960'>predecessor</span>
  <span m='309490'>or</span> <span m='309590'>the</span> <span m='309680'>successor.</span>
  <span m='310880'>Not</span> <span m='311060'>a</span> <span m='311120'>big</span>
  <span m='311240'>deal.</span> <span m='312210'>And</span> <span m='312260'>so</span>
  <span m='312470'>for</span> <span m='312620'>simplicity,</span> <span m='313250'>we're</span>
  <span m='313370'>just</span> <span m='313520'>going</span> <span m='313670'>to</span>
  <span m='314330'>assume</span> <span m='314630'>successful</span> <span m='315140'>searches.</span>
  </p><p><span m='316820'>We're</span> <span m='317000'>also</span> <span m='317240'>going</span>
  <span m='317510'>to</span> <span m='317810'>assume</span> <span m='318110'>no</span>
  <span m='318290'>insertions</span> <span m='318770'>and</span> <span m='318860'>deletions</span>
  <span m='319790'>in</span> <span m='319880'>this</span> <span m='320030'>model,</span>
  <span m='320660'>because</span> <span m='321110'>they</span> <span m='321260'>just</span>
  <span m='321440'>make</span> <span m='322660'>problem</span> <span m='323060'>a</span>
  <span m='323120'>little</span> <span m='323300'>messier.</span> <span m='324020'>Some</span>
  <span m='324230'>papers</span> <span m='324590'>have</span> <span m='324680'>considered</span>
  <span m='325070'>insertions</span> <span m='325520'>and</span> <span m='325610'>deletions,</span>
  <span m='326690'>and</span> <span m='327080'>to</span> <span m='327230'>the</span>
  <span m='327290'>large</span> <span m='327500'>extent</span> <span m='327770'>things</span>
  <span m='327980'>just</span> <span m='328160'>work.</span> <span m='328670'>So,</span>
  <span m='329930'>we're</span> <span m='330110'>going</span> <span m='330230'>to</span>
  <span m='330320'>focus</span> <span m='330650'>on</span> <span m='330770'>searches.</span>
  <span m='331150'>Searches</span> <span m='331520'>is</span> <span m='331610'>interesting</span>
  <span m='332060'>enough</span> <span m='332840'>for</span> <span m='333140'>this</span>
  <span m='333380'>problem.</span> </p><p><span m='334740'>Suppose</span> <span m='334940'>I</span>
  <span m='334970'>have</span> <span m='335090'>n</span> <span m='335300'>items.</span>
  <span m='336380'>Now</span> <span m='336530'>the</span> <span m='336590'>model</span>
  <span m='336830'>is</span> <span m='336950'>clear.</span> <span m='337730'>I</span>
  <span m='337820'>store</span> <span m='338090'>them</span> <span m='338240'>in</span>
  <span m='338330'>a</span> <span m='338390'>binary</span> <span m='338660'>search</span>
  <span m='338960'>tree.</span> <span m='340250'>These</span> <span m='340490'>are</span>
  <span m='340520'>the</span> <span m='340640'>only</span> <span m='340880'>things</span>
  <span m='341150'>I'm</span> <span m='341240'>allowed</span> <span m='341480'>to</span>
  <span m='341600'>do.</span> <span m='346520'>Could</span> <span m='346760'>I</span>
  <span m='346880'>imagine</span> <span m='347300'>beating</span> <span m='347860'>log</span>
  <span m='348120'>n?</span> <span m='350630'>Well,</span> <span m='352580'>no</span>
  <span m='352880'>in</span> <span m='352970'>the</span> <span m='353060'>worst</span>
  <span m='353270'>case.</span> <span m='354860'>This</span> <span m='355040'>is</span>
  <span m='355160'>best</span> <span m='355400'>possible</span> <span m='355850'>in</span>
  <span m='355940'>the</span> <span m='356030'>worst</span> <span m='356210'>case.</span>
  </p><p><span m='362930'>Why?</span> <span m='364310'>Because</span> <span m='364520'>your</span>
  <span m='364700'>tree</span> <span m='365540'>has</span> <span m='365780'>to</span>
  <span m='365900'>have</span> <span m='366140'>depth</span> <span m='366410'>at</span>
  <span m='366500'>least</span> <span m='366850'>log</span> <span m='367180'>n</span>
  <span m='367410'>if</span> <span m='367550'>you're</span> <span m='367640'>going</span>
  <span m='367760'>to</span> <span m='367820'>store</span> <span m='368030'>n</span>
  <span m='368180'>things,</span> <span m='368450'>and</span> <span m='368540'>if</span>
  <span m='369080'>it's</span> <span m='369200'>binary.</span> <span m='370550'>So</span>
  <span m='371150'>your</span> <span m='371330'>adversary</span> <span m='371810'>could</span>
  <span m='371960'>always</span> <span m='372170'>be,</span> <span m='372630'>could</span>
  <span m='372770'>always</span> <span m='372950'>just</span> <span m='373100'>look</span>
  <span m='373280'>at</span> <span m='373340'>your</span> <span m='373460'>tree</span>
  <span m='373790'>and</span> <span m='373880'>say,</span> <span m='374210'>Oh I'm</span>
  <span m='374270'>going</span> <span m='374390'>to</span> <span m='374480'>pick</span>
  <span m='374660'>anybody</span> <span m='375110'>who's</span> <span m='375280'>a</span>
  <span m='375380'>log</span> <span m='375660'>in</span> <span m='376460'>depth</span>
  <span m='376820'>or</span> <span m='377000'>lower,</span> <span m='378230'>and</span>
  <span m='378800'>if</span> <span m='378980'>you're</span> <span m='379070'>going</span>
  <span m='379190'>to</span> <span m='379250'>start</span> <span m='379490'>at</span>
  <span m='379580'>the</span> <span m='379670'>root</span> <span m='379880'>and</span>
  <span m='380030'>walk</span> <span m='380270'>left</span> <span m='380540'>and</span>
  <span m='380630'>right</span> <span m='380810'>to</span> <span m='380930'>get</span>
  <span m='381110'>there,</span> <span m='381680'>you're</span> <span m='381770'>going</span>
  <span m='381880'>to</span> <span m='381950'>have</span> <span m='382040'>to</span>
  <span m='382130'>pay</span> <span m='382310'>log</span> <span m='382580'>n</span>
  <span m='382730'>time</span> <span m='383030'>every</span> <span m='383330'>single,</span>
  <span m='385130'>every</span> <span m='385340'>single</span> <span m='385610'>operation.</span>
  </p><p><span m='387060'>So</span> <span m='387110'>actually</span> <span m='387380'>there's</span>
  <span m='387830'>a</span> <span m='387890'>lot</span> <span m='388070'>of</span>
  <span m='388160'>sequences,</span> <span m='388580'>in</span> <span m='388670'>fact,</span>
  <span m='389010'>most</span> <span m='389150'>sequences.</span> <span m='389630'>You</span>
  <span m='389720'>take</span> <span m='389930'>an</span> <span m='389990'>average</span>
  <span m='390320'>sequence,</span> <span m='391310'>this</span> <span m='391490'>will</span>
  <span m='391580'>be</span> <span m='391670'>the</span> <span m='391790'>case.</span>
  <span m='392870'>But</span> <span m='393810'>we'll</span> <span m='394010'>see</span>
  <span m='394290'>formal</span> <span m='394480'>ways</span> <span m='394820'>to</span>
  <span m='394940'>prove</span> <span m='395150'>that</span> <span m='395390'>next</span>
  <span m='395600'>class.</span> <span m='396840'>But,</span> <span m='397130'>easy</span>
  <span m='397460'>adversary</span> <span m='397910'>argument</span> <span m='398270'>tells</span>
  <span m='398570'>you</span> <span m='398720'>you</span> <span m='398900'>need</span>
  <span m='399080'>to</span> <span m='399200'>go</span> <span m='399330'>down,</span>
  <span m='399660'>log</span> <span m='400120'>n</span> <span m='401300'>in</span>
  <span m='401540'>the</span> <span m='401630'>worst</span> <span m='401810'>case.</span>
  <span m='404900'>But,</span> <span m='406040'>that's</span> <span m='406250'>the</span>
  <span m='406340'>worst</span> <span m='406550'>case.</span> </p><p><span m='408180'>The</span>
  <span m='408230'>name</span> <span m='408470'>of</span> <span m='408530'>the</span>
  <span m='408650'>game</span> <span m='408940'>in</span> <span m='409070'>dynamic</span>
  <span m='409550'>optimality</span> <span m='410150'>is</span> <span m='410240'>to</span>
  <span m='410360'>consider</span> <span m='410870'>every</span> <span m='411170'>case</span>
  <span m='412100'>separately,</span> <span m='413270'>and</span> <span m='413420'>do</span>
  <span m='413540'>as</span> <span m='413660'>well</span> <span m='413840'>as</span>
  <span m='413960'>you</span> <span m='414050'>can</span> <span m='414380'>all</span>
  <span m='414560'>the</span> <span m='414680'>time.</span> <span m='415070'>In</span>
  <span m='415220'>general,</span> <span m='416180'>the</span> <span m='416300'>answer</span>
  <span m='416540'>to</span> <span m='416690'>this</span> <span m='416870'>question</span>
  <span m='417320'>is</span> <span m='417560'>that,</span> <span m='418190'>is</span>
  <span m='418460'>log</span> <span m='418715'>n</span> <span m='418970'>best</span>
  <span m='419210'>possible?</span> <span m='420350'>Depends</span> <span m='422000'>on</span>
  <span m='422300'>the</span> <span m='422420'>access</span> <span m='422750'>sequence.</span>
  <span m='423560'>Depends</span> <span m='423980'>on</span> <span m='424160'>what</span>
  <span m='424310'>you're</span> <span m='424430'>searching</span> <span m='424790'>for.</span>
  </p><p><span m='435750'>So,</span> <span m='436680'>let's</span> <span m='436920'>say</span>
  <span m='438850'>we're,</span> <span m='441560'>to</span> <span m='441690'>make</span>
  <span m='441900'>things</span> <span m='442140'>a</span> <span m='442170'>little</span>
  <span m='442380'>clean,</span> <span m='443310'>let's</span> <span m='443490'>assume</span>
  <span m='443760'>that</span> <span m='443880'>the</span> <span m='444000'>key</span>
  <span m='444210'>is</span> <span m='444360'>we're</span> <span m='444480'>storing</span>
  <span m='446430'>are</span> <span m='446640'>the</span> <span m='446790'>numbers,</span>
  <span m='447390'>integers,</span> <span m='448070'>one</span> <span m='448290'>up</span>
  <span m='448380'>to</span> <span m='448470'>n.</span> <span m='450300'>So in</span>
  <span m='450500'>particular</span> <span m='450950'>there's</span> <span m='451120'>n
  of</span> <span m='451230'>them.</span> <span m='451590'>And</span> <span m='452100'>really</span>
  <span m='452430'>we</span> <span m='452550'>just</span> <span m='452670'>care</span>
  <span m='452850'>about</span> <span m='453030'>their</span> <span m='453150'>order,</span>
  <span m='453630'>so I'm</span> <span m='453720'>going</span> <span m='453840'>to</span>
  <span m='453900'>relabel</span> <span m='454350'>them</span> <span m='454950'>to</span>
  <span m='455070'>be</span> <span m='455220'>one</span> <span m='455400'>up</span>
  <span m='455490'>to</span> <span m='455580'>n.</span> <span m='457080'>And</span>
  <span m='457470'>say</span> <span m='458010'>we</span> <span m='458400'>search</span>
  <span m='458880'>for</span> <span m='462990'>x</span> <span m='463300'>1</span>
  <span m='463680'>first,</span> <span m='464280'>then</span> <span m='464490'>we</span>
  <span m='464610'>search</span> <span m='464850'>for</span> <span m='464970'>x</span>
  <span m='465330'>2,</span> <span m='466620'>and</span> <span m='466740'>so</span>
  <span m='466980'>on,</span> <span m='467820'>up</span> <span m='467940'>to</span>
  <span m='468060'>x</span> <span m='469148'>m.</span> </p><p><span m='471060'>So,</span>
  <span m='471720'>these</span> <span m='471960'>indices</span> <span m='472440'>are</span>
  <span m='472590'>time,</span> <span m='473100'>basically.</span> <span m='474300'>Over</span>
  <span m='474540'>time,</span> <span m='475280'>and</span> <span m='475600'>you</span>
  <span m='475710'>can</span> <span m='475860'>plot</span> <span m='476130'>this</span>
  <span m='476370'>if</span> <span m='476520'>you</span> <span m='476610'>like.</span>
  <span m='477350'>Here</span> <span m='477860'>is</span> <span m='478710'>time.</span>
  <span m='479900'>Here is</span> <span m='480300'>space.</span> <span m='482440'>So</span>
  <span m='482610'>at the</span> <span m='482730'>first</span> <span m='483480'>time</span>
  <span m='483880'>unit</span> <span m='484470'>we</span> <span m='484740'>search</span>
  <span m='485760'>at</span> <span m='486780'>x</span> <span m='487130'>1,</span>
  <span m='487830'>then</span> <span m='487980'>some</span> <span m='488190'>other</span>
  <span m='488370'>place,</span> <span m='488680'>then</span> <span m='488850'>some</span>
  <span m='489030'>other</span> <span m='489180'>place.</span> <span m='491100'>We</span>
  <span m='491640'>can have</span> <span m='491830'>repeats,</span> <span m='493940'>whatever.</span>
  <span m='495590'>OK.</span> </p><p><span m='496380'>Some</span> <span m='496800'>search</span>
  <span m='497100'>sequences</span> <span m='497700'>are</span> <span m='497820'>going</span>
  <span m='498120'>to</span> <span m='498270'>be</span> <span m='499020'>slow,</span>
  <span m='499440'>they're</span> <span m='499590'>going</span> <span m='499710'>to</span>
  <span m='499770'>require</span> <span m='500190'>log</span> <span m='500490'>n</span>
  <span m='500640'>time</span> <span m='500910'>per</span> <span m='501270'>access.</span>
  <span m='501630'>In</span> <span m='501690'>particular,</span> <span m='502180'>if</span>
  <span m='502280'>I</span> <span m='502380'>always,</span> <span m='503040'>if</span>
  <span m='503130'>the</span> <span m='503220'>adversary</span> <span m='503640'>chooses</span>
  <span m='503970'>x i</span> <span m='504310'>to</span> <span m='504420'>be</span>
  <span m='504660'>the</span> <span m='504780'>deepest</span> <span m='505170'>node</span>
  <span m='505410'>in</span> <span m='505500'>the</span> <span m='505590'>tree</span>
  <span m='505980'>repeatedly.</span> <span m='507180'>But</span> <span m='507440'>some</span>
  <span m='507600'>search</span> <span m='507900'>sequences</span> <span m='508530'>are</span>
  <span m='508710'>going</span> <span m='509010'>to</span> <span m='509100'>be</span>
  <span m='509220'>fast.</span> <span m='513240'>Any</span> <span m='513419'>suggestions,</span>
  <span m='515110'>if</span> <span m='515520'>you</span> <span m='515580'>don't</span>
  <span m='515700'>have</span> <span m='515850'>the</span> <span m='515940'>notes</span>
  <span m='516120'>in</span> <span m='516210'>front</span> <span m='516390'>of</span>
  <span m='516510'>you,</span> <span m='517049'>of</span> <span m='518010'>access</span>
  <span m='518280'>sequences</span> <span m='518820'>that</span> <span m='518940'>we</span>
  <span m='519059'>can</span> <span m='519210'>do</span> <span m='519570'>in</span>
  <span m='521400'>less</span> <span m='521820'>than</span> <span m='522000'>log</span>
  <span m='522270'>n</span> <span m='522450'>time</span> <span m='522750'>per operation.</span>
  <span m='523135'>Let's</span> <span m='523520'>A</span> <span m='523650'>constant.</span>
  </p><p><span m='526150'>There's</span> <span m='526170'>a</span> <span m='526200'>lot</span>
  <span m='526530'>of</span> <span m='526590'>possible</span> <span m='526980'>answers,</span>
  <span m='527970'>I</span> <span m='528030'>think.</span> <span m='535090'>Yeah?</span>
  </p><p><span m='535210'>AUDIENCE:</span> <span m='535700'>N</span> <span m='536190'>divided
  by two.</span> </p><p><span m='537170'>PROFESSOR:</span> <span m='537245'>N</span>
  <span m='537320'>divided</span> <span m='537590'>by</span> <span m='537740'>two.</span>
  <span m='539180'>What</span> <span m='539330'>do</span> <span m='539390'>you</span>
  <span m='539450'>mean.</span> </p><p><span m='541070'>AUDIENCE:</span> <span m='541310'>Like</span>
  <span m='541550'>it's going to be</span> <span m='542030'>[INAUDIBLE]</span> </p><p><span
  m='545390'>PROFESSOR:</span> <span m='545555'>Oh,</span> <span m='545720'>if</span>
  <span m='545870'>you're</span> <span m='545990'>searching</span> <span m='546350'>for</span>
  <span m='546470'>the</span> <span m='546560'>median</span> <span m='546980'>in</span>
  <span m='547070'>a</span> <span m='547130'>perfectly</span> <span m='547580'>balanced</span>
  <span m='548000'>tree?</span> <span m='548680'>Yeah,</span> <span m='550910'>that's</span>
  <span m='551180'>true.</span> <span m='551430'>So</span> <span m='551480'>if</span>
  <span m='551570'>you're</span> <span m='551780'>always</span> <span m='551960'>searching</span>
  <span m='552290'>for</span> <span m='552410'>the</span> <span m='552530'>root</span>
  <span m='552680'>of</span> <span m='552740'>the</span> <span m='552830'>tree,</span>
  <span m='553250'>in</span> <span m='553370'>particular,</span> <span m='554220'>that's</span>
  <span m='554300'>going</span> <span m='554440'>to</span> <span m='554510'>be</span>
  <span m='554630'>good.</span> <span m='557120'>That's</span> <span m='557330'>hard</span>
  <span m='557540'>to,</span> <span m='558170'>that</span> <span m='558320'>depends</span>
  <span m='558680'>on</span> <span m='558770'>the</span> <span m='558860'>tree</span>
  <span m='559130'>though.</span> <span m='559430'>I'd</span> <span m='559580'>like</span>
  <span m='560000'>a</span> <span m='560420'>particular</span> <span m='560990'>access</span>
  <span m='561260'>sequence</span> <span m='561710'>that</span> <span m='561830'>I</span>
  <span m='561890'>can</span> <span m='562010'>always</span> <span m='562280'>serve</span>
  <span m='562550'>as</span> <span m='562670'>well,</span> <span m='565170'>with</span>
  <span m='565380'>some</span> <span m='565770'>tree.</span> </p><p><span m='567450'>AUDIENCE:</span>
  <span m='567565'>n</span> <span m='567680'>order</span> <span m='567795'>walk.</span>
  </p><p><span m='568830'>PROFESSOR:</span> <span m='568920'>n</span> <span m='569010'>order</span>
  <span m='569240'>walk.</span> <span m='569840'>Yeah,</span> <span m='570190'>good.</span>
  <span m='571620'>So</span> <span m='571800'>this</span> <span m='574560'>has</span>
  <span m='574830'>a</span> <span m='574890'>name.</span> <span m='577440'>Sequential</span>
  <span m='578010'>access</span> <span m='578370'>property.</span> <span m='586870'>If</span>
  <span m='587050'>you</span> <span m='587170'>want</span> <span m='587410'>to</span>
  <span m='587500'>access</span> <span m='588490'>the</span> <span m='588610'>elements</span>
  <span m='588970'>in</span> <span m='589120'>order,</span> <span m='590470'>so</span>
  <span m='590920'>one</span> <span m='591200'>through</span> <span m='591510'>n,</span>
  <span m='593230'>this</span> <span m='593410'>should</span> <span m='593890'>only</span>
  <span m='594220'>cost</span> <span m='594970'>constant</span> <span m='595540'>amortized.</span>
  <span m='602860'>Because</span> <span m='603130'>for</span> <span m='603250'>any</span>
  <span m='603430'>tree</span> <span m='603760'>you</span> <span m='603880'>can</span>
  <span m='604030'>do</span> <span m='604180'>and</span> <span m='604270'>in</span>
  <span m='604360'>order</span> <span m='604570'>walk</span> <span m='605080'>in</span>
  <span m='605230'>linear</span> <span m='605500'>time.</span> <span m='606220'>And</span>
  <span m='606340'>so</span> <span m='606520'>per</span> <span m='606940'>search,</span>
  <span m='608350'>if</span> <span m='608530'>you're</span> <span m='608650'>careful</span>
  <span m='609040'>about</span> <span m='609220'>how</span> <span m='609370'>you</span>
  <span m='609520'>do</span> <span m='609670'>this,</span> <span m='610690'>now</span>
  <span m='611140'>this</span> <span m='611350'>is</span> <span m='611470'>not</span>
  <span m='611830'>totally</span> <span m='612190'>obvious</span> <span m='612520'>in</span>
  <span m='612670'>the</span> <span m='612760'>model</span> <span m='613120'>that</span>
  <span m='613270'>I've</span> <span m='613390'>set</span> <span m='613690'>up,</span>
  <span m='614860'>because</span> <span m='615340'>I</span> <span m='615400'>said</span>
  <span m='615670'>search</span> <span m='616000'>always</span> <span m='616150'>starts</span>
  <span m='616510'>at</span> <span m='616600'>the</span> <span m='616720'>root.</span>
  <span m='617690'>If</span> <span m='617740'>you</span> <span m='617830'>let</span>
  <span m='617980'>your</span> <span m='618100'>search</span> <span m='618400'>start</span>
  <span m='618820'>where</span> <span m='619000'>you</span> <span m='619120'>left</span>
  <span m='619390'>off,</span> <span m='620260'>then</span> <span m='620440'>you</span>
  <span m='620560'>can</span> <span m='620680'>definitely</span> <span m='621100'>do</span>
  <span m='621220'>this.</span> <span m='622570'>It turns</span> <span m='622900'>out</span>
  <span m='623650'>you</span> <span m='623770'>can</span> <span m='623920'>assume</span>
  <span m='624190'>this</span> <span m='624400'>or</span> <span m='624490'>not,</span>
  <span m='624760'>it</span> <span m='624850'>doesn't</span> <span m='625090'>make</span>
  <span m='625240'>a</span> <span m='625300'>difference.</span> <span m='626350'>That's</span>
  <span m='626500'>maybe</span> <span m='626770'>a</span> <span m='626860'>fun</span>
  <span m='627130'>exercise.</span> </p><p><span m='627670'>But</span> <span m='627820'>if,</span>
  <span m='627940'>you</span> <span m='628090'>can</span> <span m='628210'>essentially</span>
  <span m='628570'>reroute</span> <span m='628990'>the</span> <span m='629080'>tree</span>
  <span m='629440'>to</span> <span m='629620'>be</span> <span m='629830'>wherever</span>
  <span m='630190'>you</span> <span m='630340'>left</span> <span m='630610'>off.</span>
  <span m='631842'>I'm</span> <span m='632310'>not</span> <span m='632470'>going</span>
  <span m='632590'>to</span> <span m='632650'>prove</span> <span m='632860'>that</span>
  <span m='633010'>here.</span> <span m='634250'>OK,</span> <span m='634450'>but</span>
  <span m='634570'>in</span> <span m='634660'>particular,</span> <span m='635780'>some</span>
  <span m='636040'>trees</span> <span m='637090'>have</span> <span m='637270'>this</span>
  <span m='637420'>property.</span> <span m='638920'>Some</span> <span m='639250'>don't.</span>
  <span m='639610'>I</span> <span m='639670'>mean</span> <span m='639850'>if</span>
  <span m='639970'>you</span> <span m='640060'>use</span> <span m='640240'>a</span>
  <span m='640300'>red</span> <span m='640450'>black</span> <span m='640690'>tree,</span>
  <span m='640900'>and</span> <span m='640960'>you</span> <span m='641050'>search</span>
  <span m='641290'>for</span> <span m='641410'>one,</span> <span m='641650'>then</span>
  <span m='641770'>search</span> <span m='642010'>for</span> <span m='642100'>two,</span>
  <span m='642280'>then</span> <span m='642470'>search</span> <span m='642850'>for</span>
  <span m='642970'>n,</span> <span m='643780'>you're</span> <span m='643930'>not</span>
  <span m='644080'>going</span> <span m='644230'>to</span> <span m='644290'>get</span>
  <span m='644410'>constant</span> <span m='644740'>amortized,</span> <span m='645610'>because</span>
  <span m='645820'>it</span> <span m='645880'>doesn't</span> <span m='646090'>realize</span>
  <span m='646510'>this</span> <span m='646630'>is</span> <span m='646750'>happening.</span>
  </p><p><span m='647750'>But</span> <span m='647800'>if</span> <span m='647950'>you're</span>
  <span m='648070'>clever,</span> <span m='648490'>of</span> <span m='648580'>course,</span>
  <span m='648820'>this</span> <span m='648940'>can</span> <span m='649150'>be</span>
  <span m='649270'>achieved.</span> <span m='651640'>Easy</span> <span m='651910'>way</span>
  <span m='652030'>to</span> <span m='652120'>see</span> <span m='652270'>how</span>
  <span m='652390'>to</span> <span m='652480'>achieve</span> <span m='652750'>it</span>
  <span m='652990'>is,</span> <span m='655110'>this</span> <span m='655330'>is</span>
  <span m='655450'>your</span> <span m='655570'>binary</span> <span m='655870'>search</span>
  <span m='656110'>tree.</span> <span m='657500'>You</span> <span m='657670'>access</span>
  <span m='658090'>one,</span> <span m='659020'>then</span> <span m='659200'>you</span>
  <span m='659290'>do</span> <span m='659560'>a</span> <span m='659620'>rotation</span>
  <span m='660160'>with</span> <span m='660310'>the</span> <span m='660430'>right</span>
  <span m='660640'>child</span> <span m='661030'>of</span> <span m='661120'>one.</span>
  <span m='661920'>So</span> <span m='662020'>then</span> <span m='662200'>you</span>
  <span m='662320'>have</span> <span m='663130'>this</span> <span m='663310'>binary</span>
  <span m='663580'>search</span> <span m='663850'>tree,</span> <span m='665350'>and</span>
  <span m='665530'>then</span> <span m='665830'>you</span> <span m='666100'>access</span>
  <span m='666500'>two,</span> <span m='667780'>and</span> <span m='667930'>then</span>
  <span m='668100'>you</span> <span m='668140'>do</span> <span m='668290'>a</span>
  <span m='668320'>rotation.</span> <span m='669970'>This</span> <span m='670120'>is</span>
  <span m='670180'>basically</span> <span m='670570'>a</span> <span m='670660'>way</span>
  <span m='670840'>to</span> <span m='670990'>make</span> <span m='671260'>a</span>
  <span m='672640'>deck.</span> <span m='674710'>View</span> <span m='675100'>a,</span>
  <span m='675310'>use</span> <span m='675610'>a</span> <span m='675940'>link,</span>
  <span m='677170'>simulate</span> <span m='677590'>a</span> <span m='677650'>linked</span>
  <span m='677860'>list</span> <span m='678160'>in</span> <span m='678310'>a</span>
  <span m='678340'>binary</span> <span m='678610'>search</span> <span m='678880'>tree.</span>
  </p><p><span m='680260'>OK,</span> <span m='680660'>so</span> <span m='680710'>it</span>
  <span m='680800'>definitely</span> <span m='681100'>can</span> <span m='681310'>be</span>
  <span m='681430'>done</span> <span m='682240'>by</span> <span m='682360'>some</span>
  <span m='682600'>binary</span> <span m='682870'>search</span> <span m='683110'>tree.</span>
  <span m='684860'>A</span> <span m='684970'>stronger</span> <span m='685330'>version</span>
  <span m='686440'>of</span> <span m='686800'>the</span> <span m='687220'>sequential</span>
  <span m='687670'>access</span> <span m='688000'>property,</span> <span m='688305'>it's</span>
  <span m='688610'>a</span> <span m='688650'>little</span> <span m='688840'>more</span>
  <span m='688990'>interesting,</span> <span m='690030'>is</span> <span m='690340'>dynamic</span>
  <span m='690760'>finger</span> <span m='691060'>property.</span> <span m='692800'>This</span>
  <span m='692910'>is</span> <span m='693010'>something</span> <span m='693370'>that</span>
  <span m='693580'>should</span> <span m='693760'>hold</span> <span m='693940'>for</span>
  <span m='694090'>every</span> <span m='694390'>access</span> <span m='694690'>sequence,</span>
  <span m='695740'>and</span> <span m='695890'>it</span> <span m='695950'>gives</span>
  <span m='696130'>you</span> <span m='696220'>a</span> <span m='696250'>measure</span>
  <span m='696730'>of</span> <span m='697000'>how</span> <span m='697270'>expensive</span>
  <span m='697840'>an</span> <span m='697930'>access</span> <span m='698200'>sequence</span>
  <span m='698590'>is.</span> <span m='699820'>So</span> <span m='699970'>we're</span>
  <span m='700030'>doing</span> <span m='700480'>x</span> <span m='700580'>one</span>
  <span m='700870'>x</span> <span m='700930'>two</span> <span m='701320'>up</span>
  <span m='701440'>to</span> <span m='701560'>x m.</span> <span m='703240'>And</span>
  <span m='705250'>we</span> <span m='705340'>say,</span> <span m='705900'>if</span>
  <span m='706390'>we</span> <span m='706510'>measure</span> <span m='707470'>the</span>
  <span m='709200'>key</span> <span m='709570'>distance</span> <span m='710350'>between</span>
  <span m='711100'>our</span> <span m='711250'>current</span> <span m='711520'>access,</span>
  <span m='711940'>x i</span> <span m='712450'>and</span> <span m='712600'>the</span>
  <span m='712720'>previous</span> <span m='713230'>access,</span> <span m='713770'>x
  i</span> <span m='714130'>minus</span> <span m='714430'>1.</span> <span m='715290'>If</span>
  <span m='715720'>that</span> <span m='715930'>equals</span> <span m='716260'>k,</span>
  <span m='717460'>then</span> <span m='718510'>ideally</span> <span m='719410'>we</span>
  <span m='719500'>should</span> <span m='719650'>be</span> <span m='719710'>able</span>
  <span m='719860'>to</span> <span m='719980'>do</span> <span m='720190'>log</span>
  <span m='720850'>k</span> <span m='722170'>amortize</span> <span m='722890'>per</span>
  <span m='723070'>operation.</span> </p><p><span m='726560'>So</span> <span m='726580'>in</span>
  <span m='726640'>the</span> <span m='726700'>worst</span> <span m='726910'>case</span>
  <span m='727180'>this</span> <span m='727330'>is</span> <span m='727420'>going</span>
  <span m='727600'>to</span> <span m='727690'>be</span> <span m='727820'>log</span>
  <span m='728240'>n,</span> <span m='729310'>but</span> <span m='729610'>if</span>
  <span m='730360'>I</span> <span m='730450'>look</span> <span m='730690'>at</span>
  <span m='730810'>my</span> <span m='731740'>space-time</span> <span m='732400'>diagram</span>
  <span m='732940'>here,</span> <span m='735190'>if</span> <span m='735580'>for</span>
  <span m='735760'>example,</span> <span m='736190'>if</span> <span m='736210'>I</span>
  <span m='736300'>do</span> <span m='736540'>sequential</span> <span m='737050'>access,</span>
  <span m='737950'>then</span> <span m='738550'>this</span> <span m='738760'>number</span>
  <span m='739000'>is</span> <span m='739090'>always</span> <span m='739300'>one,</span>
  <span m='739600'>and</span> <span m='739690'>so</span> <span m='739780'>I</span>
  <span m='739870'>get</span> <span m='740020'>constant</span> <span m='740330'>time.</span>
  <span m='741850'>If</span> <span m='742090'>I</span> <span m='742210'>do</span>
  <span m='743740'>something</span> <span m='744190'>like</span> <span m='744430'>this,</span>
  <span m='744670'>where</span> <span m='744970'>my</span> <span m='745720'>spatial</span>
  <span m='746410'>distance</span> <span m='746800'>is</span> <span m='746920'>not</span>
  <span m='747100'>changing</span> <span m='747490'>too</span> <span m='747640'>much,</span>
  <span m='748070'>and</span> <span m='748210'>this</span> <span m='748450'>is</span>
  <span m='748540'>the</span> <span m='748630'>reason</span> <span m='748930'>I</span>
  <span m='749200'>numbered</span> <span m='750280'>the</span> <span m='750370'>keys</span>
  <span m='750640'>like</span> <span m='750820'>this.</span> <span m='751060'>What</span>
  <span m='751210'>I</span> <span m='751270'>really</span> <span m='751540'>mean</span>
  <span m='751720'>is,</span> <span m='751870'>in</span> <span m='752050'>the</span>
  <span m='752140'>sorted</span> <span m='752440'>order of</span> <span m='752650'>the</span>
  <span m='752770'>keys,</span> <span m='753700'>how</span> <span m='753910'>do</span>
  <span m='754030'>the</span> <span m='754180'>ranks</span> <span m='754530'>differ.</span>
  <span m='755410'>But</span> <span m='755560'>if</span> <span m='755680'>I</span>
  <span m='755770'>number</span> <span m='756040'>the</span> <span m='756130'>keys</span>
  <span m='756340'>one</span> <span m='756520'>through</span> <span m='756670'>n,</span>
  <span m='757720'>that's</span> <span m='757930'>just</span> <span m='758140'>their</span>
  <span m='758260'>absolute</span> <span m='758770'>difference.</span> </p><p><span
  m='760660'>So</span> <span m='760750'>anything</span> <span m='761080'>like</span>
  <span m='761260'>this,</span> <span m='761530'>dynamic</span> <span m='761890'>finger</span>
  <span m='762130'>properly</span> <span m='762520'>tells you</span> <span m='762820'>you're</span>
  <span m='763120'>doing</span> <span m='763390'>well.</span> <span m='765930'>Dynamic</span>
  <span m='766290'>finger</span> <span m='766530'>property</span> <span m='766890'>can</span>
  <span m='767190'>be</span> <span m='767310'>achieved</span> <span m='767640'>by</span>
  <span m='767790'>a</span> <span m='767830'>binary</span> <span m='768160'>search</span>
  <span m='768290'>tree,</span> <span m='768510'>but</span> <span m='768630'>it's</span>
  <span m='769050'>quite</span> <span m='769410'>difficult</span> <span m='769970'>as</span>
  <span m='770220'>you</span> <span m='770790'>might</span> <span m='770970'>imagine.</span>
  <span m='771540'>Or</span> <span m='771780'>it's</span> <span m='772080'>difficult,</span>
  <span m='772590'>let's</span> <span m='772740'>say</span> <span m='773010'>not</span>
  <span m='774000'>necessarily</span> <span m='774630'>super</span> <span m='774960'>hard.</span>
  <span m='776400'>If</span> <span m='776640'>you</span> <span m='776760'>don't</span>
  <span m='777240'>need</span> <span m='777510'>to</span> <span m='777630'>do</span>
  <span m='777780'>it</span> <span m='777840'>in</span> <span m='777930'>a</span>
  <span m='777990'>binary</span> <span m='778260'>search</span> <span m='778520'>tree</span>
  <span m='778640'>model,</span> <span m='778980'>an</span> <span m='779100'>easy</span>
  <span m='779400'>way</span> <span m='779580'>to</span> <span m='779670'>do</span>
  <span m='779880'>it</span> <span m='780540'>is</span> <span m='780750'>with</span>
  <span m='781110'>what's</span> <span m='781290'>called</span> <span m='781470'>a</span>
  <span m='781540'>level linked</span> <span m='782020'>tree.</span> </p><p><span
  m='785040'>So a</span> <span m='785250'>level link</span> <span m='785670'>tree</span>
  <span m='785850'>looks</span> <span m='786030'>like</span> <span m='786180'>this,</span>
  <span m='786390'>and</span> <span m='786510'>I</span> <span m='786630'>add</span>
  <span m='787050'>pointers</span> <span m='787740'>between</span> <span m='788220'>adjacent</span>
  <span m='788670'>nodes</span> <span m='788940'>in</span> <span m='789030'>the</span>
  <span m='789120'>same</span> <span m='789360'>level.</span> <span m='790620'>This</span>
  <span m='790800'>is</span> <span m='790890'>a</span> <span m='790950'>pointer</span>
  <span m='791250'>machine</span> <span m='791550'>data</span> <span m='791730'>structure,</span>
  <span m='791990'>it's</span> <span m='792150'>not</span> <span m='792390'>a</span>
  <span m='792450'>binary</span> <span m='792750'>search</span> <span m='793020'>tree,</span>
  <span m='793650'>because</span> <span m='793830'>binary</span> <span m='794130'>search</span>
  <span m='794340'>trees</span> <span m='794580'>we</span> <span m='794730'>only</span>
  <span m='795030'>allowed</span> <span m='795270'>to</span> <span m='795390'>do</span>
  <span m='795570'>walk</span> <span m='795810'>left,</span> <span m='796020'>walk</span>
  <span m='796260'>right,</span> <span m='796470'>walk</span> <span m='796710'>parent,</span>
  <span m='798120'>But</span> <span m='798690'>it's</span> <span m='798930'>an</span>
  <span m='799050'>easy</span> <span m='799320'>way</span> <span m='799500'>to</span>
  <span m='799620'>do</span> <span m='799740'>dynamic</span> <span m='800130'>finger.</span>
  <span m='800470'>You</span> <span m='800580'>start</span> <span m='800910'>from</span>
  <span m='801090'>somewhere,</span> <span m='801900'>you</span> <span m='801960'>basically</span>
  <span m='803400'>walk</span> <span m='803790'>up</span> <span m='803940'>to</span>
  <span m='804060'>the</span> <span m='804150'>right</span> <span m='804330'>level,</span>
  <span m='804660'>move</span> <span m='804930'>over,</span> <span m='805380'>walk</span>
  <span m='805620'>back</span> <span m='805830'>down,</span> <span m='807630'>and</span>
  <span m='808290'>you</span> <span m='809220'>can</span> <span m='809400'>do</span>
  <span m='810660'>a</span> <span m='810780'>search</span> <span m='811050'>for</span>
  <span m='811170'>x i</span> <span m='811590'>from</span> <span m='811940'>x i</span>
  <span m='812310'>minus</span> <span m='812610'>one</span> <span m='813020'>relatively</span>
  <span m='813840'>quickly.</span> <span m='814590'>It turns</span> <span m='814890'>out</span>
  <span m='815010'>this</span> <span m='815160'>can</span> <span m='815370'>be</span>
  <span m='815490'>stimulated</span> <span m='815940'>by</span> <span m='816090'>a</span>
  <span m='816150'>binary</span> <span m='816450'>search</span> <span m='816720'>tree,</span>
  <span m='816960'>but</span> <span m='817110'>we</span> <span m='817230'>won't</span>
  <span m='817380'>go</span> <span m='817530'>into</span> <span m='817740'>it</span>
  <span m='817860'>here.</span> <span m='818970'>Lots</span> <span m='819180'>of</span>
  <span m='819270'>fun</span> <span m='819630'>puzzles</span> <span m='820020'>here.</span>
  </p><p><span m='822040'>Let's</span> <span m='822180'>move</span> <span m='822420'>on</span>
  <span m='822660'>to</span> <span m='823050'>some</span> <span m='823260'>more</span>
  <span m='823470'>bounds</span> <span m='828180'>or</span> <span m='829500'>properties.</span>
  <span m='838320'>So,</span> <span m='839310'>next</span> <span m='839820'>property</span>
  <span m='840180'>is</span> <span m='840240'>called</span> <span m='840910'>the</span>
  <span m='841080'>entropy</span> <span m='841410'>property,</span> <span m='841890'>or</span>
  <span m='842010'>entropy</span> <span m='842340'>bound.</span> <span m='844010'>And</span>
  <span m='844200'>it</span> <span m='844260'>says</span> <span m='844710'>if</span>
  <span m='845100'>key</span> <span m='845430'>k</span> <span m='846780'>appears</span>
  <span m='849590'>p</span> <span m='850020'>sub</span> <span m='850440'>k</span>
  <span m='850710'>fraction</span> <span m='851160'>of</span> <span m='851280'>the</span>
  <span m='851370'>time,</span> <span m='857310'>then</span> <span m='857760'>I'd</span>
  <span m='858000'>like</span> <span m='858240'>to</span> <span m='859110'>achieve</span>
  <span m='859680'>a</span> <span m='859740'>bound</span> <span m='860700'>of</span>
  <span m='861390'>entropy</span> <span m='866172'>p</span> <span m='866640'>k</span>
  <span m='867480'>log</span> <span m='867900'>one</span> <span m='868060'>over</span>
  <span m='868250'>p</span> <span m='868510'>k</span> <span m='870220'>per</span>
  <span m='870570'>operation.</span> <span m='871290'>This</span> <span m='871470'>is,</span>
  <span m='871800'>everything</span> <span m='872340'>here</span> <span m='872670'>today</span>
  <span m='872970'>will</span> <span m='873090'>be</span> <span m='873400'>amortized.</span>
  </p><p><span m='876780'>So,</span> <span m='877470'>if</span> <span m='877590'>you</span>
  <span m='877650'>haven't</span> <span m='877830'>seen</span> <span m='878010'>entropy,</span>
  <span m='878400'>that's</span> <span m='878670'>the</span> <span m='878760'>definition.</span>
  <span m='879905'>It's the</span> <span m='880390'>entropy</span> <span m='880830'>of</span>
  <span m='880980'>this</span> <span m='881280'>distribution.</span> <span m='881970'>We're</span>
  <span m='882090'>thinking</span> <span m='882750'>of</span> <span m='882890'>these
  as</span> <span m='883230'>probabilities,</span> <span m='884040'>although</span>
  <span m='884250'>they're</span> <span m='884370'>not</span> <span m='884520'>really</span>
  <span m='884730'>probabilities.</span> <span m='886870'>They're,</span> <span m='887740'>because</span>
  <span m='887970'>this is</span> <span m='888270'>over</span> <span m='888570'>a</span>
  <span m='888840'>particular</span> <span m='890550'>sample.</span> <span m='891150'>We</span>
  <span m='891270'>have</span> <span m='891980'>this</span> <span m='892110'>sequence</span>
  <span m='892620'>x1</span> <span m='892980'>to</span> <span m='893040'>x n,</span>
  <span m='893490'>There's</span> <span m='893640'>no</span> <span m='893820'>randomness</span>
  <span m='894360'>here,</span> <span m='894670'>but</span> <span m='894690'>we</span>
  <span m='894780'>just</span> <span m='894930'>measure</span> <span m='895770'>what</span>
  <span m='895920'>is</span> <span m='896040'>the</span> <span m='896130'>fraction,</span>
  <span m='896610'>what</span> <span m='896700'>is</span> <span m='896790'>sort</span>
  <span m='897030'>of</span> <span m='897120'>the</span> <span m='897210'>observed</span>
  <span m='897630'>probability</span> <span m='898710'>for</span> <span m='898830'>each</span>
  <span m='898950'>of</span> <span m='899010'>these</span> <span m='899160'>x</span>
  <span m='899380'>i's.</span> <span m='900210'>And</span> <span m='900330'>then</span>
  <span m='900480'>just</span> <span m='900720'>say,</span> <span m='900960'>what</span>
  <span m='901140'>is</span> <span m='901290'>the,</span> <span m='903360'>what</span>
  <span m='903450'>is</span> <span m='903540'>the</span> <span m='903600'>entropy</span>
  <span m='903930'>of</span> <span m='903990'>that</span> <span m='904140'>distribution?</span>
  <span m='904620'>In</span> <span m='904680'>the</span> <span m='904770'>worst</span>
  <span m='904980'>case</span> <span m='905430'>it's log n,</span> <span m='906510'>if</span>
  <span m='906630'>say</span> <span m='906870'>everybody's</span> <span m='907380'>equally</span>
  <span m='907740'>likely,</span> <span m='908100'>everyone's</span> <span m='908430'>accessed</span>
  <span m='908820'>once,</span> <span m='909640'>or</span> <span m='910010'>the</span>
  <span m='910110'>same</span> <span m='910320'>number</span> <span m='910530'>of</span>
  <span m='910620'>times.</span> </p><p><span m='911730'>But</span> <span m='911970'>if</span>
  <span m='912120'>it's</span> <span m='912450'>highly</span> <span m='912900'>skewed,</span>
  <span m='913290'>like if</span> <span m='913560'>only</span> <span m='913800'>one</span>
  <span m='914130'>element</span> <span m='914460'>is</span> <span m='914580'>accessed,</span>
  <span m='914940'>the</span> <span m='915030'>entropy</span> <span m='915360'>will</span>
  <span m='915480'>be</span> <span m='915600'>constant.</span> <span m='916640'>If</span>
  <span m='916840'>a</span> <span m='916890'>small</span> <span m='917160'>number</span>
  <span m='917370'>of</span> <span m='917430'>elements</span> <span m='917790'>are</span>
  <span m='917850'>accessed,</span> <span m='918270'>entropy</span> <span m='918630'>will</span>
  <span m='918720'>be</span> <span m='918870'>constant.</span> <span m='921940'>So</span>
  <span m='922020'>this</span> <span m='922230'>can</span> <span m='922380'>be</span>
  <span m='922500'>achieved,</span> <span m='923070'>and</span> <span m='923220'>in</span>
  <span m='923310'>fact,</span> <span m='924090'>if</span> <span m='924270'>you</span>
  <span m='924510'>disallow</span> <span m='925050'>rotations,</span> <span m='926630'>so</span>
  <span m='926710'>if</span> <span m='926820'>I</span> <span m='926910'>change</span>
  <span m='927270'>the</span> <span m='927360'>model</span> <span m='927690'>to</span>
  <span m='927810'>forbid</span> <span m='928140'>rotations,</span> <span m='928980'>all</span>
  <span m='929190'>I</span> <span m='929280'>get</span> <span m='929430'>to</span>
  <span m='929550'>do</span> <span m='929700'>is</span> <span m='929790'>set</span>
  <span m='930000'>up</span> <span m='930120'>some</span> <span m='930480'>binary</span>
  <span m='930840'>search</span> <span m='931110'>tree,</span> <span m='931740'>and</span>
  <span m='931890'>then</span> <span m='932040'>I</span> <span m='932100'>have</span>
  <span m='932370'>to</span> <span m='932490'>walk</span> <span m='932730'>left,</span>
  <span m='932970'>walk</span> <span m='933180'>right,</span> <span m='933360'>walk</span>
  <span m='933570'>parent,</span> <span m='934460'>from</span> <span m='934880'>in</span>
  <span m='935100'>that</span> <span m='935280'>binary</span> <span m='935630'>search</span>
  <span m='935780'>tree</span> <span m='936480'>to</span> <span m='936690'>do</span>
  <span m='936930'>this.</span> </p><p><span m='937680'>So</span> <span m='937770'>if</span>
  <span m='937860'>I</span> <span m='937920'>get</span> <span m='938070'>to</span>
  <span m='938160'>see</span> <span m='938580'>the</span> <span m='938810'>x i's</span>
  <span m='939780'>then</span> <span m='939900'>I</span> <span m='939960'>get</span>
  <span m='940110'>to</span> <span m='940200'>build</span> <span m='940620'>a</span>
  <span m='941100'>binary</span> <span m='941400'>search</span> <span m='941640'>tree.</span>
  <span m='943020'>One</span> <span m='943890'>binary</span> <span m='944220'>search</span>
  <span m='944460'>tree.</span> <span m='945210'>This</span> <span m='945390'>is</span>
  <span m='945480'>what's</span> <span m='945660'>called</span> <span m='945850'>the</span>
  <span m='945930'>static</span> <span m='946470'>optimal,</span> <span m='947070'>when</span>
  <span m='947160'>you're</span> <span m='947280'>not</span> <span m='947460'>allowed</span>
  <span m='947670'>to</span> <span m='947760'>change</span> <span m='948120'>the</span>
  <span m='948240'>tree</span> <span m='948540'>as</span> <span m='948690'>you're</span>
  <span m='948810'>doing</span> <span m='949020'>searches.</span> <span m='950310'>Entropy</span>
  <span m='950760'>is</span> <span m='950880'>the</span> <span m='951000'>best</span>
  <span m='951240'>bound</span> <span m='951530'>you</span> <span m='951630'>can</span>
  <span m='951780'>get.</span> <span m='952730'>And</span> <span m='952830'>roughly</span>
  <span m='953130'>speaking,</span> <span m='954690'>key</span> <span m='954930'>k</span>
  <span m='955500'>appears</span> <span m='956100'>at</span> <span m='956280'>height,</span>
  <span m='956940'>or</span> <span m='957210'>depth,</span> <span m='957990'>log</span>
  <span m='958320'>one</span> <span m='958470'>over</span> <span m='958650'>p</span>
  <span m='958850'>k</span> <span m='959130'>in</span> <span m='959250'>the</span>
  <span m='959340'>tree,</span> <span m='960390'>maybe</span> <span m='960630'>plus</span>
  <span m='960960'>one.</span> <span m='961470'>And</span> <span m='961590'>you</span>
  <span m='961710'>can</span> <span m='961830'>show</span> <span m='962070'>there's</span>
  <span m='962280'>always</span> <span m='962550'>a</span> <span m='962610'>tree</span>
  <span m='963360'>where</span> <span m='963480'>every</span> <span m='963750'>node</span>
  <span m='966090'>ends</span> <span m='966300'>up</span> <span m='966480'>at</span>
  <span m='966770'>depth log</span> <span m='967100'>one over</span> <span m='967400'>p
  k.</span> <span m='968580'>Again,</span> <span m='969000'>not</span> <span m='969150'>hard,</span>
  <span m='970230'>but</span> <span m='970350'>we</span> <span m='970470'>won't</span>
  <span m='970680'>do</span> <span m='970770'>it</span> <span m='970860'>here.</span>
  </p><p><span m='973470'>OK,</span> <span m='975260'>a</span> <span m='976140'>related</span>
  <span m='976530'>property,</span> <span m='977690'>it's called</span> <span m='977920'>the</span>
  <span m='978390'>working</span> <span m='978840'>set</span> <span m='979050'>property.</span>
  <span m='988770'>Little</span> <span m='989100'>bit</span> <span m='989250'>harder</span>
  <span m='989520'>to</span> <span m='989640'>state.</span> <span m='1023020'>For</span>
  <span m='1023260'>each</span> <span m='1023980'>search</span> <span m='1024310'>we</span>
  <span m='1024400'>do</span> <span m='1024710'>x i,</span> <span m='1025900'>we're</span>
  <span m='1026079'>going</span> <span m='1026290'>to</span> <span m='1026410'>see</span>
  <span m='1026619'>when</span> <span m='1027030'>that's</span> <span m='1027310'>some</span>
  <span m='1027609'>key,</span> <span m='1028510'>when</span> <span m='1028690'>was</span>
  <span m='1028810'>the</span> <span m='1028930'>last</span> <span m='1029290'>time</span>
  <span m='1029890'>that</span> <span m='1030099'>key</span> <span m='1030970'>was</span>
  <span m='1031180'>accessed.</span> <span m='1032180'>So,</span> <span m='1032380'>in</span>
  <span m='1032530'>our</span> <span m='1032619'>space-time</span> <span m='1033099'>diagram</span>
  <span m='1036369'>we</span> <span m='1036520'>have</span> <span m='1037060'>some</span>
  <span m='1037390'>access</span> <span m='1037960'>at</span> <span m='1038079'>time</span>
  <span m='1038619'>i,</span> <span m='1039215'>we</span> <span m='1039480'>want</span>
  <span m='1039760'>to</span> <span m='1039819'>look</span> <span m='1040030'>backwards</span>
  <span m='1040569'>in</span> <span m='1040690'>time</span> <span m='1041140'>to</span>
  <span m='1041260'>the</span> <span m='1041349'>last</span> <span m='1041680'>time</span>
  <span m='1041980'>that</span> <span m='1042410'>key</span> <span m='1042609'>was</span>
  <span m='1042790'>accessed.</span> <span m='1044319'>Say</span> <span m='1044530'>that</span>
  <span m='1044710'>was,</span> <span m='1046960'>well</span> <span m='1047079'>some</span>
  <span m='1047290'>other</span> <span m='1047440'>time</span> <span m='1047740'>j,</span>
  <span m='1049480'>and</span> <span m='1049840'>in</span> <span m='1049990'>this</span>
  <span m='1050140'>interval</span> <span m='1050860'>we</span> <span m='1050980'>want</span>
  <span m='1051160'>to</span> <span m='1051220'>know,</span> <span m='1051760'>how</span>
  <span m='1052030'>many</span> <span m='1052300'>distinct</span> <span m='1052840'>keys</span>
  <span m='1054010'>were</span> <span m='1054190'>accessed.</span> <span m='1056560'>So</span>
  <span m='1057510'>it's</span> <span m='1058000'>at</span> <span m='1058120'>most,</span>
  <span m='1058540'>i</span> <span m='1058730'>minus</span> <span m='1058920'>j,</span>
  <span m='1059890'>but</span> <span m='1060490'>maybe</span> <span m='1060940'>there</span>
  <span m='1061060'>were</span> <span m='1061180'>some</span> <span m='1061420'>repeated</span>
  <span m='1061840'>accesses,</span> <span m='1062440'>we</span> <span m='1062560'>only</span>
  <span m='1062740'>count</span> <span m='1062950'>those</span> <span m='1063160'>as</span>
  <span m='1063280'>one.</span> </p><p><span m='1064340'>So</span> <span m='1064420'>how</span>
  <span m='1064600'>many</span> <span m='1064900'>different</span> <span m='1065260'>keys</span>
  <span m='1065740'>were</span> <span m='1065920'>accessed</span> <span m='1066970'>during</span>
  <span m='1067210'>that</span> <span m='1067330'>time</span> <span m='1067600'>interval?</span>
  <span m='1068500'>Claim</span> <span m='1068770'>is,</span> <span m='1068890'>we</span>
  <span m='1069010'>only</span> <span m='1069220'>have</span> <span m='1069310'>to</span>
  <span m='1069430'>pay</span> <span m='1069670'>log</span> <span m='1070000'>of</span>
  <span m='1070120'>that.</span> <span m='1072260'>So</span> <span m='1072340'>what</span>
  <span m='1072460'>this</span> <span m='1072640'>means,</span> <span m='1073120'>what</span>
  <span m='1073270'>this</span> <span m='1073420'>implies,</span> <span m='1074020'>is</span>
  <span m='1074140'>in</span> <span m='1074230'>particular,</span> <span m='1074880'>if</span>
  <span m='1074920'>you're</span> <span m='1075040'>only</span> <span m='1075340'>accessing</span>
  <span m='1075880'>say</span> <span m='1076960'>k</span> <span m='1077260'>different</span>
  <span m='1077590'>elements</span> <span m='1078940'>at</span> <span m='1079060'>all,</span>
  <span m='1079690'>and</span> <span m='1079780'>you</span> <span m='1079960'>ignore</span>
  <span m='1080380'>all</span> <span m='1080500'>the</span> <span m='1080620'>other</span>
  <span m='1080800'>elements,</span> <span m='1081380'>then</span> <span m='1081420'>you'll</span>
  <span m='1081580'>only</span> <span m='1081820'>pay</span> <span m='1082040'>log</span>
  <span m='1082330'>k</span> <span m='1083320'>per</span> <span m='1083470'>operation.</span>
  <span m='1084040'>That's</span> <span m='1084220'>why</span> <span m='1084430'>it's</span>
  <span m='1084580'>sort</span> <span m='1084730'>of</span> <span m='1084820'>a</span>
  <span m='1084910'>working</span> <span m='1085240'>set.</span> <span m='1085450'>If</span>
  <span m='1085570'>you're</span> <span m='1085660'>focusing</span> <span m='1086140'>your</span>
  <span m='1086260'>attention</span> <span m='1086620'>on</span> <span m='1086740'>k
  elements</span> <span m='1087250'>for</span> <span m='1087400'>a</span> <span m='1087430'>while,</span>
  <span m='1088230'>you</span> <span m='1088400'>only</span> <span m='1088570'>pay</span>
  <span m='1088780'>log</span> <span m='1089030'>k.</span> </p><p><span m='1090430'>But</span>
  <span m='1090580'>in</span> <span m='1090670'>general,</span> <span m='1091360'>for</span>
  <span m='1091540'>any</span> <span m='1091720'>access</span> <span m='1091990'>sequence</span>
  <span m='1092350'>you</span> <span m='1092440'>can</span> <span m='1092560'>compute,</span>
  <span m='1092950'>what</span> <span m='1093160'>is</span> <span m='1093280'>the</span>
  <span m='1093370'>working</span> <span m='1093670'>set</span> <span m='1093880'>costs,</span>
  <span m='1094210'>which</span> <span m='1094360'>is</span> <span m='1094450'>you</span>
  <span m='1094570'>sum</span> <span m='1094900'>over</span> <span m='1095140'>all</span>
  <span m='1095260'>the</span> <span m='1095410'>i's</span> <span m='1096270'>of</span>
  <span m='1096460'>log</span> <span m='1096730'>t</span> <span m='1097030'>i,</span>
  <span m='1097540'>that</span> <span m='1097750'>is</span> <span m='1097870'>your</span>
  <span m='1098020'>total</span> <span m='1098380'>cost</span> <span m='1098910'>for</span>
  <span m='1099100'>the</span> <span m='1099190'>access</span> <span m='1099460'>sequence.</span>
  <span m='1099940'>Divide</span> <span m='1100270'>by</span> <span m='1100450'>n,</span>
  <span m='1100660'>that's</span> <span m='1100840'>the</span> <span m='1100930'>amortized</span>
  <span m='1101380'>cost.</span> <span m='1103470'>OK?</span> <span m='1104920'>That's</span>
  <span m='1105070'>another</span> <span m='1105310'>nice</span> <span m='1105520'>property,</span>
  <span m='1106150'>not</span> <span m='1106390'>so</span> <span m='1106630'>obvious</span>
  <span m='1107230'>is</span> <span m='1107410'>that</span> <span m='1107590'>working</span>
  <span m='1107950'>set</span> <span m='1108190'>implies</span> <span m='1109450'>the</span>
  <span m='1109570'>entropy</span> <span m='1109930'>bound,</span> <span m='1110240'>so</span>
  <span m='1110380'>this</span> <span m='1110560'>is</span> <span m='1110680'>a</span>
  <span m='1110740'>stronger</span> <span m='1111160'>property.</span> </p><p><span
  m='1113350'>I</span> <span m='1113410'>guess</span> <span m='1113590'>dynamic</span>
  <span m='1114010'>finger</span> <span m='1114340'>implies</span> <span m='1114910'>sequential</span>
  <span m='1115420'>access,</span> <span m='1116800'>but</span> <span m='1116950'>there's</span>
  <span m='1117130'>no</span> <span m='1117280'>relation</span> <span m='1117730'>between</span>
  <span m='1118270'>working</span> <span m='1118630'>set</span> <span m='1119500'>and</span>
  <span m='1119620'>dynamic</span> <span m='1120010'>finger.</span> <span m='1120950'>In</span>
  <span m='1121230'>fact,</span> <span m='1121470'>they're</span> <span m='1121570'>kind</span>
  <span m='1121720'>of</span> <span m='1122170'>transposes</span> <span m='1122830'>of</span>
  <span m='1122950'>each</span> <span m='1123100'>other.</span> <span m='1123760'>Working</span>
  <span m='1124090'>set</span> <span m='1124300'>is</span> <span m='1124420'>about,</span>
  <span m='1125380'>if</span> <span m='1125530'>you</span> <span m='1125650'>access</span>
  <span m='1126030'>a</span> <span m='1126100'>key</span> <span m='1126400'>that</span>
  <span m='1126550'>was</span> <span m='1126700'>accessed</span> <span m='1127060'>recently,</span>
  <span m='1128170'>then</span> <span m='1128350'>it's</span> <span m='1128470'>fast.</span>
  <span m='1129520'>Dynamic</span> <span m='1129880'>finger is</span> <span m='1130360'>saying,</span>
  <span m='1130780'>if</span> <span m='1130960'>you</span> <span m='1131110'>access</span>
  <span m='1131470'>a</span> <span m='1131530'>key</span> <span m='1132430'>that</span>
  <span m='1132610'>is</span> <span m='1132730'>close</span> <span m='1133210'>in</span>
  <span m='1133390'>space</span> <span m='1134200'>to</span> <span m='1134320'>the</span>
  <span m='1134410'>previous</span> <span m='1134800'>access,</span> <span m='1136330'>so</span>
  <span m='1137170'>here</span> <span m='1137410'>we're</span> <span m='1137530'>looking</span>
  <span m='1137770'>at</span> <span m='1137860'>a</span> <span m='1137920'>key</span>
  <span m='1138160'>and</span> <span m='1138250'>basically</span> <span m='1139240'>in</span>
  <span m='1139390'>the</span> <span m='1139480'>very</span> <span m='1139870'>previous</span>
  <span m='1140305'>time</span> <span m='1140740'>step</span> <span m='1141790'>we're</span>
  <span m='1141880'>looking</span> <span m='1142210'>at</span> <span m='1142390'>how</span>
  <span m='1142660'>far</span> <span m='1142930'>away</span> <span m='1143140'>it</span>
  <span m='1143230'>was</span> <span m='1143530'>vertically,</span> <span m='1144400'>here</span>
  <span m='1144580'>we're</span> <span m='1144670'>looking</span> <span m='1144880'>at</span>
  <span m='1144970'>how</span> <span m='1145120'>far</span> <span m='1145330'>away</span>
  <span m='1145510'>it</span> <span m='1145570'>was</span> <span m='1145780'>horizontally.</span>
  <span m='1147100'>So</span> <span m='1147250'>they're</span> <span m='1147400'>almost</span>
  <span m='1147670'>duals</span> <span m='1148000'>of</span> <span m='1148090'>each</span>
  <span m='1148270'>other.</span> </p><p><span m='1149680'>Be</span> <span m='1149800'>nice</span>
  <span m='1150130'>if</span> <span m='1150280'>you</span> <span m='1150400'>could</span>
  <span m='1150550'>have</span> <span m='1150790'>one</span> <span m='1151240'>property</span>
  <span m='1151870'>that</span> <span m='1152200'>included</span> <span m='1153430'>both</span>
  <span m='1153700'>dynamic</span> <span m='1154090'>finger</span> <span m='1154930'>and</span>
  <span m='1155110'>working</span> <span m='1155380'>set.</span> <span m='1155710'>I</span>
  <span m='1155800'>should</span> <span m='1155980'>mention,</span> <span m='1156700'>again</span>
  <span m='1157000'>this</span> <span m='1157180'>is</span> <span m='1157270'>not</span>
  <span m='1157450'>obvious</span> <span m='1157810'>how</span> <span m='1157960'>to</span>
  <span m='1158050'>do</span> <span m='1158230'>it</span> <span m='1158290'>with</span>
  <span m='1158470'>a</span> <span m='1158530'>binary</span> <span m='1158860'>search</span>
  <span m='1159130'>tree,</span> <span m='1159700'>but</span> <span m='1159850'>it</span>
  <span m='1159940'>can</span> <span m='1160060'>be</span> <span m='1160180'>done.</span>
  <span m='1161570'>Leave</span> <span m='1161710'>it</span> <span m='1161800'>at</span>
  <span m='1161890'>that.</span> <span m='1162840'>We'll</span> <span m='1163120'>see</span>
  <span m='1163450'>eventually</span> <span m='1164350'>some</span> <span m='1164530'>trees</span>
  <span m='1164770'>that</span> <span m='1164890'>have</span> <span m='1165090'>it.</span>
  </p><p><span m='1168640'>For</span> <span m='1168790'>now</span> <span m='1169030'>I</span>
  <span m='1169060'>just</span> <span m='1169270'>want</span> <span m='1169390'>to</span>
  <span m='1169480'>cover</span> <span m='1169750'>what</span> <span m='1169960'>are</span>
  <span m='1170050'>the</span> <span m='1170170'>conceivable</span> <span m='1170860'>goals</span>
  <span m='1171370'>we</span> <span m='1171520'>should</span> <span m='1171730'>aim</span>
  <span m='1171880'>for.</span> <span m='1172940'>All right,</span> <span m='1173020'>log
  n</span> <span m='1173500'>is</span> <span m='1173680'>too</span> <span m='1173860'>easy,</span>
  <span m='1174280'>so</span> <span m='1174490'>we</span> <span m='1174580'>need</span>
  <span m='1175000'>more</span> <span m='1175360'>challenging</span> <span m='1175840'>goals.</span>
  <span m='1179380'>So</span> <span m='1179620'>the</span> <span m='1179710'>next</span>
  <span m='1180100'>property,</span> <span m='1180430'>it</span> <span m='1180760'>was</span>
  <span m='1180940'>introduced,</span> <span m='1181870'>this</span> <span m='1182050'>is</span>
  <span m='1182260'>we're</span> <span m='1182380'>getting</span> <span m='1182590'>into</span>
  <span m='1182830'>more</span> <span m='1183010'>recent</span> <span m='1183310'>territory,</span>
  <span m='1183730'>2001,</span> <span m='1188710'>it's</span> <span m='1188830'>called</span>
  <span m='1189010'>the</span> <span m='1189100'>unified</span> <span m='1189580'>property.</span>
  <span m='1190870'>Natural</span> <span m='1191230'>name,</span> <span m='1191860'>and</span>
  <span m='1192040'>it</span> <span m='1192280'>tries</span> <span m='1192580'>to</span>
  <span m='1192700'>unify</span> <span m='1193300'>dynamic</span> <span m='1193720'>finger</span>
  <span m='1194770'>with</span> <span m='1195480'>working</span> <span m='1195760'>set.</span>
  <span m='1197560'>And</span> <span m='1198040'>the</span> <span m='1198160'>rough</span>
  <span m='1198400'>idea</span> <span m='1198730'>is,</span> <span m='1198910'>that</span>
  <span m='1199030'>if</span> <span m='1199210'>you</span> <span m='1199330'>access</span>
  <span m='1199810'>a</span> <span m='1199900'>key</span> <span m='1200290'>that</span>
  <span m='1201430'>is</span> <span m='1201520'>close</span> <span m='1201970'>in</span>
  <span m='1202090'>space</span> <span m='1202630'>to</span> <span m='1202780'>a</span>
  <span m='1202840'>key</span> <span m='1203050'>that</span> <span m='1203140'>was</span>
  <span m='1203290'>accessed</span> <span m='1203650'>recently</span> <span m='1204160'>in</span>
  <span m='1204280'>time,</span> <span m='1205300'>then</span> <span m='1205570'>your</span>
  <span m='1205720'>access</span> <span m='1206020'>should</span> <span m='1206200'>be</span>
  <span m='1206320'>fast.</span> <span m='1208010'>So,</span> <span m='1209560'>here's</span>
  <span m='1209770'>the</span> <span m='1209860'>formal</span> <span m='1210220'>statement.</span>
  </p><p><span m='1256790'>So</span> <span m='1256870'>here's</span> <span m='1257170'>the</span>
  <span m='1257260'>unified</span> <span m='1257740'>bound.</span> <span m='1260210'>Let's
  draw</span> <span m='1260520'>a</span> <span m='1260830'>picture.</span> <span m='1263060'>So</span>
  <span m='1263140'>here</span> <span m='1264310'>we're</span> <span m='1264430'>accessing</span>
  <span m='1265090'>x i</span> <span m='1266245'>at</span> <span m='1266740'>time</span>
  <span m='1267050'>i,</span> <span m='1269440'>sorry</span> <span m='1270460'>j.</span>
  <span m='1271740'>Change</span> <span m='1272310'>of</span> <span m='1272450'>notation.</span>
  <span m='1274450'>Time</span> <span m='1274720'>j.</span> <span m='1274930'>We</span>
  <span m='1275020'>want</span> <span m='1275170'>to</span> <span m='1275230'>evaluate</span>
  <span m='1275620'>the</span> <span m='1275710'>cost</span> <span m='1276040'>of</span>
  <span m='1276160'>x j,</span> <span m='1278260'>and</span> <span m='1278920'>we're</span>
  <span m='1279100'>basically</span> <span m='1279460'>going</span> <span m='1279730'>to</span>
  <span m='1279880'>look</span> <span m='1280510'>in--</span> <span m='1282840'>I
  guess</span> <span m='1283240'>one</span> <span m='1283390'>way</span> <span m='1283480'>to</span>
  <span m='1283600'>think</span> <span m='1283750'>of</span> <span m='1283870'>it</span>
  <span m='1283960'>is</span> <span m='1284110'>this</span> <span m='1284290'>cone.</span>
  <span m='1286750'>90</span> <span m='1286990'>degree</span> <span m='1287530'>cone,</span>
  <span m='1287790'>where</span> <span m='1287890'>these</span> <span m='1288430'>are</span>
  <span m='1288600'>45</span> <span m='1289060'>degree</span> <span m='1289330'>angles.</span>
  <span m='1291010'>And</span> <span m='1291160'>if</span> <span m='1291250'>there's</span>
  <span m='1291400'>something--</span> <span m='1293590'>and</span> <span m='1293860'>look</span>
  <span m='1294010'>at</span> <span m='1294100'>the</span> <span m='1294190'>first</span>
  <span m='1294640'>thing</span> <span m='1294850'>that</span> <span m='1294940'>you</span>
  <span m='1295060'>hit</span> <span m='1295270'>in</span> <span m='1295420'>that</span>
  <span m='1295630'>cone.</span> <span m='1297310'>Is that</span> <span m='1297760'>the
  right way</span> <span m='1298210'>to</span> <span m='1298300'>think</span> <span
  m='1298480'>of</span> <span m='1298600'>it?</span> <span m='1298960'>Maybe</span>
  <span m='1299210'>not.</span> </p><p><span m='1301150'>It's</span> <span m='1301390'>like</span>
  <span m='1301540'>you're</span> <span m='1301660'>growing</span> <span m='1302050'>a</span>
  <span m='1302110'>box,</span> <span m='1303220'>this is</span> <span m='1303490'>probably</span>
  <span m='1303760'>more</span> <span m='1303940'>accurate,</span> <span m='1304810'>and</span>
  <span m='1304960'>you</span> <span m='1305050'>find</span> <span m='1305350'>the</span>
  <span m='1305470'>first</span> <span m='1305890'>key</span> <span m='1306100'>that</span>
  <span m='1306250'>you</span> <span m='1306580'>hit</span> <span m='1306820'>in</span>
  <span m='1306940'>that</span> <span m='1307050'>box.</span> <span m='1307420'>It's</span>
  <span m='1307540'>a</span> <span m='1307630'>little</span> <span m='1307840'>more</span>
  <span m='1307990'>subtle</span> <span m='1308230'>than</span> <span m='1308320'>that</span>
  <span m='1308470'>because</span> <span m='1308650'>we're</span> <span m='1308740'>only</span>
  <span m='1308950'>counting</span> <span m='1309250'>distinct</span> <span m='1309670'>keys,</span>
  <span m='1310980'>and</span> <span m='1311050'>let's</span> <span m='1311200'>say</span>
  <span m='1311320'>you</span> <span m='1311440'>find</span> <span m='1312460'>this</span>
  <span m='1312700'>key,</span> <span m='1314200'>and</span> <span m='1314320'>this</span>
  <span m='1314470'>key</span> <span m='1314650'>is</span> <span m='1314800'>good</span>
  <span m='1315130'>because</span> <span m='1316720'>it's</span> <span m='1317800'>temporal</span>
  <span m='1318280'>distance,</span> <span m='1319460'>this</span> <span m='1319930'>time,</span>
  <span m='1322240'>is</span> <span m='1322420'>only</span> <span m='1322660'>this</span>
  <span m='1322840'>big.</span> <span m='1323470'>It's</span> <span m='1323590'>spatial</span>
  <span m='1323990'>distance is</span> <span m='1324460'>only</span> <span m='1324670'>this</span>
  <span m='1324850'>big.</span> <span m='1325600'>What</span> <span m='1325720'>we're</span>
  <span m='1325840'>going</span> <span m='1325950'>to</span> <span m='1326020'>pay</span>
  <span m='1326230'>is,</span> <span m='1326380'>log</span> <span m='1327580'>of</span>
  <span m='1327760'>the</span> <span m='1327880'>sum</span> <span m='1328600'>of</span>
  <span m='1328900'>the</span> <span m='1329050'>spatial</span> <span m='1329590'>distance,</span>
  <span m='1330550'>and</span> <span m='1330700'>the</span> <span m='1330790'>temporal</span>
  <span m='1331270'>distance.</span> </p><p><span m='1332020'>And</span> <span m='1332140'>temporal</span>
  <span m='1332500'>distance</span> <span m='1332780'>is</span> <span m='1333040'>measured</span>
  <span m='1333370'>as</span> <span m='1333520'>the</span> <span m='1333610'>number</span>
  <span m='1333820'>of</span> <span m='1333910'>distinct</span> <span m='1334390'>keys</span>
  <span m='1334750'>accessed</span> <span m='1335710'>in</span> <span m='1335830'>this</span>
  <span m='1336010'>time</span> <span m='1336250'>interval.</span> <span m='1339560'>So,</span>
  <span m='1339880'>as</span> <span m='1340090'>long</span> <span m='1340390'>as</span>
  <span m='1340900'>there</span> <span m='1341080'>is</span> <span m='1341230'>some</span>
  <span m='1341650'>key</span> <span m='1342550'>in</span> <span m='1342670'>the</span>
  <span m='1342790'>recent</span> <span m='1343150'>past</span> <span m='1343660'>that</span>
  <span m='1343810'>is</span> <span m='1343930'>close</span> <span m='1344260'>in</span>
  <span m='1344350'>space,</span> <span m='1345590'>you</span> <span m='1345760'>take</span>
  <span m='1345970'>the</span> <span m='1346060'>min</span> <span m='1346310'>over</span>
  <span m='1346460'>all</span> <span m='1346660'>such</span> <span m='1346960'>keys,</span>
  <span m='1348040'>magically</span> <span m='1348790'>a</span> <span m='1348820'>unified</span>
  <span m='1349270'>structure</span> <span m='1349600'>has</span> <span m='1349810'>to</span>
  <span m='1349900'>find</span> <span m='1350860'>what</span> <span m='1351070'>is</span>
  <span m='1351160'>the</span> <span m='1351280'>most</span> <span m='1351490'>recent</span>
  <span m='1351850'>close</span> <span m='1352210'>item</span> <span m='1353050'>and</span>
  <span m='1353140'>search</span> <span m='1353410'>from</span> <span m='1353560'>there,</span>
  <span m='1354730'>and</span> <span m='1354880'>achieve</span> <span m='1355150'>log
  of</span> <span m='1355540'>that.</span> <span m='1355860'>There's</span> <span
  m='1355990'>a</span> <span m='1356050'>plus</span> <span m='1356350'>2</span> <span
  m='1356560'>just</span> <span m='1356740'>to</span> <span m='1356860'>make</span>
  <span m='1357010'>sure</span> <span m='1357265'>if</span> <span m='1357520'>these</span>
  <span m='1357670'>things</span> <span m='1357880'>are</span> <span m='1357970'>zero,</span>
  <span m='1358960'>you</span> <span m='1359020'>still</span> <span m='1359560'>get</span>
  <span m='1359740'>a</span> <span m='1359800'>constant.</span> <span m='1361180'>Always</span>
  <span m='1361390'>have</span> <span m='1361510'>to</span> <span m='1361570'>pay</span>
  <span m='1361720'>constant</span> <span m='1362080'>time.</span> <span m='1364390'>OK,</span>
  <span m='1364630'>so</span> <span m='1364810'>that's</span> <span m='1365020'>a</span>
  <span m='1365050'>unified</span> <span m='1365440'>property.</span> </p><p><span
  m='1366970'>Fairly</span> <span m='1367600'>natural</span> <span m='1368050'>generalization</span>
  <span m='1368770'>of</span> <span m='1368860'>dynamic</span> <span m='1369280'>finger</span>
  <span m='1370190'>and</span> <span m='1370330'>working</span> <span m='1370660'>set.</span>
  <span m='1371380'>I</span> <span m='1371410'>mean</span> <span m='1371500'>you</span>
  <span m='1371590'>could</span> <span m='1371740'>change</span> <span m='1372040'>this</span>
  <span m='1372190'>plus</span> <span m='1372500'>to</span> <span m='1372640'>a</span>
  <span m='1372700'>product</span> <span m='1373210'>or</span> <span m='1373340'>a</span>
  <span m='1373440'>max,</span> <span m='1374270'>doesn't</span> <span m='1374470'>make</span>
  <span m='1374620'>a</span> <span m='1374680'>difference.</span> <span m='1379070'>Yeah.</span>
  <span m='1380380'>Sadly</span> <span m='1380740'>we</span> <span m='1380860'>don't</span>
  <span m='1381010'>know</span> <span m='1381250'>whether</span> <span m='1381610'>there</span>
  <span m='1381760'>is</span> <span m='1381880'>any</span> <span m='1382090'>binary</span>
  <span m='1382390'>search</span> <span m='1382690'>tree</span> <span m='1383380'>that</span>
  <span m='1383470'>achieves</span> <span m='1383860'>the</span> <span m='1383920'>unified</span>
  <span m='1384310'>property.</span> <span m='1385720'>What</span> <span m='1385930'>we</span>
  <span m='1386050'>know</span> <span m='1386500'>is</span> <span m='1386710'>that</span>
  <span m='1387490'>this</span> <span m='1387670'>can</span> <span m='1387970'>be</span>
  <span m='1388120'>done,</span> <span m='1389020'>this</span> <span m='1389200'>property</span>
  <span m='1389650'>can</span> <span m='1389800'>be</span> <span m='1389920'>achieved</span>
  <span m='1393640'>by</span> <span m='1394030'>a</span> <span m='1394180'>pointer</span>
  <span m='1394570'>machine</span> <span m='1394930'>data</span> <span m='1395140'>structure,</span>
  <span m='1396500'>which</span> <span m='1396550'>is</span> <span m='1396700'>more</span>
  <span m='1396910'>powerful</span> <span m='1397480'>than</span> <span m='1397630'>a</span>
  <span m='1397690'>binary</span> <span m='1397990'>search</span> <span m='1398230'>tree.</span>
  <span m='1404100'>But</span> <span m='1404200'>we</span> <span m='1404320'>don't</span>
  <span m='1404530'>know</span> <span m='1407320'>whether</span> <span m='1407560'>it's</span>
  <span m='1407680'>possible</span> <span m='1408370'>to</span> <span m='1408580'>achieve</span>
  <span m='1409060'>by</span> <span m='1409420'>a</span> <span m='1409510'>binary</span>
  <span m='1409840'>search</span> <span m='1410110'>tree.</span> </p><p><span m='1412390'>Best</span>
  <span m='1412660'>bound</span> <span m='1412930'>so</span> <span m='1413110'>far,</span>
  <span m='1414670'>is</span> <span m='1414910'>that</span> <span m='1415060'>you</span>
  <span m='1415210'>can</span> <span m='1415330'>achieve</span> <span m='1416470'>this</span>
  <span m='1416710'>bound</span> <span m='1417130'>plus</span> <span m='1417610'>log</span>
  <span m='1417910'>log</span> <span m='1418210'>n.</span> <span m='1419170'>So</span>
  <span m='1419320'>as</span> <span m='1419410'>long</span> <span m='1419650'>as</span>
  <span m='1419770'>this</span> <span m='1419950'>never</span> <span m='1420220'>gets</span>
  <span m='1420490'>too</span> <span m='1420790'>small,</span> <span m='1421725'>as</span>
  <span m='1422060'>long</span> <span m='1422230'>as</span> <span m='1422350'>this</span>
  <span m='1422530'>quantity</span> <span m='1423040'>never</span> <span m='1423250'>gets</span>
  <span m='1423400'>smaller</span> <span m='1423730'>than</span> <span m='1424090'>log
  n,</span> <span m='1424430'>then</span> <span m='1424570'>this</span> <span m='1424690'>thing</span>
  <span m='1424900'>will</span> <span m='1425230'>be</span> <span m='1425410'>log</span>
  <span m='1425680'>log</span> <span m='1425890'>n,</span> <span m='1426100'>and it's</span>
  <span m='1426250'>fine.</span> <span m='1427120'>But</span> <span m='1427270'>in</span>
  <span m='1427360'>particular,</span> <span m='1427750'>if this</span> <span m='1427900'>is</span>
  <span m='1427990'>constant,</span> <span m='1428690'>then</span> <span m='1428890'>it's</span>
  <span m='1429040'>only</span> <span m='1429310'>achieving</span> <span m='1429700'>log</span>
  <span m='1429860'>log</span> <span m='1430090'>n,</span> <span m='1430450'>so</span>
  <span m='1430610'>it's</span> <span m='1430750'>not--</span> <span m='1431670'>there's</span>
  <span m='1431800'>an</span> <span m='1431860'>additive</span> <span m='1432250'>log</span>
  <span m='1432490'>log</span> <span m='1432670'>n</span> <span m='1432820'>per</span>
  <span m='1433000'>operation</span> <span m='1433540'>loss.</span> <span m='1435230'>That's</span>
  <span m='1435430'>the</span> <span m='1435520'>best</span> <span m='1435730'>binary</span>
  <span m='1436060'>search,</span> <span m='1436410'>unified</span> <span m='1436870'>binary</span>
  <span m='1437170'>search</span> <span m='1437430'>tree</span> <span m='1437610'>known.</span>
  </p><p><span m='1440520'>OK,</span> <span m='1442120'>so this</span> <span m='1442210'>is</span>
  <span m='1442330'>all</span> <span m='1442480'>good.</span> <span m='1444090'>And</span>
  <span m='1444250'>this</span> <span m='1444430'>is</span> <span m='1444490'>sort</span>
  <span m='1444700'>of</span> <span m='1444790'>where</span> <span m='1445150'>the,</span>
  <span m='1445630'>what</span> <span m='1445780'>we</span> <span m='1445900'>call</span>
  <span m='1446170'>analytic</span> <span m='1446770'>bounds,</span> <span m='1448030'>here</span>
  <span m='1448660'>ends.</span> <span m='1450610'>There</span> <span m='1450850'>are</span>
  <span m='1450910'>various</span> <span m='1451240'>attempts</span> <span m='1451690'>to--</span>
  <span m='1452020'>in</span> <span m='1452260'>general</span> <span m='1452560'>we</span>
  <span m='1452620'>want</span> <span m='1452800'>to</span> <span m='1452860'>characterize,</span>
  <span m='1453460'>what</span> <span m='1453700'>is</span> <span m='1453850'>the</span>
  <span m='1454000'>optimal</span> <span m='1454450'>thing</span> <span m='1455410'>we</span>
  <span m='1455530'>could</span> <span m='1455650'>hope</span> <span m='1455830'>for.</span>
  <span m='1457720'>When</span> <span m='1457960'>can</span> <span m='1458140'>we</span>
  <span m='1458230'>do</span> <span m='1458350'>better</span> <span m='1458590'>than</span>
  <span m='1458710'>log</span> <span m='1459000'>n?</span> <span m='1459640'>These</span>
  <span m='1459850'>are</span> <span m='1459940'>all</span> <span m='1460060'>specific</span>
  <span m='1460600'>cases</span> <span m='1461020'>where</span> <span m='1461140'>we</span>
  <span m='1461230'>can</span> <span m='1461350'>do</span> <span m='1461440'>better</span>
  <span m='1461650'>than</span> <span m='1461770'>log n,</span> <span m='1462190'>but</span>
  <span m='1462310'>it's</span> <span m='1462430'>not</span> <span m='1462640'>a</span>
  <span m='1462730'>complete</span> <span m='1463060'>characterization.</span> <span
  m='1464520'>There</span> <span m='1464670'>are</span> <span m='1464710'>sequences</span>
  <span m='1465250'>that</span> <span m='1465400'>have</span> <span m='1465640'>large</span>
  <span m='1465940'>unified</span> <span m='1466870'>bound,</span> <span m='1467410'>but</span>
  <span m='1468490'>have</span> <span m='1468880'>no--</span> <span m='1471730'>yet</span>
  <span m='1471970'>they</span> <span m='1472180'>can</span> <span m='1472330'>be</span>
  <span m='1472480'>accessed</span> <span m='1472810'>more</span> <span m='1473050'>quickly</span>
  <span m='1473740'>by</span> <span m='1473920'>the</span> <span m='1474040'>optimal</span>
  <span m='1474400'>binary</span> <span m='1474670'>search</span> <span m='1474910'>tree.</span>
  </p><p><span m='1475730'>And</span> <span m='1475810'>so,</span> <span m='1476040'>while
  it</span> <span m='1476210'>would</span> <span m='1476350'>be</span> <span m='1476440'>nice</span>
  <span m='1476740'>to</span> <span m='1476830'>characterize</span> <span m='1477540'>with</span>
  <span m='1477580'>some</span> <span m='1477850'>clean</span> <span m='1478240'>algebraic,</span>
  <span m='1478840'>whatever,</span> <span m='1480160'>most</span> <span m='1480520'>of</span>
  <span m='1480580'>the</span> <span m='1480670'>work,</span> <span m='1481780'>beyond</span>
  <span m='1482170'>what</span> <span m='1482380'>I've</span> <span m='1482560'>told</span>
  <span m='1482800'>you</span> <span m='1482860'>about</span> <span m='1483100'>here,</span>
  <span m='1483970'>is</span> <span m='1484120'>just</span> <span m='1484300'>trying</span>
  <span m='1484600'>to</span> <span m='1484720'>figure</span> <span m='1485170'>out</span>
  <span m='1485260'>what</span> <span m='1485470'>opt</span> <span m='1485740'>is.</span>
  <span m='1486400'>Instead</span> <span m='1486730'>of</span> <span m='1486820'>trying</span>
  <span m='1487030'>to</span> <span m='1487120'>write</span> <span m='1487360'>it</span>
  <span m='1487450'>down,</span> <span m='1488410'>try</span> <span m='1488590'>to</span>
  <span m='1488680'>compute</span> <span m='1489040'>it.</span> <span m='1490480'>Instead</span>
  <span m='1490690'>of</span> <span m='1490750'>trying</span> <span m='1490900'>to</span>
  <span m='1490990'>define</span> <span m='1491440'>something</span> <span m='1491800'>that</span>
  <span m='1491890'>happens</span> <span m='1492250'>to</span> <span m='1492370'>match</span>
  <span m='1492610'>the</span> <span m='1492700'>optimal,</span> <span m='1493690'>let's</span>
  <span m='1493870'>just</span> <span m='1494080'>go</span> <span m='1494230'>for</span>
  <span m='1494380'>optimal.</span> <span m='1496100'>And</span> <span m='1496150'>this</span>
  <span m='1496330'>is</span> <span m='1496450'>the</span> <span m='1496510'>notion</span>
  <span m='1496780'>of</span> <span m='1496870'>dynamic</span> <span m='1497290'>optimality.</span>
  </p><p><span m='1502510'>And</span> <span m='1502690'>in</span> <span m='1502810'>modern</span>
  <span m='1503140'>terminology</span> <span m='1503770'>this</span> <span m='1503970'>would</span>
  <span m='1504090'>be</span> <span m='1504190'>called</span> <span m='1504940'>constant</span>
  <span m='1505450'>competitive,</span> <span m='1509140'>but</span> <span m='1509350'>the</span>
  <span m='1509440'>paper</span> <span m='1509710'>then</span> <span m='1509860'>introduced</span>
  <span m='1510250'>dynamic</span> <span m='1510700'>optimality</span> <span m='1511480'>preceded</span>
  <span m='1512230'>competitive</span> <span m='1512800'>analysis,</span> <span m='1513145'>so</span>
  <span m='1513835'>it</span> <span m='1514180'>has</span> <span m='1514360'>another</span>
  <span m='1514630'>name.</span> <span m='1515980'>What</span> <span m='1516100'>we'd</span>
  <span m='1516280'>like,</span> <span m='1518050'>is</span> <span m='1518230'>that</span>
  <span m='1518380'>the</span> <span m='1518470'>total</span> <span m='1518770'>cost</span>
  <span m='1519280'>of</span> <span m='1519400'>all</span> <span m='1519550'>your</span>
  <span m='1519700'>accesses,</span> <span m='1520060'>so</span> <span m='1520420'>this</span>
  <span m='1520630'>is</span> <span m='1520810'>like</span> <span m='1521050'>amortized</span>
  <span m='1521550'>cost,</span> <span m='1522530'>is</span> <span m='1522730'>within</span>
  <span m='1523000'>a</span> <span m='1523060'>constant</span> <span m='1523420'>factor</span>
  <span m='1524170'>of</span> <span m='1524350'>the</span> <span m='1524470'>optimal.</span>
  <span m='1526920'>What's</span> <span m='1527140'>the</span> <span m='1527260'>optimal?</span>
  <span m='1529240'>This</span> <span m='1529480'>is</span> <span m='1529810'>the--</span>
  <span m='1531000'>over</span> <span m='1531305'>all</span> <span m='1531610'>binary</span>
  <span m='1532030'>search</span> <span m='1532360'>trees,</span> <span m='1533080'>I</span>
  <span m='1533140'>mean</span> <span m='1533350'>to</span> <span m='1533470'>be</span>
  <span m='1533650'>precise</span> <span m='1534130'>I</span> <span m='1534190'>should</span>
  <span m='1534340'>talk</span> <span m='1534520'>about</span> <span m='1534760'>binary</span>
  <span m='1535180'>search</span> <span m='1535420'>tree</span> <span m='1535720'>algorithms,</span>
  <span m='1536410'>meaning</span> <span m='1537280'>you</span> <span m='1537430'>specify</span>
  <span m='1538030'>somehow</span> <span m='1538480'>how</span> <span m='1538660'>to</span>
  <span m='1538750'>do</span> <span m='1538900'>a</span> <span m='1538960'>search,</span>
  <span m='1539500'>and</span> <span m='1539620'>it</span> <span m='1539710'>may</span>
  <span m='1539860'>involve</span> <span m='1540250'>rotations</span> <span m='1540790'>and</span>
  <span m='1540880'>walks.</span> </p><p><span m='1541900'>So,</span> <span m='1542080'>you</span>
  <span m='1542140'>know,</span> <span m='1542290'>it</span> <span m='1542350'>could</span>
  <span m='1542530'>be</span> <span m='1543130'>red</span> <span m='1543340'>black</span>
  <span m='1544030'>tree,</span> <span m='1544510'>it could</span> <span m='1544740'>be</span>
  <span m='1544930'>an AVL</span> <span m='1545470'>tree,</span> <span m='1545770'>could</span>
  <span m='1545920'>be</span> <span m='1546070'>a</span> <span m='1546130'>[? BB ?]</span>
  <span m='1546310'>alpha</span> <span m='1546700'>tree,</span> <span m='1547030'>anything</span>
  <span m='1547480'>that</span> <span m='1547630'>can</span> <span m='1547840'>be</span>
  <span m='1547990'>implemented</span> <span m='1549070'>in</span> <span m='1549220'>this</span>
  <span m='1549400'>way.</span> <span m='1549640'>Those</span> <span m='1549880'>are</span>
  <span m='1550000'>all</span> <span m='1550480'>kind</span> <span m='1550750'>of</span>
  <span m='1550810'>boring.</span> <span m='1552330'>More</span> <span m='1552460'>sophisticated</span>
  <span m='1552835'>is</span> <span m='1553210'>something</span> <span m='1553480'>like
  a</span> <span m='1553660'>splay</span> <span m='1553960'>tree.</span> <span m='1555850'>Ideally,</span>
  <span m='1558400'>you</span> <span m='1558500'>take</span> <span m='1558670'>the</span>
  <span m='1558760'>min</span> <span m='1559300'>over</span> <span m='1559600'>all--</span>
  <span m='1562840'>min</span> <span m='1563110'>over</span> <span m='1563380'>all</span>
  <span m='1563710'>binary</span> <span m='1564070'>search</span> <span m='1564340'>tree</span>
  <span m='1564580'>algorithms.</span> <span m='1566710'>The</span> <span m='1566800'>cost</span>
  <span m='1568150'>of</span> <span m='1568240'>that</span> <span m='1568450'>algorithm,</span>
  <span m='1569980'>on</span> <span m='1570430'>that</span> <span m='1570670'>access</span>
  <span m='1571000'>sequence</span> <span m='1571470'>x,</span> <span m='1573254'>and</span>
  <span m='1573700'>you</span> <span m='1573820'>want</span> <span m='1574030'>the</span>
  <span m='1574120'>total</span> <span m='1574420'>cost</span> <span m='1574690'>of</span>
  <span m='1574840'>your</span> <span m='1575170'>algorithm</span> <span m='1575740'>on</span>
  <span m='1576010'>x</span> <span m='1577000'>to</span> <span m='1577120'>be</span>
  <span m='1577240'>within</span> <span m='1577510'>a</span> <span m='1577540'>constant</span>
  <span m='1577870'>factor</span> <span m='1578110'>of</span> <span m='1578200'>the</span>
  <span m='1578350'>optimal</span> <span m='1578770'>algorithm</span> <span m='1579760'>on</span>
  <span m='1579910'>x.</span> <span m='1580780'>x</span> <span m='1581170'>is</span>
  <span m='1581320'>a</span> <span m='1581440'>vector.</span> </p><p><span m='1583610'>So</span>
  <span m='1583930'>this</span> <span m='1584200'>is</span> <span m='1584950'>what</span>
  <span m='1585100'>you</span> <span m='1585190'>call</span> <span m='1585370'>the</span>
  <span m='1585520'>offline</span> <span m='1585970'>optimal,</span> <span m='1586540'>because</span>
  <span m='1587320'>here</span> <span m='1587650'>you</span> <span m='1587830'>basically</span>
  <span m='1588190'>get</span> <span m='1588310'>to</span> <span m='1588400'>choose</span>
  <span m='1588970'>the</span> <span m='1589090'>binary</span> <span m='1589360'>search</span>
  <span m='1589600'>tree</span> <span m='1589780'>algorithm</span> <span m='1590860'>to</span>
  <span m='1591010'>be</span> <span m='1591130'>customized</span> <span m='1591880'>to</span>
  <span m='1592030'>x,</span> <span m='1593800'>and</span> <span m='1593920'>yet</span>
  <span m='1594100'>somehow</span> <span m='1594490'>you</span> <span m='1594670'>want</span>
  <span m='1594850'>to</span> <span m='1594970'>achieve</span> <span m='1596290'>dynamic</span>
  <span m='1596740'>optimality.</span> <span m='1600310'>Open</span> <span m='1600580'>question,</span>
  <span m='1603310'>is</span> <span m='1603460'>this</span> <span m='1603580'>possible?</span>
  </p><p><span m='1613990'>And,</span> <span m='1614620'>of</span> <span m='1614740'>course,</span>
  <span m='1615140'>we're</span> <span m='1615190'>only</span> <span m='1615370'>interested</span>
  <span m='1615760'>in</span> <span m='1616020'>online</span> <span m='1616500'>solutions.</span>
  <span m='1617330'>So,</span> <span m='1618190'>you</span> <span m='1618370'>want</span>
  <span m='1618520'>to</span> <span m='1618610'>build</span> <span m='1618850'>a</span>
  <span m='1618910'>binary</span> <span m='1619180'>search</span> <span m='1619390'>tree</span>
  <span m='1619510'>that</span> <span m='1619660'>doesn't</span> <span m='1619990'>know</span>
  <span m='1620170'>the</span> <span m='1620260'>future,</span> <span m='1620620'>it
  doesn't</span> <span m='1620890'>know</span> <span m='1621010'>what</span> <span
  m='1621120'>accesses</span> <span m='1621760'>are</span> <span m='1621940'>to</span>
  <span m='1622060'>come,</span> <span m='1622540'>but</span> <span m='1622690'>it</span>
  <span m='1622750'>has</span> <span m='1622930'>to</span> <span m='1623050'>be</span>
  <span m='1623320'>within</span> <span m='1623590'>a</span> <span m='1623650'>constant</span>
  <span m='1623980'>factor</span> <span m='1624490'>of</span> <span m='1624700'>the</span>
  <span m='1624820'>offline</span> <span m='1625240'>solution</span> <span m='1626020'>that</span>
  <span m='1626200'>does know.</span> <span m='1627928'>And we</span> <span m='1628360'>don't</span>
  <span m='1628450'>know</span> <span m='1628630'>whether</span> <span m='1628840'>this</span>
  <span m='1628960'>is</span> <span m='1629080'>possible.</span> <span m='1630160'>Another</span>
  <span m='1630520'>interesting</span> <span m='1630940'>question,</span> <span m='1632080'>is</span>
  <span m='1632200'>whether</span> <span m='1632440'>it's</span> <span m='1632530'>possible</span>
  <span m='1632785'>for a pointer</span> <span m='1633040'>machine,</span> <span m='1637390'>because</span>
  <span m='1637600'>save</span> <span m='1637870'>for</span> <span m='1637990'>the</span>
  <span m='1638110'>unified</span> <span m='1638470'>property</span> <span m='1638860'>we</span>
  <span m='1638980'>know</span> <span m='1639100'>how</span> <span m='1639220'>to</span>
  <span m='1639310'>get</span> <span m='1639460'>it</span> <span m='1639550'>for</span>
  <span m='1639700'>a</span> <span m='1639760'>pointer</span> <span m='1640000'>machine.</span>
  </p><p><span m='1641980'>And</span> <span m='1642220'>there's</span> <span m='1642430'>two</span>
  <span m='1642580'>versions</span> <span m='1642940'>of</span> <span m='1643000'>this</span>
  <span m='1643180'>question.</span> <span m='1643730'>You can</span> <span m='1643870'>consider,</span>
  <span m='1644590'>is</span> <span m='1644770'>there</span> <span m='1644860'>a</span>
  <span m='1644890'>pointer</span> <span m='1645220'>machine</span> <span m='1645970'>that</span>
  <span m='1646090'>matches</span> <span m='1646420'>the</span> <span m='1646570'>optimal</span>
  <span m='1647290'>binary</span> <span m='1647620'>search</span> <span m='1647890'>tree,</span>
  <span m='1648620'>or</span> <span m='1648680'>you</span> <span m='1648730'>could</span>
  <span m='1648910'>ask,</span> <span m='1649090'>is</span> <span m='1649240'>there</span>
  <span m='1649340'>a</span> <span m='1649360'>pointer</span> <span m='1649660'>machine</span>
  <span m='1649990'>that</span> <span m='1650080'>matches</span> <span m='1650470'>the</span>
  <span m='1650650'>optimal</span> <span m='1651730'>pointer</span> <span m='1652030'>machine.</span>
  </p><p><span m='1652300'>That's</span> <span m='1652480'>a</span> <span m='1652540'>little</span>
  <span m='1652780'>less</span> <span m='1653245'>defined,</span> <span m='1653470'>although</span>
  <span m='1653640'>there are</span> <span m='1653770'>some--</span> <span m='1654070'>I</span>
  <span m='1654310'>have</span> <span m='1654460'>some</span> <span m='1654640'>ideas</span>
  <span m='1654910'>on</span> <span m='1655000'>how</span> <span m='1655090'>to</span>
  <span m='1655180'>define</span> <span m='1655540'>that</span> <span m='1655690'>problem,</span>
  <span m='1656070'>maybe</span> <span m='1656270'>will</span> <span m='1656380'>work</span>
  <span m='1656620'>on</span> <span m='1656740'>it.</span> <span m='1657460'>But</span>
  <span m='1657730'>all</span> <span m='1658000'>versions</span> <span m='1658390'>of</span>
  <span m='1658480'>this</span> <span m='1658630'>problem</span> <span m='1658960'>are</span>
  <span m='1659110'>open,</span> <span m='1659650'>basically.</span> <span m='1661360'>So,</span>
  <span m='1661540'>this</span> <span m='1661690'>may</span> <span m='1661810'>seem</span>
  <span m='1662050'>rather</span> <span m='1662290'>depressing.</span> <span m='1663580'>What</span>
  <span m='1663730'>else</span> <span m='1663930'>am</span> <span m='1664030'>I</span>
  <span m='1664060'>going</span> <span m='1664180'>to</span> <span m='1664270'>do</span>
  <span m='1664420'>for</span> <span m='1664860'>a</span> <span m='1664900'>lecture</span>
  <span m='1665360'>and</span> <span m='1665370'>a</span> <span m='1665410'>half?</span>
  <span m='1666520'>But</span> <span m='1666640'>actually,</span> <span m='1666880'>there's</span>
  <span m='1667150'>a</span> <span m='1667180'>lot</span> <span m='1667510'>of</span>
  <span m='1667570'>study</span> <span m='1667930'>of</span> <span m='1667990'>this</span>
  <span m='1668170'>problem,</span> <span m='1668680'>and</span> <span m='1668800'>we</span>
  <span m='1668920'>do know</span> <span m='1669200'>some</span> <span m='1669460'>good</span>
  <span m='1669640'>things.</span> <span m='1669970'>For</span> <span m='1670120'>example,</span>
  <span m='1671110'>we</span> <span m='1671290'>can</span> <span m='1671500'>get</span>
  <span m='1672940'>log</span> <span m='1673960'>log</span> <span m='1674770'>n</span>
  <span m='1675820'>competitive.</span> <span m='1680890'>So,</span> <span m='1681100'>not</span>
  <span m='1681280'>within</span> <span m='1681520'>a</span> <span m='1681580'>constant</span>
  <span m='1681970'>factor,</span> <span m='1682540'>but</span> <span m='1682690'>we</span>
  <span m='1682810'>can</span> <span m='1682900'>get</span> <span m='1683050'>within</span>
  <span m='1683320'>a</span> <span m='1683350'>log</span> <span m='1683650'>log</span>
  <span m='1683920'>n</span> <span m='1684070'>factor</span> <span m='1684930'>of</span>
  <span m='1685060'>the</span> <span m='1685180'>optimal.</span> <span m='1686480'>So,</span>
  <span m='1686550'>that's</span> <span m='1686740'>pretty</span> <span m='1687010'>good.</span>
  </p><p><span m='1687785'>An</span> <span m='1688200'>easy</span> <span m='1688510'>result</span>
  <span m='1688840'>is</span> <span m='1688960'>to</span> <span m='1689050'>get</span>
  <span m='1689230'>log</span> <span m='1689650'>n</span> <span m='1689800'>competitive.</span>
  <span m='1691660'>Any</span> <span m='1691870'>balanced</span> <span m='1692230'>binary</span>
  <span m='1692500'>search tree</span> <span m='1692840'>is</span> <span m='1692950'>log</span>
  <span m='1693190'>n</span> <span m='1693310'>competitive,</span> <span m='1693820'>because</span>
  <span m='1694150'>best</span> <span m='1694540'>case</span> <span m='1694900'>you</span>
  <span m='1694990'>could</span> <span m='1695080'>hope</span> <span m='1695200'>for</span>
  <span m='1695440'>is</span> <span m='1695530'>constant,</span> <span m='1696070'>the</span>
  <span m='1696150'>worst</span> <span m='1696400'>case</span> <span m='1696740'>you</span>
  <span m='1696840'>can</span> <span m='1696940'>hope</span> <span m='1697040'>for</span>
  <span m='1697090'>is</span> <span m='1697200'>log</span> <span m='1697380'>n.</span>
  <span m='1698160'>So</span> <span m='1698600'>at least</span> <span m='1698920'>within</span>
  <span m='1699170'>the</span> <span m='1699240'>log</span> <span m='1699430'>factor,</span>
  <span m='1700240'>but</span> <span m='1700360'>we</span> <span m='1700480'>can</span>
  <span m='1700600'>do</span> <span m='1700690'>exponentially</span> <span m='1701170'>better.</span>
  <span m='1701420'>We'll</span> <span m='1701590'>do</span> <span m='1701740'>that</span>
  <span m='1701980'>next</span> <span m='1702190'>class.</span> </p><p><span m='1704560'>Before</span>
  <span m='1704920'>we</span> <span m='1705040'>go</span> <span m='1705250'>there,</span>
  <span m='1708500'>I</span> <span m='1708550'>want</span> <span m='1708730'>to</span>
  <span m='1709540'>tell</span> <span m='1709840'>you</span> <span m='1710140'>about</span>
  <span m='1710980'>two</span> <span m='1711160'>structures,</span> <span m='1711820'>to</span>
  <span m='1711970'>binary</span> <span m='1712270'>search</span> <span m='1712460'>trees</span>
  <span m='1712810'>that</span> <span m='1712990'>we</span> <span m='1714400'>conjecture</span>
  <span m='1715330'>are</span> <span m='1715540'>dynamically</span> <span m='1716110'>optimal,</span>
  <span m='1717280'>but</span> <span m='1717400'>we</span> <span m='1717520'>can't</span>
  <span m='1717700'>prove</span> <span m='1717910'>it.</span> </p><p><span m='1741300'>So</span>
  <span m='1741490'>first</span> <span m='1741790'>one,</span> <span m='1742000'>and</span>
  <span m='1742080'>the</span> <span m='1742150'>classic</span> <span m='1742570'>one,</span>
  <span m='1742720'>is</span> <span m='1742810'>splayed</span> <span m='1743170'>trees.</span>
  <span m='1743890'>I</span> <span m='1743990'>don't</span> <span m='1744070'>want</span>
  <span m='1744220'>to</span> <span m='1744280'>spend</span> <span m='1744550'>too</span>
  <span m='1744670'>much</span> <span m='1744880'>time</span> <span m='1745180'>on</span>
  <span m='1745270'>splay</span> <span m='1745540'>trees,</span> <span m='1746790'>but</span>
  <span m='1747040'>just</span> <span m='1747280'>to</span> <span m='1747820'>let</span>
  <span m='1747940'>you</span> <span m='1748030'>know</span> <span m='1748180'>what</span>
  <span m='1748330'>they</span> <span m='1748480'>are</span> <span m='1749125'>if
  you</span> <span m='1749500'>don't</span> <span m='1749680'>already</span> <span
  m='1749920'>know.</span> <span m='1751270'>If</span> <span m='1751420'>you</span>
  <span m='1751540'>want</span> <span m='1751690'>to</span> <span m='1751750'>search</span>
  <span m='1752020'>for</span> <span m='1752170'>x,</span> <span m='1753970'>you</span>
  <span m='1754210'>search</span> <span m='1754480'>for</span> <span m='1754600'>x.</span>
  <span m='1754900'>You</span> <span m='1754960'>do</span> <span m='1755200'>a</span>
  <span m='1755440'>binary</span> <span m='1755710'>search</span> <span m='1755980'>for</span>
  <span m='1756100'>x</span> <span m='1756310'>in</span> <span m='1756400'>the</span>
  <span m='1756490'>tree.</span> <span m='1757750'>You</span> <span m='1757930'>locate</span>
  <span m='1758350'>x,</span> <span m='1758680'>and</span> <span m='1758770'>then</span>
  <span m='1758950'>you--</span> <span m='1759930'>splay</span> <span m='1760240'>trees</span>
  <span m='1760550'>always</span> <span m='1760810'>move</span> <span m='1761140'>x</span>
  <span m='1761410'>to</span> <span m='1761560'>the</span> <span m='1761680'>root.</span>
  </p><p><span m='1764270'>So,</span> <span m='1764350'>this</span> <span m='1764560'>is</span>
  <span m='1764680'>what</span> <span m='1764830'>we</span> <span m='1764950'>call</span>
  <span m='1765160'>a</span> <span m='1765220'>self-adjusting</span> <span m='1766930'>tree.</span>
  <span m='1767230'>It</span> <span m='1767320'>changes</span> <span m='1767770'>the</span>
  <span m='1767860'>structure</span> <span m='1768220'>of</span> <span m='1768280'>the</span>
  <span m='1768370'>tree</span> <span m='1768670'>as</span> <span m='1768850'>you</span>
  <span m='1768970'>do</span> <span m='1769120'>searches,</span> <span m='1770170'>not</span>
  <span m='1770380'>just</span> <span m='1770590'>when</span> <span m='1770740'>you're</span>
  <span m='1770830'>doing</span> <span m='1771070'>updates,</span> <span m='1774160'>and</span>
  <span m='1774370'>there</span> <span m='1774520'>are</span> <span m='1774580'>two</span>
  <span m='1774790'>cases.</span> <span m='1776570'>If</span> <span m='1776980'>you</span>
  <span m='1777220'>look</span> <span m='1777400'>at</span> <span m='1777490'>x,</span>
  <span m='1777790'>and</span> <span m='1777880'>its</span> <span m='1778000'>parent</span>
  <span m='1778330'>and</span> <span m='1778420'>its</span> <span m='1778540'>grandparent,</span>
  <span m='1779200'>if</span> <span m='1779380'>they're</span> <span m='1779530'>oriented</span>
  <span m='1779920'>the</span> <span m='1780010'>same</span> <span m='1780310'>way.</span>
  <span m='1780650'>So,</span> <span m='1780730'>here</span> <span m='1780970'>it's</span>
  <span m='1781570'>two</span> <span m='1781750'>left</span> <span m='1782050'>pointers,</span>
  <span m='1782530'>could</span> <span m='1782680'>be</span> <span m='1782770'>two</span>
  <span m='1782950'>right</span> <span m='1783130'>pointers.</span> <span m='1784180'>Then</span>
  <span m='1784510'>you</span> <span m='1784720'>flip</span> <span m='1784990'>them.</span>
  <span m='1786850'>So</span> <span m='1787180'>we</span> <span m='1788620'>rotate</span>
  <span m='1789670'>y,</span> <span m='1790420'>and</span> <span m='1790600'>then</span>
  <span m='1790810'>rotate</span> <span m='1791480'>x,</span> <span m='1794200'>so</span>
  <span m='1794410'>it's</span> <span m='1794590'>in</span> <span m='1795370'>this</span>
  <span m='1795520'>model.</span> <span m='1797660'>And</span> <span m='1797740'>we</span>
  <span m='1797860'>get</span> <span m='1799540'>x</span> <span m='1799810'>y</span>
  <span m='1800095'>z</span> <span m='1800380'>in</span> <span m='1800470'>the</span>
  <span m='1800590'>other</span> <span m='1800800'>order.</span> </p><p><span m='1802660'>There's</span>
  <span m='1802780'>pretty</span> <span m='1802990'>much</span> <span m='1803170'>only</span>
  <span m='1803440'>one</span> <span m='1803710'>way</span> <span m='1804100'>to</span>
  <span m='1804370'>move</span> <span m='1804610'>x</span> <span m='1804790'>to</span>
  <span m='1804910'>the</span> <span m='1805030'>root</span> <span m='1805520'>in</span>
  <span m='1805570'>that</span> <span m='1805750'>picture.</span> <span m='1809020'>Then</span>
  <span m='1809360'>the</span> <span m='1809560'>other</span> <span m='1809800'>case</span>
  <span m='1810910'>is</span> <span m='1811360'>the</span> <span m='1811570'>zigzag</span>
  <span m='1812200'>case,</span> <span m='1813700'>y,</span> <span m='1815520'>w,</span>
  <span m='1817000'>x.</span> <span m='1820330'>So,</span> <span m='1820480'>here</span>
  <span m='1820750'>the</span> <span m='1820900'>two</span> <span m='1821110'>parent</span>
  <span m='1821380'>pointers</span> <span m='1821740'>are</span> <span m='1821860'>in</span>
  <span m='1821950'>different</span> <span m='1822220'>directions,</span> <span m='1822890'>one</span>
  <span m='1822930'>is</span> <span m='1823030'>left,</span> <span m='1823270'>one
  is</span> <span m='1823510'>right.</span> <span m='1824530'>There's</span> <span
  m='1824710'>a</span> <span m='1824770'>symmetric</span> <span m='1825610'>picture.</span>
  <span m='1826520'>In</span> <span m='1826720'>this</span> <span m='1826870'>case,</span>
  <span m='1827260'>we</span> <span m='1827560'>rotate</span> <span m='1828010'>in</span>
  <span m='1828100'>the</span> <span m='1828250'>other</span> <span m='1828460'>order.</span>
  <span m='1829760'>So,</span> <span m='1829810'>we</span> <span m='1829870'>rotate</span>
  <span m='1830340'>x,</span> <span m='1831820'>and</span> <span m='1831940'>then</span>
  <span m='1832090'>we</span> <span m='1832240'>rotate</span> <span m='1832570'>y.</span>
  <span m='1835930'>And</span> <span m='1836440'>in</span> <span m='1836620'>that</span>
  <span m='1836770'>case</span> <span m='1837130'>you</span> <span m='1837250'>get</span>
  <span m='1838590'>x</span> <span m='1838690'>nice,</span> <span m='1840340'>x,</span>
  <span m='1840760'>w,</span> <span m='1841760'>y,</span> <span m='1843760'>and</span>
  <span m='1843940'>the</span> <span m='1844030'>subtrees</span> <span m='1844465'>hang
  off.</span> <span m='1845170'>I'm</span> <span m='1845260'>not</span> <span m='1845380'>labeling</span>
  <span m='1845800'>the</span> <span m='1845860'>subtrees,</span> <span m='1846320'>but</span>
  <span m='1846490'>they</span> <span m='1846640'>have</span> <span m='1846820'>to</span>
  <span m='1846940'>be</span> <span m='1847060'>labeled</span> <span m='1847450'>in
  the</span> <span m='1847600'>same</span> <span m='1847840'>order,</span> <span m='1848140'>left</span>
  <span m='1848455'>to</span> <span m='1848770'>right.</span> </p><p><span m='1850940'>OK,</span>
  <span m='1851230'>this</span> <span m='1851440'>is</span> <span m='1851530'>splay</span>
  <span m='1851740'>trees.</span> <span m='1852130'>You</span> <span m='1852370'>do</span>
  <span m='1852610'>this</span> <span m='1853870'>for</span> <span m='1854200'>x.</span>
  <span m='1854300'>x</span> <span m='1854770'>is</span> <span m='1854860'>the</span>
  <span m='1854950'>thing</span> <span m='1855130'>you</span> <span m='1855220'>search</span>
  <span m='1855490'>for,</span> <span m='1856360'>now</span> <span m='1856570'>x</span>
  <span m='1856810'>is</span> <span m='1856930'>up</span> <span m='1857080'>here,</span>
  <span m='1857680'>then</span> <span m='1857830'>you</span> <span m='1857920'>repeat.</span>
  <span m='1858460'>You</span> <span m='1858550'>look</span> <span m='1858760'>at</span>
  <span m='1858830'>it's</span> <span m='1859030'>two</span> <span m='1859330'>parents,</span>
  <span m='1860230'>it's</span> <span m='1860380'>one</span> <span m='1860500'>of</span>
  <span m='1860560'>these</span> <span m='1860740'>two</span> <span m='1860860'>cases,</span>
  <span m='1861410'>you</span> <span m='1861510'>do</span> <span m='1861550'>the</span>
  <span m='1861640'>appropriate</span> <span m='1862210'>two</span> <span m='1862390'>rotations.</span>
  <span m='1863650'>Until</span> <span m='1863950'>x</span> <span m='1864220'>is</span>
  <span m='1864340'>either</span> <span m='1864520'>the</span> <span m='1864640'>root,</span>
  <span m='1865060'>and</span> <span m='1865150'>you're</span> <span m='1865240'>done,</span>
  <span m='1865810'>or</span> <span m='1866020'>it's</span> <span m='1866230'>one</span>
  <span m='1866470'>child</span> <span m='1866800'>from</span> <span m='1866950'>the</span>
  <span m='1867040'>root,</span> <span m='1867160'>and</span> <span m='1867250'>then</span>
  <span m='1867370'>you</span> <span m='1867460'>do</span> <span m='1867610'>one</span>
  <span m='1867820'>rotation</span> <span m='1868300'>to</span> <span m='1868420'>make</span>
  <span m='1868600'>it</span> <span m='1868690'>the</span> <span m='1868780'>root.</span>
  </p><p><span m='1872040'>Seems</span> <span m='1872340'>simple</span> <span m='1872670'>enough.</span>
  <span m='1874120'>It's</span> <span m='1874530'>slightly</span> <span m='1875250'>more</span>
  <span m='1875400'>sophisticated</span> <span m='1876030'>than</span> <span m='1876180'>an</span>
  <span m='1876270'>algorithm</span> <span m='1876690'>known</span> <span m='1876900'>as</span>
  <span m='1877020'>move</span> <span m='1877290'>to</span> <span m='1877440'>root,</span>
  <span m='1877900'>which</span> <span m='1878010'>is</span> <span m='1878130'>just</span>
  <span m='1878640'>rotate</span> <span m='1879000'>x,</span> <span m='1879240'>rotate</span>
  <span m='1879570'>x,</span> <span m='1879780'>rotate</span> <span m='1880140'>x,</span>
  <span m='1880380'>which</span> <span m='1880560'>would</span> <span m='1880680'>eventually</span>
  <span m='1881100'>propagate</span> <span m='1881580'>it</span> <span m='1881670'>up.</span>
  <span m='1882450'>Move</span> <span m='1882660'>to</span> <span m='1882750'>root</span>
  <span m='1882920'>is</span> <span m='1883020'>a</span> <span m='1883080'>really</span>
  <span m='1883380'>bad</span> <span m='1883650'>algorithm.</span> <span m='1884190'>It</span>
  <span m='1884550'>can</span> <span m='1884700'>show</span> <span m='1884940'>its</span>
  <span m='1885210'>can</span> <span m='1885390'>be</span> <span m='1885510'>a</span>
  <span m='1885540'>factor</span> <span m='1885960'>of square root</span> <span m='1886380'>of</span>
  <span m='1886470'>n.</span> <span m='1886770'>It</span> <span m='1887100'>can</span>
  <span m='1887190'>be</span> <span m='1887280'>square</span> <span m='1887580'>root
  of</span> <span m='1887670'>n per</span> <span m='1887940'>operation</span> <span
  m='1888570'>if</span> <span m='1888660'>you're</span> <span m='1889590'>unlucky.</span>
  <span m='1890760'>Splay</span> <span m='1891060'>trees</span> <span m='1891390'>are</span>
  <span m='1891510'>always,</span> <span m='1892380'>at</span> <span m='1892500'>most</span>
  <span m='1892910'>log n</span> <span m='1893410'>amortized</span> <span m='1893760'>per</span>
  <span m='1894050'>operation,</span> <span m='1894510'>although</span> <span m='1894620'>that's</span>
  <span m='1894930'>not</span> <span m='1895110'>at</span> <span m='1895200'>all</span>
  <span m='1895350'>obvious.</span> </p><p><span m='1896310'>Rough</span> <span m='1896580'>intuition,</span>
  <span m='1897680'>is</span> <span m='1897810'>if</span> <span m='1897960'>you</span>
  <span m='1898050'>look</span> <span m='1898230'>at</span> <span m='1898320'>the</span>
  <span m='1898410'>path,</span> <span m='1899340'>the</span> <span m='1899460'>route</span>
  <span m='1899670'>to</span> <span m='1899820'>x path,</span> <span m='1902010'>half</span>
  <span m='1902400'>of</span> <span m='1902490'>the</span> <span m='1902610'>nodes,</span>
  <span m='1903690'>at</span> <span m='1903810'>most</span> <span m='1904080'>half</span>
  <span m='1904350'>of</span> <span m='1904410'>the</span> <span m='1904500'>nodes</span>
  <span m='1904740'>go</span> <span m='1904950'>down</span> <span m='1906000'>when</span>
  <span m='1906150'>you</span> <span m='1906240'>splay.</span> <span m='1907650'>So</span>
  <span m='1907800'>why</span> <span m='1907980'>is</span> <span m='1908070'>that?</span>
  <span m='1909030'>Here,</span> <span m='1909510'>see</span> <span m='1909780'>y</span>
  <span m='1910370'>stays</span> <span m='1910680'>at</span> <span m='1910770'>the</span>
  <span m='1910860'>same</span> <span m='1911130'>level.</span> <span m='1912250'>z</span>
  <span m='1912360'>goes</span> <span m='1912600'>down,</span> <span m='1912870'>but</span>
  <span m='1912990'>x</span> <span m='1913170'>goes</span> <span m='1913410'>up.</span>
  <span m='1915150'>Here,</span> <span m='1915930'>w</span> <span m='1916350'>stays</span>
  <span m='1916620'>at</span> <span m='1916710'>the</span> <span m='1916800'>same</span>
  <span m='1917040'>level,</span> <span m='1917670'>x</span> <span m='1917910'>goes</span>
  <span m='1918150'>up,</span> <span m='1918670'>y</span> <span m='1918840'>goes</span>
  <span m='1919050'>down</span> <span m='1919380'>by</span> <span m='1919530'>one,</span>
  <span m='1920710'>x</span> <span m='1920970'>goes</span> <span m='1921150'>up</span>
  <span m='1921300'>by</span> <span m='1921420'>two,</span> <span m='1921660'>so</span>
  <span m='1922260'>you</span> <span m='1922350'>might</span> <span m='1922530'>call</span>
  <span m='1922690'>that</span> <span m='1922830'>a</span> <span m='1922890'>net</span>
  <span m='1923100'>improvement.</span> <span m='1924060'>But</span> <span m='1924150'>in</span>
  <span m='1924240'>general</span> <span m='1924540'>you</span> <span m='1924660'>don't</span>
  <span m='1924900'>mess</span> <span m='1925140'>up</span> <span m='1925290'>the</span>
  <span m='1925380'>path</span> <span m='1925710'>too</span> <span m='1925890'>much.</span>
  <span m='1926940'>Half</span> <span m='1927240'>the</span> <span m='1927360'>items</span>
  <span m='1927600'>stay</span> <span m='1927840'>where</span> <span m='1927990'>they</span>
  <span m='1928170'>are,</span> <span m='1929320'>and</span> <span m='1929420'>so</span>
  <span m='1929520'>it's</span> <span m='1929610'>something</span> <span m='1930150'>like</span>
  <span m='1930510'>your</span> <span m='1931440'>bisecting--</span> <span m='1932400'>if</span>
  <span m='1932550'>you</span> <span m='1932670'>repeatedly</span> <span m='1933210'>search</span>
  <span m='1933450'>for</span> <span m='1933570'>x,</span> <span m='1934090'>well
  I'm</span> <span m='1934220'>not</span> <span m='1934560'>really</span> <span m='1934800'>searching</span>
  <span m='1935100'>for x,</span> <span m='1935300'>but</span> <span m='1935530'>if</span>
  <span m='1935640'>you</span> <span m='1935700'>repeatedly</span> <span m='1936090'>search</span>
  <span m='1936300'>for</span> <span m='1936390'>things</span> <span m='1936600'>in</span>
  <span m='1936660'>that</span> <span m='1936780'>path,</span> <span m='1937080'>you're</span>
  <span m='1937170'>kind</span> <span m='1937380'>of</span> <span m='1937470'>cutting</span>
  <span m='1937830'>the</span> <span m='1937930'>path</span> <span m='1938160'>and</span>
  <span m='1938250'>half</span> <span m='1938570'>repeatedly.</span> </p><p><span
  m='1939550'>It'll look</span> <span m='1939810'>kind</span> <span m='1940110'>of</span>
  <span m='1940170'>logarithmic,</span> <span m='1941420'>that's a</span> <span m='1941610'>very</span>
  <span m='1941820'>vague</span> <span m='1942090'>argument.</span> <span m='1943710'>And</span>
  <span m='1944070'>in</span> <span m='1944630'>the</span> <span m='1944670'>advanced</span>
  <span m='1945060'>algorithms,</span> <span m='1945600'>it's</span> <span m='1945930'>proved</span>
  <span m='1946320'>why</span> <span m='1946590'>this</span> <span m='1946790'>is</span>
  <span m='1946890'>log</span> <span m='1947140'>n</span> <span m='1947310'>amortized.</span>
  <span m='1947790'>Question?</span> </p><p><span m='1948707'>AUDIENCE:</span> <span
  m='1949204'>[INAUDIBLE]</span> </p><p><span m='1955180'>PROFESSOR:</span> <span
  m='1955370'>Rotate</span> <span m='1955560'>x,</span> <span m='1955740'>rotate</span>
  <span m='1956020'>x,</span> <span m='1956410'>I</span> <span m='1956560'>think</span>
  <span m='1956730'>you're</span> <span m='1956870'>right.</span> <span m='1958350'>Yeah,</span>
  <span m='1958770'>y</span> <span m='1959040'>would</span> <span m='1959160'>go</span>
  <span m='1959340'>somewhere</span> <span m='1959700'>else,</span> <span m='1960330'>thanks.</span>
  <span m='1962390'>Yeah,</span> <span m='1963050'>so</span> <span m='1963220'>here</span>
  <span m='1963400'>it</span> <span m='1963460'>looks</span> <span m='1963670'>like</span>
  <span m='1963870'>move</span> <span m='1964700'>to</span> <span m='1964850'>root,</span>
  <span m='1965800'>here</span> <span m='1966060'>it</span> <span m='1966110'>doesn't.</span>
  <span m='1968580'>Good,</span> <span m='1970240'>and</span> <span m='1970390'>there's</span>
  <span m='1970540'>lots</span> <span m='1970780'>of</span> <span m='1970870'>things</span>
  <span m='1971110'>known</span> <span m='1971290'>about</span> <span m='1971710'>splay</span>
  <span m='1971980'>trees.</span> <span m='1972430'>So for</span> <span m='1972580'>example,</span>
  <span m='1974380'>they</span> <span m='1974530'>satisfy</span> <span m='1975100'>the</span>
  <span m='1975190'>sequential</span> <span m='1975610'>access</span> <span m='1975940'>property.</span>
  <span m='1976580'>There's an</span> <span m='1976790'>entire</span> <span m='1977230'>paper,</span>
  <span m='1978430'>combinatoric</span> <span m='1979030'>on</span> <span m='1979090'>1985</span>
  <span m='1979890'>Tarjan</span> <span m='1980380'>I</span> <span m='1980470'>believe,</span>
  <span m='1981370'>proving</span> <span m='1981790'>splay</span> <span m='1982060'>trees</span>
  <span m='1982840'>have</span> <span m='1983070'>the</span> <span m='1983110'>sequential</span>
  <span m='1983560'>access</span> <span m='1983860'>property.</span> <span m='1984460'>Not</span>
  <span m='1984670'>at</span> <span m='1984760'>all</span> <span m='1984940'>obvious,</span>
  <span m='1985460'>but</span> <span m='1985540'>it's</span> <span m='1985690'>true.</span>
  </p><p><span m='1988120'>They</span> <span m='1988420'>have</span> <span m='1989020'>the</span>
  <span m='1989110'>working</span> <span m='1989380'>set</span> <span m='1989590'>property,</span>
  <span m='1990040'>and</span> <span m='1990130'>therefore</span> <span m='1990400'>they</span>
  <span m='1990520'>have</span> <span m='1990700'>the</span> <span m='1990790'>entropy</span>
  <span m='1991180'>property.</span> <span m='1992400'>That's</span> <span m='1992740'>in</span>
  <span m='1992830'>the</span> <span m='1992950'>original</span> <span m='1993310'>splay</span>
  <span m='1993550'>tree</span> <span m='1993730'>paper.</span> <span m='1994360'>It's</span>
  <span m='1994450'>not</span> <span m='1994690'>that</span> <span m='1994840'>hard</span>
  <span m='1995020'>to</span> <span m='1995110'>prove.</span> <span m='1995320'>Once</span>
  <span m='1995500'>you</span> <span m='1995590'>prove</span> <span m='1995920'>log</span>
  <span m='1996410'>n,</span> <span m='1996910'>with a little</span> <span m='1997240'>bit</span>
  <span m='1997390'>more</span> <span m='1997570'>effort</span> <span m='1997840'>you</span>
  <span m='1997900'>can</span> <span m='1998050'>prove</span> <span m='1998290'>the</span>
  <span m='1998410'>working</span> <span m='1998710'>set</span> <span m='1998860'>property.</span>
  <span m='1999550'>We won't</span> <span m='1999700'>do</span> <span m='1999820'>it</span>
  <span m='1999910'>here.</span> <span m='2001890'>It's</span> <span m='2003030'>a</span>
  <span m='2003270'>cool</span> <span m='2003670'>amortization.</span> </p><p><span
  m='2006660'>Splay</span> <span m='2006930'>trees</span> <span m='2007140'>also</span>
  <span m='2007530'>have</span> <span m='2007770'>the</span> <span m='2007860'>dynamic</span>
  <span m='2008280'>finger</span> <span m='2008520'>property.</span> <span m='2009690'>This</span>
  <span m='2009870'>is</span> <span m='2010020'>a</span> <span m='2010110'>series</span>
  <span m='2010470'>of</span> <span m='2010650'>two</span> <span m='2010830'>papers,</span>
  <span m='2011550'>over</span> <span m='2011850'>100</span> <span m='2012120'>pages</span>
  <span m='2012480'>long.</span> <span m='2013410'>Very</span> <span m='2013680'>difficult</span>
  <span m='2014070'>to</span> <span m='2014130'>prove.</span> <span m='2014660'>In</span>
  <span m='2014750'>general,</span> <span m='2015070'>splay</span> <span m='2015300'>trees</span>
  <span m='2015570'>are</span> <span m='2015900'>hard</span> <span m='2016110'>to</span>
  <span m='2016200'>work</span> <span m='2016410'>with,</span> <span m='2016620'>because</span>
  <span m='2016950'>it's</span> <span m='2017070'>hard</span> <span m='2017310'>to</span>
  <span m='2017430'>keep</span> <span m='2017610'>track</span> <span m='2017880'>of</span>
  <span m='2017940'>what's</span> <span m='2018150'>going</span> <span m='2018420'>on.</span>
  <span m='2019410'>You</span> <span m='2019510'>can</span> <span m='2019570'>define</span>
  <span m='2019860'>potential</span> <span m='2020250'>functions,</span> <span m='2020850'>and</span>
  <span m='2021000'>that</span> <span m='2021210'>will</span> <span m='2021450'>prove</span>
  <span m='2021750'>this,</span> <span m='2022080'>and</span> <span m='2022230'>with</span>
  <span m='2022410'>a</span> <span m='2022470'>lot</span> <span m='2022680'>of</span>
  <span m='2022770'>effort</span> <span m='2023070'>it</span> <span m='2023160'>will</span>
  <span m='2023300'>prove</span> <span m='2023590'>this.</span> <span m='2024480'>We</span>
  <span m='2024660'>don't</span> <span m='2024870'>know</span> <span m='2025020'>whether</span>
  <span m='2025230'>splay</span> <span m='2025500'>trees</span> <span m='2025770'>satisfy</span>
  <span m='2026430'>the</span> <span m='2026550'>unified</span> <span m='2026940'>property,</span>
  <span m='2027750'>and</span> <span m='2027870'>more</span> <span m='2028050'>to</span>
  <span m='2028140'>the</span> <span m='2028230'>point,</span> <span m='2028480'>we</span>
  <span m='2028590'>don't</span> <span m='2028770'>know</span> <span m='2028950'>whether</span>
  <span m='2029200'>splay</span> <span m='2029400'>trees</span> <span m='2029640'>are</span>
  <span m='2029730'>dynamically</span> <span m='2030270'>optimal.</span> <span m='2030780'>This</span>
  <span m='2030960'>is</span> <span m='2031050'>the</span> <span m='2031170'>big</span>
  <span m='2031320'>question,</span> <span m='2031960'>and</span> <span m='2032070'>in</span>
  <span m='2032190'>the</span> <span m='2032250'>original</span> <span m='2032610'>splay</span>
  <span m='2032850'>tree</span> <span m='2033000'>paper</span> <span m='2033900'>it</span>
  <span m='2034020'>asked</span> <span m='2034230'>this</span> <span m='2034410'>question,</span>
  <span m='2035440'>are</span> <span m='2035670'>splay</span> <span m='2035910'>trees</span>
  <span m='2036210'>dynamically</span> <span m='2036660'>optimal.</span> <span m='2037590'>Still</span>
  <span m='2037890'>open,</span> <span m='2038370'>I</span> <span m='2038460'>wish</span>
  <span m='2038670'>I</span> <span m='2038730'>knew</span> <span m='2038850'>the</span>
  <span m='2039000'>answer,</span> <span m='2040890'>but</span> <span m='2041430'>we</span>
  <span m='2041520'>don't.</span> </p><p><span m='2045390'>So</span> <span m='2045560'>what</span>
  <span m='2045740'>the</span> <span m='2046100'>rest</span> <span m='2046430'>of</span>
  <span m='2046520'>today's</span> <span m='2046820'>lecture</span> <span m='2047240'>is</span>
  <span m='2047360'>going</span> <span m='2047510'>to</span> <span m='2047600'>be</span>
  <span m='2047720'>about</span> <span m='2048139'>is</span> <span m='2048440'>a</span>
  <span m='2048590'>geometric</span> <span m='2049250'>view,</span> <span m='2051590'>which</span>
  <span m='2051800'>I've</span> <span m='2051949'>kind</span> <span m='2052250'>of</span>
  <span m='2052340'>been</span> <span m='2052489'>hinting</span> <span m='2052850'>at</span>
  <span m='2053030'>with</span> <span m='2053150'>this</span> <span m='2053270'>picture,</span>
  <span m='2053630'>but</span> <span m='2053780'>it's,</span> <span m='2054080'>there's</span>
  <span m='2054290'>more</span> <span m='2054500'>to</span> <span m='2054710'>it</span>
  <span m='2054830'>than</span> <span m='2055010'>just</span> <span m='2055730'>plot</span>
  <span m='2056060'>the</span> <span m='2056150'>points</span> <span m='2056570'>of</span>
  <span m='2056659'>searches.</span> <span m='2058580'>There's</span> <span m='2058850'>a</span>
  <span m='2058909'>way,</span> <span m='2059120'>not</span> <span m='2059389'>only</span>
  <span m='2059600'>to</span> <span m='2059719'>see</span> <span m='2059929'>what</span>
  <span m='2060110'>the</span> <span m='2060199'>searches</span> <span m='2060620'>are,</span>
  <span m='2061159'>but</span> <span m='2061310'>to</span> <span m='2061400'>see</span>
  <span m='2061639'>what</span> <span m='2061850'>the</span> <span m='2061940'>binary</span>
  <span m='2062300'>search</span> <span m='2062540'>tree</span> <span m='2062810'>algorithm</span>
  <span m='2063320'>is.</span> <span m='2065000'>So,</span> <span m='2065409'>at</span>
  <span m='2065540'>this</span> <span m='2065719'>point</span> <span m='2065969'>binary</span>
  <span m='2066320'>search tree</span> <span m='2066590'>algorithms</span> <span m='2066860'>are</span>
  <span m='2066949'>kind</span> <span m='2067219'>of</span> <span m='2067429'>abstract.</span>
  <span m='2068090'>I</span> <span m='2068150'>mean,</span> <span m='2068330'>we've</span>
  <span m='2068960'>kind</span> <span m='2069170'>of</span> <span m='2069260'>drawn</span>
  <span m='2069500'>pictures,</span> <span m='2069980'>and</span> <span m='2070250'>how</span>
  <span m='2070400'>to</span> <span m='2070520'>do</span> <span m='2070670'>specific</span>
  <span m='2071120'>cases,</span> <span m='2071690'>you</span> <span m='2071810'>know</span>
  <span m='2072020'>how</span> <span m='2072560'>red</span> <span m='2072739'>black</span>
  <span m='2073010'>trees</span> <span m='2073370'>or</span> <span m='2073460'>something</span>
  <span m='2073820'>work.</span> <span m='2074850'>But,</span> <span m='2075110'>you</span>
  <span m='2075199'>know,</span> <span m='2075290'>it's</span> <span m='2075440'>complicated</span>
  <span m='2076219'>to</span> <span m='2076370'>write</span> <span m='2076610'>down</span>
  <span m='2076790'>one</span> <span m='2076909'>of</span> <span m='2076969'>these</span>
  <span m='2077150'>algorithms.</span> </p><p><span m='2077719'>How</span> <span m='2077929'>would</span>
  <span m='2078139'>we</span> <span m='2078440'>think</span> <span m='2078710'>about</span>
  <span m='2079639'>all</span> <span m='2079909'>of</span> <span m='2080030'>them?</span>
  <span m='2081050'>What</span> <span m='2081300'>would</span> <span m='2081550'>you</span>
  <span m='2081620'>think</span> <span m='2081830'>about</span> <span m='2082040'>the</span>
  <span m='2082159'>optimal</span> <span m='2082550'>one?</span> <span m='2083120'>Turns</span>
  <span m='2083389'>out</span> <span m='2083540'>there's</span> <span m='2083719'>a</span>
  <span m='2083780'>geometric</span> <span m='2084290'>view,</span> <span m='2084500'>in</span>
  <span m='2084590'>which</span> <span m='2084920'>it's</span> <span m='2085639'>actually</span>
  <span m='2085940'>very</span> <span m='2086540'>easy</span> <span m='2086900'>to</span>
  <span m='2087050'>see</span> <span m='2087260'>what</span> <span m='2087560'>the</span>
  <span m='2088219'>algorithm</span> <span m='2088610'>is,</span> <span m='2088790'>but</span>
  <span m='2088909'>it</span> <span m='2088969'>takes</span> <span m='2089210'>a</span>
  <span m='2089239'>little</span> <span m='2089449'>bit</span> <span m='2089600'>of</span>
  <span m='2090199'>work</span> <span m='2090500'>to</span> <span m='2090710'>prove</span>
  <span m='2090980'>that</span> <span m='2091130'>it's</span> <span m='2091699'>the</span>
  <span m='2091790'>right</span> <span m='2091969'>thing.</span> <span m='2092750'>And</span>
  <span m='2092870'>it</span> <span m='2092960'>suggests</span> <span m='2093409'>a</span>
  <span m='2093530'>totally</span> <span m='2094219'>obvious</span> <span m='2096139'>offline</span>
  <span m='2097340'>optimal</span> <span m='2097820'>algorithm,</span> <span m='2099200'>which</span>
  <span m='2099350'>we</span> <span m='2099470'>don't</span> <span m='2099650'>know</span>
  <span m='2099890'>is</span> <span m='2100130'>optimal,</span> <span m='2100850'>but</span>
  <span m='2100900'>we</span> <span m='2101000'>think</span> <span m='2101270'>is</span>
  <span m='2101450'>offline</span> <span m='2102320'>optimal.</span> <span m='2103940'>It's</span>
  <span m='2104510'>like</span> <span m='2104840'>the</span> <span m='2104990'>obvious</span>
  <span m='2105350'>thing</span> <span m='2105560'>to</span> <span m='2105680'>do,</span>
  <span m='2108170'>which</span> <span m='2108380'>we'll</span> <span m='2108470'>get</span>
  <span m='2108650'>to,</span> <span m='2110150'>and</span> <span m='2110390'>we</span>
  <span m='2110510'>can</span> <span m='2110660'>actually</span> <span m='2110960'>make</span>
  <span m='2111140'>it</span> <span m='2111260'>online.</span> <span m='2112100'>So,</span>
  <span m='2112400'>this</span> <span m='2112610'>is--</span> <span m='2113090'>this</span>
  <span m='2113330'>gives</span> <span m='2113570'>us</span> <span m='2113720'>a</span>
  <span m='2113780'>binary</span> <span m='2114110'>search</span> <span m='2114350'>tree</span>
  <span m='2115280'>that</span> <span m='2115430'>is</span> <span m='2115760'>so</span>
  <span m='2116240'>obviously</span> <span m='2116720'>optimal,</span> <span m='2117110'>where</span>
  <span m='2117230'>splay</span> <span m='2117530'>trees</span> <span m='2117800'>is</span>
  <span m='2117890'>kind</span> <span m='2118130'>of</span> <span m='2118230'>vaguely</span>
  <span m='2119150'>feels</span> <span m='2119510'>good,</span> <span m='2120440'>this</span>
  <span m='2120650'>is</span> <span m='2120830'>really</span> <span m='2121220'>obvious,</span>
  <span m='2121970'>yet</span> <span m='2122210'>we</span> <span m='2122330'>can't</span>
  <span m='2122540'>prove</span> <span m='2122780'>it.</span> <span m='2123275'>So</span>
  <span m='2123680'>it's</span> <span m='2123860'>like</span> <span m='2124070'>we're</span>
  <span m='2124670'>one</span> <span m='2124850'>step</span> <span m='2125450'>closer,</span>
  <span m='2125960'>but</span> <span m='2126110'>not</span> <span m='2126260'>quite</span>
  <span m='2126500'>there.</span> </p><p><span m='2129900'>So</span> <span m='2129950'>that's</span>
  <span m='2130160'>where</span> <span m='2130310'>we're</span> <span m='2130400'>going.</span>
  </p><p><span m='2156550'>So</span> <span m='2156680'>this</span> <span m='2156880'>geometric</span>
  <span m='2157330'>view</span> <span m='2157660'>was</span> <span m='2158100'>the</span>
  <span m='2158140'>topic</span> <span m='2158620'>of</span> <span m='2158950'>[?
  Deion ?]</span> <span m='2159250'>[? Harmon's ?]</span> <span m='2159750'>PhD</span>
  <span m='2160150'>thesis,</span> <span m='2160630'>here</span> <span m='2160780'>at</span>
  <span m='2160870'>MIT.</span> <span m='2161740'>And</span> <span m='2161980'>it's</span>
  <span m='2162280'>also</span> <span m='2162700'>with</span> <span m='2163030'>John</span>
  <span m='2163240'>Iacono,</span> <span m='2163780'>[? Danielle ?]</span> <span m='2164260'>[?
  Caine, ?]</span> <span m='2164740'>who</span> <span m='2165190'>was</span> <span
  m='2165310'>an</span> <span m='2165370'>undergrad</span> <span m='2165700'>here,</span>
  <span m='2166000'>and</span> <span m='2166270'>[? Mihal ?]</span> <span m='2166510'>[?
  Piotrowski, ?]</span> <span m='2167050'>who</span> <span m='2167200'>was</span>
  <span m='2167350'>an</span> <span m='2167410'>undergrad</span> <span m='2167770'>and</span>
  <span m='2167890'>a</span> <span m='2167950'>PhD</span> <span m='2168370'>here.</span>
  <span m='2169450'>It was</span> <span m='2169630'>published</span> <span m='2171130'>three</span>
  <span m='2171310'>years</span> <span m='2171490'>ago,</span> <span m='2172000'>2009.</span>
  <span m='2173890'>So,</span> <span m='2175180'>here's</span> <span m='2175390'>the</span>
  <span m='2175510'>idea.</span> <span m='2177130'>Access</span> <span m='2177490'>sequence,</span>
  <span m='2178510'>this</span> <span m='2178870'>is</span> <span m='2178960'>the</span>
  <span m='2179050'>sequence</span> <span m='2179410'>of</span> <span m='2179500'>searches</span>
  <span m='2179920'>you</span> <span m='2180010'>do.</span> <span m='2181780'>That's</span>
  <span m='2183310'>very</span> <span m='2183580'>easy,</span> <span m='2183990'>you</span>
  <span m='2184000'>just</span> <span m='2184210'>map</span> <span m='2184510'>it</span>
  <span m='2184600'>to</span> <span m='2185380'>the</span> <span m='2185470'>set</span>
  <span m='2185650'>of</span> <span m='2185740'>points</span> <span m='2186970'>where,</span>
  <span m='2187990'>I</span> <span m='2188050'>guess</span> <span m='2188860'>I'm</span>
  <span m='2188950'>going</span> <span m='2189070'>to</span> <span m='2189130'>switch</span>
  <span m='2189400'>things</span> <span m='2189640'>on</span> <span m='2189760'>you.</span>
  <span m='2189910'>Sorry</span> <span m='2190150'>about</span> <span m='2190360'>that.</span>
  <span m='2193030'>X-axis</span> <span m='2193660'>is</span> <span m='2193750'>going</span>
  <span m='2193930'>to</span> <span m='2194020'>be</span> <span m='2194140'>space,</span>
  <span m='2195680'>y-axis</span> <span m='2195990'>is</span> <span m='2196640'>going</span>
  <span m='2196750'>to</span> <span m='2196840'>be</span> <span m='2196930'>time.</span>
  <span m='2198280'>And</span> <span m='2198430'>I'm</span> <span m='2198520'>going</span>
  <span m='2198640'>to</span> <span m='2198700'>look</span> <span m='2198880'>at</span>
  <span m='2198970'>a</span> <span m='2199030'>specific</span> <span m='2199570'>example</span>
  <span m='2199990'>of</span> <span m='2200110'>this.</span> <span m='2204720'>Sort</span>
  <span m='2204900'>of</span> <span m='2204960'>pinwheel.</span> <span m='2207150'>Four</span>
  <span m='2207670'>accesses</span> <span m='2208480'>at--</span> <span m='2209010'>the</span>
  <span m='2209100'>first</span> <span m='2209400'>time</span> <span m='2209820'>we</span>
  <span m='2209970'>access</span> <span m='2210570'>key</span> <span m='2210880'>three,</span>
  <span m='2211390'>then</span> <span m='2211570'>we</span> <span m='2211650'>access</span>
  <span m='2211890'>key</span> <span m='2212110'>one,</span> <span m='2212490'>then</span>
  <span m='2212640'>key</span> <span m='2212880'>four,</span> <span m='2213240'>then</span>
  <span m='2213460'>key</span> <span m='2213680'>two.</span> <span m='2214680'>We've</span>
  <span m='2214890'>been</span> <span m='2215010'>drawing</span> <span m='2215250'>this</span>
  <span m='2215400'>picture</span> <span m='2216240'>throughout</span> <span m='2216480'>the</span>
  <span m='2216540'>lecture.</span> </p><p><span m='2217710'>Now</span> <span m='2217920'>the</span>
  <span m='2218010'>interesting</span> <span m='2218430'>part,</span> <span m='2219120'>is</span>
  <span m='2219270'>if</span> <span m='2219390'>you</span> <span m='2219510'>look</span>
  <span m='2219780'>at</span> <span m='2221400'>a</span> <span m='2221430'>binary</span>
  <span m='2221790'>search</span> <span m='2222090'>tree</span> <span m='2222390'>that</span>
  <span m='2222540'>actually</span> <span m='2223740'>accesses</span> <span m='2224400'>these</span>
  <span m='2224670'>elements,</span> <span m='2226870'>here's</span> <span m='2227040'>the</span>
  <span m='2227710'>exciting</span> <span m='2228090'>part.</span> <span m='2228900'>We're</span>
  <span m='2228990'>going</span> <span m='2229230'>to</span> <span m='2229350'>map</span>
  <span m='2229590'>this</span> <span m='2229770'>to</span> <span m='2229950'>a</span>
  <span m='2229980'>point</span> <span m='2230280'>set,</span> <span m='2234120'>which</span>
  <span m='2234360'>is</span> <span m='2235320'>which</span> <span m='2235650'>nodes</span>
  <span m='2241710'>get</span> <span m='2242220'>touched</span> <span m='2246780'>during</span>
  <span m='2247080'>a</span> <span m='2247170'>search,</span> <span m='2249570'>during</span>
  <span m='2250170'>each</span> <span m='2250380'>search.</span> </p><p><span m='2257720'>OK,</span>
  <span m='2258010'>this</span> <span m='2258190'>is</span> <span m='2258310'>the</span>
  <span m='2258400'>fun</span> <span m='2258610'>part.</span> <span m='2260530'>So,</span>
  <span m='2260800'>what</span> <span m='2260980'>does</span> <span m='2261160'>touched</span>
  <span m='2261550'>mean?</span> <span m='2261730'>I</span> <span m='2261820'>erased</span>
  <span m='2262090'>the</span> <span m='2262180'>model,</span> <span m='2263440'>but</span>
  <span m='2263980'>in</span> <span m='2264160'>general</span> <span m='2264760'>with
  a</span> <span m='2264940'>binary</span> <span m='2265210'>search</span> <span m='2265390'>tree,</span>
  <span m='2265570'>we</span> <span m='2265690'>only</span> <span m='2265870'>have</span>
  <span m='2265990'>one</span> <span m='2266260'>pointer</span> <span m='2266610'>into</span>
  <span m='2266800'>the</span> <span m='2266920'>tree.</span> <span m='2267080'>It</span>
  <span m='2267160'>starts at</span> <span m='2267520'>the</span> <span m='2267640'>root,</span>
  <span m='2268300'>it</span> <span m='2268360'>can</span> <span m='2268510'>go</span>
  <span m='2268630'>left,</span> <span m='2269080'>it</span> <span m='2269170'>can</span>
  <span m='2269290'>go</span> <span m='2269440'>right,</span> <span m='2269890'>it</span>
  <span m='2269950'>can</span> <span m='2270070'>go</span> <span m='2270160'>to</span>
  <span m='2270250'>the</span> <span m='2270340'>parent.</span> <span m='2271570'>Every</span>
  <span m='2271960'>node</span> <span m='2272380'>that</span> <span m='2272590'>gets</span>
  <span m='2272800'>visited</span> <span m='2273370'>during--</span> <span m='2273730'>it</span>
  <span m='2273820'>can</span> <span m='2273940'>do</span> <span m='2274060'>rotations,</span>
  <span m='2275470'>every</span> <span m='2275710'>node</span> <span m='2275860'>that</span>
  <span m='2275980'>gets</span> <span m='2276130'>visited</span> <span m='2276520'>by</span>
  <span m='2276670'>walking,</span> <span m='2277420'>that's</span> <span m='2277660'>what</span>
  <span m='2277780'>I</span> <span m='2277840'>call</span> <span m='2278170'>a</span>
  <span m='2278380'>touched</span> <span m='2279220'>node.</span> <span m='2281590'>Just</span>
  <span m='2281770'>look</span> <span m='2281950'>at</span> <span m='2282040'>all</span>
  <span m='2282220'>of</span> <span m='2282310'>them.</span> </p><p><span m='2283070'>So</span>
  <span m='2283570'>for</span> <span m='2283750'>example,</span> <span m='2284710'>in</span>
  <span m='2284760'>this</span> <span m='2284920'>picture--</span> <span m='2291260'>color--</span>
  <span m='2293270'>suppose,</span> <span m='2293810'>maybe</span> <span m='2294260'>we're</span>
  <span m='2294410'>lucky,</span> <span m='2294920'>and</span> <span m='2295610'>key</span>
  <span m='2295840'>three</span> <span m='2296210'>is</span> <span m='2296300'>at</span>
  <span m='2296450'>the</span> <span m='2296540'>root.</span> <span m='2297090'>So</span>
  <span m='2297110'>that's</span> <span m='2297290'>the</span> <span m='2297380'>only</span>
  <span m='2297620'>thing</span> <span m='2297770'>I</span> <span m='2297880'>touch.</span>
  <span m='2300390'>If</span> <span m='2300500'>that's</span> <span m='2300680'>the</span>
  <span m='2300770'>case,</span> <span m='2301070'>when</span> <span m='2301250'>I</span>
  <span m='2302030'>access</span> <span m='2302450'>one,</span> <span m='2302840'>it's</span>
  <span m='2303020'>definitely</span> <span m='2303350'>not</span> <span m='2303560'>the</span>
  <span m='2303680'>root.</span> <span m='2303980'>So,</span> <span m='2304150'>in</span>
  <span m='2304190'>particular,</span> <span m='2304640'>I</span> <span m='2304880'>definitely</span>
  <span m='2305870'>have</span> <span m='2306110'>to have</span> <span m='2306310'>touched</span>
  <span m='2306560'>that</span> <span m='2306750'>node.</span> <span m='2309310'>And</span>
  <span m='2309560'>I'm</span> <span m='2309680'>just</span> <span m='2309800'>going</span>
  <span m='2309920'>to</span> <span m='2310010'>fill</span> <span m='2310280'>in</span>
  <span m='2310610'>a</span> <span m='2311960'>reasonable</span> <span m='2313610'>choice.</span>
  </p><p><span m='2316370'>I</span> <span m='2316520'>happen</span> <span m='2316820'>to</span>
  <span m='2316880'>know,</span> <span m='2317450'>this</span> <span m='2317690'>is</span>
  <span m='2317810'>a</span> <span m='2317870'>valid</span> <span m='2318470'>binary</span>
  <span m='2318800'>search</span> <span m='2319070'>tree.</span> <span m='2320310'>Not</span>
  <span m='2320480'>so</span> <span m='2320660'>obvious,</span> <span m='2321110'>but</span>
  <span m='2321550'>you</span> <span m='2321680'>can</span> <span m='2321860'>find</span>
  <span m='2322130'>one.</span> <span m='2322910'>I'm</span> <span m='2323120'>using</span>
  <span m='2323690'>here,</span> <span m='2323990'>the</span> <span m='2324160'>greedy</span>
  <span m='2324390'>algorithm</span> <span m='2324830'>actually,</span> <span m='2325320'>I'm</span>
  <span m='2325430'>cheating.</span> <span m='2326690'>We'll</span> <span m='2326870'>get</span>
  <span m='2327020'>to</span> <span m='2327770'>what</span> <span m='2327920'>that</span>
  <span m='2328070'>is.</span> <span m='2329460'>But</span> <span m='2329600'>in</span>
  <span m='2329720'>general,</span> <span m='2330350'>some</span> <span m='2330620'>point</span>
  <span m='2330890'>sets,</span> <span m='2331190'>like</span> <span m='2331370'>this</span>
  <span m='2331550'>point</span> <span m='2331820'>set,</span> <span m='2332060'>are</span>
  <span m='2332210'>not</span> <span m='2332600'>valid.</span> <span m='2333500'>There's</span>
  <span m='2333680'>no</span> <span m='2333980'>binary</span> <span m='2334300'>search
  tree</span> <span m='2334600'>that</span> <span m='2334760'>has</span> <span m='2334970'>this</span>
  <span m='2335180'>touch</span> <span m='2335450'>pattern.</span> <span m='2336020'>You</span>
  <span m='2336080'>just</span> <span m='2336230'>can't</span> <span m='2336530'>jump</span>
  <span m='2336830'>around,</span> <span m='2337250'>teleport,</span> <span m='2337790'>without</span>
  <span m='2338870'>getting</span> <span m='2339200'>somewhere.</span> <span m='2341490'>But,</span>
  <span m='2341660'>this</span> <span m='2341900'>one</span> <span m='2342050'>is</span>
  <span m='2342170'>valid.</span> <span m='2342740'>So,</span> <span m='2342890'>which</span>
  <span m='2343100'>ones</span> <span m='2343280'>are</span> <span m='2343340'>valid?</span>
  <span m='2344100'>Oh</span> <span m='2344170'>sorry</span> <span m='2344570'>I</span>
  <span m='2344610'>need</span> <span m='2344750'>one</span> <span m='2344900'>more</span>
  <span m='2345050'>point.</span> </p><p><span m='2349010'>Which</span> <span m='2349190'>ones</span>
  <span m='2349370'>are</span> <span m='2349430'>valid,</span> <span m='2349850'>which</span>
  <span m='2350030'>ones</span> <span m='2350180'>are</span> <span m='2350270'>invalid?</span>
  <span m='2350600'>How</span> <span m='2350780'>did</span> <span m='2350930'>I</span>
  <span m='2351020'>know</span> <span m='2351230'>that</span> <span m='2351380'>that</span>
  <span m='2351530'>was</span> <span m='2351680'>invalid,</span> <span m='2352160'>and</span>
  <span m='2352250'>now</span> <span m='2352430'>this</span> <span m='2352610'>one</span>
  <span m='2352760'>is</span> <span m='2352880'>valid?</span> <span m='2354150'>Well,</span>
  <span m='2354350'>there's</span> <span m='2354530'>a</span> <span m='2354620'>theorem</span>
  <span m='2354920'>tell</span> <span m='2355130'>you.</span> <span m='2356440'>Then</span>
  <span m='2357680'>what</span> <span m='2357830'>I</span> <span m='2357920'>was</span>
  <span m='2358040'>just</span> <span m='2358190'>doing</span> <span m='2358430'>there</span>
  <span m='2358580'>will</span> <span m='2358700'>become</span> <span m='2359570'>clear.</span>
  <span m='2376970'>So,</span> <span m='2377860'>I</span> <span m='2377950'>want</span>
  <span m='2378130'>to</span> <span m='2378190'>know</span> <span m='2378400'>when</span>
  <span m='2378700'>is</span> <span m='2379280'>the</span> <span m='2379420'>point</span>
  <span m='2379670'>set</span> <span m='2380390'>a</span> <span m='2380570'>valid</span>
  <span m='2381380'>BST</span> <span m='2381940'>execution,</span> <span m='2385950'>and</span>
  <span m='2386080'>I</span> <span m='2386140'>claim</span> <span m='2386560'>it</span>
  <span m='2386680'>is,</span> <span m='2387190'>if</span> <span m='2387460'>and</span>
  <span m='2387550'>only</span> <span m='2387850'>if,</span> <span m='2390370'>in</span>
  <span m='2390700'>every</span> <span m='2391030'>rectangle</span> <span m='2398140'>spanned</span>
  <span m='2400570'>by</span> <span m='2402880'>two</span> <span m='2403060'>points</span>
  <span m='2407530'>not</span> <span m='2408010'>on</span> <span m='2408580'>a</span>
  <span m='2408640'>common</span> <span m='2411280'>horizontal</span> <span m='2412000'>or</span>
  <span m='2412090'>vertical</span> <span m='2412450'>line,</span> <span m='2426160'>in</span>
  <span m='2426370'>every</span> <span m='2426640'>rectangle,</span> <span m='2427650'>there</span>
  <span m='2427940'>there's</span> <span m='2428080'>another</span> <span m='2428380'>point.</span>
  </p><p><span m='2437710'>So,</span> <span m='2437890'>let</span> <span m='2438010'>me</span>
  <span m='2438100'>draw</span> <span m='2438280'>a</span> <span m='2438310'>picture.</span>
  <span m='2439390'>I</span> <span m='2439690'>have</span> <span m='2439870'>some</span>
  <span m='2440080'>point</span> <span m='2440400'>set.</span> <span m='2441200'>We'll</span>
  <span m='2441310'>look</span> <span m='2441460'>at</span> <span m='2441520'>this</span>
  <span m='2441670'>one</span> <span m='2441820'>in</span> <span m='2441910'>a</span>
  <span m='2441970'>moment.</span> <span m='2443200'>In</span> <span m='2443320'>general,</span>
  <span m='2443620'>I</span> <span m='2443920'>take</span> <span m='2444190'>any</span>
  <span m='2444400'>two</span> <span m='2444580'>points</span> <span m='2444940'>that</span>
  <span m='2445090'>are</span> <span m='2445150'>not</span> <span m='2445510'>horizontally</span>
  <span m='2446050'>or</span> <span m='2446110'>vertically</span> <span m='2446500'>aligned,</span>
  <span m='2447640'>that</span> <span m='2447850'>spans</span> <span m='2448720'>a</span>
  <span m='2448870'>rectangle.</span> <span m='2450610'>In</span> <span m='2450670'>other</span>
  <span m='2450790'>words,</span> <span m='2451040'>the</span> <span m='2451140'>rectangle</span>
  <span m='2451480'>with</span> <span m='2451600'>those</span> <span m='2451840'>two</span>
  <span m='2452020'>as</span> <span m='2452170'>opposite</span> <span m='2452620'>corners.</span>
  <span m='2453850'>There's</span> <span m='2454030'>got</span> <span m='2454210'>to</span>
  <span m='2454300'>be</span> <span m='2454570'>another</span> <span m='2454900'>point</span>
  <span m='2455230'>in</span> <span m='2455320'>there,</span> <span m='2455890'>somewhere.</span>
  <span m='2456580'>Could</span> <span m='2456730'>be</span> <span m='2456820'>on</span>
  <span m='2456910'>the</span> <span m='2457000'>boundary,</span> <span m='2457390'>could</span>
  <span m='2457540'>be</span> <span m='2457660'>interior.</span> <span m='2460490'>OK,</span>
  <span m='2460610'>in</span> <span m='2460690'>fact,</span> <span m='2460990'>you</span>
  <span m='2461110'>can</span> <span m='2461260'>pump</span> <span m='2461560'>this</span>
  <span m='2461740'>a</span> <span m='2461770'>little</span> <span m='2461980'>bit.</span>
  </p><p><span m='2462770'>So</span> <span m='2462820'>once</span> <span m='2463030'>I</span>
  <span m='2463120'>find</span> <span m='2463360'>some</span> <span m='2463540'>point,</span>
  <span m='2463870'>let's</span> <span m='2463990'>say</span> <span m='2464170'>on</span>
  <span m='2464260'>the</span> <span m='2464450'>interior,</span> <span m='2465880'>then</span>
  <span m='2466720'>my</span> <span m='2466870'>picture</span> <span m='2468370'>looks</span>
  <span m='2468550'>like</span> <span m='2468700'>this.</span> <span m='2469480'>Maybe</span>
  <span m='2469660'>I'll</span> <span m='2469780'>just</span> <span m='2469990'>draw</span>
  <span m='2470240'>it</span> <span m='2470310'>as</span> <span m='2470440'>a</span>
  <span m='2470530'>circle.</span> <span m='2472970'>Well,</span> <span m='2473140'>here's</span>
  <span m='2473380'>another</span> <span m='2473620'>rectangle.</span> <span m='2474670'>That</span>
  <span m='2474850'>one</span> <span m='2475030'>has</span> <span m='2475210'>to</span>
  <span m='2475270'>have</span> <span m='2475420'>a</span> <span m='2475450'>point</span>
  <span m='2475750'>inside</span> <span m='2476110'>it.</span> <span m='2476500'>Here's</span>
  <span m='2476680'>another</span> <span m='2476950'>rectangle,</span> <span m='2477790'>that</span>
  <span m='2477970'>one</span> <span m='2478090'>has</span> <span m='2478270'>to</span>
  <span m='2478330'>have</span> <span m='2478480'>a</span> <span m='2478510'>point</span>
  <span m='2478720'>inside</span> <span m='2479080'>it.</span> </p><p><span m='2480410'>You</span>
  <span m='2480460'>could</span> <span m='2480580'>keep</span> <span m='2480790'>going,</span>
  <span m='2481750'>until</span> <span m='2483430'>you know</span> <span m='2483610'>maybe</span>
  <span m='2484000'>I'd put</span> <span m='2484180'>one</span> <span m='2484360'>here,</span>
  <span m='2485590'>maybe</span> <span m='2485830'>I</span> <span m='2485890'>put</span>
  <span m='2486100'>one</span> <span m='2486310'>here.</span> <span m='2487760'>OK</span>
  <span m='2488020'>if I</span> <span m='2488110'>update</span> <span m='2488470'>the</span>
  <span m='2488560'>picture</span> <span m='2488920'>then,</span> <span m='2489610'>I</span>
  <span m='2489700'>still</span> <span m='2490000'>have</span> <span m='2490600'>a</span>
  <span m='2490660'>little</span> <span m='2490960'>rectangle</span> <span m='2491470'>like</span>
  <span m='2491710'>that,</span> <span m='2493410'>little</span> <span m='2493600'>rectangle</span>
  <span m='2494080'>like</span> <span m='2494260'>that,</span> <span m='2494680'>little</span>
  <span m='2494980'>rectangle</span> <span m='2495520'>like</span> <span m='2495790'>this.</span>
  <span m='2496600'>At</span> <span m='2496720'>this</span> <span m='2496870'>point,</span>
  <span m='2497320'>this</span> <span m='2497530'>point</span> <span m='2497770'>is</span>
  <span m='2497860'>no</span> <span m='2498010'>longer</span> <span m='2498280'>involved</span>
  <span m='2498760'>in</span> <span m='2498880'>any</span> <span m='2499120'>rectangles</span>
  <span m='2499690'>essentially,</span> <span m='2500170'>because</span> <span m='2501610'>there's</span>
  <span m='2501820'>no</span> <span m='2501940'>rectangle</span> <span m='2502450'>between</span>
  <span m='2502780'>these</span> <span m='2502930'>two</span> <span m='2503050'>points</span>
  <span m='2503290'>because</span> <span m='2503440'>they're</span> <span m='2503530'>horizontally</span>
  <span m='2504130'>aligned.</span> <span m='2505480'>I</span> <span m='2505690'>could</span>
  <span m='2505840'>finish</span> <span m='2506200'>this</span> <span m='2506380'>off,</span>
  <span m='2506650'>finally,</span> <span m='2507820'>by</span> <span m='2509260'>adding</span>
  <span m='2509770'>points,</span> <span m='2510490'>let's</span> <span m='2510670'>say</span>
  <span m='2510810'>at</span> <span m='2510910'>the</span> <span m='2511000'>corners.</span>
  <span m='2512350'>Once</span> <span m='2512500'>I</span> <span m='2512650'>add</span>
  <span m='2512830'>points</span> <span m='2513100'>at</span> <span m='2513190'>the</span>
  <span m='2513280'>corners</span> <span m='2513880'>this</span> <span m='2514060'>will</span>
  <span m='2514180'>be</span> <span m='2514840'>satisfied.</span> <span m='2515860'>We</span>
  <span m='2515950'>call</span> <span m='2516130'>this</span> <span m='2516280'>property</span>
  <span m='2517770'>arborally</span> <span m='2518410'>satisfied.</span> <span m='2519715'>Gotta</span>
  <span m='2520180'>look</span> <span m='2520390'>up</span> <span m='2520510'>the</span>
  <span m='2520600'>spelling.</span> <span m='2521770'>Arboral</span> <span m='2523840'>satisfaction.</span>
  <span m='2526420'>Arboral</span> <span m='2526800'>means</span> <span m='2527680'>having</span>
  <span m='2528010'>to</span> <span m='2528100'>do</span> <span m='2528250'>with</span>
  <span m='2528370'>a</span> <span m='2528460'>tree.</span> </p><p><span m='2530170'>OK,</span>
  <span m='2530530'>so</span> <span m='2531100'>this</span> <span m='2531310'>is</span>
  <span m='2531370'>saying</span> <span m='2531660'>that</span> <span m='2531760'>point</span>
  <span m='2532050'>set</span> <span m='2532230'>is</span> <span m='2532390'>treelike,</span>
  <span m='2533560'>if</span> <span m='2533710'>it</span> <span m='2533800'>has</span>
  <span m='2533950'>this</span> <span m='2534100'>property.</span> <span m='2535570'>OK
  this</span> <span m='2535840'>picture is</span> <span m='2536170'>getting</span>
  <span m='2536380'>a</span> <span m='2536410'>little</span> <span m='2536560'>messy,</span>
  <span m='2537490'>but</span> <span m='2537940'>if</span> <span m='2538120'>I</span>
  <span m='2538210'>have</span> <span m='2538510'>any</span> <span m='2539110'>monotone</span>
  <span m='2539710'>path,</span> <span m='2540940'>like</span> <span m='2541180'>this,</span>
  <span m='2542506'>this</span> <span m='2542950'>is</span> <span m='2543010'>satisfied.</span>
  <span m='2543460'>If</span> <span m='2543550'>you</span> <span m='2543640'>look</span>
  <span m='2543820'>at</span> <span m='2543880'>any</span> <span m='2544150'>rectangle,</span>
  <span m='2544750'>say</span> <span m='2544990'>this</span> <span m='2545200'>one,</span>
  <span m='2546370'>it</span> <span m='2546490'>has</span> <span m='2546790'>points--</span>
  <span m='2547420'>other</span> <span m='2547660'>points</span> <span m='2547960'>in</span>
  <span m='2548050'>it.</span> <span m='2549170'>OK,</span> <span m='2549390'>if</span>
  <span m='2549640'>I</span> <span m='2549730'>look</span> <span m='2550030'>at,</span>
  <span m='2550390'>I</span> <span m='2550480'>don't</span> <span m='2550600'>know,</span>
  <span m='2550960'>this</span> <span m='2551170'>one,</span> <span m='2551580'>it</span>
  <span m='2551680'>has</span> <span m='2551860'>another</span> <span m='2552100'>point</span>
  <span m='2552370'>in</span> <span m='2552460'>it.</span> <span m='2552910'>But</span>
  <span m='2553030'>look</span> <span m='2553180'>at</span> <span m='2553270'>this</span>
  <span m='2553450'>one,</span> <span m='2553600'>that</span> <span m='2553720'>one</span>
  <span m='2553840'>doesn't</span> <span m='2554080'>count</span> <span m='2554350'>because</span>
  <span m='2554680'>it's</span> <span m='2554800'>just</span> <span m='2555160'>a</span>
  <span m='2555370'>vertical</span> <span m='2555730'>line.</span> <span m='2556420'>So</span>
  <span m='2556730'>it</span> <span m='2556800'>has</span> <span m='2556930'>to</span>
  <span m='2556990'>have</span> <span m='2557220'>non-zero</span> <span m='2558200'>area.</span>
  </p><p><span m='2559055'>If you</span> <span m='2559510'>look</span> <span m='2559660'>at</span>
  <span m='2559750'>any</span> <span m='2559930'>two</span> <span m='2560050'>points,</span>
  <span m='2560410'>this</span> <span m='2560620'>one</span> <span m='2560950'>and</span>
  <span m='2561070'>this</span> <span m='2561280'>one,</span> <span m='2561970'>they</span>
  <span m='2562080'>span</span> <span m='2562330'>a</span> <span m='2562390'>rectangle,</span>
  <span m='2562870'>there's</span> <span m='2562990'>another</span> <span m='2563260'>point</span>
  <span m='2563530'>in</span> <span m='2563650'>there.</span> <span m='2564340'>So,</span>
  <span m='2564430'>monotone</span> <span m='2564850'>paths</span> <span m='2565150'>are</span>
  <span m='2565240'>good.</span> <span m='2566030'>This</span> <span m='2566410'>point</span>
  <span m='2566790'>set.</span> <span m='2567040'>If</span> <span m='2567190'>I</span>
  <span m='2567280'>drew</span> <span m='2567460'>it</span> <span m='2567550'>correctly,</span>
  <span m='2568650'>is</span> <span m='2568840'>good.</span> <span m='2570900'>I</span>
  <span m='2571060'>look</span> <span m='2571270'>at</span> <span m='2571360'>any</span>
  <span m='2571720'>rectangle</span> <span m='2572230'>here,</span> <span m='2573400'>it's</span>
  <span m='2573570'>got</span> <span m='2573760'>another</span> <span m='2574000'>point</span>
  <span m='2574300'>in</span> <span m='2574390'>it.</span> <span m='2578680'>Takes</span>
  <span m='2578890'>some</span> <span m='2579040'>practice</span> <span m='2579520'>to</span>
  <span m='2579640'>be</span> <span m='2579760'>able</span> <span m='2579910'>to</span>
  <span m='2580000'>see</span> <span m='2580330'>all</span> <span m='2580400'>the</span>
  <span m='2580630'>rectangles,</span> <span m='2582670'>but</span> <span m='2583720'>check</span>
  <span m='2584050'>it.</span> <span m='2584410'>Eventually</span> <span m='2584740'>this</span>
  <span m='2584920'>one</span> <span m='2585060'>is</span> <span m='2585130'>good.</span>
  <span m='2585300'>This</span> <span m='2585430'>one's</span> <span m='2585610'>obviously</span>
  <span m='2585940'>bad.</span> <span m='2586330'>It has</span> <span m='2586510'>lots</span>
  <span m='2586810'>of</span> <span m='2587390'>wrecked--</span> <span m='2587690'>we</span>
  <span m='2587760'>call</span> <span m='2587920'>these</span> <span m='2588070'>empty</span>
  <span m='2588430'>rectangles,</span> <span m='2588940'>unsatisfied</span> <span
  m='2589540'>rectangles,</span> <span m='2590140'>that</span> <span m='2590230'>have</span>
  <span m='2590380'>no</span> <span m='2590590'>extra</span> <span m='2590830'>points</span>
  <span m='2591130'>in</span> <span m='2591220'>them.</span> <span m='2592480'>So,</span>
  <span m='2592630'>this</span> <span m='2592840'>is</span> <span m='2592960'>a</span>
  <span m='2593020'>valid</span> <span m='2593380'>BST</span> <span m='2593770'>execution,</span>
  <span m='2594310'>this</span> <span m='2594460'>is</span> <span m='2594580'>not.</span>
  </p><p><span m='2595840'>Let's</span> <span m='2595990'>prove</span> <span m='2596200'>this</span>
  <span m='2596380'>theorem</span> <span m='2596830'>it's</span> <span m='2596950'>actually</span>
  <span m='2597190'>not</span> <span m='2597520'>that</span> <span m='2597700'>hard.</span>
  <span m='2611470'>The</span> <span m='2611490'>consequence</span> <span m='2611790'>of</span>
  <span m='2612090'>the</span> <span m='2612150'>theorem,</span> <span m='2613600'>is</span>
  <span m='2613740'>it</span> <span m='2613800'>tells</span> <span m='2614070'>us</span>
  <span m='2614190'>what</span> <span m='2614340'>we</span> <span m='2614430'>need</span>
  <span m='2614580'>to</span> <span m='2614700'>do.</span> <span m='2617440'>We</span>
  <span m='2617460'>are</span> <span m='2617550'>given</span> <span m='2617850'>a</span>
  <span m='2617910'>point</span> <span m='2618130'>set</span> <span m='2618330'>like</span>
  <span m='2618510'>this,</span> <span m='2619440'>we</span> <span m='2619560'>want</span>
  <span m='2619800'>a</span> <span m='2619860'>point</span> <span m='2620070'>set</span>
  <span m='2620180'>like</span> <span m='2620280'>this.</span> <span m='2622960'>We</span>
  <span m='2623760'>can</span> <span m='2624000'>define</span> <span m='2624720'>the</span>
  <span m='2624870'>cost</span> <span m='2626610'>of</span> <span m='2626760'>a</span>
  <span m='2626820'>binary</span> <span m='2627150'>search</span> <span m='2627330'>tree</span>
  <span m='2627510'>to</span> <span m='2627630'>be</span> <span m='2627750'>how</span>
  <span m='2627960'>many</span> <span m='2628170'>nodes</span> <span m='2628470'>does</span>
  <span m='2628650'>it</span> <span m='2628740'>touch.</span> <span m='2629640'>That's</span>
  <span m='2629820'>within</span> <span m='2630090'>a</span> <span m='2630150'>constant</span>
  <span m='2630480'>factor</span> <span m='2630780'>of</span> <span m='2630840'>how</span>
  <span m='2630990'>many</span> <span m='2631200'>operations</span> <span m='2631830'>you</span>
  <span m='2631920'>do.</span> <span m='2632890'>If</span> <span m='2632970'>you</span>
  <span m='2633180'>don't</span> <span m='2633300'>want</span> <span m='2633440'>to,</span>
  <span m='2633750'>it's</span> <span m='2634140'>pointless</span> <span m='2634560'>to</span>
  <span m='2634650'>touch</span> <span m='2634920'>a</span> <span m='2634950'>node</span>
  <span m='2635190'>more</span> <span m='2635370'>than</span> <span m='2635490'>a</span>
  <span m='2635550'>constant</span> <span m='2635880'>number</span> <span m='2636060'>of</span>
  <span m='2636150'>times.</span> <span m='2636930'>You</span> <span m='2637020'>can</span>
  <span m='2637140'>prove</span> <span m='2637350'>that.</span> <span m='2638220'>So,</span>
  <span m='2638460'>really</span> <span m='2638730'>we</span> <span m='2638850'>just</span>
  <span m='2639000'>care</span> <span m='2639150'>about</span> <span m='2639420'>how</span>
  <span m='2639690'>many</span> <span m='2639930'>nodes</span> <span m='2641400'>get</span>
  <span m='2641640'>touched.</span> </p><p><span m='2642060'>So,</span> <span m='2642240'>what</span>
  <span m='2642360'>we</span> <span m='2642480'>want</span> <span m='2642690'>to</span>
  <span m='2642750'>do</span> <span m='2642870'>is</span> <span m='2642960'>find</span>
  <span m='2643230'>a</span> <span m='2643290'>minimum</span> <span m='2644010'>superset</span>
  <span m='2644790'>of</span> <span m='2644940'>this</span> <span m='2645090'>point</span>
  <span m='2645360'>set</span> <span m='2646290'>that</span> <span m='2646440'>is</span>
  <span m='2646530'>satisfied.</span> <span m='2648150'>We're</span> <span m='2648240'>given</span>
  <span m='2648660'>a</span> <span m='2648720'>set</span> <span m='2649350'>to</span>
  <span m='2649440'>represent</span> <span m='2649850'>or</span> <span m='2649940'>access</span>
  <span m='2650230'>sequence</span> <span m='2650610'>that</span> <span m='2650760'>is</span>
  <span m='2650880'>not</span> <span m='2651200'>satisfied.</span> <span m='2652080'>We</span>
  <span m='2652200'>need</span> <span m='2652380'>to</span> <span m='2652470'>act--</span>
  <span m='2652740'>we</span> <span m='2652860'>need</span> <span m='2653040'>to</span>
  <span m='2653130'>touch</span> <span m='2653400'>those</span> <span m='2653610'>points.</span>
  <span m='2654000'>That's</span> <span m='2654180'>the</span> <span m='2654270'>definition</span>
  <span m='2654750'>of</span> <span m='2654840'>search.</span> <span m='2656400'>And</span>
  <span m='2656670'>now</span> <span m='2656850'>we'd</span> <span m='2656970'>just</span>
  <span m='2657120'>like</span> <span m='2657300'>to</span> <span m='2657450'>also</span>
  <span m='2657870'>touch</span> <span m='2658170'>some</span> <span m='2658380'>other</span>
  <span m='2658560'>points</span> <span m='2658890'>that</span> <span m='2659010'>make</span>
  <span m='2659220'>it</span> <span m='2659280'>satisfied.</span> <span m='2659760'>This</span>
  <span m='2660030'>is</span> <span m='2660540'>a</span> <span m='2660630'>geometric</span>
  <span m='2661290'>interpretation</span> <span m='2661980'>of</span> <span m='2662580'>dynamic</span>
  <span m='2663060'>opt.</span> <span m='2664050'>Can</span> <span m='2664260'>you</span>
  <span m='2664380'>find</span> <span m='2664920'>the</span> <span m='2665250'>offline</span>
  <span m='2665430'>optimal,</span> <span m='2666120'>is--</span> <span m='2667260'>what's</span>
  <span m='2667500'>the</span> <span m='2667620'>minimum</span> <span m='2668010'>number</span>
  <span m='2668250'>of</span> <span m='2668310'>points</span> <span m='2668610'>to</span>
  <span m='2668730'>add</span> <span m='2669780'>in</span> <span m='2669930'>order</span>
  <span m='2670140'>to</span> <span m='2671070'>make</span> <span m='2671370'>your</span>
  <span m='2671520'>point</span> <span m='2671840'>set</span> <span m='2672210'>arborally</span>
  <span m='2672570'>satisfied.</span> </p><p><span m='2673560'>We</span> <span m='2673680'>don't</span>
  <span m='2673860'>know</span> <span m='2674010'>whether</span> <span m='2674220'>that</span>
  <span m='2674370'>problem</span> <span m='2674700'>is</span> <span m='2674820'>NP</span>
  <span m='2675090'>hard.</span> <span m='2675600'>Probably</span> <span m='2676140'>it</span>
  <span m='2676230'>is.</span> <span m='2677400'>We</span> <span m='2677610'>don't</span>
  <span m='2677760'>know</span> <span m='2677970'>how</span> <span m='2678150'>to</span>
  <span m='2679560'>compute</span> <span m='2679920'>it.</span> <span m='2680430'>We</span>
  <span m='2680520'>don't</span> <span m='2680640'>know</span> <span m='2680790'>how</span>
  <span m='2680880'>to</span> <span m='2681000'>find</span> <span m='2681200'>a</span>
  <span m='2681270'>constant</span> <span m='2681580'>factor</span> <span m='2681860'>approximation,</span>
  <span m='2683350'>unfortunately.</span> <span m='2684690'>Yeah?</span> </p><p><span
  m='2685882'>AUDIENCE:</span> <span m='2686368'>So,</span> <span m='2687340'>this</span>
  <span m='2687830'>is</span> <span m='2688130'>for and</span> <span m='2688550'>access</span>
  <span m='2689040'>sequence,</span> <span m='2689510'>so every</span> <span m='2689980'>time</span>
  <span m='2690450'>corresponds</span> <span m='2690920'>to</span> <span m='2691390'>just</span>
  <span m='2692330'>seeking</span> <span m='2692800'>like</span> <span m='2693270'>one
  individually</span> <span m='2693740'>thing in</span> <span m='2694210'>the tree?</span>
  </p><p><span m='2694690'>PROFESSOR:</span> <span m='2694850'>Right.</span> </p><p><span
  m='2695410'>AUDIENCE:</span> <span m='2695610'>OK,</span> <span m='2695810'>that
  makes more sense.</span> </p><p><span m='2696210'>PROFESSOR:</span> <span m='2696330'>Yes,</span>
  <span m='2696450'>so</span> <span m='2696920'>the</span> <span m='2697230'>input--</span>
  <span m='2698080'>there</span> <span m='2698340'>is</span> <span m='2698460'>a</span>
  <span m='2698520'>unique</span> <span m='2700530'>thing,</span> <span m='2700950'>a</span>
  <span m='2701010'>key,</span> <span m='2701250'>that</span> <span m='2701370'>gets</span>
  <span m='2701580'>accessed</span> <span m='2702060'>at</span> <span m='2702240'>each</span>
  <span m='2702450'>time.</span> <span m='2703060'>So</span> <span m='2703110'>if</span>
  <span m='2703200'>you</span> <span m='2703290'>draw</span> <span m='2703650'>any</span>
  <span m='2703980'>horizontal</span> <span m='2704460'>line,</span> <span m='2705550'>in</span>
  <span m='2706230'>the</span> <span m='2706320'>input</span> <span m='2706950'>point</span>
  <span m='2707250'>set</span> <span m='2707370'>there's</span> <span m='2707520'>only</span>
  <span m='2707760'>one</span> <span m='2708030'>point</span> <span m='2708270'>in</span>
  <span m='2708360'>each</span> <span m='2708540'>horizontal</span> <span m='2709020'>line.</span>
  <span m='2709560'>There</span> <span m='2709650'>can</span> <span m='2709800'>be</span>
  <span m='2709920'>multiple</span> <span m='2710310'>points</span> <span m='2710640'>in</span>
  <span m='2710790'>each</span> <span m='2710940'>vertical</span> <span m='2711300'>line,</span>
  <span m='2712500'>which</span> <span m='2712680'>would</span> <span m='2712770'>mean</span>
  <span m='2712920'>that</span> <span m='2713090'>key</span> <span m='2713280'>gets</span>
  <span m='2713460'>accessed</span> <span m='2713790'>more</span> <span m='2713940'>than</span>
  <span m='2714060'>one</span> <span m='2714210'>time.</span> <span m='2715500'>That's</span>
  <span m='2715740'>the</span> <span m='2715890'>obvious</span> <span m='2716250'>interpretation</span>
  <span m='2716850'>terms</span> <span m='2717060'>of</span> <span m='2717120'>binary</span>
  <span m='2717380'>search</span> <span m='2717530'>tree,</span> <span m='2717870'>turns</span>
  <span m='2718140'>out</span> <span m='2718290'>you</span> <span m='2718410'>don't</span>
  <span m='2718590'>need</span> <span m='2718740'>to</span> <span m='2718860'>assume</span>
  <span m='2719130'>either</span> <span m='2719370'>of</span> <span m='2719430'>those</span>
  <span m='2719640'>things.</span> <span m='2720780'>You</span> <span m='2720900'>could</span>
  <span m='2721140'>allow</span> <span m='2721650'>a</span> <span m='2721740'>sort</span>
  <span m='2721950'>of</span> <span m='2722070'>multi-search,</span> <span m='2722790'>where</span>
  <span m='2722910'>I</span> <span m='2722970'>say</span> <span m='2723780'>during</span>
  <span m='2724170'>this</span> <span m='2724350'>round</span> <span m='2724650'>you</span>
  <span m='2724770'>have</span> <span m='2724950'>to</span> <span m='2725040'>access</span>
  <span m='2725490'>key</span> <span m='2725700'>5</span> <span m='2726090'>and</span>
  <span m='2726430'>7,</span> <span m='2726870'>I</span> <span m='2726990'>don't</span>
  <span m='2727140'>care</span> <span m='2727330'>in</span> <span m='2727440'>what</span>
  <span m='2727590'>order.</span> <span m='2728730'>Whereas</span> <span m='2728940'>normally</span>
  <span m='2729330'>I</span> <span m='2729390'>say,</span> <span m='2729690'>you</span>
  <span m='2729840'>have</span> <span m='2729990'>access</span> <span m='2730310'>key</span>
  <span m='2730570'>5,</span> <span m='2731010'>then</span> <span m='2731190'>you</span>
  <span m='2731310'>have</span> <span m='2731490'>to</span> <span m='2731550'>access</span>
  <span m='2731840'>key</span> <span m='2732000'>7.</span> </p><p><span m='2732750'>You</span>
  <span m='2732870'>could</span> <span m='2732990'>do</span> <span m='2733110'>a</span>
  <span m='2733170'>multi-search,</span> <span m='2733800'>where</span> <span m='2733960'>there's</span>
  <span m='2734160'>multiple</span> <span m='2734580'>points</span> <span m='2734970'>in</span>
  <span m='2735090'>a</span> <span m='2735150'>single</span> <span m='2735930'>row.</span>
  <span m='2736920'>All</span> <span m='2737130'>of</span> <span m='2737280'>the</span>
  <span m='2737430'>things</span> <span m='2737670'>I'll</span> <span m='2737770'>say</span>
  <span m='2738180'>work,</span> <span m='2738720'>it</span> <span m='2738840'>doesn't</span>
  <span m='2739080'>really</span> <span m='2739260'>make</span> <span m='2739470'>a</span>
  <span m='2739500'>difference</span> <span m='2739950'>as</span> <span m='2740070'>the</span>
  <span m='2740160'>claim.</span> <span m='2741450'>You</span> <span m='2741600'>could</span>
  <span m='2741750'>also</span> <span m='2742110'>assume</span> <span m='2742590'>that</span>
  <span m='2742740'>no</span> <span m='2743250'>key</span> <span m='2743550'>is</span>
  <span m='2743700'>accessed</span> <span m='2744180'>more</span> <span m='2744390'>than</span>
  <span m='2744510'>once,</span> <span m='2745740'>so</span> <span m='2745950'>then</span>
  <span m='2746100'>there's</span> <span m='2746370'>only</span> <span m='2746700'>one--</span>
  <span m='2747270'>those</span> <span m='2747520'>would</span> <span m='2747610'>be</span>
  <span m='2747750'>the</span> <span m='2747840'>opposite</span> <span m='2748170'>extreme.</span>
  <span m='2748860'>You</span> <span m='2748950'>can</span> <span m='2749070'>assume</span>
  <span m='2749310'>there's</span> <span m='2749520'>only</span> <span m='2749790'>one</span>
  <span m='2750030'>key</span> <span m='2750270'>per</span> <span m='2750510'>column.</span>
  <span m='2751830'>That</span> <span m='2752010'>turns</span> <span m='2752250'>out</span>
  <span m='2752340'>not</span> <span m='2752520'>to</span> <span m='2752640'>make</span>
  <span m='2752820'>much</span> <span m='2753030'>difference.</span> <span m='2753600'>If</span>
  <span m='2753780'>there's</span> <span m='2754020'>multiple</span> <span m='2754380'>keys</span>
  <span m='2754680'>in</span> <span m='2754770'>the</span> <span m='2754860'>same</span>
  <span m='2755250'>position,</span> <span m='2755700'>just</span> <span m='2756390'>spread</span>
  <span m='2756540'>them</span> <span m='2756660'>out</span> <span m='2756780'>a</span>
  <span m='2756810'>little</span> <span m='2757950'>and</span> <span m='2758070'>you'll</span>
  <span m='2758220'>get</span> <span m='2758760'>roughly</span> <span m='2759120'>the</span>
  <span m='2759240'>same</span> <span m='2759450'>cost.</span> </p><p><span m='2760960'>So,</span>
  <span m='2761070'>good</span> <span m='2761250'>question.</span> <span m='2762220'>But</span>
  <span m='2762420'>in</span> <span m='2762660'>the</span> <span m='2762750'>natural</span>
  <span m='2763020'>interpretation</span> <span m='2763560'>there's</span> <span m='2763680'>one</span>
  <span m='2763890'>per row,</span> <span m='2764250'>multiple</span> <span m='2764640'>per</span>
  <span m='2764760'>column,</span> <span m='2765150'>but</span> <span m='2765270'>it</span>
  <span m='2765360'>doesn't,</span> <span m='2766080'>neither</span> <span m='2766380'>one</span>
  <span m='2766560'>matters.</span> <span m='2770010'>OK.</span> <span m='2774210'>So</span>
  <span m='2774390'>this</span> <span m='2774540'>becomes</span> <span m='2774900'>the</span>
  <span m='2774990'>problem,</span> <span m='2775830'>go</span> <span m='2776040'>from</span>
  <span m='2776250'>this</span> <span m='2776490'>to</span> <span m='2776610'>this,</span>
  <span m='2777360'>with</span> <span m='2777510'>a</span> <span m='2777570'>minimum</span>
  <span m='2777960'>number</span> <span m='2778200'>of</span> <span m='2778290'>added</span>
  <span m='2778560'>points.</span> <span m='2780630'>We</span> <span m='2780840'>do</span>
  <span m='2780990'>know</span> <span m='2781200'>a</span> <span m='2781290'>log</span>
  <span m='2781620'>log</span> <span m='2781860'>n</span> <span m='2781950'>approximation</span>
  <span m='2782640'>to</span> <span m='2782760'>that</span> <span m='2783570'>problem.</span>
  <span m='2784130'>That's</span> <span m='2784170'>the</span> <span m='2784260'>best</span>
  <span m='2784710'>we</span> <span m='2784890'>know.</span> <span m='2786540'>You</span>
  <span m='2786660'>just</span> <span m='2786810'>take</span> <span m='2787050'>this</span>
  <span m='2787200'>binary</span> <span m='2787500'>search</span> <span m='2787710'>tree,</span>
  <span m='2789000'>and</span> <span m='2789930'>apply</span> <span m='2790410'>this</span>
  <span m='2791160'>transformation,</span> <span m='2792480'>and</span> <span m='2792630'>it</span>
  <span m='2792690'>tells</span> <span m='2792990'>you</span> <span m='2793170'>if</span>
  <span m='2793290'>you</span> <span m='2793470'>have</span> <span m='2793710'>a</span>
  <span m='2794040'>binary search</span> <span m='2794490'>tree,</span> <span m='2794640'>you</span>
  <span m='2794820'>can</span> <span m='2794940'>turn</span> <span m='2795150'>it</span>
  <span m='2795260'>into</span> <span m='2795510'>a</span> <span m='2795600'>way</span>
  <span m='2795750'>to</span> <span m='2795870'>satisfy</span> <span m='2796360'>a</span>
  <span m='2796380'>point</span> <span m='2796610'>set.</span> <span m='2797340'>But</span>
  <span m='2797430'>this</span> <span m='2797610'>is</span> <span m='2797760'>actually</span>
  <span m='2798030'>the</span> <span m='2798120'>best</span> <span m='2798420'>approximation</span>
  <span m='2798990'>algorithm</span> <span m='2799230'>that</span> <span m='2799320'>we</span>
  <span m='2799440'>know.</span> </p><p><span m='2800460'>But</span> <span m='2800610'>as</span>
  <span m='2800700'>you'll</span> <span m='2800820'>see,</span> <span m='2801050'>the</span>
  <span m='2801480'>geometric</span> <span m='2801930'>view</span> <span m='2802260'>offers</span>
  <span m='2802590'>a</span> <span m='2802650'>lot</span> <span m='2802860'>of</span>
  <span m='2802950'>insight.</span> <span m='2804060'>Gives</span> <span m='2804240'>us</span>
  <span m='2804360'>a</span> <span m='2804420'>lot</span> <span m='2804540'>of</span>
  <span m='2804630'>power,</span> <span m='2804930'>and</span> <span m='2805170'>in</span>
  <span m='2805290'>some</span> <span m='2805530'>sense</span> <span m='2805870'>we</span>
  <span m='2805890'>use</span> <span m='2806160'>it</span> <span m='2806490'>to</span>
  <span m='2806730'>construct</span> <span m='2807150'>this.</span> <span m='2809710'>OK,</span>
  <span m='2812220'>so</span> <span m='2812430'>let's</span> <span m='2812640'>prove</span>
  <span m='2813090'>the</span> <span m='2813190'>theorem.</span> <span m='2821360'>So</span>
  <span m='2821520'>there's</span> <span m='2821700'>two</span> <span m='2821850'>directions.</span>
  <span m='2822660'>We'll</span> <span m='2822750'>start</span> <span m='2822990'>with</span>
  <span m='2823140'>the</span> <span m='2823230'>easy</span> <span m='2823500'>direction.</span>
  <span m='2824670'>If</span> <span m='2824850'>you</span> <span m='2824970'>have</span>
  <span m='2825150'>a</span> <span m='2825180'>binary</span> <span m='2825540'>search</span>
  <span m='2825810'>tree,</span> <span m='2826620'>then</span> <span m='2826890'>it</span>
  <span m='2826980'>must</span> <span m='2827340'>be</span> <span m='2827550'>arborally</span>
  <span m='2828120'>satisfied.</span> <span m='2829600'>Then</span> <span m='2829930'>we'll</span>
  <span m='2830160'>have to</span> <span m='2830250'>do</span> <span m='2830340'>the</span>
  <span m='2830460'>reverse,</span> <span m='2830820'>actually</span> <span m='2831150'>build</span>
  <span m='2831390'>a</span> <span m='2831450'>binary</span> <span m='2831750'>search</span>
  <span m='2832020'>tree</span> <span m='2832260'>out</span> <span m='2832410'>of</span>
  <span m='2832530'>a</span> <span m='2832590'>point</span> <span m='2832860'>set.</span>
  <span m='2833190'>That's</span> <span m='2833370'>kind</span> <span m='2833520'>of</span>
  <span m='2834050'>the</span> <span m='2834270'>harder</span> <span m='2834510'>step.</span>
  </p><p><span m='2837120'>So,</span> <span m='2838170'>let's</span> <span m='2838470'>say</span>
  <span m='2838830'>we</span> <span m='2838950'>have</span> <span m='2839100'>two</span>
  <span m='2839220'>points.</span> <span m='2842610'>Let's</span> <span m='2842790'>say</span>
  <span m='2843030'>this</span> <span m='2843210'>is</span> <span m='2843300'>that</span>
  <span m='2843450'>time</span> <span m='2844410'>i,</span> <span m='2845280'>we</span>
  <span m='2845460'>access</span> <span m='2846570'>key</span> <span m='2846930'>x,</span>
  <span m='2847860'>and</span> <span m='2848010'>this</span> <span m='2848160'>one
  is</span> <span m='2848460'>at</span> <span m='2848580'>time</span> <span m='2848950'>j,</span>
  <span m='2850020'>we</span> <span m='2850120'>access</span> <span m='2850520'>key</span>
  <span m='2850830'>y.</span> <span m='2851610'>Let's</span> <span m='2851790'>suppose</span>
  <span m='2852150'>y</span> <span m='2852390'>is</span> <span m='2852510'>greater</span>
  <span m='2852750'>than</span> <span m='2852900'>x,</span> <span m='2853340'>there's</span>
  <span m='2853570'>the</span> <span m='2853680'>symmetric</span> <span m='2854610'>picture.</span>
  <span m='2855990'>We</span> <span m='2856110'>want</span> <span m='2856260'>to</span>
  <span m='2856350'>argue</span> <span m='2856710'>that</span> <span m='2856860'>there</span>
  <span m='2857030'>is</span> <span m='2857130'>some</span> <span m='2857490'>other</span>
  <span m='2857880'>point</span> <span m='2858270'>in</span> <span m='2858420'>this</span>
  <span m='2858570'>rectangle.</span> <span m='2862010'>OK,</span> <span m='2864490'>here's</span>
  <span m='2864630'>the</span> <span m='2864720'>plan,</span> <span m='2866730'>let</span>
  <span m='2867030'>a</span> <span m='2868020'>be</span> <span m='2868470'>the</span>
  <span m='2868830'>lowest</span> <span m='2869370'>common</span> <span m='2869730'>ancestor</span>
  <span m='2870450'>of</span> <span m='2870810'>x</span> <span m='2871050'>and</span>
  <span m='2871170'>y.</span> <span m='2872700'>x</span> <span m='2872880'>is</span>
  <span m='2872970'>a</span> <span m='2873030'>key,</span> <span m='2873600'>y</span>
  <span m='2873750'>is</span> <span m='2873860'>a</span> <span m='2873930'>key,</span>
  <span m='2874320'>they</span> <span m='2874440'>are</span> <span m='2874500'>nodes</span>
  <span m='2874770'>in</span> <span m='2874860'>the</span> <span m='2874950'>tree.</span>
  </p><p><span m='2877110'>This</span> <span m='2877320'>is</span> <span m='2877410'>a</span>
  <span m='2877530'>changing</span> <span m='2878010'>quantity.</span> <span m='2878670'>As</span>
  <span m='2878880'>the</span> <span m='2878970'>tree</span> <span m='2879420'>wiggles</span>
  <span m='2879720'>around</span> <span m='2880120'>those</span> <span m='2880260'>rotations,</span>
  <span m='2881050'>the</span> <span m='2881280'>least</span> <span m='2881550'>common</span>
  <span m='2881820'>ancestor</span> <span m='2882270'>changes.</span> <span m='2882830'>But</span>
  <span m='2882980'>at</span> <span m='2883110'>every</span> <span m='2883350'>time,</span>
  <span m='2885000'>there</span> <span m='2885240'>is,</span> <span m='2885780'>it</span>
  <span m='2885930'>has</span> <span m='2886080'>some</span> <span m='2886270'>of</span>
  <span m='2886340'>these</span> <span m='2886500'>common</span> <span m='2886740'>ancestor.</span>
  <span m='2887160'>Might</span> <span m='2887340'>be</span> <span m='2887490'>x,</span>
  <span m='2887730'>might</span> <span m='2887910'>be</span> <span m='2888000'>y,</span>
  <span m='2888270'>might</span> <span m='2888420'>be</span> <span m='2888540'>some</span>
  <span m='2888720'>other</span> <span m='2888900'>node.</span> <span m='2890250'>OK?</span>
  <span m='2891840'>I</span> <span m='2891900'>want</span> <span m='2892050'>to</span>
  <span m='2892110'>look</span> <span m='2892380'>at</span> <span m='2892740'>a</span>
  <span m='2892800'>couple</span> <span m='2893040'>of</span> <span m='2893160'>things.</span>
  <span m='2897460'>Let's</span> <span m='2897660'>say,</span> <span m='2898170'>right</span>
  <span m='2898530'>before</span> <span m='2905610'>x</span> <span m='2906320'>is</span>
  <span m='2906530'>touched</span> <span m='2909910'>at</span> <span m='2910320'>time</span>
  <span m='2910560'>i,</span> <span m='2914200'>or</span> <span m='2914640'>I</span>
  <span m='2914680'>guess</span> <span m='2915270'>right</span> <span m='2915490'>before</span>
  <span m='2915790'>time</span> <span m='2916060'>i</span> <span m='2916390'>would</span>
  <span m='2916480'>be</span> <span m='2916630'>the</span> <span m='2916750'>proper</span>
  <span m='2917170'>phrasing.</span> </p><p><span m='2921970'>So</span> <span m='2922050'>we're</span>
  <span m='2922320'>at</span> <span m='2922500'>this</span> <span m='2922650'>moment,</span>
  <span m='2924670'>I</span> <span m='2924690'>want</span> <span m='2924870'>to</span>
  <span m='2924930'>know</span> <span m='2925710'>does</span> <span m='2926160'>a</span>
  <span m='2926580'>equal</span> <span m='2927080'>x?</span> <span m='2931730'>If</span>
  <span m='2932000'>a</span> <span m='2932720'>does</span> <span m='2932900'>not</span>
  <span m='2933200'>equal</span> <span m='2933500'>x,</span> <span m='2935570'>then</span>
  <span m='2937700'>I'm</span> <span m='2937910'>going</span> <span m='2938090'>to</span>
  <span m='2938180'>use</span> <span m='2938420'>the</span> <span m='2938510'>point</span>
  <span m='2939560'>a</span> <span m='2939950'>comma</span> <span m='2940650'>i.</span>
  <span m='2942240'>OK?</span> <span m='2942800'>Least</span> <span m='2943040'>common</span>
  <span m='2943340'>ancestor</span> <span m='2943910'>has</span> <span m='2944150'>the</span>
  <span m='2944240'>property</span> <span m='2945320'>that</span> <span m='2946550'>x</span>
  <span m='2947000'>is</span> <span m='2947330'>less</span> <span m='2947600'>than</span>
  <span m='2947870'>or</span> <span m='2947990'>equal</span> <span m='2948260'>to</span>
  <span m='2948350'>a,</span> <span m='2948740'>is</span> <span m='2948890'>less</span>
  <span m='2949250'>than or equal</span> <span m='2949680'>to y.</span> <span m='2950420'>Common</span>
  <span m='2950750'>ancestor,</span> <span m='2951530'>least</span> <span m='2951680'>common</span>
  <span m='2951890'>ancestor</span> <span m='2952250'>will</span> <span m='2952400'>be</span>
  <span m='2952520'>between</span> <span m='2952970'>x</span> <span m='2953150'>and</span>
  <span m='2953240'>y.</span> <span m='2955760'>And</span> <span m='2955850'>we</span>
  <span m='2955970'>also</span> <span m='2956240'>know</span> <span m='2956420'>that</span>
  <span m='2956840'>it's</span> <span m='2956990'>an</span> <span m='2957080'>ancestor</span>
  <span m='2957530'>of</span> <span m='2957600'>x,</span> <span m='2957870'>and</span>
  <span m='2958070'>it's</span> <span m='2958160'>an</span> <span m='2958250'>ancestor</span>
  <span m='2958640'>of</span> <span m='2958700'>y.</span> <span m='2959030'>So,</span>
  <span m='2959450'>if</span> <span m='2959600'>you're</span> <span m='2959720'>going</span>
  <span m='2959990'>to</span> <span m='2960110'>touch</span> <span m='2960410'>x,</span>
  <span m='2960680'>you</span> <span m='2960860'>must</span> <span m='2961370'>touch</span>
  <span m='2961730'>a.</span> <span m='2962550'>If</span> <span m='2962690'>you're</span>
  <span m='2962780'>going</span> <span m='2962930'>to</span> <span m='2963020'>touch</span>
  <span m='2963230'>y,</span> <span m='2963440'>you</span> <span m='2963620'>must</span>
  <span m='2964010'>touch</span> <span m='2964490'>a.</span> <span m='2966260'>So</span>
  <span m='2966860'>a</span> <span m='2967100'>comma</span> <span m='2967490'>i</span>
  <span m='2968130'>is</span> <span m='2968240'>going</span> <span m='2968390'>to</span>
  <span m='2968480'>be</span> <span m='2968630'>some</span> <span m='2968900'>point</span>
  <span m='2969200'>here,</span> <span m='2970470'>which</span> <span m='2970520'>is</span>
  <span m='2970640'>what</span> <span m='2970760'>we</span> <span m='2970850'>need.</span>
  <span m='2972410'>Except,</span> <span m='2973550'>if</span> <span m='2973790'>a</span>
  <span m='2974030'>equals</span> <span m='2974960'>x,</span> <span m='2976160'>sorry,</span>
  <span m='2978840'>what</span> <span m='2978950'>the</span> <span m='2979070'>heck</span>
  <span m='2979310'>did</span> <span m='2979460'>I</span> <span m='2979550'>do?</span>
  </p><p><span m='2981080'>Transposed</span> <span m='2981790'>again.</span> <span
  m='2982070'>OK,</span> <span m='2982770'>this is</span> <span m='2983060'>time</span>
  <span m='2983480'>i,</span> <span m='2984270'>time</span> <span m='2984580'>j,</span>
  <span m='2986300'>x,</span> <span m='2986750'>y,</span> <span m='2987320'>sorry</span>
  <span m='2987560'>about</span> <span m='2987750'>that.</span> <span m='2989748'>OK,</span>
  <span m='2990190'>here's</span> <span m='2990410'>time</span> <span m='2990920'>i,</span>
  <span m='2991880'>here</span> <span m='2992180'>is</span> <span m='2992540'>a.</span>
  <span m='2994550'>So,</span> <span m='2995270'>if</span> <span m='2995630'>a</span>
  <span m='2995870'>does</span> <span m='2996020'>not</span> <span m='2996260'>equal</span>
  <span m='2996530'>x,</span> <span m='2997700'>we</span> <span m='2998180'>know</span>
  <span m='2998400'>at</span> <span m='2998480'>time</span> <span m='2998960'>i, we</span>
  <span m='2999110'>must</span> <span m='2999380'>access</span> <span m='2999770'>all</span>
  <span m='3000030'>ancestor</span> <span m='3000470'>of x,</span> <span m='3000910'>we</span>
  <span m='3001060'>must</span> <span m='3001270'>touch</span> <span m='3001600'>all</span>
  <span m='3001750'>ancestors</span> <span m='3002230'>of</span> <span m='3002350'>x,</span>
  <span m='3002560'>before</span> <span m='3002890'>we</span> <span m='3003010'>touch</span>
  <span m='3003250'>x.</span> <span m='3004030'>Therefore,</span> <span m='3004420'>this</span>
  <span m='3004810'>is</span> <span m='3005020'>a</span> <span m='3005080'>point</span>
  <span m='3005890'>and</span> <span m='3006010'>we're</span> <span m='3006130'>done,</span>
  <span m='3006790'>unless</span> <span m='3007330'>a</span> <span m='3007570'>equals</span>
  <span m='3007960'>x</span> <span m='3008200'>at</span> <span m='3008290'>this</span>
  <span m='3008440'>time,</span> <span m='3009490'>because</span> <span m='3009730'>then</span>
  <span m='3009910'>it's</span> <span m='3010060'>the</span> <span m='3010150'>same</span>
  <span m='3010390'>point.</span> <span m='3010670'>We</span> <span m='3010780'>didn't</span>
  <span m='3010930'>get</span> <span m='3011080'>a</span> <span m='3011140'>third</span>
  <span m='3011380'>point,</span> <span m='3011790'>we at least</span> <span m='3012040'>need</span>
  <span m='3012190'>to</span> <span m='3012280'>find</span> <span m='3012490'>some</span>
  <span m='3012730'>different</span> <span m='3013120'>point</span> <span m='3014080'>other</span>
  <span m='3014260'>than</span> <span m='3014380'>these</span> <span m='3014590'>two.</span>
  </p><p><span m='3015880'>OK,</span> <span m='3016210'>so</span> <span m='3016360'>that</span>
  <span m='3016480'>would</span> <span m='3016570'>be</span> <span m='3016690'>good.</span>
  <span m='3017620'>We</span> <span m='3017770'>can--</span> <span m='3019570'>so</span>
  <span m='3019930'>it</span> <span m='3020080'>must</span> <span m='3020380'>actually</span>
  <span m='3020680'>be</span> <span m='3020950'>that</span> <span m='3021100'>at</span>
  <span m='3021280'>this</span> <span m='3021430'>time,</span> <span m='3022210'>at</span>
  <span m='3022360'>time</span> <span m='3022720'>i,</span> <span m='3023140'>a is</span>
  <span m='3023470'>right</span> <span m='3023680'>here.</span> <span m='3025450'>Let's</span>
  <span m='3025750'>then</span> <span m='3025990'>look</span> <span m='3026170'>at</span>
  <span m='3026260'>time</span> <span m='3026680'>j.</span> <span m='3032110'>Same</span>
  <span m='3032380'>deal,</span> <span m='3033250'>at</span> <span m='3033370'>time</span>
  <span m='3033670'>j,</span> <span m='3034690'>here's</span> <span m='3034990'>y</span>
  <span m='3035690'>that</span> <span m='3035800'>gets</span> <span m='3036010'>access.</span>
  <span m='3036370'>We</span> <span m='3036490'>must</span> <span m='3036700'>also</span>
  <span m='3037060'>access</span> <span m='3037430'>a.</span> <span m='3038620'>Now
  it</span> <span m='3038800'>could</span> <span m='3039040'>be its</span> <span m='3039310'>equal</span>
  <span m='3039580'>to</span> <span m='3039670'>y,</span> <span m='3040670'>or</span>
  <span m='3040830'>it</span> <span m='3040870'>could</span> <span m='3041050'>be</span>
  <span m='3041170'>somewhere</span> <span m='3041530'>else.</span> <span m='3041740'>It
  could</span> <span m='3041860'>be</span> <span m='3041980'>here,</span> <span m='3042370'>or</span>
  <span m='3042610'>could</span> <span m='3042790'>be</span> <span m='3042910'>still</span>
  <span m='3043150'>here.</span> <span m='3045250'>In</span> <span m='3045370'>those</span>
  <span m='3045580'>cases</span> <span m='3045910'>we're</span> <span m='3046030'>happy,</span>
  <span m='3047530'>but</span> <span m='3048160'>this</span> <span m='3048340'>one</span>
  <span m='3048490'>also</span> <span m='3048730'>could</span> <span m='3048850'>have</span>
  <span m='3048940'>been</span> <span m='3049060'>at</span> <span m='3049150'>the</span>
  <span m='3049240'>corner.</span> <span m='3051190'>The</span> <span m='3051370'>case</span>
  <span m='3051670'>we're</span> <span m='3051820'>not</span> <span m='3052030'>happy</span>
  <span m='3052460'>is</span> <span m='3052590'>when</span> <span m='3052780'>b</span>
  <span m='3053080'>equals</span> <span m='3053440'>x,</span> <span m='3054290'>sorry,</span>
  <span m='3056010'>a</span> <span m='3056440'>equals</span> <span m='3056770'>y.</span>
  <span m='3057700'>Getting</span> <span m='3057930'>my</span> <span m='3058030'>letters</span>
  <span m='3058360'>mixed</span> <span m='3058660'>up.</span> <span m='3060310'>As</span>
  <span m='3060430'>long</span> <span m='3060610'>as</span> <span m='3060770'>a</span>
  <span m='3060910'>does</span> <span m='3061000'>not</span> <span m='3061150'>equal</span>
  <span m='3061390'>y,</span> <span m='3062080'>then</span> <span m='3062230'>we</span>
  <span m='3062320'>can</span> <span m='3062470'>use</span> <span m='3062950'>the</span>
  <span m='3063100'>point</span> <span m='3063460'>a</span> <span m='3063640'>comma</span>
  <span m='3063900'>j,</span> <span m='3064720'>that</span> <span m='3064900'>must</span>
  <span m='3065170'>be,</span> <span m='3065590'>these</span> <span m='3065770'>are</span>
  <span m='3065860'>always</span> <span m='3066160'>in</span> <span m='3066280'>your</span>
  <span m='3066400'>execution,</span> <span m='3066970'>and</span> <span m='3067060'>if</span>
  <span m='3067170'>a</span> <span m='3067360'>does</span> <span m='3067450'>not</span>
  <span m='3067600'>equal</span> <span m='3067840'>y,</span> <span m='3068620'>then</span>
  <span m='3068920'>we're,</span> <span m='3069400'>that's</span> <span m='3069610'>a</span>
  <span m='3069820'>third</span> <span m='3070090'>point</span> <span m='3070420'>and</span>
  <span m='3070510'>we're</span> <span m='3070600'>done.</span> </p><p><span m='3073130'>So</span>
  <span m='3073240'>we're</span> <span m='3073360'>left</span> <span m='3073570'>with</span>
  <span m='3073780'>one</span> <span m='3073990'>more</span> <span m='3074170'>case,</span>
  <span m='3075590'>which</span> <span m='3075700'>is</span> <span m='3075820'>that</span>
  <span m='3076030'>at</span> <span m='3076240'>time</span> <span m='3076660'>i,</span>
  <span m='3077454'>a</span> <span m='3077851'>is</span> <span m='3078250'>here,</span>
  <span m='3080210'>here's a,</span> <span m='3081000'>and</span> <span m='3081700'>at</span>
  <span m='3081890'>time</span> <span m='3082210'>j,</span> <span m='3083060'>a</span>
  <span m='3083290'>is</span> <span m='3083470'>here.</span> <span m='3085450'>Question</span>
  <span m='3085840'>is,</span> <span m='3086380'>what</span> <span m='3086590'>happened</span>
  <span m='3087040'>in</span> <span m='3087130'>between?</span> <span m='3088720'>a</span>
  <span m='3089190'>changed.</span> <span m='3092130'>For</span> <span m='3092420'>a
  to</span> <span m='3092700'>change,</span> <span m='3094290'>something</span> <span
  m='3095040'>in</span> <span m='3095160'>here</span> <span m='3095430'>has</span>
  <span m='3095640'>to</span> <span m='3095730'>get</span> <span m='3095880'>rotated.</span>
  <span m='3097560'>That's</span> <span m='3097770'>the</span> <span m='3097860'>[?
  clam. ?]</span> <span m='3098520'>I</span> <span m='3098580'>mean</span> <span m='3098700'>here's</span>
  <span m='3099150'>the</span> <span m='3099240'>picture,</span> <span m='3099600'>you</span>
  <span m='3099700'>have</span> <span m='3099840'>a,</span> <span m='3100950'>actually--</span>
  <span m='3101670'>picture</span> <span m='3101970'>is</span> <span m='3102300'>at</span>
  <span m='3102420'>the</span> <span m='3102510'>beginning</span> <span m='3103350'>a</span>
  <span m='3103710'>is</span> <span m='3105260'>x.</span> <span m='3106890'>So,</span>
  <span m='3107010'>here</span> <span m='3107160'>we</span> <span m='3107250'>have</span>
  <span m='3107460'>x,</span> <span m='3108690'>and</span> <span m='3108810'>then</span>
  <span m='3109170'>y</span> <span m='3109680'>is</span> <span m='3109950'>an</span>
  <span m='3110070'>ancestor,</span> <span m='3111590'>sorry,</span> <span m='3111960'>y</span>
  <span m='3112380'>is</span> <span m='3112500'>a</span> <span m='3112560'>descendant</span>
  <span m='3113520'>of</span> <span m='3113610'>x,</span> <span m='3113880'>because</span>
  <span m='3114060'>this</span> <span m='3114210'>is</span> <span m='3114330'>a.</span>
  <span m='3115320'>And</span> <span m='3115680'>then</span> <span m='3115800'>somehow</span>
  <span m='3116160'>we</span> <span m='3116280'>have</span> <span m='3116400'>to</span>
  <span m='3116520'>transition</span> <span m='3117150'>to</span> <span m='3117480'>the</span>
  <span m='3117600'>reverse</span> <span m='3117930'>picture,</span> <span m='3118260'>which</span>
  <span m='3118440'>is</span> <span m='3118530'>that</span> <span m='3118650'>y</span>
  <span m='3119040'>is</span> <span m='3119190'>the</span> <span m='3119310'>least</span>
  <span m='3119490'>common</span> <span m='3119760'>ancestor,</span> <span m='3122070'>x.</span>
  </p><p><span m='3123550'>And</span> <span m='3123690'>for</span> <span m='3123840'>this</span>
  <span m='3124020'>to</span> <span m='3124110'>happen,</span> <span m='3126840'>somebody</span>
  <span m='3127440'>here</span> <span m='3127590'>has</span> <span m='3127770'>to</span>
  <span m='3127860'>get</span> <span m='3128010'>rotated.</span> <span m='3128460'>I</span>
  <span m='3128520'>guess,</span> <span m='3128700'>in</span> <span m='3128820'>particular</span>
  <span m='3129560'>x.</span> <span m='3130500'>At</span> <span m='3130560'>some</span>
  <span m='3130800'>point</span> <span m='3131010'>x</span> <span m='3131280'>had</span>
  <span m='3131460'>to</span> <span m='3131790'>overtake</span> <span m='3132390'>y,</span>
  <span m='3134070'>had</span> <span m='3134220'>to</span> <span m='3134310'>be</span>
  <span m='3134460'>moved</span> <span m='3134700'>up.</span> <span m='3136120'>So,</span>
  <span m='3136260'>at</span> <span m='3136320'>some</span> <span m='3136560'>point</span>
  <span m='3137100'>x</span> <span m='3137340'>was</span> <span m='3137490'>rotated,</span>
  <span m='3138780'>and</span> <span m='3138900'>that</span> <span m='3139050'>would</span>
  <span m='3139170'>correspond</span> <span m='3139590'>to</span> <span m='3139680'>a</span>
  <span m='3139740'>point</span> <span m='3139980'>here.</span> <span m='3143030'>So</span>
  <span m='3143400'>else</span> <span m='3146040'>x</span> <span m='3146760'>must</span>
  <span m='3146970'>be</span> <span m='3147120'>rotated</span> <span m='3150210'>at</span>
  <span m='3150450'>some</span> <span m='3150750'>time</span> <span m='3152310'>k,</span>
  <span m='3153780'>where</span> <span m='3155340'>k</span> <span m='3155880'>is</span>
  <span m='3156120'>between</span> <span m='3156570'>i</span> <span m='3156730'>and</span>
  <span m='3156850'>j.</span> </p><p><span m='3167710'>And</span> <span m='3167980'>if</span>
  <span m='3168400'>we</span> <span m='3168550'>set</span> <span m='3168820'>it</span>
  <span m='3168940'>up</span> <span m='3169120'>right,</span> <span m='3169300'>I</span>
  <span m='3169360'>guess</span> <span m='3169540'>because</span> <span m='3169900'>here</span>
  <span m='3170230'>a</span> <span m='3170590'>was</span> <span m='3170830'>still</span>
  <span m='3171420'>x,</span> <span m='3175330'>and</span> <span m='3175540'>here</span>
  <span m='3175900'>a is</span> <span m='3178000'>y,</span> <span m='3179080'>then</span>
  <span m='3179230'>it</span> <span m='3179290'>must</span> <span m='3179440'>be</span>
  <span m='3179560'>strictly</span> <span m='3179950'>between.</span> <span m='3183700'>Maybe</span>
  <span m='3183970'>like</span> <span m='3184180'>this</span> <span m='3185470'>would</span>
  <span m='3185560'>be</span> <span m='3185680'>what</span> <span m='3185860'>we</span>
  <span m='3186010'>want.</span> <span m='3189110'>And</span> <span m='3189160'>so</span>
  <span m='3189310'>then</span> <span m='3189460'>we</span> <span m='3189550'>use</span>
  <span m='3189790'>the</span> <span m='3189880'>point</span> <span m='3191690'>k</span>
  <span m='3192730'>comma</span> <span m='3193180'>x.</span> <span m='3199886'>Is
  that</span> <span m='3200380'>more</span> <span m='3200560'>or</span> <span m='3200590'>less</span>
  <span m='3200740'>clear?</span> </p><p><span m='3204550'>This</span> <span m='3204730'>was</span>
  <span m='3204820'>the</span> <span m='3204880'>easy</span> <span m='3205090'>case.</span>
  <span m='3208570'>I</span> <span m='3208720'>guess</span> <span m='3209110'>it</span>
  <span m='3209380'>depends</span> <span m='3209710'>what</span> <span m='3209830'>you</span>
  <span m='3209920'>consider</span> <span m='3210280'>easy.</span> <span m='3210790'>Here</span>
  <span m='3210970'>we're</span> <span m='3211090'>just,</span> <span m='3212190'>we're</span>
  <span m='3212440'>given</span> <span m='3212710'>a</span> <span m='3212770'>search</span>
  <span m='3213070'>tree</span> <span m='3213980'>and</span> <span m='3214210'>the</span>
  <span m='3214420'>short</span> <span m='3214690'>version</span> <span m='3215050'>is,</span>
  <span m='3215830'>look</span> <span m='3216010'>at</span> <span m='3216100'>the</span>
  <span m='3216490'>least</span> <span m='3216730'>common</span> <span m='3217000'>ancestor.</span>
  <span m='3218810'>It's</span> <span m='3218860'>got</span> <span m='3219040'>to</span>
  <span m='3219130'>move</span> <span m='3219340'>around</span> <span m='3219640'>at</span>
  <span m='3219700'>some</span> <span m='3219880'>point,</span> <span m='3221020'>or</span>
  <span m='3221230'>not,</span> <span m='3221980'>either</span> <span m='3222280'>way</span>
  <span m='3222460'>you're</span> <span m='3222610'>happy.</span> <span m='3224450'>So</span>
  <span m='3224800'>the</span> <span m='3224920'>least</span> <span m='3225100'>common</span>
  <span m='3225340'>ancestor</span> <span m='3226000'>gives</span> <span m='3226240'>you</span>
  <span m='3226420'>the</span> <span m='3226510'>points</span> <span m='3226720'>you</span>
  <span m='3226810'>care</span> <span m='3226990'>about.</span> <span m='3228650'>So</span>
  <span m='3228820'>for</span> <span m='3229000'>that</span> <span m='3229390'>we</span>
  <span m='3229510'>just</span> <span m='3229690'>needed</span> <span m='3229860'>the</span>
  <span m='3229960'>least</span> <span m='3230110'>common</span> <span m='3230350'>ancestor</span>
  <span m='3230800'>idea.</span> <span m='3231820'>For</span> <span m='3231970'>the</span>
  <span m='3232060'>other</span> <span m='3232240'>direction,</span> <span m='3233230'>if</span>
  <span m='3233380'>we're</span> <span m='3233470'>given</span> <span m='3233800'>a</span>
  <span m='3233860'>point</span> <span m='3234130'>set</span> <span m='3234430'>that</span>
  <span m='3234550'>corresponds</span> <span m='3235270'>to,</span> <span m='3235690'>that</span>
  <span m='3236020'>has</span> <span m='3236380'>this</span> <span m='3236540'>satisfaction</span>
  <span m='3237280'>property,</span> <span m='3238510'>we</span> <span m='3238630'>have</span>
  <span m='3238750'>to</span> <span m='3238840'>somehow</span> <span m='3239350'>build</span>
  <span m='3240010'>from</span> <span m='3240250'>scratch</span> <span m='3240850'>a</span>
  <span m='3240910'>binary</span> <span m='3241270'>search</span> <span m='3241540'>tree.</span>
  <span m='3242530'>How</span> <span m='3242620'>the</span> <span m='3242740'>heck</span>
  <span m='3242980'>are</span> <span m='3243040'>we</span> <span m='3243100'>going</span>
  <span m='3243220'>to</span> <span m='3243280'>build</span> <span m='3243490'>a</span>
  <span m='3243550'>binary</span> <span m='3243790'>search</span> <span m='3244030'>tree?</span>
  </p><p><span m='3244540'>Well,</span> <span m='3248035'>with</span> <span m='3248500'>treaps.</span>
  <span m='3277370'>So,</span> <span m='3277670'>this</span> <span m='3277880'>is</span>
  <span m='3278090'>the</span> <span m='3278450'>other</span> <span m='3278690'>direction.</span>
  <span m='3286520'>Treap</span> <span m='3286910'>is</span> <span m='3287100'>a</span>
  <span m='3287850'>portmanteau</span> <span m='3288630'>of</span> <span m='3288860'>tree</span>
  <span m='3289940'>and</span> <span m='3290150'>heap.</span> <span m='3292356'>Underline</span>
  <span m='3292810'>it</span> <span m='3293080'>correctly,</span> <span m='3293480'>tree,</span>
  <span m='3294695'>heap.</span> <span m='3296180'>So,</span> <span m='3296420'>it's</span>
  <span m='3296540'>simultaneously</span> <span m='3297260'>a</span> <span m='3297320'>binary</span>
  <span m='3297590'>search</span> <span m='3297860'>tree</span> <span m='3298310'>and</span>
  <span m='3298730'>a</span> <span m='3299600'>min</span> <span m='3299900'>heap,</span>
  <span m='3301160'>in</span> <span m='3301220'>this</span> <span m='3301340'>case.</span>
  <span m='3303110'>It's</span> <span m='3303230'>a</span> <span m='3303260'>binary</span>
  <span m='3303560'>search</span> <span m='3303800'>tree</span> <span m='3304010'>because</span>
  <span m='3304370'>it</span> <span m='3304460'>has</span> <span m='3304640'>to</span>
  <span m='3304790'>be.</span> <span m='3305200'>It's a</span> <span m='3305400'>binary</span>
  <span m='3305720'>search tree</span> <span m='3306635'>on</span> <span m='3306710'>the</span>
  <span m='3306800'>keys.</span> </p><p><span m='3307790'>It's</span> <span m='3307910'>going</span>
  <span m='3308010'>to</span> <span m='3308120'>be</span> <span m='3308270'>heap</span>
  <span m='3308600'>on</span> <span m='3308780'>a</span> <span m='3308870'>different</span>
  <span m='3309290'>set</span> <span m='3309470'>of</span> <span m='3309530'>values.</span>
  <span m='3312170'>So,</span> <span m='3313760'>binary</span> <span m='3314030'>search</span>
  <span m='3314300'>tree</span> <span m='3315440'>on</span> <span m='3315710'>the</span>
  <span m='3315830'>keys,</span> <span m='3318550'>and</span> <span m='3320110'>it's</span>
  <span m='3321960'>heap</span> <span m='3322400'>ordered,</span> <span m='3325550'>min</span>
  <span m='3325995'>heap</span> <span m='3326440'>ordered,</span> <span m='3330890'>by</span>
  <span m='3331570'>next</span> <span m='3332120'>access.</span> <span m='3335990'>I</span>
  <span m='3336050'>didn't</span> <span m='3336260'>say</span> <span m='3336410'>I</span>
  <span m='3336440'>was</span> <span m='3336530'>going</span> <span m='3336680'>to</span>
  <span m='3336740'>give</span> <span m='3336950'>you</span> <span m='3337040'>an</span>
  <span m='3337130'>online</span> <span m='3337520'>algorithm,</span> <span m='3338000'>this</span>
  <span m='3338410'>is</span> <span m='3338630'>an</span> <span m='3338780'>offline</span>
  <span m='3339200'>algorithm.</span> <span m='3340280'>So</span> <span m='3340790'>it</span>
  <span m='3341720'>looks--</span> <span m='3342140'>if</span> <span m='3342290'>I</span>
  <span m='3342380'>look</span> <span m='3342560'>at</span> <span m='3342640'>a</span>
  <span m='3342710'>key,</span> <span m='3344060'>and</span> <span m='3344240'>it's</span>
  <span m='3344390'>going</span> <span m='3344630'>to</span> <span m='3344720'>be</span>
  <span m='3344810'>accessed</span> <span m='3345240'>next,</span> <span m='3346370'>it</span>
  <span m='3346610'>better</span> <span m='3346910'>be</span> <span m='3347060'>at</span>
  <span m='3347150'>the</span> <span m='3347270'>root.</span> </p><p><span m='3348350'>Next</span>
  <span m='3348650'>access</span> <span m='3349040'>will</span> <span m='3349280'>always</span>
  <span m='3349550'>be</span> <span m='3349670'>at</span> <span m='3349790'>the</span>
  <span m='3349880'>root,</span> <span m='3350730'>if</span> <span m='3350760'>you're</span>
  <span m='3350880'>heap</span> <span m='3351150'>ordered.</span> <span m='3351730'>If</span>
  <span m='3351890'>you're</span> <span m='3351990'>a</span> <span m='3352040'>min</span>
  <span m='3352220'>heap</span> <span m='3352730'>by</span> <span m='3352940'>next</span>
  <span m='3353240'>access.</span> <span m='3354050'>This</span> <span m='3354200'>is</span>
  <span m='3354290'>great,</span> <span m='3354840'>that</span> <span m='3354970'>means</span>
  <span m='3355820'>the</span> <span m='3356090'>thing</span> <span m='3356300'>you're</span>
  <span m='3356390'>searching</span> <span m='3356720'>for</span> <span m='3356870'>is</span>
  <span m='3356990'>always</span> <span m='3357230'>at</span> <span m='3357320'>the</span>
  <span m='3357440'>root,</span> <span m='3357650'>and</span> <span m='3357950'>it's</span>
  <span m='3358220'>basically</span> <span m='3358640'>free</span> <span m='3359450'>to</span>
  <span m='3359540'>touch.</span> <span m='3360860'>But</span> <span m='3361130'>you</span>
  <span m='3361340'>may</span> <span m='3361550'>choose</span> <span m='3361820'>to</span>
  <span m='3361910'>touch</span> <span m='3362180'>other</span> <span m='3362360'>nodes.</span>
  <span m='3363295'>And</span> <span m='3363750'>in</span> <span m='3363770'>fact,</span>
  <span m='3364080'>we're</span> <span m='3364100'>told</span> <span m='3364430'>how</span>
  <span m='3364550'>to</span> <span m='3364640'>touch</span> <span m='3364920'>notes.</span>
  <span m='3365870'>We're</span> <span m='3366080'>given</span> <span m='3366440'>a</span>
  <span m='3366500'>pattern that</span> <span m='3366990'>says,</span> <span m='3367410'>well,</span>
  <span m='3367550'>at</span> <span m='3367610'>this</span> <span m='3367790'>time</span>
  <span m='3368600'>you</span> <span m='3368810'>have--</span> <span m='3369140'>you</span>
  <span m='3369410'>will</span> <span m='3369620'>touch</span> <span m='3369920'>this</span>
  <span m='3370130'>node,</span> <span m='3370370'>this</span> <span m='3370590'>node,</span>
  <span m='3370820'>and</span> <span m='3370910'>this</span> <span m='3371090'>node.</span>
  </p><p><span m='3372650'>By</span> <span m='3373130'>that</span> <span m='3373400'>definition,</span>
  <span m='3374000'>this</span> <span m='3374180'>one</span> <span m='3374330'>will</span>
  <span m='3374450'>be</span> <span m='3374600'>at</span> <span m='3374720'>the</span>
  <span m='3374850'>root,</span> <span m='3376700'>but</span> <span m='3376910'>you're</span>
  <span m='3377000'>going</span> <span m='3377150'>to</span> <span m='3377240'>touch</span>
  <span m='3377510'>these</span> <span m='3377720'>nodes,</span> <span m='3378020'>and</span>
  <span m='3378110'>possibly</span> <span m='3378860'>you</span> <span m='3379040'>could</span>
  <span m='3379160'>rotate</span> <span m='3379550'>them.</span> <span m='3380750'>Change</span>
  <span m='3381050'>the</span> <span m='3381170'>tree.</span> <span m='3382460'>You'll</span>
  <span m='3382580'>have</span> <span m='3382790'>to,</span> <span m='3382970'>actually,</span>
  <span m='3383390'>because</span> <span m='3384110'>next</span> <span m='3384320'>access</span>
  <span m='3384650'>time</span> <span m='3384860'>is</span> <span m='3384980'>constantly</span>
  <span m='3385460'>changing.</span> <span m='3386510'>And</span> <span m='3386610'>as</span>
  <span m='3386630'>soon</span> <span m='3386810'>as</span> <span m='3386900'>you</span>
  <span m='3387080'>access</span> <span m='3387470'>an</span> <span m='3387560'>item,</span>
  <span m='3388490'>it's</span> <span m='3388670'>next</span> <span m='3388940'>access</span>
  <span m='3389420'>goes</span> <span m='3389690'>in</span> <span m='3389750'>sometime</span>
  <span m='3390140'>in</span> <span m='3390230'>the</span> <span m='3390290'>future,</span>
  <span m='3391040'>possibly</span> <span m='3391400'>infinity,</span> <span m='3392520'>and</span>
  <span m='3392600'>so</span> <span m='3392720'>you'd</span> <span m='3392870'>like</span>
  <span m='3393020'>to</span> <span m='3393140'>start</span> <span m='3393350'>pushing</span>
  <span m='3393680'>it</span> <span m='3393740'>down</span> <span m='3394010'>in</span>
  <span m='3394130'>the</span> <span m='3394220'>tree.</span> </p><p><span m='3397420'>So,</span>
  <span m='3398050'>what</span> <span m='3398200'>we</span> <span m='3398320'>need</span>
  <span m='3398470'>to</span> <span m='3398620'>do</span> <span m='3398890'>is</span>
  <span m='3399040'>show</span> <span m='3399310'>that</span> <span m='3399430'>we</span>
  <span m='3399580'>can</span> <span m='3399730'>maintain--</span> <span m='3400600'>it's</span>
  <span m='3400750'>always</span> <span m='3400930'>going</span> <span m='3401080'>to</span>
  <span m='3401140'>be</span> <span m='3401260'>a</span> <span m='3401290'>binary</span>
  <span m='3401560'>search</span> <span m='3401700'>tree,</span> <span m='3401920'>because</span>
  <span m='3402100'>we</span> <span m='3402190'>only</span> <span m='3402400'>do</span>
  <span m='3402550'>rotations.</span> <span m='3403600'>We</span> <span m='3403660'>have</span>
  <span m='3403750'>to</span> <span m='3403840'>somehow</span> <span m='3404140'>use</span>
  <span m='3404350'>rotations</span> <span m='3405130'>to</span> <span m='3405310'>maintain</span>
  <span m='3405850'>this</span> <span m='3406000'>heap</span> <span m='3406250'>order</span>
  <span m='3406480'>property,</span> <span m='3410710'>and</span> <span m='3410920'>only</span>
  <span m='3411310'>touch</span> <span m='3411610'>the</span> <span m='3411730'>nodes</span>
  <span m='3412000'>that</span> <span m='3412090'>we're</span> <span m='3412240'>supposed</span>
  <span m='3412600'>to</span> <span m='3412690'>touch.</span> <span m='3413920'>That's</span>
  <span m='3414160'>the</span> <span m='3414250'>challenge.</span> </p><p><span m='3417380'>So,</span>
  <span m='3419770'>I</span> <span m='3419860'>should</span> <span m='3420070'>mention,</span>
  <span m='3420760'>this</span> <span m='3420970'>is</span> <span m='3421090'>not</span>
  <span m='3421300'>a</span> <span m='3421360'>uniquely</span> <span m='3421750'>defined</span>
  <span m='3422110'>tree.</span> <span m='3422350'>Usually</span> <span m='3422830'>treaps</span>
  <span m='3423160'>are</span> <span m='3423250'>unique,</span> <span m='3424180'>if</span>
  <span m='3424300'>you</span> <span m='3424360'>specify a</span> <span m='3424840'>key</span>
  <span m='3425080'>order,</span> <span m='3425440'>and</span> <span m='3425530'>you</span>
  <span m='3425590'>specify</span> <span m='3425905'>a heap</span> <span m='3426220'>order,</span>
  <span m='3426880'>there</span> <span m='3426980'>is</span> <span m='3427060'>exactly</span>
  <span m='3427600'>one</span> <span m='3428110'>tree</span> <span m='3428830'>that</span>
  <span m='3428920'>satisfies</span> <span m='3429400'>both</span> <span m='3429640'>of</span>
  <span m='3429700'>them.</span> <span m='3430840'>But</span> <span m='3431020'>here</span>
  <span m='3431170'>it's</span> <span m='3431290'>not</span> <span m='3431500'>quite</span>
  <span m='3432280'>unique,</span> <span m='3432640'>because</span> <span m='3433000'>the</span>
  <span m='3433120'>next</span> <span m='3433390'>access</span> <span m='3433720'>time--</span>
  <span m='3433960'>there</span> <span m='3434050'>are</span> <span m='3434110'>many</span>
  <span m='3434470'>keys</span> <span m='3434860'>that</span> <span m='3434950'>are</span>
  <span m='3435040'>going,</span> <span m='3435520'>sorry,</span> <span m='3436450'>next</span>
  <span m='3436720'>touch.</span> <span m='3440770'>Next</span> <span m='3441220'>touch</span>
  <span m='3441560'>time.</span> </p><p><span m='3443020'>So,</span> <span m='3444160'>for</span>
  <span m='3444310'>example,</span> <span m='3444750'>at</span> <span m='3445000'>this</span>
  <span m='3445210'>moment</span> <span m='3447610'>all</span> <span m='3447880'>three</span>
  <span m='3448180'>of</span> <span m='3448300'>these</span> <span m='3449050'>nodes</span>
  <span m='3449410'>are</span> <span m='3449500'>going</span> <span m='3449650'>to</span>
  <span m='3449740'>be</span> <span m='3449830'>accessed</span> <span m='3450730'>at</span>
  <span m='3451510'>the</span> <span m='3451600'>same</span> <span m='3451840'>time.</span>
  <span m='3452610'>And</span> <span m='3452650'>so</span> <span m='3452950'>you</span>
  <span m='3453160'>don't</span> <span m='3453430'>know,</span> <span m='3454280'>or</span>
  <span m='3454720'>I'm</span> <span m='3454840'>not</span> <span m='3454990'>specifying</span>
  <span m='3455590'>how</span> <span m='3455740'>they're</span> <span m='3455860'>supposed</span>
  <span m='3456100'>to</span> <span m='3456190'>be</span> <span m='3456350'>heap ordered</span>
  <span m='3456720'>in</span> <span m='3456820'>the</span> <span m='3456910'>tree.</span>
  <span m='3457600'>Just</span> <span m='3457750'>break</span> <span m='3457960'>ties</span>
  <span m='3458200'>arbitrarily,</span> <span m='3458720'>it</span> <span m='3458790'>doesn't</span>
  <span m='3458950'>matter.</span> <span m='3461270'>OK.</span> <span m='3463450'>So,</span>
  <span m='3470440'>let's</span> <span m='3470650'>look</span> <span m='3470800'>at</span>
  <span m='3470890'>a</span> <span m='3470950'>time</span> <span m='3471600'>i.</span>
  <span m='3473800'>When</span> <span m='3473950'>we</span> <span m='3474100'>reach</span>
  <span m='3474340'>that</span> <span m='3474520'>time</span> <span m='3474880'>i,</span>
  <span m='3476882'>the</span> <span m='3477300'>nodes</span> <span m='3477670'>to</span>
  <span m='3477850'>touch</span> <span m='3479710'>form</span> <span m='3481360'>and</span>
  <span m='3481630'>connected</span> <span m='3482050'>subtree</span> <span m='3489280'>containing</span>
  <span m='3489700'>the</span> <span m='3489830'>root.</span> </p><p><span m='3493620'>Because</span>
  <span m='3493810'>according</span> <span m='3494170'>to</span> <span m='3494260'>heap</span>
  <span m='3494410'>order,</span> <span m='3494920'>they're</span> <span m='3495130'>all,</span>
  <span m='3495820'>they</span> <span m='3496000'>all</span> <span m='3496240'>want</span>
  <span m='3496390'>to</span> <span m='3496480'>be</span> <span m='3496600'>at</span>
  <span m='3496690'>the</span> <span m='3496810'>root.</span> <span m='3497530'>So</span>
  <span m='3497680'>we</span> <span m='3497770'>break</span> <span m='3498010'>ties</span>
  <span m='3498310'>arbitrarily,</span> <span m='3499420'>somehow,</span> <span m='3502750'>you</span>
  <span m='3502840'>know</span> <span m='3502930'>all</span> <span m='3503140'>the</span>
  <span m='3503260'>nodes</span> <span m='3503440'>that</span> <span m='3503560'>we're</span>
  <span m='3503650'>supposed</span> <span m='3503920'>to</span> <span m='3504040'>touch,</span>
  <span m='3505000'>live</span> <span m='3506140'>in</span> <span m='3506290'>some</span>
  <span m='3506500'>connected</span> <span m='3506890'>subtree</span> <span m='3507280'>of</span>
  <span m='3507370'>the</span> <span m='3507460'>root.</span> <span m='3510300'>Sorry,</span>
  <span m='3511250'>some</span> <span m='3511420'>connected</span> <span m='3511760'>subtree</span>
  <span m='3512320'>containing</span> <span m='3512740'>the</span> <span m='3512850'>root.</span>
  <span m='3514870'>Everything</span> <span m='3515350'>down</span> <span m='3515590'>here</span>
  <span m='3515860'>has</span> <span m='3516250'>a</span> <span m='3516400'>later</span>
  <span m='3517060'>next</span> <span m='3517450'>touch</span> <span m='3517720'>time,</span>
  <span m='3520420'>and</span> <span m='3520540'>so</span> <span m='3520690'>they're</span>
  <span m='3521170'>below,</span> <span m='3521860'>by</span> <span m='3522010'>definition</span>
  <span m='3522610'>of</span> <span m='3522820'>heap</span> <span m='3523030'>order.</span>
  </p><p><span m='3525060'>OK,</span> <span m='3525400'>now</span> <span m='3525610'>one</span>
  <span m='3525820'>of</span> <span m='3525910'>these</span> <span m='3526180'>is</span>
  <span m='3526300'>the</span> <span m='3526420'>one</span> <span m='3526600'>we</span>
  <span m='3526750'>actually</span> <span m='3527110'>want</span> <span m='3527260'>to</span>
  <span m='3527320'>access.</span> <span m='3527830'>But</span> <span m='3528040'>we</span>
  <span m='3528160'>need</span> <span m='3528280'>to</span> <span m='3528370'>touch</span>
  <span m='3528610'>all</span> <span m='3528790'>of</span> <span m='3528850'>them,</span>
  <span m='3529000'>so</span> <span m='3529360'>touch</span> <span m='3529600'>all</span>
  <span m='3529780'>of</span> <span m='3529840'>them,</span> <span m='3530020'>you</span>
  <span m='3530080'>know,</span> <span m='3530170'>navigate.</span> <span m='3530680'>Walk</span>
  <span m='3530950'>left,</span> <span m='3531220'>right,</span> <span m='3531720'>whatever.</span>
  <span m='3532420'>The</span> <span m='3532540'>big</span> <span m='3532690'>question</span>
  <span m='3533020'>is,</span> <span m='3533440'>what</span> <span m='3533770'>should</span>
  <span m='3533950'>we</span> <span m='3534100'>change</span> <span m='3534490'>this</span>
  <span m='3534640'>tree</span> <span m='3534880'>into?</span> <span m='3535360'>I'd</span>
  <span m='3535510'>like</span> <span m='3535690'>to</span> <span m='3538330'>change</span>
  <span m='3538660'>it</span> <span m='3538720'>to</span> <span m='3538810'>some</span>
  <span m='3539110'>other</span> <span m='3539980'>top</span> <span m='3540250'>structure.</span>
  <span m='3541930'>I</span> <span m='3542050'>can't</span> <span m='3542470'>touch</span>
  <span m='3542740'>anything</span> <span m='3543130'>down</span> <span m='3543340'>here,</span>
  <span m='3543520'>I'm</span> <span m='3543640'>only</span> <span m='3543970'>allowed</span>
  <span m='3544210'>to</span> <span m='3544330'>touch</span> <span m='3544570'>these</span>
  <span m='3544750'>points.</span> <span m='3545790'>I</span> <span m='3545830'>only</span>
  <span m='3546130'>want</span> <span m='3546280'>to</span> <span m='3546340'>rotate</span>
  <span m='3546720'>these</span> <span m='3547920'>somehow.</span> <span m='3549820'>There's</span>
  <span m='3549970'>a</span> <span m='3550030'>convenient</span> <span m='3550420'>theorem,</span>
  <span m='3550690'>if</span> <span m='3550810'>you</span> <span m='3550900'>have</span>
  <span m='3551140'>one</span> <span m='3551380'>tree</span> <span m='3551590'>and</span>
  <span m='3551680'>you</span> <span m='3551740'>want</span> <span m='3551860'>to</span>
  <span m='3551950'>convert</span> <span m='3552220'>it</span> <span m='3552310'>into</span>
  <span m='3552520'>another,</span> <span m='3552820'>you</span> <span m='3552940'>can</span>
  <span m='3553090'>always</span> <span m='3553360'>do</span> <span m='3553540'>it</span>
  <span m='3553660'>in</span> <span m='3553840'>a</span> <span m='3553900'>linear</span>
  <span m='3554230'>number</span> <span m='3554440'>of</span> <span m='3554530'>rotations.</span>
  </p><p><span m='3555970'>So,</span> <span m='3556540'>rotations</span> <span m='3557080'>are</span>
  <span m='3557140'>basically</span> <span m='3557470'>free</span> <span m='3557650'>and</span>
  <span m='3557740'>this</span> <span m='3557890'>model,</span> <span m='3558130'>it's</span>
  <span m='3558250'>just</span> <span m='3558430'>about</span> <span m='3559630'>how</span>
  <span m='3559810'>many</span> <span m='3559990'>nodes</span> <span m='3560200'>we</span>
  <span m='3560320'>touch.</span> <span m='3560650'>We're</span> <span m='3560800'>told</span>
  <span m='3561040'>which</span> <span m='3561230'>nodes</span> <span m='3561430'>to</span>
  <span m='3561550'>touch.</span> <span m='3562270'>We</span> <span m='3562360'>want</span>
  <span m='3562540'>to</span> <span m='3562600'>somehow</span> <span m='3562900'>rearrange</span>
  <span m='3563380'>them</span> <span m='3563650'>to</span> <span m='3563830'>restore</span>
  <span m='3564460'>this</span> <span m='3564640'>heap</span> <span m='3564870'>order</span>
  <span m='3565120'>property.</span> <span m='3566380'>Right?</span> <span m='3566530'>As</span>
  <span m='3566620'>soon</span> <span m='3566890'>as</span> <span m='3567010'>we</span>
  <span m='3567100'>touch</span> <span m='3567370'>all</span> <span m='3567490'>these</span>
  <span m='3567670'>nodes,</span> <span m='3568090'>their</span> <span m='3568300'>next</span>
  <span m='3568630'>touch</span> <span m='3568900'>time</span> <span m='3569110'>will</span>
  <span m='3569230'>be</span> <span m='3569410'>sometime</span> <span m='3569950'>in</span>
  <span m='3570040'>the</span> <span m='3570130'>future.</span> <span m='3571810'>We</span>
  <span m='3571960'>need</span> <span m='3572110'>to</span> <span m='3572470'>rearrange</span>
  <span m='3573010'>the</span> <span m='3573100'>tree</span> <span m='3573550'>to</span>
  <span m='3573760'>still</span> <span m='3574000'>be</span> <span m='3574380'>heap
  ordered</span> <span m='3574700'>by</span> <span m='3574870'>that</span> <span m='3575080'>new</span>
  <span m='3575530'>next</span> <span m='3576100'>touch</span> <span m='3576670'>time.</span>
  </p><p><span m='3579600'>OK,</span> <span m='3581500'>here's</span> <span m='3581770'>what</span>
  <span m='3581890'>we</span> <span m='3581980'>do.</span> <span m='3585910'>I</span>
  <span m='3585970'>mean</span> <span m='3586090'>there's</span> <span m='3586240'>only</span>
  <span m='3586450'>one</span> <span m='3586630'>thing</span> <span m='3586810'>to</span>
  <span m='3586990'>do.</span> <span m='3589870'>Rearrange</span> <span m='3590650'>those</span>
  <span m='3590950'>nodes</span> <span m='3591790'>in</span> <span m='3591940'>this</span>
  <span m='3592090'>connected</span> <span m='3592420'>subtree</span> <span m='3594610'>to</span>
  <span m='3594760'>be</span> <span m='3595090'>a</span> <span m='3595480'>local</span>
  <span m='3596020'>treap</span> <span m='3600160'>by</span> <span m='3601390'>the</span>
  <span m='3601510'>new</span> <span m='3602800'>next</span> <span m='3603100'>touch</span>
  <span m='3603400'>time.</span> <span m='3604240'>These</span> <span m='3604420'>are</span>
  <span m='3604450'>the</span> <span m='3604600'>only</span> <span m='3604840'>nodes</span>
  <span m='3605110'>to</span> <span m='3605200'>get</span> <span m='3605380'>a</span>
  <span m='3605470'>new</span> <span m='3606670'>next</span> <span m='3607180'>touch</span>
  <span m='3607540'>time,</span> <span m='3611680'>so</span> <span m='3612280'>it's</span>
  <span m='3613240'>more</span> <span m='3613450'>or</span> <span m='3613480'>less</span>
  <span m='3613750'>unique</span> <span m='3614140'>how</span> <span m='3614300'>to</span>
  <span m='3614380'>rearrange</span> <span m='3614860'>them.</span> <span m='3615970'>Do</span>
  <span m='3616150'>that.</span> </p><p><span m='3617260'>Now</span> <span m='3617380'>the</span>
  <span m='3617470'>hard</span> <span m='3617680'>part</span> <span m='3617920'>is</span>
  <span m='3618070'>to</span> <span m='3618280'>argue</span> <span m='3618670'>that</span>
  <span m='3618880'>the</span> <span m='3619000'>whole</span> <span m='3619690'>thing</span>
  <span m='3619990'>is</span> <span m='3620380'>now</span> <span m='3620620'>a</span>
  <span m='3620680'>treap.</span> <span m='3624140'>Why</span> <span m='3624380'>was</span>
  <span m='3624560'>it</span> <span m='3624650'>enough</span> <span m='3625160'>to</span>
  <span m='3625400'>only</span> <span m='3626660'>modify</span> <span m='3627290'>these</span>
  <span m='3627560'>nodes?</span> <span m='3629210'>Maybe</span> <span m='3629570'>you</span>
  <span m='3629720'>set</span> <span m='3630320'>one</span> <span m='3630500'>of</span>
  <span m='3630560'>these</span> <span m='3630710'>nodes</span> <span m='3630890'>to</span>
  <span m='3630980'>have</span> <span m='3631130'>a</span> <span m='3631190'>very</span>
  <span m='3631580'>large</span> <span m='3632000'>next</span> <span m='3632270'>touch</span>
  <span m='3632510'>time,</span> <span m='3632820'>so</span> <span m='3632910'>it's</span>
  <span m='3633020'>got</span> <span m='3633170'>to</span> <span m='3633260'>be</span>
  <span m='3633440'>really</span> <span m='3633800'>deep</span> <span m='3634040'>down</span>
  <span m='3634280'>there.</span> <span m='3635730'>And</span> <span m='3635880'>you</span>
  <span m='3636000'>can't</span> <span m='3636240'>afford</span> <span m='3636510'>to</span>
  <span m='3636600'>push</span> <span m='3636840'>it</span> <span m='3636930'>down</span>
  <span m='3637170'>deep,</span> <span m='3637350'>because</span> <span m='3637500'>you're</span>
  <span m='3637620'>not</span> <span m='3637740'>allowed</span> <span m='3637920'>to</span>
  <span m='3638010'>touch</span> <span m='3638250'>any</span> <span m='3638430'>of</span>
  <span m='3638520'>these</span> <span m='3638670'>nodes.</span> <span m='3640200'>Looks</span>
  <span m='3640530'>worrisome,</span> <span m='3643020'>but</span> <span m='3643350'>turns</span>
  <span m='3643560'>out,</span> <span m='3643740'>it</span> <span m='3643800'>just</span>
  <span m='3643980'>works.</span> </p><p><span m='3647390'>So,</span> <span m='3652170'>if</span>
  <span m='3652350'>there</span> <span m='3652470'>were</span> <span m='3652590'>a</span>
  <span m='3652650'>failure,</span> <span m='3654270'>picture</span> <span m='3654600'>would</span>
  <span m='3654750'>be</span> <span m='3654900'>like</span> <span m='3655110'>this.</span>
  <span m='3655350'>We</span> <span m='3655530'>rearrange</span> <span m='3656070'>these</span>
  <span m='3656280'>nodes</span> <span m='3656550'>perfectly,</span> <span m='3658050'>in</span>
  <span m='3658170'>particular,</span> <span m='3659290'>let's</span> <span m='3659370'>look</span>
  <span m='3659520'>at</span> <span m='3659610'>some</span> <span m='3659820'>node</span>
  <span m='3660030'>x</span> <span m='3660420'>that</span> <span m='3660570'>has</span>
  <span m='3660840'>a</span> <span m='3660960'>child</span> <span m='3661720'>y,</span>
  <span m='3662760'>that</span> <span m='3662880'>was</span> <span m='3663030'>not</span>
  <span m='3663300'>touched.</span> <span m='3663900'>So</span> <span m='3664050'>x</span>
  <span m='3664290'>was</span> <span m='3664440'>touched,</span> <span m='3665040'>all</span>
  <span m='3665220'>of it's</span> <span m='3665370'>ancestors</span> <span m='3665850'>were</span>
  <span m='3665970'>touched,</span> <span m='3666690'>but</span> <span m='3666810'>y</span>
  <span m='3667050'>was</span> <span m='3667200'>not</span> <span m='3667410'>touched.</span>
  <span m='3669390'>So</span> <span m='3669540'>we</span> <span m='3669660'>know</span>
  <span m='3669930'>that</span> <span m='3670230'>the</span> <span m='3670830'>next</span>
  <span m='3671910'>touch</span> <span m='3672230'>time</span> <span m='3672420'>of</span>
  <span m='3672510'>x</span> <span m='3673050'>is</span> <span m='3673260'>greater</span>
  <span m='3673500'>than</span> <span m='3673590'>or</span> <span m='3673620'>equal</span>
  <span m='3673830'>to</span> <span m='3673920'>the</span> <span m='3673980'>next</span>
  <span m='3674200'>touch time</span> <span m='3674760'>of</span> <span m='3675030'>its</span>
  <span m='3675180'>parent,</span> <span m='3675450'>of</span> <span m='3675720'>it's</span>
  <span m='3676020'>ancestor,</span> <span m='3676440'>up</span> <span m='3676530'>to</span>
  <span m='3676620'>the</span> <span m='3676740'>root.</span> <span m='3677730'>The</span>
  <span m='3677850'>worry</span> <span m='3678150'>would</span> <span m='3678330'>be</span>
  <span m='3678600'>that</span> <span m='3678750'>the</span> <span m='3678840'>next</span>
  <span m='3679620'>touch</span> <span m='3679950'>time</span> <span m='3680250'>of</span>
  <span m='3680550'>x</span> <span m='3680850'>is</span> <span m='3681000'>greater</span>
  <span m='3681600'>than</span> <span m='3681780'>the</span> <span m='3681870'>next</span>
  <span m='3682110'>touch time</span> <span m='3682560'>of</span> <span m='3682650'>y.</span>
  </p><p><span m='3683720'>So</span> <span m='3684530'>suppose</span> <span m='3688230'>next</span>
  <span m='3688560'>touch</span> <span m='3690381'>of</span> <span m='3690780'>x</span>
  <span m='3691050'>is</span> <span m='3691200'>greater</span> <span m='3691680'>than</span>
  <span m='3693550'>next</span> <span m='3694640'>touch</span> <span m='3695140'>of</span>
  <span m='3696132'>y.</span> <span m='3698970'>This</span> <span m='3699150'>would</span>
  <span m='3699240'>be</span> <span m='3699360'>a</span> <span m='3699420'>problem,</span>
  <span m='3700050'>because</span> <span m='3700260'>then</span> <span m='3700410'>you</span>
  <span m='3700530'>would</span> <span m='3700680'>not</span> <span m='3700920'>be</span>
  <span m='3701040'>a</span> <span m='3701100'>heap.</span> <span m='3706000'>So,</span>
  <span m='3707700'>claim</span> <span m='3708000'>is</span> <span m='3730046'>we</span>
  <span m='3730460'>get</span> <span m='3730610'>an</span> <span m='3730730'>unsatisfied</span>
  <span m='3731390'>rectangle</span> <span m='3737850'>based</span> <span m='3738210'>on</span>
  <span m='3738660'>x</span> <span m='3739020'>and</span> <span m='3739220'>it's</span>
  <span m='3739330'>next</span> <span m='3739470'>touch</span> <span m='3739680'>time,</span>
  <span m='3739920'>and</span> <span m='3740050'>y and it's</span> <span m='3740490'>next</span>
  <span m='3740700'>touch</span> <span m='3740940'>time.</span> <span m='3741720'>So</span>
  <span m='3741950'>let's</span> <span m='3742110'>draw</span> <span m='3742320'>the</span>
  <span m='3742400'>picture.</span> <span m='3744030'>Here's</span> <span m='3744360'>time,</span>
  <span m='3747296'>here's</span> <span m='3747660'>space,</span> <span m='3750090'>I'm</span>
  <span m='3750300'>going</span> <span m='3750540'>to</span> <span m='3750630'>assume</span>
  <span m='3751380'>by</span> <span m='3751560'>symmetry</span> <span m='3752490'>x</span>
  <span m='3753060'>is</span> <span m='3753300'>to</span> <span m='3753450'>the</span>
  <span m='3753540'>left</span> <span m='3753870'>of</span> <span m='3754020'>y</span>
  <span m='3754620'>and</span> <span m='3754950'>[? keyspace, ?]</span> <span m='3757200'>and</span>
  <span m='3757320'>now</span> <span m='3757530'>we're</span> <span m='3757680'>supposing</span>
  <span m='3758970'>the</span> <span m='3759060'>next</span> <span m='3759270'>touch</span>
  <span m='3759480'>time</span> <span m='3759660'>of</span> <span m='3759780'>y</span>
  <span m='3760230'>is</span> <span m='3760590'>earlier</span> <span m='3761530'>than</span>
  <span m='3761810'>the</span> <span m='3761940'>next</span> <span m='3762180'>touch
  time</span> <span m='3762570'>of</span> <span m='3762750'>x.</span> </p><p><span
  m='3763050'>So</span> <span m='3763290'>it</span> <span m='3763350'>looks</span>
  <span m='3763620'>like</span> <span m='3764880'>this.</span> <span m='3765820'>So
  this is</span> <span m='3766290'>next</span> <span m='3766550'>touch</span> <span
  m='3767130'>time</span> <span m='3768640'>of</span> <span m='3768900'>x,</span>
  <span m='3770340'>this</span> <span m='3770610'>is</span> <span m='3770840'>the</span>
  <span m='3770870'>next</span> <span m='3771570'>time</span> <span m='3772720'>of</span>
  <span m='3772860'>y,</span> <span m='3773730'>and</span> <span m='3773880'>I</span>
  <span m='3773970'>claim</span> <span m='3774750'>that</span> <span m='3774900'>there</span>
  <span m='3775080'>are</span> <span m='3775140'>no</span> <span m='3775500'>other</span>
  <span m='3775800'>points</span> <span m='3777450'>in</span> <span m='3777630'>here.</span>
  <span m='3780240'>That</span> <span m='3780360'>would</span> <span m='3780480'>be</span>
  <span m='3780570'>a</span> <span m='3780630'>contradiction,</span> <span m='3781320'>because</span>
  <span m='3781620'>we</span> <span m='3781740'>assume</span> <span m='3782040'>that</span>
  <span m='3782190'>the</span> <span m='3782310'>thing</span> <span m='3782490'>is</span>
  <span m='3782610'>satisfied.</span> </p><p><span m='3790650'>To</span> <span m='3790740'>prove</span>
  <span m='3790980'>this,</span> <span m='3791220'>I</span> <span m='3791370'>need</span>
  <span m='3791580'>to</span> <span m='3792900'>go</span> <span m='3793050'>back</span>
  <span m='3793260'>a</span> <span m='3793290'>little</span> <span m='3793620'>bit</span>
  <span m='3793770'>to</span> <span m='3793980'>the</span> <span m='3794130'>definition,</span>
  <span m='3796350'>over</span> <span m='3796560'>here.</span> <span m='3801630'>There</span>
  <span m='3801750'>are</span> <span m='3801780'>actually</span> <span m='3802020'>a</span>
  <span m='3802050'>couple</span> <span m='3802350'>of</span> <span m='3802410'>different</span>
  <span m='3802650'>ways</span> <span m='3802830'>to</span> <span m='3802920'>think</span>
  <span m='3803130'>about</span> <span m='3803370'>satisfaction,</span> <span m='3805420'>which</span>
  <span m='3805640'>I</span> <span m='3805680'>was</span> <span m='3805800'>getting</span>
  <span m='3806130'>at</span> <span m='3806310'>here,</span> <span m='3806550'>but</span>
  <span m='3806670'>I</span> <span m='3806730'>didn't</span> <span m='3806970'>solidify.</span>
  <span m='3808140'>So,</span> <span m='3808290'>I</span> <span m='3808320'>said</span>
  <span m='3808500'>OK,</span> <span m='3808950'>if</span> <span m='3809100'>you</span>
  <span m='3809160'>have</span> <span m='3809310'>two</span> <span m='3809460'>points</span>
  <span m='3809820'>and</span> <span m='3810540'>that</span> <span m='3810750'>rectangle
  is</span> <span m='3811170'>satisfied,</span> <span m='3811620'>there is</span>
  <span m='3811760'>some</span> <span m='3812040'>point,</span> <span m='3812760'>possibly</span>
  <span m='3813120'>in</span> <span m='3813180'>the</span> <span m='3813270'>interior,</span>
  <span m='3814470'>in</span> <span m='3814620'>that</span> <span m='3814800'>rectangle.</span>
  <span m='3815980'>But</span> <span m='3816030'>if</span> <span m='3816180'>it's</span>
  <span m='3816300'>interior,</span> <span m='3816860'>then</span> <span m='3817020'>I</span>
  <span m='3817080'>can</span> <span m='3817260'>keep</span> <span m='3817500'>going.</span>
  <span m='3819870'>If</span> <span m='3820050'>I</span> <span m='3820110'>keep</span>
  <span m='3820350'>going,</span> <span m='3820740'>in</span> <span m='3820860'>the</span>
  <span m='3820980'>end</span> <span m='3821220'>I</span> <span m='3821340'>can</span>
  <span m='3821550'>conclude</span> <span m='3823260'>that</span> <span m='3825210'>not</span>
  <span m='3825480'>only</span> <span m='3825720'>is</span> <span m='3825840'>this</span>
  <span m='3826020'>rectangle</span> <span m='3826640'>non-empty,</span> <span m='3827460'>but</span>
  <span m='3827610'>there</span> <span m='3827730'>has</span> <span m='3828090'>to</span>
  <span m='3828210'>be</span> <span m='3829320'>a</span> <span m='3829440'>point</span>
  <span m='3830160'>on</span> <span m='3830340'>one</span> <span m='3830550'>of</span>
  <span m='3830640'>these</span> <span m='3830820'>two</span> <span m='3831000'>sides,</span>
  <span m='3832880'>because</span> <span m='3833280'>if</span> <span m='3833460'>I</span>
  <span m='3833880'>choose</span> <span m='3834120'>any</span> <span m='3834360'>other</span>
  <span m='3834540'>point,</span> <span m='3834970'>I</span> <span m='3835070'>get</span>
  <span m='3835110'>a</span> <span m='3835170'>smaller</span> <span m='3835470'>rectangle.</span>
  </p><p><span m='3835950'>Eventually,</span> <span m='3836520'>I</span> <span m='3836610'>have</span>
  <span m='3836850'>to</span> <span m='3836940'>get</span> <span m='3837090'>one</span>
  <span m='3837780'>on</span> <span m='3837930'>one</span> <span m='3838110'>of</span>
  <span m='3838200'>those</span> <span m='3838410'>two</span> <span m='3838560'>sides.</span>
  <span m='3838860'>Could</span> <span m='3839040'>be</span> <span m='3839160'>at</span>
  <span m='3839250'>the</span> <span m='3839370'>corner,</span> <span m='3840420'>or</span>
  <span m='3840540'>this</span> <span m='3840720'>corner,</span> <span m='3841680'>but</span>
  <span m='3841770'>one</span> <span m='3841920'>of</span> <span m='3841980'>those</span>
  <span m='3842130'>two</span> <span m='3842280'>sides</span> <span m='3842520'>has</span>
  <span m='3842730'>to</span> <span m='3842790'>have</span> <span m='3842910'>a</span>
  <span m='3842970'>point</span> <span m='3843240'>on</span> <span m='3843360'>it.</span>
  <span m='3843450'>Also,</span> <span m='3844290'>one</span> <span m='3844470'>of</span>
  <span m='3844560'>these</span> <span m='3844740'>two</span> <span m='3844860'>sides</span>
  <span m='3845160'>has</span> <span m='3845370'>to</span> <span m='3845430'>have</span>
  <span m='3845580'>a</span> <span m='3845640'>point</span> <span m='3845910'>on</span>
  <span m='3846060'>it.</span> <span m='3846870'>It</span> <span m='3846960'>could</span>
  <span m='3847110'>be</span> <span m='3847440'>both</span> <span m='3847680'>of</span>
  <span m='3847740'>these</span> <span m='3847920'>constraints</span> <span m='3848330'>are</span>
  <span m='3848610'>met</span> <span m='3848910'>at</span> <span m='3849000'>once</span>
  <span m='3849330'>by</span> <span m='3849540'>having</span> <span m='3850290'>one</span>
  <span m='3850440'>point</span> <span m='3850650'>in</span> <span m='3850740'>the</span>
  <span m='3850830'>corner.</span> <span m='3852300'>Well</span> <span m='3852430'>that's</span>
  <span m='3852600'>a</span> <span m='3852660'>somewhat</span> <span m='3852960'>stronger</span>
  <span m='3853500'>formulation,</span> <span m='3854290'>but</span> <span m='3854310'>equivalent</span>
  <span m='3854760'>formulation</span> <span m='3855300'>of</span> <span m='3855960'>the</span>
  <span m='3856050'>satisfaction</span> <span m='3856680'>property.</span> <span m='3858120'>So</span>
  <span m='3858300'>in</span> <span m='3858390'>particular</span> <span m='3858930'>over</span>
  <span m='3859140'>here,</span> <span m='3862110'>it</span> <span m='3862290'>should</span>
  <span m='3862530'>be</span> <span m='3862650'>the</span> <span m='3862740'>case</span>
  <span m='3863160'>that</span> <span m='3863310'>there's</span> <span m='3863490'>a</span>
  <span m='3863550'>point,</span> <span m='3864060'>either</span> <span m='3864390'>here</span>
  <span m='3864720'>or</span> <span m='3864810'>here,</span> <span m='3866100'>and</span>
  <span m='3866340'>there</span> <span m='3866460'>should</span> <span m='3866670'>be</span>
  <span m='3866790'>a</span> <span m='3866850'>point,</span> <span m='3867180'>either</span>
  <span m='3867480'>here</span> <span m='3867750'>or</span> <span m='3867780'>here.</span>
  <span m='3868410'>I</span> <span m='3868470'>claim</span> <span m='3868740'>that</span>
  <span m='3869460'>one</span> <span m='3869640'>of</span> <span m='3869730'>those</span>
  <span m='3869970'>is</span> <span m='3870090'>violated.</span> </p><p><span m='3885930'>You</span>
  <span m='3885990'>think</span> <span m='3886200'>I'd</span> <span m='3886290'>know</span>
  <span m='3886440'>this</span> <span m='3886570'>stuff,</span> <span m='3886800'>I</span>
  <span m='3886890'>wrote</span> <span m='3887040'>the</span> <span m='3887130'>paper,</span>
  <span m='3887700'>but--</span> <span m='3890640'>it's</span> <span m='3890760'>all</span>
  <span m='3890880'>these</span> <span m='3891000'>subtle</span> <span m='3891420'>details,</span>
  <span m='3892370'>easy</span> <span m='3892470'>to get</span> <span m='3892800'>wrong.</span>
  <span m='3894090'>I</span> <span m='3894180'>think</span> <span m='3894450'>what</span>
  <span m='3894600'>I</span> <span m='3894720'>want</span> <span m='3894930'>to</span>
  <span m='3895050'>look</span> <span m='3895290'>at</span> <span m='3895650'>is,</span>
  <span m='3896520'>now,</span> <span m='3900040'>which</span> <span m='3900220'>is</span>
  <span m='3900340'>the</span> <span m='3900460'>moment</span> <span m='3900880'>we're</span>
  <span m='3901030'>drawing</span> <span m='3901360'>this</span> <span m='3901510'>diagram,</span>
  <span m='3903130'>versus</span> <span m='3903580'>the</span> <span m='3903730'>next</span>
  <span m='3904210'>time</span> <span m='3904960'>of</span> <span m='3905120'>y.</span>
  <span m='3906010'>Sorry,</span> <span m='3906880'>so</span> <span m='3907120'>this</span>
  <span m='3907360'>is</span> <span m='3908170'>x</span> <span m='3908410'>comma</span>
  <span m='3908800'>now.</span> <span m='3911710'>That's</span> <span m='3911890'>what</span>
  <span m='3911980'>my</span> <span m='3912100'>diagram</span> <span m='3912460'>looks</span>
  <span m='3912640'>like</span> <span m='3912850'>there,</span> <span m='3913020'>so</span>
  <span m='3913240'>I</span> <span m='3913270'>think</span> <span m='3913540'>that's</span>
  <span m='3913720'>what</span> <span m='3913870'>I</span> <span m='3913930'>mean.</span>
  <span m='3915070'>So</span> <span m='3915280'>ignore</span> <span m='3915550'>this</span>
  <span m='3915700'>picture.</span> </p><p><span m='3920190'>What</span> <span m='3920370'>we</span>
  <span m='3920530'>learn,</span> <span m='3922180'>what</span> <span m='3922300'>we</span>
  <span m='3922390'>know</span> <span m='3922510'>is</span> <span m='3922600'>the</span>
  <span m='3922720'>next</span> <span m='3922990'>access</span> <span m='3923380'>to</span>
  <span m='3923500'>x,</span> <span m='3923830'>is</span> <span m='3923920'>sometime</span>
  <span m='3924310'>in</span> <span m='3924400'>the</span> <span m='3924490'>future.</span>
  <span m='3925310'>That's</span> <span m='3925690'>what</span> <span m='3925800'>we're</span>
  <span m='3925900'>told</span> <span m='3926200'>here.</span> <span m='3926360'>Next</span>
  <span m='3927280'>touch</span> <span m='3927550'>of</span> <span m='3927670'>x</span>
  <span m='3928480'>is</span> <span m='3928570'>greater</span> <span m='3928840'>than</span>
  <span m='3928960'>next</span> <span m='3929170'>touch</span> <span m='3929440'>of</span>
  <span m='3929530'>y.</span> <span m='3930460'>So</span> <span m='3930580'>next</span>
  <span m='3930790'>touch</span> <span m='3931000'>of</span> <span m='3931090'>x</span>
  <span m='3931220'>is</span> <span m='3931390'>up</span> <span m='3931570'>here,</span>
  <span m='3931910'>which</span> <span m='3931990'>means</span> <span m='3932740'>this</span>
  <span m='3933010'>is</span> <span m='3933130'>empty.</span> <span m='3935580'>OK,</span>
  <span m='3936370'>if</span> <span m='3936490'>that's</span> <span m='3936790'>empty,</span>
  <span m='3938200'>this</span> <span m='3938470'>better</span> <span m='3938710'>not</span>
  <span m='3938890'>be</span> <span m='3939040'>empty.</span> <span m='3940140'>All
  right that's</span> <span m='3940350'>what</span> <span m='3940540'>we</span> <span
  m='3940660'>claim,</span> <span m='3940900'>one</span> <span m='3941140'>of</span>
  <span m='3941200'>these</span> <span m='3941410'>two</span> <span m='3942010'>has</span>
  <span m='3942250'>to</span> <span m='3942340'>have</span> <span m='3942490'>a</span>
  <span m='3942550'>point</span> <span m='3942820'>in</span> <span m='3942940'>it.</span>
  <span m='3944830'>This</span> <span m='3945010'>one's</span> <span m='3945190'>empty,</span>
  <span m='3945840'>so</span> <span m='3945940'>this</span> <span m='3946505'>better</span>
  <span m='3946930'>not</span> <span m='3947110'>be</span> <span m='3947230'>empty,</span>
  <span m='3947440'>but</span> <span m='3947590'>I</span> <span m='3947620'>claim</span>
  <span m='3947920'>this</span> <span m='3948070'>is</span> <span m='3948190'>empty.</span>
  <span m='3948670'>Suppose</span> <span m='3949030'>it's</span> <span m='3949120'>not,</span>
  <span m='3949600'>suppose</span> <span m='3950020'>it</span> <span m='3950110'>is,</span>
  <span m='3950920'>suppose</span> <span m='3951310'>it's</span> <span m='3951460'>not</span>
  <span m='3951760'>empty--</span> <span m='3953401'>Wait,</span> <span m='3953820'>no,</span>
  <span m='3955480'>one</span> <span m='3955600'>of</span> <span m='3955650'>these.</span>
  <span m='3956460'>Suppose</span> <span m='3956790'>it's</span> <span m='3956900'>not</span>
  <span m='3957120'>empty,</span> <span m='3957970'>should</span> <span m='3958120'>be</span>
  <span m='3958270'>the</span> <span m='3958600'>correct</span> <span m='3958900'>scenario.</span>
  <span m='3960850'>Look</span> <span m='3961060'>at</span> <span m='3961180'>the</span>
  <span m='3961300'>left</span> <span m='3961720'>most</span> <span m='3962050'>point</span>
  <span m='3962920'>in</span> <span m='3963100'>this</span> <span m='3963340'>range.</span>
  <span m='3969960'>This</span> <span m='3970460'>guy.</span> </p><p><span m='3975620'>It's</span>
  <span m='3975770'>a</span> <span m='3975830'>point</span> <span m='3976190'>between</span>
  <span m='3976670'>x</span> <span m='3976880'>and</span> <span m='3977000'>y,</span>
  <span m='3977780'>in</span> <span m='3977900'>terms</span> <span m='3978140'>of</span>
  <span m='3978230'>key</span> <span m='3978410'>value.</span> <span m='3979620'>So,</span>
  <span m='3979670'>in</span> <span m='3979760'>this</span> <span m='3979910'>picture,</span>
  <span m='3981480'>where</span> <span m='3981770'>could</span> <span m='3981920'>it</span>
  <span m='3982010'>be?</span> <span m='3983870'>Where</span> <span m='3984020'>are</span>
  <span m='3984080'>the</span> <span m='3984200'>points</span> <span m='3984590'>between</span>
  <span m='3984950'>x</span> <span m='3985130'>and</span> <span m='3985220'>y</span>
  <span m='3986420'>in</span> <span m='3986540'>this</span> <span m='3986660'>diagram?</span>
  <span m='3989470'>They</span> <span m='3989690'>have</span> <span m='3989780'>to</span>
  <span m='3989870'>be</span> <span m='3989930'>in</span> <span m='3989990'>the</span>
  <span m='3990080'>left</span> <span m='3990320'>subtree</span> <span m='3990740'>of</span>
  <span m='3990860'>y.</span> <span m='3991970'>Right?</span> <span m='3992360'>The</span>
  <span m='3992510'>only</span> <span m='3992930'>points</span> <span m='3993200'>in</span>
  <span m='3993290'>a</span> <span m='3993350'>binary</span> <span m='3993620'>search--</span>
  <span m='3993890'>if</span> <span m='3994040'>x</span> <span m='3994220'>and</span>
  <span m='3994310'>y</span> <span m='3994460'>are--</span> <span m='3994880'>if</span>
  <span m='3995050'>y</span> <span m='3995130'>is</span> <span m='3995240'>a</span>
  <span m='3995300'>child</span> <span m='3995570'>of</span> <span m='3995660'>x,</span>
  <span m='3995870'>the</span> <span m='3995990'>only</span> <span m='3996230'>points</span>
  <span m='3996470'>in</span> <span m='3996530'>the</span> <span m='3996590'>binary</span>
  <span m='3996980'>tree</span> <span m='3997160'>that</span> <span m='3997250'>are</span>
  <span m='3997310'>between</span> <span m='3997610'>x</span> <span m='3997760'>and</span>
  <span m='3997850'>y,</span> <span m='3999070'>or</span> <span m='3999440'>the</span>
  <span m='3999560'>left</span> <span m='3999800'>subtree</span> <span m='4000190'>of</span>
  <span m='4000280'>y,</span> <span m='4000640'>or</span> <span m='4000790'>there's</span>
  <span m='4000970'>a</span> <span m='4001030'>symmetric</span> <span m='4001420'>case,</span>
  <span m='4001690'>but</span> <span m='4001840'>in</span> <span m='4001930'>this</span>
  <span m='4002050'>picture</span> <span m='4002830'>left</span> <span m='4003040'>subtree</span>
  <span m='4003400'>of</span> <span m='4003490'>y.</span> </p><p><span m='4004870'>But</span>
  <span m='4005050'>I</span> <span m='4005110'>put</span> <span m='4005290'>an</span>
  <span m='4005410'>x</span> <span m='4005710'>here.</span> <span m='4005970'>That</span>
  <span m='4006190'>means</span> <span m='4006820'>that</span> <span m='4007210'>whoever</span>
  <span m='4007570'>we're</span> <span m='4007690'>looking</span> <span m='4008020'>at,</span>
  <span m='4008500'>some</span> <span m='4008740'>point</span> <span m='4009100'>between</span>
  <span m='4009490'>x</span> <span m='4009640'>and</span> <span m='4009730'>y,</span>
  <span m='4010510'>has</span> <span m='4010690'>to</span> <span m='4010780'>be</span>
  <span m='4010900'>in</span> <span m='4011140'>this</span> <span m='4011320'>top</span>
  <span m='4011650'>tree.</span> <span m='4012760'>Contradiction,</span> <span m='4014180'>done,</span>
  <span m='4015030'>OK?</span> <span m='4015310'>If</span> <span m='4015490'>this</span>
  <span m='4015670'>guy</span> <span m='4015850'>is</span> <span m='4015970'>in</span>
  <span m='4016120'>there,</span> <span m='4016630'>then</span> <span m='4016780'>y</span>
  <span m='4017020'>was</span> <span m='4017170'>also</span> <span m='4017440'>in</span>
  <span m='4017560'>there,</span> <span m='4018130'>which</span> <span m='4018280'>meant</span>
  <span m='4018460'>there</span> <span m='4018580'>was</span> <span m='4018670'>a</span>
  <span m='4018730'>point</span> <span m='4018970'>here,</span> <span m='4021940'>and</span>
  <span m='4022060'>that's</span> <span m='4022270'>what</span> <span m='4022390'>we're</span>
  <span m='4022540'>assuming</span> <span m='4022870'>did</span> <span m='4022990'>not</span>
  <span m='4023170'>happen.</span> <span m='4023470'>This</span> <span m='4023620'>is</span>
  <span m='4023680'>supposed</span> <span m='4023920'>to</span> <span m='4024010'>be</span>
  <span m='4024070'>an</span> <span m='4024160'>interface</span> <span m='4024700'>between</span>
  <span m='4025750'>inside</span> <span m='4026410'>the</span> <span m='4026530'>set</span>
  <span m='4026710'>of</span> <span m='4026830'>touched</span> <span m='4027190'>nodes,</span>
  <span m='4027550'>and</span> <span m='4027700'>outside</span> <span m='4028120'>the</span>
  <span m='4028210'>set</span> <span m='4028360'>of</span> <span m='4028450'>touched</span>
  <span m='4028660'>nodes.</span> <span m='4030740'>So</span> <span m='4030790'>there</span>
  <span m='4030910'>can't</span> <span m='4031210'>be</span> <span m='4031360'>any</span>
  <span m='4031540'>points</span> <span m='4031840'>in</span> <span m='4031930'>here,</span>
  <span m='4034090'>which</span> <span m='4034240'>means</span> <span m='4034480'>this</span>
  <span m='4034630'>is</span> <span m='4034750'>empty,</span> <span m='4035510'>which</span>
  <span m='4035560'>means</span> <span m='4035740'>you</span> <span m='4035810'>weren't</span>
  <span m='4035950'>satisfied.</span> <span m='4037696'>OK,</span> <span m='4038090'>maybe</span>
  <span m='4038200'>I</span> <span m='4038430'>should</span> <span m='4038530'>write</span>
  <span m='4038710'>down</span> <span m='4038890'>the</span> <span m='4039010'>words</span>
  <span m='4039310'>to</span> <span m='4039400'>go</span> <span m='4039550'>with</span>
  <span m='4039640'>that</span> <span m='4039790'>argument,</span> <span m='4040890'>but--</span>
  </p><p><span m='4045680'>So,</span> <span m='4046160'>this</span> <span m='4046430'>part</span>
  <span m='4046880'>is</span> <span m='4047300'>empty</span> <span m='4051950'>by</span>
  <span m='4052550'>next</span> <span m='4052880'>touch</span> <span m='4053300'>of</span>
  <span m='4053690'>x</span> <span m='4054140'>being</span> <span m='4054410'>greater</span>
  <span m='4054770'>than</span> <span m='4055040'>next</span> <span m='4055280'>touch</span>
  <span m='4055520'>of</span> <span m='4055610'>y.</span> <span m='4057530'>And</span>
  <span m='4057710'>this</span> <span m='4057890'>part</span> <span m='4058190'>is</span>
  <span m='4058340'>empty</span> <span m='4061550'>else,</span> <span m='4063431'>or</span>
  <span m='4063890'>it's</span> <span m='4064040'>empty</span> <span m='4065180'>because</span>
  <span m='4070190'>any</span> <span m='4070460'>key</span> <span m='4075680'>between</span>
  <span m='4076190'>x</span> <span m='4076670'>and</span> <span m='4076910'>y</span>
  <span m='4083510'>is</span> <span m='4083960'>in</span> <span m='4084500'>the</span>
  <span m='4084620'>left</span> <span m='4084980'>subtree</span> <span m='4085520'>of</span>
  <span m='4085640'>y,</span> <span m='4091660'>which</span> <span m='4091980'>would</span>
  <span m='4092190'>imply</span> <span m='4098189'>if</span> <span m='4098460'>it's</span>
  <span m='4098700'>touched</span> <span m='4102630'>then</span> <span m='4104069'>so</span>
  <span m='4105330'>is</span> <span m='4106620'>y.</span> <span m='4108930'>But</span>
  <span m='4109020'>y</span> <span m='4109290'>cannot</span> <span m='4109590'>be</span>
  <span m='4109710'>touched,</span> <span m='4110640'>by</span> <span m='4110760'>assumption.</span>
  </p><p><span m='4112450'>So</span> <span m='4112500'>that's</span> <span m='4112710'>the</span>
  <span m='4112800'>end</span> <span m='4112950'>of</span> <span m='4113010'>that</span>
  <span m='4113160'>proof.</span> <span m='4114960'>A</span> <span m='4115020'>little</span>
  <span m='4115290'>bit</span> <span m='4115470'>longer,</span> <span m='4117584'>but</span>
  <span m='4118000'>hopefully</span> <span m='4118260'>it's</span> <span m='4118569'>pretty</span>
  <span m='4118870'>clear</span> <span m='4119080'>at</span> <span m='4119140'>this</span>
  <span m='4119290'>point.</span> <span m='4119470'>Question?</span> </p><p><span
  m='4120778'>AUDIENCE:</span> <span m='4121252'>Can't there be</span> <span m='4121726'>something</span>
  <span m='4123148'>like</span> <span m='4123622'>a descendent</span> <span m='4124096'>of
  x,</span> <span m='4124570'>but an</span> <span m='4125044'>ancestor of</span> <span
  m='4125529'>y,</span> <span m='4125810'>instead of</span> <span m='4127304'>being
  in</span> <span m='4127802'>a subtree</span> <span m='4128300'>with y?</span> </p><p><span
  m='4129300'>PROFESSOR:</span> <span m='4129430'>Would,</span> <span m='4129779'>so</span>
  <span m='4130029'>you</span> <span m='4130149'>could</span> <span m='4130290'>say</span>
  <span m='4130450'>it</span> <span m='4130510'>could</span> <span m='4130660'>be</span>
  <span m='4130870'>in</span> <span m='4130979'>between</span> <span m='4131380'>here.</span>
  <span m='4132250'>It</span> <span m='4132310'>could</span> <span m='4132490'>be</span>
  <span m='4132580'>a</span> <span m='4132640'>descendant</span> <span m='4133029'>of</span>
  <span m='4133109'>x,</span> <span m='4133140'>but an</span> <span m='4133479'>ancestor</span>
  <span m='4133840'>of</span> <span m='4133890'>y,</span> <span m='4134050'>but</span>
  <span m='4134170'>we're</span> <span m='4134350'>assuming</span> <span m='4134680'>here</span>
  <span m='4134830'>that</span> <span m='4135010'>this</span> <span m='4135160'>was</span>
  <span m='4135310'>a</span> <span m='4135370'>child</span> <span m='4135729'>relation.</span>
  <span m='4136810'>y</span> <span m='4136990'>was</span> <span m='4137140'>a</span>
  <span m='4137200'>child</span> <span m='4137560'>of</span> <span m='4137649'>x.</span>
  <span m='4138310'>This</span> <span m='4138490'>was</span> <span m='4138729'>a--</span>
  <span m='4139394'>I</span> <span m='4139689'>didn't</span> <span m='4139899'>say</span>
  <span m='4140080'>that</span> <span m='4140260'>at</span> <span m='4140350'>the</span>
  <span m='4140439'>beginning.</span> <span m='4141640'>On</span> <span m='4141890'>a</span>
  <span m='4141939'>claim</span> <span m='4142180'>that's</span> <span m='4142330'>a</span>
  <span m='4142390'>global</span> <span m='4142660'>treap,</span> <span m='4142939'>if</span>
  <span m='4143050'>it's</span> <span m='4143170'>not</span> <span m='4143410'>a</span>
  <span m='4143470'>global</span> <span m='4143740'>treap,</span> <span m='4144000'>there</span>
  <span m='4144220'>is</span> <span m='4144840'>some</span> <span m='4145120'>edge</span>
  <span m='4145359'>that's</span> <span m='4145510'>violated,</span> <span m='4146710'>that</span>
  <span m='4146890'>does</span> <span m='4147040'>not</span> <span m='4147220'>have</span>
  <span m='4147399'>heap</span> <span m='4147670'>order</span> <span m='4147840'>property.</span>
  <span m='4148340'>So assuming</span> <span m='4148810'>this</span> <span m='4148960'>was</span>
  <span m='4149080'>an</span> <span m='4149170'>edge,</span> <span m='4149830'>x</span>
  <span m='4150229'>is OK,</span> <span m='4151180'>it</span> <span m='4151330'>was</span>
  <span m='4151540'>in</span> <span m='4151689'>the</span> <span m='4151779'>local</span>
  <span m='4152080'>treap,</span> <span m='4152720'>y</span> <span m='4153250'>somehow</span>
  <span m='4153609'>is</span> <span m='4153700'>going</span> <span m='4153850'>to</span>
  <span m='4153910'>be</span> <span m='4154029'>bad,</span> <span m='4154390'>because</span>
  <span m='4154600'>it's</span> <span m='4154779'>next</span> <span m='4155020'>touch</span>
  <span m='4155260'>time</span> <span m='4155560'>was,</span> <span m='4156100'>should</span>
  <span m='4156310'>be</span> <span m='4156490'>higher.</span> <span m='4156970'>Should</span>
  <span m='4157120'>be</span> <span m='4157240'>above.</span> <span m='4158050'>Other</span>
  <span m='4158170'>question?</span> </p><p><span m='4159008'>AUDIENCE:</span> <span
  m='4159506'>So that</span> <span m='4160004'>[INAUDIBLE]</span> <span m='4160502'>you
  drew,</span> <span m='4161000'>and all</span> <span m='4161498'>the</span> <span
  m='4162992'>everything</span> <span m='4163490'>in that</span> <span m='4163988'>subtree
  root</span> <span m='4164486'>that gets</span> <span m='4164984'>taken</span> <span
  m='4165980'>to--</span> <span m='4166976'>Like</span> <span m='4167474'>the picture
  on the right</span> <span m='4167972'>is also,</span> <span m='4168968'>it's the
  same</span> <span m='4169466'>subtree</span> <span m='4169964'>right?</span> <span
  m='4170462'>But</span> <span m='4170960'>after</span> <span m='4171458'>you change
  their</span> <span m='4171956'>[INAUDIBLE]</span> </p><p><span m='4172479'>PROFESSOR:</span>
  <span m='4172594'>These</span> <span m='4172710'>two subtrees</span> <span m='4173170'>have</span>
  <span m='4173319'>the</span> <span m='4173410'>same</span> <span m='4173649'>set</span>
  <span m='4173830'>of</span> <span m='4173920'>nodes,</span> <span m='4174340'>they've</span>
  <span m='4174520'>just</span> <span m='4174670'>been</span> <span m='4174880'>rotated</span>
  <span m='4175330'>somehow.</span> </p><p><span m='4175680'>AUDIENCE:</span> <span
  m='4176167'>OK,</span> <span m='4176654'>but then</span> <span m='4177141'>how</span>
  <span m='4177628'>do</span> <span m='4178115'>you--</span> <span m='4178602'>but
  didn't we</span> <span m='4179089'>change the</span> <span m='4179576'>next touch</span>
  <span m='4180063'>times</span> <span m='4180550'>of all the nodes</span> <span m='4181037'>in
  there?</span> <span m='4181524'>So how you do</span> <span m='4182011'>know</span>
  <span m='4182498'>if the root</span> <span m='4182985'>is still going</span> <span
  m='4183472'>to be some</span> <span m='4183959'>guy</span> <span m='4184446'>in
  that subtree?</span> </p><p><span m='4188850'>PROFESSOR:</span> <span m='4189010'>Buy</span>
  <span m='4189170'>this</span> <span m='4189380'>argument.</span> <span m='4190189'>So</span>
  <span m='4190399'>the</span> <span m='4190460'>question</span> <span m='4190830'>is</span>
  <span m='4190930'>say,</span> <span m='4192020'>after</span> <span m='4192350'>we</span>
  <span m='4192470'>do</span> <span m='4192649'>this,</span> <span m='4193340'>we</span>
  <span m='4193580'>make</span> <span m='4193819'>some</span> <span m='4194060'>root,</span>
  <span m='4195140'>which</span> <span m='4195350'>is</span> <span m='4195440'>going,</span>
  <span m='4195860'>the</span> <span m='4195980'>root</span> <span m='4196160'>is</span>
  <span m='4196280'>going</span> <span m='4196490'>to</span> <span m='4196610'>be</span>
  <span m='4197120'>among</span> <span m='4197480'>all</span> <span m='4197660'>the</span>
  <span m='4197840'>nodes</span> <span m='4198110'>that</span> <span m='4198200'>just</span>
  <span m='4198410'>got</span> <span m='4198560'>touched</span> <span m='4198910'>now,</span>
  <span m='4199270'>who is</span> <span m='4199610'>going</span> <span m='4199820'>to</span>
  <span m='4199910'>be</span> <span m='4200030'>touched</span> <span m='4200420'>next?</span>
  <span m='4202280'>That's</span> <span m='4202490'>who</span> <span m='4202610'>we</span>
  <span m='4202700'>put</span> <span m='4202880'>at</span> <span m='4202970'>the</span>
  <span m='4203090'>root.</span> <span m='4203720'>And</span> <span m='4203810'>the</span>
  <span m='4203900'>claim</span> <span m='4204230'>is,</span> <span m='4204350'>that</span>
  <span m='4204590'>is</span> <span m='4204770'>globally</span> <span m='4206360'>the</span>
  <span m='4206750'>node</span> <span m='4206930'>that</span> <span m='4207050'>will</span>
  <span m='4207170'>be</span> <span m='4207290'>touched</span> <span m='4207530'>next.</span>
  <span m='4208100'>Why?</span> <span m='4208800'>By</span> <span m='4209050'>this</span>
  <span m='4209250'>argument.</span> </p><p><span m='4211220'>If</span> <span m='4212540'>there</span>
  <span m='4212660'>were</span> <span m='4212750'>some</span> <span m='4213080'>other</span>
  <span m='4213340'>node</span> <span m='4213560'>down</span> <span m='4213830'>here</span>
  <span m='4214400'>that</span> <span m='4214520'>has</span> <span m='4214730'>a</span>
  <span m='4214790'>smaller</span> <span m='4215360'>next</span> <span m='4215630'>access</span>
  <span m='4216020'>time,</span> <span m='4218330'>then--</span> <span m='4222980'>but</span>
  <span m='4223160'>we</span> <span m='4223280'>know</span> <span m='4223550'>that
  it</span> <span m='4223640'>was</span> <span m='4223840'>heap</span> <span m='4224210'>ordered</span>
  <span m='4224495'>before,</span> <span m='4224780'>so</span> <span m='4224960'>all</span>
  <span m='4225110'>of</span> <span m='4225170'>these</span> <span m='4225380'>guys</span>
  <span m='4225620'>are</span> <span m='4225920'>heap</span> <span m='4226180'>ordered.</span>
  <span m='4226500'>So,</span> <span m='4226620'>this</span> <span m='4226880'>guy</span>
  <span m='4227120'>would</span> <span m='4227240'>then</span> <span m='4227420'>have</span>
  <span m='4227630'>the</span> <span m='4227750'>minimum.</span> <span m='4228680'>And</span>
  <span m='4228770'>then</span> <span m='4228890'>we</span> <span m='4228980'>look</span>
  <span m='4229160'>at</span> <span m='4229220'>that</span> <span m='4229400'>interface,</span>
  <span m='4230150'>and</span> <span m='4230540'>the</span> <span m='4230630'>claim</span>
  <span m='4230885'>is</span> <span m='4231140'>by</span> <span m='4231380'>the</span>
  <span m='4231470'>satisfaction</span> <span m='4232100'>property,</span> <span m='4232900'>actually</span>
  <span m='4233380'>this</span> <span m='4233540'>point</span> <span m='4233780'>should</span>
  <span m='4233960'>have</span> <span m='4234050'>been</span> <span m='4234200'>in</span>
  <span m='4234320'>the</span> <span m='4234410'>set.</span> </p><p><span m='4235400'>So,</span>
  <span m='4235550'>what</span> <span m='4235670'>this</span> <span m='4235820'>tells</span>
  <span m='4236060'>you</span> <span m='4236150'>is</span> <span m='4236360'>the</span>
  <span m='4236510'>guy</span> <span m='4236780'>that</span> <span m='4236930'>has</span>
  <span m='4237080'>to</span> <span m='4237200'>be</span> <span m='4237290'>accessed</span>
  <span m='4237590'>next,</span> <span m='4238280'>in</span> <span m='4238400'>particular,</span>
  <span m='4238970'>must</span> <span m='4239300'>be</span> <span m='4239720'>in</span>
  <span m='4239900'>your</span> <span m='4240060'>set.</span> <span m='4241340'>Must</span>
  <span m='4241670'>be</span> <span m='4241850'>touched</span> <span m='4242360'>now.</span>
  <span m='4246950'>Kind</span> <span m='4247130'>of</span> <span m='4247460'>magical.</span>
  <span m='4248810'>Well</span> <span m='4249020'>actually,</span> <span m='4249460'>it's</span>
  <span m='4249680'>because</span> <span m='4250070'>they're</span> <span m='4250460'>tie-breaking</span>
  <span m='4251180'>I</span> <span m='4251240'>think,</span> <span m='4251530'>that</span>
  <span m='4251690'>this</span> <span m='4251900'>works</span> <span m='4252140'>out.</span>
  <span m='4253690'>Anyway,</span> <span m='4254450'>another</span> <span m='4254630'>question?</span>
  </p><p><span m='4255454'>AUDIENCE:</span> <span m='4255701'>So,</span> <span m='4255948'>like</span>
  <span m='4256442'>when you're</span> <span m='4256936'>rearranging the</span> <span
  m='4258418'>[INAUDIBLE]</span> <span m='4259406'>in the</span> <span m='4259900'>sort
  of</span> <span m='4260394'>subtree</span> <span m='4260888'>on top</span> <span
  m='4261382'>[INAUDIBLE]</span> </p><p><span m='4264840'>PROFESSOR:</span> <span
  m='4264955'>Yeah,</span> <span m='4265600'>we're</span> <span m='4265690'>doing</span>
  <span m='4265960'>this</span> <span m='4266140'>transformation</span> <span m='4266800'>of</span>
  <span m='4266920'>the</span> <span m='4267010'>top</span> <span m='4267280'>tree</span>
  <span m='4267550'>into</span> <span m='4267760'>the</span> <span m='4267880'>local</span>
  <span m='4268180'>tree</span> <span m='4268450'>by</span> <span m='4268630'>rotations.</span>
  <span m='4269510'>I</span> <span m='4269670'>mentioned--</span> </p><p><span m='4269930'>AUDIENCE:</span>
  <span m='4270405'>[INAUDIBLE]</span> <span m='4272305'>It's</span> <span m='4272780'>always--</span>
  </p><p><span m='4273260'>PROFESSOR:</span> <span m='4273390'>Right,</span> <span
  m='4273520'>so</span> <span m='4273640'>we're</span> <span m='4273760'>staying</span>
  <span m='4274090'>within</span> <span m='4274300'>the</span> <span m='4274390'>binary</span>
  <span m='4274630'>search</span> <span m='4274800'>tree</span> <span m='4274990'>model,</span>
  <span m='4275530'>and</span> <span m='4275770'>in</span> <span m='4275860'>particular</span>
  <span m='4276310'>then</span> <span m='4276490'>we</span> <span m='4276610'>stay</span>
  <span m='4276910'>a</span> <span m='4276970'>binary</span> <span m='4277240'>search</span>
  <span m='4277480'>tree.</span> <span m='4278300'>So,</span> <span m='4278320'>we</span>
  <span m='4278380'>can't</span> <span m='4278620'>mess</span> <span m='4278800'>things</span>
  <span m='4279040'>up.</span> <span m='4279220'>And</span> <span m='4279310'>there's</span>
  <span m='4279490'>a</span> <span m='4279550'>nice</span> <span m='4279760'>theorem</span>
  <span m='4280030'>that</span> <span m='4280120'>if</span> <span m='4280240'>you</span>
  <span m='4280330'>have</span> <span m='4280600'>two</span> <span m='4280750'>binary</span>
  <span m='4281050'>search</span> <span m='4281260'>trees</span> <span m='4281470'>on</span>
  <span m='4281560'>the</span> <span m='4281650'>same,</span> <span m='4281920'>keys</span>
  <span m='4282640'>there's</span> <span m='4282820'>a</span> <span m='4282880'>way</span>
  <span m='4283000'>to</span> <span m='4283090'>get</span> <span m='4283270'>there</span>
  <span m='4283390'>with</span> <span m='4283480'>the</span> <span m='4283570'>linear</span>
  <span m='4283840'>number</span> <span m='4284140'>of</span> <span m='4284230'>rotates,</span>
  <span m='4285280'>so</span> <span m='4285460'>that's</span> <span m='4285970'>for</span>
  <span m='4286120'>free.</span> </p><p><span m='4288130'>So,</span> <span m='4288280'>our</span>
  <span m='4288370'>new</span> <span m='4288550'>cost</span> <span m='4288880'>model</span>
  <span m='4289210'>is</span> <span m='4289420'>just</span> <span m='4289750'>to</span>
  <span m='4289870'>count</span> <span m='4290200'>points.</span> <span m='4291790'>The</span>
  <span m='4291880'>cost</span> <span m='4292300'>of</span> <span m='4292390'>this</span>
  <span m='4292600'>access</span> <span m='4293110'>is</span> <span m='4293290'>one,</span>
  <span m='4293650'>the</span> <span m='4293740'>cost</span> <span m='4293980'>of</span>
  <span m='4294070'>this</span> <span m='4294250'>access</span> <span m='4294580'>is</span>
  <span m='4294760'>two,</span> <span m='4295300'>two,</span> <span m='4295780'>three.</span>
  <span m='4297070'>If</span> <span m='4297190'>we</span> <span m='4297310'>just</span>
  <span m='4297490'>count</span> <span m='4297730'>how</span> <span m='4297850'>many</span>
  <span m='4298030'>nodes</span> <span m='4298270'>are</span> <span m='4298360'>touched,</span>
  <span m='4300370'>then</span> <span m='4301750'>the</span> <span m='4302140'>cost</span>
  <span m='4302620'>of</span> <span m='4302710'>the</span> <span m='4302800'>binary</span>
  <span m='4303100'>search</span> <span m='4303340'>tree</span> <span m='4303550'>is</span>
  <span m='4304000'>equal</span> <span m='4304480'>to</span> <span m='4305440'>the</span>
  <span m='4305560'>cost</span> <span m='4306040'>of</span> <span m='4306310'>the</span>
  <span m='4306460'>minimum</span> <span m='4308050'>satisfied</span> <span m='4308830'>superset</span>
  <span m='4309640'>of</span> <span m='4309760'>your</span> <span m='4309880'>point.</span>
  <span m='4310270'>So this</span> <span m='4310540'>is</span> <span m='4310780'>the</span>
  <span m='4311050'>problem</span> <span m='4311530'>now.</span> <span m='4312760'>Sadly</span>
  <span m='4313060'>we</span> <span m='4313180'>don't</span> <span m='4313300'>know</span>
  <span m='4313450'>how</span> <span m='4313510'>to</span> <span m='4313630'>solve</span>
  <span m='4313960'>the</span> <span m='4314110'>problem.</span> <span m='4316390'>We</span>
  <span m='4316570'>do</span> <span m='4316740'>know</span> <span m='4317920'>some</span>
  <span m='4318160'>things.</span> </p><p><span m='4321080'>I</span> <span m='4321180'>don't</span>
  <span m='4321280'>think</span> <span m='4321380'>I'll</span> <span m='4321480'>go</span>
  <span m='4321550'>through</span> <span m='4321700'>an</span> <span m='4321790'>example</span>
  <span m='4323350'>of</span> <span m='4323470'>this,</span> <span m='4323960'>it's
  not</span> <span m='4324230'>very</span> <span m='4324430'>exciting.</span> <span
  m='4324780'>You</span> <span m='4324880'>could</span> <span m='4325060'>run</span>
  <span m='4325270'>through</span> <span m='4326290'>this</span> <span m='4326440'>picture,</span>
  <span m='4328180'>and</span> <span m='4328390'>see</span> <span m='4328630'>how</span>
  <span m='4328900'>the</span> <span m='4329260'>binary</span> <span m='4329590'>[?
  structure ?]</span> <span m='4329860'>changes.</span> <span m='4330250'>Actually</span>
  <span m='4330520'>the</span> <span m='4330640'>binary</span> <span m='4330850'>[?
  structure ?]</span> <span m='4331180'>won't</span> <span m='4331360'>change</span>
  <span m='4331580'>it</span> <span m='4331660'>all</span> <span m='4331900'>here,
  so</span> <span m='4332310'>it's</span> <span m='4332770'>a</span> <span m='4332800'>little</span>
  <span m='4333580'>anticlimactic</span> <span m='4334360'>of</span> <span m='4334450'>an</span>
  <span m='4334510'>example.</span> <span m='4335030'>You</span> <span m='4335080'>can</span>
  <span m='4335220'>see</span> <span m='4335380'>it</span> <span m='4335470'>in</span>
  <span m='4335560'>the</span> <span m='4335650'>notes.</span> <span m='4338200'>I</span>
  <span m='4338530'>want</span> <span m='4338680'>to</span> <span m='4338770'>get</span>
  <span m='4338920'>to</span> <span m='4339220'>the</span> <span m='4339340'>greedy</span>
  <span m='4339580'>algorithm,</span> <span m='4341638'>so</span> <span m='4342050'>let's</span>
  <span m='4342280'>go</span> <span m='4345110'>here.</span> <span m='4354850'>Last
  bullet.</span> </p><p><span m='4394860'>The</span> <span m='4395210'>idea</span>
  <span m='4395560'>is</span> <span m='4395690'>to</span> <span m='4395840'>imagine</span>
  <span m='4397490'>your</span> <span m='4397610'>points</span> <span m='4397940'>are</span>
  <span m='4398030'>added</span> <span m='4398390'>one</span> <span m='4398540'>at</span>
  <span m='4398630'>a</span> <span m='4398700'>time,</span> <span m='4400100'>bottom</span>
  <span m='4400400'>up.</span> <span m='4404060'>So</span> <span m='4404330'>I'm</span>
  <span m='4404390'>going</span> <span m='4404510'>to</span> <span m='4404570'>do</span>
  <span m='4404660'>the</span> <span m='4404720'>same</span> <span m='4404990'>example.</span>
  <span m='4405680'>First</span> <span m='4405920'>we</span> <span m='4406030'>add</span>
  <span m='4406160'>this</span> <span m='4406310'>point.</span> <span m='4407780'>That's</span>
  <span m='4407890'>a</span> <span m='4407960'>satisfied</span> <span m='4408470'>set,</span>
  <span m='4408710'>done.</span> <span m='4409730'>In</span> <span m='4409820'>general</span>
  <span m='4412910'>add</span> <span m='4414620'>necessary</span> <span m='4415130'>points</span>
  <span m='4421210'>on</span> <span m='4421700'>the</span> <span m='4421820'>same</span>
  <span m='4422100'>row</span> <span m='4426840'>as</span> <span m='4427350'>the</span>
  <span m='4428610'>search.</span> <span m='4430230'>OK,</span> <span m='4430380'>there's</span>
  <span m='4430530'>nothing</span> <span m='4430830'>to</span> <span m='4430890'>add</span>
  <span m='4431160'>here.</span> </p><p><span m='4431760'>Next</span> <span m='4432030'>point</span>
  <span m='4432330'>we</span> <span m='4432480'>add</span> <span m='4432720'>is</span>
  <span m='4432840'>over</span> <span m='4433050'>here.</span> <span m='4433910'>I've
  got</span> <span m='4434050'>the</span> <span m='4434190'>orientation</span> <span
  m='4434850'>correct,</span> <span m='4435210'>yeah.</span> <span m='4436170'>So</span>
  <span m='4436380'>this</span> <span m='4436530'>was</span> <span m='4436650'>three,</span>
  <span m='4437150'>this</span> <span m='4437280'>was</span> <span m='4437400'>one.</span>
  <span m='4439060'>Is</span> <span m='4439200'>this</span> <span m='4439590'>satisfied?</span>
  <span m='4440340'>No,</span> <span m='4440820'>there's</span> <span m='4441060'>a</span>
  <span m='4441090'>bad</span> <span m='4441420'>rectangle</span> <span m='4441900'>here.</span>
  <span m='4443100'>There's</span> <span m='4443310'>two</span> <span m='4443610'>obvious</span>
  <span m='4443910'>ways</span> <span m='4444120'>to</span> <span m='4444180'>satisfy</span>
  <span m='4444540'>the</span> <span m='4444630'>rectangle,</span> <span m='4445020'>I</span>
  <span m='4445050'>could</span> <span m='4445170'>add</span> <span m='4445320'>a</span>
  <span m='4445380'>point</span> <span m='4445590'>here,</span> <span m='4446290'>or</span>
  <span m='4446520'>I could</span> <span m='4446670'>add a</span> <span m='4446730'>point</span>
  <span m='4446940'>here.</span> <span m='4447550'>I'm</span> <span m='4447650'>going
  to</span> <span m='4447790'>add</span> <span m='4447930'>a</span> <span m='4447960'>point</span>
  <span m='4448170'>here,</span> <span m='4448350'>because</span> <span m='4448620'>that's</span>
  <span m='4448830'>the</span> <span m='4448950'>row,</span> <span m='4449250'>this</span>
  <span m='4449460'>is</span> <span m='4449550'>current</span> <span m='4449910'>time.</span>
  <span m='4450720'>OK,</span> <span m='4451200'>it's</span> <span m='4451290'>like</span>
  <span m='4451470'>a</span> <span m='4451530'>sweep</span> <span m='4451830'>line</span>
  <span m='4452310'>algorithm.</span> <span m='4454050'>We</span> <span m='4454380'>go</span>
  <span m='4454650'>up,</span> <span m='4455670'>next</span> <span m='4455940'>point</span>
  <span m='4456240'>is</span> <span m='4456630'>over</span> <span m='4456930'>here.</span>
  <span m='4458721'>That's the</span> <span m='4459210'>Next</span> <span m='4459570'>position</span>
  <span m='4459960'>to sweep</span> <span m='4460230'>line.</span> <span m='4460890'>Now</span>
  <span m='4461040'>there's</span> <span m='4461220'>a</span> <span m='4461280'>bad</span>
  <span m='4461460'>rectangle.</span> <span m='4462840'>We</span> <span m='4462930'>fix</span>
  <span m='4463230'>it</span> <span m='4463380'>by</span> <span m='4463650'>adding</span>
  <span m='4463980'>this</span> <span m='4464130'>point.</span> <span m='4467010'>Now</span>
  <span m='4467160'>we're</span> <span m='4467250'>good,</span> <span m='4467460'>all</span>
  <span m='4467610'>rectangles</span> <span m='4468090'>are</span> <span m='4468180'>satisfied.</span>
  </p><p><span m='4469950'>Next</span> <span m='4470430'>level</span> <span m='4471030'>is,</span>
  <span m='4471630'>there's</span> <span m='4471800'>a</span> <span m='4471870'>point</span>
  <span m='4472110'>here.</span> <span m='4473490'>Now</span> <span m='4473670'>there's</span>
  <span m='4473910'>two</span> <span m='4474180'>bad</span> <span m='4474420'>rectangles.</span>
  <span m='4475440'>This</span> <span m='4475650'>one,</span> <span m='4476600'>I'm</span>
  <span m='4476670'>going</span> <span m='4476790'>to</span> <span m='4476850'>add</span>
  <span m='4477000'>a</span> <span m='4477060'>point</span> <span m='4477300'>here,</span>
  <span m='4478170'>and</span> <span m='4478290'>this</span> <span m='4478500'>one,</span>
  <span m='4479340'>I'm</span> <span m='4479530'>going</span> <span m='4479670'>to</span>
  <span m='4479730'>add</span> <span m='4479860'>a</span> <span m='4480060'>point</span>
  <span m='4480518'>here.</span> <span m='4484640'>Now</span> <span m='4484790'>we're</span>
  <span m='4484880'>good.</span> <span m='4486620'>And</span> <span m='4486920'>that</span>
  <span m='4487250'>should</span> <span m='4487520'>be</span> <span m='4488300'>what</span>
  <span m='4488450'>I</span> <span m='4488510'>did</span> <span m='4488780'>here.</span>
  <span m='4490130'>Yeah.</span> <span m='4492770'>So</span> <span m='4492890'>that's</span>
  <span m='4493070'>how</span> <span m='4493160'>I</span> <span m='4493220'>found</span>
  <span m='4493490'>that</span> <span m='4493670'>point</span> <span m='4493930'>set,</span>
  <span m='4494160'>and</span> <span m='4494270'>in</span> <span m='4494340'>general</span>
  <span m='4495200'>claim</span> <span m='4495530'>is</span> <span m='4495710'>this</span>
  <span m='4495890'>is</span> <span m='4496010'>a</span> <span m='4496070'>good</span>
  <span m='4496220'>algorithm.</span> <span m='4497540'>It</span> <span m='4497720'>seems,</span>
  <span m='4498530'>in</span> <span m='4498650'>fact,</span> <span m='4499100'>pretty</span>
  <span m='4499520'>obvious.</span> <span m='4501320'>There</span> <span m='4501440'>was</span>
  <span m='4501530'>a</span> <span m='4501590'>choice</span> <span m='4501950'>of</span>
  <span m='4502070'>course,</span> <span m='4502500'>we</span> <span m='4502580'>could</span>
  <span m='4502760'>satisfy</span> <span m='4504260'>this</span> <span m='4504440'>corner
  or</span> <span m='4504830'>this</span> <span m='4505010'>corner.</span> <span m='4505940'>Or</span>
  <span m='4506150'>some</span> <span m='4506600'>monotone</span> <span m='4507050'>path</span>
  <span m='4507320'>in</span> <span m='4507410'>between.</span> <span m='4509330'>But</span>
  <span m='4509570'>the</span> <span m='4509780'>claim</span> <span m='4510170'>would</span>
  <span m='4510290'>be</span> <span m='4510620'>that--</span> <span m='4515510'>doesn't</span>
  <span m='4515750'>make</span> <span m='4516260'>that</span> <span m='4516440'>big</span>
  <span m='4516620'>a</span> <span m='4516680'>difference.</span> <span m='4517460'>Doing</span>
  <span m='4517670'>things</span> <span m='4517850'>later</span> <span m='4518270'>is</span>
  <span m='4518390'>always</span> <span m='4518600'>better.</span> <span m='4518970'>It's</span>
  <span m='4519070'>kind</span> <span m='4519110'>of</span> <span m='4519170'>a</span>
  <span m='4519290'>lazy</span> <span m='4520130'>property.</span> <span m='4520550'>Or</span>
  <span m='4520730'>you</span> <span m='4520850'>could</span> <span m='4520970'>think</span>
  <span m='4521150'>of</span> <span m='4521240'>this--</span> </p><p><span m='4522770'>Originally</span>
  <span m='4523220'>actually</span> <span m='4523460'>this</span> <span m='4523640'>algorithm</span>
  <span m='4524030'>goes</span> <span m='4524210'>back</span> <span m='4524630'>in</span>
  <span m='4524810'>tree</span> <span m='4525050'>land.</span> <span m='4526160'>And</span>
  <span m='4526470'>in</span> <span m='4526640'>tree</span> <span m='4526880'>land,</span>
  <span m='4527420'>if</span> <span m='4527600'>you</span> <span m='4527810'>follow</span>
  <span m='4528230'>through</span> <span m='4528440'>this</span> <span m='4528710'>reduction,</span>
  <span m='4529200'>which</span> <span m='4529250'>we</span> <span m='4529340'>did,</span>
  <span m='4529670'>you</span> <span m='4529760'>know</span> <span m='4529850'>if</span>
  <span m='4529940'>you</span> <span m='4530030'>convert</span> <span m='4530390'>this</span>
  <span m='4530540'>into</span> <span m='4530750'>a</span> <span m='4530810'>treap,</span>
  <span m='4531860'>what</span> <span m='4532040'>this</span> <span m='4532220'>is</span>
  <span m='4532310'>saying</span> <span m='4532700'>is,</span> <span m='4533750'>look</span>
  <span m='4534030'>you</span> <span m='4534140'>search</span> <span m='4534410'>for</span>
  <span m='4534500'>an</span> <span m='4534590'>item,</span> <span m='4535220'>you</span>
  <span m='4535340'>follow</span> <span m='4535700'>a</span> <span m='4535760'>path.</span>
  <span m='4536510'>Take</span> <span m='4536750'>all</span> <span m='4537020'>the</span>
  <span m='4537110'>nodes</span> <span m='4537470'>on</span> <span m='4537590'>the</span>
  <span m='4537680'>path</span> <span m='4537950'>that</span> <span m='4538040'>you</span>
  <span m='4538130'>follow,</span> <span m='4539150'>rearrange</span> <span m='4539690'>them</span>
  <span m='4540050'>optimally</span> <span m='4540650'>for</span> <span m='4540890'>the</span>
  <span m='4540980'>future,</span> <span m='4541700'>build</span> <span m='4541910'>a</span>
  <span m='4541970'>heap</span> <span m='4542660'>based</span> <span m='4542960'>on</span>
  <span m='4543080'>the</span> <span m='4543140'>next</span> <span m='4543410'>access</span>
  <span m='4543740'>time,</span> <span m='4544090'>next</span> <span m='4544340'>touch</span>
  <span m='4544610'>time,</span> <span m='4545690'>whenever</span> <span m='4545990'>that</span>
  <span m='4546140'>happens</span> <span m='4546440'>to</span> <span m='4546530'>be.</span>
  <span m='4548270'>Next</span> <span m='4548630'>access</span> <span m='4549020'>time</span>
  <span m='4549320'>actually,</span> <span m='4550410'>in</span> <span m='4550490'>that</span>
  <span m='4550580'>case.</span> <span m='4551060'>That</span> <span m='4551210'>is</span>
  <span m='4551330'>equivalent</span> <span m='4551810'>to</span> <span m='4551930'>this</span>
  <span m='4552110'>algorithm.</span> </p><p><span m='4555200'>That</span> <span m='4555350'>seems</span>
  <span m='4555680'>like</span> <span m='4556040'>the</span> <span m='4556340'>right</span>
  <span m='4556550'>thing</span> <span m='4556730'>to</span> <span m='4556850'>do</span>
  <span m='4557010'>offline.</span> <span m='4557810'>You</span> <span m='4557900'>visit</span>
  <span m='4558170'>your</span> <span m='4558320'>item,</span> <span m='4558620'>you</span>
  <span m='4558710'>do</span> <span m='4558800'>the</span> <span m='4558920'>minimum</span>
  <span m='4559350'>amount</span> <span m='4559520'>you</span> <span m='4559580'>have</span>
  <span m='4559670'>to</span> <span m='4559760'>do,</span> <span m='4560040'>which</span>
  <span m='4560090'>is</span> <span m='4560210'>following</span> <span m='4560600'>the</span>
  <span m='4560690'>search</span> <span m='4560930'>path.</span> <span m='4561680'>You</span>
  <span m='4561830'>rearrange</span> <span m='4562280'>those</span> <span m='4562460'>items</span>
  <span m='4562730'>to</span> <span m='4562850'>be</span> <span m='4563030'>optimal</span>
  <span m='4563480'>for</span> <span m='4563630'>the</span> <span m='4563720'>future.</span>
  <span m='4564590'>It's</span> <span m='4564690'>an</span> <span m='4564790'>offline</span>
  <span m='4565090'>algorithm,</span> <span m='4565520'>seems</span> <span m='4565790'>like</span>
  <span m='4565940'>a</span> <span m='4566000'>really</span> <span m='4566210'>good</span>
  <span m='4566360'>one.</span> <span m='4567020'>The</span> <span m='4567200'>only</span>
  <span m='4567590'>thing</span> <span m='4567800'>it's</span> <span m='4567950'>missing</span>
  <span m='4568280'>out</span> <span m='4568460'>on</span> <span m='4568610'>is</span>
  <span m='4568730'>maybe</span> <span m='4569030'>you</span> <span m='4569150'>should</span>
  <span m='4569300'>go</span> <span m='4569630'>off</span> <span m='4569960'>the</span>
  <span m='4570050'>path</span> <span m='4570920'>and</span> <span m='4571040'>bring</span>
  <span m='4571280'>other</span> <span m='4571460'>guys</span> <span m='4571730'>closer</span>
  <span m='4572060'>to</span> <span m='4572180'>the</span> <span m='4572270'>root.</span>
  <span m='4574010'>But</span> <span m='4574160'>if</span> <span m='4574280'>you</span>
  <span m='4574370'>believe,</span> <span m='4575090'>which</span> <span m='4575390'>we</span>
  <span m='4575480'>don't</span> <span m='4575630'>know</span> <span m='4575720'>how</span>
  <span m='4575810'>to</span> <span m='4575900'>prove,</span> <span m='4576170'>if</span>
  <span m='4576290'>you</span> <span m='4576380'>believe</span> <span m='4576740'>that</span>
  <span m='4576860'>there's</span> <span m='4577070'>no--</span> <span m='4577490'>it</span>
  <span m='4577610'>doesn't</span> <span m='4577880'>really</span> <span m='4578390'>buy</span>
  <span m='4578660'>you</span> <span m='4578750'>anything</span> <span m='4579140'>to</span>
  <span m='4579260'>go</span> <span m='4579380'>off</span> <span m='4579500'>the</span>
  <span m='4579590'>path</span> <span m='4579830'>now,</span> <span m='4580130'>you</span>
  <span m='4580220'>can</span> <span m='4580370'>always</span> <span m='4580550'>do</span>
  <span m='4580670'>it</span> <span m='4580730'>later,</span> <span m='4582290'>then</span>
  <span m='4582500'>this</span> <span m='4582950'>algorithm</span> <span m='4583310'>is</span>
  <span m='4583430'>optimal</span> <span m='4584140'>offline.</span> </p><p><span
  m='4586500'>And</span> <span m='4586550'>in</span> <span m='4586610'>terms</span>
  <span m='4586790'>of</span> <span m='4586850'>the</span> <span m='4586940'>point</span>
  <span m='4587230'>set</span> <span m='4587420'>it's--</span> <span m='4588110'>in</span>
  <span m='4588200'>the</span> <span m='4588290'>point</span> <span m='4588600'>set
  of</span> <span m='4588710'>view</span> <span m='4588950'>it's</span> <span m='4589100'>kind</span>
  <span m='4589340'>of</span> <span m='4589430'>nice</span> <span m='4589610'>because</span>
  <span m='4589820'>it</span> <span m='4589910'>almost</span> <span m='4590240'>looks</span>
  <span m='4590600'>online,</span> <span m='4591140'>right.</span> <span m='4591360'>You</span>
  <span m='4591500'>only</span> <span m='4591710'>have</span> <span m='4591800'>to</span>
  <span m='4591890'>look</span> <span m='4592130'>at</span> <span m='4592220'>each</span>
  <span m='4592370'>time</span> <span m='4593510'>and</span> <span m='4593690'>add</span>
  <span m='4593930'>the</span> <span m='4594020'>points</span> <span m='4594350'>at</span>
  <span m='4594560'>that</span> <span m='4594770'>time</span> <span m='4595250'>that</span>
  <span m='4595400'>are</span> <span m='4595940'>useful,</span> <span m='4597080'>in</span>
  <span m='4597140'>terms</span> <span m='4597320'>of</span> <span m='4597380'>the</span>
  <span m='4597470'>past.</span> <span m='4598490'>You</span> <span m='4598580'>only</span>
  <span m='4598760'>had</span> <span m='4598850'>to</span> <span m='4598940'>satisfy</span>
  <span m='4599330'>the</span> <span m='4599420'>rectangles</span> <span m='4599840'>of</span>
  <span m='4599900'>the</span> <span m='4599990'>past.</span> <span m='4601640'>So</span>
  <span m='4601790'>this</span> <span m='4602060'>is</span> <span m='4602150'>where</span>
  <span m='4602300'>things</span> <span m='4602510'>get</span> <span m='4602660'>interesting,</span>
  <span m='4603110'>because</span> <span m='4603590'>in</span> <span m='4603710'>terms</span>
  <span m='4603920'>of</span> <span m='4604040'>a tree</span> <span m='4604130'>view,</span>
  <span m='4604700'>with</span> <span m='4604820'>this</span> <span m='4604970'>transformation,</span>
  <span m='4606100'>this</span> <span m='4606950'>looks</span> <span m='4607130'>like</span>
  <span m='4607340'>an</span> <span m='4607430'>offline</span> <span m='4607850'>tree</span>
  <span m='4608390'>because</span> <span m='4608750'>it</span> <span m='4608810'>needs</span>
  <span m='4609020'>to</span> <span m='4609110'>know</span> <span m='4609260'>the</span>
  <span m='4609380'>future.</span> <span m='4609890'>And</span> <span m='4609980'>it</span>
  <span m='4610070'>does</span> <span m='4610370'>if</span> <span m='4610460'>you</span>
  <span m='4610550'>want</span> <span m='4610700'>to</span> <span m='4610760'>build</span>
  <span m='4610940'>a</span> <span m='4610990'>heap.</span> <span m='4612270'>OK,</span>
  <span m='4612740'>but</span> <span m='4612980'>if</span> <span m='4613160'>you</span>
  <span m='4613280'>look</span> <span m='4613490'>at</span> <span m='4613610'>in</span>
  <span m='4613710'>the</span> <span m='4613820'>geometric</span> <span m='4614360'>view,</span>
  <span m='4614810'>suddenly</span> <span m='4615230'>it</span> <span m='4615320'>looks</span>
  <span m='4615530'>online,</span> <span m='4616040'>because</span> <span m='4616310'>you're</span>
  <span m='4616430'>only</span> <span m='4616640'>looking</span> <span m='4616970'>at</span>
  <span m='4617090'>the</span> <span m='4617210'>points</span> <span m='4617510'>and</span>
  <span m='4617600'>all</span> <span m='4617690'>the</span> <span m='4617780'>points</span>
  <span m='4618020'>you've</span> <span m='4618140'>accessed</span> <span m='4618500'>in</span>
  <span m='4618590'>the</span> <span m='4618680'>past.</span> </p><p><span m='4619940'>So,</span>
  <span m='4620150'>in</span> <span m='4620270'>fact,</span> <span m='4621800'>there's</span>
  <span m='4622040'>a</span> <span m='4622100'>way</span> <span m='4623150'>to</span>
  <span m='4623240'>make</span> <span m='4623420'>this</span> <span m='4623600'>online.</span>
  <span m='4628550'>This</span> <span m='4628730'>is</span> <span m='4628850'>where</span>
  <span m='4629000'>things</span> <span m='4629300'>get</span> <span m='4629510'>interesting.</span>
  <span m='4631410'>There</span> <span m='4631590'>is</span> <span m='4631730'>a</span>
  <span m='4631790'>transformation</span> <span m='4632480'>that</span> <span m='4632570'>if</span>
  <span m='4632750'>you</span> <span m='4632870'>have</span> <span m='4633020'>an</span>
  <span m='4633170'>online</span> <span m='4634700'>satisfying</span> <span m='4635840'>point</span>
  <span m='4636060'>set,</span> <span m='4636710'>meaning</span> <span m='4636980'>you</span>
  <span m='4637100'>can</span> <span m='4637250'>decide</span> <span m='4637640'>what</span>
  <span m='4637820'>points</span> <span m='4638060'>to</span> <span m='4638150'>add</span>
  <span m='4638390'>based</span> <span m='4638630'>only</span> <span m='4638870'>on</span>
  <span m='4638960'>the</span> <span m='4639050'>past,</span> <span m='4639410'>not</span>
  <span m='4639590'>on</span> <span m='4639680'>the</span> <span m='4639770'>future.</span>
  <span m='4641480'>So it's a</span> <span m='4641740'>fancier</span> <span m='4642200'>version</span>
  <span m='4642500'>of</span> <span m='4642590'>this</span> <span m='4642710'>transformation,</span>
  <span m='4643770'>you</span> <span m='4643820'>get</span> <span m='4644030'>an</span>
  <span m='4644120'>actual</span> <span m='4644750'>online</span> <span m='4645350'>binary</span>
  <span m='4645710'>search</span> <span m='4645980'>tree.</span> </p><p><span m='4647460'>So,</span>
  <span m='4648250'>this</span> <span m='4648620'>algorithm</span> <span m='4649040'>goes</span>
  <span m='4649250'>back</span> <span m='4649490'>to</span> <span m='4650180'>the</span>
  <span m='4650240'>'90s</span> <span m='4650525'>I</span> <span m='4650810'>think.</span>
  <span m='4653510'>Actually</span> <span m='4653930'>'88,</span> <span m='4654500'>it's</span>
  <span m='4654720'>in</span> <span m='4654820'>a</span> <span m='4654890'>thesis</span>
  <span m='4655430'>1988</span> <span m='4656160'>as</span> <span m='4656300'>rediscovered</span>
  <span m='4657440'>by</span> <span m='4657780'>my</span> <span m='4657920'>PhD</span>
  <span m='4658280'>adviser</span> <span m='4659510'>in</span> <span m='4659630'>2000.</span>
  <span m='4662630'>It's</span> <span m='4663110'>totally</span> <span m='4663680'>natural</span>
  <span m='4664040'>algorithm,</span> <span m='4665270'>but</span> <span m='4665450'>they</span>
  <span m='4665630'>thought</span> <span m='4665870'>it</span> <span m='4665930'>was</span>
  <span m='4666050'>an</span> <span m='4666140'>offline</span> <span m='4666500'>algorithm.</span>
  <span m='4666920'>With</span> <span m='4667100'>this</span> <span m='4667340'>view,</span>
  <span m='4667610'>it's</span> <span m='4667760'>an</span> <span m='4667880'>online</span>
  <span m='4668270'>algorithm.</span> <span m='4669260'>Let</span> <span m='4669380'>me</span>
  <span m='4669500'>quickly</span> <span m='4670340'>convince</span> <span m='4670760'>you,</span>
  <span m='4671090'>or</span> <span m='4671220'>sketch</span> <span m='4671630'>to</span>
  <span m='4671750'>you,</span> <span m='4671930'>how</span> <span m='4672200'>we</span>
  <span m='4672320'>make</span> <span m='4672530'>this</span> <span m='4672740'>online.</span>
  </p><p><span m='4674450'>So</span> <span m='4674570'>we</span> <span m='4674660'>do</span>
  <span m='4674810'>the</span> <span m='4674900'>same</span> <span m='4675200'>thing,</span>
  <span m='4677850'>except</span> <span m='4678050'>we</span> <span m='4678140'>don't</span>
  <span m='4678350'>know</span> <span m='4678470'>how</span> <span m='4678560'>to</span>
  <span m='4678620'>heapify,</span> <span m='4681740'>because</span> <span m='4681950'>we</span>
  <span m='4682040'>don't</span> <span m='4682220'>know</span> <span m='4682460'>the</span>
  <span m='4682550'>next</span> <span m='4682790'>access</span> <span m='4683150'>times.</span>
  <span m='4683480'>But</span> <span m='4683660'>we</span> <span m='4683750'>know</span>
  <span m='4683930'>whatever</span> <span m='4684260'>we</span> <span m='4684410'>touch,</span>
  <span m='4684800'>it's some</span> <span m='4685250'>connected</span> <span m='4685640'>subtree</span>
  <span m='4685940'>of</span> <span m='4686000'>the</span> <span m='4686060'>root.</span>
  <span m='4686990'>We</span> <span m='4687110'>know</span> <span m='4687320'>what</span>
  <span m='4687440'>we</span> <span m='4687620'>touch.</span> <span m='4688040'>We</span>
  <span m='4688160'>touch</span> <span m='4688430'>whatever</span> <span m='4688690'>greedy</span>
  <span m='4688970'>tells</span> <span m='4689210'>us</span> <span m='4689330'>to</span>
  <span m='4689450'>touch.</span> <span m='4690230'>We'll</span> <span m='4690540'>touch</span>
  <span m='4690840'>all</span> <span m='4690950'>these</span> <span m='4691130'>guys,</span>
  <span m='4691460'>whatever.</span> </p><p><span m='4692840'>How</span> <span m='4693020'>do</span>
  <span m='4693110'>we</span> <span m='4693230'>rearrange</span> <span m='4693650'>them?</span>
  <span m='4693740'>We</span> <span m='4693830'>don't</span> <span m='4694040'>rearrange</span>
  <span m='4694430'>them.</span> <span m='4695090'>We</span> <span m='4695210'>store</span>
  <span m='4695480'>them</span> <span m='4695660'>into</span> <span m='4695960'>something</span>
  <span m='4696290'>called</span> <span m='4696620'>a</span> <span m='4697610'>split</span>
  <span m='4697940'>tree.</span> <span m='4701090'>Split</span> <span m='4701360'>tree</span>
  <span m='4701570'>has</span> <span m='4701730'>the</span> <span m='4701810'>feature,</span>
  <span m='4702360'>it's</span> <span m='4702380'>a</span> <span m='4702470'>tree.</span>
  <span m='4703340'>Binary</span> <span m='4703490'>search</span> <span m='4703730'>tree,</span>
  <span m='4704360'>and</span> <span m='4704480'>if</span> <span m='4704570'>you</span>
  <span m='4704660'>ask</span> <span m='4704940'>for</span> <span m='4705080'>some</span>
  <span m='4705320'>item</span> <span m='4705660'>x,</span> <span m='4707930'>you</span>
  <span m='4708170'>can</span> <span m='4708740'>move</span> <span m='4709130'>x</span>
  <span m='4709430'>to</span> <span m='4709550'>the</span> <span m='4709670'>root.</span>
  <span m='4711230'>So</span> <span m='4711410'>then</span> <span m='4711650'>you</span>
  <span m='4711800'>have</span> <span m='4712190'>a</span> <span m='4712250'>left</span>
  <span m='4712470'>subtree</span> <span m='4712880'>of</span> <span m='4712970'>x,</span>
  <span m='4713750'>right</span> <span m='4713930'>subtree</span> <span m='4714260'>of</span>
  <span m='4714350'>x,</span> <span m='4714830'>and</span> <span m='4714950'>then</span>
  <span m='4715100'>delete</span> <span m='4715460'>x,</span> <span m='4717410'>and</span>
  <span m='4717530'>now</span> <span m='4717680'>you're</span> <span m='4717830'>left</span>
  <span m='4718070'>with</span> <span m='4718580'>things</span> <span m='4718970'>that</span>
  <span m='4719090'>are</span> <span m='4719150'>less</span> <span m='4719330'>than</span>
  <span m='4719480'>x,</span> <span m='4720260'>and</span> <span m='4720410'>things</span>
  <span m='4720680'>that</span> <span m='4720800'>are</span> <span m='4721160'>greater</span>
  <span m='4721400'>than</span> <span m='4721520'>x.</span> <span m='4722170'>Things</span>
  <span m='4722430'>are</span> <span m='4722550'>greater</span> <span m='4722930'>than</span>
  <span m='4723230'>x.</span> <span m='4724550'>And</span> <span m='4724670'>you</span>
  <span m='4724790'>can</span> <span m='4724880'>do</span> <span m='4725000'>all</span>
  <span m='4725150'>this</span> <span m='4725480'>in</span> <span m='4725690'>constant</span>
  <span m='4726380'>amortize</span> <span m='4726950'>time.</span> </p><p><span m='4731030'>This</span>
  <span m='4731270'>is</span> <span m='4731390'>what</span> <span m='4731600'>we</span>
  <span m='4731780'>need,</span> <span m='4732560'>if</span> <span m='4732680'>you</span>
  <span m='4732770'>think</span> <span m='4732950'>about</span> <span m='4733310'>here.</span>
  <span m='4733610'>I'm</span> <span m='4733700'>going</span> <span m='4733820'>to</span>
  <span m='4733880'>take</span> <span m='4734180'>all</span> <span m='4734270'>these</span>
  <span m='4734450'>items</span> <span m='4735230'>that</span> <span m='4735350'>were</span>
  <span m='4735470'>touched,</span> <span m='4736460'>throw</span> <span m='4736910'>them</span>
  <span m='4737060'>into</span> <span m='4737270'>a</span> <span m='4737330'>split</span>
  <span m='4737630'>tree.</span> <span m='4739280'>My</span> <span m='4739520'>resulting</span>
  <span m='4739940'>structure</span> <span m='4740330'>will</span> <span m='4740450'>be</span>
  <span m='4740690'>a</span> <span m='4740840'>tree</span> <span m='4741260'>of</span>
  <span m='4741350'>split</span> <span m='4741680'>trees.</span> <span m='4742430'>So</span>
  <span m='4742550'>think</span> <span m='4742790'>of</span> <span m='4742880'>it</span>
  <span m='4743000'>as,</span> <span m='4743720'>when</span> <span m='4743840'>I</span>
  <span m='4743900'>touch</span> <span m='4744140'>all</span> <span m='4744240'>these</span>
  <span m='4744410'>items</span> <span m='4745460'>I</span> <span m='4745520'>just</span>
  <span m='4745670'>sort</span> <span m='4745880'>of</span> <span m='4746030'>throw</span>
  <span m='4746330'>them</span> <span m='4746480'>all</span> <span m='4746600'>in</span>
  <span m='4746690'>the</span> <span m='4746850'>root,</span> <span m='4747200'>but</span>
  <span m='4747410'>that</span> <span m='4747590'>root</span> <span m='4747830'>is</span>
  <span m='4747920'>represented</span> <span m='4748430'>by</span> <span m='4748580'>a</span>
  <span m='4748610'>split</span> <span m='4748880'>tree.</span> <span m='4749540'>And</span>
  <span m='4749660'>then</span> <span m='4749810'>hanging</span> <span m='4750140'>off</span>
  <span m='4750350'>here,</span> <span m='4750710'>there</span> <span m='4750740'>are</span>
  <span m='4750800'>other</span> <span m='4751040'>split</span> <span m='4751340'>trees</span>
  <span m='4751970'>which</span> <span m='4752180'>may</span> <span m='4752300'>have</span>
  <span m='4752570'>several</span> <span m='4753710'>keys</span> <span m='4754070'>in</span>
  <span m='4754190'>them.</span> </p><p><span m='4756290'>When</span> <span m='4756470'>I</span>
  <span m='4756590'>do,</span> <span m='4757050'>when</span> <span m='4757220'>I</span>
  <span m='4757520'>now</span> <span m='4757790'>touch</span> <span m='4758090'>a</span>
  <span m='4758180'>node,</span> <span m='4759350'>you</span> <span m='4759470'>can</span>
  <span m='4759590'>show</span> <span m='4759800'>that</span> <span m='4759950'>if</span>
  <span m='4760350'>I'm</span> <span m='4760580'>trying</span> <span m='4760760'>to</span>
  <span m='4760850'>touch</span> <span m='4761060'>some</span> <span m='4761240'>node</span>
  <span m='4761450'>here,</span> <span m='4762170'>I</span> <span m='4762260'>can't</span>
  <span m='4762470'>just</span> <span m='4762830'>magically</span> <span m='4763310'>touch</span>
  <span m='4763640'>a node</span> <span m='4763710'>here.</span> <span m='4763880'>I've</span>
  <span m='4763970'>got</span> <span m='4764150'>to,</span> <span m='4764350'>I</span>
  <span m='4764440'>had</span> <span m='4764630'>to</span> <span m='4764720'>have</span>
  <span m='4764810'>followed</span> <span m='4765670'>in</span> <span m='4765800'>the</span>
  <span m='4766070'>actual</span> <span m='4766490'>tree,</span> <span m='4766970'>whatever</span>
  <span m='4767300'>the</span> <span m='4767390'>optimal</span> <span m='4767750'>tree</span>
  <span m='4767990'>is,</span> <span m='4768170'>I</span> <span m='4768260'>had</span>
  <span m='4768440'>to</span> <span m='4768590'>follow</span> <span m='4768980'>some</span>
  <span m='4769280'>route</span> <span m='4769430'>to</span> <span m='4769520'>leave</span>
  <span m='4769730'>path.</span> <span m='4770760'>So</span> <span m='4770780'>in</span>
  <span m='4770870'>fact,</span> <span m='4771240'>the</span> <span m='4771260'>predecessor</span>
  <span m='4771860'>and</span> <span m='4771980'>successor</span> <span m='4772430'>here</span>
  <span m='4772640'>had</span> <span m='4772910'>to</span> <span m='4773060'>have</span>
  <span m='4773150'>been</span> <span m='4773330'>touched</span> <span m='4774260'>before</span>
  <span m='4775250'>I</span> <span m='4775340'>touched</span> <span m='4775580'>this</span>
  <span m='4775760'>one.</span> <span m='4776390'>Which</span> <span m='4776570'>means</span>
  <span m='4776780'>I'm</span> <span m='4776850'>going</span> <span m='4776960'>to</span>
  <span m='4777050'>split</span> <span m='4777530'>those</span> <span m='4777780'>nodes.</span>
  </p><p><span m='4780280'>So,</span> <span m='4781890'>when</span> <span m='4782160'>I</span>
  <span m='4782250'>actually--</span> <span m='4782650'>this</span> <span m='4782690'>is</span>
  <span m='4782820'>basically</span> <span m='4783180'>lazy</span> <span m='4783510'>evaluation.</span>
  <span m='4784200'>When</span> <span m='4784350'>I</span> <span m='4784440'>actually</span>
  <span m='4784920'>access</span> <span m='4785310'>something</span> <span m='4785670'>in</span>
  <span m='4785760'>here,</span> <span m='4786780'>that</span> <span m='4786960'>means</span>
  <span m='4787260'>I</span> <span m='4787380'>want</span> <span m='4787590'>to</span>
  <span m='4787650'>pull</span> <span m='4787890'>it</span> <span m='4787980'>to</span>
  <span m='4788130'>the</span> <span m='4788220'>root.</span> <span m='4788550'>I</span>
  <span m='4788670'>wanted</span> <span m='4788970'>to</span> <span m='4789090'>pretend</span>
  <span m='4789510'>that</span> <span m='4789630'>it</span> <span m='4789690'>was</span>
  <span m='4789840'>at</span> <span m='4789990'>the</span> <span m='4790080'>root,</span>
  <span m='4791310'>that's</span> <span m='4791520'>what</span> <span m='4792000'>the</span>
  <span m='4792120'>treap</span> <span m='4792420'>would</span> <span m='4792540'>have</span>
  <span m='4792630'>done.</span> <span m='4793860'>So</span> <span m='4794040'>basically</span>
  <span m='4794370'>pull</span> <span m='4794580'>it</span> <span m='4794670'>up,</span>
  <span m='4794850'>be</span> <span m='4795000'>a</span> <span m='4795090'>root,</span>
  <span m='4795720'>split,</span> <span m='4796620'>because</span> <span m='4796920'>now</span>
  <span m='4798060'>there's</span> <span m='4798240'>two</span> <span m='4798420'>structures</span>
  <span m='4798840'>left</span> <span m='4799020'>where</span> <span m='4799170'>I</span>
  <span m='4799230'>don't</span> <span m='4799410'>know</span> <span m='4799560'>their</span>
  <span m='4799710'>orders,</span> <span m='4800640'>but</span> <span m='4800790'>I</span>
  <span m='4800850'>know</span> <span m='4801060'>that</span> <span m='4801270'>this</span>
  <span m='4801600'>item</span> <span m='4801960'>was</span> <span m='4802110'>first.</span>
  <span m='4803880'>And</span> <span m='4804000'>so</span> <span m='4804150'>I</span>
  <span m='4804270'>end</span> <span m='4804480'>up</span> <span m='4804690'>with--</span>
  <span m='4805520'>I</span> <span m='4805590'>don't</span> <span m='4805710'>actually</span>
  <span m='4806070'>remove</span> <span m='4806370'>it,</span> <span m='4806490'>but</span>
  <span m='4806640'>I</span> <span m='4806700'>remove</span> <span m='4806940'>it</span>
  <span m='4807060'>from</span> <span m='4807840'>the</span> <span m='4807930'>split</span>
  <span m='4808170'>trees,</span> <span m='4808830'>so</span> <span m='4808920'>I</span>
  <span m='4808980'>make</span> <span m='4809160'>it</span> <span m='4809250'>look</span>
  <span m='4809400'>like</span> <span m='4809580'>this.</span> <span m='4811570'>And</span>
  <span m='4811930'>here's</span> <span m='4812130'>the</span> <span m='4812220'>guy</span>
  <span m='4812460'>where</span> <span m='4812640'>I</span> <span m='4812700'>wanted</span>
  <span m='4812910'>to</span> <span m='4813000'>access</span> <span m='4813430'>something.</span>
  </p><p><span m='4814790'>So,</span> <span m='4814920'>I</span> <span m='4814980'>split</span>
  <span m='4815250'>this</span> <span m='4815400'>root</span> <span m='4815670'>into</span>
  <span m='4815910'>two</span> <span m='4816090'>split</span> <span m='4816360'>trees,</span>
  <span m='4817250'>and</span> <span m='4817380'>I</span> <span m='4817440'>have</span>
  <span m='4817620'>an</span> <span m='4817710'>individual</span> <span m='4818220'>node</span>
  <span m='4818460'>up</span> <span m='4818640'>here.</span> <span m='4819900'>If</span>
  <span m='4820050'>I</span> <span m='4820140'>can</span> <span m='4820290'>do</span>
  <span m='4820380'>this</span> <span m='4820560'>in</span> <span m='4820650'>constant</span>
  <span m='4821040'>amortize</span> <span m='4821430'>time,</span> <span m='4821730'>it's</span>
  <span m='4821870'>as</span> <span m='4822060'>if</span> <span m='4822210'>this</span>
  <span m='4822360'>node</span> <span m='4822570'>was</span> <span m='4822750'>at</span>
  <span m='4822870'>the</span> <span m='4822960'>root</span> <span m='4823110'>in</span>
  <span m='4823200'>the</span> <span m='4823290'>first</span> <span m='4823500'>place.</span>
  <span m='4824140'>And</span> <span m='4824160'>so</span> <span m='4824280'>I</span>
  <span m='4824340'>simulate</span> <span m='4825510'>this</span> <span m='4825660'>perfect</span>
  <span m='4826020'>treap</span> <span m='4826310'>order,</span> <span m='4826970'>but</span>
  <span m='4827160'>using</span> <span m='4827550'>a</span> <span m='4827640'>data</span>
  <span m='4827880'>structure,</span> <span m='4829020'>split</span> <span m='4829290'>trees,</span>
  <span m='4829530'>which</span> <span m='4829710'>can</span> <span m='4829860'>actually</span>
  <span m='4830190'>be</span> <span m='4830310'>solved.</span> <span m='4831630'>How</span>
  <span m='4831780'>do</span> <span m='4831840'>you</span> <span m='4831900'>solve</span>
  <span m='4832110'>split</span> <span m='4832320'>trees?</span> <span m='4832830'>You</span>
  <span m='4832980'>just</span> <span m='4833130'>do</span> <span m='4833250'>the</span>
  <span m='4833400'>obvious</span> <span m='4833670'>thing,</span> <span m='4835560'>more</span>
  <span m='4835710'>or</span> <span m='4835740'>less.</span> <span m='4837110'>Ideas,</span>
  <span m='4837930'>you</span> <span m='4838110'>know</span> <span m='4838470'>red</span>
  <span m='4838680'>black</span> <span m='4838950'>trees,</span> <span m='4839310'>take</span>
  <span m='4839610'>your</span> <span m='4839700'>favorite</span> <span m='4840230'>balanced</span>
  <span m='4840520'>binary</span> <span m='4840850'>search</span> <span m='4841040'>tree,</span>
  <span m='4841470'>red</span> <span m='4841650'>black</span> <span m='4841830'>trees</span>
  <span m='4842640'>work</span> <span m='4842880'>fine.</span> </p><p><span m='4845620'>If</span>
  <span m='4845700'>you're</span> <span m='4845820'>given</span> <span m='4846180'>a</span>
  <span m='4846240'>node,</span> <span m='4847080'>you</span> <span m='4847200'>can</span>
  <span m='4847320'>split</span> <span m='4847650'>there.</span> <span m='4848160'>You</span>
  <span m='4848280'>basically</span> <span m='4848760'>just</span> <span m='4849090'>carve</span>
  <span m='4849510'>it</span> <span m='4850560'>in</span> <span m='4850650'>half.</span>
  <span m='4851670'>How</span> <span m='4851850'>much</span> <span m='4852030'>does</span>
  <span m='4852180'>it</span> <span m='4852240'>cost</span> <span m='4852570'>to</span>
  <span m='4852660'>split?</span> <span m='4853170'>Well</span> <span m='4853260'>if</span>
  <span m='4853410'>you're</span> <span m='4853530'>a</span> <span m='4853560'>little</span>
  <span m='4853830'>bit</span> <span m='4854040'>clever,</span> <span m='4855210'>let
  me</span> <span m='4855350'>go</span> <span m='4855540'>to</span> <span m='4856500'>a</span>
  <span m='4856590'>board</span> <span m='4856800'>of</span> <span m='4856890'>cleverness.</span>
  <span m='4860510'>The</span> <span m='4860600'>one</span> <span m='4860750'>thing</span>
  <span m='4860930'>we</span> <span m='4861020'>have</span> <span m='4861110'>to</span>
  <span m='4861170'>optimize</span> <span m='4861650'>for</span> <span m='4861800'>is,</span>
  <span m='4861890'>what</span> <span m='4862100'>if</span> <span m='4862220'>you're</span>
  <span m='4862370'>splitting</span> <span m='4862790'>like</span> <span m='4862970'>right</span>
  <span m='4863270'>here,</span> <span m='4864140'>very</span> <span m='4864320'>close</span>
  <span m='4864560'>to</span> <span m='4864680'>the</span> <span m='4864770'>left?</span>
  <span m='4865760'>If</span> <span m='4865850'>you're</span> <span m='4865970'>clever,</span>
  <span m='4866330'>you'll</span> <span m='4866840'>search</span> <span m='4867080'>from</span>
  <span m='4867290'>here,</span> <span m='4868580'>and</span> <span m='4868810'>cut</span>
  <span m='4869040'>off</span> <span m='4869270'>this</span> <span m='4869450'>part</span>
  <span m='4869750'>in</span> <span m='4869900'>time</span> <span m='4870200'>basically</span>
  <span m='4870590'>proportional</span> <span m='4871040'>to</span> <span m='4871160'>the</span>
  <span m='4871250'>height</span> <span m='4871460'>of</span> <span m='4871550'>that</span>
  <span m='4871700'>tree.</span> <span m='4873190'>OK,</span> <span m='4873620'>you</span>
  <span m='4873740'>might</span> <span m='4873950'>get</span> <span m='4874100'>some</span>
  <span m='4874250'>propagation</span> <span m='4874790'>up</span> <span m='4874910'>here,</span>
  <span m='4875180'>but</span> <span m='4875420'>that's</span> <span m='4875700'>very</span>
  <span m='4875900'>small</span> <span m='4876230'>amortized.</span> </p><p><span
  m='4877800'>OK,</span> <span m='4878150'>on</span> <span m='4878270'>the</span>
  <span m='4878360'>other</span> <span m='4878540'>hand,</span> <span m='4878790'>if</span>
  <span m='4878810'>you</span> <span m='4878960'>search</span> <span m='4879260'>over</span>
  <span m='4879440'>here,</span> <span m='4879680'>you'd</span> <span m='4879860'>like</span>
  <span m='4880070'>to</span> <span m='4880220'>spend</span> <span m='4880610'>only</span>
  <span m='4880850'>time</span> <span m='4881150'>proportional</span> <span m='4881660'>to</span>
  <span m='4881750'>this.</span> <span m='4882600'>So</span> <span m='4882620'>in</span>
  <span m='4882710'>general,</span> <span m='4885240'>if</span> <span m='4885320'>you</span>
  <span m='4885380'>just</span> <span m='4885530'>search</span> <span m='4885800'>in</span>
  <span m='4885890'>parallel</span> <span m='4886370'>here,</span> <span m='4887060'>you</span>
  <span m='4887210'>can</span> <span m='4887330'>split</span> <span m='4888470'>in--</span>
  <span m='4889570'>let's</span> <span m='4889730'>say</span> <span m='4889970'>this</span>
  <span m='4890180'>has</span> <span m='4890360'>size</span> <span m='4891200'>n</span>
  <span m='4891520'>one,</span> <span m='4892730'>and</span> <span m='4892850'>the</span>
  <span m='4892940'>rest</span> <span m='4893120'>has</span> <span m='4893210'>size</span>
  <span m='4893480'>n</span> <span m='4893630'>two.</span> <span m='4894410'>You</span>
  <span m='4894530'>can</span> <span m='4894650'>split</span> <span m='4894980'>in</span>
  <span m='4895130'>order</span> <span m='4895430'>log</span> <span m='4896660'>the</span>
  <span m='4897020'>min</span> <span m='4898730'>of</span> <span m='4898880'>n</span>
  <span m='4899030'>one and</span> <span m='4899120'>n</span> <span m='4899240'>two.</span>
  <span m='4901710'>And</span> <span m='4902210'>you</span> <span m='4902390'>can</span>
  <span m='4902540'>show</span> <span m='4902750'>that</span> <span m='4902870'>if</span>
  <span m='4902990'>you</span> <span m='4903080'>just--</span> <span m='4903390'>that's</span>
  <span m='4903640'>straightforward</span> <span m='4904220'>splitting,</span> <span
  m='4904580'>that's</span> <span m='4904730'>really</span> <span m='4904940'>easy</span>
  <span m='4905180'>to</span> <span m='4905300'>do.</span> </p><p><span m='4906210'>You</span>
  <span m='4906310'>can</span> <span m='4906410'>show</span> <span m='4906500'>that</span>
  <span m='4906650'>that</span> <span m='4906830'>implies</span> <span m='4907190'>constant</span>
  <span m='4907580'>amortized,</span> <span m='4908930'>because</span> <span m='4909560'>either</span>
  <span m='4909800'>you're</span> <span m='4910130'>cutting</span> <span m='4910370'>off</span>
  <span m='4910520'>a</span> <span m='4910580'>very</span> <span m='4910790'>little</span>
  <span m='4911000'>nibble</span> <span m='4911330'>and</span> <span m='4911420'>the</span>
  <span m='4911510'>cost</span> <span m='4911810'>is</span> <span m='4911870'>small,</span>
  <span m='4912680'>or</span> <span m='4912800'>you're</span> <span m='4912890'>cutting</span>
  <span m='4913130'>things</span> <span m='4913310'>more</span> <span m='4913460'>or</span>
  <span m='4913490'>less</span> <span m='4913640'>in</span> <span m='4913760'>half,</span>
  <span m='4914120'>but</span> <span m='4914210'>that</span> <span m='4914540'>can't</span>
  <span m='4914750'>happen</span> <span m='4915050'>very</span> <span m='4915230'>much.</span>
  <span m='4915650'>Then</span> <span m='4915770'>you</span> <span m='4915860'>charge</span>
  <span m='4916250'>to</span> <span m='4916340'>the</span> <span m='4916430'>fact</span>
  <span m='4916640'>that</span> <span m='4916790'>log</span> <span m='4917350'>n</span>
  <span m='4917480'>is</span> <span m='4917600'>going</span> <span m='4917840'>down</span>
  <span m='4918050'>by</span> <span m='4918200'>one,</span> <span m='4919130'>and</span>
  <span m='4919550'>overall</span> <span m='4919940'>you</span> <span m='4920030'>get</span>
  <span m='4920210'>a</span> <span m='4920240'>linear</span> <span m='4920630'>cost</span>
  <span m='4921680'>to</span> <span m='4922700'>splitting</span> <span m='4923070'>nodes.</span>
  <span m='4926070'>It's</span> <span m='4926210'>an</span> <span m='4926560'>amortization.</span>
  <span m='4927540'>Now</span> <span m='4927740'>the trouble</span> <span m='4927980'>is</span>
  <span m='4928100'>this</span> <span m='4928250'>is</span> <span m='4928340'>not</span>
  <span m='4928550'>a</span> <span m='4928610'>binary</span> <span m='4928910'>search</span>
  <span m='4929140'>tree.</span> <span m='4929300'>How</span> <span m='4929510'>in</span>
  <span m='4929600'>the</span> <span m='4929690'>heck</span> <span m='4929900'>do</span>
  <span m='4929990'>I</span> <span m='4930020'>have</span> <span m='4930200'>to</span>
  <span m='4930380'>pointers</span> <span m='4930790'>that</span> <span m='4930920'>in</span>
  <span m='4931010'>parallel</span> <span m='4931400'>search?</span> </p><p><span
  m='4932330'>Well</span> <span m='4932660'>you</span> <span m='4932840'>have</span>
  <span m='4932960'>to</span> <span m='4933050'>take</span> <span m='4933260'>these</span>
  <span m='4933440'>two</span> <span m='4933540'>halves</span> <span m='4934460'>of</span>
  <span m='4934520'>the</span> <span m='4934640'>tree</span> <span m='4934880'>and</span>
  <span m='4934970'>interleave</span> <span m='4935540'>them</span> <span m='4936290'>to</span>
  <span m='4936410'>make</span> <span m='4936560'>them a</span> <span m='4936720'>binary</span>
  <span m='4936930'>search</span> <span m='4937130'>tree.</span> <span m='4937310'>It's</span>
  <span m='4937400'>kind</span> <span m='4937580'>of</span> <span m='4937670'>awkward,</span>
  <span m='4938360'>but</span> <span m='4939180'>just</span> <span m='4939350'>put</span>
  <span m='4939620'>it,</span> <span m='4939800'>mash</span> <span m='4940100'>it
  all</span> <span m='4940250'>together.</span> <span m='4941210'>Fold</span> <span
  m='4941420'>it</span> <span m='4941480'>in</span> <span m='4941570'>half,</span>
  <span m='4942000'>basically</span> <span m='4943070'>and</span> <span m='4943280'>turn
  it</span> <span m='4943490'>upside</span> <span m='4943730'>down,</span> <span m='4944350'>and</span>
  <span m='4944450'>you've</span> <span m='4944700'>got</span> <span m='4944840'>a</span>
  <span m='4944900'>binary</span> <span m='4945260'>search</span> <span m='4945530'>tree.</span>
  <span m='4946290'>So</span> <span m='4946390'>there's some</span> <span m='4946550'>messy</span>
  <span m='4946850'>stuff</span> <span m='4947150'>there,</span> <span m='4947390'>but</span>
  <span m='4948120'>that's</span> <span m='4948350'>just</span> <span m='4948560'>a</span>
  <span m='4948650'>hand-wavy</span> <span m='4949160'>argument</span> <span m='4949580'>that</span>
  <span m='4949700'>you</span> <span m='4949850'>can</span> <span m='4950030'>make</span>
  <span m='4951280'>greedy</span> <span m='4951680'>online.</span> <span m='4952400'>Next</span>
  <span m='4952640'>class</span> <span m='4952940'>we'll</span> <span m='4953030'>talk</span>
  <span m='4953240'>about</span> <span m='4953450'>lower</span> <span m='4953720'>bounds,</span>
  <span m='4954140'>which</span> <span m='4954830'>almost</span> <span m='4955280'>proved</span>
  <span m='4955610'>the</span> <span m='4955730'>greedy is</span> <span m='4956120'>optimal.</span>
  <span m='4956630'>But</span> <span m='4956780'>not</span> <span m='4957080'>quite.</span>
  </p>
type: course
uid: 323f343c7156c492b2f3d029089b99e9

---
None