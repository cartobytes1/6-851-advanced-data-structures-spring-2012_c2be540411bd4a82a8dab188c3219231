---
about_this_resource_text: '<p><strong>Description:</strong> Dynamic graphs: &Omega;(lg
  n) lower bound for dynamic connectivity.</p> <p><strong>Speaker:</strong> Prof.
  Erik Demaine</p>'
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: Yarwp7TNTL4
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Video-YouTube-Stream
  type: Video
  uid: a2ec6bb005826419d7cb224153bc74ba
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-21-dynamic-connectivity/id735348884?i=169611784
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Video-iTunes U-MP4
  type: Video
  uid: ab265e471407100807940464084e728b
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec21_300k.mp4
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Video-Internet Archive-MP4
  type: Video
  uid: c58a7653a8706f71e97f16a615b29041
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/Yarwp7TNTL4/default.jpg
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 8ec0258ad483af9970d2b8daa90e699e
- id: 3Play-3PlayYouTubeid-MP4
  media_location: Yarwp7TNTL4
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: fdcbd48dd2e30c4200be6560f9a50020
- id: Yarwp7TNTL4.srt
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-21-dynamic-connectivity-lower-bound/Yarwp7TNTL4.srt
  title: 3play caption file
  type: null
  uid: 17503bc44224a1e5e3fa6757bc7a404c
- id: Yarwp7TNTL4.pdf
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-21-dynamic-connectivity-lower-bound/Yarwp7TNTL4.pdf
  title: 3play pdf file
  type: null
  uid: 5611adfe6f968cddf9a40335be70efd1
- id: Caption-3Play YouTube id-SRT
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 4bc41699b23dc81fd58e8a417e40f58a
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 622cbc1f2c6608986d2eb1dbcd20d44c
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 4ce37134ce4eea5085feee7c6ed2634b
inline_embed_id: 50173948session21:dynamicconnectivitylowerbound97783427
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-21-dynamic-connectivity-lower-bound
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-21-dynamic-connectivity-lower-bound
template_type: Tabbed
title: 'Session 21: Dynamic Connectivity Lower Bound'
transcript: <p><span m='90'>The</span> <span m='180'>following</span> <span m='630'>content</span>
  <span m='1200'>is</span> <span m='1320'>provided</span> <span m='1770'>under</span>
  <span m='2009'>a</span> <span m='2070'>Creative</span> <span m='2490'>Commons</span>
  <span m='2910'>license.</span> <span m='4030'>Your</span> <span m='4200'>support</span>
  <span m='4710'>will</span> <span m='4860'>help</span> <span m='5100'>MIT</span>
  <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span> <span m='6870'>to</span>
  <span m='6960'>offer</span> <span m='7380'>high</span> <span m='7620'>quality,</span>
  <span m='8100'>educational</span> <span m='8730'>resources</span> <span m='9330'>for</span>
  <span m='9510'>free.</span> <span m='10720'>To</span> <span m='10740'>make</span>
  <span m='10920'>a</span> <span m='10980'>donation,</span> <span m='11730'>or</span>
  <span m='11940'>view</span> <span m='12390'>additional</span> <span m='12810'>materials</span>
  <span m='13320'>from</span> <span m='13500'>hundreds</span> <span m='13920'>of</span>
  <span m='14040'>MIT</span> <span m='14460'>courses,</span> <span m='15550'>visit</span>
  <span m='15780'>MIT</span> <span m='16200'>OpenCourseWare</span> <span m='17280'>at</span>
  <span m='17430'>ocw.mit.edu.</span> </p><p><span m='21480'>ERIK DEMAINE:</span>
  <span m='21510'>All</span> <span m='21540'>right,</span> <span m='21810'>welcome</span>
  <span m='22230'>to</span> <span m='23670'>my</span> <span m='23880'>last</span>
  <span m='24240'>lecture</span> <span m='24870'>for</span> <span m='25050'>the</span>
  <span m='25170'>semester.</span> <span m='26880'>We</span> <span m='27090'>finish</span>
  <span m='27570'>our</span> <span m='28500'>coverage</span> <span m='28890'>of</span>
  <span m='28980'>dynamic</span> <span m='29430'>graphs,</span> <span m='30090'>and</span>
  <span m='30300'>also</span> <span m='30660'>our</span> <span m='30810'>coverage</span>
  <span m='31260'>of</span> <span m='31560'>lower</span> <span m='31830'>bounds.</span>
  <span m='32439'>We</span> <span m='32549'>saw</span> <span m='32820'>one</span>
  <span m='33390'>big</span> <span m='33720'>lower</span> <span m='33960'>bound</span>
  <span m='34320'>in</span> <span m='34440'>this</span> <span m='34590'>class</span>
  <span m='35940'>in</span> <span m='36270'>the</span> <span m='36540'>cell probe</span>
  <span m='37160'>model.</span> <span m='37560'>You</span> <span m='37650'>may</span>
  <span m='37770'>recall</span> <span m='38200'>cell probe</span> <span m='38575'>model,</span>
  <span m='38950'>you</span> <span m='39030'>just</span> <span m='39210'>count</span>
  <span m='39510'>how</span> <span m='39720'>many</span> <span m='40590'>cells</span>
  <span m='41730'>of</span> <span m='41850'>memory</span> <span m='42300'>do</span>
  <span m='42450'>you</span> <span m='42570'>touch.</span> <span m='44500'>You</span>
  <span m='44610'>want</span> <span m='44760'>to</span> <span m='45500'>prove</span>
  <span m='45660'>a</span> <span m='45840'>lower</span> <span m='46080'>bound</span>
  <span m='46320'>on</span> <span m='46440'>that.</span> </p><p><span m='47990'>And</span>
  <span m='48240'>today</span> <span m='48510'>we're</span> <span m='48630'>going</span>
  <span m='48750'>to</span> <span m='48870'>prove</span> <span m='49170'>a</span>
  <span m='49200'>cell probe</span> <span m='49440'>from</span> <span m='49680'>lower</span>
  <span m='49950'>bound</span> <span m='50180'>on</span> <span m='50350'>dynamic</span>
  <span m='50790'>connectivity,</span> <span m='53770'>which</span> <span m='53880'>is</span>
  <span m='53970'>a</span> <span m='54030'>problem</span> <span m='54360'>we've</span>
  <span m='54570'>solved</span> <span m='55260'>a</span> <span m='55320'>few</span>
  <span m='55920'>different</span> <span m='56220'>times.</span> <span m='57030'>Our</span>
  <span m='57210'>lower</span> <span m='57420'>bound</span> <span m='57660'>will</span>
  <span m='57780'>apply</span> <span m='58170'>even</span> <span m='58560'>when</span>
  <span m='58920'>each</span> <span m='59190'>of</span> <span m='59280'>the</span>
  <span m='59400'>connected</span> <span m='59790'>components</span> <span m='60360'>of</span>
  <span m='60480'>your</span> <span m='60600'>graph</span> <span m='61380'>are</span>
  <span m='61470'>just</span> <span m='61680'>a</span> <span m='61740'>path.</span>
  <span m='63920'>And</span> <span m='64050'>so</span> <span m='64200'>in</span> <span
  m='64290'>particular,</span> <span m='65069'>they</span> <span m='65190'>imply</span>
  <span m='65670'>matching</span> <span m='66090'>lower</span> <span m='66300'>bounds</span>
  <span m='66600'>for</span> <span m='66930'>dynamic</span> <span m='67350'>trees.</span>
  </p><p><span m='74760'>So</span> <span m='75000'>here</span> <span m='75100'>is</span>
  <span m='75330'>the</span> <span m='75420'>theorem</span> <span m='75780'>we'll</span>
  <span m='75930'>be</span> <span m='76050'>proving</span> <span m='76410'>today.</span>
  <span m='78120'>You</span> <span m='78300'>want</span> <span m='78510'>to</span>
  <span m='79020'>insert</span> <span m='81240'>and</span> <span m='81420'>delete</span>
  <span m='81810'>edges,</span> <span m='87270'>and</span> <span m='87630'>do</span>
  <span m='87870'>connectivity</span> <span m='88530'>queries</span> <span m='92730'>between</span>
  <span m='93270'>pairs</span> <span m='93660'>of</span> <span m='93750'>vertices,</span>
  <span m='94290'>vw.</span> <span m='95970'>I</span> <span m='96030'>want</span>
  <span m='96180'>to</span> <span m='96240'>know</span> <span m='96420'>is</span>
  <span m='96630'>there</span> <span m='96780'>a</span> <span m='96810'>path</span>
  <span m='97170'>from</span> <span m='97390'>v</span> <span m='97650'>to</span> <span
  m='98064'>w,</span> <span m='99720'>just</span> <span m='99930'>like</span> <span
  m='100170'>we've</span> <span m='100320'>been</span> <span m='100440'>considering.</span>
  <span m='104370'>These</span> <span m='104790'>require</span> <span m='108580'>omega</span>
  <span m='109250'>log</span> <span m='109600'>n,</span> <span m='111240'>time</span>
  <span m='111530'>for</span> <span m='111620'>operation.</span> </p><p><span m='115590'>This</span>
  <span m='115770'>is</span> <span m='115890'>the</span> <span m='116010'>max</span>
  <span m='116490'>of</span> <span m='116760'>updating,</span> <span m='117270'>query</span>
  <span m='117510'>times</span> <span m='117840'>has</span> <span m='117990'>to</span>
  <span m='118110'>be</span> <span m='118260'>at</span> <span m='118320'>least</span>
  <span m='119030'>log</span> <span m='119310'>n</span> <span m='119450'>time</span>
  <span m='119710'>per</span> <span m='120065'>operation,</span> <span m='121860'>even</span>
  <span m='124470'>if</span> <span m='124940'>the</span> <span m='125160'>connected</span>
  <span m='125370'>components</span> <span m='131320'>are</span> <span m='131680'>paths,</span>
  <span m='135420'>and</span> <span m='135900'>even</span> <span m='136170'>amortized,</span>
  <span m='137070'>and</span> <span m='137250'>even</span> <span m='137600'>randomized.</span>
  <span m='139958'>Although</span> <span m='140370'>I'm</span> <span m='140820'>not</span>
  <span m='140940'>going</span> <span m='141090'>to</span> <span m='141180'>prove</span>
  <span m='141380'>of</span> <span m='141480'>all</span> <span m='141840'>of</span>
  <span m='141960'>these</span> <span m='143310'>versions,</span> <span m='143700'>I</span>
  <span m='144090'>won't</span> <span m='144360'>prove</span> <span m='144780'>the</span>
  <span m='145200'>amortized</span> <span m='145770'>version.</span> <span m='146130'>I'm</span>
  <span m='146340'>going</span> <span m='146640'>to</span> <span m='146790'>prove</span>
  <span m='147030'>a</span> <span m='147120'>worst</span> <span m='147390'>case</span>
  <span m='147780'>log</span> <span m='148090'>and</span> <span m='148230'>lower</span>
  <span m='148440'>bound,</span> <span m='149280'>it's</span> <span m='149400'>just</span>
  <span m='149580'>a</span> <span m='149610'>little</span> <span m='149850'>more</span>
  <span m='150030'>work</span> <span m='150210'>to</span> <span m='150280'>prove an</span>
  <span m='150570'>amortized</span> <span m='151350'>lower</span> <span m='151560'>bound.</span>
  <span m='153930'>But</span> <span m='154740'>same</span> <span m='155130'>principles.</span>
  </p><p><span m='156460'>And</span> <span m='156600'>so</span> <span m='156750'>that's</span>
  <span m='156960'>going</span> <span m='157080'>to</span> <span m='157170'>be</span>
  <span m='159300'>today,</span> <span m='159910'>is</span> <span m='160200'>proving</span>
  <span m='160560'>this</span> <span m='160770'>theorem.</span> <span m='161500'>It's</span>
  <span m='161930'>not</span> <span m='162360'>a</span> <span m='162480'>short</span>
  <span m='162750'>proof,</span> <span m='163230'>but</span> <span m='163710'>it</span>
  <span m='164070'>combines</span> <span m='164640'>a</span> <span m='164700'>bunch</span>
  <span m='165000'>of</span> <span m='165120'>relatively</span> <span m='165660'>simple</span>
  <span m='165990'>ideas,</span> <span m='167580'>and</span> <span m='168060'>ends</span>
  <span m='168240'>up</span> <span m='168360'>being</span> <span m='168630'>pretty</span>
  <span m='168930'>clean</span> <span m='169350'>overall,</span> <span m='170400'>piece-by-piece,</span>
  <span m='171060'>but</span> <span m='171210'>there's</span> <span m='171390'>just</span>
  <span m='171660'>a</span> <span m='171720'>bunch</span> <span m='171990'>of</span>
  <span m='172050'>pieces,</span> <span m='173120'>as</span> <span m='173340'>we</span>
  <span m='173490'>will</span> <span m='174030'>get</span> <span m='174210'>to.</span>
  <span m='174810'>Key</span> <span m='174990'>concept</span> <span m='175530'>is</span>
  <span m='175770'>an</span> <span m='175890'>idea</span> <span m='177030'>introduced</span>
  <span m='177600'>in</span> <span m='177690'>this</span> <span m='177840'>paper,</span>
  <span m='178330'>which</span> <span m='178440'>is</span> <span m='179460'>to</span>
  <span m='179640'>build</span> <span m='179940'>a</span> <span m='180330'>balanced</span>
  <span m='180690'>binary</span> <span m='181140'>tree</span> <span m='181650'>over</span>
  <span m='182340'>time,</span> <span m='183750'>over</span> <span m='184020'>your</span>
  <span m='184170'>access</span> <span m='184560'>sequence.</span> <span m='185190'>And</span>
  <span m='185370'>argue</span> <span m='185700'>about</span> <span m='186600'>different</span>
  <span m='186900'>subtrees</span> <span m='187470'>within</span> <span m='187740'>that</span>
  <span m='187920'>tree.</span> </p><p><span m='189600'>This</span> <span m='189780'>is</span>
  <span m='189900'>a</span> <span m='189960'>paper</span> <span m='192180'>that</span>
  <span m='192270'>maybe</span> <span m='192600'>came</span> <span m='192870'>out</span>
  <span m='192990'>of</span> <span m='193470'>this</span> <span m='193710'>class,</span>
  <span m='194520'>in</span> <span m='194610'>some</span> <span m='194920'>sense,</span>
  <span m='195410'>it</span> <span m='195680'>was</span> <span m='196170'>by</span>
  <span m='196580'>Mihai</span> <span m='196860'>Patrascu</span> <span m='197990'>and</span>
  <span m='198180'>myself.</span> <span m='199500'>Back</span> <span m='199770'>when</span>
  <span m='200120'>Mihai</span> <span m='200190'>was</span> <span m='200370'>an</span>
  <span m='200430'>undergrad,</span> <span m='201510'>I</span> <span m='201530'>think</span>
  <span m='201750'>he'd</span> <span m='201960'>just</span> <span m='202230'>taken</span>
  <span m='202590'>this</span> <span m='202770'>class.</span> <span m='204220'>But</span>
  <span m='204420'>at</span> <span m='204540'>that</span> <span m='204720'>point</span>
  <span m='204930'>the</span> <span m='205020'>class</span> <span m='205230'>didn't</span>
  <span m='205410'>even</span> <span m='205590'>cover</span> <span m='205800'>dynamic</span>
  <span m='206600'>connectivity,</span> <span m='206750'>so--</span> <span m='210040'>and</span>
  <span m='210300'>time</span> <span m='210780'>here</span> <span m='211260'>is</span>
  <span m='211890'>cell</span> <span m='212220'>probes.</span> </p><p><span m='216300'>So</span>
  <span m='216480'>this is</span> <span m='216670'>a</span> <span m='216750'>very</span>
  <span m='216930'>strong</span> <span m='217380'>model,</span> <span m='218870'>it</span>
  <span m='219050'>implies</span> <span m='219510'>a</span> <span m='219570'>lower</span>
  <span m='219780'>bound</span> <span m='220110'>on</span> <span m='220320'>ram,</span>
  <span m='220710'>and</span> <span m='220790'>implies a</span> <span m='221160'>lower</span>
  <span m='221350'>bound</span> <span m='221570'>on</span> <span m='221850'>pointer</span>
  <span m='221910'>machine.</span> <span m='222840'>We</span> <span m='222990'>know</span>
  <span m='223350'>matching</span> <span m='223950'>upper</span> <span m='224250'>bounds</span>
  <span m='224760'>for</span> <span m='225090'>trees</span> <span m='226380'>on</span>
  <span m='226680'>a</span> <span m='226740'>pointer</span> <span m='226990'>machine</span>
  <span m='228180'>link/cut</span> <span m='228630'>trees</span> <span m='228990'>in</span>
  <span m='229080'>[INAUDIBLE]</span> <span m='229290'>to</span> <span m='229440'>our</span>
  <span m='229560'>trees.</span> <span m='230560'>It's</span> <span m='230670'>kind</span>
  <span m='230910'>of</span> <span m='231180'>fun</span> <span m='231600'>that</span>
  <span m='231780'>this</span> <span m='232200'>lower</span> <span m='232440'>bound</span>
  <span m='232650'>even</span> <span m='232860'>applies</span> <span m='233190'>to</span>
  <span m='233280'>paths,</span> <span m='233790'>because</span> <span m='234330'>most</span>
  <span m='234630'>of</span> <span m='234690'>the</span> <span m='234780'>work</span>
  <span m='235020'>in</span> <span m='235110'>link/cut</span> <span m='235470'>trees</span>
  <span m='235740'>is</span> <span m='235860'>about</span> <span m='236100'>decomposing</span>
  <span m='236730'>your</span> <span m='236820'>tree</span> <span m='237030'>into</span>
  <span m='237180'>paths.</span> </p><p><span m='238140'>And</span> <span m='238290'>so</span>
  <span m='238440'>what</span> <span m='238560'>this</span> <span m='238710'>is</span>
  <span m='238800'>saying</span> <span m='239010'>is</span> <span m='239130'>even</span>
  <span m='239370'>if</span> <span m='239490'>that's</span> <span m='239700'>done</span>
  <span m='239910'>for</span> <span m='240150'>you,</span> <span m='240330'>and</span>
  <span m='240420'>you</span> <span m='240510'>just</span> <span m='240750'>need</span>
  <span m='240930'>to</span> <span m='241020'>be</span> <span m='241140'>able</span>
  <span m='241290'>to</span> <span m='241350'>take</span> <span m='241980'>paths,</span>
  <span m='242940'>and</span> <span m='243180'>concatenate</span> <span m='243720'>them</span>
  <span m='243900'>together</span> <span m='244350'>by</span> <span m='244560'>adding</span>
  <span m='245370'>edges,</span> <span m='247140'>then</span> <span m='247650'>maintaining</span>
  <span m='248310'>the</span> <span m='249210'>find</span> <span m='249540'>root</span>
  <span m='250380'>property</span> <span m='250800'>so</span> <span m='250950'>that</span>
  <span m='251040'>you</span> <span m='251160'>can</span> <span m='251310'>do</span>
  <span m='251660'>connectivity</span> <span m='252240'>queries,</span> <span m='253080'>even</span>
  <span m='253410'>that</span> <span m='253620'>requires</span> <span m='254200'>log</span>
  <span m='254490'>n</span> <span m='254640'>time.</span> <span m='255550'>So</span>
  <span m='256230'>converting</span> <span m='256620'>a</span> <span m='256680'>tree</span>
  <span m='256829'>into</span> <span m='256980'>a</span> <span m='257010'>path</span>
  <span m='257310'>is</span> <span m='257430'>basically</span> <span m='257820'>free,</span>
  <span m='259350'>the</span> <span m='259500'>hard</span> <span m='259680'>part</span>
  <span m='259920'>is</span> <span m='260040'>maintaining</span> <span m='260459'>the</span>
  <span m='260550'>paths.</span> </p><p><span m='263010'>So</span> <span m='264750'>let's</span>
  <span m='265160'>prove</span> <span m='265410'>a</span> <span m='265440'>theorem.</span>
  <span m='268590'>The</span> <span m='268680'>lower</span> <span m='268950'>bound,</span>
  <span m='269260'>we</span> <span m='269280'>get</span> <span m='269430'>to</span>
  <span m='269550'>choose</span> <span m='270030'>what</span> <span m='270270'>access</span>
  <span m='270600'>sequence</span> <span m='271050'>we</span> <span m='271200'>think</span>
  <span m='271500'>is</span> <span m='271890'>bad.</span> <span m='272550'>And</span>
  <span m='272670'>so</span> <span m='272880'>we're</span> <span m='273000'>going</span>
  <span m='273270'>to</span> <span m='275610'>come</span> <span m='275850'>up</span>
  <span m='275940'>with</span> <span m='276060'>a</span> <span m='276120'>particular</span>
  <span m='276720'>style</span> <span m='277170'>of</span> <span m='277290'>graph,</span>
  <span m='280680'>which</span> <span m='281160'>looks</span> <span m='281400'>like</span>
  <span m='281580'>the</span> <span m='281670'>following.</span> </p><p></p><p><span
  m='294050'>Graph</span> <span m='294380'>is</span> <span m='294470'>going</span>
  <span m='294620'>to</span> <span m='294680'>be--</span> <span m='295190'>the</span>
  <span m='295310'>vertices</span> <span m='295790'>are</span> <span m='295850'>going</span>
  <span m='295960'>to</span> <span m='296060'>be</span> <span m='296210'>a</span>
  <span m='296300'>root</span> <span m='296560'>n</span> <span m='296720'>by</span>
  <span m='296900'>root n</span> <span m='297230'>grid.</span> <span m='301700'>And</span>
  <span m='302780'>we're</span> <span m='302930'>going</span> <span m='303090'>to--</span>
  <span m='303950'>these</span> <span m='304190'>guys</span> <span m='304670'>are</span>
  <span m='304940'>in,</span> <span m='305660'>what</span> <span m='305780'>did I</span>
  <span m='305900'>call</span> <span m='306080'>them?</span> <span m='306300'>Groups?</span>
  <span m='307280'>Columns.</span> <span m='308340'>Columns</span> <span m='308610'>is
  a</span> <span m='308880'>good</span> <span m='309000'>name.</span> <span m='310160'>These</span>
  <span m='310400'>are</span> <span m='311600'>columns</span> <span m='312050'>of</span>
  <span m='312170'>the</span> <span m='312290'>matrix,</span> <span m='313900'>or</span>
  <span m='314310'>vertices.</span> <span m='315620'>And</span> <span m='315770'>what</span>
  <span m='315920'>I'd</span> <span m='315980'>like</span> <span m='316220'>to</span>
  <span m='316340'>have</span> <span m='316850'>is</span> <span m='317270'>between</span>
  <span m='318440'>consecutive</span> <span m='319070'>columns,</span> <span m='319760'>I</span>
  <span m='319850'>want</span> <span m='320000'>to</span> <span m='320060'>have</span>
  <span m='320240'>a</span> <span m='320270'>perfect</span> <span m='320690'>matching</span>
  <span m='321140'>between</span> <span m='321500'>these</span> <span m='321650'>vertices.</span>
  </p><p><span m='323232'>So</span> <span m='323700'>could</span> <span m='323900'>be,</span>
  <span m='324195'>I</span> <span m='324490'>don't</span> <span m='324590'>know,</span>
  <span m='324890'>this</span> <span m='325590'>edge,</span> <span m='326460'>this</span>
  <span m='326750'>edge,</span> <span m='327920'>this</span> <span m='328220'>edge,</span>
  <span m='328580'>and</span> <span m='328670'>that</span> <span m='328970'>edge.</span>
  <span m='329760'>And</span> <span m='329990'>I</span> <span m='330050'>also</span>
  <span m='330290'>want</span> <span m='330410'>a</span> <span m='330470'>perfect</span>
  <span m='330740'>match</span> <span m='331070'>between</span> <span m='331370'>these</span>
  <span m='331520'>two</span> <span m='331670'>columns,</span> <span m='331970'>so</span>
  <span m='332270'>maybe</span> <span m='333170'>this</span> <span m='333380'>one,</span>
  <span m='334580'>this</span> <span m='334820'>one,</span> <span m='337680'>this</span>
  <span m='337900'>one,</span> <span m='338330'>this</span> <span m='338600'>one.</span>
  <span m='339950'>And</span> <span m='341370'>you</span> <span m='341670'>can</span>
  <span m='341870'>have</span> <span m='342110'>some</span> <span m='343130'>boring</span>
  <span m='343430'>things</span> <span m='343760'>too.</span> <span m='346340'>Something</span>
  <span m='346640'>like</span> <span m='346790'>that.</span> <span m='347180'>So</span>
  <span m='347510'>between</span> <span m='348020'>every</span> <span m='348380'>pair</span>
  <span m='348620'>of</span> <span m='348680'>columns</span> <span m='350150'>is</span>
  <span m='350360'>a</span> <span m='350420'>perfect</span> <span m='350720'>matching,</span>
  <span m='353820'>meaning</span> <span m='354200'>perfect</span> <span m='354560'>pairing.</span>
  </p><p><span m='358910'>OK,</span> <span m='359090'>this</span> <span m='359300'>of</span>
  <span m='359390'>course</span> <span m='359660'>results</span> <span m='360110'>in</span>
  <span m='360410'>a</span> <span m='360440'>collection</span> <span m='360860'>of</span>
  <span m='360920'>paths,</span> <span m='361370'>square root</span> <span m='361700'>of</span>
  <span m='361880'>n</span> <span m='362070'>paths.</span> <span m='362660'>You</span>
  <span m='362750'>can</span> <span m='362930'>start</span> <span m='363270'>at</span>
  <span m='363380'>any</span> <span m='363920'>vertex</span> <span m='364370'>on</span>
  <span m='364460'>the</span> <span m='364550'>left,</span> <span m='364970'>and</span>
  <span m='365120'>you'll</span> <span m='365240'>have</span> <span m='365420'>a</span>
  <span m='365480'>unique</span> <span m='365870'>way</span> <span m='366050'>to</span>
  <span m='366170'>go</span> <span m='366320'>to</span> <span m='366440'>the</span>
  <span m='366530'>right.</span> <span m='367420'>And</span> <span m='367550'>so</span>
  <span m='367700'>that's</span> <span m='368630'>path</span> <span m='368990'>1,</span>
  <span m='369830'>this</span> <span m='370100'>is</span> <span m='370340'>path</span>
  <span m='370850'>2,</span> <span m='371900'>this</span> <span m='372350'>is</span>
  <span m='372590'>path</span> <span m='372860'>3,</span> <span m='373430'>and</span>
  <span m='373670'>this</span> <span m='373940'>is</span> <span m='374120'>path</span>
  <span m='374450'>4.</span> <span m='376070'>And</span> <span m='376350'>so</span>
  <span m='376650'>if</span> <span m='376860'>I--</span> <span m='377080'>an</span>
  <span m='377440'>interesting</span> <span m='378920'>query.</span> <span m='380720'>Well,</span>
  <span m='381110'>an</span> <span m='381410'>interesting</span> <span m='381810'>query
  is</span> <span m='382070'>something</span> <span m='382340'>like</span> <span m='382940'>I</span>
  <span m='383030'>want</span> <span m='383180'>to</span> <span m='383270'>know,</span>
  <span m='383450'>is</span> <span m='383570'>this</span> <span m='383810'>vertex</span>
  <span m='384800'>connected</span> <span m='385280'>to</span> <span m='385400'>this</span>
  <span m='385670'>one?</span> <span m='387050'>And</span> <span m='387110'>it's</span>
  <span m='387290'>not</span> <span m='387440'>so</span> <span m='387620'>easy</span>
  <span m='387830'>to</span> <span m='387920'>figure</span> <span m='388190'>it</span>
  <span m='388280'>out,</span> <span m='388460'>because</span> <span m='388730'>you</span>
  <span m='388850'>have</span> <span m='388970'>to</span> <span m='389060'>sort</span>
  <span m='389240'>of</span> <span m='389360'>walk</span> <span m='389720'>through</span>
  <span m='390860'>this</span> <span m='391070'>path</span> <span m='391490'>to</span>
  <span m='391940'>figure</span> <span m='392210'>that</span> <span m='392420'>out.</span>
  </p><p><span m='392840'>We're</span> <span m='392930'>going</span> <span m='393050'>to</span>
  <span m='393140'>think</span> <span m='393350'>of</span> <span m='393440'>each</span>
  <span m='393620'>of</span> <span m='393680'>these</span> <span m='393830'>perfect</span>
  <span m='394130'>matchings</span> <span m='394640'>as</span> <span m='394760'>defining</span>
  <span m='395270'>a</span> <span m='395420'>permutation</span> <span m='397010'>on</span>
  <span m='397760'>the</span> <span m='398120'>vertices,</span> <span m='399290'>on</span>
  <span m='399470'>the</span> <span m='399560'>column</span> <span m='400280'>really.</span>
  <span m='401060'>So</span> <span m='401150'>you</span> <span m='401210'>start</span>
  <span m='401540'>with</span> <span m='402050'>the</span> <span m='402350'>identity</span>
  <span m='402800'>permutation,</span> <span m='403940'>and</span> <span m='404120'>then</span>
  <span m='404330'>some</span> <span m='404470'>things</span> <span m='404780'>get</span>
  <span m='404930'>swapped</span> <span m='405260'>around,</span> <span m='405530'>that's</span>
  <span m='405710'>pi</span> <span m='405990'>1.</span> <span m='406480'>Something</span>
  <span m='406840'>gets</span> <span m='407090'>swapped</span> <span m='407300'>around</span>
  <span m='407460'>again,</span> <span m='407720'>that's</span> <span m='407900'>pi</span>
  <span m='408110'>2.</span> <span m='408750'>Somethings</span> <span m='409190'>get</span>
  <span m='409310'>swapped</span> <span m='409580'>around</span> <span m='409790'>here,</span>
  <span m='410000'>that's</span> <span m='410180'>pi</span> <span m='410420'>3.</span>
  <span m='411170'>And</span> <span m='411320'>then</span> <span m='411470'>this</span>
  <span m='411650'>position</span> <span m='412250'>would</span> <span m='412460'>be</span>
  <span m='413660'>pi</span> <span m='413960'>3</span> <span m='414380'>of</span>
  <span m='414710'>pi</span> <span m='415070'>2</span> <span m='415580'>of</span>
  <span m='416060'>pi</span> <span m='416360'>1</span> <span m='417500'>of</span>
  <span m='419680'>vertex</span> <span m='420170'>4.</span> <span m='421940'>We</span>
  <span m='422080'>call</span> <span m='422300'>this</span> <span m='422880'>vertex</span>
  <span m='423260'>4.</span> <span m='425960'>Or</span> <span m='426230'>row,</span>
  <span m='427280'>row</span> <span m='427490'>4.</span> </p><p><span m='429200'>So</span>
  <span m='429350'>in</span> <span m='429410'>some</span> <span m='429590'>sense,</span>
  <span m='429830'>we</span> <span m='430010'>have</span> <span m='430220'>to</span>
  <span m='430550'>compose</span> <span m='431240'>permutations.</span> <span m='431990'>I'll</span>
  <span m='432080'>call</span> <span m='432290'>this</span> <span m='432470'>pi</span>
  <span m='432935'>1,</span> <span m='433400'>circle</span> <span m='433880'>pi</span>
  <span m='434180'>2,</span> <span m='434780'>circle</span> <span m='435290'>pi</span>
  <span m='435570'>3</span> <span m='436400'>of</span> <span m='437750'>4.</span>
  <span m='440270'>And</span> <span m='440660'>we're</span> <span m='440750'>going</span>
  <span m='440810'>to</span> <span m='440930'>show,</span> <span m='441200'>basically,</span>
  <span m='441590'>composing</span> <span m='442070'>permutations</span> <span m='442730'>is</span>
  <span m='442880'>tough</span> <span m='443690'>when</span> <span m='443840'>you</span>
  <span m='443960'>can</span> <span m='444110'>change</span> <span m='444470'>those</span>
  <span m='444650'>permutations</span> <span m='445340'>dynamically.</span> <span
  m='446630'>So</span> <span m='446840'>what</span> <span m='446990'>we're</span>
  <span m='447090'>going</span> <span m='447190'>to</span> <span m='447290'>do</span>
  <span m='447560'>is</span> <span m='447830'>a</span> <span m='447890'>series</span>
  <span m='448340'>of</span> <span m='449120'>block</span> <span m='449510'>operations,</span>
  <span m='455150'>which</span> <span m='456170'>change</span> <span m='456580'>or</span>
  <span m='456680'>query</span> <span m='457130'>entire</span> <span m='457730'>permutations.</span>
  </p><p><span m='459660'>So</span> <span m='459710'>here,</span> <span m='460160'>an</span>
  <span m='460340'>update</span> <span m='462010'>is</span> <span m='462170'>going</span>
  <span m='462410'>to</span> <span m='462530'>be</span> <span m='462740'>a</span>
  <span m='462800'>whole</span> <span m='463130'>bunch</span> <span m='463460'>of</span>
  <span m='464810'>insertions</span> <span m='465470'>and</span> <span m='465590'>deletions</span>
  <span m='466040'>of</span> <span m='466130'>edges.</span> <span m='468230'>Basically,</span>
  <span m='468650'>what</span> <span m='468800'>we</span> <span m='468950'>want</span>
  <span m='469130'>to</span> <span m='469220'>do</span> <span m='469580'>is</span>
  <span m='469790'>set</span> <span m='470060'>pi</span> <span m='470540'>i</span>
  <span m='471020'>equal</span> <span m='471500'>to</span> <span m='471620'>pi.</span>
  <span m='473966'>So</span> <span m='474440'>that's</span> <span m='474620'>what</span>
  <span m='474800'>update</span> <span m='475210'>of</span> <span m='475390'>i comma</span>
  <span m='475800'>pi</span> <span m='476090'>does.</span> <span m='477380'>It</span>
  <span m='477500'>changes</span> <span m='478400'>an</span> <span m='478520'>entire</span>
  <span m='479180'>perfect</span> <span m='479570'>matching</span> <span m='480110'>to</span>
  <span m='480260'>be</span> <span m='480800'>a</span> <span m='481160'>specified</span>
  <span m='481820'>permutation.</span> <span m='483120'>So</span> <span m='483140'>how</span>
  <span m='483290'>do</span> <span m='483350'>you</span> <span m='483440'>do</span>
  <span m='483560'>that?</span> <span m='483830'>Well,</span> <span m='483950'>you</span>
  <span m='484070'>delete</span> <span m='484460'>all</span> <span m='484610'>the</span>
  <span m='484730'>edges</span> <span m='485150'>that</span> <span m='485300'>are</span>
  <span m='485390'>in</span> <span m='485480'>the</span> <span m='485540'>existing</span>
  <span m='485960'>permutation,</span> <span m='486610'>then</span> <span m='486740'>you</span>
  <span m='486830'>insert</span> <span m='487250'>all</span> <span m='487400'>the</span>
  <span m='487490'>new</span> <span m='487670'>edges.</span> <span m='488940'>So</span>
  <span m='488990'>this</span> <span m='489170'>can</span> <span m='489380'>be</span>
  <span m='489500'>done</span> <span m='490370'>in</span> <span m='492350'>square</span>
  <span m='492710'>root</span> <span m='492860'>of</span> <span m='492950'>n</span>
  <span m='494360'>edge</span> <span m='494630'>deletions</span> <span m='495200'>and</span>
  <span m='495320'>insertions.</span> </p><p></p><p><span m='503790'>So</span> <span
  m='504000'>it's</span> <span m='504120'>a</span> <span m='504210'>bulk</span> <span
  m='504510'>update</span> <span m='504930'>of</span> <span m='505150'>square</span>
  <span m='505520'>root of n</span> <span m='505740'>operations.</span> <span m='506460'>And</span>
  <span m='507180'>so</span> <span m='507450'>this</span> <span m='507600'>could</span>
  <span m='507750'>only</span> <span m='507930'>make</span> <span m='508110'>our</span>
  <span m='508200'>problem</span> <span m='508500'>easier,</span> <span m='508920'>because</span>
  <span m='509220'>we're</span> <span m='509340'>given</span> <span m='510040'>square</span>
  <span m='510140'>root</span> <span m='510330'>of</span> <span m='510490'>n</span>
  <span m='510660'>updates</span> <span m='510980'>that</span> <span m='511110'>we</span>
  <span m='511260'>all</span> <span m='511500'>need</span> <span m='511710'>to</span>
  <span m='511830'>do</span> <span m='511980'>at</span> <span m='512070'>once.</span>
  <span m='513360'>So</span> <span m='513539'>you</span> <span m='513659'>could</span>
  <span m='514770'>amortize</span> <span m='515280'>over</span> <span m='515490'>them,</span>
  <span m='515789'>you</span> <span m='515850'>could</span> <span m='515970'>do</span>
  <span m='516120'>lots</span> <span m='516330'>of</span> <span m='516390'>different</span>
  <span m='516630'>things,</span> <span m='518520'>but</span> <span m='518730'>we're</span>
  <span m='518880'>sure</span> <span m='519179'>that</span> <span m='519390'>won't</span>
  <span m='520049'>help.</span> <span m='522059'>And</span> <span m='522179'>then</span>
  <span m='522330'>we</span> <span m='522419'>have</span> <span m='522539'>a</span>
  <span m='522600'>query,</span> <span m='524280'>and</span> <span m='524610'>the</span>
  <span m='524670'>query</span> <span m='525300'>is</span> <span m='525600'>going</span>
  <span m='525930'>to</span> <span m='527400'>be</span> <span m='527460'>a</span>
  <span m='527490'>little</span> <span m='527670'>bit</span> <span m='527820'>weird,</span>
  <span m='530000'>and</span> <span m='530260'>it's</span> <span m='530370'>also</span>
  <span m='530540'>going</span> <span m='530620'>to</span> <span m='530730'>make</span>
  <span m='530910'>the</span> <span m='531000'>proof</span> <span m='531270'>a</span>
  <span m='531330'>little</span> <span m='531570'>bit</span> <span m='531690'>more</span>
  <span m='531900'>awkward.</span> </p><p><span m='533400'>But</span> <span m='534900'>what</span>
  <span m='535110'>it</span> <span m='535200'>asks</span> <span m='536400'>is</span>
  <span m='538740'>if</span> <span m='538890'>I</span> <span m='538980'>look</span>
  <span m='539220'>at</span> <span m='539400'>the</span> <span m='539820'>composition</span>
  <span m='541560'>of</span> <span m='541860'>pi</span> <span m='542190'>j,</span>
  <span m='542790'>from</span> <span m='543150'>1</span> <span m='543570'>up</span>
  <span m='543750'>to</span> <span m='543910'>i.</span> <span m='545630'>This</span>
  <span m='545830'>is</span> <span m='546240'>1.</span> <span m='547622'>So</span>
  <span m='548070'>I</span> <span m='548400'>want</span> <span m='548600'>to</span>
  <span m='548700'>know</span> <span m='548880'>is</span> <span m='549060'>that</span>
  <span m='549240'>composition</span> <span m='549930'>equal</span> <span m='550290'>to</span>
  <span m='550470'>pi?</span> <span m='552660'>Yes</span> <span m='552930'>or</span>
  <span m='553050'>no?</span> <span m='553680'>This</span> <span m='553890'>is</span>
  <span m='554040'>what</span> <span m='554220'>I'll</span> <span m='554280'>call</span>
  <span m='554520'>verify</span> <span m='555120'>sum,</span> <span m='556080'>sum</span>
  <span m='557040'>meaning</span> <span m='557340'>composition.</span> <span m='558720'>But</span>
  <span m='559070'>the sum</span> <span m='559380'>terminology</span> <span m='560010'>comes</span>
  <span m='560250'>from</span> <span m='560430'>a</span> <span m='560460'>different</span>
  <span m='560760'>problem,</span> <span m='561210'>which</span> <span m='561360'>we</span>
  <span m='561480'>won't</span> <span m='562080'>talk</span> <span m='562290'>about</span>
  <span m='562470'>directly</span> <span m='562890'>here,</span> <span m='563100'>called</span>
  <span m='563370'>partial</span> <span m='563790'>sums.</span> </p><p><span m='565140'>Partial</span>
  <span m='565470'>sums</span> <span m='565740'>is</span> <span m='565860'>basically</span>
  <span m='566220'>this</span> <span m='566400'>problem,</span> <span m='567240'>you</span>
  <span m='567390'>can</span> <span m='567540'>change</span> <span m='568020'>numbers</span>
  <span m='568470'>in</span> <span m='568590'>an</span> <span m='568710'>array,</span>
  <span m='569580'>and</span> <span m='569970'>you</span> <span m='570120'>can</span>
  <span m='570300'>compute</span> <span m='570720'>the</span> <span m='570930'>prefix</span>
  <span m='571390'>sum</span> <span m='571740'>from</span> <span m='572010'>1</span>
  <span m='572190'>up</span> <span m='572280'>to</span> <span m='572430'>i.</span>
  <span m='573440'>Here</span> <span m='573770'>we're</span> <span m='573870'>not</span>
  <span m='574170'>computing</span> <span m='574740'>it.</span> <span m='576780'>Why</span>
  <span m='576990'>are</span> <span m='577050'>we</span> <span m='577170'>not</span>
  <span m='577350'>computing</span> <span m='577830'>it?</span> <span m='577950'>Because</span>
  <span m='578220'>actually</span> <span m='578520'>figuring</span> <span m='579150'>out</span>
  <span m='579690'>what</span> <span m='579900'>pi</span> <span m='580110'>3,</span>
  <span m='580320'>or</span> <span m='580380'>pi</span> <span m='580590'>2</span>
  <span m='580760'>of</span> <span m='580830'>pi</span> <span m='581070'>1</span>
  <span m='581370'>is</span> <span m='582140'>of</span> <span m='582450'>something</span>
  <span m='583290'>is</span> <span m='583830'>tricky</span> <span m='584220'>in</span>
  <span m='584310'>this</span> <span m='584430'>setting.</span> <span m='585330'>The</span>
  <span m='585450'>operations</span> <span m='585900'>we're</span> <span m='585990'>given</span>
  <span m='586350'>are,</span> <span m='587100'>given</span> <span m='587430'>two</span>
  <span m='587610'>vertices,</span> <span m='588120'>are</span> <span m='588270'>they</span>
  <span m='588390'>connected</span> <span m='588810'>by</span> <span m='588960'>a</span>
  <span m='588990'>path?</span> </p><p><span m='591510'>So</span> <span m='591960'>to</span>
  <span m='592110'>figure</span> <span m='592410'>out</span> <span m='592950'>the</span>
  <span m='593130'>other</span> <span m='593430'>end</span> <span m='593670'>of</span>
  <span m='593790'>this</span> <span m='593940'>path,</span> <span m='595350'>that</span>
  <span m='595530'>requires--</span> <span m='597120'>I</span> <span m='597210'>mean,</span>
  <span m='597420'>it's</span> <span m='597570'>hard</span> <span m='597720'>to</span>
  <span m='597810'>figure</span> <span m='598230'>out</span> <span m='598380'>where</span>
  <span m='598530'>the</span> <span m='598650'>other</span> <span m='598890'>end</span>
  <span m='599070'>is.</span> <span m='599280'>If</span> <span m='599430'>I</span>
  <span m='599490'>told</span> <span m='599850'>you</span> <span m='600470'>is</span>
  <span m='600980'>it</span> <span m='601110'>this</span> <span m='601380'>one?</span>
  <span m='602010'>Then</span> <span m='602520'>I</span> <span m='602640'>can</span>
  <span m='602820'>answer</span> <span m='603030'>that</span> <span m='603180'>question</span>
  <span m='603570'>with</span> <span m='603780'>just</span> <span m='603990'>a</span>
  <span m='604200'>connectivity</span> <span m='604650'>query.</span> <span m='605280'>So</span>
  <span m='605430'>verify</span> <span m='605910'>sum</span> <span m='606600'>can</span>
  <span m='606840'>be</span> <span m='606990'>done</span> <span m='607950'>with</span>
  <span m='608550'>order</span> <span m='608940'>square</span> <span m='609370'>root</span>
  <span m='609490'>of</span> <span m='609710'>n</span> <span m='612060'>connectivity</span>
  <span m='612450'>queries.</span> <span m='616530'>Whereas</span> <span m='616830'>computing</span>
  <span m='617430'>the</span> <span m='617520'>sum</span> <span m='618180'>could</span>
  <span m='618360'>not</span> <span m='618630'>be,</span> <span m='619690'>as</span>
  <span m='619800'>far</span> <span m='619980'>as</span> <span m='620100'>we</span>
  <span m='620190'>know.</span> <span m='622770'>If</span> <span m='622920'>I</span>
  <span m='622980'>tell</span> <span m='623310'>you</span> <span m='623490'>what</span>
  <span m='624240'>that</span> <span m='624570'>composition</span> <span m='625170'>is</span>
  <span m='625260'>supposed</span> <span m='625620'>to</span> <span m='625740'>be,</span>
  <span m='625980'>I</span> <span m='626070'>can</span> <span m='626250'>check</span>
  <span m='627210'>does</span> <span m='627630'>4</span> <span m='628200'>go</span>
  <span m='628410'>to</span> <span m='628530'>1?</span> <span m='629280'>Yes</span>
  <span m='629520'>or</span> <span m='629610'>no?</span> <span m='630610'>Does</span>
  <span m='630840'>3</span> <span m='631260'>go</span> <span m='631540'>to</span>
  <span m='631850'>3?</span> <span m='632670'>Yes</span> <span m='632880'>or</span>
  <span m='632970'>no?</span> <span m='633370'>Does</span> <span m='633510'>2</span>
  <span m='633940'>go</span> <span m='634260'>to</span> <span m='635020'>4?</span>
  <span m='635520'>Yes</span> <span m='635790'>or</span> <span m='635850'>no?</span>
  <span m='636110'>Does</span> <span m='636180'>1</span> <span m='636510'>go</span>
  <span m='636720'>to</span> <span m='637400'>2?</span> <span m='637780'>Yes</span>
  <span m='637980'>or</span> <span m='638070'>no?</span> </p><p><span m='638490'>So</span>
  <span m='638700'>with</span> <span m='638820'>4</span> <span m='639090'>queries,</span>
  <span m='639510'>I</span> <span m='639600'>can</span> <span m='639750'>check</span>
  <span m='640500'>whether</span> <span m='641160'>the</span> <span m='641280'>permutation</span>
  <span m='641910'>is</span> <span m='642090'>what</span> <span m='642240'>it</span>
  <span m='642360'>is.</span> <span m='644790'>If</span> <span m='644880'>any</span>
  <span m='645120'>of</span> <span m='645180'>those</span> <span m='645390'>fail,</span>
  <span m='645840'>then</span> <span m='646050'>I</span> <span m='646140'>return</span>
  <span m='646840'>no.</span> <span m='649890'>So</span> <span m='651120'>the</span>
  <span m='651210'>way</span> <span m='651330'>this</span> <span m='651480'>proceeds</span>
  <span m='651780'>is</span> <span m='651900'>first</span> <span m='652290'>we</span>
  <span m='652470'>proved</span> <span m='652770'>a</span> <span m='652850'>lower</span>
  <span m='653070'>bound</span> <span m='653400'>on</span> <span m='654300'>partial</span>
  <span m='654630'>sums,</span> <span m='655740'>which</span> <span m='655980'>is</span>
  <span m='656190'>computing</span> <span m='656880'>this</span> <span m='657090'>value</span>
  <span m='658650'>when</span> <span m='658830'>you're</span> <span m='658920'>not</span>
  <span m='659220'>told</span> <span m='659640'>what</span> <span m='659820'>the</span>
  <span m='659940'>answer</span> <span m='660240'>is.</span> <span m='661260'>And</span>
  <span m='661410'>then</span> <span m='661560'>we</span> <span m='661680'>extended</span>
  <span m='662130'>that,</span> <span m='662550'>and</span> <span m='662660'>we'll</span>
  <span m='663090'>do</span> <span m='663240'>such</span> <span m='663480'>a</span>
  <span m='663540'>proof</span> <span m='663780'>here</span> <span m='663900'>today.</span>
  </p><p><span m='664300'>First,</span> <span m='664500'>we're</span> <span m='664560'>going</span>
  <span m='664680'>to</span> <span m='664770'>prove</span> <span m='665130'>a</span>
  <span m='665190'>lower</span> <span m='665430'>bound</span> <span m='665670'>on</span>
  <span m='665850'>the</span> <span m='665940'>sum</span> <span m='666300'>operation,</span>
  <span m='666900'>which</span> <span m='667110'>is</span> <span m='667230'>computing</span>
  <span m='667680'>this</span> <span m='667830'>value</span> <span m='668880'>that's</span>
  <span m='669030'>on</span> <span m='669270'>our</span> <span m='670140'>outline</span>
  <span m='670530'>over</span> <span m='670710'>here,</span> <span m='671700'>sum</span>
  <span m='672000'>lower</span> <span m='672210'>bound.</span> <span m='674640'>And</span>
  <span m='674790'>then</span> <span m='675410'>we'll</span> <span m='675780'>extend</span>
  <span m='676260'>that</span> <span m='676530'>and</span> <span m='676620'>make</span>
  <span m='676770'>the</span> <span m='676860'>argument</span> <span m='677190'>a</span>
  <span m='677220'>little</span> <span m='677460'>bit</span> <span m='677580'>more</span>
  <span m='677730'>complicated,</span> <span m='678760'>then</span> <span m='678960'>we'll</span>
  <span m='679080'>get</span> <span m='679260'>an</span> <span m='679350'>actual</span>
  <span m='680380'>connectivity</span> <span m='680760'>lower</span> <span m='680940'>bound,</span>
  <span m='681150'>a</span> <span m='681180'>lower</span> <span m='681330'>bound</span>
  <span m='681570'>on</span> <span m='681720'>verify</span> <span m='682140'>sum.</span>
  </p><p><span m='683740'>OK,</span> <span m='684190'>but</span> <span m='684330'>obviously</span>
  <span m='684660'>if</span> <span m='684750'>we</span> <span m='684900'>can</span>
  <span m='685080'>prove</span> <span m='686010'>that</span> <span m='686430'>these</span>
  <span m='686700'>operations</span> <span m='687360'>take</span> <span m='687630'>a</span>
  <span m='687660'>long</span> <span m='687960'>time</span> <span m='688260'>to</span>
  <span m='688350'>do,</span> <span m='689490'>we</span> <span m='689730'>can</span>
  <span m='690000'>prove</span> <span m='690390'>that</span> <span m='690630'>these</span>
  <span m='690870'>original</span> <span m='691260'>operations</span> <span m='691890'>take</span>
  <span m='692580'>a</span> <span m='692670'>long</span> <span m='692910'>time</span>
  <span m='693150'>to</span> <span m='693240'>do.</span> <span m='694410'>So</span>
  <span m='696180'>what</span> <span m='696390'>we</span> <span m='696540'>claim</span>
  <span m='701130'>is</span> <span m='701370'>that</span> <span m='702420'>square</span>
  <span m='702520'>root</span> <span m='702620'>of</span> <span m='702810'>n</span>
  <span m='703110'>updates,</span> <span m='706700'>these</span> <span m='707220'>block</span>
  <span m='707580'>updates</span> <span m='708570'>plus</span> <span m='708780'>square</span>
  <span m='709130'>of</span> <span m='709630'>n</span> <span m='711090'>verify</span>
  <span m='711460'>some</span> <span m='711720'>queries,</span> <span m='718260'>require</span>
  <span m='725860'>root</span> <span m='726130'>n</span> <span m='727180'>times</span>
  <span m='727520'>root</span> <span m='728090'>n</span> <span m='728840'>log</span>
  <span m='729786'>n</span> <span m='731570'>cell</span> <span m='731960'>probes.</span>
  <span m='739190'>I</span> <span m='739250'>guess</span> <span m='739460'>this</span>
  <span m='739640'>is</span> <span m='739760'>the</span> <span m='740000'>amortized</span>
  <span m='740930'>claim.</span> </p><p><span m='742360'>So</span> <span m='742570'>if
  I</span> <span m='742650'>want</span> <span m='742850'>to</span> <span m='743000'>do</span>
  <span m='743210'>root</span> <span m='743330'>n updates</span> <span m='743730'>and</span>
  <span m='743850'>root n</span> <span m='744200'>queries,</span> <span m='745070'>and</span>
  <span m='745280'>I take</span> <span m='745550'>root</span> <span m='745820'>n</span>
  <span m='746150'>times</span> <span m='746430'>root</span> <span m='746610'>n times</span>
  <span m='747000'>log</span> <span m='747410'>n--</span> <span m='747590'>funny</span>
  <span m='747830'>way</span> <span m='747980'>of</span> <span m='748100'>writing</span>
  <span m='748430'>n</span> <span m='748580'>log</span> <span m='748920'>n--</span>
  <span m='749750'>cell</span> <span m='750110'>probes,</span> <span m='750860'>then</span>
  <span m='751670'>if</span> <span m='751850'>I</span> <span m='751970'>divide</span>
  <span m='752330'>through,</span> <span m='752540'>I</span> <span m='752630'>want</span>
  <span m='752780'>the</span> <span m='752840'>amortized</span> <span m='753290'>lower</span>
  <span m='753500'>bound,</span> <span m='753810'>I</span> <span m='754100'>lose</span>
  <span m='754400'>one</span> <span m='754610'>of</span> <span m='754700'>these</span>
  <span m='755620'>root</span> <span m='755900'>ns,</span> <span m='756350'>because</span>
  <span m='756680'>I'm</span> <span m='756770'>doing</span> <span m='757070'>different</span>
  <span m='757370'>operations.</span> <span m='758030'>I</span> <span m='758120'>lose</span>
  <span m='758330'>another</span> <span m='758660'>root</span> <span m='758840'>n,</span>
  <span m='758990'>because</span> <span m='759290'>each</span> <span m='759440'>of</span>
  <span m='759500'>these</span> <span m='759680'>updates</span> <span m='760580'>corresponds</span>
  <span m='761040'>to</span> <span m='761150'>root</span> <span m='761280'>n</span>
  <span m='761390'>operations.</span> <span m='761705'>Each of</span> <span m='762020'>the</span>
  <span m='762200'>verify</span> <span m='762530'>sums</span> <span m='762860'>corresponds</span>
  <span m='763370'>to</span> <span m='763460'>root</span> <span m='763610'>n</span>
  <span m='763700'>operations.</span> <span m='764660'>So</span> <span m='764810'>overall</span>
  <span m='765230'>per</span> <span m='765500'>operation,</span> <span m='766940'>per</span>
  <span m='767180'>original</span> <span m='767600'>operation</span> <span m='768080'>of</span>
  <span m='768170'>edge</span> <span m='768380'>deletion</span> <span m='768770'>insertion</span>
  <span m='769310'>or</span> <span m='769410'>connectivity</span> <span m='769940'>query,</span>
  <span m='770660'>I'm</span> <span m='770780'>paying</span> <span m='771020'>log</span>
  <span m='771290'>n</span> <span m='771440'>per</span> <span m='771770'>operation.</span>
  </p><p><span m='772440'>So</span> <span m='772460'>if</span> <span m='772610'>I</span>
  <span m='772700'>can</span> <span m='772820'>prove</span> <span m='773030'>this</span>
  <span m='773180'>claim,</span> <span m='774260'>then</span> <span m='774590'>I</span>
  <span m='774680'>get</span> <span m='774950'>this</span> <span m='775200'>theorem.</span>
  <span m='777474'>All</span> <span m='777960'>clear?</span> <span m='779020'>So</span>
  <span m='780030'>now</span> <span m='780240'>we've</span> <span m='780420'>reduced</span>
  <span m='780690'>the</span> <span m='780780'>problem</span> <span m='781080'>to</span>
  <span m='781200'>these</span> <span m='781410'>bulk</span> <span m='781680'>operations,</span>
  <span m='782250'>we'll</span> <span m='782400'>just</span> <span m='782670'>be</span>
  <span m='782790'>thinking</span> <span m='783030'>about</span> <span m='783210'>the</span>
  <span m='783300'>bulk</span> <span m='783540'>operations,</span> <span m='784080'>update</span>
  <span m='784440'>verify</span> <span m='784800'>sum.</span> <span m='785160'>We</span>
  <span m='785280'>won't</span> <span m='785850'>think</span> <span m='786060'>about</span>
  <span m='786240'>edge</span> <span m='786540'>deletion</span> <span m='786840'>insertions</span>
  <span m='787320'>and</span> <span m='787410'>connectivity</span> <span m='787920'>queries</span>
  <span m='788220'>anymore.</span> </p><p><span m='794813'>OK.</span> <span m='798180'>So</span>
  <span m='798560'>this</span> <span m='798830'>is</span> <span m='799400'>just</span>
  <span m='799580'>sort</span> <span m='799730'>of</span> <span m='799790'>the</span>
  <span m='799910'>general</span> <span m='800240'>set</span> <span m='800420'>up</span>
  <span m='800600'>of</span> <span m='800720'>what</span> <span m='800870'>the</span>
  <span m='800960'>graphs</span> <span m='801300'>are</span> <span m='801350'>going</span>
  <span m='801470'>to</span> <span m='801530'>look</span> <span m='801710'>like.</span>
  <span m='802650'>And</span> <span m='802670'>now</span> <span m='802820'>I'm</span>
  <span m='802880'>going</span> <span m='803000'>to</span> <span m='803060'>tell</span>
  <span m='803330'>you</span> <span m='803630'>what</span> <span m='804380'>sequence</span>
  <span m='804920'>of</span> <span m='805070'>updates</span> <span m='805460'>and</span>
  <span m='805550'>verify</span> <span m='805880'>sums</span> <span m='806210'>we're</span>
  <span m='806300'>actually</span> <span m='806660'>going</span> <span m='806810'>to</span>
  <span m='806870'>do</span> <span m='807110'>that</span> <span m='807260'>are</span>
  <span m='807380'>bad.</span> <span m='808840'>This</span> <span m='809060'>is</span>
  <span m='809270'>the</span> <span m='810560'>bad</span> <span m='810860'>access</span>
  <span m='811190'>sequence.</span> <span m='819930'>And</span> <span m='820030'>this</span>
  <span m='820070'>is</span> <span m='820190'>actually</span> <span m='820490'>something</span>
  <span m='820850'>we've</span> <span m='821000'>seen</span> <span m='821210'>before</span>
  <span m='821630'>in</span> <span m='821960'>lecture</span> <span m='822310'>6,</span>
  <span m='822670'>I</span> <span m='822740'>think,</span> <span m='822980'>the</span>
  <span m='823070'>binary</span> <span m='823430'>search</span> <span m='823670'>tree</span>
  <span m='823970'>stuff.</span> </p><p><span m='829300'>We're</span> <span m='829460'>going</span>
  <span m='829580'>to</span> <span m='829670'>look</span> <span m='829910'>at</span>
  <span m='830420'>the</span> <span m='830570'>bit</span> <span m='830810'>reversal</span>
  <span m='831290'>sequence.</span> <span m='840620'>So</span> <span m='840920'>you</span>
  <span m='841010'>may</span> <span m='841160'>recall</span> <span m='841610'>a</span>
  <span m='841640'>bit</span> <span m='841820'>reversal</span> <span m='842210'>sequence.</span>
  <span m='843830'>You</span> <span m='844370'>take</span> <span m='845870'>binary</span>
  <span m='846170'>numbers</span> <span m='848570'>in</span> <span m='848720'>order,</span>
  <span m='851810'>reverse</span> <span m='853490'>the</span> <span m='853610'>bits.</span>
  <span m='854580'>So</span> <span m='854940'>this</span> <span m='855140'>becomes</span>
  <span m='855660'>000,</span> <span m='857570'>100,</span> <span m='859040'>010,</span>
  <span m='859760'>110,</span> <span m='861728'>001,</span> <span m='864090'>101,</span>
  <span m='865640'>011,</span> <span m='866820'>and</span> <span m='867060'>111.</span>
  <span m='868370'>So</span> <span m='868490'>those</span> <span m='868730'>are</span>
  <span m='868790'>the</span> <span m='869960'>reversed</span> <span m='871240'>strings.</span>
  </p><p><span m='873620'>And</span> <span m='873740'>then</span> <span m='873890'>you</span>
  <span m='874190'>reinterpret</span> <span m='874790'>those</span> <span m='875060'>as</span>
  <span m='875270'>regular</span> <span m='875630'>numbers.</span> <span m='875970'>So</span>
  <span m='876080'>this</span> <span m='876290'>is</span> <span m='876380'>0,</span>
  <span m='877280'>4,</span> <span m='877940'>2,</span> <span m='878700'>6,</span>
  <span m='883250'>and</span> <span m='883400'>then</span> <span m='883520'>it</span>
  <span m='883580'>should</span> <span m='883730'>be</span> <span m='883820'>the</span>
  <span m='883910'>same</span> <span m='884180'>thing,</span> <span m='884390'>but</span>
  <span m='884480'>the</span> <span m='884630'>odd</span> <span m='884840'>version.</span>
  <span m='885160'>So</span> <span m='885360'>I</span> <span m='885420'>have</span>
  <span m='885560'>1,</span> <span m='886400'>5,</span> <span m='887540'>3,</span>
  <span m='888650'>7.</span> </p><p><span m='891926'>OK,</span> <span m='893810'>I</span>
  <span m='894200'>claimed,</span> <span m='894650'>I</span> <span m='894710'>think</span>
  <span m='894920'>probably</span> <span m='895190'>didn't</span> <span m='895880'>prove,</span>
  <span m='896270'>that</span> <span m='896600'>this</span> <span m='896900'>bit</span>
  <span m='897260'>reversal</span> <span m='897650'>sequence</span> <span m='898010'>has</span>
  <span m='898250'>a</span> <span m='898310'>high</span> <span m='898700'>Wilber</span>
  <span m='899060'>lower</span> <span m='899330'>bound.</span> <span m='900760'>And</span>
  <span m='900860'>so</span> <span m='901310'>any</span> <span m='901700'>binary</span>
  <span m='902060'>search</span> <span m='902360'>tree</span> <span m='903130'>accessing</span>
  <span m='904130'>items</span> <span m='904460'>in</span> <span m='904520'>this</span>
  <span m='904670'>order</span> <span m='904890'>requires</span> <span m='905210'>log</span>
  <span m='905450'>n</span> <span m='905570'>per</span> <span m='905915'>operation.</span>
  <span m='906470'>And</span> <span m='906560'>we</span> <span m='906680'>want</span>
  <span m='906890'>log</span> <span m='907130'>n</span> <span m='907250'>per</span>
  <span m='907535'>operation</span> <span m='907820'>here,</span> <span m='908130'>so</span>
  <span m='908150'>it</span> <span m='908210'>seems</span> <span m='908450'>like</span>
  <span m='908570'>a</span> <span m='908630'>good</span> <span m='908780'>choice,</span>
  <span m='909080'>why</span> <span m='909260'>not?</span> </p><p><span m='910430'>So</span>
  <span m='910640'>we're</span> <span m='910760'>going</span> <span m='910880'>to</span>
  <span m='910940'>follow</span> <span m='911420'>this</span> <span m='911710'>access</span>
  <span m='912080'>sequence.</span> <span m='913580'>And</span> <span m='913760'>sorry,</span>
  <span m='914000'>I've</span> <span m='914150'>changed</span> <span m='914450'>notation</span>
  <span m='914960'>here,</span> <span m='915170'>we're</span> <span m='915260'>going</span>
  <span m='915380'>to</span> <span m='916220'>number</span> <span m='916670'>the</span>
  <span m='916820'>permutations</span> <span m='917450'>from</span> <span m='917660'>0</span>
  <span m='918320'>to</span> <span m='918560'>root</span> <span m='918700'>n</span>
  <span m='918890'>minus</span> <span m='919190'>1</span> <span m='919445'>now.</span>
  <span m='921710'>And</span> <span m='921950'>assume</span> <span m='922460'>root</span>
  <span m='922710'>n</span> <span m='923020'>is</span> <span m='923210'>a</span> <span
  m='923330'>power</span> <span m='923600'>of</span> <span m='923720'>2,</span> <span
  m='924270'>so</span> <span m='924410'>the bit</span> <span m='924640'>reversal</span>
  <span m='924990'>sequence</span> <span m='925320'>is</span> <span m='925610'>well</span>
  <span m='925760'>defined.</span> <span m='927140'>And</span> <span m='927620'>then</span>
  <span m='928070'>we</span> <span m='929060'>are</span> <span m='929180'>going</span>
  <span m='929390'>to</span> <span m='929510'>do</span> <span m='929630'>two</span>
  <span m='929900'>things</span> <span m='933530'>for</span> <span m='933680'>each</span>
  <span m='934000'>such</span> <span m='934280'>i.</span> <span m='934940'>We're</span>
  <span m='935300'>going</span> <span m='935470'>to</span> <span m='935580'>do</span>
  <span m='935700'>a</span> <span m='935750'>verify</span> <span m='936170'>sum</span>
  <span m='936470'>operation.</span> <span m='949010'>Actually</span> <span m='949250'>maybe</span>
  <span m='949550'>it is</span> <span m='949690'>starting</span> <span m='950060'>at</span>
  <span m='950140'>1,</span> <span m='950430'>I</span> <span m='950530'>don't</span>
  <span m='950610'>know.</span> <span m='951642'>It</span> <span m='952063'>doesn't</span>
  <span m='952484'>matter.</span> <span m='953330'>And</span> <span m='953540'>then</span>
  <span m='953810'>we'll</span> <span m='953930'>do</span> <span m='954230'>an</span>
  <span m='954320'>update</span> </p><p><span m='966250'>OK,</span> <span m='966820'>so</span>
  <span m='968670'>let's</span> <span m='968820'>see.</span> <span m='969010'>This</span>
  <span m='969290'>pi</span> <span m='969580'>random</span> <span m='970000'>is</span>
  <span m='970090'>just</span> <span m='970270'>a</span> <span m='970330'>uniform</span>
  <span m='970840'>random</span> <span m='971080'>permutation,</span> <span m='971860'>it's</span>
  <span m='972490'>computed</span> <span m='973570'>fresh</span> <span m='974050'>every</span>
  <span m='974290'>time.</span> <span m='975400'>So</span> <span m='975550'>we're</span>
  <span m='975640'>just</span> <span m='975940'>re-randomizing</span> <span m='976990'>pi</span>
  <span m='977275'>i</span> <span m='979180'>in</span> <span m='979300'>this</span>
  <span m='979510'>operation.</span> <span m='980380'>Before</span> <span m='980710'>we</span>
  <span m='980830'>do</span> <span m='980980'>that,</span> <span m='981610'>we're</span>
  <span m='981760'>checking</span> <span m='982300'>that</span> <span m='982830'>the</span>
  <span m='983080'>sum,</span> <span m='983440'>the</span> <span m='983560'>composition</span>
  <span m='984250'>of</span> <span m='984460'>all</span> <span m='984610'>the</span>
  <span m='984730'>permutations</span> <span m='985390'>up</span> <span m='985600'>to</span>
  <span m='985720'>position</span> <span m='986220'>i,</span> <span m='987340'>is</span>
  <span m='987640'>what</span> <span m='987820'>it</span> <span m='987940'>is.</span>
  <span m='988750'>So</span> <span m='988900'>this</span> <span m='989110'>is</span>
  <span m='989230'>the</span> <span m='989350'>actual</span> <span m='989830'>value</span>
  <span m='990250'>here,</span> <span m='991300'>and</span> <span m='991420'>we're</span>
  <span m='991570'>verifying</span> <span m='993460'>that</span> <span m='993700'>that</span>
  <span m='993910'>is</span> <span m='994300'>indeed</span> <span m='994660'>the</span>
  <span m='994780'>sum.</span> <span m='995390'>So</span> <span m='995440'>this</span>
  <span m='995620'>will</span> <span m='995740'>always</span> <span m='996010'>return</span>
  <span m='996370'>yes.</span> </p><p><span m='999100'>But</span> <span m='999670'>data</span>
  <span m='1000090'>structure</span> <span m='1000630'>has</span> <span m='1000870'>to</span>
  <span m='1000990'>be</span> <span m='1001140'>correct.</span> <span m='1001750'>So</span>
  <span m='1001890'>it</span> <span m='1001980'>needs</span> <span m='1002160'>to</span>
  <span m='1002280'>really</span> <span m='1002670'>verify</span> <span m='1003210'>that</span>
  <span m='1003360'>that</span> <span m='1003540'>is</span> <span m='1003660'>the</span>
  <span m='1003750'>case.</span> <span m='1005050'>There's</span> <span m='1005310'>the</span>
  <span m='1005430'>threat</span> <span m='1005880'>that</span> <span m='1006030'>maybe</span>
  <span m='1006270'>we</span> <span m='1006390'>gave</span> <span m='1006630'>the</span>
  <span m='1006720'>wrong</span> <span m='1007020'>answer</span> <span m='1007350'>here,</span>
  <span m='1008100'>and</span> <span m='1008250'>it</span> <span m='1008310'>needs</span>
  <span m='1008520'>to</span> <span m='1008790'>double</span> <span m='1009060'>check</span>
  <span m='1009360'>that</span> <span m='1009480'>that</span> <span m='1009660'>is</span>
  <span m='1009840'>indeed</span> <span m='1010170'>the</span> <span m='1010260'>right</span>
  <span m='1010440'>answer.</span> <span m='1011190'>It</span> <span m='1011340'>may</span>
  <span m='1011460'>seem</span> <span m='1011700'>a</span> <span m='1011730'>little</span>
  <span m='1011910'>weird,</span> <span m='1012280'>but</span> <span m='1012360'>we'll</span>
  <span m='1012510'>see</span> <span m='1013200'>why</span> <span m='1013440'>it</span>
  <span m='1013530'>works.</span> </p><p><span m='1014140'>So</span> <span m='1014190'>this</span>
  <span m='1014400'>is</span> <span m='1014580'>the</span> <span m='1014730'>bad</span>
  <span m='1015000'>access</span> <span m='1015270'>sequence.</span> <span m='1016410'>Just</span>
  <span m='1016560'>do</span> <span m='1016680'>a</span> <span m='1016740'>query,</span>
  <span m='1017100'>do</span> <span m='1017220'>an</span> <span m='1017310'>update</span>
  <span m='1018720'>in</span> <span m='1018960'>this</span> <span m='1019650'>weird</span>
  <span m='1019950'>order</span> <span m='1020990'>in</span> <span m='1021270'>i.</span>
  <span m='1023540'>OK,</span> <span m='1024359'>and</span> <span m='1024780'>big</span>
  <span m='1024990'>idea</span> <span m='1025890'>is</span> <span m='1026160'>to</span>
  <span m='1029460'>build</span> <span m='1030030'>a</span> <span m='1030089'>nice</span>
  <span m='1030420'>balanced</span> <span m='1030869'>binary</span> <span m='1031230'>tree</span>
  <span m='1033420'>over</span> <span m='1033690'>time.</span> <span m='1038079'>So</span>
  <span m='1038310'>we</span> <span m='1038520'>have</span> <span m='1039030'>on</span>
  <span m='1039300'>the</span> <span m='1040170'>ground</span> <span m='1040560'>here</span>
  <span m='1040839'>0,</span> <span m='1041104'>4,</span> <span m='1041369'>2,</span>
  <span m='1041866'>6,</span> <span m='1043854'>1,</span> <span m='1044849'>5,</span>
  <span m='1045630'>3,</span> <span m='1046072'>7.</span> <span m='1046514'>And</span>
  <span m='1047400'>when</span> <span m='1047550'>I</span> <span m='1047640'>write</span>
  <span m='1047970'>5,</span> <span m='1048480'>I</span> <span m='1048569'>mean</span>
  <span m='1048900'>verify</span> <span m='1049950'>sum of</span> <span m='1050400'>5,</span>
  <span m='1051000'>and</span> <span m='1051270'>update</span> <span m='1052140'>permutation</span>
  <span m='1052710'>5.</span> <span m='1053820'>And</span> <span m='1053910'>then</span>
  <span m='1054090'>we</span> <span m='1054240'>can</span> <span m='1054390'>build</span>
  <span m='1054950'>a</span> <span m='1054990'>binary</span> <span m='1055350'>tree</span>
  <span m='1055590'>on</span> <span m='1055710'>that.</span> </p><p><span m='1061900'>And</span>
  <span m='1061980'>for</span> <span m='1062130'>each</span> <span m='1062280'>node</span>
  <span m='1062520'>in</span> <span m='1062610'>this</span> <span m='1062790'>tree,</span>
  <span m='1063570'>we</span> <span m='1063660'>have</span> <span m='1063900'>the</span>
  <span m='1063960'>notion</span> <span m='1064260'>of</span> <span m='1064380'>a</span>
  <span m='1064420'>left</span> <span m='1064560'>subtree,</span> <span m='1065790'>and</span>
  <span m='1065880'>we</span> <span m='1065940'>have</span> <span m='1066060'>the</span>
  <span m='1066120'>notion</span> <span m='1066390'>of</span> <span m='1066510'>a
  right</span> <span m='1066890'>subtree.</span> <span m='1068010'>And</span> <span
  m='1068190'>cool</span> <span m='1068430'>thing</span> <span m='1068790'>about</span>
  <span m='1069120'>bit</span> <span m='1069300'>reversal</span> <span m='1069690'>sequence</span>
  <span m='1069990'>is</span> <span m='1070620'>this</span> <span m='1071340'>nice</span>
  <span m='1071550'>self-similarity.</span> <span m='1072960'>If</span> <span m='1073020'>you</span>
  <span m='1073140'>look</span> <span m='1073350'>at</span> <span m='1073500'>the</span>
  <span m='1073620'>left</span> <span m='1073890'>subtree</span> <span m='1074460'>of</span>
  <span m='1074550'>any</span> <span m='1075000'>node</span> <span m='1075330'>and</span>
  <span m='1075420'>the</span> <span m='1075510'>right</span> <span m='1075860'>subtree</span>
  <span m='1075990'>of</span> <span m='1076080'>any</span> <span m='1076360'>of</span>
  <span m='1076440'>node,</span> <span m='1076770'>those</span> <span m='1077070'>items</span>
  <span m='1077410'>interleave.</span> </p><p><span m='1078630'>If</span> <span m='1078750'>you</span>
  <span m='1078810'>look</span> <span m='1078960'>at</span> <span m='1079020'>the</span>
  <span m='1079110'>sorted</span> <span m='1079380'>order,</span> <span m='1079590'>it's</span>
  <span m='1079710'>1</span> <span m='1080400'>on</span> <span m='1080520'>the</span>
  <span m='1080610'>left,</span> <span m='1080910'>3</span> <span m='1081210'>on</span>
  <span m='1081300'>the</span> <span m='1081390'>right,</span> <span m='1081660'>5</span>
  <span m='1081990'>on</span> <span m='1082050'>the</span> <span m='1082140'>left,</span>
  <span m='1082440'>7</span> <span m='1082800'>on</span> <span m='1082920'>the</span>
  <span m='1082980'>right.</span> <span m='1083190'>They</span> <span m='1083730'>always</span>
  <span m='1083910'>perfectly</span> <span m='1084420'>interleave,</span> <span m='1084900'>because</span>
  <span m='1085080'>this</span> <span m='1085230'>thing</span> <span m='1085410'>is</span>
  <span m='1085500'>designed</span> <span m='1085950'>to</span> <span m='1086070'>interleave</span>
  <span m='1086520'>at</span> <span m='1086610'>every</span> <span m='1086910'>possible</span>
  <span m='1087300'>level.</span> <span m='1089310'>So</span> <span m='1089700'>that's</span>
  <span m='1090120'>the</span> <span m='1090840'>fact</span> <span m='1091140'>we're</span>
  <span m='1091230'>going</span> <span m='1091410'>to</span> <span m='1091500'>use.</span>
  <span m='1092190'>We're</span> <span m='1092250'>going</span> <span m='1092370'>to</span>
  <span m='1092520'>analyze</span> <span m='1093090'>each</span> <span m='1093360'>node</span>
  <span m='1093840'>separately,</span> <span m='1095580'>and</span> <span m='1095790'>talk</span>
  <span m='1096090'>about</span> <span m='1098460'>what</span> <span m='1098670'>information</span>
  <span m='1099840'>has</span> <span m='1100080'>to</span> <span m='1100200'>be</span>
  <span m='1100320'>carried</span> <span m='1101280'>from</span> <span m='1101550'>the</span>
  <span m='1101640'>left</span> <span m='1101880'>subtree</span> <span m='1102690'>to</span>
  <span m='1102810'>the</span> <span m='1102930'>right</span> <span m='1103140'>subtree.</span>
  </p><p><span m='1104340'>In</span> <span m='1104460'>particular,</span> <span m='1104980'>we're</span>
  <span m='1105080'>interested</span> <span m='1105600'>in</span> <span m='1106050'>the</span>
  <span m='1106290'>updates</span> <span m='1106860'>being</span> <span m='1107100'>done</span>
  <span m='1107340'>on</span> <span m='1107430'>the</span> <span m='1107490'>left</span>
  <span m='1107730'>subtree,</span> <span m='1108150'>because</span> <span m='1108330'>here</span>
  <span m='1108480'>we</span> <span m='1108600'>change</span> <span m='1108960'>pi</span>
  <span m='1109160'>1,</span> <span m='1109410'>we</span> <span m='1109500'>change</span>
  <span m='1109830'>pi</span> <span m='1110070'>5.</span> <span m='1111150'>And</span>
  <span m='1111300'>the</span> <span m='1111390'>query's</span> <span m='1111930'>being</span>
  <span m='1112170'>done</span> <span m='1112380'>on</span> <span m='1112500'>the</span>
  <span m='1112710'>right</span> <span m='1112920'>subtree,</span> <span m='1113300'>because</span>
  <span m='1113460'>here</span> <span m='1113580'>we</span> <span m='1113670'>query</span>
  <span m='1115140'>3,</span> <span m='1115750'>we</span> <span m='1115920'>query</span>
  <span m='1116250'>7.</span> <span m='1116610'>When</span> <span m='1116730'>we</span>
  <span m='1116820'>query</span> <span m='1117120'>3,</span> <span m='1117960'>that</span>
  <span m='1118170'>queries</span> <span m='1118620'>everything,</span> <span m='1119310'>all</span>
  <span m='1119460'>the</span> <span m='1119550'>permutations,</span> <span m='1120170'>up</span>
  <span m='1120360'>to</span> <span m='1120480'>3.</span> <span m='1120690'>It's</span>
  <span m='1120810'>a</span> <span m='1120870'>composition</span> <span m='1121470'>of</span>
  <span m='1121560'>all</span> <span m='1121740'>permutations</span> <span m='1122400'>up</span>
  <span m='1122580'>to</span> <span m='1122700'>3.</span> <span m='1123380'>So</span>
  <span m='1123540'>in</span> <span m='1123600'>particular</span> <span m='1124080'>it</span>
  <span m='1124140'>involves</span> <span m='1124530'>1.</span> <span m='1125340'>So</span>
  <span m='1125580'>the</span> <span m='1125850'>claim</span> <span m='1126150'>is</span>
  <span m='1126210'>going</span> <span m='1126360'>to</span> <span m='1126450'>be</span>
  <span m='1126570'>that</span> <span m='1126720'>the</span> <span m='1126810'>permutation</span>
  <span m='1127440'>that</span> <span m='1127530'>we</span> <span m='1127620'>set</span>
  <span m='1127860'>in</span> <span m='1127950'>1</span> <span m='1128670'>has</span>
  <span m='1128880'>to</span> <span m='1129000'>be</span> <span m='1129420'>carried</span>
  <span m='1129840'>over</span> <span m='1130080'>to</span> <span m='1130200'>this</span>
  <span m='1130380'>query.</span> <span m='1131220'>And</span> <span m='1131310'>similarly,</span>
  <span m='1132880'>a</span> <span m='1133380'>changing</span> <span m='1133890'>permutation</span>
  <span m='1134400'>5</span> <span m='1134670'>will</span> <span m='1134760'>affect</span>
  <span m='1135060'>the</span> <span m='1135150'>query</span> <span m='1135420'>for</span>
  <span m='1135540'>7.</span> <span m='1135990'>Also</span> <span m='1136440'>query,</span>
  <span m='1137080'>the</span> <span m='1137250'>update</span> <span m='1137550'>for</span>
  <span m='1137700'>1,</span> <span m='1137940'>will</span> <span m='1138060'>affect</span>
  <span m='1138360'>the</span> <span m='1138480'>query</span> <span m='1138750'>for</span>
  <span m='1138870'>7.</span> <span m='1140550'>So</span> <span m='1141270'>we</span>
  <span m='1141570'>need</span> <span m='1141720'>to</span> <span m='1141810'>formalize</span>
  <span m='1142260'>that</span> <span m='1142500'>little</span> <span m='1142740'>bit.</span>
  </p><p><span m='1150630'>So</span> <span m='1151120'>here</span> <span m='1151440'>is</span>
  <span m='1151630'>the</span> <span m='1151780'>claim.</span> <span m='1158020'>For</span>
  <span m='1158170'>every</span> <span m='1158590'>node</span> <span m='1159960'>in</span>
  <span m='1160070'>the</span> <span m='1160710'>tree,</span> <span m='1166760'>say</span>
  <span m='1167900'>it</span> <span m='1168760'>has</span> <span m='1169410'>l</span>
  <span m='1169660'>leaves</span> <span m='1174400'>in</span> <span m='1174690'>its</span>
  <span m='1174910'>subtree--</span> <span m='1182742'>This</span> <span m='1183190'>should</span>
  <span m='1183380'>be</span> <span m='1183500'>a</span> <span m='1183530'>comma</span>
  <span m='1183800'>and</span> <span m='1184070'>this</span> <span m='1184400'>should</span>
  <span m='1184730'>be</span> <span m='1185210'>a</span> <span m='1185654'>colon.</span>
  <span m='1187430'>Here's</span> <span m='1188230'>what</span> <span m='1188330'>we</span>
  <span m='1188390'>say.</span> <span m='1191060'>During</span> <span m='1191570'>the</span>
  <span m='1191690'>right</span> <span m='1191990'>subtree</span> <span m='1192680'>of</span>
  <span m='1193170'>v,</span> <span m='1194220'>so</span> <span m='1194580'>right</span>
  <span m='1194750'>subtree</span> <span m='1194960'>corresponds</span> <span m='1195500'>to</span>
  <span m='1195620'>an</span> <span m='1195680'>interval</span> <span m='1196100'>of</span>
  <span m='1196190'>time.</span> <span m='1197850'>So</span> <span m='1197930'>we're</span>
  <span m='1198110'>talking</span> <span m='1198440'>about</span> <span m='1199160'>those</span>
  <span m='1199700'>operations</span> <span m='1200510'>done</span> <span m='1200750'>during</span>
  <span m='1200990'>the</span> <span m='1201080'>right</span> <span m='1201230'>subtree</span>
  <span m='1201670'>of</span> <span m='1201760'>v.</span> <span m='1204950'>Claim</span>
  <span m='1205310'>is</span> <span m='1205760'>we</span> <span m='1205910'>must</span>
  <span m='1206270'>do</span> <span m='1207900'>omega</span> <span m='1209600'>l</span>
  <span m='1209900'>root</span> <span m='1210170'>n</span> <span m='1210560'>cell</span>
  <span m='1210910'>probes--</span> <span m='1215898'>sorry,</span> <span m='1217380'>expected</span>
  <span m='1218170'>cell probes.</span> </p><p><span m='1221950'>We</span> <span m='1222100'>are</span>
  <span m='1222970'>using</span> <span m='1223300'>some</span> <span m='1223510'>randomness</span>
  <span m='1224020'>here,</span> <span m='1224410'>right?</span> <span m='1224490'>We</span>
  <span m='1224620'>said</span> <span m='1225160'>we're</span> <span m='1225340'>going</span>
  <span m='1225460'>to</span> <span m='1225550'>update</span> <span m='1226690'>each</span>
  <span m='1226840'>permutation</span> <span m='1227350'>to a</span> <span m='1227480'>random</span>
  <span m='1227800'>value,</span> <span m='1228190'>so</span> <span m='1228340'>we</span>
  <span m='1228430'>can</span> <span m='1228550'>only</span> <span m='1228730'>make</span>
  <span m='1228880'>claims</span> <span m='1229210'>about</span> <span m='1229420'>the</span>
  <span m='1229480'>expected</span> <span m='1230440'>performance.</span> <span m='1234710'>Fine.</span>
  <span m='1236620'>But</span> <span m='1236740'>that's</span> <span m='1237040'>actually</span>
  <span m='1237520'>a</span> <span m='1237550'>stronger</span> <span m='1237910'>thing,</span>
  <span m='1238090'>it</span> <span m='1238170'>implies</span> <span m='1238660'>a</span>
  <span m='1239380'>lower</span> <span m='1239590'>bound,</span> <span m='1239830'>even</span>
  <span m='1240040'>for</span> <span m='1240190'>randomized</span> <span m='1240670'>algorithms.</span>
  <span m='1241150'>So if</span> <span m='1241270'>you</span> <span m='1241390'>can</span>
  <span m='1241630'>randomize</span> <span m='1242200'>your</span> <span m='1242350'>input</span>
  <span m='1242640'>set.</span> <span m='1245890'>And</span> <span m='1246100'>then</span>
  <span m='1247810'>not</span> <span m='1248020'>just</span> <span m='1248230'>any</span>
  <span m='1248410'>cell</span> <span m='1248650'>probes,</span> <span m='1249640'>but</span>
  <span m='1249790'>they're</span> <span m='1250480'>cell</span> <span m='1250750'>probes</span>
  <span m='1251080'>that</span> <span m='1251230'>read</span> <span m='1251620'>cells</span>
  <span m='1252940'>last</span> <span m='1253360'>written</span> <span m='1255490'>during</span>
  <span m='1255940'>the</span> <span m='1256030'>left</span> <span m='1256300'>subtree.</span>
  </p><p></p><p><span m='1268440'>So</span> <span m='1268550'>this</span> <span m='1268760'>is</span>
  <span m='1268940'>what</span> <span m='1269120'>I</span> <span m='1269180'>was</span>
  <span m='1271040'>saying</span> <span m='1271310'>at</span> <span m='1271400'>a</span>
  <span m='1271460'>high</span> <span m='1271580'>level</span> <span m='1271850'>before.</span>
  <span m='1272690'>We're</span> <span m='1272840'>looking</span> <span m='1273170'>at</span>
  <span m='1273530'>reads</span> <span m='1274010'>over</span> <span m='1274250'>here,</span>
  <span m='1276350'>to</span> <span m='1276590'>cells</span> <span m='1277160'>that</span>
  <span m='1277310'>are</span> <span m='1277400'>written</span> <span m='1277760'>over</span>
  <span m='1278000'>here.</span> <span m='1279440'>Because</span> <span m='1279860'>we</span>
  <span m='1280010'>claim</span> <span m='1280400'>the</span> <span m='1280580'>updates</span>
  <span m='1281030'>over</span> <span m='1281240'>here</span> <span m='1282140'>have</span>
  <span m='1282470'>to</span> <span m='1282620'>store</span> <span m='1282890'>some</span>
  <span m='1283070'>information</span> <span m='1283760'>that</span> <span m='1283910'>is--</span>
  <span m='1284750'>whatever</span> <span m='1285460'>the</span> <span m='1285770'>updates</span>
  <span m='1286170'>that</span> <span m='1286290'>happen</span> <span m='1286490'>over</span>
  <span m='1286640'>here</span> <span m='1287330'>influence</span> <span m='1288440'>the</span>
  <span m='1288740'>queries</span> <span m='1289160'>that</span> <span m='1289280'>happen</span>
  <span m='1289550'>over</span> <span m='1289730'>here.</span> <span m='1290050'>So</span>
  <span m='1290120'>these</span> <span m='1290330'>queries</span> <span m='1290660'>have</span>
  <span m='1290870'>to</span> <span m='1290960'>read</span> <span m='1291230'>the</span>
  <span m='1291320'>data</span> <span m='1291620'>that</span> <span m='1291770'>was</span>
  <span m='1291920'>written</span> <span m='1292130'>over</span> <span m='1292340'>here.</span>
  </p><p><span m='1293630'>And</span> <span m='1293840'>specifically,</span> <span
  m='1294600'>we're</span> <span m='1294650'>claiming</span> <span m='1295250'>at</span>
  <span m='1295340'>least</span> <span m='1296150'>l</span> <span m='1296480'>root</span>
  <span m='1296720'>n</span> <span m='1296990'>cell</span> <span m='1297260'>probes</span>
  <span m='1297650'>have</span> <span m='1297920'>to</span> <span m='1298010'>be</span>
  <span m='1298160'>read</span> <span m='1298430'>over</span> <span m='1298640'>here,</span>
  <span m='1300140'>from</span> <span m='1300410'>cells</span> <span m='1300830'>that</span>
  <span m='1300950'>were</span> <span m='1301250'>written--</span> <span m='1302420'>that</span>
  <span m='1302540'>were</span> <span m='1302660'>basically</span> <span m='1303080'>just</span>
  <span m='1303410'>written</span> <span m='1303980'>in</span> <span m='1304220'>the</span>
  <span m='1304310'>left</span> <span m='1304520'>subtree.</span> <span m='1305870'>If</span>
  <span m='1306020'>we</span> <span m='1306140'>could</span> <span m='1306290'>prove</span>
  <span m='1306620'>this,</span> <span m='1308470'>then</span> <span m='1308660'>we</span>
  <span m='1308780'>get</span> <span m='1308990'>our</span> <span m='1309650'>other</span>
  <span m='1309920'>claim--</span> <span m='1310490'>this</span> <span m='1310760'>one</span>
  <span m='1311870'>over</span> <span m='1312110'>here,</span> <span m='1312620'>that</span>
  <span m='1312770'>root</span> <span m='1313130'>n</span> <span m='1313385'>updates,</span>
  <span m='1313640'>and</span> <span m='1313760'>root n</span> <span m='1314090'>verifies</span>
  <span m='1314450'>sums</span> <span m='1314705'>that</span> <span m='1315350'>require</span>
  <span m='1316130'>this</span> <span m='1316280'>much</span> <span m='1316520'>time.</span>
  <span m='1317900'>The</span> <span m='1318320'>difference</span> <span m='1319010'>is--</span>
  <span m='1320860'>well,</span> <span m='1320990'>here</span> <span m='1321170'>we</span>
  <span m='1321290'>have</span> <span m='1321470'>an</span> <span m='1321560'>l,</span>
  <span m='1322560'>for</span> <span m='1322660'>an</span> <span m='1322760'>l</span>
  <span m='1323030'>leaf</span> <span m='1323570'>tree.</span> <span m='1323900'>And</span>
  <span m='1324020'>so</span> <span m='1325040'>what</span> <span m='1325220'>I'd</span>
  <span m='1325310'>like</span> <span m='1325460'>to</span> <span m='1325580'>do</span>
  <span m='1325790'>is</span> <span m='1325940'>sum</span> <span m='1326420'>this</span>
  <span m='1326690'>lower</span> <span m='1326960'>bound</span> <span m='1327710'>over</span>
  <span m='1328070'>every</span> <span m='1328460'>node</span> <span m='1328730'>in</span>
  <span m='1328850'>the</span> <span m='1328970'>tree.</span> <span m='1329390'>I
  need</span> <span m='1329820'>to</span> <span m='1329960'>check</span> <span m='1330290'>that</span>
  <span m='1330440'>that</span> <span m='1330740'>is</span> <span m='1330890'>valid</span>
  <span m='1331760'>to</span> <span m='1331880'>do.</span> <span m='1332625'>So</span>
  <span m='1333100'>let's</span> <span m='1333350'>do</span> <span m='1333470'>that.</span>
  </p><p></p><p><span m='1345750'>OK,</span> <span m='1346040'>for</span> <span m='1346460'>every</span>
  <span m='1346700'>node</span> <span m='1346940'>v,</span> <span m='1347870'>we</span>
  <span m='1348050'>are</span> <span m='1348140'>claiming</span> <span m='1348530'>there's</span>
  <span m='1348710'>a</span> <span m='1348770'>certain</span> <span m='1349010'>number</span>
  <span m='1349220'>of</span> <span m='1349310'>reads</span> <span m='1349550'>that</span>
  <span m='1349640'>happen</span> <span m='1349910'>over</span> <span m='1350090'>here,</span>
  <span m='1350900'>that</span> <span m='1351200'>correspond</span> <span m='1351620'>to</span>
  <span m='1351680'>writes</span> <span m='1351890'>over</span> <span m='1352100'>here.</span>
  <span m='1353030'>But</span> <span m='1353210'>let's</span> <span m='1354320'>say</span>
  <span m='1354590'>you</span> <span m='1354710'>look</span> <span m='1354920'>at</span>
  <span m='1355010'>the</span> <span m='1355130'>parent</span> <span m='1355490'>of</span>
  <span m='1355550'>v,</span> <span m='1355760'>which</span> <span m='1355940'>is</span>
  <span m='1356060'>over</span> <span m='1356390'>here.</span> <span m='1357260'>This</span>
  <span m='1357410'>thing</span> <span m='1357590'>is</span> <span m='1357680'>also</span>
  <span m='1358010'>in</span> <span m='1358100'>the</span> <span m='1358190'>right</span>
  <span m='1358370'>subtree,</span> <span m='1358850'>and</span> <span m='1358940'>we're</span>
  <span m='1359030'>claiming</span> <span m='1359330'>there's</span> <span m='1359450'>some</span>
  <span m='1359750'>number</span> <span m='1360180'>of</span> <span m='1360320'>reads</span>
  <span m='1360680'>on</span> <span m='1360830'>the</span> <span m='1360950'>right</span>
  <span m='1361130'>subtree,</span> <span m='1361610'>that</span> <span m='1361790'>read</span>
  <span m='1361970'>things</span> <span m='1362210'>that</span> <span m='1362290'>are</span>
  <span m='1362320'>written</span> <span m='1362570'>over</span> <span m='1362750'>on</span>
  <span m='1362840'>the</span> <span m='1362930'>left.</span> </p><p><span m='1363710'>The</span>
  <span m='1363830'>worry</span> <span m='1364070'>would</span> <span m='1364250'>be</span>
  <span m='1364400'>that</span> <span m='1364640'>the</span> <span m='1364820'>reads</span>
  <span m='1365220'>we</span> <span m='1365240'>counted</span> <span m='1365630'>here,</span>
  <span m='1365960'>we</span> <span m='1366140'>also</span> <span m='1366560'>count</span>
  <span m='1366860'>at</span> <span m='1366950'>the</span> <span m='1367040'>next</span>
  <span m='1367250'>level</span> <span m='1367490'>up.</span> <span m='1367640'>We</span>
  <span m='1367760'>don't</span> <span m='1367940'>want</span> <span m='1368060'>to</span>
  <span m='1368120'>double</span> <span m='1368420'>count</span> <span m='1368810'>in</span>
  <span m='1368930'>our</span> <span m='1369020'>lower</span> <span m='1369230'>bounds.
  If</span> <span m='1369590'>we're</span> <span m='1369800'>able</span> <span m='1370040'>to</span>
  <span m='1370130'>sum</span> <span m='1370400'>them</span> <span m='1371060'>up,</span>
  <span m='1371660'>we</span> <span m='1371780'>can't</span> <span m='1371990'>be</span>
  <span m='1372110'>double</span> <span m='1372350'>counting.</span> <span m='1373850'>But</span>
  <span m='1374030'>the</span> <span m='1374090'>claim</span> <span m='1374330'>is</span>
  <span m='1374450'>we're</span> <span m='1374570'>not</span> <span m='1374840'>double</span>
  <span m='1375170'>counting,</span> <span m='1375560'>because</span> <span m='1376040'>if</span>
  <span m='1376190'>you</span> <span m='1376310'>look</span> <span m='1376520'>at</span>
  <span m='1376640'>any</span> <span m='1376910'>particular--</span> <span m='1377870'>any</span>
  <span m='1378110'>read--</span> <span m='1379050'>so</span> <span m='1379700'>here's</span>
  <span m='1380210'>time,</span> <span m='1380850'>and</span> <span m='1380960'>suppose</span>
  <span m='1381260'>you</span> <span m='1381320'>do</span> <span m='1381470'>a</span>
  <span m='1381500'>read</span> <span m='1381770'>here.</span> <span m='1382990'>You're</span>
  <span m='1383150'>reading</span> <span m='1383570'>a</span> <span m='1383630'>cell</span>
  <span m='1383990'>that</span> <span m='1384140'>was</span> <span m='1384320'>written</span>
  <span m='1384680'>sometime</span> <span m='1385130'>in</span> <span m='1385190'>the</span>
  <span m='1385280'>past,</span> <span m='1385730'>if it</span> <span m='1385790'>was</span>
  <span m='1385910'>never</span> <span m='1386150'>written,</span> <span m='1386630'>it's
  a not</span> <span m='1386810'>very</span> <span m='1387110'>interesting</span>
  <span m='1387620'>read,</span> <span m='1387950'>it</span> <span m='1388580'>communicates</span>
  <span m='1389090'>no</span> <span m='1389210'>information.</span> </p><p><span m='1389780'>So</span>
  <span m='1389900'>there's</span> <span m='1390050'>some</span> <span m='1390710'>write</span>
  <span m='1391040'>in</span> <span m='1391160'>the</span> <span m='1391250'>past</span>
  <span m='1391700'>that</span> <span m='1392430'>changed</span> <span m='1393410'>the</span>
  <span m='1393530'>cell</span> <span m='1394040'>that's</span> <span m='1394270'>just</span>
  <span m='1394640'>read.</span> <span m='1395420'>And</span> <span m='1395740'>we</span>
  <span m='1395930'>are</span> <span m='1396040'>going</span> <span m='1396260'>to</span>
  <span m='1396920'>count</span> <span m='1397310'>this</span> <span m='1397490'>read</span>
  <span m='1398390'>at</span> <span m='1398540'>a</span> <span m='1398600'>particular</span>
  <span m='1399110'>node,</span> <span m='1399440'>namely</span> <span m='1400280'>the</span>
  <span m='1400430'>lca</span> <span m='1401900'>of</span> <span m='1402080'>those</span>
  <span m='1402320'>two</span> <span m='1402500'>times.</span> <span m='1404130'>So</span>
  <span m='1404230'>if</span> <span m='1404330'>you</span> <span m='1404430'>look</span>
  <span m='1404450'>at</span> <span m='1404510'>the</span> <span m='1404600'>lca</span>
  <span m='1404960'>of</span> <span m='1405020'>the</span> <span m='1405110'>times</span>
  <span m='1405410'>of</span> <span m='1405490'>the</span> <span m='1405590'>reads</span>
  <span m='1405830'>and</span> <span m='1405920'>the</span> <span m='1405960'>writes,</span>
  <span m='1406700'>that</span> <span m='1406910'>is</span> <span m='1407030'>the</span>
  <span m='1407150'>single</span> <span m='1407540'>note</span> <span m='1407890'>that</span>
  <span m='1408080'>we'll</span> <span m='1408230'>think</span> <span m='1408470'>about</span>
  <span m='1408770'>that</span> <span m='1408990'>read</span> <span m='1409990'>that</span>
  <span m='1410120'>happened</span> <span m='1410420'>in</span> <span m='1410480'>the</span>
  <span m='1410570'>right</span> <span m='1410750'>subtree,</span> <span m='1411140'>that</span>
  <span m='1411230'>was</span> <span m='1411380'>written</span> <span m='1411590'>in</span>
  <span m='1411680'>the</span> <span m='1411770'>left</span> <span m='1411950'>subtree.</span>
  <span m='1413400'>So</span> <span m='1414440'>no</span> <span m='1414620'>double</span>
  <span m='1414890'>counting,</span> <span m='1419030'>because</span> <span m='1423020'>we</span>
  <span m='1423170'>only</span> <span m='1423470'>count</span> <span m='1424500'>at</span>
  <span m='1425060'>the</span> <span m='1425210'>lca.</span> </p><p><span m='1428780'>The</span>
  <span m='1428990'>other</span> <span m='1429140'>thing</span> <span m='1429530'>that
  we</span> <span m='1429620'>need</span> <span m='1429800'>to</span> <span m='1429890'>be</span>
  <span m='1429980'>able</span> <span m='1430130'>to</span> <span m='1430220'>do</span>
  <span m='1430370'>is,</span> <span m='1430460'>because</span> <span m='1430760'>this</span>
  <span m='1430940'>is</span> <span m='1431060'>an</span> <span m='1431150'>expected</span>
  <span m='1431630'>lower</span> <span m='1431870'>bound,</span> <span m='1432270'>we</span>
  <span m='1432290'>need</span> <span m='1432470'>linearity</span> <span m='1432890'>of</span>
  <span m='1432980'>expectation.</span> <span m='1433760'>But</span> <span m='1434750'>expectation</span>
  <span m='1435350'>is</span> <span m='1435470'>indeed</span> <span m='1435710'>linear,</span>
  <span m='1436070'>so</span> <span m='1436310'>we're</span> <span m='1436880'>all</span>
  <span m='1436970'>set.</span> <span m='1441755'>OK,</span> <span m='1442250'>so</span>
  <span m='1442420'>all</span> <span m='1442580'>that's</span> <span m='1442730'>left</span>
  <span m='1443000'>is</span> <span m='1443090'>a</span> <span m='1443150'>little</span>
  <span m='1443360'>bit</span> <span m='1443450'>of</span> <span m='1443540'>common</span>
  <span m='1443860'>[INAUDIBLE]</span> <span m='1444260'>if</span> <span m='1444380'>we</span>
  <span m='1444500'>take</span> <span m='1445190'>l</span> <span m='1445430'>root</span>
  <span m='1445670'>n,</span> <span m='1445970'>where</span> <span m='1446090'>l</span>
  <span m='1446330'>is</span> <span m='1446540'>the</span> <span m='1446900'>size</span>
  <span m='1447260'>of</span> <span m='1447320'>the</span> <span m='1447410'>subtree</span>
  <span m='1448300'>below</span> <span m='1448660'>a</span> <span m='1448700'>given</span>
  <span m='1448940'>node,</span> <span m='1450290'>we</span> <span m='1450630'>sum</span>
  <span m='1450980'>that</span> <span m='1451160'>up</span> <span m='1451280'>over</span>
  <span m='1451520'>all</span> <span m='1451640'>nodes,</span> <span m='1452200'>and</span>
  <span m='1452330'>it's</span> <span m='1452450'>a</span> <span m='1452540'>balanced</span>
  <span m='1452990'>binary</span> <span m='1453350'>search</span> <span m='1453590'>tree--</span>
  <span m='1455260'>or</span> <span m='1455390'>a</span> <span m='1455420'>balanced</span>
  <span m='1455780'>binary</span> <span m='1456140'>tree,</span> <span m='1456380'>I</span>
  <span m='1456440'>should</span> <span m='1456620'>say,</span> <span m='1457050'>not</span>
  <span m='1457150'>a</span> <span m='1457250'>search</span> <span m='1457340'>tree.</span>
  </p><p><span m='1458870'>What</span> <span m='1459110'>do</span> <span m='1459200'>we</span>
  <span m='1459290'>get?</span> <span m='1460170'>Well,</span> <span m='1460760'>every</span>
  <span m='1461030'>leaf</span> <span m='1461420'>appears</span> <span m='1461960'>in</span>
  <span m='1462310'>log</span> <span m='1462650'>n</span> <span m='1462800'>subtrees.</span>
  <span m='1464370'>So</span> <span m='1465260'>we</span> <span m='1465410'>get</span>
  <span m='1465740'>the</span> <span m='1465860'>total</span> <span m='1466190'>size</span>
  <span m='1466490'>of</span> <span m='1466550'>the</span> <span m='1466670'>tree</span>
  <span m='1467900'>times</span> <span m='1468230'>log</span> <span m='1468490'>n</span>
  <span m='1469650'>for</span> <span m='1469820'>this,</span> <span m='1470740'>and</span>
  <span m='1470930'>we</span> <span m='1470990'>get</span> <span m='1471170'>another</span>
  <span m='1471870'>root</span> <span m='1472050'>n</span> <span m='1472190'>over</span>
  <span m='1472340'>here.</span> <span m='1472490'>The</span> <span m='1472610'>total</span>
  <span m='1472850'>size</span> <span m='1473670'>of</span> <span m='1473930'>the</span>
  <span m='1474050'>tree</span> <span m='1474320'>is</span> <span m='1474530'>root</span>
  <span m='1474810'>n.</span> <span m='1475550'>So</span> <span m='1475790'>we</span>
  <span m='1475940'>get</span> <span m='1478280'>this</span> <span m='1479100'>root</span>
  <span m='1479300'>n</span> <span m='1479450'>log</span> <span m='1479910'>n,</span>
  <span m='1480830'>that's</span> <span m='1480980'>when</span> <span m='1481100'>you</span>
  <span m='1481190'>sum</span> <span m='1481430'>up</span> <span m='1481580'>the l</span>
  <span m='1481670'>part.</span> <span m='1482570'>Then</span> <span m='1482750'>everything</span>
  <span m='1483110'>gets</span> <span m='1483260'>multiplied</span> <span m='1483710'>by</span>
  <span m='1483860'>root</span> <span m='1484070'>n,</span> <span m='1486170'>and</span>
  <span m='1486470'>that</span> <span m='1486680'>becomes</span> <span m='1487040'>our</span>
  <span m='1487130'>lower</span> <span m='1487340'>bound,</span> <span m='1487820'>and</span>
  <span m='1487970'>that's</span> <span m='1488180'>exactly</span> <span m='1489170'>what</span>
  <span m='1489320'>we</span> <span m='1489440'>need</span> <span m='1489650'>over</span>
  <span m='1489830'>here.</span> <span m='1491790'>So</span> <span m='1491840'>now</span>
  <span m='1492620'>this</span> <span m='1492800'>claim</span> <span m='1493100'>is</span>
  <span m='1493190'>done.</span> <span m='1495256'>Maybe I</span> <span m='1495690'>should
  do a</span> <span m='1495920'>check</span> <span m='1496160'>mark.</span> <span
  m='1497000'>Provided</span> <span m='1497510'>we</span> <span m='1497690'>can</span>
  <span m='1497810'>prove</span> <span m='1498020'>this</span> <span m='1498200'>claim.</span>
  </p><p><span m='1498660'>So</span> <span m='1498740'>now</span> <span m='1499790'>our</span>
  <span m='1499970'>goal</span> <span m='1500330'>is</span> <span m='1500480'>to</span>
  <span m='1500570'>prove</span> <span m='1500810'>this</span> <span m='1501020'>thing.</span>
  <span m='1501360'>And</span> <span m='1501460'>now</span> <span m='1501590'>we're</span>
  <span m='1501770'>in</span> <span m='1501920'>a</span> <span m='1502280'>more</span>
  <span m='1502490'>local</span> <span m='1502880'>world,</span> <span m='1503520'>looking</span>
  <span m='1503770'>at</span> <span m='1503840'>a</span> <span m='1503900'>single</span>
  <span m='1504230'>node,</span> <span m='1504710'>counting</span> <span m='1505070'>reads</span>
  <span m='1505280'>over</span> <span m='1505460'>here,</span> <span m='1506210'>the</span>
  <span m='1506330'>corresponding</span> <span m='1506780'>rights</span> <span m='1506990'>over</span>
  <span m='1507200'>there.</span> <span m='1508190'>And</span> <span m='1508460'>then</span>
  <span m='1508670'>you</span> <span m='1508730'>just</span> <span m='1508910'>add</span>
  <span m='1509060'>up</span> <span m='1509150'>those</span> <span m='1509300'>lower</span>
  <span m='1509480'>bounds,</span> <span m='1509840'>you</span> <span m='1509900'>get</span>
  <span m='1510050'>what</span> <span m='1510140'>you</span> <span m='1510230'>want.</span>
  <span m='1511080'>So</span> <span m='1511130'>this</span> <span m='1511340'>is</span>
  <span m='1511430'>where</span> <span m='1511580'>the</span> <span m='1511670'>log</span>
  <span m='1511970'>comes</span> <span m='1512240'>from,</span> <span m='1512480'>because</span>
  <span m='1512780'>it's</span> <span m='1512900'>a</span> <span m='1512960'>balanced</span>
  <span m='1513410'>tree.</span> <span m='1514370'>And</span> <span m='1514580'>there's</span>
  <span m='1514790'>log n</span> <span m='1515180'>levels</span> <span m='1515750'>in</span>
  <span m='1515870'>a</span> <span m='1515930'>balanced</span> <span m='1516260'>tree,</span>
  <span m='1516920'>that's</span> <span m='1517100'>where</span> <span m='1517160'>we're</span>
  <span m='1517250'>getting</span> <span m='1517530'>our</span> <span m='1517610'>lower</span>
  <span m='1517850'>bound.</span> <span m='1518870'>The</span> <span m='1518960'>root</span>
  <span m='1519170'>n's</span> <span m='1519410'>are</span> <span m='1519470'>just</span>
  <span m='1519740'>keeping</span> <span m='1520250'>track</span> <span m='1520520'>of</span>
  <span m='1520610'>the</span> <span m='1520730'>size</span> <span m='1521060'>of</span>
  <span m='1521120'>the</span> <span m='1521210'>things</span> <span m='1521450'>we're</span>
  <span m='1521570'>manipulating.</span> <span m='1526852'>All</span> <span m='1527326'>right.</span>
  <span m='1530170'>So</span> <span m='1531790'>it</span> <span m='1531970'>remains</span>
  <span m='1532510'>to</span> <span m='1533860'>prove</span> <span m='1534220'>this</span>
  <span m='1534400'>claim.</span> <span m='1538170'>Prove</span> <span m='1538390'>that</span>
  <span m='1538560'>claim,</span> <span m='1538950'>we</span> <span m='1539070'>get</span>
  <span m='1539250'>that</span> <span m='1539430'>claim,</span> <span m='1539790'>and</span>
  <span m='1539880'>then</span> <span m='1540000'>we</span> <span m='1540090'>get</span>
  <span m='1540240'>this</span> <span m='1540460'>theorem.</span> </p><p></p><p><span
  m='1565630'>So</span> <span m='1567530'>proof</span> <span m='1568070'>of</span>
  <span m='1568330'>claim.</span> <span m='1576130'>We're</span> <span m='1576340'>going</span>
  <span m='1576550'>to</span> <span m='1576700'>do</span> <span m='1577210'>an</span>
  <span m='1577540'>information</span> <span m='1578110'>theoretic</span> <span m='1578860'>argument,</span>
  <span m='1580330'>so</span> <span m='1580510'>let</span> <span m='1580630'>me</span>
  <span m='1581380'>set</span> <span m='1581650'>it</span> <span m='1581770'>up.</span>
  <span m='1581950'>It's</span> <span m='1582100'>again,</span> <span m='1582790'>it's</span>
  <span m='1583300'>making</span> <span m='1583600'>this</span> <span m='1583750'>claim</span>
  <span m='1584050'>I</span> <span m='1584140'>said</span> <span m='1584350'>before,</span>
  <span m='1584800'>that</span> <span m='1585370'>the</span> <span m='1585490'>permutations</span>
  <span m='1586090'>that</span> <span m='1586180'>get</span> <span m='1586600'>written</span>
  <span m='1586900'>over</span> <span m='1587110'>here</span> <span m='1587380'>somehow</span>
  <span m='1587680'>have</span> <span m='1587830'>to</span> <span m='1587950'>be</span>
  <span m='1588040'>communicated</span> <span m='1588760'>to</span> <span m='1588880'>the</span>
  <span m='1588970'>queries</span> <span m='1589300'>over</span> <span m='1589480'>here,</span>
  <span m='1589750'>because</span> <span m='1592390'>they</span> <span m='1592540'>matter.</span>
  <span m='1593380'>Because</span> <span m='1593990'>the</span> <span m='1594130'>permutations</span>
  <span m='1594700'>that</span> <span m='1594780'>get</span> <span m='1594910'>said</span>
  <span m='1595120'>over</span> <span m='1595300'>here</span> <span m='1596670'>changed</span>
  <span m='1597250'>the</span> <span m='1597430'>answers</span> <span m='1597790'>to</span>
  <span m='1597880'>all</span> <span m='1598030'>the</span> <span m='1598120'>queries</span>
  <span m='1598450'>over</span> <span m='1598660'>here,</span> <span m='1599290'>because</span>
  <span m='1600220'>of</span> <span m='1600280'>the</span> <span m='1600370'>interleaving</span>
  <span m='1601030'>between</span> <span m='1601330'>left</span> <span m='1601570'>and</span>
  <span m='1601660'>right.</span> </p><p><span m='1602860'>So</span> <span m='1603370'>how</span>
  <span m='1603520'>are</span> <span m='1603550'>we</span> <span m='1603880'>going</span>
  <span m='1604030'>to</span> <span m='1604090'>formalize</span> <span m='1604570'>that?</span>
  <span m='1605710'>Well,</span> <span m='1610660'>left</span> <span m='1610900'>subtree</span>
  <span m='1612790'>does</span> <span m='1613420'>l/2</span> <span m='1614080'>updates</span>
  <span m='1617950'>with</span> <span m='1618910'>l/2</span> <span m='1620410'>random</span>
  <span m='1620770'>permutations,</span> <span m='1625180'>uniform</span> <span m='1625690'>random</span>
  <span m='1625960'>permutations,</span> <span m='1626680'>because</span> <span m='1626890'>every</span>
  <span m='1627130'>node</span> <span m='1627340'>does an</span> <span m='1627630'>update.</span>
  <span m='1630910'>And</span> <span m='1631060'>so</span> <span m='1632380'>the</span>
  <span m='1632470'>information</span> <span m='1632950'>theoretic</span> <span m='1633370'>idea</span>
  <span m='1633760'>is</span> <span m='1634030'>that</span> <span m='1634870'>if</span>
  <span m='1635020'>we</span> <span m='1635170'>were</span> <span m='1635290'>to</span>
  <span m='1635410'>somehow</span> <span m='1636160'>encode</span> <span m='1637570'>those</span>
  <span m='1637810'>permutations,</span> </p><p><span m='1645790'>That</span> <span
  m='1645950'>encoding</span> <span m='1647650'>must</span> <span m='1648010'>use</span>
  <span m='1650280'>omega</span> <span m='1651570'>l</span> <span m='1652370'>log</span>
  <span m='1653800'>l--</span> <span m='1654780'>l?</span> <span m='1655220'>No, I'm</span>
  <span m='1655660'>sorry.</span> <span m='1656630'>It's</span> <span m='1657070'>not</span>
  <span m='1657340'>right.</span> <span m='1659020'>Off</span> <span m='1659500'>by</span>
  <span m='1659620'>some</span> <span m='1659830'>root</span> <span m='1659960'>n</span>
  <span m='1660130'>factors</span> <span m='1660640'>here,</span> <span m='1661330'>l</span>
  <span m='1661560'>root</span> <span m='1661960'>n</span> <span m='1663110'>log</span>
  <span m='1663500'>n.</span> <span m='1665905'>OK,</span> <span m='1666340'>each</span>
  <span m='1666580'>permutation</span> <span m='1667270'>must</span> <span m='1667510'>take</span>
  <span m='1667930'>root</span> <span m='1668170'>n</span> <span m='1668380'>log</span>
  <span m='1668680'>root</span> <span m='1669010'>n</span> <span m='1669610'>bits</span>
  <span m='1669940'>to</span> <span m='1670120'>encode.</span> <span m='1671470'>If</span>
  <span m='1671590'>you</span> <span m='1671650'>have</span> <span m='1671740'>a</span>
  <span m='1671770'>random</span> <span m='1672070'>permutation,</span> <span m='1673270'>expected</span>
  <span m='1673720'>number</span> <span m='1673940'>of</span> <span m='1673980'>bits</span>
  <span m='1674200'>have</span> <span m='1674410'>a</span> <span m='1674470'>very</span>
  <span m='1674710'>high</span> <span m='1674860'>probability.</span> <span m='1676030'>Almost</span>
  <span m='1676300'>every</span> <span m='1676570'>permutation</span> <span m='1677140'>requires</span>
  <span m='1677530'>root</span> <span m='1677740'>n</span> <span m='1677920'>log</span>
  <span m='1678190'>root</span> <span m='1678330'>n</span> <span m='1678490'>bits.</span>
  <span m='1679540'>I'm</span> <span m='1679750'>not</span> <span m='1679930'>going</span>
  <span m='1680080'>to</span> <span m='1680140'>worry</span> <span m='1680320'>about</span>
  <span m='1680530'>constant</span> <span m='1680860'>factors,</span> <span m='1681400'>put</span>
  <span m='1681550'>an</span> <span m='1681640'>omega</span> <span m='1681970'>here,</span>
  <span m='1682180'>so</span> <span m='1682390'>the</span> <span m='1682540'>root</span>
  <span m='1682720'>n</span> <span m='1682870'>turns</span> <span m='1683110'>into</span>
  <span m='1683290'>an</span> <span m='1683380'>n.</span> <span m='1684340'>And</span>
  <span m='1684460'>then</span> <span m='1684550'>we've</span> <span m='1684700'>got</span>
  <span m='1684910'>l</span> <span m='1685060'>over</span> <span m='1685240'>two</span>
  <span m='1685450'>of</span> <span m='1685570'>them,</span> <span m='1685780'>so</span>
  <span m='1686200'>again,</span> <span m='1686590'>ignoring</span> <span m='1686920'>constant</span>
  <span m='1687220'>factors,</span> <span m='1687550'>that's</span> <span m='1687780'>l</span>
  <span m='1688030'>root</span> <span m='1688270'>n</span> <span m='1688510'>log</span>
  <span m='1688780'>n</span> <span m='1689800'>bits.</span> </p><p><span m='1693440'>And</span>
  <span m='1693490'>this</span> <span m='1693640'>is</span> <span m='1693760'>just</span>
  <span m='1694150'>information,</span> <span m='1694720'>theoretic</span> <span m='1695650'>fact,</span>
  <span m='1697510'>our</span> <span m='1697620'>common</span> <span m='1697910'>[INAUDIBLE]</span>
  <span m='1698440'>theory</span> <span m='1698910'>fact.</span> <span m='1699490'>And</span>
  <span m='1702280'>once</span> <span m='1702550'>we</span> <span m='1702700'>know</span>
  <span m='1702900'>that,</span> <span m='1704320'>the</span> <span m='1704500'>idea</span>
  <span m='1704830'>is</span> <span m='1705160'>let's</span> <span m='1705460'>find</span>
  <span m='1705760'>an</span> <span m='1705850'>encoding</span> <span m='1706330'>that's</span>
  <span m='1706510'>better</span> <span m='1706840'>than</span> <span m='1706990'>this,</span>
  <span m='1708010'>and</span> <span m='1708100'>get</span> <span m='1708220'>a</span>
  <span m='1708280'>contradiction.</span> <span m='1710020'>Of</span> <span m='1710140'>course</span>
  <span m='1710350'>we</span> <span m='1710410'>shouldn't</span> <span m='1710620'>get</span>
  <span m='1710740'>a</span> <span m='1710800'>contradiction</span> <span m='1711430'>unless</span>
  <span m='1711850'>this</span> <span m='1712030'>claim</span> <span m='1712360'>is</span>
  <span m='1712510'>false.</span> <span m='1713530'>So</span> <span m='1713710'>either</span>
  <span m='1713980'>this</span> <span m='1714130'>claim</span> <span m='1714340'>is</span>
  <span m='1714460'>true</span> <span m='1715120'>and</span> <span m='1715240'>we're</span>
  <span m='1715330'>happy,</span> <span m='1716110'>but</span> <span m='1716260'>if</span>
  <span m='1716470'>somehow</span> <span m='1716920'>the</span> <span m='1717070'>word</span>
  <span m='1717250'>not</span> <span m='1717610'>enough</span> <span m='1717940'>cell</span>
  <span m='1718240'>reads</span> <span m='1718720'>on</span> <span m='1718930'>the</span>
  <span m='1719020'>right,</span> <span m='1719320'>that</span> <span m='1719470'>did</span>
  <span m='1719680'>things</span> <span m='1720400'>that</span> <span m='1720490'>were</span>
  <span m='1720640'>written</span> <span m='1720940'>on</span> <span m='1721060'>the</span>
  <span m='1721120'>left,</span> <span m='1721960'>then</span> <span m='1722260'>we</span>
  <span m='1722500'>will,</span> <span m='1722980'>from</span> <span m='1723340'>that,</span>
  <span m='1723550'>get</span> <span m='1723820'>a</span> <span m='1724600'>smaller</span>
  <span m='1725200'>encoding</span> <span m='1725920'>of</span> <span m='1726250'>the</span>
  <span m='1727480'>update</span> <span m='1727900'>permutations</span> <span m='1728590'>that</span>
  <span m='1728680'>happen</span> <span m='1728980'>on</span> <span m='1729070'>the</span>
  <span m='1729160'>left.</span> <span m='1730450'>If</span> <span m='1730570'>we</span>
  <span m='1730690'>could</span> <span m='1730810'>somehow</span> <span m='1731110'>do</span>
  <span m='1731290'>that,</span> <span m='1731720'>then</span> <span m='1731770'>we</span>
  <span m='1731830'>can</span> <span m='1731920'>get</span> <span m='1732010'>a</span>
  <span m='1732040'>contradiction,</span> <span m='1732730'>and</span> <span m='1732850'>therefore</span>
  <span m='1733270'>conclude</span> <span m='1734700'>the</span> <span m='1734830'>claim</span>
  <span m='1735130'>is</span> <span m='1735250'>in</span> <span m='1735370'>fact</span>
  <span m='1735880'>true.</span> </p><p><span m='1737770'>So,</span> <span m='1746758'>if</span>
  <span m='1747250'>the</span> <span m='1747310'>claim</span> <span m='1747580'>fails,</span>
  <span m='1750160'>we'll</span> <span m='1750370'>find</span> <span m='1751930'>a</span>
  <span m='1752020'>smaller</span> <span m='1752470'>encoding,</span> <span m='1755630'>which</span>
  <span m='1755800'>will</span> <span m='1755950'>give</span> <span m='1756160'>us</span>
  <span m='1756330'>a</span> <span m='1756400'>contradiction.</span> <span m='1764050'>All</span>
  <span m='1764110'>right,</span> <span m='1765730'>so</span> <span m='1768295'>let's</span>
  <span m='1768730'>set</span> <span m='1768960'>up</span> <span m='1769050'>this</span>
  <span m='1769230'>problem</span> <span m='1769470'>a</span> <span m='1769530'>little</span>
  <span m='1769800'>bit</span> <span m='1770010'>more.</span> <span m='1772260'>I'm</span>
  <span m='1772410'>going</span> <span m='1772710'>to--</span> <span m='1774310'>because</span>
  <span m='1774510'>we're</span> <span m='1774630'>really</span> <span m='1774900'>just</span>
  <span m='1775110'>interested</span> <span m='1775560'>in</span> <span m='1775740'>this</span>
  <span m='1775890'>subtree</span> <span m='1777250'>v</span> <span m='1778320'>stuff</span>
  <span m='1778590'>on</span> <span m='1778660'>the</span> <span m='1778740'>left,</span>
  <span m='1779100'>stuff</span> <span m='1779460'>on</span> <span m='1779550'>the</span>
  <span m='1779640'>right,</span> <span m='1780780'>but</span> <span m='1780930'>this</span>
  <span m='1781120'>of</span> <span m='1781230'>course</span> <span m='1781440'>lives</span>
  <span m='1781650'>in</span> <span m='1781710'>a</span> <span m='1781770'>much</span>
  <span m='1781950'>bigger</span> <span m='1782190'>tree,</span> <span m='1782420'>there's</span>
  <span m='1782550'>stuff</span> <span m='1782850'>that</span> <span m='1782970'>happens</span>
  <span m='1783300'>over</span> <span m='1783510'>here.</span> <span m='1784320'>This</span>
  <span m='1784530'>I</span> <span m='1784620'>will</span> <span m='1784740'>call</span>
  <span m='1785310'>the</span> <span m='1785400'>past.</span> <span m='1786870'>I'm</span>
  <span m='1786900'>just</span> <span m='1787050'>going</span> <span m='1787190'>to</span>
  <span m='1787710'>assume</span> <span m='1788040'>we</span> <span m='1788130'>know</span>
  <span m='1788400'>everything</span> <span m='1788880'>about</span> <span m='1789090'>the</span>
  <span m='1789180'>past.</span> </p><p><span m='1791160'>Everything</span> <span
  m='1791610'>to</span> <span m='1791700'>the</span> <span m='1791820'>left</span>
  <span m='1792150'>of</span> <span m='1792260'>the</span> <span m='1792390'>subtree,</span>
  <span m='1795090'>we</span> <span m='1795300'>can</span> <span m='1795450'>assume</span>
  <span m='1795720'>that</span> <span m='1795840'>we</span> <span m='1795990'>know.</span>
  <span m='1796530'>When</span> <span m='1796650'>I</span> <span m='1796710'>say</span>
  <span m='1796890'>we</span> <span m='1797040'>know,</span> <span m='1798290'>what</span>
  <span m='1798900'>do</span> <span m='1798990'>we</span> <span m='1799080'>know?</span>
  <span m='1799420'>We</span> <span m='1799520'>know</span> <span m='1799680'>all</span>
  <span m='1799830'>the</span> <span m='1799920'>updates,</span> <span m='1800400'>we</span>
  <span m='1800460'>know</span> <span m='1800600'>all</span> <span m='1800670'>the</span>
  <span m='1800760'>queries</span> <span m='1801090'>that</span> <span m='1801220'>happen,</span>
  <span m='1802020'>and</span> <span m='1802230'>we</span> <span m='1802350'>know,</span>
  <span m='1802950'>at</span> <span m='1803070'>this</span> <span m='1803250'>moment</span>
  <span m='1803610'>in</span> <span m='1803700'>particular,</span> <span m='1804220'>what</span>
  <span m='1804300'>is</span> <span m='1804420'>the</span> <span m='1804510'>state</span>
  <span m='1804750'>of</span> <span m='1804810'>the</span> <span m='1804930'>data</span>
  <span m='1805140'>structure.</span> <span m='1806790'>Because</span> <span m='1807120'>this</span>
  <span m='1807270'>claim</span> <span m='1807750'>has</span> <span m='1808050'>nothing</span>
  <span m='1808350'>to</span> <span m='1808470'>do</span> <span m='1808680'>with</span>
  <span m='1808860'>this</span> <span m='1809040'>stuff,</span> <span m='1809760'>it's</span>
  <span m='1809940'>all</span> <span m='1810210'>about</span> <span m='1810510'>reads</span>
  <span m='1810780'>here</span> <span m='1811020'>that</span> <span m='1811530'>corresponds
  to</span> <span m='1811980'>writes</span> <span m='1812220'>here.</span> <span m='1812850'>So</span>
  <span m='1813000'>we</span> <span m='1813090'>can</span> <span m='1813240'>just</span>
  <span m='1813450'>assume</span> <span m='1813810'>we</span> <span m='1813930'>know</span>
  <span m='1814140'>everything</span> <span m='1814560'>up</span> <span m='1814680'>to</span>
  <span m='1814770'>this</span> <span m='1814950'>point.</span> <span m='1815610'>In</span>
  <span m='1815760'>our</span> <span m='1815910'>encoding,</span> <span m='1816630'>this</span>
  <span m='1816840'>is</span> <span m='1817010'>a</span> <span m='1817620'>key</span>
  <span m='1817800'>point.</span> </p><p><span m='1818946'>One</span> <span m='1819330'>way</span>
  <span m='1819450'>to</span> <span m='1819540'>say</span> <span m='1819750'>this</span>
  <span m='1820020'>in</span> <span m='1820140'>a</span> <span m='1820200'>probabilistic</span>
  <span m='1820860'>sense</span> <span m='1821160'>is</span> <span m='1821310'>we're</span>
  <span m='1821460'>conditioning</span> <span m='1822150'>on</span> <span m='1822450'>what</span>
  <span m='1823080'>happened</span> <span m='1823380'>over</span> <span m='1823560'>here</span>
  <span m='1823680'>on</span> <span m='1823770'>the</span> <span m='1823860'>left,</span>
  <span m='1824100'>what</span> <span m='1824250'>updates</span> <span m='1824580'>happened.</span>
  <span m='1825820'>And</span> <span m='1825960'>if</span> <span m='1826050'>we</span>
  <span m='1826140'>can</span> <span m='1826290'>prove</span> <span m='1826710'>that</span>
  <span m='1827250'>whatever</span> <span m='1827580'>we</span> <span m='1827670'>need</span>
  <span m='1827820'>to</span> <span m='1827910'>happen</span> <span m='1828210'>here</span>
  <span m='1828450'>holds</span> <span m='1829020'>no</span> <span m='1829290'>matter</span>
  <span m='1829530'>what</span> <span m='1829740'>the</span> <span m='1829860'>condition</span>
  <span m='1830820'>is,</span> <span m='1831150'>then</span> <span m='1831300'>it</span>
  <span m='1831360'>will</span> <span m='1831480'>hold</span> <span m='1831700'>overall.</span>
  <span m='1833190'>So</span> <span m='1834280'>that's</span> <span m='1834510'>probabilistic</span>
  <span m='1835110'>justification</span> <span m='1835800'>for</span> <span m='1835920'>why</span>
  <span m='1836130'>we</span> <span m='1836220'>can</span> <span m='1836350'>assume</span>
  <span m='1836580'>we</span> <span m='1836670'>know</span> <span m='1836790'>the</span>
  <span m='1836910'>past</span> <span m='1839170'>OK.</span> <span m='1840420'>So</span>
  <span m='1840660'>then</span> <span m='1840870'>our</span> <span m='1841020'>goal</span>
  <span m='1844200'>is</span> <span m='1844500'>to</span> <span m='1846120'>encode,</span>
  <span m='1848200'>this</span> <span m='1848500'>is</span> <span m='1848730'>a</span>
  <span m='1848790'>little</span> <span m='1849000'>bit</span> <span m='1849090'>different</span>
  <span m='1849420'>from</span> <span m='1849570'>this</span> <span m='1849750'>goal.</span>
  </p><p></p><p><span m='1867050'>What</span> <span m='1867310'>we</span> <span m='1867520'>really</span>
  <span m='1867820'>want</span> <span m='1868000'>to</span> <span m='1868060'>do</span>
  <span m='1868300'>is</span> <span m='1868480'>encode</span> <span m='1869350'>the</span>
  <span m='1869650'>update</span> <span m='1869980'>permutations</span> <span m='1870700'>on</span>
  <span m='1870790'>the</span> <span m='1870880'>left.</span> <span m='1872980'>That's</span>
  <span m='1873190'>a</span> <span m='1873220'>little</span> <span m='1873430'>awkward</span>
  <span m='1873730'>to</span> <span m='1873790'>think</span> <span m='1874000'>about,</span>
  <span m='1874450'>because</span> <span m='1875500'>this</span> <span m='1875680'>is</span>
  <span m='1875830'>a</span> <span m='1875860'>claim</span> <span m='1876160'>about</span>
  <span m='1876400'>how</span> <span m='1876520'>many</span> <span m='1876730'>probes</span>
  <span m='1877030'>happen</span> <span m='1877330'>on</span> <span m='1877480'>the</span>
  <span m='1877600'>right.</span> <span m='1878800'>So</span> <span m='1879610'>instead,</span>
  <span m='1880090'>what</span> <span m='1880210'>we're</span> <span m='1880300'>going</span>
  <span m='1880400'>to</span> <span m='1880510'>do</span> <span m='1880690'>is</span>
  <span m='1880870'>encode</span> <span m='1881350'>the</span> <span m='1881470'>query</span>
  <span m='1881950'>permutations</span> <span m='1882820'>on</span> <span m='1883030'>the</span>
  <span m='1883120'>right.</span> <span m='1884200'>So</span> <span m='1884320'>there</span>
  <span m='1884410'>are</span> <span m='1884470'>updates</span> <span m='1884860'>over</span>
  <span m='1885040'>here,</span> <span m='1886150'>that's</span> <span m='1886270'>what</span>
  <span m='1886360'>we</span> <span m='1886480'>want</span> <span m='1886630'>to</span>
  <span m='1886690'>encode,</span> <span m='1887230'>but</span> <span m='1887410'>we're</span>
  <span m='1887590'>instead</span> <span m='1887950'>going</span> <span m='1888100'>to</span>
  <span m='1888160'>encode</span> <span m='1888610'>the</span> <span m='1888700'>queries</span>
  <span m='1889060'>over</span> <span m='1889270'>here.</span> <span m='1889590'>I</span>
  <span m='1889710'>claim</span> <span m='1890490'>if</span> <span m='1890650'>you</span>
  <span m='1890710'>know</span> <span m='1891160'>what</span> <span m='1891340'>the</span>
  <span m='1891460'>results</span> <span m='1891940'>of</span> <span m='1892060'>the</span>
  <span m='1892150'>queries</span> <span m='1892480'>were</span> <span m='1892630'>over</span>
  <span m='1892840'>here,</span> <span m='1893710'>then</span> <span m='1894730'>you</span>
  <span m='1894970'>know</span> <span m='1895300'>what</span> <span m='1895480'>the</span>
  <span m='1895570'>updates</span> <span m='1895900'>were</span> <span m='1896200'>over</span>
  <span m='1896380'>there.</span> <span m='1898470'>Basically</span> <span m='1899010'>because</span>
  <span m='1899400'>of</span> <span m='1899460'>this</span> <span m='1899640'>interleaving</span>
  <span m='1900150'>property.</span> <span m='1901560'>So</span> <span m='1901770'>I</span>
  <span m='1901920'>can</span> <span m='1902760'>write</span> <span m='1902940'>that</span>
  <span m='1903090'>down</span> <span m='1903270'>a</span> <span m='1903330'>little</span>
  <span m='1903510'>more</span> <span m='1903660'>formally.</span> </p><p></p><p><span
  m='1914500'>So</span> <span m='1914730'>if</span> <span m='1914850'>we</span> <span
  m='1914970'>look</span> <span m='1915210'>at</span> <span m='1915630'>time</span>
  <span m='1916110'>here,</span> <span m='1916560'>over,</span> <span m='1917730'>let's</span>
  <span m='1917850'>say</span> <span m='1918000'>this</span> <span m='1918180'>is</span>
  <span m='1918330'>v's</span> <span m='1918720'>subtree.</span> <span m='1923510'>Then</span>
  <span m='1923760'>what</span> <span m='1923880'>we</span> <span m='1924000'>have</span>
  <span m='1924450'>are</span> <span m='1924800'>a</span> <span m='1924840'>sequence</span>
  <span m='1925320'>of</span> <span m='1925500'>updates</span> <span m='1927500'>and</span>
  <span m='1928030'>a</span> <span m='1928080'>sequence</span> <span m='1928740'>of</span>
  <span m='1929070'>queries.</span> <span m='1933354'>These</span> <span m='1933850'>are</span>
  <span m='1934030'>queries,</span> <span m='1938010'>and</span> <span m='1938400'>these</span>
  <span m='1938580'>are</span> <span m='1938670'>updates.</span> <span m='1941460'>This</span>
  <span m='1941700'>is</span> <span m='1941910'>what</span> <span m='1942180'>the</span>
  <span m='1942300'>sequence</span> <span m='1942690'>looks</span> <span m='1942900'>like--</span>
  <span m='1944790'>sorry,</span> <span m='1945390'>this</span> <span m='1945600'>is</span>
  <span m='1946260'>v's</span> <span m='1946430'>subtree,</span> <span m='1946830'>this</span>
  <span m='1947010'>is</span> <span m='1947160'>the</span> <span m='1947460'>pi</span>
  <span m='1947810'>is,</span> <span m='1948270'>I</span> <span m='1948360'>should</span>
  <span m='1948540'>say.</span> <span m='1951830'>I</span> <span m='1951930'>mean,</span>
  <span m='1951940'>these</span> <span m='1952120'>operations</span> <span m='1952720'>are</span>
  <span m='1952810'>all</span> <span m='1953080'>happened</span> <span m='1953530'>during</span>
  <span m='1953920'>time,</span> <span m='1954700'>but</span> <span m='1954850'>now</span>
  <span m='1955130'>I'm</span> <span m='1955690'>sorting</span> <span m='1956200'>by</span>
  <span m='1957110'>i.</span> <span m='1958436'>A</span> <span m='1958878'>little</span>
  <span m='1959320'>confusing.</span> </p><p><span m='1961690'>There</span> <span
  m='1961900'>are</span> <span m='1962020'>two orders</span> <span m='1962290'>to
  think</span> <span m='1962500'>about,</span> <span m='1962770'>right?</span> <span
  m='1963030'>There's</span> <span m='1963380'>the</span> <span m='1964460'>sequence</span>
  <span m='1965770'>over</span> <span m='1966130'>time,</span> <span m='1966700'>we're</span>
  <span m='1966820'>now</span> <span m='1967060'>looking</span> <span m='1967420'>at</span>
  <span m='1967540'>such</span> <span m='1967780'>a</span> <span m='1967840'>left</span>
  <span m='1968050'>subtree</span> <span m='1968470'>where</span> <span m='1968590'>we</span>
  <span m='1968680'>do</span> <span m='1968830'>say</span> <span m='1969040'>1,</span>
  <span m='1969280'>5,</span> <span m='1969640'>and</span> <span m='1970000'>3,</span>
  <span m='1970270'>7.</span> <span m='1971230'>What</span> <span m='1971350'>that</span>
  <span m='1971530'>means--</span> <span m='1972120'>so</span> <span m='1972310'>you're</span>
  <span m='1972400'>imagining</span> <span m='1972820'>here,</span> <span m='1973030'>this</span>
  <span m='1973240'>is</span> <span m='1973390'>1,</span> <span m='1973690'>this</span>
  <span m='1973840'>is</span> <span m='1973960'>5,</span> <span m='1974350'>this</span>
  <span m='1974530'>is</span> <span m='1974620'>3,</span> <span m='1974920'>this</span>
  <span m='1975100'>is</span> <span m='1975160'>7.</span> <span m='1975580'>Here</span>
  <span m='1975730'>we're</span> <span m='1975860'>sorted</span> <span m='1976270'>by</span>
  <span m='1977080'>the</span> <span m='1977170'>value</span> <span m='1977500'>written</span>
  <span m='1977740'>down</span> <span m='1977950'>there,</span> <span m='1978240'>we're
  sorting</span> <span m='1978730'>by</span> <span m='1978910'>the</span> <span m='1979090'>i,</span>
  <span m='1979390'>the</span> <span m='1979480'>pi</span> <span m='1979930'>i</span>
  <span m='1980140'>that</span> <span m='1980520'>they're</span> <span m='1980770'>changing</span>
  <span m='1981540'>or</span> <span m='1981690'>querying.</span> <span m='1983080'>And</span>
  <span m='1983170'>so</span> <span m='1983530'>all</span> <span m='1983740'>the</span>
  <span m='1983830'>read</span> <span m='1984040'>things</span> <span m='1984460'>are</span>
  <span m='1984850'>in</span> <span m='1985000'>the</span> <span m='1985120'>right</span>
  <span m='1985360'>subtree</span> <span m='1986320'>of</span> <span m='1986520'>v.</span>
  <span m='1993130'>And</span> <span m='1993580'>all</span> <span m='1994000'>the</span>
  <span m='1994270'>updates</span> <span m='1997270'>are</span> <span m='1997480'>in</span>
  <span m='1997720'>the</span> <span m='1997810'>left</span> <span m='1998000'>subtree</span>
  <span m='1998200'>of</span> <span m='1998440'>v.</span> <span m='2003090'>This</span>
  <span m='2003270'>is</span> <span m='2003390'>the</span> <span m='2003660'>interleaving</span>
  <span m='2004170'>property</span> <span m='2004590'>that</span> <span m='2004740'>I</span>
  <span m='2004830'>mentioned</span> <span m='2005160'>earlier.</span> </p><p><span
  m='2008140'>So</span> <span m='2008490'>I</span> <span m='2008610'>claim</span>
  <span m='2009120'>that</span> <span m='2009270'>if</span> <span m='2009420'>I</span>
  <span m='2009550'>encode</span> <span m='2010740'>the</span> <span m='2010860'>results</span>
  <span m='2011280'>of</span> <span m='2011370'>the</span> <span m='2011490'>queries,</span>
  <span m='2012180'>namely</span> <span m='2012570'>I</span> <span m='2012780'>encode</span>
  <span m='2013800'>these</span> <span m='2014190'>permutations,</span> <span m='2015990'>these</span>
  <span m='2016140'>are</span> <span m='2016230'>like</span> <span m='2016410'>summary--</span>
  <span m='2017220'>partial</span> <span m='2017580'>sums.</span> <span m='2017970'>These</span>
  <span m='2018090'>are</span> <span m='2018180'>prefixed</span> <span m='2018560'>sums</span>
  <span m='2018960'>of</span> <span m='2019650'>the</span> <span m='2019710'>permutation</span>
  <span m='2020750'>list.</span> <span m='2021480'>Then</span> <span m='2021660'>I</span>
  <span m='2021720'>can</span> <span m='2021870'>figure</span> <span m='2022170'>out</span>
  <span m='2022260'>what</span> <span m='2022440'>the</span> <span m='2022560'>updates</span>
  <span m='2022950'>were.</span> <span m='2023970'>Why?</span> <span m='2024900'>Because</span>
  <span m='2025860'>if</span> <span m='2026460'>I</span> <span m='2026550'>figure</span>
  <span m='2026850'>out</span> <span m='2026940'>what</span> <span m='2027120'>this</span>
  <span m='2027300'>query,</span> <span m='2028290'>what</span> <span m='2028470'>it's</span>
  <span m='2028590'>permutation</span> <span m='2029160'>is,</span> <span m='2029310'>that's</span>
  <span m='2029580'>the</span> <span m='2029700'>sum</span> <span m='2030000'>of</span>
  <span m='2030120'>all</span> <span m='2030270'>of</span> <span m='2030360'>these</span>
  <span m='2030510'>permutations.</span> </p><p><span m='2032110'>Now</span> <span
  m='2032490'>only</span> <span m='2032790'>one</span> <span m='2033000'>of</span>
  <span m='2033060'>them</span> <span m='2033270'>changed</span> <span m='2033660'>in</span>
  <span m='2033720'>the</span> <span m='2033810'>left</span> <span m='2033990'>subtree,</span>
  <span m='2035250'>the</span> <span m='2035400'>rest</span> <span m='2035940'>all</span>
  <span m='2036390'>are</span> <span m='2036600'>in</span> <span m='2036810'>the</span>
  <span m='2036900'>past.</span> <span m='2038190'>They</span> <span m='2038340'>were</span>
  <span m='2038490'>all</span> <span m='2038700'>set</span> <span m='2039510'>before</span>
  <span m='2039930'>this</span> <span m='2040140'>time</span> <span m='2041160'>over</span>
  <span m='2041400'>here,</span> <span m='2041580'>and</span> <span m='2041670'>I</span>
  <span m='2041760'>know</span> <span m='2042030'>everything</span> <span m='2042480'>about</span>
  <span m='2042690'>the</span> <span m='2042780'>past,</span> <span m='2043470'>I'm</span>
  <span m='2043620'>assuming.</span> <span m='2044640'>So</span> <span m='2045330'>most</span>
  <span m='2045570'>of</span> <span m='2045630'>these</span> <span m='2046020'>I</span>
  <span m='2046140'>already</span> <span m='2046380'>know,</span> <span m='2046860'>the</span>
  <span m='2046950'>one</span> <span m='2047160'>thing</span> <span m='2047340'>I</span>
  <span m='2047400'>don't</span> <span m='2047610'>know</span> <span m='2047730'>is</span>
  <span m='2047850'>this</span> <span m='2048030'>one,</span> <span m='2049170'>but</span>
  <span m='2049380'>I</span> <span m='2049440'>claim</span> <span m='2049679'>if</span>
  <span m='2049800'>I</span> <span m='2049920'>know</span> <span m='2050489'>this</span>
  <span m='2051420'>sum,</span> <span m='2053010'>and</span> <span m='2053190'>I</span>
  <span m='2053250'>know</span> <span m='2054540'>all</span> <span m='2054719'>the</span>
  <span m='2054840'>others,</span> <span m='2055139'>then</span> <span m='2055290'>I</span>
  <span m='2055350'>can</span> <span m='2055469'>figure</span> <span m='2055590'>out</span>
  <span m='2055770'>what</span> <span m='2055889'>this</span> <span m='2056070'>one</span>
  <span m='2056250'>is,</span> <span m='2056480'>right?</span> </p><p><span m='2057239'>It's</span>
  <span m='2057330'>slightly</span> <span m='2057780'>awkward</span> <span m='2058110'>to</span>
  <span m='2058230'>do,</span> <span m='2058860'>if</span> <span m='2058949'>I</span>
  <span m='2059010'>give</span> <span m='2059250'>you</span> <span m='2059370'>this,</span>
  <span m='2060469'>I</span> <span m='2060600'>give</span> <span m='2060870'>you</span>
  <span m='2061080'>the</span> <span m='2061199'>sum</span> <span m='2062650'>of</span>
  <span m='2062969'>pi</span> <span m='2063719'>j</span> <span m='2064350'>from</span>
  <span m='2064739'>j</span> <span m='2065330'>equals</span> <span m='2066340'>0</span>
  <span m='2066664'>to</span> <span m='2066989'>i,</span> <span m='2067380'>or</span>
  <span m='2067469'>something.</span> <span m='2069960'>I've</span> <span m='2070199'>got</span>
  <span m='2070570'>to--</span> <span m='2073320'>I</span> <span m='2073409'>want</span>
  <span m='2073590'>to</span> <span m='2073650'>strip</span> <span m='2074100'>away</span>
  <span m='2074550'>all</span> <span m='2074880'>these,</span> <span m='2075360'>strip</span>
  <span m='2075750'>away</span> <span m='2076050'>all</span> <span m='2076320'>these.</span>
  <span m='2077719'>So</span> <span m='2077770'>I'm</span> <span m='2077870'>going</span>
  <span m='2077989'>to</span> <span m='2078360'>multiply</span> <span m='2079170'>by</span>
  <span m='2079980'>sum</span> <span m='2080366'>of</span> <span m='2081590'>pi</span>
  <span m='2082090'>j</span> <span m='2082530'>inverses</span> <span m='2083880'>over</span>
  <span m='2084090'>here,</span> <span m='2084659'>and</span> <span m='2084900'>multiply</span>
  <span m='2085750'>by</span> <span m='2086050'>sum</span> <span m='2086465'>pi</span>
  <span m='2086880'>j--</span> <span m='2088350'>when</span> <span m='2088530'>I</span>
  <span m='2088560'>say</span> <span m='2088679'>multiply,</span> <span m='2089130'>I</span>
  <span m='2089159'>mean</span> <span m='2089340'>compose.</span> <span m='2090760'>Sum</span>
  <span m='2091210'>pi</span> <span m='2091440'>j</span> <span m='2091770'>inverse
  is</span> <span m='2092100'>here,</span> <span m='2092550'>maybe</span> <span m='2092730'>let's</span>
  <span m='2092909'>not</span> <span m='2093060'>worry</span> <span m='2093239'>about</span>
  <span m='2093489'>the</span> <span m='2093560'>exact</span> <span m='2093929'>indices</span>
  <span m='2094320'>here.</span> <span m='2094870'>But</span> <span m='2094920'>the</span>
  <span m='2095010'>point</span> <span m='2095159'>is,</span> <span m='2095280'>this</span>
  <span m='2095460'>is</span> <span m='2095580'>all</span> <span m='2095790'>in</span>
  <span m='2095909'>the</span> <span m='2096000'>past,</span> <span m='2098220'>and</span>
  <span m='2098370'>this</span> <span m='2098550'>is</span> <span m='2098670'>all</span>
  <span m='2098850'>in</span> <span m='2098940'>the</span> <span m='2099030'>past,</span>
  <span m='2100320'>so</span> <span m='2100500'>I</span> <span m='2100620'>know</span>
  <span m='2100890'>all</span> <span m='2101040'>these</span> <span m='2101190'>pi
  js,</span> <span m='2101700'>I</span> <span m='2101760'>know</span> <span m='2101940'>they're</span>
  <span m='2102060'>inverses.</span> <span m='2103750'>So</span> <span m='2103800'>if</span>
  <span m='2103920'>I</span> <span m='2103980'>have</span> <span m='2104130'>this</span>
  <span m='2104310'>total</span> <span m='2104610'>sum,</span> <span m='2105060'>and</span>
  <span m='2105210'>I</span> <span m='2105270'>right</span> <span m='2105750'>multiply</span>
  <span m='2106200'>with</span> <span m='2106410'>these</span> <span m='2106620'>inverses,</span>
  <span m='2107160'>left</span> <span m='2107340'>multiply</span> <span m='2107700'>with</span>
  <span m='2107790'>these</span> <span m='2107980'>inverses,</span> <span m='2108450'>I</span>
  <span m='2108570'>get</span> <span m='2109110'>the</span> <span m='2109200'>one</span>
  <span m='2109380'>that</span> <span m='2109500'>I</span> <span m='2109590'>want.</span>
  <span m='2110400'>This</span> <span m='2110580'>gives</span> <span m='2110850'>me</span>
  <span m='2112020'>some</span> <span m='2112260'>particular</span> <span m='2114660'>pi</span>
  <span m='2116180'>k,</span> <span m='2118140'>if</span> <span m='2118260'>I</span>
  <span m='2118320'>set</span> <span m='2118530'>the</span> <span m='2118650'>indices</span>
  <span m='2119010'>right.</span> </p><p><span m='2122340'>OK?</span> <span m='2122760'>So</span>
  <span m='2123450'>if</span> <span m='2123630'>I</span> <span m='2123720'>know</span>
  <span m='2123870'>this</span> <span m='2124020'>query,</span> <span m='2124350'>I</span>
  <span m='2124440'>figure</span> <span m='2124610'>out</span> <span m='2124710'>what</span>
  <span m='2124830'>this</span> <span m='2125010'>update</span> <span m='2125310'>is.</span>
  <span m='2126330'>Now</span> <span m='2126520'>once</span> <span m='2126690'>I</span>
  <span m='2126780'>know</span> <span m='2126900'>what</span> <span m='2127020'>this</span>
  <span m='2127170'>update</span> <span m='2127500'>is,</span> <span m='2127950'>and</span>
  <span m='2128070'>I</span> <span m='2128160'>know</span> <span m='2128310'>this</span>
  <span m='2128520'>query,</span> <span m='2129270'>then</span> <span m='2129480'>in</span>
  <span m='2129690'>this</span> <span m='2129930'>sum,</span> <span m='2131160'>I</span>
  <span m='2131250'>know</span> <span m='2131430'>everything</span> <span m='2131850'>except</span>
  <span m='2132150'>this</span> <span m='2132360'>one</span> <span m='2132600'>thing.</span>
  <span m='2133440'>And</span> <span m='2133590'>so</span> <span m='2134530'>by</span>
  <span m='2134730'>using</span> <span m='2134970'>the</span> <span m='2135030'>same</span>
  <span m='2135270'>trick,</span> <span m='2135640'>I</span> <span m='2135740'>can</span>
  <span m='2135750'>figure</span> <span m='2135930'>out</span> <span m='2136020'>what</span>
  <span m='2136140'>this</span> <span m='2136320'>update</span> <span m='2136620'>is.</span>
  <span m='2137280'>So</span> <span m='2137760'>now</span> <span m='2138030'>I</span>
  <span m='2138120'>know</span> <span m='2138270'>the</span> <span m='2138360'>first</span>
  <span m='2138600'>two</span> <span m='2138750'>updates,</span> <span m='2139230'>if</span>
  <span m='2139380'>I</span> <span m='2139500'>then</span> <span m='2139700'>know</span>
  <span m='2139890'>the</span> <span m='2140010'>answer</span> <span m='2140220'>to</span>
  <span m='2140280'>this</span> <span m='2140460'>query,</span> <span m='2141000'>I</span>
  <span m='2141090'>can</span> <span m='2141210'>figure</span> <span m='2141390'>out</span>
  <span m='2141450'>what</span> <span m='2141570'>this</span> <span m='2141720'>update</span>
  <span m='2141990'>is.</span> <span m='2142200'>If</span> <span m='2142290'>I</span>
  <span m='2142320'>know</span> <span m='2142470'>the</span> <span m='2142560'>answer</span>
  <span m='2142740'>to</span> <span m='2142800'>this</span> <span m='2142950'>query,</span>
  <span m='2143190'>I</span> <span m='2143250'>can</span> <span m='2143370'>figure</span>
  <span m='2143670'>this</span> <span m='2143850'>update.</span> <span m='2144150'>Because</span>
  <span m='2144480'>they're</span> <span m='2144600'>perfectly</span> <span m='2145050'>interleaved,</span>
  <span m='2146060'>I</span> <span m='2146100'>only</span> <span m='2146280'>need</span>
  <span m='2146430'>to</span> <span m='2147000'>reconstruct</span> <span m='2147540'>one</span>
  <span m='2147780'>update</span> <span m='2148080'>at</span> <span m='2148170'>a</span>
  <span m='2148260'>time.</span> </p><p><span m='2149290'>So</span> <span m='2149310'>if</span>
  <span m='2149430'>I'm</span> <span m='2149550'>given--</span> <span m='2150360'>if</span>
  <span m='2150510'>I've</span> <span m='2150660'>somehow</span> <span m='2151110'>encoded</span>
  <span m='2151740'>all</span> <span m='2152040'>of</span> <span m='2152130'>the</span>
  <span m='2152250'>queries</span> <span m='2153480'>results,</span> <span m='2154260'>all</span>
  <span m='2154500'>of</span> <span m='2154590'>these</span> <span m='2154980'>prefix</span>
  <span m='2155350'>sums,</span> <span m='2156120'>and</span> <span m='2156390'>I'm</span>
  <span m='2156510'>given</span> <span m='2156900'>the</span> <span m='2156990'>past,</span>
  <span m='2158430'>then</span> <span m='2158790'>I</span> <span m='2158910'>can</span>
  <span m='2159060'>reconstruct</span> <span m='2159690'>what</span> <span m='2159810'>all</span>
  <span m='2159930'>the</span> <span m='2160020'>updates</span> <span m='2160440'>were.</span>
  <span m='2161490'>So</span> <span m='2162180'>that's</span> <span m='2162420'>basically</span>
  <span m='2162750'>saying</span> <span m='2163050'>these</span> <span m='2163260'>two</span>
  <span m='2164160'>are</span> <span m='2164430'>the</span> <span m='2164550'>same</span>
  <span m='2164820'>issue.</span> <span m='2165570'>If</span> <span m='2165750'>I</span>
  <span m='2165810'>can</span> <span m='2165960'>encode</span> <span m='2166260'>the</span>
  <span m='2166380'>verified</span> <span m='2166800'>sums</span> <span m='2167130'>in</span>
  <span m='2167220'>the</span> <span m='2167280'>right</span> <span m='2167460'>subtree,</span>
  <span m='2168420'>using</span> <span m='2168780'>less</span> <span m='2169110'>than</span>
  <span m='2169320'>l</span> <span m='2169620'>root</span> <span m='2169860'>n</span>
  <span m='2170060'>log</span> <span m='2170310'>n</span> <span m='2170460'>bits,</span>
  <span m='2171180'>then</span> <span m='2171360'>I'll</span> <span m='2171420'>get</span>
  <span m='2171570'>a</span> <span m='2171630'>contradiction,</span> <span m='2172230'>because</span>
  <span m='2172530'>it</span> <span m='2172620'>implies</span> <span m='2173330'>that</span>
  <span m='2173570'>from</span> <span m='2173850'>that</span> <span m='2174000'>same</span>
  <span m='2174270'>encoding,</span> <span m='2175080'>you</span> <span m='2175170'>can</span>
  <span m='2175320'>also</span> <span m='2175650'>decode</span> <span m='2176220'>the</span>
  <span m='2176730'>update</span> <span m='2177000'>permutations</span> <span m='2177630'>in</span>
  <span m='2177690'>the</span> <span m='2177750'>left</span> <span m='2177960'>subtree.</span>
  <span m='2180570'>So</span> <span m='2180740'>that's</span> <span m='2180950'>our</span>
  <span m='2181010'>goal.</span> </p><p><span m='2184990'>OK.</span> <span m='2188180'>So</span>
  <span m='2191180'>we'd</span> <span m='2191330'>like</span> <span m='2191510'>to</span>
  <span m='2191600'>prove</span> <span m='2191870'>this</span> <span m='2192140'>for</span>
  <span m='2192350'>verify</span> <span m='2192800'>sum.</span> <span m='2193640'>But</span>
  <span m='2193850'>the</span> <span m='2193940'>first</span> <span m='2194240'>thing</span>
  <span m='2194420'>I'm</span> <span m='2194480'>going</span> <span m='2194600'>to</span>
  <span m='2194690'>do</span> <span m='2195050'>is</span> <span m='2195200'>consider</span>
  <span m='2195980'>an</span> <span m='2196100'>easier</span> <span m='2196430'>problem,</span>
  <span m='2197460'>which</span> <span m='2197570'>is</span> <span m='2197780'>sum.</span>
  <span m='2199640'>So</span> <span m='2199990'>suppose,</span> <span m='2200890'>basically,</span>
  <span m='2201300'>this</span> <span m='2201490'>was</span> <span m='2201640'>not</span>
  <span m='2201910'>an</span> <span m='2202120'>input</span> <span m='2202600'>to</span>
  <span m='2202750'>the</span> <span m='2202870'>query.</span> <span m='2203740'>Suppose</span>
  <span m='2204100'>the</span> <span m='2204220'>query</span> <span m='2204520'>was,</span>
  <span m='2204850'>what</span> <span m='2205120'>is</span> <span m='2205300'>the</span>
  <span m='2205420'>sum</span> <span m='2205720'>of</span> <span m='2205960'>i?</span>
  <span m='2207820'>Like</span> <span m='2208000'>this.</span> <span m='2208750'>I</span>
  <span m='2208870'>just</span> <span m='2209770'>want--</span> <span m='2210580'>this</span>
  <span m='2210820'>is</span> <span m='2210910'>the</span> <span m='2211000'>partial</span>
  <span m='2211360'>sum</span> <span m='2211600'>problem.</span> <span m='2212360'>I'm</span>
  <span m='2212700'>given</span> <span m='2213040'>an</span> <span m='2213160'>index</span>
  <span m='2213540'>i,</span> <span m='2213850'>I want</span> <span m='2214030'>to</span>
  <span m='2214090'>know</span> <span m='2214360'>what</span> <span m='2214600'>is</span>
  <span m='2214870'>the</span> <span m='2215020'>permutation</span> <span m='2215800'>from</span>
  <span m='2216460'>pi</span> <span m='2216880'>0</span> <span m='2217030'>up to</span>
  <span m='2217120'>pi</span> <span m='2217375'>i.</span> <span m='2218080'>Now</span>
  <span m='2218200'>that</span> <span m='2218440'>is</span> <span m='2218560'>not--</span>
  <span m='2219970'>that</span> <span m='2220120'>doesn't</span> <span m='2220420'>correspond</span>
  <span m='2220810'>to</span> <span m='2220900'>dynamic</span> <span m='2221290'>connectivity,</span>
  <span m='2221720'>it's</span> <span m='2221810'>a</span> <span m='2221860'>new</span>
  <span m='2222040'>problem.</span> <span m='2223010'>We'll</span> <span m='2223210'>first</span>
  <span m='2223240'>prove</span> <span m='2223420'>a</span> <span m='2223480'>lower</span>
  <span m='2223660'>bound</span> <span m='2223870'>for</span> <span m='2223960'>that</span>
  <span m='2224110'>problem,</span> <span m='2224440'>and</span> <span m='2224530'>then</span>
  <span m='2224650'>we'll</span> <span m='2224740'>put</span> <span m='2224920'>the</span>
  <span m='2225010'>verify</span> <span m='2225490'>word</span> <span m='2225760'>back</span>
  <span m='2226060'>in.</span> </p><p><span m='2227545'>OK,</span> <span m='2228000'>so</span>
  <span m='2228210'>that's--</span> <span m='2229830'>we're</span> <span m='2229950'>now</span>
  <span m='2230400'>here</span> <span m='2231720'>at</span> <span m='2232680'>sum</span>
  <span m='2232980'>lower</span> <span m='2233160'>bound.</span> <span m='2234660'>Where</span>
  <span m='2234960'>should</span> <span m='2235170'>I</span> <span m='2235260'>go?</span>
  <span m='2238280'>Different--</span> <span m='2238820'>so</span> <span m='2239000'>this</span>
  <span m='2239240'>is</span> <span m='2239390'>a</span> <span m='2239720'>lower</span>
  <span m='2240020'>bound</span> <span m='2240290'>on</span> <span m='2240410'>the</span>
  <span m='2240500'>operation</span> <span m='2241020'>sum,</span> <span m='2241400'>as</span>
  <span m='2241550'>opposed</span> <span m='2241790'>to</span> <span m='2241910'>here,</span>
  <span m='2242090'>where</span> <span m='2242210'>we're</span> <span m='2242420'>adding</span>
  <span m='2242750'>up</span> <span m='2242960'>lower</span> <span m='2243100'>bounds.</span>
  <span m='2243560'>Sorry</span> <span m='2243860'>for</span> <span m='2244040'>the</span>
  <span m='2245150'>conflation</span> <span m='2245720'>of</span> <span m='2245810'>terms.</span>
  <span m='2247490'>Let's</span> <span m='2247850'>go</span> <span m='2249800'>here.</span>
  </p><p></p><p><span m='2269320'>So</span> <span m='2269650'>I'll</span> <span m='2269740'>call</span>
  <span m='2269950'>this a</span> <span m='2270280'>warm</span> <span m='2270550'>up.</span>
  <span m='2278690'>Suppose</span> <span m='2279190'>a</span> <span m='2279250'>query</span>
  <span m='2279730'>is</span> <span m='2280030'>sum</span> <span m='2280360'>of</span>
  <span m='2280840'>i,</span> <span m='2281890'>which</span> <span m='2282150'>is</span>
  <span m='2282220'>supposed</span> <span m='2282580'>to</span> <span m='2282670'>give</span>
  <span m='2282910'>you</span> <span m='2285640'>this</span> <span m='2285850'>prefix</span>
  <span m='2286360'>sum</span> <span m='2287330'>of</span> <span m='2287500'>pi</span>
  <span m='2287720'>j</span> <span m='2288040'>again,</span> <span m='2288290'>sum</span>
  <span m='2288610'>means</span> <span m='2288880'>composition.</span> <span m='2293060'>So</span>
  <span m='2297250'>this</span> <span m='2297400'>is</span> <span m='2297490'>going</span>
  <span m='2297630'>to</span> <span m='2297700'>be</span> <span m='2298000'>relatively</span>
  <span m='2298510'>easy</span> <span m='2298750'>to</span> <span m='2298870'>prove,</span>
  <span m='2299560'>but</span> <span m='2299650'>it's</span> <span m='2299770'>not</span>
  <span m='2299950'>the</span> <span m='2300040'>problem</span> <span m='2300700'>we</span>
  <span m='2300820'>actually</span> <span m='2301090'>want</span> <span m='2301240'>to</span>
  <span m='2301300'>solve,</span> <span m='2302230'>we'll</span> <span m='2302350'>use</span>
  <span m='2302590'>it</span> <span m='2302710'>to</span> <span m='2302860'>then</span>
  <span m='2303040'>solve</span> <span m='2303820'>the</span> <span m='2303910'>real</span>
  <span m='2304090'>problem.</span> <span m='2305660'>And</span> <span m='2305760'>this</span>
  <span m='2305800'>is</span> <span m='2305890'>the</span> <span m='2306010'>order</span>
  <span m='2306280'>in</span> <span m='2306340'>which</span> <span m='2306520'>we</span>
  <span m='2306640'>actually</span> <span m='2306880'>solve</span> <span m='2307120'>things.</span>
  </p><p><span m='2308390'>First,</span> <span m='2308670'>we prove</span> <span m='2308960'>a</span>
  <span m='2309130'>lower bound</span> <span m='2309310'>of</span> <span m='2309370'>partial</span>
  <span m='2309700'>sums.</span> <span m='2311200'>OK,</span> <span m='2311440'>so</span>
  <span m='2311620'>let</span> <span m='2311740'>me</span> <span m='2311980'>give</span>
  <span m='2312160'>you</span> <span m='2312220'>some</span> <span m='2312400'>notation,</span>
  <span m='2314500'>so</span> <span m='2314740'>we</span> <span m='2314830'>can</span>
  <span m='2314950'>really</span> <span m='2315160'>get</span> <span m='2315400'>at</span>
  <span m='2317170'>this</span> <span m='2317470'>claim.</span> <span m='2318910'>Reading</span>
  <span m='2319270'>on</span> <span m='2319360'>the</span> <span m='2319450'>right,</span>
  <span m='2321110'>writing</span> <span m='2321610'>on</span> <span m='2321700'>the</span>
  <span m='2321790'>left.</span> <span m='2322630'>So</span> <span m='2322810'>let</span>
  <span m='2323140'>r</span> <span m='2323440'>be</span> <span m='2323680'>all</span>
  <span m='2323800'>the</span> <span m='2323890'>cells</span> <span m='2324370'>that</span>
  <span m='2324520'>are</span> <span m='2324580'>read</span> <span m='2325720'>during</span>
  <span m='2327850'>the</span> <span m='2327970'>right</span> <span m='2328210'>subtree,</span>
  <span m='2329165'>which</span> <span m='2329580'>is</span> <span m='2330270'>an</span>
  <span m='2330400'>interval</span> <span m='2330760'>of</span> <span m='2330880'>time.</span>
  <span m='2334150'>And</span> <span m='2334390'>let</span> <span m='2334570'>w</span>
  <span m='2336220'>be</span> <span m='2336700'>the</span> <span m='2336820'>cells</span>
  <span m='2337360'>written</span> <span m='2338350'>in</span> <span m='2338500'>the</span>
  <span m='2338560'>left</span> <span m='2338740'>subtree.</span> </p><p></p><p><span
  m='2352440'>OK,</span> <span m='2352790'>so</span> <span m='2353120'>what</span>
  <span m='2353300'>we're</span> <span m='2353420'>talking</span> <span m='2353750'>about</span>
  <span m='2353960'>over</span> <span m='2354170'>here</span> <span m='2354440'>is</span>
  <span m='2354560'>that</span> <span m='2354770'>r</span> <span m='2355130'>intersects</span>
  <span m='2356220'>w,</span> <span m='2357150'>those are</span> <span m='2357540'>cells</span>
  <span m='2357920'>that</span> <span m='2358040'>are</span> <span m='2358100'>read</span>
  <span m='2358310'>during</span> <span m='2358550'>the</span> <span m='2358610'>right</span>
  <span m='2358970'>subtree,</span> <span m='2359150'>that</span> <span m='2359270'>were</span>
  <span m='2359380'>at</span> <span m='2359450'>some</span> <span m='2359660'>point</span>
  <span m='2360320'>written</span> <span m='2360560'>during</span> <span m='2360790'>the</span>
  <span m='2360860'>left</span> <span m='2361070'>subtree,</span> <span m='2362420'>should</span>
  <span m='2362660'>be</span> <span m='2362900'>large.</span> <span m='2363950'>So</span>
  <span m='2364050'>we</span> <span m='2364150'>want</span> <span m='2364190'>to</span>
  <span m='2364250'>prove</span> <span m='2364400'>a</span> <span m='2364460'>lower</span>
  <span m='2364640'>bound</span> <span m='2364880'>on</span> <span m='2365040'>the</span>
  <span m='2365120'>size</span> <span m='2365570'>of</span> <span m='2365660'>r</span>
  <span m='2365840'>intersect</span> <span m='2366280'>w.</span> <span m='2370760'>So</span>
  <span m='2372530'>if</span> <span m='2372710'>the</span> <span m='2372830'>lower</span>
  <span m='2373040'>bound</span> <span m='2373280'>doesn't</span> <span m='2373670'>hold,</span>
  <span m='2374090'>that</span> <span m='2374300'>means</span> <span m='2374570'>that</span>
  <span m='2374690'>r</span> <span m='2374840'>intersect</span> <span m='2375260'>w</span>
  <span m='2375560'>is</span> <span m='2375680'>relatively</span> <span m='2376280'>small.</span>
  <span m='2377880'>So</span> <span m='2378050'>imagine</span> <span m='2378530'>a</span>
  <span m='2378590'>situation</span> <span m='2379100'>where</span> <span m='2379190'>r</span>
  <span m='2379310'>intersect</span> <span m='2379670'>w</span> <span m='2379880'>is</span>
  <span m='2380000'>very</span> <span m='2380180'>small,</span> <span m='2380550'>there's</span>
  <span m='2380600'>not</span> <span m='2381020'>very</span> <span m='2381230'>much</span>
  <span m='2381440'>information</span> <span m='2382010'>passed</span> <span m='2382310'>from</span>
  <span m='2382370'>the</span> <span m='2382430'>left</span> <span m='2382610'>subtree</span>
  <span m='2382940'>to</span> <span m='2383030'>the</span> <span m='2383120'>right</span>
  <span m='2383300'>subtree.</span> <span m='2384380'>If</span> <span m='2384530'>r</span>
  <span m='2384680'>intersect</span> <span m='2385040'>w</span> <span m='2385340'>is</span>
  <span m='2385430'>small,</span> <span m='2386010'>then</span> <span m='2386090'>presumably</span>
  <span m='2386570'>I</span> <span m='2386630'>can</span> <span m='2386780'>afford</span>
  <span m='2387110'>to</span> <span m='2387470'>write</span> <span m='2387740'>it</span>
  <span m='2387830'>down,</span> <span m='2388190'>I</span> <span m='2388280'>can</span>
  <span m='2388450'>encode</span> <span m='2388760'>it.</span> <span m='2389870'>So</span>
  <span m='2390080'>that's</span> <span m='2390290'>what</span> <span m='2390370'>we're</span>
  <span m='2390440'>going</span> <span m='2390560'>to</span> <span m='2390650'>do,</span>
  <span m='2391010'>and</span> <span m='2391190'>we'll</span> <span m='2391280'>compute--</span>
  <span m='2391940'>we'll</span> <span m='2392060'>figure</span> <span m='2392330'>out</span>
  <span m='2392480'>that</span> <span m='2392600'>this</span> <span m='2392750'>is</span>
  <span m='2392870'>indeed</span> <span m='2393740'>something</span> <span m='2394070'>we</span>
  <span m='2394130'>can</span> <span m='2394250'>afford.</span> </p><p><span m='2395350'>I'm</span>
  <span m='2395540'>going</span> <span m='2395750'>to</span> <span m='2395990'>encode</span>
  <span m='2396590'>r</span> <span m='2396860'>intersect</span> <span m='2397430'>w</span>
  <span m='2398540'>explicitly.</span> <span m='2400050'>Meaning--</span> <span m='2402770'>and</span>
  <span m='2402870'>this</span> <span m='2403010'>is</span> <span m='2403430'>a</span>
  <span m='2403490'>set</span> <span m='2403760'>of</span> <span m='2403970'>cells</span>
  <span m='2404660'>in</span> <span m='2404780'>memory.</span> <span m='2405470'>So</span>
  <span m='2405710'>for</span> <span m='2405830'>every</span> <span m='2406130'>cell,</span>
  <span m='2406430'>I'm going to</span> <span m='2406670'>write</span> <span m='2406850'>down</span>
  <span m='2407480'>what</span> <span m='2407690'>it's</span> <span m='2407840'>address</span>
  <span m='2408260'>is,</span> <span m='2409370'>and</span> <span m='2409670'>what</span>
  <span m='2409880'>the</span> <span m='2410000'>contents</span> <span m='2410450'>of</span>
  <span m='2410510'>the</span> <span m='2410630'>cell</span> <span m='2411140'>are.</span>
  <span m='2412310'>So</span> <span m='2413930'>write</span> <span m='2414080'>down</span>
  <span m='2414290'>the</span> <span m='2414410'>addresses</span> <span m='2416570'>and</span>
  <span m='2416930'>the</span> <span m='2417020'>contents</span> <span m='2418850'>for</span>
  <span m='2419060'>every</span> <span m='2419330'>such</span> <span m='2419600'>cell.</span>
  </p><p><span m='2420720'>So</span> <span m='2420770'>how</span> <span m='2420980'>many</span>
  <span m='2421250'>bits</span> <span m='2421490'>does</span> <span m='2421640'>that</span>
  <span m='2421790'>take?</span> <span m='2423830'>I'm</span> <span m='2423890'>going</span>
  <span m='2424040'>to</span> <span m='2424100'>say</span> <span m='2424400'>that</span>
  <span m='2424580'>it's</span> <span m='2425600'>r</span> <span m='2425840'>intersect</span>
  <span m='2426290'>w</span> <span m='2428210'>times</span> <span m='2429330'>log</span>
  <span m='2429680'>n</span> <span m='2429860'>bits.</span> <span m='2433250'>Here's</span>
  <span m='2433610'>where</span> <span m='2433700'>I</span> <span m='2433760'>need</span>
  <span m='2433910'>to</span> <span m='2434030'>mention</span> <span m='2434420'>an</span>
  <span m='2434590'>assumption.</span> <span m='2435830'>I'm</span> <span m='2436370'>assuming</span>
  <span m='2436760'>that</span> <span m='2436970'>the</span> <span m='2437630'>address</span>
  <span m='2438020'>space</span> <span m='2438470'>is</span> <span m='2438710'>order</span>
  <span m='2439010'>log</span> <span m='2439310'>n</span> <span m='2439430'>bits</span>
  <span m='2439670'>long,</span> <span m='2439920'>that's</span> <span m='2440090'>like</span>
  <span m='2440270'>saying</span> <span m='2440600'>that</span> <span m='2440780'>the</span>
  <span m='2440960'>space</span> <span m='2441410'>of</span> <span m='2441500'>your</span>
  <span m='2441620'>data</span> <span m='2441830'>structure</span> <span m='2442280'>is</span>
  <span m='2442490'>order--</span> <span m='2444050'>is</span> <span m='2444440'>polynomial</span>
  <span m='2445340'>in</span> <span m='2445490'>n.</span> <span m='2446160'>And if</span>
  <span m='2446300'>you</span> <span m='2446450'>want</span> <span m='2446690'>any</span>
  <span m='2447350'>hope</span> <span m='2447770'>of</span> <span m='2448070'>having</span>
  <span m='2448340'>a</span> <span m='2448400'>reasonable</span> <span m='2448730'>update</span>
  <span m='2449000'>time,</span> <span m='2449270'>you</span> <span m='2449360'>need</span>
  <span m='2449480'>to</span> <span m='2449570'>have</span> <span m='2449660'>polynomial</span>
  <span m='2450230'>space</span> <span m='2450770'>at</span> <span m='2450860'>most.</span>
  <span m='2451670'>So</span> <span m='2451760'>assuming</span> <span m='2452090'>polynomial</span>
  <span m='2452540'>space,</span> <span m='2452900'>each</span> <span m='2453110'>of</span>
  <span m='2453170'>those</span> <span m='2453320'>addresses</span> <span m='2453830'>only</span>
  <span m='2454010'>takes</span> <span m='2454220'>order</span> <span m='2454460'>log</span>
  <span m='2454700'>n</span> <span m='2454830'>bits</span> <span m='2455060'>to</span>
  <span m='2455150'>write</span> <span m='2455330'>down.</span> <span m='2456140'>The</span>
  <span m='2456230'>contents,</span> <span m='2457670'>let's</span> <span m='2457880'>say,</span>
  <span m='2458030'>also</span> <span m='2458390'>take</span> <span m='2459320'>order</span>
  <span m='2459590'>log</span> <span m='2459860'>n</span> <span m='2460010'>bits</span>
  <span m='2460550'>to</span> <span m='2460640'>write</span> <span m='2460820'>down.</span>
  </p><p><span m='2464020'>OK,</span> <span m='2464980'>so</span> <span m='2466360'>fine.</span>
  <span m='2468880'>That's--</span> <span m='2470510'>I</span> <span m='2470990'>mean,</span>
  <span m='2471632'>yeah.</span> <span m='2472840'>We</span> <span m='2472930'>don't</span>
  <span m='2473050'>really</span> <span m='2473290'>need</span> <span m='2473440'>to</span>
  <span m='2473560'>make</span> <span m='2473710'>those</span> <span m='2473890'>assumptions,</span>
  <span m='2474370'>I</span> <span m='2474430'>don't</span> <span m='2474580'>think,</span>
  <span m='2474850'>but</span> <span m='2475870'>we</span> <span m='2475960'>will</span>
  <span m='2476110'>for</span> <span m='2476290'>here</span> <span m='2476530'>to</span>
  <span m='2476920'>keep</span> <span m='2477100'>things</span> <span m='2477280'>simple.</span>
  <span m='2480140'>So</span> <span m='2480400'>if</span> <span m='2480640'>r</span>
  <span m='2480820'>intersect</span> <span m='2481180'>w</span> <span m='2481450'>is</span>
  <span m='2481500'>small,</span> <span m='2481900'>meaning</span> <span m='2482200'>smaller</span>
  <span m='2482740'>than</span> <span m='2483070'>this</span> <span m='2483280'>thing,</span>
  <span m='2484270'>then</span> <span m='2484720'>this</span> <span m='2485320'>will</span>
  <span m='2485440'>be</span> <span m='2485540'>small,</span> <span m='2485590'>smaller</span>
  <span m='2486430'>than</span> <span m='2487540'>l</span> <span m='2487840'>root</span>
  <span m='2488470'>log</span> <span m='2488770'>n.</span> <span m='2492516'>OK.</span>
  </p><p><span m='2493450'>So</span> <span m='2495700'>on</span> <span m='2495850'>the</span>
  <span m='2495940'>other</span> <span m='2496150'>hand,</span> <span m='2496460'>we</span>
  <span m='2496480'>know</span> <span m='2496660'>that</span> <span m='2496780'>every</span>
  <span m='2497170'>encoding</span> <span m='2497740'>should</span> <span m='2498040'>take</span>
  <span m='2498700'>l</span> <span m='2498920'>root</span> <span m='2499150'>n</span>
  <span m='2499420'>log</span> <span m='2499660'>n</span> <span m='2499810'>bits.</span>
  <span m='2501360'>And</span> <span m='2501700'>so</span> <span m='2501940'>this</span>
  <span m='2502420'>will</span> <span m='2502720'>be</span> <span m='2503620'>a</span>
  <span m='2503680'>contradiction,</span> <span m='2504190'>although</span> <span
  m='2504700'>we</span> <span m='2504820'>haven't</span> <span m='2505000'>quite</span>
  <span m='2505210'>encoded</span> <span m='2505630'>what</span> <span m='2505780'>we</span>
  <span m='2505930'>need</span> <span m='2506560'>yet,</span> <span m='2507670'>or</span>
  <span m='2507820'>we</span> <span m='2507910'>haven't</span> <span m='2508270'>proved</span>
  <span m='2508540'>that,</span> <span m='2509470'>but</span> <span m='2509630'>we're</span>
  <span m='2510010'>getting</span> <span m='2510250'>to</span> <span m='2510370'>be
  at</span> <span m='2510520'>the</span> <span m='2510610'>right</span> <span m='2510760'>point.</span>
  <span m='2511390'>These</span> <span m='2511600'>log</span> <span m='2512080'>ns</span>
  <span m='2512410'>are</span> <span m='2512530'>going</span> <span m='2512640'>to</span>
  <span m='2512740'>cancel</span> <span m='2513600'>in</span> <span m='2513860'>a</span>
  <span m='2514120'>moment.</span> </p><p><span m='2515890'>So</span> <span m='2516160'>what</span>
  <span m='2516340'>we</span> <span m='2516460'>need</span> <span m='2516580'>to</span>
  <span m='2516730'>do</span> <span m='2517390'>is,</span> <span m='2518080'>I</span>
  <span m='2518190'>claim</span> <span m='2518440'>this</span> <span m='2518620'>is</span>
  <span m='2518710'>actually</span> <span m='2519010'>enough</span> <span m='2519250'>to</span>
  <span m='2519400'>encode</span> <span m='2519760'>what</span> <span m='2519880'>we</span>
  <span m='2520000'>need.</span> <span m='2520790'>And</span> <span m='2520930'>so</span>
  <span m='2521080'>all</span> <span m='2521290'>that's</span> <span m='2521440'>left</span>
  <span m='2522340'>is</span> <span m='2523600'>a</span> <span m='2523690'>decoding</span>
  <span m='2524230'>algorithm</span> <span m='2528240'>for</span> <span m='2529380'>the</span>
  <span m='2529710'>sum</span> <span m='2530100'>queries</span> <span m='2531660'>in</span>
  <span m='2532140'>the</span> <span m='2532260'>right</span> <span m='2532500'>subtree.</span>
  <span m='2540710'>So</span> <span m='2540850'>how</span> <span m='2541030'>are</span>
  <span m='2541060'>we</span> <span m='2541120'>going</span> <span m='2541270'>to</span>
  <span m='2541330'>do</span> <span m='2541480'>that?</span> <span m='2542960'>So</span>
  <span m='2543370'>this</span> <span m='2543580'>is</span> <span m='2543670'>my</span>
  <span m='2543800'>encoding,</span> <span m='2544210'>these</span> <span m='2544330'>are</span>
  <span m='2544390'>the</span> <span m='2544510'>bits</span> <span m='2544750'>that</span>
  <span m='2544870'>I</span> <span m='2544930'>have</span> <span m='2545110'>written</span>
  <span m='2545350'>down.</span> <span m='2546340'>So</span> <span m='2546670'>now</span>
  <span m='2547000'>what</span> <span m='2547180'>I</span> <span m='2547270'>know,</span>
  <span m='2548110'>as</span> <span m='2548320'>a</span> <span m='2548380'>decoder,</span>
  <span m='2549580'>is</span> <span m='2549880'>I</span> <span m='2549940'>know</span>
  <span m='2550240'>everything</span> <span m='2550660'>about</span> <span m='2550900'>the</span>
  <span m='2550960'>past.</span> <span m='2552590'>I</span> <span m='2552690'>don't</span>
  <span m='2552790'>know</span> <span m='2552940'>what</span> <span m='2553060'>these</span>
  <span m='2553270'>updates</span> <span m='2554110'>are,</span> <span m='2554390'>that's</span>
  <span m='2554560'>my</span> <span m='2554710'>whole</span> <span m='2554890'>goal,</span>
  <span m='2555220'>to figure</span> <span m='2555520'>out what</span> <span m='2555700'>they</span>
  <span m='2555940'>are.</span> <span m='2556600'>I</span> <span m='2556690'>don't</span>
  <span m='2556870'>know</span> <span m='2556990'>what</span> <span m='2557110'>the</span>
  <span m='2557200'>results</span> <span m='2558190'>of</span> <span m='2558310'>the</span>
  <span m='2558400'>queries</span> <span m='2558730'>are,</span> <span m='2559030'>but</span>
  <span m='2559300'>magically,</span> <span m='2559780'>I</span> <span m='2559870'>know</span>
  <span m='2560080'>that r</span> <span m='2560260'>intersect</span> <span m='2560690'>w.</span>
  <span m='2561050'>Well,</span> <span m='2561340'>not</span> <span m='2561520'>magically.</span>
  <span m='2562030'>I</span> <span m='2562090'>wrote</span> <span m='2562300'>it</span>
  <span m='2562360'>down,</span> <span m='2562660'>kept</span> <span m='2563130'>track</span>
  <span m='2564070'>on</span> <span m='2564190'>a</span> <span m='2564250'>piece</span>
  <span m='2564400'>of</span> <span m='2564460'>paper.</span> <span m='2565670'>So</span>
  <span m='2565780'>that's</span> <span m='2565990'>what</span> <span m='2566110'>I</span>
  <span m='2566200'>know.</span> <span m='2567580'>And</span> <span m='2567760'>so</span>
  <span m='2567910'>the</span> <span m='2568000'>idea</span> <span m='2568270'>is,</span>
  <span m='2568640'>well,</span> <span m='2570460'>somebody</span> <span m='2571030'>gave</span>
  <span m='2571270'>us</span> <span m='2571420'>a</span> <span m='2571480'>data</span>
  <span m='2571720'>structure,</span> <span m='2572270'>tells</span> <span m='2572710'>you</span>
  <span m='2572830'>how</span> <span m='2572950'>to</span> <span m='2573040'>do</span>
  <span m='2573160'>an</span> <span m='2573250'>update,</span> <span m='2573550'>tells</span>
  <span m='2573760'>you</span> <span m='2573850'>how</span> <span m='2573940'>to</span>
  <span m='2574030'>do</span> <span m='2574150'>a</span> <span m='2574210'>query.</span>
  </p><p><span m='2575090'>Let's</span> <span m='2575200'>run</span> <span m='2575470'>the</span>
  <span m='2575590'>query</span> <span m='2575920'>algorithms</span> <span m='2576460'>over</span>
  <span m='2576700'>here.</span> <span m='2578800'>Run</span> <span m='2578950'>that</span>
  <span m='2579070'>query,</span> <span m='2579400'>run</span> <span m='2579580'>that</span>
  <span m='2579700'>query,</span> <span m='2580000'>or</span> <span m='2580030'>whatever.</span>
  <span m='2583270'>It's</span> <span m='2583510'>a</span> <span m='2583540'>little</span>
  <span m='2583840'>hard</span> <span m='2584020'>to</span> <span m='2584110'>run</span>
  <span m='2584350'>them,</span> <span m='2584530'>because</span> <span m='2585190'>we</span>
  <span m='2585310'>don't</span> <span m='2585460'>know</span> <span m='2585670'>what</span>
  <span m='2585820'>happened</span> <span m='2586180'>in</span> <span m='2586300'>this</span>
  <span m='2586540'>intermediate</span> <span m='2587080'>part.</span> <span m='2588130'>But</span>
  <span m='2588310'>I</span> <span m='2588370'>claim</span> <span m='2588940'>r</span>
  <span m='2589160'>intersect</span> <span m='2589390'>w</span> <span m='2589690'>tells</span>
  <span m='2589990'>us</span> <span m='2590110'>everything</span> <span m='2590470'>we</span>
  <span m='2590560'>need</span> <span m='2590710'>to</span> <span m='2590800'>know.</span>
  <span m='2592430'>So</span> <span m='2592510'>the</span> <span m='2592570'>decoding</span>
  <span m='2593020'>algorithm</span> <span m='2593950'>is</span> <span m='2594160'>just</span>
  <span m='2594850'>simulate</span> <span m='2598840'>sum</span> <span m='2599140'>queries,</span>
  <span m='2603220'>simulate</span> <span m='2603760'>that</span> <span m='2603940'>algorithm.</span>
  </p><p></p><p><span m='2615780'>And</span> <span m='2617000'>let's</span> <span
  m='2617420'>go</span> <span m='2617790'>up</span> <span m='2618160'>here.</span>
  </p><p></p><p><span m='2634160'>How</span> <span m='2634310'>do</span> <span m='2634400'>we</span>
  <span m='2634520'>simulate</span> <span m='2634970'>that</span> <span m='2635180'>algorithm?</span>
  <span m='2635680'>Well,</span> <span m='2636110'>the</span> <span m='2636260'>algorithm</span>
  <span m='2636710'>makes</span> <span m='2637040'>a</span> <span m='2637100'>series</span>
  <span m='2637790'>of</span> <span m='2638180'>cell</span> <span m='2638870'>reads,</span>
  <span m='2639470'>and</span> <span m='2639620'>maybe</span> <span m='2639980'>writes,</span>
  <span m='2640410'>but</span> <span m='2640520'>really</span> <span m='2640760'>we</span>
  <span m='2640880'>care</span> <span m='2641060'>about</span> <span m='2641300'>the</span>
  <span m='2641390'>reads.</span> <span m='2643580'>Writes</span> <span m='2643970'>are</span>
  <span m='2644030'>pretty</span> <span m='2644270'>easy</span> <span m='2644480'>to</span>
  <span m='2644600'>simulate.</span> </p><p></p><p><span m='2661590'>There</span>
  <span m='2661680'>are</span> <span m='2661760'>three</span> <span m='2662000'>cases</span>
  <span m='2662540'>for</span> <span m='2662880'>reads.</span> <span m='2663470'>It</span>
  <span m='2663560'>could</span> <span m='2663770'>be</span> <span m='2663950'>that</span>
  <span m='2664100'>the</span> <span m='2664190'>thing</span> <span m='2664370'>you're</span>
  <span m='2664460'>trying</span> <span m='2664730'>to</span> <span m='2664820'>read</span>
  <span m='2665870'>was</span> <span m='2666140'>written</span> <span m='2666440'>in</span>
  <span m='2666590'>the</span> <span m='2666650'>right</span> <span m='2666830'>subtree,</span>
  <span m='2667340'>it</span> <span m='2667430'>could</span> <span m='2667610'>be</span>
  <span m='2667850'>that</span> <span m='2668030'>it</span> <span m='2668120'>was</span>
  <span m='2668300'>written</span> <span m='2668510'>in</span> <span m='2668600'>the</span>
  <span m='2668690'>left</span> <span m='2668840'>subtree,</span> <span m='2669650'>or</span>
  <span m='2669770'>it</span> <span m='2669830'>could</span> <span m='2669980'>be</span>
  <span m='2670220'>it</span> <span m='2670270'>was</span> <span m='2670460'>written</span>
  <span m='2670790'>in</span> <span m='2670970'>the</span> <span m='2671060'>past,</span>
  <span m='2671730'>before</span> <span m='2672740'>we</span> <span m='2672890'>got</span>
  <span m='2673130'>to</span> <span m='2674090'>v</span> <span m='2674300'>subtree.</span>
  <span m='2676190'>Now</span> <span m='2676340'>we</span> <span m='2676430'>don't</span>
  <span m='2676610'>necessarily</span> <span m='2677030'>know</span> <span m='2677210'>which</span>
  <span m='2677450'>case</span> <span m='2677690'>we're</span> <span m='2677810'>in,</span>
  <span m='2678260'>but</span> <span m='2678980'>I</span> <span m='2679010'>claim</span>
  <span m='2679250'>we'll</span> <span m='2679340'>be</span> <span m='2679460'>able</span>
  <span m='2679580'>to</span> <span m='2679640'>figure</span> <span m='2679910'>it</span>
  <span m='2679970'>out.</span> <span m='2680890'>Because</span> <span m='2682110'>any</span>
  <span m='2682280'>cells</span> <span m='2682640'>that</span> <span m='2682760'>are</span>
  <span m='2682970'>written</span> <span m='2683600'>in</span> <span m='2683840'>the</span>
  <span m='2683960'>right</span> <span m='2684170'>subtree,</span> <span m='2685940'>we've</span>
  <span m='2686120'>just</span> <span m='2686330'>been</span> <span m='2686510'>running</span>
  <span m='2686900'>the</span> <span m='2686990'>simulation</span> <span m='2687560'>algorithm,</span>
  <span m='2687830'>so</span> <span m='2688100'>every</span> <span m='2688310'>time</span>
  <span m='2688520'>we</span> <span m='2688610'>do</span> <span m='2688730'>it</span>
  <span m='2688790'>right,</span> <span m='2689060'>we</span> <span m='2689180'>just</span>
  <span m='2690140'>can</span> <span m='2690290'>store</span> <span m='2690560'>it</span>
  <span m='2690650'>off</span> <span m='2690800'>to</span> <span m='2690890'>the</span>
  <span m='2690980'>side.</span> </p><p><span m='2691460'>So</span> <span m='2692930'>when</span>
  <span m='2693110'>we're</span> <span m='2693200'>doing</span> <span m='2693500'>simulations,</span>
  <span m='2694130'>we</span> <span m='2694250'>don't</span> <span m='2694400'>need</span>
  <span m='2694520'>that</span> <span m='2694640'>the</span> <span m='2694760'>simulation</span>
  <span m='2695480'>takes</span> <span m='2695780'>low</span> <span m='2695960'>space.</span>
  <span m='2697100'>We</span> <span m='2697190'>just</span> <span m='2697340'>need</span>
  <span m='2697520'>that</span> <span m='2697660'>the</span> <span m='2697880'>input--</span>
  <span m='2698360'>these</span> <span m='2698810'>decoding</span> <span m='2699290'>algorithms</span>
  <span m='2699750'>doesn't</span> <span m='2699980'>have to</span> <span m='2700070'>be</span>
  <span m='2700160'>low</span> <span m='2700310'>space,</span> <span m='2700610'>we</span>
  <span m='2700730'>just</span> <span m='2700880'>need</span> <span m='2701150'>that
  the</span> <span m='2701240'>encoding</span> <span m='2701690'>was</span> <span
  m='2701780'>small.</span> <span m='2702830'>We've</span> <span m='2702920'>already</span>
  <span m='2703130'>made</span> <span m='2703310'>the</span> <span m='2703370'>encoding</span>
  <span m='2703730'>small.</span> <span m='2705010'>And</span> <span m='2705200'>so</span>
  <span m='2705380'>the</span> <span m='2705500'>decoding</span> <span m='2705950'>algorithm</span>
  <span m='2706260'>can</span> <span m='2706400'>spend</span> <span m='2706610'>lots</span>
  <span m='2706820'>of</span> <span m='2706880'>time</span> <span m='2707390'>and</span>
  <span m='2707570'>space,</span> <span m='2707960'>we</span> <span m='2708080'>just</span>
  <span m='2708290'>need</span> <span m='2708440'>to</span> <span m='2708530'>show</span>
  <span m='2708710'>that</span> <span m='2708860'>decoding</span> <span m='2709310'>algorithm</span>
  <span m='2709670'>can</span> <span m='2710030'>recover</span> <span m='2710540'>what</span>
  <span m='2710690'>it's</span> <span m='2710780'>supposed</span> <span m='2711020'>to</span>
  <span m='2711080'>recover.</span> <span m='2711380'>It's</span> <span m='2711680'>like</span>
  <span m='2711890'>a</span> <span m='2711950'>compression</span> <span m='2712580'>algorithm,</span>
  <span m='2713430'>to</span> <span m='2713660'>show</span> <span m='2713880'>there's</span>
  <span m='2714050'>some</span> <span m='2714320'>way</span> <span m='2714410'>to</span>
  <span m='2714500'>decompress,</span> <span m='2715160'>could</span> <span m='2715310'>take</span>
  <span m='2715490'>arbitrarily</span> <span m='2715970'>amount</span> <span m='2716180'>of</span>
  <span m='2716270'>time</span> <span m='2716510'>and</span> <span m='2716600'>space.</span>
  </p><p><span m='2716900'>So</span> <span m='2718070'>when</span> <span m='2718280'>we're</span>
  <span m='2718700'>simulating</span> <span m='2719270'>the</span> <span m='2719360'>right</span>
  <span m='2719540'>subtree,</span> <span m='2720020'>and</span> <span m='2720140'>we</span>
  <span m='2720290'>simulate</span> <span m='2720680'>not</span> <span m='2720860'>only</span>
  <span m='2721040'>the</span> <span m='2721870'>sum</span> <span m='2722120'>queries,</span>
  <span m='2722480'>but</span> <span m='2723020'>also</span> <span m='2723290'>the</span>
  <span m='2723470'>updates.</span> <span m='2727370'>So</span> <span m='2727520'>whatever</span>
  <span m='2727820'>gets</span> <span m='2728000'>written</span> <span m='2728780'>during</span>
  <span m='2729110'>that</span> <span m='2729260'>simulation,</span> <span m='2730100'>we</span>
  <span m='2730220'>just</span> <span m='2730370'>store</span> <span m='2730670'>it,</span>
  <span m='2730790'>and</span> <span m='2730880'>so</span> <span m='2731240'>it's</span>
  <span m='2731510'>easy</span> <span m='2731780'>to</span> <span m='2731900'>reread</span>
  <span m='2732290'>it.</span> <span m='2733610'>If</span> <span m='2734330'>it</span>
  <span m='2734390'>was</span> <span m='2734540'>written</span> <span m='2734960'>in</span>
  <span m='2735290'>the</span> <span m='2735440'>left</span> <span m='2735680'>subtree,</span>
  <span m='2736250'>well,</span> <span m='2736430'>that</span> <span m='2736670'>is</span>
  <span m='2737030'>r</span> <span m='2737190'>intersect</span> <span m='2737850'>w.</span>
  <span m='2740990'>And</span> <span m='2741380'>we've</span> <span m='2741590'>written</span>
  <span m='2741830'>down</span> <span m='2742100'>r</span> <span m='2742190'>intersect</span>
  <span m='2742550'>w.</span> <span m='2742910'>So</span> <span m='2743090'>we</span>
  <span m='2743210'>can</span> <span m='2743360'>detect</span> <span m='2743780'>that</span>
  <span m='2743910'>this</span> <span m='2744080'>happened,</span> <span m='2744470'>because</span>
  <span m='2744830'>we</span> <span m='2744950'>look</span> <span m='2745190'>at</span>
  <span m='2746130'>r</span> <span m='2746300'>intersect</span> <span m='2746660'>w,</span>
  <span m='2747000'>we</span> <span m='2747090'>see,</span> <span m='2747290'>oh</span>
  <span m='2747530'>that</span> <span m='2747770'>word</span> <span m='2748010'>was</span>
  <span m='2748130'>in</span> <span m='2748250'>there,</span> <span m='2748970'>that</span>
  <span m='2749180'>address</span> <span m='2750020'>was</span> <span m='2750230'>in</span>
  <span m='2750350'>there,</span> <span m='2750950'>and</span> <span m='2751070'>so</span>
  <span m='2751220'>we</span> <span m='2751370'>read</span> <span m='2751550'>the</span>
  <span m='2751640'>contents</span> <span m='2752150'>from</span> <span m='2752600'>the</span>
  <span m='2752720'>encoding.</span> </p><p><span m='2755120'>If</span> <span m='2755270'>it</span>
  <span m='2755330'>was</span> <span m='2755450'>in</span> <span m='2755540'>the</span>
  <span m='2755630'>past,</span> <span m='2757190'>it's</span> <span m='2757310'>also</span>
  <span m='2757580'>easy.</span> <span m='2760420'>We</span> <span m='2760430'>already</span>
  <span m='2760640'>know</span> <span m='2760790'>it.</span> <span m='2763100'>OK,</span>
  <span m='2763850'>so</span> <span m='2764030'>basically</span> <span m='2765440'>what</span>
  <span m='2765830'>we</span> <span m='2766280'>do--</span> <span m='2767690'>what</span>
  <span m='2767990'>the</span> <span m='2768080'>simulation</span> <span m='2768560'>algorithm</span>
  <span m='2768920'>is</span> <span m='2769010'>doing</span> <span m='2769310'>is</span>
  <span m='2769430'>it</span> <span m='2769490'>says,</span> <span m='2769880'>OK,</span>
  <span m='2770420'>let's</span> <span m='2770690'>assume</span> <span m='2771140'>that</span>
  <span m='2771320'>main</span> <span m='2771620'>memory</span> <span m='2772010'>was</span>
  <span m='2772460'>whatever</span> <span m='2772940'>it</span> <span m='2773030'>was</span>
  <span m='2773300'>at</span> <span m='2773390'>this</span> <span m='2773570'>point.</span>
  <span m='2774590'>That</span> <span m='2774680'>data</span> <span m='2774890'>structure,</span>
  <span m='2775490'>I</span> <span m='2775550'>mean</span> <span m='2775700'>we</span>
  <span m='2775910'>know</span> <span m='2776120'>everything</span> <span m='2776450'>about</span>
  <span m='2776660'>the</span> <span m='2776720'>past,</span> <span m='2777060'>so</span>
  <span m='2777160'>we</span> <span m='2777260'>know</span> <span m='2777360'>what</span>
  <span m='2777460'>the</span> <span m='2777560'>data</span> <span m='2777590'>structure</span>
  <span m='2777920'>looked</span> <span m='2778100'>like</span> <span m='2778280'>at</span>
  <span m='2778370'>this</span> <span m='2778520'>moment,</span> <span m='2779130'>store</span>
  <span m='2779330'>that.</span> <span m='2780710'>Update</span> <span m='2781310'>all</span>
  <span m='2781550'>of</span> <span m='2781670'>the</span> <span m='2782150'>cells</span>
  <span m='2782660'>that</span> <span m='2782810'>are</span> <span m='2782900'>in</span>
  <span m='2782990'>r</span> <span m='2783140'>intersect</span> <span m='2783530'>w</span>
  <span m='2783920'>given</span> <span m='2784160'>by</span> <span m='2784370'>our</span>
  <span m='2784460'>encoding.</span> <span m='2786050'>And</span> <span m='2786200'>then</span>
  <span m='2786500'>just</span> <span m='2786680'>run</span> <span m='2786920'>the</span>
  <span m='2787070'>algorithm.</span> </p><p><span m='2788520'>So</span> <span m='2788780'>we're</span>
  <span m='2789020'>sort</span> <span m='2789200'>of</span> <span m='2789290'>jumping</span>
  <span m='2789800'>into</span> <span m='2790010'>this</span> <span m='2790190'>moment</span>
  <span m='2790460'>in</span> <span m='2790580'>time</span> <span m='2791480'>with</span>
  <span m='2791660'>a</span> <span m='2791780'>slightly</span> <span m='2792710'>weird</span>
  <span m='2793040'>data</span> <span m='2793310'>structure.</span> <span m='2794360'>It's</span>
  <span m='2794510'>not</span> <span m='2794840'>the</span> <span m='2794960'>correct</span>
  <span m='2795290'>data</span> <span m='2795500'>structure.</span> <span m='2797330'>It's</span>
  <span m='2797540'>not</span> <span m='2797900'>what</span> <span m='2798050'>the</span>
  <span m='2798140'>data</span> <span m='2798320'>structure</span> <span m='2798620'>will</span>
  <span m='2798830'>actually</span> <span m='2799160'>look</span> <span m='2799340'>like</span>
  <span m='2799520'>at</span> <span m='2799580'>this</span> <span m='2799730'>point,</span>
  <span m='2799950'>but</span> <span m='2800090'>it's</span> <span m='2800210'>close</span>
  <span m='2800600'>enough.</span> <span m='2801470'>Because</span> <span m='2802400'>anything</span>
  <span m='2802790'>that's</span> <span m='2802940'>read</span> <span m='2803180'>here,</span>
  <span m='2804530'>either</span> <span m='2805010'>was</span> <span m='2805160'>written</span>
  <span m='2805400'>here,</span> <span m='2805670'>in</span> <span m='2805940'>which</span>
  <span m='2806090'>case</span> <span m='2806300'>it's</span> <span m='2806420'>correct,</span>
  <span m='2807440'>or</span> <span m='2807740'>was</span> <span m='2807950'>written</span>
  <span m='2808190'>here,</span> <span m='2808560'>in</span> <span m='2808660'>which</span>
  <span m='2808700'>case</span> <span m='2808960'>it's</span> <span m='2809030'>correct</span>
  <span m='2809540'>because</span> <span m='2809900'>r</span> <span m='2810020'>intersect</span>
  <span m='2810830'>w</span> <span m='2811250'>had</span> <span m='2811460'>it.</span>
  <span m='2813250'>Or</span> <span m='2813450'>isn't</span> <span m='2813670'>it</span>
  <span m='2813890'>written</span> <span m='2814130'>here,</span> <span m='2815220'>in</span>
  <span m='2815320'>which</span> <span m='2815390'>case--</span> <span m='2816290'>maybe</span>
  <span m='2816530'>it's</span> <span m='2816680'>always</span> <span m='2817070'>correct.</span>
  <span m='2819070'>No,</span> <span m='2819340'>no.</span> </p><p><span m='2819560'>See</span>
  <span m='2820010'>there</span> <span m='2820130'>could</span> <span m='2820310'>be</span>
  <span m='2820430'>some</span> <span m='2820640'>writes</span> <span m='2820970'>that</span>
  <span m='2821120'>happened</span> <span m='2821390'>here,</span> <span m='2822620'>where</span>
  <span m='2822800'>there's</span> <span m='2822980'>no</span> <span m='2823220'>corresponding</span>
  <span m='2823850'>read</span> <span m='2824060'>over</span> <span m='2824270'>here.</span>
  <span m='2824750'>So</span> <span m='2824930'>the</span> <span m='2825080'>data</span>
  <span m='2825320'>structure</span> <span m='2825620'>may</span> <span m='2825770'>have</span>
  <span m='2825860'>been</span> <span m='2825980'>changed</span> <span m='2826340'>in</span>
  <span m='2826400'>ways</span> <span m='2826580'>here</span> <span m='2826730'>that</span>
  <span m='2826880'>don't</span> <span m='2827390'>matter</span> <span m='2827990'>for</span>
  <span m='2828200'>this</span> <span m='2828710'>execution</span> <span m='2829280'>of</span>
  <span m='2829370'>the</span> <span m='2829460'>right</span> <span m='2829630'>subtree.</span>
  <span m='2830430'>So</span> <span m='2830570'>any</span> <span m='2830810'>rights</span>
  <span m='2831080'>that</span> <span m='2831290'>happened</span> <span m='2831650'>here</span>
  <span m='2831860'>to</span> <span m='2831980'>some</span> <span m='2832220'>cell</span>
  <span m='2832520'>probe,</span> <span m='2833300'>to</span> <span m='2833390'>some</span>
  <span m='2833600'>cell,</span> <span m='2834380'>where</span> <span m='2834530'>that</span>
  <span m='2834710'>cell</span> <span m='2834890'>is</span> <span m='2835010'>not</span>
  <span m='2835250'>read</span> <span m='2835430'>over</span> <span m='2835610'>here,</span>
  <span m='2835790'>we</span> <span m='2835910'>don't</span> <span m='2836060'>care</span>
  <span m='2836270'>about,</span> <span m='2836570'>because</span> <span m='2836780'>they</span>
  <span m='2836870'>don't</span> <span m='2837020'>affect</span> <span m='2837260'>the</span>
  <span m='2837350'>simulation.</span> <span m='2838820'>So</span> <span m='2839150'>we</span>
  <span m='2839300'>have</span> <span m='2839450'>a</span> <span m='2839510'>good</span>
  <span m='2839750'>enough</span> <span m='2840050'>data</span> <span m='2840260'>structure</span>
  <span m='2840830'>here,</span> <span m='2841190'>it</span> <span m='2841670'>may</span>
  <span m='2841790'>not</span> <span m='2841910'>be</span> <span m='2842060'>completely</span>
  <span m='2842630'>accurate,</span> <span m='2843440'>but</span> <span m='2843650'>it's</span>
  <span m='2843770'>accurate</span> <span m='2844130'>enough</span> <span m='2844400'>to</span>
  <span m='2844520'>run</span> <span m='2844730'>these</span> <span m='2844880'>queries.</span>
  </p><p><span m='2846170'>Once</span> <span m='2846380'>we</span> <span m='2846440'>run</span>
  <span m='2846620'>the</span> <span m='2846710'>queries,</span> <span m='2847190'>the</span>
  <span m='2847310'>queries</span> <span m='2847790'>output</span> <span m='2848270'>the</span>
  <span m='2848380'>sums.</span> <span m='2848760'>That's</span> <span m='2848960'>what</span>
  <span m='2849080'>we're</span> <span m='2849200'>assuming</span> <span m='2849620'>in</span>
  <span m='2849710'>this</span> <span m='2849860'>warm</span> <span m='2850090'>up,</span>
  <span m='2850760'>we</span> <span m='2850880'>run</span> <span m='2851060'>the</span>
  <span m='2851150'>query,</span> <span m='2851450'>we</span> <span m='2851570'>get</span>
  <span m='2851780'>the</span> <span m='2851900'>sum.</span> <span m='2853160'>Once</span>
  <span m='2853370'>I</span> <span m='2853460'>have</span> <span m='2853700'>that</span>
  <span m='2853880'>sum,</span> <span m='2854450'>as</span> <span m='2854690'>I</span>
  <span m='2854750'>argued</span> <span m='2854990'>before,</span> <span m='2855350'>once</span>
  <span m='2855530'>you</span> <span m='2855620'>know</span> <span m='2855800'>what</span>
  <span m='2855920'>the</span> <span m='2856010'>results</span> <span m='2856400'>of</span>
  <span m='2856460'>these</span> <span m='2856610'>queries</span> <span m='2856940'>were,</span>
  <span m='2857510'>I</span> <span m='2857600'>can</span> <span m='2857750'>figure</span>
  <span m='2857930'>out</span> <span m='2858080'>what</span> <span m='2858320'>the</span>
  <span m='2859490'>arguments</span> <span m='2859940'>to</span> <span m='2860060'>the</span>
  <span m='2860180'>updates</span> <span m='2860580'>were,</span> <span m='2861680'>by</span>
  <span m='2861830'>doing</span> <span m='2862070'>that</span> <span m='2862190'>inverse</span>
  <span m='2862640'>multiplication</span> <span m='2863240'>stuff.</span> <span m='2864810'>So</span>
  <span m='2864990'>that's</span> <span m='2865320'>actually</span> <span m='2866640'>it.</span>
  </p><p><span m='2867090'>What</span> <span m='2867300'>this</span> <span m='2867510'>implies</span>
  <span m='2869250'>is</span> <span m='2869400'>that</span> <span m='2869490'>this</span>
  <span m='2869700'>is</span> <span m='2869820'>a</span> <span m='2869940'>correct</span>
  <span m='2870300'>encoding,</span> <span m='2871570'>which</span> <span m='2871650'>means</span>
  <span m='2871980'>that</span> <span m='2872130'>this</span> <span m='2873120'>order,</span>
  <span m='2873480'>r</span> <span m='2873840'>intersect</span> <span m='2874260'>w</span>
  <span m='2875740'>times</span> <span m='2876030'>log</span> <span m='2876360'>n</span>
  <span m='2877320'>bits</span> <span m='2877620'>that</span> <span m='2877740'>we</span>
  <span m='2877860'>use</span> <span m='2877980'>to</span> <span m='2878100'>encode,</span>
  <span m='2878820'>must</span> <span m='2879180'>be</span> <span m='2879780'>at</span>
  <span m='2879930'>least</span> <span m='2880770'>this</span> <span m='2881160'>big.</span>
  <span m='2882690'>Because</span> <span m='2883050'>we</span> <span m='2883200'>know</span>
  <span m='2883740'>any</span> <span m='2883980'>encoding</span> <span m='2884370'>is</span>
  <span m='2884460'>going</span> <span m='2884580'>to</span> <span m='2884640'>require</span>
  <span m='2884940'>at</span> <span m='2885000'>least</span> <span m='2885210'>that</span>
  <span m='2885360'>many</span> <span m='2885570'>bits,</span> <span m='2888230'>l</span>
  <span m='2888630'>root</span> <span m='2888750'>n</span> <span m='2889210'>log</span>
  <span m='2889560'>n.</span> <span m='2892680'>And</span> <span m='2892980'>so</span>
  <span m='2893460'>the</span> <span m='2893580'>log</span> <span m='2893880'>ns</span>
  <span m='2894120'>cancel,</span> <span m='2895920'>and</span> <span m='2896160'>we're</span>
  <span m='2896280'>left</span> <span m='2896520'>with</span> <span m='2896790'>r</span>
  <span m='2896940'>intersect</span> <span m='2897360'>w</span> <span m='2898130'>is</span>
  <span m='2898290'>at</span> <span m='2898350'>least</span> <span m='2898740'>l</span>
  <span m='2898980'>root</span> <span m='2899290'>n.</span> <span m='2900060'>And</span>
  <span m='2900240'>this</span> <span m='2900420'>is</span> <span m='2900570'>exactly</span>
  <span m='2901050'>the</span> <span m='2901140'>quantity</span> <span m='2902040'>we</span>
  <span m='2902160'>cared</span> <span m='2902390'>about</span> <span m='2902620'>for</span>
  <span m='2902760'>this</span> <span m='2902940'>claim.</span> <span m='2904102'>So</span>
  <span m='2904560'>same</span> <span m='2904890'>thing,</span> <span m='2905130'>r</span>
  <span m='2905260'>intersect</span> <span m='2905640'>w</span> <span m='2905880'>is</span>
  <span m='2905970'>at</span> <span m='2906060'>least</span> <span m='2906800'>l</span>
  <span m='2907010'>root</span> <span m='2907498'>n.</span> </p><p><span m='2909450'>OK,
  so</span> <span m='2909690'>warm</span> <span m='2909960'>up</span> <span m='2910150'>done.</span>
  <span m='2911090'>Any</span> <span m='2911340'>questions</span> <span m='2911730'>about</span>
  <span m='2911910'>the</span> <span m='2912030'>warm</span> <span m='2912240'>up?</span>
  <span m='2913960'>So</span> <span m='2914100'>in</span> <span m='2914190'>this</span>
  <span m='2914670'>weird</span> <span m='2914940'>problem,</span> <span m='2915360'>which</span>
  <span m='2915510'>does</span> <span m='2915660'>not</span> <span m='2915870'>correspond</span>
  <span m='2916530'>to</span> <span m='2917520'>dynamic</span> <span m='2918030'>connectivity,</span>
  <span m='2919040'>because</span> <span m='2919330'>it's</span> <span m='2919620'>this</span>
  <span m='2919830'>other</span> <span m='2920070'>problem,</span> <span m='2920460'>prefix</span>
  <span m='2920820'>sums</span> <span m='2921760'>computation.</span> <span m='2923190'>We</span>
  <span m='2923370'>get</span> <span m='2923730'>the</span> <span m='2923850'>intended</span>
  <span m='2924240'>lower</span> <span m='2924450'>bound,</span> <span m='2924660'>you</span>
  <span m='2924750'>need</span> <span m='2924930'>log</span> <span m='2925200'>n</span>
  <span m='2925350'>per</span> <span m='2925500'>operation.</span> <span m='2926190'>Or</span>
  <span m='2926960'>you</span> <span m='2927090'>need</span> <span m='2927330'>root</span>
  <span m='2927480'>n log</span> <span m='2927760'>n</span> <span m='2927930'>per</span>
  <span m='2928800'>block</span> <span m='2929310'>operation.</span> </p><p><span
  m='2930710'>OK,</span> <span m='2931290'>but</span> <span m='2931410'>this</span>
  <span m='2931590'>is</span> <span m='2931710'>not</span> <span m='2931830'>what</span>
  <span m='2931980'>we</span> <span m='2932100'>really</span> <span m='2932370'>want,</span>
  <span m='2932670'>we</span> <span m='2932820'>really</span> <span m='2933090'>want</span>
  <span m='2933300'>a</span> <span m='2933360'>lower</span> <span m='2933600'>bound</span>
  <span m='2933990'>on</span> <span m='2934110'>verify</span> <span m='2934560'>sum.</span>
  <span m='2935490'>Where</span> <span m='2935610'>you're</span> <span m='2935790'>given</span>
  <span m='2936210'>as</span> <span m='2936360'>an</span> <span m='2936510'>argument</span>
  <span m='2937470'>the</span> <span m='2937560'>permutation</span> <span m='2938910'>that</span>
  <span m='2939060'>we're</span> <span m='2939210'>talking</span> <span m='2939570'>about</span>
  <span m='2939780'>over</span> <span m='2939960'>here.</span> <span m='2940980'>So</span>
  <span m='2942690'>this</span> <span m='2942960'>goal</span> <span m='2943320'>is</span>
  <span m='2943440'>not</span> <span m='2943710'>the</span> <span m='2943830'>right</span>
  <span m='2944040'>goal</span> <span m='2944280'>for</span> <span m='2944400'>verify</span>
  <span m='2944790'>sum,</span> <span m='2946170'>in</span> <span m='2946320'>some</span>
  <span m='2946530'>sense.</span> <span m='2947040'>Well,</span> <span m='2948450'>sort</span>
  <span m='2948690'>of</span> <span m='2948810'>the</span> <span m='2948900'>right</span>
  <span m='2949050'>goal.</span> <span m='2949240'>It's</span> <span m='2949410'>a</span>
  <span m='2949470'>little</span> <span m='2949680'>awkward</span> <span m='2950010'>though,</span>
  <span m='2950160'>because</span> <span m='2950430'>they're</span> <span m='2950550'>given</span>
  <span m='2951300'>as</span> <span m='2951510'>inputs</span> <span m='2952320'>to</span>
  <span m='2952440'>the</span> <span m='2952560'>queries.</span> <span m='2952980'>So</span>
  <span m='2953820'>what</span> <span m='2954000'>is</span> <span m='2954120'>there</span>
  <span m='2954240'>to</span> <span m='2954390'>encode?</span> <span m='2957240'>Well,</span>
  <span m='2957600'>we</span> <span m='2957720'>can</span> <span m='2957840'>still</span>
  <span m='2958050'>set</span> <span m='2958290'>it</span> <span m='2958380'>up</span>
  <span m='2958770'>in</span> <span m='2958950'>a</span> <span m='2959580'>useful</span>
  <span m='2959940'>way.</span> <span m='2961230'>Same</span> <span m='2961590'>goal,</span>
  <span m='2962760'>slightly</span> <span m='2963360'>restated.</span> </p><p></p><p><span
  m='2982230'>So</span> <span m='2982510'>this</span> <span m='2982690'>is</span>
  <span m='2983490'>the</span> <span m='2983710'>last</span> <span m='2983980'>step</span>
  <span m='2984610'>to</span> <span m='2984850'>verify</span> <span m='2985270'>sum</span>
  <span m='2985540'>lower</span> <span m='2985750'>bound.</span> </p><p></p><p><span
  m='3006830'>So</span> <span m='3007040'>here's</span> <span m='3007370'>the</span>
  <span m='3007450'>set</span> <span m='3007750'>up.</span> </p><p></p><p><span m='3065010'>OK,</span>
  <span m='3065660'>so</span> <span m='3065900'>slightly</span> <span m='3066320'>different</span>
  <span m='3066590'>set</span> <span m='3066750'>up</span> <span m='3066920'>here.</span>
  <span m='3067190'>Here</span> <span m='3067670'>I</span> <span m='3067850'>assumed</span>
  <span m='3068300'>that</span> <span m='3068420'>we</span> <span m='3068510'>just</span>
  <span m='3068750'>knew</span> <span m='3068900'>the</span> <span m='3069020'>past.</span>
  <span m='3070670'>I</span> <span m='3071030'>also</span> <span m='3071360'>basically</span>
  <span m='3071750'>assumed</span> <span m='3072650'>these</span> <span m='3072830'>two</span>
  <span m='3072980'>things,</span> <span m='3073250'>that</span> <span m='3073340'>we</span>
  <span m='3073970'>didn't</span> <span m='3074240'>know</span> <span m='3075320'>what</span>
  <span m='3075620'>the</span> <span m='3075920'>update</span> <span m='3076250'>permutations</span>
  <span m='3076910'>were</span> <span m='3077000'>in</span> <span m='3077060'>the</span>
  <span m='3077120'>left</span> <span m='3077330'>subtree,</span> <span m='3077750'>and</span>
  <span m='3077840'>we</span> <span m='3077960'>didn't</span> <span m='3078230'>know</span>
  <span m='3078530'>what</span> <span m='3078770'>the</span> <span m='3079070'>answers</span>
  <span m='3079460'>to</span> <span m='3079580'>the</span> <span m='3079700'>queries</span>
  <span m='3080090'>were</span> <span m='3080300'>in</span> <span m='3080390'>the</span>
  <span m='3080480'>right</span> <span m='3080660'>subtree.</span> <span m='3081680'>Now</span>
  <span m='3081950'>I'm</span> <span m='3082070'>going</span> <span m='3082250'>to</span>
  <span m='3082400'>assume</span> <span m='3082670'>we</span> <span m='3082760'>don't</span>
  <span m='3082970'>even</span> <span m='3083150'>know</span> <span m='3083750'>what</span>
  <span m='3083960'>we're</span> <span m='3084080'>passing</span> <span m='3084470'>into</span>
  <span m='3084710'>the</span> <span m='3084800'>queries,</span> <span m='3085100'>because</span>
  <span m='3085370'>that</span> <span m='3085670'>is</span> <span m='3085820'>the</span>
  <span m='3085910'>information</span> <span m='3086330'>we're</span> <span m='3086420'>trying</span>
  <span m='3086600'>to</span> <span m='3086690'>figure</span> <span m='3086960'>out.</span>
  </p><p><span m='3087860'>These</span> <span m='3088040'>two</span> <span m='3088190'>things</span>
  <span m='3088460'>are</span> <span m='3088580'>basically</span> <span m='3088970'>the</span>
  <span m='3089060'>same,</span> <span m='3089630'>if</span> <span m='3089780'>you</span>
  <span m='3089900'>knew</span> <span m='3090110'>all</span> <span m='3090260'>the</span>
  <span m='3090830'>update</span> <span m='3091130'>permutations,</span> <span m='3091760'>you</span>
  <span m='3091850'>could</span> <span m='3091970'>figure</span> <span m='3092210'>out</span>
  <span m='3092300'>all</span> <span m='3092390'>the</span> <span m='3092480'>query</span>
  <span m='3092690'>permutations.</span> <span m='3093380'>If</span> <span m='3093470'>you</span>
  <span m='3093530'>knew</span> <span m='3093620'>all</span> <span m='3093710'>the</span>
  <span m='3093800'>query</span> <span m='3094010'>permutations,</span> <span m='3095060'>you</span>
  <span m='3095150'>could</span> <span m='3095270'>figure</span> <span m='3095480'>out</span>
  <span m='3095570'>all</span> <span m='3095690'>the</span> <span m='3095780'>update</span>
  <span m='3096080'>permutations.</span> <span m='3096670'>That's</span> <span m='3096890'>what</span>
  <span m='3097010'>we</span> <span m='3097790'>argued</span> <span m='3098780'>over</span>
  <span m='3098990'>here,</span> <span m='3099450'>it's</span> <span m='3099590'>enough</span>
  <span m='3100460'>to</span> <span m='3100550'>figure</span> <span m='3100850'>out</span>
  <span m='3102670'>query</span> <span m='3102870'>permutations,</span> <span m='3103520'>then</span>
  <span m='3103610'>we</span> <span m='3103700'>could</span> <span m='3103820'>figure</span>
  <span m='3104060'>out</span> <span m='3104150'>the</span> <span m='3104260'>update</span>
  <span m='3104510'>permutations.</span> </p><p><span m='3106070'>It's</span> <span
  m='3106430'>just</span> <span m='3106580'>a</span> <span m='3106640'>little</span>
  <span m='3106850'>more</span> <span m='3107030'>awkward,</span> <span m='3107420'>because</span>
  <span m='3108920'>now</span> <span m='3109270'>there</span> <span m='3109410'>are</span>
  <span m='3109490'>arguments</span> <span m='3110030'>to</span> <span m='3110150'>queries.</span>
  <span m='3110900'>And</span> <span m='3110990'>so</span> <span m='3111170'>if</span>
  <span m='3111260'>we</span> <span m='3111380'>did</span> <span m='3111560'>this</span>
  <span m='3111710'>simulation,</span> <span m='3112910'>right?</span> <span m='3113360'>We'd</span>
  <span m='3113540'>simulate--</span> <span m='3114200'>we</span> <span m='3114320'>don't</span>
  <span m='3114470'>know</span> <span m='3114560'>how</span> <span m='3114710'>to</span>
  <span m='3114800'>simulate</span> <span m='3115220'>the</span> <span m='3115310'>query</span>
  <span m='3115610'>algorithm,</span> <span m='3116070'>because</span> <span m='3116480'>it's</span>
  <span m='3116630'>supposed</span> <span m='3116840'>to</span> <span m='3116930'>be,</span>
  <span m='3117020'>given</span> <span m='3117290'>the</span> <span m='3117410'>argument,</span>
  <span m='3118370'>which</span> <span m='3118640'>is</span> <span m='3119150'>what</span>
  <span m='3119300'>we're</span> <span m='3119420'>trying</span> <span m='3119660'>to</span>
  <span m='3119750'>figure</span> <span m='3120050'>out.</span> <span m='3121294'>So</span>
  <span m='3122240'>we</span> <span m='3122360'>can't</span> <span m='3122600'>simulate</span>
  <span m='3122960'>the</span> <span m='3123050'>query</span> <span m='3123320'>algorithm.</span>
  <span m='3126460'>It's</span> <span m='3126580'>kind</span> <span m='3126730'>of</span>
  <span m='3126790'>annoying,</span> <span m='3127570'>but</span> <span m='3128050'>otherwise</span>
  <span m='3128440'>the</span> <span m='3128500'>set</span> <span m='3128670'>up</span>
  <span m='3128830'>is</span> <span m='3128980'>roughly</span> <span m='3129250'>the</span>
  <span m='3129370'>same.</span> </p><p><span m='3130210'>The</span> <span m='3130360'>one</span>
  <span m='3130570'>thing</span> <span m='3130750'>we</span> <span m='3130840'>know</span>
  <span m='3131080'>is</span> <span m='3131200'>that</span> <span m='3131320'>the</span>
  <span m='3131410'>query</span> <span m='3131790'>is</span> <span m='3132120'>supposed</span>
  <span m='3132460'>to</span> <span m='3132580'>return</span> <span m='3132940'>yes,</span>
  <span m='3134320'>because</span> <span m='3134860'>if</span> <span m='3135040'>you</span>
  <span m='3135130'>look</span> <span m='3135400'>at</span> <span m='3136050'>this</span>
  <span m='3136240'>bad</span> <span m='3136510'>access</span> <span m='3136780'>sequence,</span>
  <span m='3137620'>it</span> <span m='3137770'>is</span> <span m='3137890'>designed</span>
  <span m='3138550'>to</span> <span m='3138700'>always</span> <span m='3139000'>return</span>
  <span m='3139330'>yes.</span> <span m='3140980'>So</span> <span m='3141160'>that</span>
  <span m='3141370'>is</span> <span m='3141550'>a</span> <span m='3141850'>thing</span>
  <span m='3142090'>we</span> <span m='3142180'>know,</span> <span m='3144090'>but</span>
  <span m='3144160'>we</span> <span m='3144280'>don't</span> <span m='3144490'>know</span>
  <span m='3144730'>the</span> <span m='3144850'>arguments</span> <span m='3145240'>to</span>
  <span m='3145300'>the</span> <span m='3145420'>updates</span> <span m='3145720'>on</span>
  <span m='3145810'>the</span> <span m='3145870'>left,</span> <span m='3146240'>we</span>
  <span m='3146340'>don't</span> <span m='3146380'>know</span> <span m='3146530'>arguments</span>
  <span m='3146980'>to the</span> <span m='3147070'>updates</span> <span m='3147400'>on</span>
  <span m='3147520'>the</span> <span m='3147610'>right.</span> <span m='3148240'>We'll</span>
  <span m='3148390'>assume</span> <span m='3148600'>we</span> <span m='3148690'>know</span>
  <span m='3148840'>everything</span> <span m='3149200'>else,</span> <span m='3149500'>basically,</span>
  <span m='3149890'>up</span> <span m='3150040'>to</span> <span m='3150160'>this</span>
  <span m='3150340'>time.</span> </p><p><span m='3151630'>Again,</span> <span m='3152020'>this</span>
  <span m='3152170'>is</span> <span m='3152320'>a</span> <span m='3152800'>probabilistic</span>
  <span m='3153460'>statement,</span> <span m='3153940'>that</span> <span m='3155260'>conditioned</span>
  <span m='3156220'>on</span> <span m='3156520'>the</span> <span m='3156640'>past,</span>
  <span m='3157170'>conditioned</span> <span m='3157690'>on</span> <span m='3157900'>the</span>
  <span m='3158020'>queries</span> <span m='3158410'>on</span> <span m='3158500'>the</span>
  <span m='3158560'>left,</span> <span m='3159080'>which</span> <span m='3159190'>probably</span>
  <span m='3159400'>don't</span> <span m='3159550'>matter,</span> <span m='3160210'>conditioned</span>
  <span m='3160630'>on</span> <span m='3160750'>the</span> <span m='3160900'>updates</span>
  <span m='3161320'>on</span> <span m='3161410'>the</span> <span m='3161500'>right,</span>
  <span m='3162460'>which</span> <span m='3162700'>do</span> <span m='3162910'>matter,</span>
  <span m='3163480'>but</span> <span m='3163690'>they're</span> <span m='3163810'>sort</span>
  <span m='3163960'>of</span> <span m='3164050'>irrelevant</span> <span m='3164650'>to</span>
  <span m='3164770'>this</span> <span m='3165010'>r</span> <span m='3165160'>intersect</span>
  <span m='3165520'>w</span> <span m='3165850'>issue.</span> <span m='3167140'>Conditioned</span>
  <span m='3167650'>on</span> <span m='3167800'>all</span> <span m='3167920'>those</span>
  <span m='3168100'>things</span> <span m='3168310'>will</span> <span m='3168400'>prove</span>
  <span m='3168670'>that</span> <span m='3168760'>the</span> <span m='3168820'>expected</span>
  <span m='3169450'>number</span> <span m='3169810'>of</span> <span m='3169900'>operations</span>
  <span m='3170530'>you</span> <span m='3170750'>need</span> <span m='3170900'>to--</span>
  <span m='3171400'>or</span> <span m='3171520'>expected</span> <span m='3172510'>encoding</span>
  <span m='3173080'>size,</span> <span m='3173950'>for</span> <span m='3174100'>this</span>
  <span m='3174340'>problem,</span> <span m='3175510'>is</span> <span m='3175690'>at</span>
  <span m='3175780'>least</span> <span m='3176110'>what</span> <span m='3176320'>it</span>
  <span m='3176380'>is,</span> <span m='3176570'>l</span> <span m='3176800'>root</span>
  <span m='3177000'>n</span> <span m='3177160'>log</span> <span m='3177350'>n</span>
  <span m='3177580'>bits.</span> <span m='3178750'>And</span> <span m='3179110'>from</span>
  <span m='3179320'>that</span> <span m='3180010'>lower</span> <span m='3180280'>bound,</span>
  <span m='3180670'>you</span> <span m='3180760'>can</span> <span m='3180880'>then</span>
  <span m='3181720'>take</span> <span m='3181990'>the</span> <span m='3182080'>sum</span>
  <span m='3182410'>over</span> <span m='3182650'>all</span> <span m='3182800'>possible</span>
  <span m='3183860'>setups,</span> <span m='3184440'>over</span> <span m='3184690'>all</span>
  <span m='3184840'>conditions.</span> <span m='3186640'>And</span> <span m='3186790'>that</span>
  <span m='3187270'>implies</span> <span m='3187750'>a</span> <span m='3187810'>lower</span>
  <span m='3187960'>bound</span> <span m='3188200'>on</span> <span m='3188320'>the</span>
  <span m='3188410'>overall</span> <span m='3189280'>setting</span> <span m='3189580'>without</span>
  <span m='3189850'>these</span> <span m='3190030'>assumptions.</span> <span m='3192088'>OK?</span>
  </p><p><span m='3193520'>So</span> <span m='3193720'>all</span> <span m='3193930'>I'm</span>
  <span m='3194020'>saying</span> <span m='3194350'>is</span> <span m='3195280'>in</span>
  <span m='3195550'>this</span> <span m='3195730'>set</span> <span m='3195920'>up,</span>
  <span m='3196630'>it</span> <span m='3196750'>still</span> <span m='3197020'>takes</span>
  <span m='3197290'>a</span> <span m='3197350'>lot</span> <span m='3197530'>of</span>
  <span m='3197590'>bits</span> <span m='3197800'>to</span> <span m='3197920'>encode</span>
  <span m='3198190'>these</span> <span m='3198370'>updates,</span> <span m='3199240'>because</span>
  <span m='3199750'>we</span> <span m='3199870'>don't</span> <span m='3200050'>have</span>
  <span m='3200200'>the</span> <span m='3200290'>queries</span> <span m='3200680'>which</span>
  <span m='3200860'>would</span> <span m='3201010'>tell</span> <span m='3201220'>us</span>
  <span m='3201340'>the</span> <span m='3201460'>answers.</span> <span m='3202690'>So</span>
  <span m='3202900'>we</span> <span m='3202990'>get</span> <span m='3203170'>a</span>
  <span m='3203200'>lower</span> <span m='3203440'>bound</span> <span m='3203680'>on</span>
  <span m='3203770'>encoding</span> <span m='3204160'>these</span> <span m='3204310'>updates,</span>
  <span m='3204670'>or a</span> <span m='3204930'>lower</span> <span m='3205090'>bound</span>
  <span m='3205190'>on</span> <span m='3205480'>encoding</span> <span m='3205780'>these</span>
  <span m='3205930'>queries,</span> <span m='3206290'>because</span> <span m='3206470'>we</span>
  <span m='3206600'>assume</span> <span m='3206830'>we</span> <span m='3206920'>don't</span>
  <span m='3207070'>know</span> <span m='3207250'>them.</span> <span m='3207970'>The</span>
  <span m='3208060'>rest</span> <span m='3208390'>of</span> <span m='3208510'>the--
  all</span> <span m='3208880'>the</span> <span m='3208990'>remaining</span> <span
  m='3209320'>operations</span> <span m='3209860'>don't</span> <span m='3210160'>tell</span>
  <span m='3210460'>us</span> <span m='3210700'>enough</span> <span m='3210970'>about</span>
  <span m='3211630'>this.</span> <span m='3214320'>OK.</span> </p><p><span m='3215720'>So</span>
  <span m='3215900'>how</span> <span m='3216320'>the</span> <span m='3216440'>heck</span>
  <span m='3216650'>are</span> <span m='3216710'>we</span> <span m='3216770'>going</span>
  <span m='3216860'>to</span> <span m='3216980'>do--</span> <span m='3217790'>prove</span>
  <span m='3217970'>a</span> <span m='3218000'>lower</span> <span m='3218240'>bound</span>
  <span m='3218450'>in</span> <span m='3218600'>this</span> <span m='3218780'>setting,</span>
  <span m='3220070'>when</span> <span m='3220250'>we</span> <span m='3220370'>can't</span>
  <span m='3220730'>simulate</span> <span m='3221690'>the</span> <span m='3221780'>query</span>
  <span m='3222110'>algorithm?</span> <span m='3223680'>There's</span> <span m='3223730'>one</span>
  <span m='3223970'>cool</span> <span m='3224240'>idea</span> <span m='3224570'>to</span>
  <span m='3224660'>make</span> <span m='3224840'>this</span> <span m='3224990'>work.</span>
  <span m='3230640'>You</span> <span m='3230730'>may</span> <span m='3230880'>recall</span>
  <span m='3231210'>our</span> <span m='3231330'>last</span> <span m='3232560'>cell</span>
  <span m='3232830'>probe</span> <span m='3233130'>lower</span> <span m='3233250'>bound</span>
  <span m='3235050'>for</span> <span m='3235170'>the</span> <span m='3235260'>predecessor</span>
  <span m='3235890'>problem.</span> <span m='3240570'>Use</span> <span m='3240830'>this</span>
  <span m='3240980'>idea</span> <span m='3241190'>of</span> <span m='3241280'>round</span>
  <span m='3241700'>elimination.</span> <span m='3243150'>The</span> <span m='3243520'>idea</span>
  <span m='3243740'>with</span> <span m='3243890'>round</span> <span m='3244100'>elimination</span>
  <span m='3244640'>was--</span> <span m='3246190'>Alice</span> <span m='3246640'>is</span>
  <span m='3246740'>sending</span> <span m='3247070'>a</span> <span m='3247100'>message,</span>
  <span m='3247910'>Bob</span> <span m='3248210'>was</span> <span m='3248300'>sending
  a</span> <span m='3248580'>response.</span> <span m='3249470'>But</span> <span m='3249600'>that</span>
  <span m='3249740'>first</span> <span m='3250160'>m--</span> <span m='3250400'>we</span>
  <span m='3250550'>set</span> <span m='3250790'>things</span> <span m='3251120'>up,</span>
  <span m='3251300'>we</span> <span m='3251390'>set</span> <span m='3251560'>up</span>
  <span m='3251660'>the</span> <span m='3251750'>problem</span> <span m='3252060'>so</span>
  <span m='3252200'>the</span> <span m='3252350'>first</span> <span m='3252650'>message</span>
  <span m='3252980'>sent</span> <span m='3253190'>by</span> <span m='3253340'>Alice</span>
  <span m='3254240'>had,</span> <span m='3255120'>on</span> <span m='3255290'>average,</span>
  <span m='3255950'>less</span> <span m='3256280'>than</span> <span m='3256460'>1-bit</span>
  <span m='3256790'>of</span> <span m='3256910'>information</span> <span m='3257450'>to</span>
  <span m='3257540'>Bob,</span> <span m='3258350'>or</span> <span m='3258440'>very</span>
  <span m='3258680'>little</span> <span m='3258920'>information</span> <span m='3259400'>to</span>
  <span m='3259460'>Bob.</span> <span m='3260120'>And</span> <span m='3260240'>so</span>
  <span m='3261080'>what</span> <span m='3261290'>Bob</span> <span m='3261590'>could</span>
  <span m='3261770'>do</span> <span m='3261920'>is</span> <span m='3262040'>basically</span>
  <span m='3262640'>guess</span> <span m='3263120'>what</span> <span m='3263300'>that</span>
  <span m='3263450'>message</span> <span m='3263840'>was.</span> <span m='3264800'>And</span>
  <span m='3264980'>that</span> <span m='3265100'>would</span> <span m='3265220'>be</span>
  <span m='3265400'>accurate</span> <span m='3265700'>with</span> <span m='3265790'>some</span>
  <span m='3265970'>probability.</span> </p><p><span m='3267470'>Now</span> <span
  m='3267800'>here,</span> <span m='3268160'>we're</span> <span m='3268310'>not</span>
  <span m='3268520'>quite</span> <span m='3268700'>allowed</span> <span m='3268910'>to</span>
  <span m='3269000'>do</span> <span m='3269120'>that,</span> <span m='3269270'>we're</span>
  <span m='3269360'>not</span> <span m='3269510'>allowed</span> <span m='3269720'>to</span>
  <span m='3269780'>change</span> <span m='3270050'>the</span> <span m='3270170'>accuracy</span>
  <span m='3270770'>of</span> <span m='3270860'>our</span> <span m='3270950'>results,</span>
  <span m='3271250'>because</span> <span m='3271550'>of</span> <span m='3271770'>our</span>
  <span m='3271970'>particular</span> <span m='3272450'>setting.</span> <span m='3273860'>So</span>
  <span m='3274070'>we</span> <span m='3274130'>can't</span> <span m='3274340'>afford</span>
  <span m='3274610'>to</span> <span m='3274700'>just</span> <span m='3275480'>guess</span>
  <span m='3275990'>by</span> <span m='3276800'>flipping</span> <span m='3277310'>coins</span>
  <span m='3278600'>what</span> <span m='3278810'>we</span> <span m='3278990'>were</span>
  <span m='3279110'>supposed</span> <span m='3279500'>to</span> <span m='3279620'>know.</span>
  <span m='3281510'>What</span> <span m='3281720'>we're</span> <span m='3281870'>supposed</span>
  <span m='3282140'>to</span> <span m='3282260'>know</span> <span m='3282440'>here</span>
  <span m='3282700'>is--</span> <span m='3283340'>we're</span> <span m='3283460'>trying</span>
  <span m='3283640'>to</span> <span m='3283730'>simulate</span> <span m='3284090'>a</span>
  <span m='3284150'>query</span> <span m='3284450'>operation,</span> <span m='3285560'>and</span>
  <span m='3285680'>so</span> <span m='3285860'>we</span> <span m='3285950'>need</span>
  <span m='3286070'>to</span> <span m='3286160'>know</span> <span m='3286310'>the</span>
  <span m='3286460'>argument,</span> <span m='3286970'>that</span> <span m='3287240'>whole</span>
  <span m='3287450'>permutation</span> <span m='3288230'>to</span> <span m='3288350'>the</span>
  <span m='3288440'>queries.</span> </p><p><span m='3288760'>It's</span> <span m='3288800'>hard</span>
  <span m='3288920'>to</span> <span m='3289010'>run</span> <span m='3289220'>it</span>
  <span m='3289280'>without</span> <span m='3289550'>that</span> <span m='3289670'>permutation.</span>
  <span m='3290950'>So</span> <span m='3291050'>instead</span> <span m='3291170'>of</span>
  <span m='3291260'>guessing</span> <span m='3291950'>by</span> <span m='3292220'>flipping</span>
  <span m='3292520'>coins,</span> <span m='3292880'>we're</span> <span m='3293000'>going</span>
  <span m='3293140'>to</span> <span m='3293210'>guess</span> <span m='3293780'>in</span>
  <span m='3293990'>the</span> <span m='3294110'>dynamic</span> <span m='3294470'>programming</span>
  <span m='3294920'>sense,</span> <span m='3295250'>which</span> <span m='3295460'>is</span>
  <span m='3295700'>we're</span> <span m='3296090'>going</span> <span m='3296210'>to</span>
  <span m='3296270'>try</span> <span m='3296480'>all</span> <span m='3296630'>the</span>
  <span m='3296720'>possibilities.</span> <span m='3298310'>Run</span> <span m='3299420'>the</span>
  <span m='3299550'>simulation</span> <span m='3301100'>over</span> <span m='3301400'>all</span>
  <span m='3301640'>possible</span> <span m='3302210'>queries,</span> <span m='3302990'>all</span>
  <span m='3303230'>possible</span> <span m='3303800'>second</span> <span m='3304160'>arguments</span>
  <span m='3304550'>to</span> <span m='3304670'>the</span> <span m='3304790'>query.</span>
  <span m='3305660'>We</span> <span m='3305750'>don't</span> <span m='3305900'>know</span>
  <span m='3305960'>what</span> <span m='3306060'>the</span> <span m='3306120'>presentation</span>
  <span m='3306650'>is,</span> <span m='3306920'>so just</span> <span m='3307040'>try</span>
  <span m='3307250'>them</span> <span m='3307400'>all.</span> <span m='3308480'>Cool</span>
  <span m='3308750'>thing</span> <span m='3308990'>is,</span> <span m='3310460'>only</span>
  <span m='3310880'>one</span> <span m='3311840'>argument</span> <span m='3312260'>here</span>
  <span m='3312770'>should</span> <span m='3312980'>return</span> <span m='3313340'>yes.</span>
  <span m='3314180'>That's</span> <span m='3314430'>the</span> <span m='3314520'>one</span>
  <span m='3314660'>we're</span> <span m='3314750'>looking</span> <span m='3315050'>for.</span>
  <span m='3316710'>So</span> <span m='3316730'>if</span> <span m='3316790'>you</span>
  <span m='3316880'>try</span> <span m='3317090'>them</span> <span m='3317240'>all,</span>
  <span m='3317540'>find</span> <span m='3317930'>which</span> <span m='3318140'>one</span>
  <span m='3318440'>says</span> <span m='3318740'>yes,</span> <span m='3319530'>we'll</span>
  <span m='3319760'>be</span> <span m='3319850'>done.</span> </p><p><span m='3321844'>So</span>
  <span m='3322290'>this</span> <span m='3322430'>is</span> <span m='3323840'>called</span>
  <span m='3324350'>the</span> <span m='3324680'>decoding</span> <span m='3325220'>idea.</span>
  <span m='3331460'>Simulate</span> <span m='3336120'>verify</span> <span m='3336580'>sum</span>
  <span m='3340080'>of</span> <span m='3340580'>i</span> <span m='3340890'>comma</span>
  <span m='3341480'>pi,</span> <span m='3342960'>for</span> <span m='3343230'>all</span>
  <span m='3343530'>pi.</span> <span m='3345240'>And</span> <span m='3345630'>take</span>
  <span m='3345870'>the</span> <span m='3345990'>one</span> <span m='3346170'>that</span>
  <span m='3346260'>returns</span> <span m='3346680'>yes,</span> <span m='3347100'>that</span>
  <span m='3347370'>is</span> <span m='3348020'>our</span> <span m='3348150'>permutation.</span>
  <span m='3348870'>And</span> <span m='3348960'>so</span> <span m='3349200'>if</span>
  <span m='3349290'>we</span> <span m='3349380'>figure</span> <span m='3349620'>out</span>
  <span m='3349740'>what</span> <span m='3349860'>those</span> <span m='3350160'>query</span>
  <span m='3350370'>permutations</span> <span m='3350970'>are,</span> <span m='3351210'>then</span>
  <span m='3351360'>we</span> <span m='3351450'>figure</span> <span m='3351660'>out</span>
  <span m='3351720'>what</span> <span m='3351840'>the</span> <span m='3351900'>update</span>
  <span m='3352110'>permutations</span> <span m='3352710'>are,</span> <span m='3352950'>and
  we</span> <span m='3353010'>get</span> <span m='3353160'>our</span> <span m='3353250'>lower</span>
  <span m='3353460'>bounds</span> <span m='3354870'>just</span> <span m='3355050'>like</span>
  <span m='3355230'>before.</span> </p><p><span m='3357360'>OK.</span> <span m='3359940'>This</span>
  <span m='3360150'>is</span> <span m='3360300'>easier</span> <span m='3360630'>said</span>
  <span m='3360840'>than</span> <span m='3361020'>done,</span> <span m='3361280'>unfortunately.</span>
  <span m='3362940'>We'd</span> <span m='3363120'>like</span> <span m='3363330'>to</span>
  <span m='3363450'>run</span> <span m='3363600'>the</span> <span m='3363690'>simulation</span>
  <span m='3364980'>just</span> <span m='3365580'>like</span> <span m='3367290'>here,</span>
  <span m='3368160'>so</span> <span m='3368490'>simulate</span> <span m='3368930'>inquiry</span>
  <span m='3369330'>algorithm.</span> <span m='3369570'>They</span> <span m='3369690'>said,</span>
  <span m='3369900'>OK,</span> <span m='3370920'>still</span> <span m='3371250'>the</span>
  <span m='3371370'>case,</span> <span m='3371700'>that</span> <span m='3371820'>if</span>
  <span m='3371940'>you're</span> <span m='3372030'>reading</span> <span m='3372260'>a</span>
  <span m='3372300'>cell</span> <span m='3372410'>that's</span> <span m='3372630'>either</span>
  <span m='3372870'>in</span> <span m='3372960'>the</span> <span m='3373050'>left</span>
  <span m='3373230'>subtree,</span> <span m='3373710'>in</span> <span m='3373830'>the</span>
  <span m='3373920'>right</span> <span m='3374070'>subtree,</span> <span m='3374520'>or</span>
  <span m='3374610'>in</span> <span m='3374730'>the</span> <span m='3374820'>past.</span>
  <span m='3376800'>And</span> <span m='3377040'>we</span> <span m='3377130'>said</span>
  <span m='3377340'>this</span> <span m='3377550'>was</span> <span m='3377670'>easy,</span>
  <span m='3378390'>this</span> <span m='3378570'>was</span> <span m='3378720'>known.</span>
  <span m='3379680'>And</span> <span m='3379950'>the</span> <span m='3380040'>hard</span>
  <span m='3380310'>part</span> <span m='3380880'>is</span> <span m='3382140'>this</span>
  <span m='3382350'>case,</span> <span m='3383310'>because</span> <span m='3384990'>if</span>
  <span m='3385170'>we're</span> <span m='3385260'>running</span> <span m='3385620'>this</span>
  <span m='3385830'>query,</span> <span m='3387480'>and</span> <span m='3387630'>it</span>
  <span m='3387720'>reads</span> <span m='3387930'>something</span> <span m='3388320'>that</span>
  <span m='3388410'>was</span> <span m='3388530'>written</span> <span m='3388770'>in</span>
  <span m='3388830'>the</span> <span m='3388890'>left</span> <span m='3389100'>subtree,</span>
  <span m='3390090'>it</span> <span m='3390240'>may</span> <span m='3390480'>not</span>
  <span m='3390720'>be</span> <span m='3391050'>in</span> <span m='3391230'>r</span>
  <span m='3391410'>intersect</span> <span m='3391860'>w.</span> <span m='3393600'>Why</span>
  <span m='3393930'>is</span> <span m='3394050'>that?</span> <span m='3395910'>Little</span>
  <span m='3396120'>puzzle</span> <span m='3396450'>for</span> <span m='3396630'>you.</span>
  <span m='3399810'>So</span> <span m='3399950'>we're</span> <span m='3400000'>running</span>
  <span m='3400330'>one</span> <span m='3400450'>of</span> <span m='3400510'>these</span>
  <span m='3400660'>queries</span> <span m='3401020'>for</span> <span m='3401140'>sum</span>
  <span m='3401350'>pi.</span> <span m='3402670'>And</span> <span m='3403720'>I</span>
  <span m='3403780'>claim</span> <span m='3404020'>that</span> <span m='3404110'>when</span>
  <span m='3404200'>we</span> <span m='3404290'>read</span> <span m='3404500'>something
  in</span> <span m='3404870'>the</span> <span m='3404920'>left</span> <span m='3405100'>subtree,</span>
  <span m='3405430'>we</span> <span m='3405550'>don't</span> <span m='3405730'>know</span>
  <span m='3406780'>if</span> <span m='3406900'>it's</span> <span m='3407050'>in</span>
  <span m='3407140'>r</span> <span m='3407320'>intersect</span> <span m='3407660'>w,</span>
  <span m='3408365'>it</span> <span m='3408630'>might</span> <span m='3408800'>not</span>
  <span m='3408930'>be.</span> </p><p></p><p><span m='3419754'>Let's</span> <span
  m='3420250'>see if</span> <span m='3420490'>we're on</span> <span m='3420760'>the</span>
  <span m='3420820'>same</span> <span m='3421060'>page.</span> <span m='3421360'>So</span>
  <span m='3421690'>r</span> <span m='3424240'>is</span> <span m='3424640'>the</span>
  <span m='3424720'>set</span> <span m='3424960'>of</span> <span m='3425050'>cells</span>
  <span m='3425590'>read</span> <span m='3426130'>during</span> <span m='3426520'>the</span>
  <span m='3426640'>right</span> <span m='3426910'>subtree</span> <span m='3427640'>when</span>
  <span m='3428020'>executing</span> <span m='3429310'>these</span> <span m='3429640'>operations.</span>
  <span m='3431880'>OK?</span> <span m='3432240'>But</span> <span m='3433510'>what</span>
  <span m='3433750'>we're</span> <span m='3433870'>doing</span> <span m='3434110'>now</span>
  <span m='3434360'>is</span> <span m='3434450'>simulating</span> <span m='3435010'>some</span>
  <span m='3435250'>executions</span> <span m='3436180'>that</span> <span m='3437050'>didn't</span>
  <span m='3437260'>necessarily</span> <span m='3438010'>happen.</span> <span m='3439210'>We're</span>
  <span m='3439300'>doing a</span> <span m='3439510'>verify</span> <span m='3439870'>sum</span>
  <span m='3440110'>of</span> <span m='3440180'>i</span> <span m='3440230'>comma</span>
  <span m='3440680'>pi,</span> <span m='3441400'>but</span> <span m='3442060'>in</span>
  <span m='3442150'>the</span> <span m='3442240'>bad</span> <span m='3442450'>access</span>
  <span m='3442720'>sequence,</span> <span m='3443140'>we</span> <span m='3443260'>did</span>
  <span m='3443410'>verify</span> <span m='3443740'>sum</span> <span m='3443980'>of</span>
  <span m='3444060'>i</span> <span m='3444100'>comma</span> <span m='3444550'>something</span>
  <span m='3444910'>specific,</span> <span m='3445900'>not</span> <span m='3446080'>any</span>
  <span m='3446260'>pi,</span> <span m='3446560'>but</span> <span m='3446800'>the</span>
  <span m='3446920'>correct</span> <span m='3447370'>pi.</span> <span m='3448150'>So</span>
  <span m='3448300'>we</span> <span m='3448420'>only</span> <span m='3448720'>ran</span>
  <span m='3449050'>the</span> <span m='3449200'>yes</span> <span m='3450040'>verify</span>
  <span m='3450490'>sums,</span> <span m='3451420'>and</span> <span m='3451570'>that's</span>
  <span m='3451900'>what</span> <span m='3452080'>r</span> <span m='3452290'>is</span>
  <span m='3452450'>defined</span> <span m='3452950'>with</span> <span m='3453100'>respect</span>
  <span m='3453430'>to.</span> <span m='3453920'>r is the</span> <span m='3454330'>set</span>
  <span m='3454540'>of</span> <span m='3454600'>things</span> <span m='3454880'>that</span>
  <span m='3454940'>get</span> <span m='3455110'>read</span> <span m='3455410'>during</span>
  <span m='3455710'>these</span> <span m='3455950'>operations,</span> <span m='3457090'>where</span>
  <span m='3457180'>the</span> <span m='3457270'>verify</span> <span m='3457660'>sum
  is</span> <span m='3457840'>always</span> <span m='3458050'>output</span> <span
  m='3458320'>yes.</span> </p><p><span m='3458590'>If</span> <span m='3458710'>you</span>
  <span m='3458830'>now</span> <span m='3459310'>run</span> <span m='3459580'>a</span>
  <span m='3459640'>verify</span> <span m='3460000'>sum</span> <span m='3460720'>where</span>
  <span m='3460810'>the</span> <span m='3460900'>answer</span> <span m='3461140'>is</span>
  <span m='3461230'>no,</span> <span m='3462070'>it</span> <span m='3462220'>may</span>
  <span m='3462460'>read</span> <span m='3462730'>stuff</span> <span m='3463240'>that</span>
  <span m='3463420'>the</span> <span m='3463570'>other</span> <span m='3463750'>verify</span>
  <span m='3464110'>sum</span> <span m='3464320'>didn't</span> <span m='3464560'>read</span>
  <span m='3465220'>maybe.</span> <span m='3466390'>Shouldn't</span> <span m='3466750'>matter,</span>
  <span m='3467200'>but</span> <span m='3468250'>it's</span> <span m='3468460'>awkward,</span>
  <span m='3468820'>because</span> <span m='3469180'>now</span> <span m='3469390'>it's</span>
  <span m='3469480'>not</span> <span m='3469660'>just</span> <span m='3469870'>r</span>
  <span m='3470020'>intersect</span> <span m='3470410'>w</span> <span m='3470740'>we</span>
  <span m='3470800'>need</span> <span m='3470950'>to</span> <span m='3471070'>encode.</span>
  <span m='3471890'>We</span> <span m='3472130'>need</span> <span m='3472230'>to</span>
  <span m='3472390'>encode</span> <span m='3473830'>some</span> <span m='3474010'>more</span>
  <span m='3474250'>stuff.</span> <span m='3475630'>It's</span> <span m='3475720'>basically</span>
  <span m='3476140'>a</span> <span m='3476230'>new</span> <span m='3476670'>r</span>
  <span m='3476920'>prime</span> <span m='3477610'>that</span> <span m='3477760'>may</span>
  <span m='3477970'>happen</span> <span m='3478390'>during</span> <span m='3478750'>these</span>
  <span m='3479140'>reads,</span> <span m='3480190'>and</span> <span m='3480400'>we</span>
  <span m='3480910'>just</span> <span m='3481180'>can't</span> <span m='3481420'>afford</span>
  <span m='3481720'>to</span> <span m='3481870'>encode</span> <span m='3482260'>that</span>
  <span m='3482530'>r</span> <span m='3482650'>prime,</span> <span m='3482950'>because</span>
  <span m='3483130'>it's</span> <span m='3483250'>not</span> <span m='3483460'>the</span>
  <span m='3483550'>thing</span> <span m='3483730'>we</span> <span m='3483820'>care</span>
  <span m='3484030'>about.</span> <span m='3484380'>We</span> <span m='3484420'>care</span>
  <span m='3484600'>about</span> <span m='3485290'>what</span> <span m='3485410'>happens</span>
  <span m='3485740'>in</span> <span m='3485800'>the</span> <span m='3485890'>actual</span>
  <span m='3486250'>access</span> <span m='3486490'>sequence,</span> <span m='3486880'>not</span>
  <span m='3487210'>in</span> <span m='3487350'>this</span> <span m='3487810'>arbitrary</span>
  <span m='3488200'>simulation.</span> </p><p><span m='3490130'>So</span> <span m='3491730'>this</span>
  <span m='3491780'>is</span> <span m='3493010'>the</span> <span m='3493150'>annoying</span>
  <span m='3493450'>thing.</span> <span m='3495530'>Trouble.</span> <span m='3501700'>If</span>
  <span m='3501880'>you</span> <span m='3502000'>look</span> <span m='3502270'>at</span>
  <span m='3502750'>an</span> <span m='3502900'>incorrect</span> <span m='3503500'>query,</span>
  <span m='3505390'>meaning</span> <span m='3506100'>the</span> <span m='3506320'>wrong</span>
  <span m='3506710'>pi,</span> <span m='3508780'>this</span> <span m='3509310'>is</span>
  <span m='3509410'>like</span> <span m='3509560'>a</span> <span m='3509650'>no</span>
  <span m='3510020'>query,</span> <span m='3511420'>the</span> <span m='3511660'>output's</span>
  <span m='3512020'>no.</span> <span m='3513930'>Reads</span> <span m='3514800'>some</span>
  <span m='3515170'>different</span> <span m='3515470'>set</span> <span m='3515680'>of</span>
  <span m='3515740'>cells,</span> <span m='3518590'>r</span> <span m='3519040'>prime,</span>
  <span m='3520440'>which isn't</span> <span m='3520660'>the</span> <span m='3520780'>same</span>
  <span m='3521050'>thing</span> <span m='3521260'>as</span> <span m='3521370'>r.</span>
  <span m='3522770'>And</span> <span m='3523120'>so</span> <span m='3523390'>if--</span>
  <span m='3527020'>we</span> <span m='3527170'>have</span> <span m='3527320'>some</span>
  <span m='3527500'>good</span> <span m='3527650'>news,</span> <span m='3529220'>which</span>
  <span m='3529300'>is</span> <span m='3529480'>if</span> <span m='3529690'>we</span>
  <span m='3529780'>can</span> <span m='3529930'>somehow</span> <span m='3530260'>detect</span>
  <span m='3530860'>that</span> <span m='3530970'>this</span> <span m='3531130'>happened,</span>
  <span m='3532150'>that</span> <span m='3532300'>we</span> <span m='3532450'>read</span>
  <span m='3532750'>something</span> <span m='3534070'>that</span> <span m='3534250'>is</span>
  <span m='3534370'>in</span> <span m='3534520'>r</span> <span m='3534700'>prime,</span>
  <span m='3535000'>but</span> <span m='3535120'>not</span> <span m='3535390'>r,</span>
  <span m='3538270'>then</span> <span m='3539470'>the</span> <span m='3539620'>answer</span>
  <span m='3539980'>must</span> <span m='3540370'>be</span> <span m='3540550'>no.</span>
  </p><p><span m='3545950'>So</span> <span m='3546100'>that's</span> <span m='3546370'>our</span>
  <span m='3547870'>saving</span> <span m='3548380'>hope,</span> <span m='3549370'>is</span>
  <span m='3549580'>that</span> <span m='3550120'>either</span> <span m='3551260'>we're</span>
  <span m='3551440'>reading</span> <span m='3551680'>something</span> <span m='3551980'>at</span>
  <span m='3552070'>r</span> <span m='3552140'>intersect</span> <span m='3552540'>w,</span>
  <span m='3552700'>in which</span> <span m='3552850'>case</span> <span m='3553060'>it's</span>
  <span m='3553150'>been</span> <span m='3553300'>written</span> <span m='3553510'>down,</span>
  <span m='3553820'>we</span> <span m='3553930'>know</span> <span m='3554130'>how</span>
  <span m='3554230'>to</span> <span m='3554320'>do</span> <span m='3554560'>it.</span>
  <span m='3555460'>What's</span> <span m='3555730'>not</span> <span m='3556180'>written</span>
  <span m='3556510'>there,</span> <span m='3558950'>and</span> <span m='3559030'>if</span>
  <span m='3559150'>it's</span> <span m='3559300'>not</span> <span m='3559660'>written</span>
  <span m='3559960'>there,</span> <span m='3560230'>then</span> <span m='3560440'>it</span>
  <span m='3560530'>should</span> <span m='3560860'>be,</span> <span m='3562200'>hopefully,</span>
  <span m='3562750'>in</span> <span m='3562900'>r</span> <span m='3563050'>prime</span>
  <span m='3563320'>minus</span> <span m='3563610'>r.</span> <span m='3563950'>So</span>
  <span m='3564100'>the</span> <span m='3564250'>answer</span> <span m='3564580'>should</span>
  <span m='3564910'>be</span> <span m='3565390'>no.</span> <span m='3567320'>Maybe.</span>
  </p><p><span m='3569620'>Slight</span> <span m='3569950'>problem,</span> <span m='3570225'>though,</span>
  <span m='3570500'>because</span> <span m='3571150'>we</span> <span m='3571330'>used</span>
  <span m='3571600'>r</span> <span m='3571690'>intersect</span> <span m='3572080'>w</span>
  <span m='3572410'>to</span> <span m='3572530'>detect</span> <span m='3572980'>what</span>
  <span m='3573160'>case</span> <span m='3573490'>we</span> <span m='3573640'>were</span>
  <span m='3573760'>in.</span> <span m='3574780'>If</span> <span m='3574960'>we</span>
  <span m='3575050'>were</span> <span m='3575170'>in</span> <span m='3575320'>r</span>
  <span m='3575630'>intersect</span> <span m='3576070'>w,</span> <span m='3576530'>then</span>
  <span m='3576610'>we</span> <span m='3576730'>knew</span> <span m='3576970'>we</span>
  <span m='3577090'>should</span> <span m='3577540'>read</span> <span m='3577780'>from</span>
  <span m='3578020'>those</span> <span m='3578440'>encoded</span> <span m='3578830'>cells.</span>
  <span m='3580160'>If</span> <span m='3580270'>we</span> <span m='3580420'>weren't,</span>
  <span m='3581920'>we</span> <span m='3582130'>were</span> <span m='3582250'>either</span>
  <span m='3582490'>in</span> <span m='3582580'>the</span> <span m='3582670'>past</span>
  <span m='3583210'>or</span> <span m='3583450'>in</span> <span m='3583540'>the</span>
  <span m='3583630'>right</span> <span m='3583810'>subtree,</span> <span m='3584200'>these</span>
  <span m='3584440'>things</span> <span m='3584860'>were</span> <span m='3585040'>easy</span>
  <span m='3585250'>to</span> <span m='3585400'>detect,</span> <span m='3585850'>because</span>
  <span m='3586030'>they</span> <span m='3586150'>got</span> <span m='3586330'>written</span>
  <span m='3587290'>during</span> <span m='3587520'>the</span> <span m='3587580'>simulation.</span>
  <span m='3588850'>But</span> <span m='3588940'>we</span> <span m='3589060'>need</span>
  <span m='3589210'>to</span> <span m='3589300'>distinguish</span> <span m='3589810'>between--</span>
  <span m='3590580'>did</span> <span m='3590830'>we</span> <span m='3591220'>read</span>
  <span m='3591490'>something</span> <span m='3591850'>that</span> <span m='3591940'>was</span>
  <span m='3592060'>in</span> <span m='3592120'>the</span> <span m='3592180'>left</span>
  <span m='3592360'>subtree,</span> <span m='3592780'>or</span> <span m='3592900'>did</span>
  <span m='3593050'>we</span> <span m='3593170'>read</span> <span m='3593350'>something</span>
  <span m='3593710'>that</span> <span m='3593830'>was</span> <span m='3594010'>known?</span>
  <span m='3596710'>This</span> <span m='3596920'>is</span> <span m='3596980'>a</span>
  <span m='3597010'>little</span> <span m='3597190'>tricky,</span> <span m='3597580'>because</span>
  <span m='3597760'>this</span> <span m='3597940'>gets</span> <span m='3598150'>at</span>
  <span m='3598270'>exactly</span> <span m='3598720'>the</span> <span m='3598840'>issue.</span>
  <span m='3599440'>Left</span> <span m='3599650'>subtree</span> <span m='3599980'>might</span>
  <span m='3600190'>write</span> <span m='3600460'>some</span> <span m='3600640'>stuff</span>
  <span m='3601000'>that</span> <span m='3601390'>didn't</span> <span m='3601690'>get</span>
  <span m='3602290'>read</span> <span m='3602680'>by</span> <span m='3602860'>verify</span>
  <span m='3603280'>sum.</span> <span m='3604330'>So</span> <span m='3604450'>now</span>
  <span m='3604630'>you</span> <span m='3604750'>go</span> <span m='3604900'>to</span>
  <span m='3604990'>read</span> <span m='3605230'>it,</span> <span m='3606010'>you</span>
  <span m='3606130'>need</span> <span m='3606310'>to</span> <span m='3606430'>know,</span>
  <span m='3607790'>am</span> <span m='3607870'>I</span> <span m='3607990'>reading</span>
  <span m='3608440'>something</span> <span m='3608860'>that</span> <span m='3608980'>was</span>
  <span m='3609400'>not</span> <span m='3609970'>in</span> <span m='3610300'>r</span>
  <span m='3610480'>intersect</span> <span m='3610940'>w?</span> <span m='3612610'>And</span>
  <span m='3612760'>therefore--</span> <span m='3615450'>Yeah.</span> </p><p><span
  m='3618130'>Basically</span> <span m='3618430'>the</span> <span m='3618550'>issue</span>
  <span m='3618760'>is,</span> <span m='3619030'>is</span> <span m='3619300'>it</span>
  <span m='3619390'>in</span> <span m='3619580'>w?</span> <span m='3621270'>If</span>
  <span m='3621430'>it's</span> <span m='3621660'>in w,</span> <span m='3622150'>but</span>
  <span m='3622270'>not</span> <span m='3622510'>in</span> <span m='3622600'>r</span>
  <span m='3622750'>intersect</span> <span m='3623110'>w,</span> <span m='3623480'>then</span>
  <span m='3623560'>I</span> <span m='3623650'>know</span> <span m='3623800'>the</span>
  <span m='3623920'>answer</span> <span m='3624190'>is</span> <span m='3624310'>no,</span>
  <span m='3624520'>and I</span> <span m='3624640'>should</span> <span m='3624790'>stop.</span>
  <span m='3626320'>If</span> <span m='3626500'>it's</span> <span m='3626650'>not</span>
  <span m='3627100'>in</span> <span m='3627400'>w</span> <span m='3627880'>though,</span>
  <span m='3628300'>that</span> <span m='3628510'>means</span> <span m='3628720'>it</span>
  <span m='3628840'>was</span> <span m='3629050'>in</span> <span m='3629200'>the</span>
  <span m='3629320'>known</span> <span m='3629620'>past,</span> <span m='3630450'>and</span>
  <span m='3630580'>then</span> <span m='3630700'>I</span> <span m='3630760'>should</span>
  <span m='3630940'>continue.</span> <span m='3632500'>How</span> <span m='3632640'>do</span>
  <span m='3632800'>I</span> <span m='3632890'>know</span> <span m='3633250'>if</span>
  <span m='3633370'>I</span> <span m='3633550'>should</span> <span m='3633700'>stop</span>
  <span m='3634030'>or</span> <span m='3634120'>continue?</span> <span m='3635320'>So</span>
  <span m='3637300'>this</span> <span m='3637540'>is</span> <span m='3637750'>the</span>
  <span m='3638680'>tricky</span> <span m='3638950'>part.</span> </p><p><span m='3641030'>We</span>
  <span m='3641080'>can't</span> <span m='3641380'>tell</span> <span m='3645700'>whether</span>
  <span m='3646600'>there's</span> <span m='3646830'>the</span> <span m='3647020'>weird</span>
  <span m='3647500'>notation.</span> <span m='3649730'>We</span> <span m='3649830'>want</span>
  <span m='3649870'>to</span> <span m='3649930'>know</span> <span m='3650080'>whether</span>
  <span m='3650320'>r</span> <span m='3650590'>is</span> <span m='3650740'>in</span>
  <span m='3651040'>w</span> <span m='3651580'>minus</span> <span m='3652120'>r</span>
  <span m='3653710'>or</span> <span m='3655360'>past</span> <span m='3656680'>minus</span>
  <span m='3657870'>r</span> <span m='3658240'>intersect</span> <span m='3658575'>w.</span>
  <span m='3660400'>OK,</span> <span m='3660660'>we</span> <span m='3661600'>can</span>
  <span m='3661750'>tell</span> <span m='3661960'>whether</span> <span m='3662140'>it's</span>
  <span m='3662290'>in</span> <span m='3662370'>r</span> <span m='3662520'>intersect</span>
  <span m='3662860'>w,</span> <span m='3663100'>if</span> <span m='3663220'>it</span>
  <span m='3663310'>is,</span> <span m='3663460'>we're</span> <span m='3663610'>happy.</span>
  <span m='3663910'>If</span> <span m='3664030'>it's</span> <span m='3664150'>not</span>
  <span m='3664450'>in</span> <span m='3664570'>r</span> <span m='3664660'>intersect</span>
  <span m='3665070'>w,</span> <span m='3665800'>it</span> <span m='3665890'>could</span>
  <span m='3666100'>be</span> <span m='3666340'>that's</span> <span m='3666550'>because</span>
  <span m='3666880'>it</span> <span m='3666970'>was</span> <span m='3667090'>just</span>
  <span m='3667300'>in</span> <span m='3667600'>some</span> <span m='3667840'>past</span>
  <span m='3668200'>thing</span> <span m='3668380'>we</span> <span m='3668490'>were</span>
  <span m='3668560'>reading,</span> <span m='3670100'>that</span> <span m='3670300'>didn't</span>
  <span m='3670480'>get</span> <span m='3670660'>read</span> <span m='3671410'>otherwise.</span>
  <span m='3672340'>Or</span> <span m='3672580'>it</span> <span m='3672640'>could</span>
  <span m='3672820'>be</span> <span m='3673800'>we're</span> <span m='3673960'>reading</span>
  <span m='3674260'>something</span> <span m='3674590'>that</span> <span m='3674740'>was</span>
  <span m='3674920'>written</span> <span m='3675190'>in</span> <span m='3675310'>the</span>
  <span m='3675400'>left</span> <span m='3675610'>subtree,</span> <span m='3676720'>but</span>
  <span m='3676930'>not</span> <span m='3677260'>read</span> <span m='3677530'>in</span>
  <span m='3677650'>the</span> <span m='3677740'>right</span> <span m='3677950'>subtree.</span>
  </p><p><span m='3678770'>So</span> <span m='3678790'>in</span> <span m='3678910'>this</span>
  <span m='3679120'>case,</span> <span m='3679520'>we</span> <span m='3679570'>want</span>
  <span m='3679780'>to</span> <span m='3679900'>abort.</span> <span m='3681850'>And</span>
  <span m='3682060'>in</span> <span m='3682150'>this</span> <span m='3682330'>case,</span>
  <span m='3683890'>it's</span> <span m='3684130'>known,</span> <span m='3684700'>and</span>
  <span m='3684820'>so</span> <span m='3685060'>we</span> <span m='3685220'>just</span>
  <span m='3685450'>continue.</span> <span m='3690580'>So</span> <span m='3690630'>that's</span>
  <span m='3690840'>what</span> <span m='3690960'>the</span> <span m='3691050'>simulation</span>
  <span m='3691560'>would</span> <span m='3691710'>like</span> <span m='3691890'>to</span>
  <span m='3692010'>do,</span> <span m='3692280'>if</span> <span m='3692490'>we</span>
  <span m='3692610'>could</span> <span m='3692730'>distinguish</span> <span m='3693270'>between</span>
  <span m='3693600'>these</span> <span m='3693780'>two</span> <span m='3693900'>cases.</span>
  <span m='3695850'>But</span> <span m='3696030'>right</span> <span m='3696180'>now,</span>
  <span m='3696330'>we</span> <span m='3696480'>can't</span> <span m='3696690'>distinguish</span>
  <span m='3697050'>between</span> <span m='3697260'>these</span> <span m='3697380'>two</span>
  <span m='3697500'>cases,</span> <span m='3697890'>because</span> <span m='3698070'>we</span>
  <span m='3698160'>don't</span> <span m='3698790'>have</span> <span m='3698940'>enough</span>
  <span m='3699150'>information.</span> <span m='3700600'>So</span> <span m='3700650'>we're</span>
  <span m='3700740'>going</span> <span m='3700860'>to</span> <span m='3701070'>make</span>
  <span m='3701310'>our</span> <span m='3701400'>encoding</span> <span m='3701790'>a</span>
  <span m='3701850'>little</span> <span m='3702030'>bit</span> <span m='3702150'>bigger.</span>
  </p><p><span m='3704290'>What</span> <span m='3704460'>we're</span> <span m='3704580'>going</span>
  <span m='3704820'>to</span> <span m='3704940'>do--</span> <span m='3708888'>this</span>
  <span m='3709344'>is</span> <span m='3709800'>here--</span> <span m='3714540'>is</span>
  <span m='3714720'>encode</span> <span m='3715040'>a</span> <span m='3715110'>separator</span>
  <span m='3726030'>for</span> <span m='3727170'>r</span> <span m='3727570'>minus</span>
  <span m='3728220'>w</span> <span m='3731130'>and</span> <span m='3731820'>w</span>
  <span m='3732450'>minus</span> <span m='3733330'>r.</span> <span m='3735736'>So</span>
  <span m='3736230'>let's--</span> <span m='3740500'>over</span> <span m='3740990'>here.</span>
  </p><p><span m='3756600'>What</span> <span m='3756760'>does</span> <span m='3756910'>this</span>
  <span m='3757090'>mean?</span> <span m='3758280'>Separators</span> <span m='3758890'>going</span>
  <span m='3759010'>to</span> <span m='3759080'>call,</span> <span m='3759960'>called</span>
  <span m='3760040'>S.</span> <span m='3762800'>So</span> <span m='3763100'>I</span>
  <span m='3763210'>want</span> <span m='3763450'>this</span> <span m='3763630'>picture,</span>
  <span m='3765030'>r</span> <span m='3765340'>minus</span> <span m='3765790'>w</span>
  <span m='3767560'>sits</span> <span m='3767890'>inside</span> <span m='3768280'>S.</span>
  <span m='3770320'>And</span> <span m='3770590'>w</span> <span m='3770950'>minus</span>
  <span m='3771280'>r</span> <span m='3772420'>sits</span> <span m='3772780'>outside</span>
  <span m='3773230'>S.</span> <span m='3774950'>This</span> <span m='3775150'>is</span>
  <span m='3775360'>my</span> <span m='3775660'>universe</span> <span m='3776810'>of</span>
  <span m='3777550'>cells.</span> <span m='3779540'>These</span> <span m='3779650'>are</span>
  <span m='3779740'>the</span> <span m='3779830'>things</span> <span m='3780100'>that</span>
  <span m='3780250'>are</span> <span m='3780340'>read</span> <span m='3780730'>in</span>
  <span m='3780910'>the</span> <span m='3781030'>right</span> <span m='3781270'>subtree,</span>
  <span m='3781660'>but</span> <span m='3781810'>not</span> <span m='3782050'>written</span>
  <span m='3782350'>in</span> <span m='3782470'>the</span> <span m='3782590'>left</span>
  <span m='3782770'>subtree.</span> <span m='3783880'>Those</span> <span m='3784100'>are</span>
  <span m='3784140'>the</span> <span m='3784180'>things</span> <span m='3784420'>I</span>
  <span m='3784480'>care</span> <span m='3784750'>about--</span> <span m='3787870'>well,</span>
  <span m='3788810'>no</span> <span m='3788910'>quite</span> <span m='3789070'>this,</span>
  <span m='3789310'>the</span> <span m='3789430'>other</span> <span m='3789580'>ones.</span>
  <span m='3790390'>So</span> <span m='3790990'>things</span> <span m='3791200'>that</span>
  <span m='3791320'>are</span> <span m='3791410'>read</span> <span m='3791710'>in</span>
  <span m='3791800'>the</span> <span m='3791860'>right</span> <span m='3792040'>subtree</span>
  <span m='3792790'>and</span> <span m='3793060'>that</span> <span m='3793210'>are</span>
  <span m='3793330'>not</span> <span m='3793570'>written</span> <span m='3793780'>in</span>
  <span m='3793870'>the</span> <span m='3793930'>last,</span> <span m='3794350'>this</span>
  <span m='3794530'>is</span> <span m='3794680'>the</span> <span m='3794800'>past</span>
  <span m='3795940'>essentially,</span> <span m='3796840'>that's</span> <span m='3797410'>useful</span>
  <span m='3797770'>over</span> <span m='3797950'>there.</span> <span m='3798820'>Over</span>
  <span m='3799060'>here,</span> <span m='3799360'>I</span> <span m='3799510'>have</span>
  <span m='3800870'>w</span> <span m='3801460'>minus</span> <span m='3801850'>r,</span>
  <span m='3802060'>these</span> <span m='3802210'>are</span> <span m='3802300'>things</span>
  <span m='3802510'>that</span> <span m='3802660'>are</span> <span m='3802720'>written</span>
  <span m='3803050'>in</span> <span m='3803140'>the</span> <span m='3803230'>left</span>
  <span m='3803410'>subtree,</span> <span m='3804190'>but</span> <span m='3804370'>not</span>
  <span m='3804730'>read</span> <span m='3805000'>in</span> <span m='3805090'>the</span>
  <span m='3805180'>right</span> <span m='3805350'>subtree.</span> <span m='3805690'>These</span>
  <span m='3805870'>are</span> <span m='3805930'>the</span> <span m='3806020'>things</span>
  <span m='3806260'>that</span> <span m='3806410'>I</span> <span m='3806500'>worry</span>
  <span m='3806770'>about,</span> <span m='3807070'>because</span> <span m='3807820'>those</span>
  <span m='3808030'>ones</span> <span m='3808210'>I</span> <span m='3808270'>need</span>
  <span m='3808420'>to</span> <span m='3808510'>detect</span> <span m='3808940'>that</span>
  <span m='3809040'>that</span> <span m='3809200'>was</span> <span m='3809350'>changed,</span>
  <span m='3809830'>and</span> <span m='3809920'>say</span> <span m='3810170'>whoops,</span>
  <span m='3811690'>you</span> <span m='3811990'>must</span> <span m='3812470'>have</span>
  <span m='3812620'>an</span> <span m='3812680'>answer</span> <span m='3813000'>of</span>
  <span m='3813070'>no.</span> </p><p><span m='3815710'>OK?</span> <span m='3816010'>So</span>
  <span m='3816370'>I</span> <span m='3816550'>can't</span> <span m='3816850'>afford</span>
  <span m='3817210'>to</span> <span m='3817330'>store</span> <span m='3817660'>these</span>
  <span m='3817810'>sets</span> <span m='3818110'>exactly,</span> <span m='3818680'>so</span>
  <span m='3818860'>I'm</span> <span m='3818920'>going</span> <span m='3819040'>to</span>
  <span m='3819160'>approximate</span> <span m='3819790'>them,</span> <span m='3820000'>by</span>
  <span m='3820120'>saying,</span> <span m='3820390'>well,</span> <span m='3820610'>let's</span>
  <span m='3820810'>store</span> <span m='3821070'>the</span> <span m='3821170'>separator</span>
  <span m='3821740'>out</span> <span m='3821860'>here.</span> <span m='3823840'>And</span>
  <span m='3824290'>if</span> <span m='3824470'>you're</span> <span m='3824620'>in</span>
  <span m='3824830'>S,</span> <span m='3826210'>then</span> <span m='3826390'>you're</span>
  <span m='3826540'>definitely</span> <span m='3827140'>not</span> <span m='3827350'>in</span>
  <span m='3827470'>w</span> <span m='3827770'>minus</span> <span m='3828070'>r.</span>
  <span m='3829000'>If you're</span> <span m='3829150'>definitely</span> <span m='3829480'>not</span>
  <span m='3829650'>in</span> <span m='3829760'>w</span> <span m='3830050'>minus</span>
  <span m='3830350'>r,</span> <span m='3831100'>then</span> <span m='3831550'>you</span>
  <span m='3831700'>can</span> <span m='3831940'>run--</span> <span m='3833470'>you</span>
  <span m='3833620'>can</span> <span m='3833740'>treat</span> <span m='3834010'>it</span>
  <span m='3834100'>as</span> <span m='3834250'>if</span> <span m='3834430'>it</span>
  <span m='3834520'>was</span> <span m='3834820'>known.</span> <span m='3836290'>OK,</span>
  <span m='3836590'>so</span> <span m='3836710'>if</span> <span m='3836800'>you're</span>
  <span m='3836920'>in</span> <span m='3837130'>s,</span> <span m='3838380'>this</span>
  <span m='3838510'>would</span> <span m='3838600'>be--</span> <span m='3840080'>why</span>
  <span m='3840250'>don't</span> <span m='3840440'>I</span> <span m='3840520'>write</span>
  <span m='3840720'>it</span> <span m='3841480'>here.</span> <span m='3843240'>For</span>
  <span m='3843460'>the</span> <span m='3843550'>decoding</span> <span m='3844030'>algorithm,</span>
  <span m='3844900'>if</span> <span m='3845080'>you</span> <span m='3845200'>want</span>
  <span m='3845380'>to</span> <span m='3845440'>read</span> <span m='3845710'>a</span>
  <span m='3845770'>cell</span> <span m='3847300'>that</span> <span m='3847510'>is</span>
  <span m='3850690'>written,</span> <span m='3854730'>or</span> <span m='3854890'>last</span>
  <span m='3855280'>written</span> <span m='3856060'>in</span> <span m='3858780'>the</span>
  <span m='3859390'>right</span> <span m='3859660'>subtree,</span> <span m='3863220'>in</span>
  <span m='3863410'>the</span> <span m='3863470'>past,</span> <span m='3864160'>these</span>
  <span m='3864400'>are</span> <span m='3864460'>the</span> <span m='3864580'>two</span>
  <span m='3864760'>easy</span> <span m='3865060'>case.</span> <span m='3867870'>Sorry--</span>
  <span m='3868310'>I</span> <span m='3868620'>don't</span> <span m='3868960'>want</span>
  <span m='3869300'>to</span> <span m='3869490'>write what's</span> <span m='3869740'>in</span>
  <span m='3869890'>the</span> <span m='3869950'>past,</span> <span m='3870350'>because</span>
  <span m='3870460'>the</span> <span m='3870520'>whole</span> <span m='3870670'>point</span>
  <span m='3870850'>is</span> <span m='3870940'>to</span> <span m='3871000'>figure</span>
  <span m='3871210'>out</span> <span m='3871360'>what's</span> <span m='3871600'>in</span>
  <span m='3871690'>the</span> <span m='3871780'>past.</span> </p><p><span m='3873080'>The</span>
  <span m='3873100'>other</span> <span m='3873260'>easy</span> <span m='3873450'>case</span>
  <span m='3873660'>is</span> <span m='3873820'>if</span> <span m='3873940'>it's</span>
  <span m='3874060'>in</span> <span m='3874300'>r</span> <span m='3874480'>intersect</span>
  <span m='3874870'>w,</span> <span m='3875360'>then</span> <span m='3875410'>it's</span>
  <span m='3875530'>written</span> <span m='3875740'>down</span> <span m='3876010'>for</span>
  <span m='3876250'>us.</span> <span m='3877332'>So</span> <span m='3877710'>this</span>
  <span m='3877960'>is</span> <span m='3878080'>encoded.</span> <span m='3880930'>This</span>
  <span m='3881170'>is</span> <span m='3881320'>easy,</span> <span m='3881830'>because</span>
  <span m='3883510'>during</span> <span m='3883840'>the</span> <span m='3883900'>simulation</span>
  <span m='3884560'>we</span> <span m='3884650'>did</span> <span m='3884800'>those</span>
  <span m='3884980'>rights,</span> <span m='3885280'>and</span> <span m='3885370'>so</span>
  <span m='3885550'>we</span> <span m='3885640'>know</span> <span m='3885790'>what</span>
  <span m='3885880'>they</span> <span m='3886030'>were.</span> <span m='3886870'>r</span>
  <span m='3887330'>intersect</span> <span m='3887500'>w, we've</span> <span m='3887950'>written</span>
  <span m='3888160'>down,</span> <span m='3888490'>so</span> <span m='3888670'>it's</span>
  <span m='3888790'>easy</span> <span m='3889060'>to</span> <span m='3889150'>know.</span>
  <span m='3890020'>Then</span> <span m='3890230'>the</span> <span m='3890350'>other</span>
  <span m='3890530'>cases</span> <span m='3890920'>are</span> <span m='3891130'>either</span>
  <span m='3891510'>you're in</span> <span m='3891760'>S,</span> <span m='3892600'>or</span>
  <span m='3892750'>you're</span> <span m='3892900'>not</span> <span m='3893200'>in</span>
  <span m='3893370'>S.</span> <span m='3900070'>OK.</span> <span m='3900790'>I</span>
  <span m='3900910'>claim</span> <span m='3901440'>if</span> <span m='3901630'>you're</span>
  <span m='3901810'>in</span> <span m='3901930'>S,</span> <span m='3902860'>you</span>
  <span m='3902980'>must</span> <span m='3903280'>be</span> <span m='3903460'>in</span>
  <span m='3903550'>the</span> <span m='3903640'>past,</span> <span m='3905800'>that</span>
  <span m='3905950'>cell</span> <span m='3906340'>must</span> <span m='3906580'>have</span>
  <span m='3906670'>been</span> <span m='3906820'>written</span> <span m='3907120'>in</span>
  <span m='3907300'>the</span> <span m='3907390'>past,</span> <span m='3909340'>and</span>
  <span m='3909490'>so</span> <span m='3909730'>you</span> <span m='3909940'>know</span>
  <span m='3910120'>what</span> <span m='3910240'>the</span> <span m='3910330'>value</span>
  <span m='3910630'>was.</span> <span m='3913120'>And</span> <span m='3913240'>so</span>
  <span m='3913390'>you</span> <span m='3913540'>can</span> <span m='3913690'>continue</span>
  <span m='3914110'>writing</span> <span m='3914380'>the</span> <span m='3914440'>simulation,</span>
  <span m='3915550'>just</span> <span m='3915820'>like</span> <span m='3916180'>in</span>
  <span m='3916300'>this</span> <span m='3916420'>situation.</span> </p><p><span m='3920260'>The</span>
  <span m='3920350'>other</span> <span m='3920500'>situation</span> <span m='3920910'>is</span>
  <span m='3921070'>you're</span> <span m='3921190'>not</span> <span m='3921430'>in</span>
  <span m='3921550'>S,</span> <span m='3921700'>then</span> <span m='3921880'>you</span>
  <span m='3921970'>don't</span> <span m='3922150'>know,</span> <span m='3922330'>it</span>
  <span m='3922420'>could</span> <span m='3922630'>have</span> <span m='3922720'>been</span>
  <span m='3922840'>written</span> <span m='3923200'>or</span> <span m='3923350'>might</span>
  <span m='3923560'>not</span> <span m='3923800'>have</span> <span m='3923920'>been.</span>
  <span m='3924820'>But</span> <span m='3925000'>what</span> <span m='3925180'>you</span>
  <span m='3925330'>know</span> <span m='3925900'>is</span> <span m='3926080'>that</span>
  <span m='3926200'>you're</span> <span m='3926350'>definitely</span> <span m='3926800'>not</span>
  <span m='3927850'>in</span> <span m='3928030'>r.</span> <span m='3930180'>Because</span>
  <span m='3930360'>if</span> <span m='3930450'>you're</span> <span m='3930570'>not</span>
  <span m='3930780'>in</span> <span m='3930900'>r</span> <span m='3931110'>minus</span>
  <span m='3931500'>w,</span> <span m='3932100'>and</span> <span m='3932490'>you're</span>
  <span m='3932640'>not</span> <span m='3932850'>in</span> <span m='3932970'>r</span>
  <span m='3933180'>intersect</span> <span m='3933660'>w,</span> <span m='3934510'>then</span>
  <span m='3934560'>you're</span> <span m='3934650'>not</span> <span m='3934860'>in</span>
  <span m='3934950'>r.</span> <span m='3936050'>If</span> <span m='3936270'>you're</span>
  <span m='3936390'>not</span> <span m='3936600'>in</span> <span m='3936720'>r,</span>
  <span m='3937570'>then</span> <span m='3939120'>we're</span> <span m='3939240'>in</span>
  <span m='3939330'>this</span> <span m='3939480'>situation.</span> <span m='3941070'>If</span>
  <span m='3941220'>you</span> <span m='3941340'>read</span> <span m='3941550'>something</span>
  <span m='3941970'>not</span> <span m='3942190'>in</span> <span m='3942300'>r,</span>
  <span m='3942480'>that</span> <span m='3942630'>means</span> <span m='3942810'>you're</span>
  <span m='3942900'>running</span> <span m='3943170'>the</span> <span m='3943290'>wrong</span>
  <span m='3944160'>query.</span> <span m='3945150'>Because</span> <span m='3945390'>the</span>
  <span m='3945510'>correct</span> <span m='3945750'>query</span> <span m='3946350'>does</span>
  <span m='3946560'>r--</span> <span m='3947850'>only</span> <span m='3948120'>reads</span>
  <span m='3948260'>from</span> <span m='3948470'>r.</span> <span m='3949590'>So</span>
  <span m='3949740'>if</span> <span m='3949830'>you're</span> <span m='3949920'>not</span>
  <span m='3950160'>an</span> <span m='3950290'>S,</span> <span m='3951150'>you</span>
  <span m='3951270'>must</span> <span m='3952470'>not</span> <span m='3952860'>be</span>
  <span m='3954360'>in</span> <span m='3954640'>r.</span> <span m='3956970'>And</span>
  <span m='3957090'>so</span> <span m='3957300'>in</span> <span m='3957420'>this</span>
  <span m='3957600'>case,</span> <span m='3957930'>you</span> <span m='3958200'>know</span>
  <span m='3958440'>you</span> <span m='3958590'>can</span> <span m='3958770'>abort</span>
  <span m='3960960'>and</span> <span m='3961140'>try</span> <span m='3961560'>the</span>
  <span m='3961680'>next</span> <span m='3962040'>pi.</span> </p><p><span m='3962660'>So</span>
  <span m='3962730'>we're</span> <span m='3962790'>going</span> <span m='3962920'>to</span>
  <span m='3963000'>do</span> <span m='3963090'>this</span> <span m='3963240'>for</span>
  <span m='3963390'>all</span> <span m='3963540'>pi,</span> <span m='3964680'>run</span>
  <span m='3964890'>the</span> <span m='3964980'>simulation</span> <span m='3965610'>according</span>
  <span m='3966000'>to</span> <span m='3966120'>this</span> <span m='3966450'>way</span>
  <span m='3966660'>of</span> <span m='3966780'>reading</span> <span m='3967080'>cells.</span>
  <span m='3969240'>At</span> <span m='3969390'>the</span> <span m='3969540'>end,</span>
  <span m='3969690'>the</span> <span m='3969780'>queries</span> <span m='3970140'>are</span>
  <span m='3970230'>either</span> <span m='3970350'>going</span> <span m='3970470'>to</span>
  <span m='3970560'>say</span> <span m='3970800'>yes</span> <span m='3971070'>or</span>
  <span m='3971160'>no,</span> <span m='3971610'>or</span> <span m='3971880'>it</span>
  <span m='3971970'>may</span> <span m='3974250'>abort</span> <span m='3974610'>early.</span>
  <span m='3976950'>So</span> <span m='3977190'>if</span> <span m='3977370'>it</span>
  <span m='3977460'>says</span> <span m='3977700'>no</span> <span m='3977970'>or</span>
  <span m='3978120'>it</span> <span m='3978210'>aborts</span> <span m='3978540'>early,</span>
  <span m='3978840'>then</span> <span m='3979050'>we</span> <span m='3979170'>know</span>
  <span m='3979680'>that</span> <span m='3979830'>was</span> <span m='3979980'>not</span>
  <span m='3980220'>the</span> <span m='3980310'>right</span> <span m='3980460'>pi.</span>
  <span m='3981360'>Only</span> <span m='3981720'>one</span> <span m='3981930'>of</span>
  <span m='3982020'>them</span> <span m='3982230'>can</span> <span m='3982380'>say</span>
  <span m='3982620'>yes,</span> <span m='3983580'>that</span> <span m='3983790'>tells</span>
  <span m='3984120'>us</span> <span m='3984240'>what</span> <span m='3984390'>the</span>
  <span m='3984480'>pi</span> <span m='3984780'>is,</span> <span m='3984960'>that</span>
  <span m='3985110'>tells</span> <span m='3985410'>us</span> <span m='3985530'>what</span>
  <span m='3985770'>the</span> <span m='3986580'>queries</span> <span m='3987030'>were.</span>
  <span m='3987810'>Once</span> <span m='3988020'>we</span> <span m='3988140'>know</span>
  <span m='3988260'>what</span> <span m='3988380'>the</span> <span m='3988470'>queries</span>
  <span m='3988860'>were</span> <span m='3989010'>in</span> <span m='3989070'>the</span>
  <span m='3989160'>right</span> <span m='3989340'>subtree,</span> <span m='3990240'>we</span>
  <span m='3990390'>can</span> <span m='3990810'>use</span> <span m='3991020'>the</span>
  <span m='3991110'>same</span> <span m='3991560'>multiplying</span> <span m='3992100'>by</span>
  <span m='3992310'>inverses</span> <span m='3992610'>trick,</span> <span m='3993150'>figure</span>
  <span m='3993380'>out</span> <span m='3993420'>what</span> <span m='3993530'>the</span>
  <span m='3993600'>updates</span> <span m='3993970'>were</span> <span m='3994100'>in</span>
  <span m='3994200'>the</span> <span m='3994290'>left</span> <span m='3994470'>subtree.</span>
  <span m='3995220'>But</span> <span m='3995880'>those</span> <span m='3996300'>permutations</span>
  <span m='3997020'>require</span> <span m='3998310'>l</span> <span m='3998790'>root</span>
  <span m='3999060'>n</span> <span m='3999390'>log</span> <span m='3999710'>n</span>
  <span m='4000230'>bits.</span> <span m='4001250'>Which</span> <span m='4001370'>used
  to be</span> <span m='4001460'>on</span> <span m='4001550'>this</span> <span m='4001700'>board,</span>
  <span m='4002090'>it's</span> <span m='4002460'>been</span> <span m='4002830'>erased</span>
  <span m='4003230'>now.</span> <span m='4003770'>That's</span> <span m='4003980'>what</span>
  <span m='4004070'>we</span> <span m='4004130'>use</span> <span m='4004400'>for</span>
  <span m='4004550'>this</span> <span m='4004760'>argument.</span> </p><p><span m='4006470'>And</span>
  <span m='4006590'>so</span> <span m='4006710'>what</span> <span m='4006800'>we</span>
  <span m='4006950'>get</span> <span m='4007130'>is</span> <span m='4007340'>overall,</span>
  <span m='4007760'>encoding</span> <span m='4008270'>must</span> <span m='4008840'>use</span>
  <span m='4009760'>l</span> <span m='4010050'>root</span> <span m='4010315'>n</span>
  <span m='4011030'>log</span> <span m='4011300'>n</span> <span m='4011420'>bits.</span>
  <span m='4012822'>OK,</span> <span m='4013270'>but our</span> <span m='4013610'>encoding's</span>
  <span m='4014030'>a</span> <span m='4014090'>little</span> <span m='4014300'>bit</span>
  <span m='4014420'>bigger</span> <span m='4014660'>now.</span> <span m='4015740'>The</span>
  <span m='4015860'>big</span> <span m='4016040'>issue</span> <span m='4016340'>is</span>
  <span m='4016820'>how</span> <span m='4017060'>do</span> <span m='4017150'>we</span>
  <span m='4017270'>store</span> <span m='4017540'>the</span> <span m='4017660'>separator?</span>
  <span m='4019190'>We</span> <span m='4019280'>need</span> <span m='4019430'>to</span>
  <span m='4019690'>do</span> <span m='4020210'>store</span> <span m='4020450'>this</span>
  <span m='4020540'>separator</span> <span m='4020960'>with</span> <span m='4021110'>very</span>
  <span m='4021320'>few</span> <span m='4021530'>bits,</span> <span m='4021860'>otherwise</span>
  <span m='4024160'>we</span> <span m='4024680'>haven't</span> <span m='4024920'>really</span>
  <span m='4025100'>proved</span> <span m='4025400'>anything.</span> <span m='4026160'>We</span>
  <span m='4026670'>want</span> <span m='4026930'>encoding</span> <span m='4027230'>to</span>
  <span m='4027320'>be</span> <span m='4027440'>small.</span> <span m='4031480'>So</span>
  <span m='4031700'>we</span> <span m='4031820'>get</span> <span m='4032090'>that</span>
  <span m='4033210'>the</span> <span m='4033320'>encoding</span> <span m='4035180'>must</span>
  <span m='4035570'>use</span> <span m='4039320'>omega</span> <span m='4040790'>l</span>
  <span m='4041020'>root</span> <span m='4041390'>n</span> <span m='4041700'>log</span>
  <span m='4042010'>n</span> <span m='4042160'>bits</span> <span m='4042520'>in</span>
  <span m='4042620'>expectation,</span> <span m='4047390'>because</span> <span m='4047960'>this</span>
  <span m='4048170'>is</span> <span m='4048410'>a</span> <span m='4048530'>valid</span>
  <span m='4049010'>decoding</span> <span m='4049550'>algorithm,</span> <span m='4050040'>it</span>
  <span m='4050140'>will</span> <span m='4050240'>figure</span> <span m='4050540'>out</span>
  <span m='4050630'>what</span> <span m='4050780'>the</span> <span m='4050870'>permutations</span>
  <span m='4051500'>were.</span> <span m='4052490'>And</span> <span m='4052700'>they</span>
  <span m='4052820'>require</span> <span m='4053270'>at</span> <span m='4053360'>least</span>
  <span m='4053540'>this</span> <span m='4053660'>many</span> <span m='4053840'>bits,</span>
  <span m='4054130'>so</span> <span m='4054480'>encoding</span> <span m='4055010'>must</span>
  <span m='4055220'>use</span> <span m='4055400'>this</span> <span m='4055490'>many</span>
  <span m='4055730'>bits</span> <span m='4056750'>in</span> <span m='4056840'>expectation.</span>
  </p><p><span m='4058160'>Now</span> <span m='4058310'>the</span> <span m='4058400'>question</span>
  <span m='4058640'>is</span> <span m='4058760'>how</span> <span m='4058910'>many</span>
  <span m='4059100'>bits</span> <span m='4059400'>does</span> <span m='4059570'>the</span>
  <span m='4059660'>encoding</span> <span m='4060050'>use?</span> <span m='4060740'>Then</span>
  <span m='4060960'>we'll</span> <span m='4061100'>get</span> <span m='4061460'>either</span>
  <span m='4061700'>a</span> <span m='4061730'>contradiction</span> <span m='4062360'>or</span>
  <span m='4062840'>we'll</span> <span m='4063000'>prove</span> <span m='4064190'>the</span>
  <span m='4064280'>claim.</span> <span m='4067142'>So</span> <span m='4067580'>let's</span>
  <span m='4067970'>go</span> <span m='4068330'>over</span> <span m='4068600'>here.</span>
  </p><p></p><p><span m='4103830'>So</span> <span m='4103910'>here's</span> <span
  m='4104210'>a</span> <span m='4104270'>fun</span> <span m='4105770'>fact</span>
  <span m='4106130'>about</span> <span m='4106399'>separators.</span> <span m='4107330'>I'm</span>
  <span m='4107450'>not</span> <span m='4107569'>going</span> <span m='4107689'>to</span>
  <span m='4107750'>prove</span> <span m='4107990'>it</span> <span m='4108109'>fully,</span>
  <span m='4109279'>but</span> <span m='4110630'>I'm</span> <span m='4110779'>going</span>
  <span m='4111050'>to</span> <span m='4111380'>rely</span> <span m='4111740'>on</span>
  <span m='4111890'>some</span> <span m='4112399'>hashing</span> <span m='4112810'>ability.</span>
  <span m='4116630'>So</span> <span m='4116810'>given</span> <span m='4117170'>some</span>
  <span m='4117380'>universe</span> <span m='4117890'>U,</span> <span m='4118310'>in</span>
  <span m='4118430'>this</span> <span m='4118550'>case</span> <span m='4118790'>it's</span>
  <span m='4118880'>going</span> <span m='4119029'>to</span> <span m='4119120'>be</span>
  <span m='4119330'>the</span> <span m='4119450'>cells</span> <span m='4120590'>in</span>
  <span m='4120740'>our</span> <span m='4121189'>data</span> <span m='4121460'>structure.</span>
  <span m='4122270'>But</span> <span m='4123000'>speak</span> <span m='4123290'>a</span>
  <span m='4123319'>little</span> <span m='4123529'>bit</span> <span m='4123620'>more</span>
  <span m='4123770'>generally</span> <span m='4124100'>of</span> <span m='4124170'>the</span>
  <span m='4124210'>universe</span> <span m='4124580'>U, I</span> <span m='4124850'>have</span>
  <span m='4125050'>some</span> <span m='4125120'>number</span> <span m='4125390'>m,</span>
  <span m='4125689'>which</span> <span m='4125899'>is</span> <span m='4126090'>our</span>
  <span m='4126200'>set</span> <span m='4126470'>size.</span> <span m='4127800'>And</span>
  <span m='4129229'>what</span> <span m='4129319'>we're</span> <span m='4129410'>interested</span>
  <span m='4130700'>in</span> <span m='4130800'>is</span> <span m='4131120'>in</span>
  <span m='4131240'>defining</span> <span m='4132880'>our</span> <span m='4132990'>separator</span>
  <span m='4133580'>family.</span> <span m='4134960'>Kind</span> <span m='4135200'>of</span>
  <span m='4135319'>like</span> <span m='4135560'>a</span> <span m='4135680'>family</span>
  <span m='4136100'>of</span> <span m='4136189'>hash</span> <span m='4136430'>functions,</span>
  <span m='4138109'>closely</span> <span m='4138470'>related,</span> <span m='4138930'>in</span>
  <span m='4139029'>fact.</span> <span m='4139790'>Call</span> <span m='4139970'>it</span>
  <span m='4140189'>S.</span> <span m='4144859'>And</span> <span m='4145040'>it's</span>
  <span m='4145130'>going</span> <span m='4145370'>to</span> <span m='4145490'>work</span>
  <span m='4145760'>for</span> <span m='4146180'>size</span> <span m='4146750'>m</span>
  <span m='4147060'>sets.</span> <span m='4153510'>And</span> <span m='4153689'>so</span>
  <span m='4153880'>S is</span> <span m='4154229'>a</span> <span m='4154340'>separator</span>
  <span m='4154770'>family</span> <span m='4155250'>if,</span> <span m='4156899'>for</span>
  <span m='4157200'>any</span> <span m='4157680'>two</span> <span m='4157950'>sets,</span>
  <span m='4158340'>A and</span> <span m='4158640'>B,</span> <span m='4160229'>in</span>
  <span m='4160380'>the</span> <span m='4160470'>universe</span> <span m='4162870'>of</span>
  <span m='4163020'>size,</span> <span m='4163410'>at</span> <span m='4163470'>most,</span>
  <span m='4163740'>m,</span> <span m='4170310'>and</span> <span m='4170790'>disjoint.</span>
  </p><p><span m='4172259'>So A</span> <span m='4172710'>intersect</span> <span m='4173250'>B</span>
  <span m='4173580'>is</span> <span m='4173729'>the</span> <span m='4173880'>empty</span>
  <span m='4174149'>set.</span> <span m='4175529'>So</span> <span m='4175830'>of</span>
  <span m='4175950'>course what</span> <span m='4176229'>we're</span> <span m='4176310'>thinking</span>
  <span m='4176550'>about</span> <span m='4176729'>here</span> <span m='4176939'>is</span>
  <span m='4177090'>r</span> <span m='4177270'>minus</span> <span m='4177569'>w,</span>
  <span m='4178380'>and</span> <span m='4178500'>w</span> <span m='4178800'>minus</span>
  <span m='4179100'>r.</span> <span m='4179279'>These</span> <span m='4179460'>are</span>
  <span m='4179520'>two</span> <span m='4179700'>subsets</span> <span m='4180149'>of</span>
  <span m='4180210'>the</span> <span m='4180300'>universe.</span> <span m='4181380'>Hopefully</span>
  <span m='4181770'>they're</span> <span m='4181890'>not</span> <span m='4182220'>too</span>
  <span m='4182460'>big,</span> <span m='4183450'>because</span> <span m='4183660'>if</span>
  <span m='4183779'>this</span> <span m='4183960'>one</span> <span m='4184080'>is</span>
  <span m='4184170'>huge,</span> <span m='4184510'>that</span> <span m='4184649'>means</span>
  <span m='4184890'>you</span> <span m='4185010'>read</span> <span m='4185279'>a</span>
  <span m='4185340'>huge</span> <span m='4185700'>amount</span> <span m='4185939'>of</span>
  <span m='4186029'>data</span> <span m='4186240'>in</span> <span m='4186330'>the</span>
  <span m='4186420'>right</span> <span m='4186600'>subtree.</span> <span m='4187080'>If</span>
  <span m='4187439'>this</span> <span m='4187620'>one</span> <span m='4187740'>is</span>
  <span m='4187830'>huge,</span> <span m='4188050'>it meant</span> <span m='4188279'>you</span>
  <span m='4188490'>wrote</span> <span m='4188819'>a</span> <span m='4188910'>huge</span>
  <span m='4189180'>amount</span> <span m='4189330'>of</span> <span m='4189420'>data</span>
  <span m='4189569'>in</span> <span m='4189630'>the</span> <span m='4189689'>left</span>
  <span m='4189899'>subtree.</span> <span m='4190960'>And</span> <span m='4190979'>then</span>
  <span m='4191100'>we</span> <span m='4191220'>get</span> <span m='4191340'>lower</span>
  <span m='4191550'>bounds</span> <span m='4191850'>in</span> <span m='4191939'>an</span>
  <span m='4192029'>easier</span> <span m='4192390'>way.</span> <span m='4193770'>Or</span>
  <span m='4193979'>they're</span> <span m='4194100'>not</span> <span m='4194279'>so</span>
  <span m='4194460'>big,</span> <span m='4194760'>let's</span> <span m='4194830'>say</span>
  <span m='4195000'>they're</span> <span m='4195150'>size</span> <span m='4195390'>at</span>
  <span m='4195470'>most</span> <span m='4195720'>m.</span> <span m='4196550'>They're</span>
  <span m='4196760'>disjoint</span> <span m='4197340'>for</span> <span m='4197460'>sure,</span>
  <span m='4197760'>by</span> <span m='4198090'>definition,</span> <span m='4198770'>r</span>
  <span m='4198900'>minus</span> <span m='4199170'>w's</span> <span m='4199470'>disjoint</span>
  <span m='4199800'>from</span> <span m='4199950'>w</span> <span m='4200220'>minus</span>
  <span m='4200490'>r.</span> <span m='4201110'>It</span> <span m='4201410'>removes</span>
  <span m='4201840'>the</span> <span m='4201960'>intersection.</span> <span m='4206160'>So</span>
  <span m='4206340'>that's</span> <span m='4206520'>our</span> <span m='4206610'>set</span>
  <span m='4207010'>up.</span> </p><p><span m='4208760'>Then,</span> <span m='4209370'>what</span>
  <span m='4209460'>we</span> <span m='4209580'>want,</span> <span m='4209880'>is</span>
  <span m='4210030'>that</span> <span m='4210150'>there</span> <span m='4210390'>is</span>
  <span m='4210660'>some</span> <span m='4210870'>set</span> <span m='4211140'>C</span>
  <span m='4211950'>in</span> <span m='4212220'>the</span> <span m='4213000'>separator</span>
  <span m='4213540'>family,</span> <span m='4215580'>such</span> <span m='4216000'>that</span>
  <span m='4220581'>A</span> <span m='4221390'>is</span> <span m='4221610'>contained</span>
  <span m='4222060'>in</span> <span m='4222150'>C,</span> <span m='4223500'>and</span>
  <span m='4223680'>B</span> <span m='4224250'>is</span> <span m='4224730'>outside</span>
  <span m='4225360'>of</span> <span m='4226050'>C.</span> <span m='4229590'>So</span>
  <span m='4229740'>B</span> <span m='4229980'>is</span> <span m='4230100'>in</span>
  <span m='4230220'>the</span> <span m='4230310'>universe</span> <span m='4230730'>minus</span>
  <span m='4231060'>C.</span> <span m='4231720'>So</span> <span m='4231870'>this</span>
  <span m='4232050'>is</span> <span m='4232170'>exactly</span> <span m='4232620'>our</span>
  <span m='4232710'>picture</span> <span m='4233580'>from</span> <span m='4233730'>before,</span>
  <span m='4234630'>we</span> <span m='4234750'>have</span> <span m='4234990'>A.</span>
  <span m='4236160'>A</span> <span m='4236550'>contains</span> <span m='4237990'>C,</span>
  <span m='4238890'>and</span> <span m='4238980'>we</span> <span m='4239100'>have</span>
  <span m='4239310'>B</span> <span m='4239640'>over</span> <span m='4239880'>on</span>
  <span m='4240000'>the</span> <span m='4240090'>right.</span> <span m='4241230'>And</span>
  <span m='4241380'>this</span> <span m='4241530'>is</span> <span m='4241650'>the</span>
  <span m='4241740'>whole</span> <span m='4241920'>universe</span> <span m='4243330'>U,</span>
  <span m='4244320'>and</span> <span m='4244440'>so</span> <span m='4244590'>B</span>
  <span m='4244860'>is</span> <span m='4244950'>outside</span> <span m='4245370'>of</span>
  <span m='4245460'>C,</span> <span m='4245840'>A is</span> <span m='4246090'>entirely</span>
  <span m='4246540'>inside</span> <span m='4246930'>C.</span> <span m='4249620'>OK.</span>
  </p><p><span m='4251880'>This</span> <span m='4252030'>is</span> <span m='4252150'>what</span>
  <span m='4252300'>we</span> <span m='4252480'>want</span> <span m='4252720'>to</span>
  <span m='4252870'>exist,</span> <span m='4253170'>because</span> <span m='4253380'>if</span>
  <span m='4253470'>a</span> <span m='4253530'>separator</span> <span m='4254040'>family</span>
  <span m='4254370'>exists,</span> <span m='4255630'>then</span> <span m='4255810'>we</span>
  <span m='4255900'>know</span> <span m='4256110'>whatever</span> <span m='4256620'>our</span>
  <span m='4257090'>r minus</span> <span m='4257400'>w,</span> <span m='4257730'>and</span>
  <span m='4257820'>w</span> <span m='4258090'>minus</span> <span m='4258330'>r</span>
  <span m='4258510'>sets</span> <span m='4258810'>were,</span> <span m='4258980'>as</span>
  <span m='4259110'>long</span> <span m='4259290'>as</span> <span m='4259380'>they're</span>
  <span m='4259470'>not</span> <span m='4259650'>too</span> <span m='4259830'>big,</span>
  <span m='4260630'>they're</span> <span m='4260890'>definitely</span> <span m='4261240'>disjoint,</span>
  <span m='4262050'>we</span> <span m='4262170'>can</span> <span m='4262320'>find</span>
  <span m='4262710'>one</span> <span m='4262830'>of</span> <span m='4262890'>these</span>
  <span m='4263040'>separators</span> <span m='4264180'>that</span> <span m='4264300'>encodes</span>
  <span m='4264780'>what</span> <span m='4264900'>we</span> <span m='4265020'>need</span>
  <span m='4265170'>to</span> <span m='4265290'>encode,</span> <span m='4265740'>which</span>
  <span m='4265980'>is</span> <span m='4266130'>the</span> <span m='4266250'>set</span>
  <span m='4266550'>C.</span> <span m='4267090'>Which</span> <span m='4267240'>is</span>
  <span m='4267360'>called</span> <span m='4268470'>s</span> <span m='4268740'>over</span>
  <span m='4268950'>there.</span> <span m='4270930'>Cool.</span> <span m='4271740'>How</span>
  <span m='4271920'>do</span> <span m='4272010'>we</span> <span m='4272130'>encode</span>
  <span m='4272460'>it?</span> <span m='4272640'>Well,</span> <span m='4272880'>if</span>
  <span m='4273450'>the</span> <span m='4273600'>number--</span> <span m='4274240'>if</span>
  <span m='4274290'>the</span> <span m='4274380'>size</span> <span m='4277110'>of</span>
  <span m='4278160'>the</span> <span m='4278280'>separator</span> <span m='4278640'>family</span>
  <span m='4279060'>is</span> <span m='4279240'>something,</span> <span m='4280260'>then</span>
  <span m='4280410'>we</span> <span m='4280530'>need</span> <span m='4280770'>log</span>
  <span m='4281160'>of</span> <span m='4281260'>that</span> <span m='4281490'>bits</span>
  <span m='4281880'>to</span> <span m='4282060'>write</span> <span m='4282270'>down</span>
  <span m='4283050'>the</span> <span m='4283200'>separator</span> <span m='4283650'>set.</span>
  <span m='4284640'>So</span> <span m='4284850'>as long</span> <span m='4285030'>as</span>
  <span m='4285120'>this</span> <span m='4285270'>is</span> <span m='4285360'>small,</span>
  <span m='4286460'>we're</span> <span m='4286590'>happy.</span> </p><p><span m='4288490'>So</span>
  <span m='4289560'>let</span> <span m='4289710'>me</span> <span m='4289800'>tell</span>
  <span m='4289950'>you</span> <span m='4290040'>what's</span> <span m='4290190'>to
  know</span> <span m='4290340'>about</span> <span m='4290520'>separators</span> <span
  m='4310150'>There</span> <span m='4310240'>exists</span> <span m='4310570'>a</span>
  <span m='4310900'>separator</span> <span m='4311530'>family</span> <span m='4315200'>S,</span>
  <span m='4316908'>with</span> <span m='4317800'>size</span> <span m='4318220'>of</span>
  <span m='4318310'>S</span> <span m='4320780'>at</span> <span m='4320980'>most</span>
  <span m='4321940'>2</span> <span m='4322450'>to</span> <span m='4322700'>the</span>
  <span m='4322840'>order</span> <span m='4323260'>m</span> <span m='4324250'>plus</span>
  <span m='4324910'>log</span> <span m='4326050'>log</span> <span m='4326710'>U.</span>
  <span m='4329260'>Now</span> <span m='4329500'>this</span> <span m='4329710'>is</span>
  <span m='4329800'>getting</span> <span m='4330070'>into</span> <span m='4330310'>an</span>
  <span m='4330370'>area</span> <span m='4330640'>that</span> <span m='4330820'>we</span>
  <span m='4331030'>haven't</span> <span m='4331330'>spent</span> <span m='4331600'>a</span>
  <span m='4331630'>lot</span> <span m='4331780'>of</span> <span m='4331870'>time</span>
  <span m='4332140'>on,</span> <span m='4332980'>but--</span> <span m='4333740'>so</span>
  <span m='4333960'>I'm</span> <span m='4334030'>going</span> <span m='4334150'>to</span>
  <span m='4334330'>give</span> <span m='4334570'>you</span> <span m='4334720'>a</span>
  <span m='4334780'>sketch</span> <span m='4335170'>of</span> <span m='4335230'>a</span>
  <span m='4335290'>proof</span> <span m='4335510'>of</span> <span m='4335590'>this</span>
  <span m='4335740'>claim.</span> <span m='4339520'>Relying</span> <span m='4340000'>on</span>
  <span m='4340210'>perfect</span> <span m='4340570'>hash</span> <span m='4340840'>functions.</span>
  <span m='4342910'>So</span> <span m='4343623'>the</span> <span m='4344056'>idea</span>
  <span m='4344490'>is</span> <span m='4344710'>the</span> <span m='4344770'>following,</span>
  <span m='4346310'>we</span> <span m='4346330'>want</span> <span m='4346540'>to</span>
  <span m='4346600'>know,</span> <span m='4346840'>basically,</span> <span m='4347170'>which</span>
  <span m='4347380'>elements</span> <span m='4347710'>are</span> <span m='4347770'>in</span>
  <span m='4347850'>A,</span> <span m='4348070'>which</span> <span m='4348280'>elements</span>
  <span m='4348640'>are</span> <span m='4348730'>in</span> <span m='4348820'>B.</span>
  <span m='4350070'>But</span> <span m='4350350'>it's</span> <span m='4350500'>kind</span>
  <span m='4350740'>of</span> <span m='4350830'>annoying</span> <span m='4351340'>to</span>
  <span m='4351490'>do</span> <span m='4351580'>that,</span> <span m='4351740'>it</span>
  <span m='4351850'>can't</span> <span m='4352060'>start</span> <span m='4352270'>that</span>
  <span m='4352330'>for</span> <span m='4352480'>all</span> <span m='4352660'>universe</span>
  <span m='4353050'>elements.</span> </p><p><span m='4354290'>So</span> <span m='4354520'>if</span>
  <span m='4354700'>we</span> <span m='4354790'>could</span> <span m='4354940'>just</span>
  <span m='4355210'>find</span> <span m='4355450'>a</span> <span m='4355510'>nice</span>
  <span m='4355810'>perfect</span> <span m='4356140'>hash</span> <span m='4356410'>function</span>
  <span m='4357250'>that</span> <span m='4357370'>maps</span> <span m='4357850'>the</span>
  <span m='4357970'>elements</span> <span m='4358270'>of</span> <span m='4358360'>a
  and</span> <span m='4358630'>the</span> <span m='4358720'>elements</span> <span
  m='4359020'>would</span> <span m='4359110'>B</span> <span m='4359230'>to</span>
  <span m='4359350'>different</span> <span m='4359770'>slots</span> <span m='4360190'>in</span>
  <span m='4360280'>some</span> <span m='4360460'>hash</span> <span m='4360700'>table,</span>
  <span m='4360970'>then</span> <span m='4361120'>for</span> <span m='4361270'>every</span>
  <span m='4361450'>slot</span> <span m='4361660'>in</span> <span m='4361750'>the</span>
  <span m='4361810'>hash</span> <span m='4361990'>table</span> <span m='4362200'>we</span>
  <span m='4362260'>could</span> <span m='4362410'>say,</span> <span m='4362980'>is</span>
  <span m='4363160'>it</span> <span m='4363250'>in</span> <span m='4363310'>A,</span>
  <span m='4363550'>or</span> <span m='4363700'>is</span> <span m='4363790'>it</span>
  <span m='4363880'>in</span> <span m='4363970'>B?</span> <span m='4365050'>Now</span>
  <span m='4365320'>if</span> <span m='4365560'>you</span> <span m='4365890'>are</span>
  <span m='4365980'>not</span> <span m='4366340'>in</span> <span m='4366490'>A</span>
  <span m='4366760'>union</span> <span m='4367060'>B</span> <span m='4367780'>and</span>
  <span m='4367960'>you</span> <span m='4368380'>hash</span> <span m='4368740'>somewhere,</span>
  <span m='4369580'>you'll</span> <span m='4369700'>get</span> <span m='4369940'>some</span>
  <span m='4370210'>bit,</span> <span m='4370420'>who</span> <span m='4370540'>knows</span>
  <span m='4370810'>what</span> <span m='4370930'>that</span> <span m='4371110'>that</span>
  <span m='4371260'>stores.</span> <span m='4372260'>I</span> <span m='4372370'>don't</span>
  <span m='4372490'>care.</span> <span m='4373420'>For</span> <span m='4373570'>the</span>
  <span m='4373690'>things</span> <span m='4373900'>outside</span> <span m='4374350'>of</span>
  <span m='4374440'>A</span> <span m='4374680'>union</span> <span m='4374980'>B,</span>
  <span m='4375670'>they</span> <span m='4375790'>could</span> <span m='4375910'>be</span>
  <span m='4376060'>in</span> <span m='4376180'>C</span> <span m='4376510'>or</span>
  <span m='4376600'>not</span> <span m='4376810'>in</span> <span m='4376930'>C,</span>
  <span m='4377200'>I</span> <span m='4377260'>don't</span> <span m='4377440'>really</span>
  <span m='4377650'>care.</span> <span m='4378580'>And</span> <span m='4378700'>so</span>
  <span m='4379540'>all</span> <span m='4379740'>I</span> <span m='4379810'>care</span>
  <span m='4379990'>about</span> <span m='4380170'>is</span> <span m='4380310'>if
  A</span> <span m='4380500'>and</span> <span m='4380770'>B</span> <span m='4381220'>have</span>
  <span m='4381460'>no</span> <span m='4381610'>collisions</span> <span m='4383050'>between</span>
  <span m='4383590'>each</span> <span m='4383770'>other,</span> <span m='4384170'>I</span>
  <span m='4384270'>don't</span> <span m='4384370'>want</span> <span m='4384400'>any</span>
  <span m='4384650'>A</span> <span m='4384830'>thing</span> <span m='4385060'>to</span>
  <span m='4385210'>hash</span> <span m='4385480'>to</span> <span m='4385630'>B</span>
  <span m='4385810'>thing.</span> <span m='4386650'>Then</span> <span m='4386800'>I</span>
  <span m='4386860'>can</span> <span m='4387010'>store</span> <span m='4387280'>a</span>
  <span m='4387310'>bit</span> <span m='4387580'>in</span> <span m='4387730'>every</span>
  <span m='4388120'>cell</span> <span m='4388390'>in</span> <span m='4388450'>the</span>
  <span m='4388540'>hash</span> <span m='4388780'>table,</span> <span m='4389840'>and</span>
  <span m='4390730'>that</span> <span m='4390910'>will</span> <span m='4391840'>tell</span>
  <span m='4392020'>me,</span> <span m='4392140'>in</span> <span m='4392230'>particular,</span>
  <span m='4393340'>A versus</span> <span m='4393760'>B.</span> <span m='4394210'>And</span>
  <span m='4394300'>then</span> <span m='4394450'>the</span> <span m='4394510'>rest</span>
  <span m='4394700'>of</span> <span m='4394740'>the</span> <span m='4394840'>items</span>
  <span m='4395080'>are</span> <span m='4395140'>somehow</span> <span m='4395500'>categorized,</span>
  <span m='4396040'>but</span> <span m='4396190'>I</span> <span m='4396250'>don't</span>
  <span m='4396400'>care</span> <span m='4396610'>how</span> <span m='4396730'>they're</span>
  <span m='4396850'>categorized.</span> </p><p><span m='4398350'>So</span> <span m='4399560'>we're</span>
  <span m='4399700'>going to</span> <span m='4399760'>use</span> <span m='4399940'>this</span>
  <span m='4400090'>fact</span> <span m='4401400'>that</span> <span m='4401560'>there</span>
  <span m='4401710'>is</span> <span m='4402190'>a</span> <span m='4402220'>set</span>
  <span m='4402460'>of</span> <span m='4402640'>perfect</span> <span m='4403000'>hash</span>
  <span m='4403470'>functions</span> <span m='4407028'>of</span> <span m='4407530'>the</span>
  <span m='4407590'>same</span> <span m='4407860'>size.</span> <span m='4414600'>Sorry,</span>
  <span m='4415170'>that</span> <span m='4415340'>should</span> <span m='4415520'>be</span>
  <span m='4415700'>H.</span> <span m='4421450'>This</span> <span m='4421660'>is</span>
  <span m='4421810'>what's</span> <span m='4422440'>really</span> <span m='4422740'>true,</span>
  <span m='4424180'>size</span> <span m='4424930'>of</span> <span m='4425380'>H</span>
  <span m='4425680'>is</span> <span m='4425950'>2</span> <span m='4426070'>the</span>
  <span m='4426250'>order</span> <span m='4427150'>m</span> <span m='4427720'>plus</span>
  <span m='4428080'>log</span> <span m='4428330'>log</span> <span m='4428560'>U.</span>
  <span m='4431090'>OK,</span> <span m='4431560'>I'm</span> <span m='4431650'>not</span>
  <span m='4431740'>going</span> <span m='4431860'>to</span> <span m='4431930'>prove</span>
  <span m='4432160'>this,</span> <span m='4432370'>but</span> <span m='4432490'>this</span>
  <span m='4432670'>is</span> <span m='4432760'>about</span> <span m='4433040'>succinct</span>
  <span m='4433410'>hash</span> <span m='4433660'>functions.</span> <span m='4434250'>It</span>
  <span m='4434680'>may</span> <span m='4434920'>be</span> <span m='4435070'>hard</span>
  <span m='4435220'>to</span> <span m='4435280'>find</span> <span m='4435640'>such</span>
  <span m='4435850'>a</span> <span m='4435880'>hash</span> <span m='4436120'>family,</span>
  <span m='4436450'>but</span> <span m='4436600'>the</span> <span m='4436690'>claim</span>
  <span m='4436900'>is</span> <span m='4437050'>that</span> <span m='4437530'>they</span>
  <span m='4437710'>exist.</span> <span m='4438730'>Or</span> <span m='4439150'>it's</span>
  <span m='4439270'>hard</span> <span m='4439510'>to</span> <span m='4439570'>find</span>
  <span m='4439810'>the</span> <span m='4439900'>hash</span> <span m='4440110'>function</span>
  <span m='4440470'>of the</span> <span m='4440560'>family</span> <span m='4440920'>that</span>
  <span m='4441030'>has</span> <span m='4441190'>no</span> <span m='4441340'>collisions,</span>
  <span m='4442030'>but</span> <span m='4442570'>the</span> <span m='4442660'>guarantee</span>
  <span m='4443200'>is,</span> <span m='4443410'>as</span> <span m='4443500'>long</span>
  <span m='4443740'>as</span> <span m='4443830'>you</span> <span m='4443950'>have,</span>
  <span m='4445900'>in</span> <span m='4446080'>total,</span> <span m='4446470'>two</span>
  <span m='4446920'>items,</span> <span m='4447580'>out</span> <span m='4447730'>of</span>
  <span m='4447850'>your</span> <span m='4448540'>universe</span> <span m='4448900'>of</span>
  <span m='4448960'>size</span> <span m='4449260'>U,</span> <span m='4450640'>you</span>
  <span m='4450850'>can</span> <span m='4451000'>get</span> <span m='4451150'>a</span>
  <span m='4451210'>collision-free</span> <span m='4451990'>hash</span> <span m='4452260'>function,</span>
  <span m='4453160'>2</span> <span m='4453370'>to</span> <span m='4453460'>the</span>
  <span m='4453580'>order</span> <span m='4453850'>m</span> <span m='4454060'>plus</span>
  <span m='4454330'>log</span> <span m='4454570'>log</span> <span m='4454760'>U.</span>
  </p><p><span m='4457450'>OK.</span> <span m='4458080'>So</span> <span m='4458350'>this</span>
  <span m='4458560'>is</span> <span m='4458710'>going</span> <span m='4458860'>to--</span>
  <span m='4460930'>Yeah.</span> <span m='4463840'>Maps,</span> <span m='4465100'>say</span>
  <span m='4465580'>A</span> <span m='4466030'>union</span> <span m='4466330'>B,</span>
  <span m='4467770'>to</span> <span m='4468160'>an</span> <span m='4468310'>order</span>
  <span m='4468640'>m</span> <span m='4469060'>sized</span> <span m='4469540'>table.</span>
  <span m='4474040'>And</span> <span m='4474400'>here,</span> <span m='4474670'>there</span>
  <span m='4474850'>are</span> <span m='4475930'>no</span> <span m='4476170'>collisions.</span>
  <span m='4481570'>So</span> <span m='4481750'>then</span> <span m='4481960'>what</span>
  <span m='4482080'>we</span> <span m='4482290'>also</span> <span m='4482680'>store</span>
  <span m='4484420'>is</span> <span m='4484810'>an</span> <span m='4485020'>A</span>
  <span m='4485230'>or</span> <span m='4485380'>B</span> <span m='4485680'>bit</span>
  <span m='4490060'>for</span> <span m='4490240'>each</span> <span m='4490420'>table</span>
  <span m='4490730'>entry.</span> </p><p></p><p><span m='4502690'>So</span> <span
  m='4502710'>that's</span> <span m='4503250'>our</span> <span m='4503370'>encoding.</span>
  <span m='4503970'>We</span> <span m='4504090'>store</span> <span m='4504540'>a</span>
  <span m='4505560'>perfect</span> <span m='4505860'>hash</span> <span m='4506040'>function,</span>
  <span m='4507580'>that's</span> <span m='4507810'>going</span> <span m='4507960'>to</span>
  <span m='4508020'>cost</span> <span m='4508590'>log</span> <span m='4509190'>H</span>
  <span m='4509490'>bits</span> <span m='4515330'>for</span> <span m='4515730'>this</span>
  <span m='4515910'>part,</span> <span m='4517080'>and</span> <span m='4517260'>log</span>
  <span m='4517470'>of</span> <span m='4517590'>H</span> <span m='4517830'>is</span>
  <span m='4517920'>just</span> <span m='4518190'>m</span> <span m='4518490'>plus</span>
  <span m='4518730'>log</span> <span m='4519000'>log</span> <span m='4519150'>U.</span>
  <span m='4520620'>And</span> <span m='4520860'>then</span> <span m='4520980'>we're</span>
  <span m='4521040'>going</span> <span m='4521160'>to</span> <span m='4521250'>store</span>
  <span m='4521490'>this</span> <span m='4521710'>A</span> <span m='4522050'>or</span>
  <span m='4522390'>B</span> <span m='4523080'>bit</span> <span m='4523410'>for</span>
  <span m='4523590'>every</span> <span m='4523800'>table</span> <span m='4524100'>entry.</span>
  <span m='4525000'>Number</span> <span m='4525210'>of</span> <span m='4525270'>table</span>
  <span m='4525570'>entries</span> <span m='4525930'>is</span> <span m='4526050'>order</span>
  <span m='4526290'>m,</span> <span m='4527070'>so</span> <span m='4527190'>this</span>
  <span m='4527340'>is</span> <span m='4527430'>going</span> <span m='4527580'>to</span>
  <span m='4527640'>take</span> <span m='4527850'>2</span> <span m='4528800'>to</span>
  <span m='4528930'>the</span> <span m='4529050'>order</span> <span m='4529290'>m</span>
  <span m='4532100'>bits.</span> <span m='4533430'>Or</span> <span m='4533820'>sorry,</span>
  <span m='4534000'>not--</span> <span m='4534750'>sorry,</span> <span m='4534990'>in</span>
  <span m='4535590'>term</span> <span m='4535800'>of</span> <span m='4535860'>bits,</span>
  <span m='4536160'>its</span> <span m='4536280'>order</span> <span m='4536490'>m</span>
  <span m='4536760'>bits,</span> <span m='4537060'>I should</span> <span m='4537330'>say.</span>
  </p><p><span m='4540870'>In</span> <span m='4540990'>terms</span> <span m='4541260'>of</span>
  <span m='4541380'>functions,</span> <span m='4542130'>it's</span> <span m='4543590'>2</span>
  <span m='4543960'>to</span> <span m='4544050'>the</span> <span m='4544140'>order</span>
  <span m='4544350'>m</span> <span m='4545100'>possible</span> <span m='4546270'>choices</span>
  <span m='4546780'>for</span> <span m='4546930'>this</span> <span m='4547080'>bit</span>
  <span m='4547260'>vector.</span> <span m='4548520'>And</span> <span m='4548640'>so</span>
  <span m='4549770'>the</span> <span m='4550020'>easy</span> <span m='4550290'>way
  is</span> <span m='4550590'>to</span> <span m='4550680'>just</span> <span m='4551010'>sum</span>
  <span m='4551310'>up</span> <span m='4551460'>these</span> <span m='4551640'>bits,</span>
  <span m='4552360'>you</span> <span m='4552570'>use</span> <span m='4552750'>log</span>
  <span m='4553020'>of</span> <span m='4553120'>H</span> <span m='4553260'>bits</span>
  <span m='4553530'>plus</span> <span m='4553830'>order</span> <span m='4554010'>m</span>
  <span m='4554210'>bits.</span> <span m='4554910'>This</span> <span m='4555090'>already</span>
  <span m='4555300'>had</span> <span m='4555570'>an</span> <span m='4555690'>order</span>
  <span m='4555900'>m</span> <span m='4556080'>term,</span> <span m='4556860'>and</span>
  <span m='4556980'>so</span> <span m='4557100'>you</span> <span m='4557220'>get</span>
  <span m='4557400'>this.</span> <span m='4558000'>The</span> <span m='4558410'>log</span>
  <span m='4558720'>of</span> <span m='4558840'>S</span> <span m='4559670'>is</span>
  <span m='4559800'>order</span> <span m='4559980'>m</span> <span m='4560190'>plus</span>
  <span m='4560440'>log</span> <span m='4560670'>log</span> <span m='4560820'>U.</span>
  <span m='4563880'>So</span> <span m='4564060'>that's</span> <span m='4564510'>the</span>
  <span m='4564690'>end</span> <span m='4564990'>of</span> <span m='4565610'>proof
  sketch of</span> <span m='4566110'>the</span> <span m='4566280'>claim.</span> <span
  m='4566610'>If</span> <span m='4566670'>you</span> <span m='4566760'>believe</span>
  <span m='4567070'>perfect</span> <span m='4567360'>hash</span> <span m='4567570'>functions</span>
  <span m='4568110'>can</span> <span m='4568290'>be</span> <span m='4568410'>written</span>
  <span m='4568710'>down</span> <span m='4569010'>in</span> <span m='4569100'>a</span>
  <span m='4569130'>small</span> <span m='4569430'>way,</span> <span m='4570180'>then</span>
  <span m='4570690'>we're</span> <span m='4570780'>done.</span> </p><p><span m='4572100'>Now</span>
  <span m='4572690'>first</span> <span m='4573120'>with</span> <span m='4573270'>separators,</span>
  <span m='4574260'>now</span> <span m='4574410'>let's</span> <span m='4574560'>apply</span>
  <span m='4574860'>this</span> <span m='4575000'>separator</span> <span m='4576060'>theorem</span>
  <span m='4576570'>claim</span> <span m='4577620'>to</span> <span m='4579120'>this</span>
  <span m='4579290'>setting.</span> <span m='4581280'>So</span> <span m='4581430'>now</span>
  <span m='4581820'>we</span> <span m='4581970'>can</span> <span m='4582120'>compute</span>
  <span m='4582420'>the</span> <span m='4582540'>size</span> <span m='4582870'>of</span>
  <span m='4582960'>our</span> <span m='4583050'>encoding,</span> <span m='4583530'>our</span>
  <span m='4583950'>encoding</span> <span m='4584430'>involved</span> <span m='4584850'>writing</span>
  <span m='4585120'>down</span> <span m='4585360'>r</span> <span m='4585540'>intersect</span>
  <span m='4585930'>w.</span> <span m='4586290'>That</span> <span m='4586470'>takes</span>
  <span m='4586740'>r</span> <span m='4586830'>intersect</span> <span m='4587190'>w</span>
  <span m='4587520'>times</span> <span m='4587820'>log</span> <span m='4588070'>n,</span>
  <span m='4588240'>just</span> <span m='4588450'>like</span> <span m='4588600'>before.</span>
  <span m='4590310'>It</span> <span m='4590520'>also</span> <span m='4591030'>involves</span>
  <span m='4593130'>writing</span> <span m='4593520'>down</span> <span m='4593850'>the</span>
  <span m='4593940'>separator.</span> <span m='4595050'>Separator</span> <span m='4595650'>takes</span>
  <span m='4596070'>order</span> <span m='4596890'>m</span> <span m='4597360'>bits,</span>
  <span m='4597690'>m</span> <span m='4598020'>is</span> <span m='4598500'>r</span>
  <span m='4598710'>plus</span> <span m='4599010'>w.</span> <span m='4600960'>Things</span>
  <span m='4601260'>that</span> <span m='4601380'>are--</span> <span m='4601770'>it's</span>
  <span m='4602120'>order</span> <span m='4602450'>r</span> <span m='4602580'>plus</span>
  <span m='4602820'>w.</span> <span m='4603750'>These</span> <span m='4603930'>are</span>
  <span m='4604050'>all</span> <span m='4604230'>the</span> <span m='4604320'>things--</span>
  <span m='4604740'>I'm</span> <span m='4605120'>trying</span> <span m='4605310'>to</span>
  <span m='4605370'>write</span> <span m='4605520'>down</span> <span m='4605700'>r</span>
  <span m='4605820'>minus</span> <span m='4606090'>w</span> <span m='4606580'>and</span>
  <span m='4606720'>w</span> <span m='4606960'>minus</span> <span m='4607260'>r,</span>
  <span m='4607470'>so</span> <span m='4607620'>that</span> <span m='4608220'>you</span>
  <span m='4608310'>add</span> <span m='4608430'>up</span> <span m='4608550'>those</span>
  <span m='4608670'>sizes,</span> <span m='4609240'>basically</span> <span m='4609700'>r</span>
  <span m='4610090'>plus</span> <span m='4610360'>w.</span> <span m='4611130'>Plus</span>
  <span m='4611400'>log</span> <span m='4611670'>log</span> <span m='4611880'>U.</span>
  <span m='4612600'>U</span> <span m='4613140'>is</span> <span m='4614730'>some</span>
  <span m='4614970'>small</span> <span m='4615300'>thing,</span> <span m='4617010'>size</span>
  <span m='4617640'>of</span> <span m='4617790'>memory,</span> <span m='4619200'>number</span>
  <span m='4619410'>of</span> <span m='4619470'>cells</span> <span m='4619820'>in</span>
  <span m='4619910'>memory.</span> <span m='4620350'>We're</span> <span m='4620370'>assuming</span>
  <span m='4620640'>that</span> <span m='4620800'>polynomials,</span> <span m='4621210'>so</span>
  <span m='4621620'>you</span> <span m='4621690'>take</span> <span m='4621870'>log</span>
  <span m='4622200'>log of a</span> <span m='4622560'>polynomial,</span> <span m='4624960'>that's</span>
  <span m='4625140'>like</span> <span m='4625320'>log</span> <span m='4625530'>log</span>
  <span m='4625740'>n.</span> </p><p><span m='4628270'>So</span> <span m='4629890'>let's</span>
  <span m='4630040'>finish</span> <span m='4630310'>this</span> <span m='4630490'>off.</span>
  <span m='4636250'>So</span> <span m='4636430'>before</span> <span m='4643090'>this</span>
  <span m='4643290'>was</span> <span m='4643390'>our</span> <span m='4643530'>equation,</span>
  <span m='4644090'>r</span> <span m='4644310'>intersect</span> <span m='4644710'>w</span>
  <span m='4645580'>times</span> <span m='4645790'>log</span> <span m='4646040'>n,</span>
  <span m='4646150'>that</span> <span m='4646300'>was</span> <span m='4646450'>the</span>
  <span m='4646510'>size</span> <span m='4646810'>of</span> <span m='4646900'>our</span>
  <span m='4646960'>encoding.</span> <span m='4647920'>We</span> <span m='4648010'>still</span>
  <span m='4648220'>have</span> <span m='4648430'>that</span> <span m='4648680'>term.</span>
  <span m='4654110'>Sorry,</span> <span m='4654640'>r</span> <span m='4655230'>intersect</span>
  <span m='4655670'>w,</span> <span m='4656480'>size</span> <span m='4656840'>of</span>
  <span m='4656920'>that,</span> <span m='4658890'>times</span> <span m='4659420'>log</span>
  <span m='4659840'>n.</span> <span m='4660560'>So</span> <span m='4660920'>we</span>
  <span m='4661110'>still</span> <span m='4661380'>do</span> <span m='4661530'>that.</span>
  <span m='4666600'>Now</span> <span m='4666810'>we</span> <span m='4666960'>also</span>
  <span m='4667380'>pay,</span> <span m='4668430'>for</span> <span m='4669270'>this</span>
  <span m='4669750'>separator,</span> <span m='4670950'>we're</span> <span m='4671040'>going</span>
  <span m='4671160'>to</span> <span m='4671220'>pay</span> <span m='4671760'>r</span>
  <span m='4673050'>plus</span> <span m='4673390'>w,</span> <span m='4675175'>that's</span>
  <span m='4675620'>the</span> <span m='4675800'>m</span> <span m='4676020'>part.</span>
  <span m='4677130'>Plus</span> <span m='4678030'>log</span> <span m='4678360'>log</span>
  <span m='4678640'>n.</span> <span m='4680790'>This</span> <span m='4681030'>is</span>
  <span m='4681270'>the</span> <span m='4681360'>number</span> <span m='4681630'>of</span>
  <span m='4681690'>bits</span> <span m='4682020'>in</span> <span m='4682110'>our</span>
  <span m='4682270'>encoding.</span> <span m='4684180'>And</span> <span m='4684420'>I</span>
  <span m='4684480'>claim,</span> <span m='4685590'>or</span> <span m='4685980'>what</span>
  <span m='4686130'>we've</span> <span m='4686280'>proved</span> <span m='4686760'>over</span>
  <span m='4687030'>here,</span> <span m='4687750'>is</span> <span m='4687920'>that</span>
  <span m='4687990'>any</span> <span m='4688260'>encoding</span> <span m='4689070'>must</span>
  <span m='4689370'>use</span> <span m='4689760'>l</span> <span m='4690030'>root</span>
  <span m='4690300'>n</span> <span m='4690570'>log</span> <span m='4690900'>n</span>
  <span m='4691080'>bits.</span> </p><p><span m='4694340'>So</span> <span m='4694570'>this</span>
  <span m='4694870'>thing</span> <span m='4695620'>must</span> <span m='4695890'>be</span>
  <span m='4696070'>at</span> <span m='4696160'>least</span> <span m='4696490'>this</span>
  <span m='4696730'>thing.</span> <span m='4697040'>So</span> <span m='4697140'>we</span>
  <span m='4697240'>have</span> <span m='4697340'>a</span> <span m='4697440'>little</span>
  <span m='4697510'>bit</span> <span m='4697690'>more</span> <span m='4697900'>work</span>
  <span m='4698110'>to</span> <span m='4698200'>prove.</span> <span m='4699190'>There</span>
  <span m='4699280'>are</span> <span m='4699310'>now</span> <span m='4699490'>two</span>
  <span m='4699670'>cases.</span> <span m='4700870'>It</span> <span m='4700960'>depends--</span>
  <span m='4701440'>there's</span> <span m='4701590'>basically--</span> <span m='4702600'>and</span>
  <span m='4702900'>log</span> <span m='4703190'>log</span> <span m='4703420'>n</span>
  <span m='4703600'>is</span> <span m='4704050'>unlikely</span> <span m='4704530'>to</span>
  <span m='4704650'>dominate.</span> <span m='4705760'>We're</span> <span m='4705850'>doing</span>
  <span m='4706450'>a</span> <span m='4707140'>block</span> <span m='4707440'>operation</span>
  <span m='4707950'>on</span> <span m='4708130'>root</span> <span m='4708270'>n</span>
  <span m='4708550'>things,</span> <span m='4709150'>probably</span> <span m='4709720'>need</span>
  <span m='4709900'>to</span> <span m='4710020'>use</span> <span m='4710230'>at</span>
  <span m='4710320'>least</span> <span m='4710550'>log</span> <span m='4710800'>log</span>
  <span m='4711430'>n</span> <span m='4711670'>steps.</span> <span m='4712480'>So</span>
  <span m='4712690'>it's</span> <span m='4712780'>not</span> <span m='4712930'>really</span>
  <span m='4713110'>relevant.</span> <span m='4714100'>What</span> <span m='4714250'>will</span>
  <span m='4714340'>dominate</span> <span m='4715000'>is</span> <span m='4715540'>either</span>
  <span m='4716410'>this</span> <span m='4716770'>term,</span> <span m='4717640'>as</span>
  <span m='4717820'>it</span> <span m='4717880'>used</span> <span m='4718090'>to,</span>
  <span m='4718930'>or</span> <span m='4719290'>this</span> <span m='4719530'>term.</span>
  <span m='4720500'>These</span> <span m='4720970'>are</span> <span m='4721060'>two</span>
  <span m='4721210'>different</span> <span m='4721450'>cases,</span> <span m='4722050'>call</span>
  <span m='4722200'>them</span> <span m='4722380'>case</span> <span m='4722680'>one,</span>
  <span m='4723520'>case</span> <span m='4723790'>two.</span> </p><p><span m='4724450'>In</span>
  <span m='4724570'>case</span> <span m='4724900'>two,</span> <span m='4725980'>r</span>
  <span m='4726190'>plus</span> <span m='4726460'>w</span> <span m='4727720'>is</span>
  <span m='4727900'>at</span> <span m='4727990'>least</span> <span m='4728320'>l</span>
  <span m='4728530'>root</span> <span m='4728760'>n</span> <span m='4728920'>log</span>
  <span m='4729310'>n.</span> <span m='4730930'>That's</span> <span m='4731350'>the</span>
  <span m='4731500'>lower</span> <span m='4731830'>bound</span> <span m='4732200'>we</span>
  <span m='4732220'>want.</span> <span m='4732810'>If</span> <span m='4732910'>we</span>
  <span m='4733390'>can-- in</span> <span m='4733780'>case</span> <span m='4734080'>two,</span>
  <span m='4736420'>r</span> <span m='4736600'>plus</span> <span m='4736840'>w</span>
  <span m='4738730'>is</span> <span m='4739150'>omega</span> <span m='4740400'>l</span>
  <span m='4740660'>root</span> <span m='4740960'>n</span> <span m='4741280'>log</span>
  <span m='4741590'>n.</span> <span m='4742610'>What</span> <span m='4742630'>that</span>
  <span m='4742810'>means</span> <span m='4743080'>is</span> <span m='4743230'>in</span>
  <span m='4743380'>this</span> <span m='4743530'>subtree,</span> <span m='4744400'>the</span>
  <span m='4744460'>amount</span> <span m='4744640'>of</span> <span m='4744730'>reading</span>
  <span m='4745030'>we</span> <span m='4745120'>did</span> <span m='4745270'>in</span>
  <span m='4745330'>the</span> <span m='4745420'>right</span> <span m='4745600'>subtree,</span>
  <span m='4746290'>plus</span> <span m='4746620'>the</span> <span m='4746710'>amount</span>
  <span m='4746920'>of</span> <span m='4747070'>writing</span> <span m='4747530'>we</span>
  <span m='4747630'>did</span> <span m='4747640'>in</span> <span m='4747700'>the</span>
  <span m='4747760'>left</span> <span m='4747970'>subtree,</span> <span m='4748780'>is</span>
  <span m='4748900'>at</span> <span m='4748990'>least</span> <span m='4749230'>l</span>
  <span m='4749410'>root</span> <span m='4749620'>n</span> <span m='4749800'>log</span>
  <span m='4750130'>n.</span> <span m='4751120'>That's</span> <span m='4751480'>our</span>
  <span m='4751670'>goal</span> <span m='4752260'>over</span> <span m='4752590'>here.</span>
  <span m='4753430'>We</span> <span m='4753610'>want</span> <span m='4753820'>to</span>
  <span m='4753880'>prove--</span> <span m='4755300'>sorry,</span> <span m='4755740'>it's</span>
  <span m='4755950'>a</span> <span m='4756010'>previous</span> <span m='4756400'>claim,</span>
  <span m='4756600'>that's</span> <span m='4757180'>by</span> <span m='4757390'>now</span>
  <span m='4757570'>erased.</span> <span m='4758650'>Is</span> <span m='4758770'>the</span>
  <span m='4758860'>easier</span> <span m='4759190'>claim,</span> <span m='4759670'>we</span>
  <span m='4759760'>just</span> <span m='4759910'>want</span> <span m='4760060'>to</span>
  <span m='4760120'>show</span> <span m='4760630'>that</span> <span m='4760720'>the</span>
  <span m='4760870'>total</span> <span m='4761140'>amount</span> <span m='4761350'>of</span>
  <span m='4761440'>time</span> <span m='4761740'>spent</span> <span m='4762160'>in</span>
  <span m='4762430'>v's</span> <span m='4762640'>subtree</span> <span m='4763900'>is</span>
  <span m='4764170'>at</span> <span m='4764260'>least</span> <span m='4764470'>log</span>
  <span m='4764640'>n</span> <span m='4764890'>per</span> <span m='4765200'>operation.</span>
  <span m='4765550'>We're</span> <span m='4765640'>doing</span> <span m='4765900'>l</span>
  <span m='4766080'>root</span> <span m='4766270'>n</span> <span m='4766450'>things</span>
  <span m='4766720'>here.</span> <span m='4767410'>So</span> <span m='4767530'>this</span>
  <span m='4767710'>is</span> <span m='4767830'>a</span> <span m='4767920'>ton</span>
  <span m='4768160'>of</span> <span m='4768220'>reading</span> <span m='4768520'>and</span>
  <span m='4768610'>writing.</span> <span m='4769880'>So</span> <span m='4769980'>in</span>
  <span m='4770080'>that</span> <span m='4770180'>case,</span> <span m='4770530'>we're</span>
  <span m='4771070'>happy,</span> <span m='4771460'>because</span> <span m='4771910'>we</span>
  <span m='4772000'>get</span> <span m='4772120'>an</span> <span m='4772180'>actual</span>
  <span m='4772540'>lower</span> <span m='4772690'>bound</span> <span m='4772930'>on</span>
  <span m='4773050'>time.</span> </p><p><span m='4773980'>Otherwise,</span> <span
  m='4775840'>we</span> <span m='4776060'>don't--</span> <span m='4776410'>I</span>
  <span m='4776470'>mean,</span> <span m='4776710'>these</span> <span m='4776860'>are</span>
  <span m='4776980'>actual</span> <span m='4777340'>reads</span> <span m='4777520'>and</span>
  <span m='4777610'>writes,</span> <span m='4779160'>or</span> <span m='4779470'>total</span>
  <span m='4779740'>number</span> <span m='4779920'>of</span> <span m='4779980'>reads
  and</span> <span m='4780250'>writes.</span> <span m='4780920'>Here</span> <span
  m='4781370'>we're</span> <span m='4781510'>getting--</span> <span m='4782600'>in</span>
  <span m='4783030'>the</span> <span m='4783100'>other</span> <span m='4783280'>case,</span>
  <span m='4783620'>we</span> <span m='4783640'>get</span> <span m='4783820'>r</span>
  <span m='4784020'>intersect</span> <span m='4784540'>w</span> <span m='4787920'>log</span>
  <span m='4788260'>n</span> <span m='4789480'>is</span> <span m='4789700'>at</span>
  <span m='4789790'>least</span> <span m='4791110'>l</span> <span m='4791350'>root</span>
  <span m='4791560'>n</span> <span m='4791730'>log</span> <span m='4791860'>n,</span>
  <span m='4792500'>just</span> <span m='4792610'>like</span> <span m='4792760'>before.</span>
  <span m='4793960'>So</span> <span m='4793990'>again,</span> <span m='4795010'>the</span>
  <span m='4795110'>log ns</span> <span m='4795550'>cancel.</span> <span m='4797600'>So</span>
  <span m='4797620'>here</span> <span m='4797830'>we</span> <span m='4797950'>lose</span>
  <span m='4798160'>the</span> <span m='4798220'>log</span> <span m='4798380'>n</span>
  <span m='4798610'>factor,</span> <span m='4799750'>but</span> <span m='4799930'>it's</span>
  <span m='4800090'>OK,</span> <span m='4801220'>because</span> <span m='4802000'>this</span>
  <span m='4802210'>is</span> <span m='4802330'>only</span> <span m='4802600'>talking</span>
  <span m='4802870'>about</span> <span m='4802990'>r</span> <span m='4803230'>intersect</span>
  <span m='4803630'>w.</span> <span m='4804350'>This</span> <span m='4804700'>we</span>
  <span m='4804820'>use</span> <span m='4805060'>the</span> <span m='4805180'>LCA</span>
  <span m='4805690'>charging,</span> <span m='4806210'>to</span> <span m='4806250'>say,</span>
  <span m='4806470'>well,</span> <span m='4806650'>if</span> <span m='4806770'>you</span>
  <span m='4806860'>look</span> <span m='4807040'>at</span> <span m='4807100'>a</span>
  <span m='4807160'>particular</span> <span m='4807550'>read,</span> <span m='4807910'>it's</span>
  <span m='4808030'>only</span> <span m='4808270'>gets</span> <span m='4808420'>charged</span>
  <span m='4808690'>by</span> <span m='4808780'>the</span> <span m='4808900'>LCA.</span>
  <span m='4809830'>So</span> <span m='4810040'>then</span> <span m='4810250'>we</span>
  <span m='4810370'>can</span> <span m='4810490'>afford</span> <span m='4810760'>to</span>
  <span m='4810850'>sum</span> <span m='4811120'>up</span> <span m='4811270'>large</span>
  <span m='4811460'>amounts.</span> </p><p><span m='4812140'>So</span> <span m='4812260'>it's</span>
  <span m='4812500'>a</span> <span m='4812560'>little</span> <span m='4812740'>bit</span>
  <span m='4812860'>weird.</span> <span m='4813370'>In</span> <span m='4813490'>this</span>
  <span m='4813610'>situation,</span> <span m='4814120'>we</span> <span m='4814240'>add</span>
  <span m='4814450'>up</span> <span m='4814600'>all</span> <span m='4814720'>the</span>
  <span m='4814810'>lower</span> <span m='4815020'>bounds.</span> <span m='4815650'>Each</span>
  <span m='4815860'>of</span> <span m='4815920'>them</span> <span m='4816070'>doesn't</span>
  <span m='4816310'>give</span> <span m='4816490'>us</span> <span m='4816610'>a</span>
  <span m='4816670'>log</span> <span m='4816790'>n,</span> <span m='4817120'>but</span>
  <span m='4817270'>in</span> <span m='4817390'>aggregate,</span> <span m='4817870'>we</span>
  <span m='4818000'>get</span> <span m='4818140'>a</span> <span m='4818170'>log</span>
  <span m='4818440'>n,</span> <span m='4818560'>because</span> <span m='4818860'>every</span>
  <span m='4819040'>leaf</span> <span m='4819250'>appears</span> <span m='4819580'>in</span>
  <span m='4819670'>log</span> <span m='4819880'>n</span> <span m='4820000'>levels.</span>
  <span m='4821200'>In</span> <span m='4821290'>this</span> <span m='4821440'>case,</span>
  <span m='4821750'>we</span> <span m='4821800'>don't</span> <span m='4821950'>need</span>
  <span m='4822130'>to</span> <span m='4822220'>aggregate,</span> <span m='4822760'>because</span>
  <span m='4823300'>we</span> <span m='4823390'>just</span> <span m='4823540'>say,</span>
  <span m='4823820'>well,</span> <span m='4823900'>the</span> <span m='4823990'>number</span>
  <span m='4824230'>of</span> <span m='4824320'>operations</span> <span m='4824800'>in</span>
  <span m='4824860'>the</span> <span m='4824980'>subtree</span> <span m='4825910'>is</span>
  <span m='4826570'>at</span> <span m='4826660'>least</span> <span m='4826840'>log</span>
  <span m='4827080'>n</span> <span m='4827170'>per</span> <span m='4827485'>operation.</span>
  <span m='4828880'>This</span> <span m='4829120'>time</span> <span m='4829480'>spent,</span>
  <span m='4829780'>cell</span> <span m='4830000'>probe's</span> <span m='4830380'>done,</span>
  <span m='4831040'>is</span> <span m='4831190'>at</span> <span m='4831280'>least</span>
  <span m='4831460'>log</span> <span m='4831760'>n</span> <span m='4831910'>per</span>
  <span m='4832240'>operation.</span> <span m='4833260'>So</span> <span m='4833380'>in</span>
  <span m='4833440'>that</span> <span m='4833530'>case,</span> <span m='4833810'>we</span>
  <span m='4833910'>don't</span> <span m='4833980'>need</span> <span m='4834130'>to</span>
  <span m='4834220'>sum</span> <span m='4834460'>the</span> <span m='4834520'>lower</span>
  <span m='4834730'>bounds,</span> <span m='4835180'>which</span> <span m='4835330'>is</span>
  <span m='4835420'>done.</span> <span m='4836380'>So</span> <span m='4836470'>in</span>
  <span m='4836560'>either</span> <span m='4836740'>case,</span> <span m='4837110'>we're</span>
  <span m='4837130'>happy.</span> </p><p><span m='4838690'>Little</span> <span m='4838930'>weird,</span>
  <span m='4839170'>because</span> <span m='4839350'>you</span> <span m='4839410'>could</span>
  <span m='4839560'>have</span> <span m='4839740'>a</span> <span m='4839800'>mix</span>
  <span m='4840040'>of</span> <span m='4840130'>cases,</span> <span m='4840940'>one</span>
  <span m='4841210'>vertex</span> <span m='4841610'>v</span> <span m='4841840'>could</span>
  <span m='4842020'>be</span> <span m='4842750'>in</span> <span m='4842890'>case</span>
  <span m='4843160'>two,</span> <span m='4844300'>then</span> <span m='4844450'>you</span>
  <span m='4844540'>just</span> <span m='4844720'>ignore</span> <span m='4845080'>all</span>
  <span m='4845210'>the</span> <span m='4845290'>things</span> <span m='4845530'>below</span>
  <span m='4845830'>it.</span> <span m='4846940'>The</span> <span m='4847060'>rest</span>
  <span m='4847360'>of</span> <span m='4847420'>the</span> <span m='4847540'>tree</span>
  <span m='4847900'>might</span> <span m='4848080'>be</span> <span m='4848200'>in</span>
  <span m='4848290'>case</span> <span m='4848560'>one,</span> <span m='4849340'>but</span>
  <span m='4849490'>you</span> <span m='4849610'>can</span> <span m='4849760'>mix</span>
  <span m='4849970'>and</span> <span m='4850060'>match</span> <span m='4850330'>one</span>
  <span m='4850510'>and</span> <span m='4850580'>two,</span> <span m='4850780'>as</span>
  <span m='4850870'>long</span> <span m='4851080'>as</span> <span m='4852310'>you</span>
  <span m='4852490'>don't</span> <span m='4852670'>use</span> <span m='4852910'>a</span>
  <span m='4853060'>one</span> <span m='4853450'>below</span> <span m='4853810'>a</span>
  <span m='4853900'>two,</span> <span m='4854580'>you're</span> <span m='4854860'>OK,</span>
  <span m='4855400'>you</span> <span m='4855500'>won't</span> <span m='4855710'>double</span>
  <span m='4855970'>count.</span> <span m='4856840'>And</span> <span m='4856960'>so</span>
  <span m='4857110'>in</span> <span m='4857170'>either</span> <span m='4857410'>case,</span>
  <span m='4858190'>we're</span> <span m='4858250'>happy,</span> <span m='4858910'>we</span>
  <span m='4859010'>get</span> <span m='4859180'>a</span> <span m='4859210'>log</span>
  <span m='4859510'>n</span> <span m='4859630'>lower</span> <span m='4859840'>bound,</span>
  <span m='4860740'>either</span> <span m='4861040'>on</span> <span m='4861190'>time</span>
  <span m='4861550'>per</span> <span m='4861730'>operation,</span> <span m='4862870'>or</span>
  <span m='4863200'>on</span> <span m='4864310'>this</span> <span m='4864520'>kind</span>
  <span m='4864700'>of</span> <span m='4864790'>time</span> <span m='4865030'>per</span>
  <span m='4865180'>operation.</span> <span m='4866860'>Add</span> <span m='4867010'>up</span>
  <span m='4867130'>all</span> <span m='4867220'>those lower</span> <span m='4867530'>bounds,</span>
  <span m='4867790'>you get</span> <span m='4867970'>log n</span> <span m='4868320'>per</span>
  <span m='4868470'>operation,</span> <span m='4869850'>or</span> <span m='4870370'>get</span>
  <span m='4870490'>root</span> <span m='4870730'>n</span> <span m='4870820'>log</span>
  <span m='4871090'>n</span> <span m='4871270'>per</span> <span m='4871840'>block</span>
  <span m='4872290'>operation,</span> <span m='4872800'>which</span> <span m='4872950'>implies</span>
  <span m='4873370'>log</span> <span m='4873670'>n</span> <span m='4873970'>per</span>
  <span m='4874390'>insert</span> <span m='4874930'>delete</span> <span m='4875290'>edge,</span>
  <span m='4875800'>or</span> <span m='4876510'>connectivity</span> <span m='4877210'>query.</span>
  <span m='4878850'>And</span> <span m='4879070'>that</span> <span m='4879700'>proves</span>
  <span m='4879960'>right</span> <span m='4880120'>there,</span> <span m='4882220'>more</span>
  <span m='4882400'>or</span> <span m='4882430'>less</span> <span m='4882880'>on</span>
  <span m='4883090'>time.</span> </p><p><span m='4883750'>You</span> <span m='4883870'>can</span>
  <span m='4883960'>use</span> <span m='4884110'>the</span> <span m='4884200'>same</span>
  <span m='4884410'>technique</span> <span m='4884770'>to</span> <span m='4884950'>do</span>
  <span m='4885280'>a</span> <span m='4885430'>trade</span> <span m='4885530'>off</span>
  <span m='4885970'>between</span> <span m='4886270'>updates</span> <span m='4886600'>and</span>
  <span m='4886690'>queries.</span> <span m='4887730'>This</span> <span m='4887780'>is</span>
  <span m='4887890'>just</span> <span m='4888040'>log</span> <span m='4888340'>n,</span>
  <span m='4888610'>worst</span> <span m='4888880'>case</span> <span m='4889360'>of</span>
  <span m='4889450'>the</span> <span m='4889590'>two.</span> <span m='4890540'>I</span>
  <span m='4890680'>mentioned</span> <span m='4891160'>what</span> <span m='4891280'>the</span>
  <span m='4891370'>bound</span> <span m='4891750'>was last</span> <span m='4891970'>time.</span>
  <span m='4892750'>Same</span> <span m='4893020'>trick</span> <span m='4893230'>works,</span>
  <span m='4893410'>you</span> <span m='4893500'>just</span> <span m='4893680'>do</span>
  <span m='4894010'>more</span> <span m='4894310'>updates</span> <span m='4894640'>than</span>
  <span m='4894760'>queries,</span> <span m='4895120'>or</span> <span m='4895210'>more</span>
  <span m='4895390'>queries</span> <span m='4895720'>than</span> <span m='4895810'>updates.</span>
  <span m='4896710'>So</span> <span m='4896800'>we</span> <span m='4896860'>get</span>
  <span m='4897040'>link/cut</span> <span m='4897310'>trees</span> <span m='4897580'>are</span>
  <span m='4897670'>optimal,</span> <span m='4898060'>other</span> <span m='4898260'>[?
  tour ?]</span> <span m='4898480'>trees</span> <span m='4898720'>are</span> <span
  m='4898810'>optimal.</span> <span m='4899830'>And</span> <span m='4900160'>we've</span>
  <span m='4900310'>got</span> <span m='4900460'>lots</span> <span m='4900670'>of</span>
  <span m='4900730'>other</span> <span m='4900910'>points</span> <span m='4901210'>on</span>
  <span m='4901300'>the</span> <span m='4901390'>trade off</span> <span m='4901780'>curve,
  as</span> <span m='4902110'>you</span> <span m='4902170'>may</span> <span m='4902290'>recall</span>
  <span m='4903160'>last</span> <span m='4903400'>class.</span> <span m='4903730'>Like</span>
  <span m='4903880'>our</span> <span m='4904000'>log</span> <span m='4904240'>squared</span>
  <span m='4905110'>update</span> <span m='4905500'>is</span> <span m='4905860'>optimal</span>
  <span m='4906310'>for</span> <span m='4906610'>a</span> <span m='4906700'>log</span>
  <span m='4907060'>over</span> <span m='4907270'>log</span> <span m='4907540'>log</span>
  <span m='4907900'>query.</span> </p><p><span m='4910120'>And</span> <span m='4910300'>that's</span>
  <span m='4910540'>the</span> <span m='4910750'>end</span> <span m='4911290'>of</span>
  <span m='4912640'>dynamic</span> <span m='4912940'>graphs,</span> <span m='4913360'>the</span>
  <span m='4913480'>end</span> <span m='4913950'>of</span> <span m='4914240'>advanced</span>
  <span m='4914580'>data</span> <span m='4914920'>structures.</span> <span m='4916780'>Hope</span>
  <span m='4916990'>you</span> <span m='4917110'>had</span> <span m='4917230'>a</span>
  <span m='4917290'>fun</span> <span m='4917470'>time,</span> <span m='4917680'>we</span>
  <span m='4917760'>got</span> <span m='4917890'>to</span> <span m='4917950'>see</span>
  <span m='4918100'>lots</span> <span m='4918340'>of</span> <span m='4918400'>different</span>
  <span m='4918640'>topics.</span> <span m='4919520'>And</span> <span m='4919560'>I</span>
  <span m='4919750'>hope</span> <span m='4919930'>you'll</span> <span m='4920140'>enjoy</span>
  <span m='4920710'>watching</span> <span m='4920965'>on</span> <span m='4921220'>the</span>
  <span m='4921280'>videos,</span> <span m='4921830'>and</span> <span m='4922660'>let</span>
  <span m='4922780'>me</span> <span m='4922870'>know</span> <span m='4922960'>if</span>
  <span m='4923050'>you</span> <span m='4923110'>have</span> <span m='4923200'>any</span>
  <span m='4923350'>comments,</span> <span m='4923680'>send</span> <span m='4924010'>an</span>
  <span m='4924190'>email</span> <span m='4924580'>or</span> <span m='4925090'>whatever.</span>
  <span m='4926890'>Yay.</span> </p><p><span m='4928090'>[APPLAUSE]</span> </p>
type: course
uid: 622cbc1f2c6608986d2eb1dbcd20d44c

---
None