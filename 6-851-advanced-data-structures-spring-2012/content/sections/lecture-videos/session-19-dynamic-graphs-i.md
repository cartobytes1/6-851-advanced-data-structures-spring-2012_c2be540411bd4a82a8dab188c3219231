---
about_this_resource_text: '<p><strong>Description:</strong> Dynamic graphs: Link-cut
  trees, heavy-light decomposition.</p> <p><strong>Speaker:</strong> Prof. Erik Demaine</p>'
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: XZLN6NxEQWo
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Video-YouTube-Stream
  type: Video
  uid: c57e3a454deb0cd6e356ee6396e7504b
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-19-dynamic-graphs-i/id735348884?i=169611761
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Video-iTunes U-MP4
  type: Video
  uid: a63afc4c5dc874cad6680d76f547ad9d
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec19_300k.mp4
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Video-Internet Archive-MP4
  type: Video
  uid: ba1b9052a856f6b9710f0a2fd6d09e19
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/XZLN6NxEQWo/default.jpg
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 7000abaa24eeb0d1a7eebad6716e4a6a
- id: 3Play-3PlayYouTubeid-MP4
  media_location: XZLN6NxEQWo
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 12f9fa1e37337ea70b6779b77494dc9e
- id: XZLN6NxEQWo.srt
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-19-dynamic-graphs-i/XZLN6NxEQWo.srt
  title: 3play caption file
  type: null
  uid: 9f9c12ee4b8c2895ac033fc2093b7eb8
- id: XZLN6NxEQWo.pdf
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-19-dynamic-graphs-i/XZLN6NxEQWo.pdf
  title: 3play pdf file
  type: null
  uid: a47ea8b2dae7c6f8ad577fc30628b4a8
- id: Caption-3Play YouTube id-SRT
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 8344215b9d26f22eac17785c801dac51
- id: Transcript-3Play YouTube id-PDF
  parent_uid: bdd3c2d6fa36678ed0fe88273f37deb3
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 3b481d658fcd724b045d574f7c0c557b
inline_embed_id: 25570725session19:dynamicgraphsi17400386
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-19-dynamic-graphs-i
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-19-dynamic-graphs-i
template_type: Tabbed
title: 'Session 19: Dynamic Graphs I'
transcript: <p><span m='90'>ANNOUNCER:</span> <span m='135'>The</span> <span m='180'>following</span>
  <span m='600'>content</span> <span m='1200'>is</span> <span m='1320'>provided</span>
  <span m='1770'>under</span> <span m='2009'>a</span> <span m='2100'>Creative</span>
  <span m='2490'>Commons</span> <span m='2910'>license.</span> <span m='4059'>Your</span>
  <span m='4200'>support</span> <span m='4710'>will</span> <span m='4860'>help</span>
  <span m='5100'>MIT</span> <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span>
  <span m='6870'>to</span> <span m='6960'>offer</span> <span m='7410'>high</span>
  <span m='7620'>quality</span> <span m='8100'>educational</span> <span m='8730'>resources</span>
  <span m='9360'>for</span> <span m='9510'>free.</span> <span m='10720'>To</span>
  <span m='10740'>make</span> <span m='10920'>a</span> <span m='10980'>donation</span>
  <span m='11730'>or</span> <span m='11940'>view</span> <span m='12390'>additional</span>
  <span m='12810'>materials</span> <span m='13320'>from</span> <span m='13500'>hundreds</span>
  <span m='13920'>of</span> <span m='14040'>MIT</span> <span m='14460'>courses,</span>
  <span m='15550'>visit</span> <span m='15810'>MIT</span> <span m='16200'>OpenCourseWare</span>
  <span m='17280'>at</span> <span m='17430'>ocw@mit.edu</span> </p><p><span m='20790'>PROFESSOR:</span>
  <span m='20925'>So</span> <span m='21060'>today</span> <span m='21540'>we're</span>
  <span m='21660'>going</span> <span m='21810'>to</span> <span m='21870'>cover</span>
  <span m='22230'>a</span> <span m='22290'>data</span> <span m='22530'>structure</span>
  <span m='22860'>called</span> <span m='23040'>link-cut</span> <span m='23540'>trees.</span>
  <span m='24240'>A</span> <span m='24300'>cool</span> <span m='24600'>way</span>
  <span m='24990'>of</span> <span m='25170'>maintaining</span> <span m='25740'>dynamic</span>
  <span m='26280'>trees,</span> <span m='27300'>and</span> <span m='27600'>it</span>
  <span m='27720'>begins</span> <span m='28320'>our</span> <span m='28590'>study</span>
  <span m='28950'>of</span> <span m='29040'>dynamic</span> <span m='29460'>graphs.</span>
  <span m='29910'>Where</span> <span m='30060'>in</span> <span m='30150'>general,</span>
  <span m='30570'>we</span> <span m='30720'>have</span> <span m='30900'>a</span> <span
  m='30960'>graph</span> <span m='31530'>usually</span> <span m='31900'>undirected.</span>
  <span m='32850'>You</span> <span m='32970'>want</span> <span m='33120'>to</span>
  <span m='33210'>support</span> <span m='33810'>insertion</span> <span m='34380'>and</span>
  <span m='34500'>deletion</span> <span m='34890'>of</span> <span m='34980'>edges.</span>
  <span m='35710'>So</span> <span m='35790'>we're</span> <span m='35880'>going</span>
  <span m='36000'>to</span> <span m='36060'>do</span> <span m='36240'>that</span>
  <span m='36870'>in</span> <span m='37050'>the</span> <span m='37140'>situation</span>
  <span m='37770'>where</span> <span m='38310'>at</span> <span m='38430'>all</span>
  <span m='38580'>times</span> <span m='38970'>our</span> <span m='39090'>graphs</span>
  <span m='39480'>are</span> <span m='39660'>trees.</span> <span m='40190'>So in</span>
  <span m='40230'>general,</span> <span m='40460'>we</span> <span m='40680'>have</span>
  <span m='40830'>a</span> <span m='40890'>forest</span> <span m='41340'>of</span>
  <span m='41430'>trees</span> <span m='42420'>and</span> <span m='42600'>we</span>
  <span m='42720'>want</span> <span m='42870'>to</span> <span m='42930'>maintain</span>
  <span m='43350'>them.</span> </p><p><span m='44440'>So</span> <span m='47580'>that</span>
  <span m='47700'>will</span> <span m='47790'>be</span> <span m='47940'>our</span>
  <span m='48240'>only</span> <span m='48510'>data</span> <span m='48690'>structure</span>
  <span m='49020'>today</span> <span m='49350'>because</span> <span m='49530'>it's</span>
  <span m='49740'>a</span> <span m='49800'>bit</span> <span m='49950'>complicated.</span>
  <span m='50520'>It's</span> <span m='50670'>going</span> <span m='50790'>to</span>
  <span m='50880'>need</span> <span m='51090'>some</span> <span m='52110'>fancy</span>
  <span m='52500'>amortization.</span> <span m='53370'>And</span> <span m='53670'>two</span>
  <span m='54210'>techniques</span> <span m='54780'>for</span> <span m='56190'>splitting</span>
  <span m='56610'>trees</span> <span m='56880'>into</span> <span m='57090'>paths,</span>
  <span m='57480'>one</span> <span m='57690'>we've</span> <span m='57840'>seen</span>
  <span m='58200'>already</span> <span m='58650'>in</span> <span m='58740'>the</span>
  <span m='58830'>context</span> <span m='59190'>of</span> <span m='59310'>tango</span>
  <span m='59670'>trees</span> <span m='60060'>and</span> <span m='60150'>lecture's</span>
  <span m='60570'>six,</span> <span m='61650'>preferred</span> <span m='61980'>paths.</span>
  <span m='62550'>And</span> <span m='62710'>another,</span> <span m='63000'>which</span>
  <span m='63150'>we</span> <span m='63270'>haven't</span> <span m='63570'>seen</span>
  <span m='63930'>is</span> <span m='64050'>probably</span> <span m='64410'>my</span>
  <span m='64620'>favorite</span> <span m='65940'>technique</span> <span m='66480'>in</span>
  <span m='66570'>data</span> <span m='66810'>structures,</span> <span m='67200'>actually,</span>
  <span m='67630'>heavy</span> <span m='68010'>like</span> <span m='68220'>decomposition.</span>
  <span m='70170'>The</span> <span m='70290'>technique</span> <span m='70710'>and</span>
  <span m='70800'>data</span> <span m='70980'>structure</span> <span m='71120'>that</span>
  <span m='71300'>I've</span> <span m='71430'>used</span> <span m='71640'>the</span>
  <span m='71760'>most</span> <span m='72180'>outside</span> <span m='72600'>of</span>
  <span m='72690'>data</span> <span m='72900'>structures.</span> <span m='74120'>It's</span>
  <span m='75030'>very</span> <span m='75180'>useful</span> <span m='75480'>in</span>
  <span m='75600'>lots</span> <span m='75840'>of</span> <span m='75900'>settings.</span>
  <span m='76290'>Whenever</span> <span m='76590'>you</span> <span m='76680'>have</span>
  <span m='76860'>an</span> <span m='76950'>unbalanced</span> <span m='77430'>tree</span>
  <span m='77610'>and</span> <span m='77700'>you</span> <span m='77790'>want</span>
  <span m='77940'>to</span> <span m='78000'>make</span> <span m='78180'>it</span>
  <span m='78240'>balance,</span> <span m='79350'>like</span> <span m='79530'>with</span>
  <span m='79650'>like</span> <span m='79830'>cut</span> <span m='80010'>trees,</span>
  <span m='82720'>It's</span> <span m='83040'>the</span> <span m='83130'>go</span>
  <span m='83340'>to</span> <span m='83550'>tool.</span> </p><p><span m='85030'>So,</span>
  <span m='85080'>in,</span> <span m='85170'>general</span> <span m='85680'>we</span>
  <span m='85890'>want</span> <span m='86160'>to</span> <span m='86550'>maintain</span>
  <span m='88360'>a</span> <span m='89000'>forest</span> <span m='89490'>of</span>
  <span m='89610'>trees.</span> <span m='97740'>And</span> <span m='98070'>these</span>
  <span m='98280'>are</span> <span m='98340'>going</span> <span m='98610'>to</span>
  <span m='98760'>be</span> <span m='99180'>rooted</span> <span m='100830'>unordered</span>
  <span m='101240'>trees.</span> <span m='105270'>So</span> <span m='105510'>arbitrary</span>
  <span m='106050'>degree</span> <span m='107130'>I</span> <span m='107330'>this.</span>
  <span m='110700'>And</span> <span m='111240'>we</span> <span m='111420'>have</span>
  <span m='111780'>a</span> <span m='111810'>bunch</span> <span m='112020'>of</span>
  <span m='112110'>operations</span> <span m='112610'>we</span> <span m='112680'>want</span>
  <span m='112830'>to</span> <span m='112890'>do.</span> <span m='113070'>Basically,</span>
  <span m='113520'>insertion</span> <span m='114000'>and</span> <span m='114120'>deletion</span>
  <span m='114510'>of</span> <span m='114750'>edges</span> <span m='115260'>and</span>
  <span m='115470'>some</span> <span m='115650'>queries.</span> <span m='117060'>And</span>
  <span m='117180'>we</span> <span m='117270'>want</span> <span m='117450'>to</span>
  <span m='117540'>do</span> <span m='117780'>all</span> <span m='118140'>of</span>
  <span m='118470'>those</span> <span m='118710'>operations</span> <span m='119340'>in</span>
  <span m='119460'>the</span> <span m='119510'>log n</span> <span m='119960'>time</span>
  <span m='120240'>per</span> <span m='120390'>operation.</span> <span m='124980'>That's</span>
  <span m='125250'>the</span> <span m='125340'>hard</span> <span m='125550'>part.</span>
  </p><p><span m='126780'>So</span> <span m='127950'>we</span> <span m='128100'>have</span>
  <span m='128520'>some</span> <span m='128669'>kind</span> <span m='128880'>of</span>
  <span m='129539'>getting</span> <span m='129810'>started</span> <span m='130229'>operation</span>
  <span m='130800'>make tree.</span> <span m='132360'>This</span> <span m='132540'>is</span>
  <span m='132690'>going</span> <span m='132930'>to</span> <span m='133080'>be</span>
  <span m='133960'>make</span> <span m='134270'>a</span> <span m='134370'>new</span>
  <span m='134520'>vertex</span> <span m='136020'>in</span> <span m='136230'>a</span>
  <span m='136290'>new</span> <span m='136540'>tree,</span> <span m='137100'>return.</span>
  <span m='137430'>It.</span> <span m='138040'>So</span> <span m='138090'>this</span>
  <span m='138270'>is</span> <span m='138390'>how</span> <span m='138510'>you</span>
  <span m='138690'>add</span> <span m='138960'>notes</span> <span m='139290'>to</span>
  <span m='139410'>the</span> <span m='139530'>structure.</span> <span m='140700'>And</span>
  <span m='140850'>we're</span> <span m='141420'>not</span> <span m='141600'>going</span>
  <span m='141720'>to</span> <span m='141810'>worry</span> <span m='141990'>about</span>
  <span m='142230'>doing</span> <span m='142440'>deletions.</span> <span m='143160'>Once</span>
  <span m='143370'>you</span> <span m='143460'>add</span> <span m='143610'>something</span>
  <span m='144000'>it</span> <span m='144090'>stays</span> <span m='144540'>there</span>
  <span m='144660'>forever.</span> <span m='146910'>So</span> <span m='147010'>you</span>
  <span m='147150'>could</span> <span m='147480'>you</span> <span m='147600'>could</span>
  <span m='147720'>do</span> <span m='147840'>that. It's</span> <span m='148230'>no</span>
  <span m='148530'>big</span> <span m='148680'>deal.</span> <span m='149570'>You could</span>
  <span m='149730'>throw</span> <span m='149970'>away</span> <span m='150180'>a</span>
  <span m='150240'>tree.</span> </p><p><span m='151650'>Then</span> <span m='151800'>we</span>
  <span m='151920'>have</span> <span m='152160'>link</span> <span m='152520'>which</span>
  <span m='152730'>is</span> <span m='152820'>essentially</span> <span m='153350'>the</span>
  <span m='153870'>insertion</span> <span m='154500'>of</span> <span m='154680'>an</span>
  <span m='154770'>edge.</span> <span m='155790'>So</span> <span m='156000'>here</span>
  <span m='156840'>we're</span> <span m='156960'>given</span> <span m='157200'>two</span>
  <span m='157410'>vertices</span> <span m='157850'>BMW</span> <span m='159030'>that</span>
  <span m='159180'>are</span> <span m='159270'>in</span> <span m='159600'>different</span>
  <span m='159990'>trees</span> <span m='160900'>as</span> <span m='161070'>a</span>
  <span m='161130'>precondition.</span> <span m='162540'>So</span> <span m='162750'>v</span>
  <span m='164010'>has</span> <span m='164280'>to</span> <span m='164400'>be</span>
  <span m='164530'>at</span> <span m='164580'>the</span> <span m='164700'>root</span>
  <span m='165030'>of</span> <span m='165180'>its</span> <span m='165390'>tree.</span>
  <span m='166590'>W</span> <span m='167010'>can</span> <span m='167220'>be</span>
  <span m='167400'>any</span> <span m='167670'>node.</span> <span m='168870'>So</span>
  <span m='169050'>here</span> <span m='169230'>we</span> <span m='169320'>have</span>
  <span m='169470'>another</span> <span m='169740'>tree</span> <span m='170220'>and</span>
  <span m='170340'>we</span> <span m='170460'>have</span> <span m='170610'>some</span>
  <span m='170880'>node</span> <span m='171060'>w</span> <span m='171570'>inside</span>
  <span m='172140'>v</span> <span m='173580'>And</span> <span m='173970'>the</span>
  <span m='174070'>link</span> <span m='174360'>operation</span> <span m='175770'>adds</span>
  <span m='176190'>V</span> <span m='177030'>as</span> <span m='177210'>a</span> <span
  m='177270'>child</span> <span m='178230'>of</span> <span m='178380'>W.</span> </p><p><span
  m='179760'>So</span> <span m='180090'>we</span> <span m='180240'>add</span> <span
  m='180630'>this</span> <span m='180790'>edge.</span> <span m='183530'>OK,</span>
  <span m='183990'>that,</span> <span m='184140'>of</span> <span m='184230'>course,</span>
  <span m='184440'>combines</span> <span m='184830'>two</span> <span m='184980'>trees</span>
  <span m='185280'>into</span> <span m='185490'>one</span> <span m='185700'>tree.</span>
  <span m='186930'>And</span> <span m='187110'>the</span> <span m='187210'>requirement</span>
  <span m='187520'>is</span> <span m='187830'>BMW</span> <span m='188370'>has</span>
  <span m='188460'>to</span> <span m='188550'>be</span> <span m='188610'>in</span>
  <span m='188670'>different</span> <span m='188940'>trees</span> <span m='189180'>or</span>
  <span m='189240'>otherwise</span> <span m='189570'>you'd</span> <span m='189660'>be</span>
  <span m='189780'>adding</span> <span m='190050'>a</span> <span m='190080'>cycle</span>
  <span m='190620'>that</span> <span m='190830'>doesn't</span> <span m='191580'>satisfy</span>
  <span m='192180'>that</span> <span m='192300'>were</span> <span m='192990'>always</span>
  <span m='193260'>a</span> <span m='193500'>forest</span> <span m='193890'>of</span>
  <span m='193980'>trees.</span> <span m='195710'>Then</span> <span m='195750'>we</span>
  <span m='195870'>have</span> <span m='196110'>a</span> <span m='196170'>cut</span>
  <span m='196530'>operation,</span> <span m='199980'>which</span> <span m='200220'>is</span>
  <span m='200430'>basically</span> <span m='200790'>the</span> <span m='200880'>reverse.</span>
  <span m='203340'>So</span> <span m='203580'>let</span> <span m='203700'>me</span>
  <span m='204790'>draw</span> <span m='205080'>it.</span> <span m='205260'>We</span>
  <span m='205440'>have</span> <span m='206100'>V</span> <span m='207710'>subtree</span>
  <span m='208530'>parent.</span> <span m='210090'>And</span> <span m='210960'>there</span>
  <span m='211390'>is</span> <span m='211580'>a</span> <span m='212130'>whole</span>
  <span m='212370'>tree</span> <span m='212670'>up</span> <span m='212820'>here.</span>
  <span m='216130'>And</span> <span m='216720'>what</span> <span m='216900'>we</span>
  <span m='217050'>want</span> <span m='217200'>to</span> <span m='217290'>do</span>
  <span m='217500'>is</span> <span m='217650'>remove</span> <span m='218310'>that</span>
  <span m='218610'>edge.</span> <span m='220350'>So</span> <span m='220530'>that</span>
  <span m='220740'>splits</span> <span m='221730'>one</span> <span m='221970'>tree</span>
  <span m='222270'>into</span> <span m='222450'>two</span> <span m='222630'>trees</span>
  <span m='222960'>by</span> <span m='223130'>the</span> <span m='223280'>leading</span>
  <span m='223590'>edge</span> <span m='223800'>from</span> <span m='224040'>V</span>
  <span m='224250'>to</span> <span m='224400'>its</span> <span m='224520'>parent.</span>
  </p><p><span m='234800'>OK</span> <span m='235260'>so</span> <span m='235410'>those</span>
  <span m='235730'>are</span> <span m='235900'>our</span> <span m='236190'>updates.</span>
  <span m='237570'>Pretty</span> <span m='237990'>obvious</span> <span m='238500'>in</span>
  <span m='238650'>the</span> <span m='238770'>setting</span> <span m='239100'>of</span>
  <span m='239220'>dynamic</span> <span m='239580'>graphs.</span> <span m='241830'>Of
  course, it's</span> <span m='242140'>the</span> <span m='242230'>first</span> <span
  m='242470'>time</span> <span m='242650'>we</span> <span m='242800'>see</span> <span
  m='242980'>them.</span> <span m='244690'>Now</span> <span m='244900'>we</span> <span
  m='244990'>have</span> <span m='245140'>some</span> <span m='245320'>queries.</span>
  <span m='246070'>There</span> <span m='246220'>are</span> <span m='246250'>lots</span>
  <span m='246580'>of</span> <span m='246640'>different</span> <span m='246940'>queries</span>
  <span m='247270'>that</span> <span m='247590'>cut-trees</span> <span m='248110'>can</span>
  <span m='248320'>support.</span> <span m='249940'>One</span> <span m='250120'>of</span>
  <span m='250280'>the</span> <span m='251380'>most</span> <span m='251620'>basic</span>
  <span m='252040'>is</span> <span m='252280'>find</span> <span m='252730'>the</span>
  <span m='253330'>root</span> <span m='254590'>of</span> <span m='255830'>vertex.</span>
  <span m='258430'>Let</span> <span m='258490'>me</span> <span m='258640'>just</span>
  <span m='258850'>draw</span> <span m='259240'>a</span> <span m='259269'>picture</span>
  <span m='259630'>of.</span> <span m='259750'>It</span> <span m='262029'>you</span>
  <span m='262120'>have</span> <span m='262270'>some</span> <span m='262450'>vertex</span>
  <span m='262860'>V,</span> <span m='264130'>you</span> <span m='264310'>want</span>
  <span m='264460'>to</span> <span m='264580'>return</span> <span m='264940'>the</span>
  <span m='265060'>root</span> <span m='265270'>of</span> <span m='265420'>the</span>
  <span m='265540'>tree.</span> <span m='267360'>So</span> <span m='267550'>find</span>
  <span m='268000'>R.</span> <span m='271270'>And</span> <span m='272120'>that's</span>
  <span m='272360'>pretty</span> <span m='272720'>easy</span> <span m='273080'>to</span>
  <span m='273230'>do.</span> <span m='274160'>Well</span> <span m='274310'>actually</span>
  <span m='274610'>see</span> <span m='275030'>it</span> <span m='275180'>in</span>
  <span m='275480'>next</span> <span m='275870'>class,</span> <span m='277130'>next</span>
  <span m='277340'>lecture,</span> <span m='278570'>if</span> <span m='278690'>you</span>
  <span m='278780'>wanted</span> <span m='278990'>to</span> <span m='279110'>make</span>
  <span m='279320'>tree/link</span> <span m='279770'>cut</span> <span m='280190'>and</span>
  <span m='280340'>find</span> <span m='280670'>root,</span> <span m='280940'>there's</span>
  <span m='281120'>a</span> <span m='281180'>really</span> <span m='281450'>easy</span>
  <span m='281720'>way</span> <span m='281870'>to</span> <span m='282020'>do</span>
  <span m='282140'>them</span> <span m='282470'>in</span> <span m='283310'>logarithmic</span>
  <span m='283820'>time.</span> <span m='284450'>link-cut trees</span> <span m='284600'>is
  a</span> <span m='285170'>harder</span> <span m='285530'>way</span> <span m='285680'>to</span>
  <span m='285800'>do</span> <span m='285920'>it</span> <span m='286010'>in</span>
  <span m='286120'>log n</span> <span m='286470'>time,</span> <span m='287090'>but</span>
  <span m='287300'>they</span> <span m='287570'>support</span> <span m='287990'>a</span>
  <span m='288050'>lot</span> <span m='288260'>of</span> <span m='288350'>other</span>
  <span m='288560'>operations.</span> </p><p><span m='289710'>And</span> <span m='289850'>in</span>
  <span m='289970'>particular,</span> <span m='296190'>something</span> <span m='296470'>called</span>
  <span m='296620'>path</span> <span m='297010'>aggregation.</span> <span m='299020'>This</span>
  <span m='299260'>is</span> <span m='299410'>kind</span> <span m='299680'>of</span>
  <span m='299830'>the</span> <span m='300010'>essence</span> <span m='300400'>of</span>
  <span m='300520'>link/cut</span> <span m='301390'>are</span> <span m='301630'>cool.</span>
  <span m='304420'>Let's</span> <span m='304660'>suppose</span> <span m='305840'>you
  have a</span> <span m='306180'>for</span> <span m='306460'>a</span> <span m='306520'>tree,</span>
  <span m='307790'>you</span> <span m='307950'>have</span> <span m='308080'>a</span>
  <span m='308140'>vertex</span> <span m='308620'>V.</span> <span m='310330'>There's</span>
  <span m='310630'>a</span> <span m='310810'>root</span> <span m='311110'>to</span>
  <span m='311290'>V</span> <span m='311500'>path.</span> <span m='313210'>And</span>
  <span m='313330'>let's</span> <span m='313480'>suppose</span> <span m='313840'>that</span>
  <span m='313930'>every</span> <span m='314320'>node</span> <span m='314830'>or</span>
  <span m='315010'>every</span> <span m='315310'>edge,</span> <span m='315670'>doesn't</span>
  <span m='315850'>matter,</span> <span m='316480'>has</span> <span m='316810'>a</span>
  <span m='316900'>weight</span> <span m='317200'>on</span> <span m='317350'>it.</span>
  <span m='317530'>Just</span> <span m='317680'>some</span> <span m='318010'>real</span>
  <span m='318250'>number.</span> <span m='319700'>Then</span> <span m='319840'>path</span>
  <span m='320110'>aggregation</span> <span m='320800'>can</span> <span m='321070'>do</span>
  <span m='321820'>things</span> <span m='322150'>like</span> <span m='322510'>the</span>
  <span m='322630'>min</span> <span m='323620'>or</span> <span m='323920'>the</span>
  <span m='324040'>max</span> <span m='325210'>or</span> <span m='325510'>the</span>
  <span m='325630'>sum</span> <span m='327850'>or</span> <span m='328030'>the</span>
  <span m='328120'>product</span> <span m='328660'>or</span> <span m='328810'>whatever</span>
  <span m='329650'>of</span> <span m='329890'>weights</span> <span m='331090'>on</span>
  <span m='331270'>that</span> <span m='331450'>path.</span> </p><p><span m='341170'>And</span>
  <span m='341320'>this</span> <span m='341500'>is</span> <span m='341620'>a</span>
  <span m='341680'>powerful</span> <span m='342100'>thing.</span> <span m='342310'>And</span>
  <span m='342400'>it's</span> <span m='342520'>actually</span> <span m='342760'>the</span>
  <span m='342850'>reason</span> <span m='343150'>link/cut</span> <span m='343300'>trees</span>
  <span m='343780'>were</span> <span m='344020'>originally</span> <span m='344410'>invented</span>
  <span m='344920'>for</span> <span m='345250'>doing</span> <span m='345640'>network</span>
  <span m='346000'>flow</span> <span m='346330'>algorithms</span> <span m='346810'>faster.</span>
  <span m='347110'>If</span> <span m='347410'>you</span> <span m='347960'>know</span>
  <span m='348820'>network flow</span> <span m='349110'>algorithms.</span> <span m='349870'>Or</span>
  <span m='349990'>maybe</span> <span m='350200'>you've</span> <span m='350290'>seen</span>
  <span m='350440'>them</span> <span m='350530'>in</span> <span m='350620'>advanced</span>
  <span m='350980'>algorithms.</span> <span m='351560'>This</span> <span m='351640'>is</span>
  <span m='351700'>sort</span> <span m='351910'>of</span> <span m='351970'>the</span>
  <span m='352090'>key</span> <span m='352780'>thing</span> <span m='352930'>you</span>
  <span m='352990'>need</span> <span m='353140'>to</span> <span m='353260'>do.</span>
  <span m='353440'>You</span> <span m='353560'>find,</span> <span m='353890'>I</span>
  <span m='353950'>think,</span> <span m='354190'>min way</span> <span m='354400'>edge</span>
  <span m='356270'>along</span> <span m='357460'>one</span> <span m='357580'>of</span>
  <span m='357640'>these</span> <span m='357820'>paths</span> <span m='358270'>and</span>
  <span m='358360'>that's</span> <span m='358570'>the</span> <span m='358690'>max</span>
  <span m='359260'>you</span> <span m='359470'>can</span> <span m='359650'>push</span>
  <span m='360130'>in a</span> <span m='360250'>push</span> <span m='360490'>reliable</span>
  <span m='360850'>strategy.</span> <span m='361690'>I</span> <span m='361750'>don't</span>
  <span m='361870'>want</span> <span m='361990'>to</span> <span m='362080'>get</span>
  <span m='362200'>into</span> <span m='362380'>that</span> <span m='362500'>because</span>
  <span m='362680'>that's</span> <span m='362980'>algorithms,</span> <span m='363520'>not</span>
  <span m='363670'>data</span> <span m='363910'>structures.</span> <span m='365000'>But</span>
  <span m='365410'>this</span> <span m='365590'>is</span> <span m='365710'>why</span>
  <span m='365890'>they</span> <span m='366010'>were</span> <span m='366100'>invented.</span>
  </p><p><span m='366670'>And,</span> <span m='367750'>in</span> <span m='367900'>general,</span>
  <span m='368770'>link/cut</span> <span m='369130'>trees</span> <span m='369910'>have</span>
  <span m='370150'>a</span> <span m='370210'>very</span> <span m='370450'>strong</span>
  <span m='370990'>kind</span> <span m='371230'>of</span> <span m='371560'>path</span>
  <span m='372460'>thing.</span> <span m='372670'>If</span> <span m='372790'>you</span>
  <span m='372880'>want</span> <span m='373060'>to</span> <span m='373120'>know</span>
  <span m='373210'>anything</span> <span m='373600'>about</span> <span m='374070'>a</span>
  <span m='374160'>root</span> <span m='374360'>to</span> <span m='374550'>the</span>
  <span m='375010'>path</span> <span m='375490'>for</span> <span m='375610'>any</span>
  <span m='375800'>node</span> <span m='376300'>v,</span> <span m='377440'>link-cut</span>
  <span m='378010'>trees can</span> <span m='378190'>do</span> <span m='378460'>whatever</span>
  <span m='378790'>you</span> <span m='378910'>want</span> <span m='379150'>in</span>
  <span m='379230'>lon n</span> <span m='379630'>time.</span> <span m='380030'>This</span>
  <span m='380260'>is</span> <span m='380350'>just</span> <span m='380500'>sort</span>
  <span m='380650'>of</span> <span m='380710'>an</span> <span m='380800'>example</span>
  <span m='381220'>of</span> <span m='381310'>that.</span> <span m='382310'>And</span>
  <span m='383260'>Yeah.</span> <span m='384750'>course.</span> </p><p><span m='385290'>So</span>
  <span m='385420'>that's</span> <span m='385750'>what</span> <span m='386020'>link</span>
  <span m='386230'>countries</span> <span m='386740'>are</span> <span m='386860'>able</span>
  <span m='387070'>to</span> <span m='387160'>do.</span> <span m='387370'>All</span>
  <span m='387520'>these</span> <span m='387670'>operations</span> <span m='388240'>in</span>
  <span m='388360'>log</span> <span m='388510'>n</span> <span m='389290'>And</span>
  <span m='389710'>the</span> <span m='390190'>main</span> <span m='390490'>point</span>
  <span m='390820'>here</span> <span m='391060'>is</span> <span m='391210'>that</span>
  <span m='391330'>the</span> <span m='391450'>trees</span> <span m='391840'>are</span>
  <span m='391930'>storing</span> <span m='392830'>are</span> <span m='392980'>probably</span>
  <span m='393640'>not</span> <span m='393880'>balanced.</span> <span m='394540'>It</span>
  <span m='394630'>could</span> <span m='394750'>be</span> <span m='394900'>a</span>
  <span m='394960'>path,</span> <span m='396920'>could</span> <span m='397100'>be</span>
  <span m='397270'>depth</span> <span m='398120'>and</span> <span m='398830'>is</span>
  <span m='399160'>this</span> <span m='399340'>path</span> <span m='399790'>we're</span>
  <span m='399910'>talking</span> <span m='400210'>about</span> <span m='400420'>could</span>
  <span m='400600'>be</span> <span m='401200'>length</span> <span m='401530'>order</span>
  <span m='401770'>n</span> <span m='402510'>is</span> <span m='403120'>really</span>
  <span m='403450'>bad.</span> <span m='404320'>And</span> <span m='404440'>yet,</span>
  <span m='404650'>we</span> <span m='404770'>can</span> <span m='404890'>do</span>
  <span m='405010'>all</span> <span m='405160'>these</span> <span m='405310'>operations</span>
  <span m='405850'>in</span> <span m='405940'>log</span> <span m='406180'>n</span>
  <span m='406270'>time.</span> <span m='407020'>And</span> <span m='407110'>we're</span>
  <span m='407200'>going</span> <span m='407320'>to</span> <span m='407380'>do</span>
  <span m='407560'>that,</span> <span m='407830'>essentially,</span> <span m='408370'>by</span>
  <span m='408550'>storing</span> <span m='409810'>the</span> <span m='410050'>unbalanced</span>
  <span m='411610'>tree</span> <span m='411970'>that</span> <span m='412120'>you're</span>
  <span m='412240'>trying</span> <span m='412540'>to</span> <span m='412630'>represent,</span>
  <span m='413690'>which</span> <span m='414460'>we</span> <span m='414580'>call</span>
  <span m='414730'>this</span> <span m='414940'>the</span> <span m='415120'>represent</span>
  <span m='415900'>tree.</span> <span m='417010'>We're</span> <span m='417100'>going</span>
  <span m='417220'>to</span> <span m='417730'>store</span> <span m='418210'>it</span>
  <span m='418330'>using,</span> <span m='418840'>essentially,</span> <span m='419320'>a</span>
  <span m='419440'>balanced</span> <span m='419980'>tree.</span> <span m='420430'>In</span>
  <span m='420580'>one</span> <span m='420790'>version</span> <span m='421120'>of</span>
  <span m='421180'>link-cut trees,</span> <span m='421870'>indeed,</span> <span m='422230'>we</span>
  <span m='422350'>store</span> <span m='422710'>all</span> <span m='422890'>the</span>
  <span m='423010'>nodes</span> <span m='423370'>in</span> <span m='423490'>a</span>
  <span m='423550'>log</span> <span m='423970'>n</span> <span m='424610'>height</span>
  <span m='425130'>tree.</span> </p><p><span m='426180'>The</span> <span m='426580'>version</span>
  <span m='426850'>we're</span> <span m='426970'>going</span> <span m='427090'>to</span>
  <span m='427150'>cover</span> <span m='427450'>here--</span> <span m='428380'>there's</span>
  <span m='428620'>several</span> <span m='428950'>versions</span> <span m='429280'>of</span>
  <span m='429470'>link-cut</span> <span m='429710'>trees.</span> <span m='430600'>Original</span>
  <span m='431560'>are</span> <span m='431770'>biased</span> <span m='432160'>later</span>
  <span m='432430'>in</span> <span m='432550'>Tarjan</span> <span m='433600'>in</span>
  <span m='433960'>1983.</span> <span m='435580'>And</span> <span m='435760'>then</span>
  <span m='436180'>Tarjan</span> <span m='436600'>wrote</span> <span m='436780'>a</span>
  <span m='437500'>book,</span> <span m='437830'>one</span> <span m='437920'>of</span>
  <span m='438000'>a</span> <span m='438040'>few</span> <span m='438220'>books</span>
  <span m='438520'>on</span> <span m='438640'>data</span> <span m='438850'>structures.</span>
  <span m='439750'>Very</span> <span m='439930'>thin</span> <span m='440170'>book,</span>
  <span m='440950'>usually</span> <span m='441190'>called</span> <span m='441390'>Tarjan's</span>
  <span m='441810'>little</span> <span m='442030'>book,</span> <span m='442510'>in
  1984.</span> <span m='443980'>And</span> <span m='444130'>it</span> <span m='444250'>has</span>
  <span m='444520'>a</span> <span m='444580'>different</span> <span m='444970'>version</span>
  <span m='445240'>of</span> <span m='445330'>link-cut</span> <span m='445860'>trees,</span>
  <span m='446160'>and</span> <span m='446290'>that's</span> <span m='446500'>the</span>
  <span m='446590'>version</span> <span m='446860'>we're</span> <span m='446920'>going</span>
  <span m='447030'>to</span> <span m='447130'>cover</span> <span m='447470'>it</span>
  <span m='447550'>uses</span> <span m='447850'>splay</span> <span m='448150'>trees</span>
  <span m='449050'>as</span> <span m='449170'>a</span> <span m='449230'>subroutine.</span>
  <span m='449710'>So</span> <span m='449800'>it's</span> <span m='449920'>not</span>
  <span m='450040'>going</span> <span m='450160'>to</span> <span m='450250'>be</span>
  <span m='450400'>perfectly</span> <span m='450880'>balanced.</span> <span m='451400'>It's</span>
  <span m='451420'>going</span> <span m='451570'>to</span> <span m='451660'>be</span>
  <span m='452560'>balanced</span> <span m='452950'>in</span> <span m='453040'>an</span>
  <span m='453130'>amortize</span> <span m='453610'>sense,</span> <span m='453930'>or</span>
  <span m='454240'>vaguely</span> <span m='454600'>balanced,</span> <span m='455620'>roughly</span>
  <span m='455890'>balanced,</span> <span m='456320'>whatever.</span> <span m='458320'>But</span>
  <span m='458530'>there</span> <span m='458680'>is</span> <span m='458860'>a</span>
  <span m='458950'>version</span> <span m='459340'>that</span> <span m='459460'>does</span>
  <span m='459730'>everything</span> <span m='460120'>in</span> <span m='460210'>log</span>
  <span m='460380'>n</span> <span m='460570'>worse</span> <span m='460810'>case</span>
  <span m='461530'>pre-operation.</span> <span m='462130'>If</span> <span m='462440'>there's</span>
  <span m='462700'>time,</span> <span m='463000'>I'll</span> <span m='463600'>sketch</span>
  <span m='463990'>that</span> <span m='464140'>for</span> <span m='464320'>you</span>
  <span m='464470'>at</span> <span m='464560'>the</span> <span m='464710'>end.</span>
  </p><p><span m='465850'>But</span> <span m='466900'>the</span> <span m='467020'>simplest</span>
  <span m='467410'>version</span> <span m='467800'>I</span> <span m='467890'>know</span>
  <span m='468160'>is</span> <span m='468310'>this</span> <span m='468470'>splay</span>
  <span m='468700'>tree</span> <span m='469330'>version.</span> <span m='470260'>And</span>
  <span m='470890'>it's</span> <span m='471040'>also</span> <span m='471310'>kind</span>
  <span m='471550'>of</span> <span m='471670'>fun</span> <span m='472030'>because</span>
  <span m='472600'>the</span> <span m='473060'>version</span> <span m='473350'>we'll</span>
  <span m='473470'>see,</span> <span m='475120'>doesn't</span> <span m='475420'>really</span>
  <span m='475660'>look</span> <span m='475870'>like</span> <span m='476050'>it</span>
  <span m='476140'>should</span> <span m='476320'>work,</span> <span m='476950'>and</span>
  <span m='477100'>yet</span> <span m='477250'>it</span> <span m='477340'>does</span>
  <span m='478690'>thanks</span> <span m='478990'>to</span> <span m='479110'>splay</span>
  <span m='479410'>trees,</span> <span m='479710'>essentially.</span> <span m='481550'>So</span>
  <span m='481630'>it's</span> <span m='481780'>a</span> <span m='481840'>little,</span>
  <span m='482290'>it's</span> <span m='482500'>fun</span> <span m='482740'>and</span>
  <span m='482830'>surprising</span> <span m='483370'>in</span> <span m='483460'>that</span>
  <span m='483610'>sense.</span> <span m='495610'>As</span> <span m='495690'>I</span>
  <span m='495760'>said,</span> <span m='496200'>link-cut</span> <span m='496380'>trees</span>
  <span m='496920'>are</span> <span m='497040'>all</span> <span m='497160'>about</span>
  <span m='498540'>paths</span> <span m='499050'>in</span> <span m='499200'>the</span>
  <span m='499290'>tree.</span> <span m='500230'>And</span> <span m='500250'>so</span>
  <span m='500370'>somehow</span> <span m='500700'>we</span> <span m='500820'>want</span>
  <span m='500970'>to</span> <span m='501030'>split</span> <span m='501270'>a</span>
  <span m='501330'>tree</span> <span m='501630'>up</span> <span m='501750'>into</span>
  <span m='501960'>paths</span> <span m='502380'>and</span> <span m='502470'>we've</span>
  <span m='502620'>already</span> <span m='502860'>seen</span> <span m='503070'>a</span>
  <span m='503130'>way</span> <span m='503310'>to</span> <span m='503430'>do</span>
  <span m='503550'>this.</span> <span m='504210'>The</span> <span m='504300'>preferred</span>
  <span m='504630'>path</span> <span m='504900'>decomposition.</span> <span m='506290'>So</span>
  <span m='508250'>it's</span> <span m='508530'>kind</span> <span m='508830'>of</span>
  <span m='508920'>reminding</span> <span m='509430'>you,</span> <span m='509520'>but</span>
  <span m='509640'>I'm</span> <span m='509760'>also</span> <span m='509970'>going</span>
  <span m='510090'>to</span> <span m='510150'>slightly</span> <span m='510660'>redefine</span>
  <span m='511170'>it,</span> <span m='511560'>if</span> <span m='511740'>I</span>
  <span m='511830'>recall</span> <span m='512159'>correctly.</span> <span m='513230'>It's</span>
  <span m='513330'>just</span> <span m='513510'>a</span> <span m='513570'>minor</span>
  <span m='517200'>difference</span> <span m='518099'>which I can</span> <span m='518429'>talk</span>
  <span m='518669'>about</span> <span m='518880'>a</span> <span m='518940'>second.</span>
  </p><p><span m='519669'>The</span> <span m='519780'>notion</span> <span m='520080'>of</span>
  <span m='520169'>a</span> <span m='520230'>preferred</span> <span m='520710'>child</span>
  <span m='521220'>of</span> <span m='521309'>a</span> <span m='521370'>node,</span>
  <span m='522480'>and</span> <span m='522809'>it's</span> <span m='522900'>going</span>
  <span m='523000'>to</span> <span m='523110'>be</span> <span m='523260'>two</span>
  <span m='523500'>cases.</span> <span m='527770'>There isn't</span> <span m='528080'>a</span>
  <span m='528180'>preferred</span> <span m='528540'>child,</span> <span m='529350'>if</span>
  <span m='529680'>the</span> <span m='529800'>last</span> <span m='530280'>access</span>
  <span m='533960'>in</span> <span m='535290'>these</span> <span m='535860'>subtree</span>
  <span m='538890'>is</span> <span m='539220'>v.</span> <span m='541440'>So</span>
  <span m='541650'>we</span> <span m='541770'>have</span> <span m='541950'>some</span>
  <span m='542640'>node</span> <span m='542940'>v.</span> <span m='543920'>Now,</span>
  <span m='544020'>this</span> <span m='544230'>is</span> <span m='544320'>relative</span>
  <span m='544800'>to</span> <span m='544950'>the</span> <span m='545160'>represented</span>
  <span m='545850'>tree.</span> <span m='547430'>So</span> <span m='547530'>we</span>
  <span m='547650'>have</span> <span m='547830'>some</span> <span m='548040'>node</span>
  <span m='548280'>to v.</span> <span m='549150'>We</span> <span m='549270'>don't</span>
  <span m='549450'>care</span> <span m='549600'>about</span> <span m='549780'>accesses</span>
  <span m='550260'>outside</span> <span m='550770'>of</span> <span m='550860'>that</span>
  <span m='551020'>subtree,</span> <span m='551800'>but</span> <span m='551940'>of</span>
  <span m='552030'>the</span> <span m='552120'>last</span> <span m='552540'>access</span>
  <span m='553080'>within</span> <span m='553350'>the</span> <span m='553640'>subtree</span>
  <span m='553830'>was v</span> <span m='554140'>itself,</span> <span m='555630'>then</span>
  <span m='555960'>there's</span> <span m='556110'>no</span> <span m='556290'>preferred</span>
  <span m='556590'>child.</span> <span m='557730'>Otherwise,</span> <span m='558450'>the</span>
  <span m='558840'>last</span> <span m='559140'>access</span> <span m='559470'>within</span>
  <span m='559710'>the</span> <span m='559960'>tree</span> <span m='560220'>was</span>
  <span m='560460'>in</span> <span m='560610'>one</span> <span m='560880'>of</span>
  <span m='561030'>these</span> <span m='561810'>child</span> <span m='562140'>subtrees.</span>
  <span m='562900'>And</span> <span m='562980'>whichever</span> <span m='563370'>one</span>
  <span m='563490'>it</span> <span m='563580'>was,</span> <span m='564015'>we</span>
  <span m='564450'>say</span> <span m='564580'>w</span> <span m='565020'>is</span>
  <span m='565140'>the</span> <span m='565230'>preferred</span> <span m='565590'>child.</span>
  <span m='569020'>So</span> <span m='569180'>if</span> <span m='569390'>the</span>
  <span m='569480'>last</span> <span m='569810'>access</span> <span m='570190'>in
  v</span> <span m='570530'>subtree</span> <span m='574370'>is</span> <span m='574710'>in</span>
  <span m='577670'>child</span> <span m='578070'>w's</span> <span m='582320'>subtree.</span>
  </p><p><span m='585430'>OK,</span> <span m='585710'>I</span> <span m='585770'>think</span>
  <span m='586010'>last</span> <span m='586250'>time</span> <span m='586520'>we</span>
  <span m='586610'>defined</span> <span m='586940'>preferred</span> <span m='587270'>children</span>
  <span m='587630'>in</span> <span m='587690'>the</span> <span m='587810'>context</span>
  <span m='588200'>of</span> <span m='588290'>tango</span> <span m='588620'>trees,</span>
  <span m='589070'>we</span> <span m='589190'>just</span> <span m='589460'>had</span>
  <span m='589580'>the</span> <span m='589670'>second</span> <span m='590030'>part.</span>
  <span m='590930'>So</span> <span m='591110'>if</span> <span m='591200'>there</span>
  <span m='591310'>is</span> <span m='591410'>an</span> <span m='591470'>access</span>
  <span m='591770'>to</span> <span m='591890'>v,</span> <span m='592070'>we</span>
  <span m='592790'>ignored</span> <span m='593240'>it</span> <span m='593330'>and</span>
  <span m='593420'>we</span> <span m='593510'>just</span> <span m='593810'>consider</span>
  <span m='594200'>what</span> <span m='594320'>the</span> <span m='594410'>last</span>
  <span m='594740'>child</span> <span m='595100'>access.</span> <span m='595460'>Was</span>
  <span m='596300'>I</span> <span m='596360'>don't</span> <span m='596540'>think</span>
  <span m='596750'>there's</span> <span m='596900'>actually</span> <span m='597470'>would</span>
  <span m='597650'>affect</span> <span m='597980'>tango</span> <span m='598340'>trees,</span>
  <span m='598700'>but</span> <span m='598820'>I</span> <span m='598910'>think</span>
  <span m='599120'>it</span> <span m='599210'>does</span> <span m='599390'>effect</span>
  <span m='599660'>Link-cut</span> <span m='600120'>trees.</span> <span m='600440'>So
  I</span> <span m='600500'>want</span> <span m='600650'>to</span> <span m='600710'>define</span>
  <span m='601070'>it</span> <span m='601670'>this</span> <span m='601850'>way.</span>
  <span m='602180'>It'll</span> <span m='602390'>make</span> <span m='602660'>life</span>
  <span m='602930'>cleaner,</span> <span m='603470'>basically.</span> <span m='605390'>Probably</span>
  <span m='605690'>not</span> <span m='605870'>a</span> <span m='605930'>huge</span>
  <span m='606260'>difference</span> <span m='606590'>either</span> <span m='606800'>way.</span>
  </p><p><span m='608210'>OK,</span> <span m='608420'>once</span> <span m='608630'>you</span>
  <span m='608720'>have</span> <span m='608840'>preferred</span> <span m='609290'>children,</span>
  <span m='609980'>that</span> <span m='610190'>gives</span> <span m='610460'>you</span>
  <span m='611120'>one</span> <span m='611590'>outgoing</span> <span m='611960'>edge,</span>
  <span m='612500'>downward</span> <span m='612950'>edge,</span> <span m='613250'>from</span>
  <span m='613520'>every</span> <span m='614300'>node.</span> <span m='614720'>And</span>
  <span m='614840'>so</span> <span m='615020'>we</span> <span m='615170'>get</span>
  <span m='616010'>preferred</span> <span m='616400'>paths</span> <span m='620420'>by</span>
  <span m='620630'>repeatedly</span> <span m='621170'>following</span> <span m='621620'>preferred</span>
  <span m='621920'>child</span> <span m='622220'>pointers.</span> <span m='623090'>Now,</span>
  <span m='623480'>we</span> <span m='623630'>may</span> <span m='623840'>stop</span>
  <span m='624290'>at</span> <span m='624380'>some</span> <span m='624590'>point</span>
  <span m='624890'>because</span> <span m='625250'>we</span> <span m='625370'>reach</span>
  <span m='625670'>a</span> <span m='625740'>none.</span> <span m='627250'>I'm</span>
  <span m='627740'>going</span> <span m='627860'>to</span> <span m='628010'>use</span>
  <span m='628190'>none</span> <span m='628460'>as</span> <span m='628580'>like</span>
  <span m='628760'>null</span> <span m='628940'>pointers</span> <span m='629360'>in</span>
  <span m='629450'>this</span> <span m='629690'>lecture.</span> </p><p><span m='631610'>But,</span>
  <span m='631880'>in</span> <span m='632180'>general,</span> <span m='632510'>we</span>
  <span m='632600'>have</span> <span m='632750'>some</span> <span m='632960'>tree</span>
  <span m='633260'>and</span> <span m='633510'>you</span> <span m='633800'>follow</span>
  <span m='634220'>for</span> <span m='634370'>a</span> <span m='634400'>while</span>
  <span m='634910'>and</span> <span m='635000'>then</span> <span m='635440'>it's</span>
  <span m='635590'>going</span> <span m='635710'>to</span> <span m='635810'>be</span>
  <span m='637170'>a</span> <span m='637280'>bunch</span> <span m='637520'>of</span>
  <span m='637580'>things</span> <span m='637820'>like</span> <span m='638000'>this.</span>
  <span m='638450'>We</span> <span m='638720'>decompose</span> <span m='644840'>the</span>
  <span m='644930'>nodes</span> <span m='646790'>and</span> <span m='647000'>the</span>
  <span m='647120'>represented</span> <span m='647370'>tree,</span> <span m='649430'>partition</span>
  <span m='649910'>the</span> <span m='650020'>nodes.</span> <span m='654350'>Every</span>
  <span m='654650'>node</span> <span m='655140'>belongs</span> <span m='655550'>to</span>
  <span m='655610'>some</span> <span m='655820'>preferred</span> <span m='656150'>path.</span>
  <span m='657110'>So</span> <span m='658820'>basic</span> <span m='659180'>idea</span>
  <span m='659440'>is</span> <span m='659600'>we're</span> <span m='659690'>going</span>
  <span m='659810'>to</span> <span m='659870'>store</span> <span m='660290'>the</span>
  <span m='660410'>preferred</span> <span m='660770'>paths</span> <span m='661880'>in</span>
  <span m='662840'>kind</span> <span m='663140'>of</span> <span m='663260'>balanced</span>
  <span m='663860'>binary</span> <span m='664160'>search</span> <span m='664400'>trees,</span>
  <span m='664550'>splay</span> <span m='664820'>trees,</span> <span m='665720'>and</span>
  <span m='665810'>then</span> <span m='665900'>we're</span> <span m='665960'>going</span>
  <span m='666080'>to</span> <span m='666140'>connect</span> <span m='666410'>them</span>
  <span m='666560'>together</span> <span m='666980'>because</span> <span m='668060'>that's</span>
  <span m='668330'>not</span> <span m='668480'>all</span> <span m='668690'>the</span>
  <span m='668840'>edges</span> <span m='669080'>in</span> <span m='669170'>the</span>
  <span m='669260'>tree.</span> </p><p><span m='670770'>There's</span> <span m='674060'>some</span>
  <span m='674360'>edges</span> <span m='674630'>that</span> <span m='674840'>sort</span>
  <span m='674990'>of</span> <span m='675080'>connect</span> <span m='675350'>them,</span>
  <span m='675810'>connect</span> <span m='676130'>the</span> <span m='676220'>paths</span>
  <span m='676520'>together.</span> <span m='676970'>That's</span> <span m='677240'>where</span>
  <span m='677360'>the</span> <span m='677480'>tree</span> <span m='677690'>part</span>
  <span m='677960'>comes</span> <span m='678230'>in.</span> <span m='679670'>That's</span>
  <span m='680360'>what</span> <span m='680570'>we're</span> <span m='680690'>going</span>
  <span m='680830'>to</span> <span m='680900'>do</span> <span m='681130'>it</span>
  <span m='681590'>this</span> <span m='681860'>thing</span> <span m='682070'>is</span>
  <span m='682310'>unbalanced.</span> <span m='682700'>We're</span> <span m='682760'>going</span>
  <span m='682880'>to</span> <span m='682940'>take</span> <span m='683150'>each</span>
  <span m='683300'>of</span> <span m='683360'>these</span> <span m='683540'>white</span>
  <span m='684350'>lines</span> <span m='685190'>and</span> <span m='685280'>compress</span>
  <span m='685730'>it</span> <span m='685850'>into</span> <span m='686180'>a</span>
  <span m='686240'>splay</span> <span m='686510'>tree,</span> <span m='688190'>and</span>
  <span m='688310'>preserve</span> <span m='688730'>the</span> <span m='688820'>red</span>
  <span m='689140'>pointers.</span> <span m='693721'>I'll</span> <span m='694180'>write</span>
  <span m='694390'>that</span> <span m='694570'>down.</span> </p><p><span m='697090'>These</span>
  <span m='697330'>are</span> <span m='697420'>called</span> <span m='697900'>auxiliary</span>
  <span m='698410'>trees.</span> <span m='701350'>This</span> <span m='701560'>was</span>
  <span m='701830'>exactly</span> <span m='702280'>the</span> <span m='702370'>idea</span>
  <span m='702610'>and</span> <span m='702780'>tango</span> <span m='703060'>trace</span>
  <span m='704760'>and</span> <span m='704950'>I'm</span> <span m='705070'>using</span>
  <span m='705460'>tango</span> <span m='705790'>tree</span> <span m='706000'>terminology</span>
  <span m='708310'>to</span> <span m='708490'>keep</span> <span m='708790'>it</span>
  <span m='708910'>consistent</span> <span m='709360'>with</span> <span m='709480'>that</span>
  <span m='709630'>notation.</span> <span m='710880'>It</span> <span m='710950'>wasn't</span>
  <span m='711190'>called</span> <span m='711430'>preferred</span> <span m='711760'>paths</span>
  <span m='712750'>in</span> <span m='713290'>the</span> <span m='713350'>link-cut</span>
  <span m='713530'>tree</span> <span m='713890'>papers.</span> <span m='714700'>Or
  it</span> <span m='714760'>wasn't</span> <span m='715000'>called</span> <span m='715150'>auxiliary</span>
  <span m='715570'>trees,</span> <span m='715870'>but</span> <span m='716860'>same</span>
  <span m='717100'>difference.</span> <span m='718270'>So</span> <span m='718450'>auxiliary</span>
  <span m='718870'>trees</span> <span m='719230'>were</span> <span m='719320'>going</span>
  <span m='719410'>to</span> <span m='719550'>store</span> <span m='721500'>represent</span>
  <span m='726310'>each</span> <span m='726550'>preferred</span> <span m='726940'>path</span>
  <span m='733180'>by</span> <span m='733330'>a</span> <span m='733360'>splay</span>
  <span m='733690'>tree.</span> <span m='736380'>Tango</span> <span m='736810'>trees</span>
  <span m='737230'>we</span> <span m='737320'>use</span> <span m='738160'>red-black</span>
  <span m='738580'>trees</span> <span m='738970'>or</span> <span m='739030'>whatever.</span>
  </p><p><span m='741190'>Could</span> <span m='741430'>us</span> <span m='741580'>splay</span>
  <span m='741880'>trees,</span> <span m='742150'>actually,</span> <span m='742430'>if
  you use</span> <span m='742780'>tango</span> <span m='743140'>trees</span> <span
  m='743650'>with</span> <span m='744060'>splay</span> <span m='744400'>trees</span>
  <span m='744700'>for</span> <span m='744820'>each</span> <span m='744970'>preferred</span>
  <span m='745300'>path.</span> <span m='745540'>It's</span> <span m='745660'>called</span>
  <span m='745890'>a</span> <span m='745960'>multi-splay</span> <span m='746590'>tree.</span>
  <span m='747650'>Multi-splay</span> <span m='748270'>trees</span> <span m='748540'>are</span>
  <span m='748690'>almost</span> <span m='749140'>identical</span> <span m='749770'>to</span>
  <span m='750340'>link-cut</span> <span m='750670'>trees</span> <span m='751030'>but,</span>
  <span m='751180'>they're</span> <span m='751300'>used</span> <span m='751540'>for</span>
  <span m='751780'>a</span> <span m='752170'>different</span> <span m='752470'>setting.</span>
  <span m='752770'>The</span> <span m='753270'>use</span> <span m='753490'>for</span>
  <span m='754600'>proving</span> <span m='755510'>log</span> <span m='755830'>n</span>
  <span m='755950'>competitiveness.</span> <span m='757380'>Here</span> <span m='757630'>we're</span>
  <span m='758020'>doing</span> <span m='758290'>it</span> <span m='758350'>to</span>
  <span m='758470'>represent</span> <span m='758950'>a</span> <span m='759010'>specific</span>
  <span m='759610'>tree.</span> <span m='760210'>With</span> <span m='760330'>tango</span>
  <span m='760690'>trees,</span> <span m='761920'>the</span> <span m='762220'>tree</span>
  <span m='762460'>we're</span> <span m='762640'>representing</span> <span m='763420'>was</span>
  <span m='763570'>just</span> <span m='763780'>a</span> <span m='763840'>perfect</span>
  <span m='764230'>binary</span> <span m='764620'>tree,</span> <span m='764905'>p.</span>
  <span m='765190'>So</span> <span m='765290'>you</span> <span m='765390'>may</span>
  <span m='765490'>recall,</span> <span m='766780'>here</span> <span m='767590'>it</span>
  <span m='767770'>has</span> <span m='767950'>some</span> <span m='768100'>meaning.</span>
  <span m='768490'>And</span> <span m='768580'>it's</span> <span m='768670'>going</span>
  <span m='768790'>to</span> <span m='768880'>be</span> <span m='768970'>changing,</span>
  <span m='769510'>and</span> <span m='769600'>we</span> <span m='769720'>care</span>
  <span m='769960'>about</span> <span m='770200'>how</span> <span m='770410'>it's</span>
  <span m='770530'>changing.</span> </p><p><span m='773060'>OK,</span> <span m='773890'>another</span>
  <span m='774160'>difference</span> <span m='774790'>is</span> <span m='775120'>we're</span>
  <span m='775300'>going</span> <span m='775600'>to</span> <span m='775850'>key</span>
  <span m='776210'>the</span> <span m='776380'>nodes</span> <span m='777520'>by</span>
  <span m='777760'>depth.</span> <span m='779290'>This</span> <span m='779470'>is</span>
  <span m='779590'>what</span> <span m='779740'>we</span> <span m='779920'>wanted</span>
  <span m='780280'>to</span> <span m='780430'>do</span> <span m='780760'>with</span>
  <span m='782440'>tango</span> <span m='782740'>trees,</span> <span m='783040'>but</span>
  <span m='783160'>we</span> <span m='783280'>weren't</span> <span m='783460'>allowed</span>
  <span m='783760'>to</span> <span m='783970'>because</span> <span m='784210'>we</span>
  <span m='784330'>had</span> <span m='784510'>to</span> <span m='784570'>be</span>
  <span m='784690'>a</span> <span m='784750'>binary</span> <span m='785050'>search</span>
  <span m='785290'>trees.</span> <span m='785560'>And</span> <span m='785650'>the</span>
  <span m='785740'>keys</span> <span m='785950'>were</span> <span m='786040'>given</span>
  <span m='786310'>to</span> <span m='786460'>us.</span> <span m='787420'>Here,</span>
  <span m='787660'>there</span> <span m='787810'>are</span> <span m='787870'>no</span>
  <span m='788050'>keys.</span> <span m='788650'>So</span> <span m='789310'>we</span>
  <span m='789430'>need</span> <span m='789580'>to</span> <span m='789670'>specify</span>
  <span m='790120'>them</span> <span m='790360'>and</span> <span m='790510'>the</span>
  <span m='790570'>most</span> <span m='790780'>convenient</span> <span m='791170'>one</span>
  <span m='791320'>is</span> <span m='791440'>by</span> <span m='791590'>depth.</span>
  <span m='792530'>So</span> <span m='792580'>we're</span> <span m='792690'>just</span>
  <span m='792850'>taking</span> <span m='793690'>a</span> <span m='793720'>path</span>
  <span m='794350'>like</span> <span m='794560'>this,</span> <span m='796990'>0,</span>
  <span m='797450'>1,</span> <span m='797840'>2,</span> <span m='798650'>3</span>
  <span m='798880'>4.</span> <span m='799790'>And</span> <span m='799870'>then</span>
  <span m='800050'>we're</span> <span m='800140'>turning</span> <span m='800500'>it</span>
  <span m='800570'>into</span> <span m='801010'>a</span> <span m='801070'>nice</span>
  <span m='802150'>balance</span> <span m='803050'>tree</span> <span m='803470'>like</span>
  <span m='803650'>this,</span> <span m='804250'>0,</span> <span m='804700'>1,</span>
  <span m='805120'>2,</span> <span m='807520'>3,</span> <span m='810400'>3,</span>
  <span m='811550'>4.</span> <span m='813430'>OK,</span> <span m='816450'>Now, it's</span>
  <span m='816820'>a</span> <span m='817040'>splay</span> <span m='817300'>trees</span>
  <span m='817780'>so it's</span> <span m='817900'>not</span> <span m='818080'>guaranteed</span>
  <span m='818560'>to</span> <span m='818740'>be</span> <span m='819190'>balanced</span>
  <span m='819610'>at</span> <span m='819670'>any</span> <span m='819820'>moment,</span>
  <span m='820270'>but</span> <span m='820540'>amortized</span> <span m='821140'>is</span>
  <span m='821260'>going</span> <span m='821410'>to</span> <span m='821680'>have</span>
  <span m='821920'>log</span> <span m='822190'>n</span> <span m='822310'>performance</span>
  <span m='822840'>preparation.</span> </p><p><span m='825670'>OK,</span> <span m='826090'>and</span>
  <span m='826330'>then</span> <span m='826840'>this</span> <span m='827140'>is</span>
  <span m='827200'>sort</span> <span m='827410'>of</span> <span m='828020'>that's</span>
  <span m='828280'>representing</span> <span m='828730'>each</span> <span m='828880'>of</span>
  <span m='828940'>these</span> <span m='829120'>white</span> <span m='829450'>paths,</span>
  <span m='829990'>but</span> <span m='830110'>then</span> <span m='830230'>we</span>
  <span m='830320'>also</span> <span m='830560'>need</span> <span m='830740'>the</span>
  <span m='830860'>red</span> <span m='831040'>pointers.</span> <span m='832040'>So</span>
  <span m='832210'>what</span> <span m='832840'>we're</span> <span m='832960'>going</span>
  <span m='833070'>to</span> <span m='833140'>do</span> <span m='833460'>is</span>
  <span m='833610'>say</span> <span m='833860'>the</span> <span m='834010'>root</span>
  <span m='835360'>of</span> <span m='835780'>each</span> <span m='836050'>auxiliary</span>
  <span m='836590'>tree,</span> <span m='838171'>I'll</span> <span m='838570'>abbreviate</span>
  <span m='839140'>ox</span> <span m='839500'>tree,</span> <span m='840880'>stores</span>
  <span m='841570'>what</span> <span m='841750'>I'll</span> <span m='841870'>call</span>
  <span m='842570'>the</span> <span m='842660'>path</span> <span m='843070'>parent,</span>
  <span m='848200'>which</span> <span m='848410'>are</span> <span m='848530'>these</span>
  <span m='848800'>red</span> <span m='849160'>pointers.</span> <span m='851080'>The</span>
  <span m='851170'>definition</span> <span m='851770'>is</span> <span m='852130'>this</span>
  <span m='852370'>is,</span> <span m='853600'>the</span> <span m='853720'>paths,</span>
  <span m='856730'>the</span> <span m='856930'>top</span> <span m='857260'>nodes,</span>
  <span m='861490'>parent,</span> <span m='865240'>and</span> <span m='865720'>represented</span>
  <span m='866380'>tree.</span> </p><p><span m='873220'>OK,</span> <span m='873520'>very</span>
  <span m='873760'>soon</span> <span m='874080'>it's</span> <span m='874180'>going</span>
  <span m='874330'>to</span> <span m='874390'>get</span> <span m='874540'>confusing</span>
  <span m='876760'>and</span> <span m='876910'>I'm</span> <span m='877030'>going</span>
  <span m='877150'>to</span> <span m='877240'>always</span> <span m='877600'>make</span>
  <span m='877870'>it</span> <span m='877990'>explicit.</span> <span m='878710'>Am</span>
  <span m='878890'>I</span> <span m='878950'>talking</span> <span m='879310'>about</span>
  <span m='879520'>the</span> <span m='879610'>represented</span> <span m='880210'>tree</span>
  <span m='880450'>the</span> <span m='880570'>thing</span> <span m='880780'>we're</span>
  <span m='880870'>trying</span> <span m='881290'>to</span> <span m='881410'>represent?</span>
  <span m='882670'>Or</span> <span m='883000'>am</span> <span m='883150'>I</span>
  <span m='883210'>talking</span> <span m='883600'>about</span> <span m='883900'>auxiliary</span>
  <span m='884470'>trees</span> <span m='884800'>because</span> <span m='885430'>notion</span>
  <span m='886180'>of</span> <span m='886240'>parent</span> <span m='886690'>is</span>
  <span m='886810'>different</span> <span m='887170'>in</span> <span m='887290'>the</span>
  <span m='887380'>two?</span> <span m='888700'>So</span> <span m='889030'>in an</span>
  <span m='889220'>auxiliary</span> <span m='889690'>tree</span> <span m='890030'>a</span>
  <span m='890110'>parent</span> <span m='890500'>is</span> <span m='890590'>just</span>
  <span m='890770'>whatever</span> <span m='891070'>it</span> <span m='891130'>happens</span>
  <span m='891550'>to</span> <span m='891670'>be</span> <span m='892240'>stored</span>
  <span m='892630'>in</span> <span m='893020'>the</span> <span m='893110'>splay</span>
  <span m='893350'>tree.</span> <span m='894010'>When</span> <span m='894130'>you</span>
  <span m='894220'>splay</span> <span m='894640'>operations</span> <span m='895150'>you</span>
  <span m='895240'>care</span> <span m='895390'>about</span> <span m='895570'>those</span>
  <span m='895780'>parents.</span> <span m='896710'>When</span> <span m='898510'>you're</span>
  <span m='898600'>thinking</span> <span m='898960'>about</span> <span m='899380'>the</span>
  <span m='899500'>tree</span> <span m='899720'>you're</span> <span m='899830'>trying</span>
  <span m='900010'>to</span> <span m='900100'>represent,</span> <span m='900940'>you</span>
  <span m='901060'>care</span> <span m='901240'>about</span> <span m='901510'>parents</span>
  <span m='901870'>in</span> <span m='901960'>the</span> <span m='902050'>represented</span>
  <span m='902620'>tree.</span> </p><p><span m='903680'>Now,</span> <span m='903820'>how</span>
  <span m='904000'>do</span> <span m='904090'>you</span> <span m='904210'>see</span>
  <span m='904420'>that</span> <span m='904600'>here?</span> <span m='904930'>Well</span>
  <span m='906760'>following</span> <span m='907240'>parent</span> <span m='907600'>is</span>
  <span m='907720'>like</span> <span m='907870'>doing</span> <span m='908050'>predecessor</span>
  <span m='908770'>over</span> <span m='908980'>here.</span> <span m='909470'>So</span>
  <span m='909550'>we</span> <span m='909610'>kind</span> <span m='909760'>of</span>
  <span m='909850'>know</span> <span m='909940'>how</span> <span m='910030'>to</span>
  <span m='910120'>do</span> <span m='910240'>predecessor</span> <span m='910790'>in
  a</span> <span m='910840'>binary</span> <span m='911080'>search</span> <span m='911350'>tree.</span>
  <span m='912480'>But</span> <span m='912790'>when</span> <span m='912970'>we</span>
  <span m='913090'>get</span> <span m='913330'>to</span> <span m='913660'>0,</span>
  <span m='915130'>which</span> <span m='915340'>is</span> <span m='915430'>the</span>
  <span m='915520'>left</span> <span m='915790'>most</span> <span m='916060'>node</span>
  <span m='916330'>in</span> <span m='916450'>this</span> <span m='917140'>tree,</span>
  <span m='917350'>corresponds</span> <span m='917770'>to</span> <span m='917830'>the</span>
  <span m='917890'>top</span> <span m='918340'>of</span> <span m='918610'>the</span>
  <span m='918730'>path,</span> <span m='920170'>if</span> <span m='920410'>we</span>
  <span m='920470'>want</span> <span m='920650'>to</span> <span m='920710'>do</span>
  <span m='920860'>the</span> <span m='920980'>parent</span> <span m='921460'>that's</span>
  <span m='921730'>going</span> <span m='922030'>up</span> <span m='922210'>from</span>
  <span m='922420'>this</span> <span m='922570'>path,</span> <span m='924130'>that's</span>
  <span m='924400'>going</span> <span m='924550'>to</span> <span m='924610'>be</span>
  <span m='924700'>the</span> <span m='924790'>path</span> <span m='925060'>parent.</span>
  </p><p><span m='926580'>And</span> <span m='927330'>it</span> <span m='927580'>saying</span>
  <span m='928000'>the</span> <span m='928120'>path's</span> <span m='928480'>top</span>
  <span m='928740'>node,</span> <span m='928930'>that's</span> <span m='929200'>this</span>
  <span m='929350'>guy</span> <span m='929530'>0,</span> <span m='931150'>its</span>
  <span m='931360'>parent</span> <span m='931780'>and</span> <span m='931870'>the</span>
  <span m='931940'>representative</span> <span m='932280'>tree</span> <span m='932620'>are</span>
  <span m='932650'>just</span> <span m='932800'>going</span> <span m='932950'>to</span>
  <span m='933010'>store</span> <span m='933280'>that</span> <span m='933430'>pointer.</span>
  <span m='934240'>The</span> <span m='934360'>only</span> <span m='934600'>weird</span>
  <span m='934770'>thing</span> <span m='934930'>is</span> <span m='935020'>we're</span>
  <span m='935140'>not</span> <span m='935290'>going</span> <span m='935410'>to</span>
  <span m='935470'>store</span> <span m='935650'>the</span> <span m='935740'>pointer</span>
  <span m='936070'>here,</span> <span m='937030'>we're</span> <span m='937090'>going</span>
  <span m='937210'>to</span> <span m='937270'>store</span> <span m='937510'>the</span>
  <span m='937630'>pointer</span> <span m='938470'>here.</span> <span m='940420'>That's</span>
  <span m='940630'>the</span> <span m='940720'>path</span> <span m='940990'>parent.</span>
  <span m='941410'>We're</span> <span m='941470'>going</span> <span m='941590'>to</span>
  <span m='941680'>put</span> <span m='941840'>it</span> <span m='941890'>at</span>
  <span m='942070'>the</span> <span m='942190'>root</span> <span m='942580'>of</span>
  <span m='942820'>the splay</span> <span m='943180'>tree,</span> <span m='943750'>basically</span>
  <span m='944080'>because</span> <span m='944290'>it's</span> <span m='944380'>really</span>
  <span m='944620'>easy</span> <span m='944860'>to</span> <span m='944950'>get</span>
  <span m='945100'>to</span> <span m='945250'>the</span> <span m='945370'>root</span>
  <span m='945580'>of</span> <span m='945700'>a</span> <span m='945760'>tree.</span>
  <span m='946510'>You</span> <span m='947110'>could</span> <span m='947290'>probably</span>
  <span m='947710'>start</span> <span m='948010'>here,</span> <span m='948260'>you</span>
  <span m='948360'>just</span> <span m='948400'>have</span> <span m='948550'>to</span>
  <span m='948640'>go</span> <span m='948820'>left</span> <span m='949210'>every</span>
  <span m='949420'>time and</span> <span m='949830'>it's</span> <span m='950020'>kind</span>
  <span m='950170'>of</span> <span m='950290'>annoying.</span> <span m='951180'>Analysis</span>
  <span m='951640'>will</span> <span m='951760'>get</span> <span m='951910'>messier.</span>
  <span m='952900'>So</span> <span m='953290'>we'll</span> <span m='953440'>put</span>
  <span m='953660'>at</span> <span m='953800'>the</span> <span m='953890'>root.</span>
  </p><p><span m='954940'>And</span> <span m='955210'>so,</span> <span m='955420'>in</span>
  <span m='955510'>particular,</span> <span m='955970'>if</span> <span m='956070'>I</span>
  <span m='956170'>do</span> <span m='956200'>a</span> <span m='956230'>rotation,</span>
  <span m='956890'>like</span> <span m='957070'>if</span> <span m='957190'>I</span>
  <span m='957280'>rotate</span> <span m='957790'>the</span> <span m='957880'>tree</span>
  <span m='958060'>like</span> <span m='958240'>this</span> <span m='958480'>and</span>
  <span m='958570'>make</span> <span m='958780'>one</span> <span m='958990'>the</span>
  <span m='959110'>route,</span> <span m='959740'>that</span> <span m='959890'>path</span>
  <span m='960170'>parent</span> <span m='960400'>pointer</span> <span m='960670'>has</span>
  <span m='960850'>to</span> <span m='960940'>move</span> <span m='961180'>to</span>
  <span m='961350'>1.</span> <span m='961840'>But</span> <span m='961960'>it's</span>
  <span m='962080'>still</span> <span m='962260'>representing</span> <span m='963190'>essentially</span>
  <span m='963580'>for</span> <span m='963700'>this</span> <span m='963910'>whole</span>
  <span m='964750'>splay</span> <span m='964990'>tree</span> <span m='965200'>representing</span>
  <span m='965680'>this</span> <span m='965800'>path,</span> <span m='966640'>what</span>
  <span m='966940'>was</span> <span m='967300'>the</span> <span m='968110'>parent</span>
  <span m='968410'>pointer</span> <span m='968770'>from</span> <span m='969010'>there.</span>
  <span m='970340'>So</span> <span m='970390'>this</span> <span m='970570'>is</span>
  <span m='970660'>the</span> <span m='970780'>represented</span> <span m='971350'>tree,</span>
  <span m='972650'>and</span> <span m='972670'>this</span> <span m='972850'>is</span>
  <span m='972970'>the</span> <span m='973120'>ox</span> <span m='973450'>tree.</span>
  </p><p><span m='976600'>OK,</span> <span m='976900'>now</span> <span m='977050'>if</span>
  <span m='977170'>I</span> <span m='977260'>take</span> <span m='977650'>all</span>
  <span m='977890'>the</span> <span m='978040'>ox</span> <span m='978340'>trees</span>
  <span m='979120'>plus</span> <span m='979660'>these</span> <span m='979960'>parent</span>
  <span m='980290'>pointers,</span> <span m='981400'>I</span> <span m='981490'>get</span>
  <span m='981670'>something</span> <span m='982120'>called</span> <span m='983170'>the</span>
  <span m='983290'>tree</span> <span m='984040'>of</span> <span m='984340'>ox</span>
  <span m='984720'>trees.</span> <span m='990760'>And</span> <span m='991270'>this</span>
  <span m='991510'>is</span> <span m='992050'>our</span> <span m='992200'>representation.</span>
  <span m='994450'>So</span> <span m='994660'>there's</span> <span m='994900'>the</span>
  <span m='995020'>represented</span> <span m='995620'>thing</span> <span m='995950'>versus</span>
  <span m='996310'>our</span> <span m='996400'>representation.</span> <span m='997180'>I'm</span>
  <span m='997270'>not</span> <span m='997360'>going</span> <span m='997480'>to</span>
  <span m='997540'>use</span> <span m='997660'>the</span> <span m='997750'>word</span>
  <span m='997900'>representation</span> <span m='998590'>because</span> <span m='998770'>it</span>
  <span m='998860'>sounds</span> <span m='999100'>almost</span> <span m='999400'>like</span>
  <span m='999580'>represented.</span> <span m='1001200'>So</span> <span m='1001410'>it's
  going to</span> <span m='1001620'>be</span> <span m='1001770'>represented</span>
  <span m='1002850'>versus</span> <span m='1003360'>tree</span> <span m='1003630'>of</span>
  <span m='1003720'>ox</span> <span m='1003960'>trees.</span> <span m='1004350'>Tree
  of ox trees</span> <span m='1004920'>is</span> <span m='1005010'>what</span> <span
  m='1005160'>we</span> <span m='1005250'>store,</span> <span m='1005940'>represented</span>
  <span m='1006540'>is</span> <span m='1006660'>what</span> <span m='1006810'>we</span>
  <span m='1006990'>want</span> <span m='1007260'>to</span> <span m='1007350'>store.</span>
  <span m='1008670'>That's</span> <span m='1008820'>what</span> <span m='1008940'>we're</span>
  <span m='1009030'>trying</span> <span m='1009240'>to</span> <span m='1009300'>represent.</span>
  <span m='1011700'>So</span> <span m='1013020'>that's</span> <span m='1013240'>the</span>
  <span m='1013290'>terminology,</span> <span m='1016530'>Basically,</span> <span
  m='1016980'>we</span> <span m='1017160'>want</span> <span m='1017430'>the</span>
  <span m='1017520'>tree</span> <span m='1017730'>of</span> <span m='1017820'>ox</span>
  <span m='1018060'>trees</span> <span m='1018330'>to</span> <span m='1018450'>be</span>
  <span m='1018570'>balanced,</span> <span m='1019080'>and</span> <span m='1019230'>if</span>
  <span m='1019350'>there's</span> <span m='1019500'>splay</span> <span m='1019800'>trees,</span>
  <span m='1020080'>they'll</span> <span m='1020220'>be</span> <span m='1020340'>kind</span>
  <span m='1020550'>of</span> <span m='1020640'>balanced.</span> <span m='1024390'>Whereas,</span>
  <span m='1024630'>the</span> <span m='1024720'>represented</span> <span m='1025260'>tree</span>
  <span m='1025450'>is</span> <span m='1025619'>on</span> <span m='1025740'>balance.</span>
  </p><p><span m='1028119'>Cool</span> <span m='1029460'>so</span> <span m='1029609'>now</span>
  <span m='1029700'>I</span> <span m='1029760'>want</span> <span m='1029910'>to</span>
  <span m='1030000'>give</span> <span m='1030180'>you</span> <span m='1030329'>some</span>
  <span m='1030569'>code</span> <span m='1030990'>and</span> <span m='1031140'>how</span>
  <span m='1031380'>we're</span> <span m='1031500'>going</span> <span m='1031800'>to</span>
  <span m='1032190'>manipulate</span> <span m='1032760'>these</span> <span m='1032970'>things.</span>
  <span m='1033420'>And</span> <span m='1033540'>then</span> <span m='1033690'>we'll</span>
  <span m='1033839'>be</span> <span m='1033960'>able</span> <span m='1034109'>to</span>
  <span m='1034170'>analyze</span> <span m='1034589'>the</span> <span m='1034680'>code</span>
  <span m='1034950'>and</span> <span m='1035040'>that</span> <span m='1035940'>both</span>
  <span m='1036270'>will</span> <span m='1036839'>take</span> <span m='1037050'>a</span>
  <span m='1037109'>little</span> <span m='1037290'>while.</span> <span m='1063030'>The</span>
  <span m='1063120'>main</span> <span m='1063300'>operation</span> <span m='1063690'>I'm</span>
  <span m='1063780'>going</span> <span m='1063890'>to</span> <span m='1063960'>talk</span>
  <span m='1064230'>about</span> <span m='1064620'>is</span> <span m='1064800'>actually</span>
  <span m='1065130'>just</span> <span m='1065310'>a</span> <span m='1065370'>helper</span>
  <span m='1065820'>operation.</span> </p><p><span m='1067050'>So</span> <span m='1067200'>first</span>
  <span m='1067470'>I</span> <span m='1067560'>want</span> <span m='1067740'>to</span>
  <span m='1067800'>tell</span> <span m='1068040'>you</span> <span m='1070680'>what</span>
  <span m='1070830'>it</span> <span m='1070890'>is,</span> <span m='1071230'>how</span>
  <span m='1071310'>it</span> <span m='1071370'>works.</span> <span m='1072820'>It's</span>
  <span m='1072960'>like</span> <span m='1073760'>an</span> <span m='1073910'>access</span>
  <span m='1074730'>in</span> <span m='1075710'>a</span> <span m='1075780'>tango</span>
  <span m='1076110'>tree.</span> <span m='1076530'>With</span> <span m='1076820'>tango</span>
  <span m='1077160'>trees</span> <span m='1077450'>we</span> <span m='1077520'>just</span>
  <span m='1077670'>wanted</span> <span m='1077910'>to</span> <span m='1078450'>touch</span>
  <span m='1078810'>item</span> <span m='1079560'>xi</span> <span m='1080100'>and</span>
  <span m='1080190'>then</span> <span m='1080370'>go</span> <span m='1080550'>onto</span>
  <span m='1080700'>the</span> <span m='1080760'>next</span> <span m='1081000'>item,</span>
  <span m='1081270'>xi</span> <span m='1081570'>plus</span> <span m='1081810'>1.</span>
  <span m='1082620'>So</span> <span m='1082770'>I'm</span> <span m='1082830'>going</span>
  <span m='1082940'>to</span> <span m='1083010'>think</span> <span m='1083190'>about</span>
  <span m='1083430'>that</span> <span m='1083640'>world,</span> <span m='1083940'>while</span>
  <span m='1084090'>all</span> <span m='1084630'>I'm</span> <span m='1084750'>trying</span>
  <span m='1084960'>to</span> <span m='1085050'>do</span> <span m='1085200'>is</span>
  <span m='1085320'>touch</span> <span m='1085650'>nodes.</span> <span m='1086490'>What's</span>
  <span m='1086670'>interesting</span> <span m='1087060'>about</span> <span m='1087270'>touching</span>
  <span m='1087600'>nodes</span> <span m='1087900'>is</span> <span m='1088020'>it</span>
  <span m='1088290'>changes</span> <span m='1090480'>this</span> <span m='1090720'>notion</span>
  <span m='1091050'>of</span> <span m='1091140'>preferred</span> <span m='1091530'>edges.</span>
  </p><p><span m='1092590'>So,</span> <span m='1092610'>as I</span> <span m='1092640'>said,</span>
  <span m='1092970'>the</span> <span m='1093090'>last</span> <span m='1093480'>access</span>
  <span m='1093950'>in</span> <span m='1094110'>that</span> <span m='1094470'>subtree</span>
  <span m='1094830'>was</span> <span m='1095010'>blah,</span> <span m='1095290'>blah,</span>
  <span m='1095440'>blah.</span> <span m='1096340'>So</span> <span m='1096810'>access.</span>
  <span m='1099690'>In</span> <span m='1100020'>reality,</span> <span m='1100630'>what</span>
  <span m='1100650'>I</span> <span m='1100740'>mean</span> <span m='1100890'>is</span>
  <span m='1100980'>the</span> <span m='1101070'>last</span> <span m='1101340'>time</span>
  <span m='1101550'>that</span> <span m='1101700'>node</span> <span m='1101940'>was</span>
  <span m='1102090'>used</span> <span m='1102450'>as</span> <span m='1102630'>a</span>
  <span m='1102900'>link</span> <span m='1103200'>or</span> <span m='1103350'>cut</span>
  <span m='1104160'>or</span> <span m='1104340'>find</span> <span m='1104700'>operation.</span>
  <span m='1106560'>But</span> <span m='1107130'>in</span> <span m='1107250'>fact</span>
  <span m='1107550'>I'm</span> <span m='1107670'>going</span> <span m='1107850'>to</span>
  <span m='1107940'>make</span> <span m='1108090'>that</span> <span m='1108210'>explicit.</span>
  <span m='1108660'>Every</span> <span m='1108960'>operation</span> <span m='1109500'>is</span>
  <span m='1109590'>going</span> <span m='1109730'>to</span> <span m='1109800'>start</span>
  <span m='1110550'>by</span> <span m='1110730'>calling</span> <span m='1111090'>this</span>
  <span m='1111270'>function</span> <span m='1111630'>access</span> <span m='1112680'>on</span>
  <span m='1112860'>its</span> <span m='1113010'>arguments.</span> <span m='1113850'>Question?</span>
  </p><p><span m='1115602'>AUDIENCE:</span> <span m='1115760'>I</span> <span m='1115918'>still</span>
  <span m='1116076'>don't</span> <span m='1116550'>understand.</span> <span m='1117498'>When
  you</span> <span m='1117972'>say that</span> <span m='1118446'>this</span> <span
  m='1118920'>[INAUDIBLE]</span> <span m='1120342'>by</span> <span m='1120816'>depth--</span>
  </p><p><span m='1121710'>PROFESSOR:</span> <span m='1122178'>Yes.</span> </p><p><span
  m='1122646'>AUDIENCE:</span> <span m='1122739'>How</span> <span m='1122832'>do</span>
  <span m='1122925'>you</span> <span m='1123018'>go</span> <span m='1123114'>from
  that path</span> <span m='1123582'>to the actual</span> <span m='1124050'>splay
  tree?</span> </p><p><span m='1125930'>PROFESSOR:</span> <span m='1126110'>OK</span>
  <span m='1126290'>so</span> <span m='1126630'>the</span> <span m='1126780'>transformation</span>
  <span m='1127890'>from</span> <span m='1128310'>this</span> <span m='1128700'>path</span>
  <span m='1129160'>in</span> <span m='1129270'>the</span> <span m='1129330'>represented</span>
  <span m='1129840'>tree</span> <span m='1130140'>to</span> <span m='1130260'>splay</span>
  <span m='1130650'>tree</span> <span m='1130950'>is</span> <span m='1131070'>just</span>
  <span m='1132330'>these</span> <span m='1132690'>nodes</span> <span m='1132990'>have</span>
  <span m='1133290'>depth</span> <span m='1134370'>within</span> <span m='1134730'>that</span>
  <span m='1134910'>path,</span> <span m='1135750'>I</span> <span m='1135780'>mean</span>
  <span m='1135900'>they're</span> <span m='1135990'>just</span> <span m='1136230'>stored</span>
  <span m='1136740'>along</span> <span m='1137100'>the</span> <span m='1137190'>path.</span>
  <span m='1137850'>What</span> <span m='1138000'>I</span> <span m='1138060'>mean</span>
  <span m='1138210'>is,</span> <span m='1138330'>I</span> <span m='1138420'>want</span>
  <span m='1138540'>to</span> <span m='1138600'>store</span> <span m='1138870'>them</span>
  <span m='1139020'>in</span> <span m='1139500'>as</span> <span m='1139800'>a</span>
  <span m='1139860'>binary</span> <span m='1140250'>search</span> <span m='1140580'>tree</span>
  <span m='1140850'>ordered</span> <span m='1141180'>by</span> <span m='1141330'>that</span>
  <span m='1141510'>value.</span> <span m='1143390'>So</span> <span m='1143860'>that's</span>
  <span m='1144270'>what--</span> <span m='1144630'>yeah.</span> <span m='1146100'>So</span>
  <span m='1146760'>splay</span> <span m='1146990'>trees</span> <span m='1147330'>have</span>
  <span m='1147480'>some</span> <span m='1147690'>key</span> <span m='1147870'>on</span>
  <span m='1147990'>the</span> <span m='1148080'>nodes,</span> <span m='1148420'>they</span>
  <span m='1148500'>maintain</span> <span m='1148840'>the</span> <span m='1148920'>binary</span>
  <span m='1149190'>search</span> <span m='1149400'>tree</span> <span m='1149550'>property.</span>
  <span m='1150430'>My</span> <span m='1150580'>key</span> <span m='1150880'>is just</span>
  <span m='1151020'>going</span> <span m='1151140'>to</span> <span m='1151200'>be</span>
  <span m='1151290'>the</span> <span m='1151410'>depth.</span> <span m='1151830'>The</span>
  <span m='1151950'>position</span> <span m='1152460'>along</span> <span m='1152760'>the</span>
  <span m='1152850'>path.</span> </p><p><span m='1153240'>AUDIENCE:</span> <span m='1153328'>So</span>
  <span m='1153416'>if</span> <span m='1153504'>you</span> <span m='1153592'>do</span>
  <span m='1153680'>an</span> <span m='1154120'>in order</span> <span m='1154560'>traversal</span>
  <span m='1155000'>you just get the path.</span> </p><p><span m='1155880'>PROFESSOR:</span>
  <span m='1155990'>Right</span> <span m='1156100'>if</span> <span m='1156210'>I</span>
  <span m='1156270'>do</span> <span m='1156360'>it</span> <span m='1156400'>in order</span>
  <span m='1156610'>traversal</span> <span m='1157110'>here,</span> <span m='1157410'>I'll</span>
  <span m='1157560'>get</span> <span m='1157740'>the</span> <span m='1157830'>path</span>
  <span m='1158070'>back.</span> <span m='1158830'>Yep,</span> <span m='1159900'>no</span>
  <span m='1160050'>problem.</span> <span m='1162750'>That's</span> <span m='1163140'>going</span>
  <span m='1163290'>to</span> <span m='1163350'>be</span> <span m='1163410'>important</span>
  <span m='1163740'>to</span> <span m='1163800'>understand.</span> <span m='1164830'>OK,</span>
  <span m='1165420'>so</span> <span m='1166380'>to</span> <span m='1166500'>do</span>
  <span m='1166620'>an</span> <span m='1166710'>access,</span> <span m='1167910'>access</span>
  <span m='1168240'>is</span> <span m='1168300'>going</span> <span m='1168420'>to</span>
  <span m='1168510'>do</span> <span m='1168630'>two</span> <span m='1168840'>things.</span>
  <span m='1169600'>The</span> <span m='1169700'>first</span> <span m='1169830'>thing</span>
  <span m='1170010'>it</span> <span m='1170280'>has</span> <span m='1170610'>to</span>
  <span m='1170730'>do,</span> <span m='1170980'>and</span> <span m='1171390'>the</span>
  <span m='1171600'>other</span> <span m='1171750'>thing</span> <span m='1171930'>is</span>
  <span m='1172020'>going</span> <span m='1172140'>to</span> <span m='1172230'>make</span>
  <span m='1172410'>our</span> <span m='1172530'>life</span> <span m='1172770'>easy,</span>
  <span m='1175350'>you'll</span> <span m='1175500'>see</span> <span m='1175710'>once</span>
  <span m='1175950'>we've</span> <span m='1176100'>defined</span> <span m='1176400'>access,</span>
  <span m='1176970'>all</span> <span m='1177210'>operations</span> <span m='1177750'>become</span>
  <span m='1178140'>trivial.</span> <span m='1179080'>So</span> <span m='1179160'>it's</span>
  <span m='1179280'>going</span> <span m='1179410'>to</span> <span m='1179490'>be</span>
  <span m='1179640'>a</span> <span m='1179670'>really</span> <span m='1179910'>cool</span>
  <span m='1180840'>helper</span> <span m='1181260'>function.</span> </p><p><span
  m='1186580'>The</span> <span m='1186600'>first</span> <span m='1186840'>thing</span>
  <span m='1187050'>we</span> <span m='1187200'>have</span> <span m='1187560'>to</span>
  <span m='1187650'>do,</span> <span m='1188370'>when</span> <span m='1188520'>we</span>
  <span m='1188670'>access</span> <span m='1189120'>a node v,</span> <span m='1189570'>is</span>
  <span m='1189690'>say</span> <span m='1189900'>well</span> <span m='1190080'>that</span>
  <span m='1190920'>then</span> <span m='1191100'>by</span> <span m='1191280'>definition</span>
  <span m='1191970'>the</span> <span m='1192090'>path</span> <span m='1192540'>to</span>
  <span m='1192690'>v</span> <span m='1192960'>from</span> <span m='1193230'>the root</span>
  <span m='1194220'>--v to root</span> <span m='1195330'>I</span> <span m='1195390'>guess,</span>
  <span m='1195900'>sort</span> <span m='1196180'>of,</span> <span m='1196390'>but</span>
  <span m='1196860'>probably</span> <span m='1197130'>more</span> <span m='1197570'>root
  to v--</span> <span m='1203010'>should</span> <span m='1203280'>be</span> <span
  m='1203430'>preferred.</span> <span m='1203940'>That's</span> <span m='1204150'>the</span>
  <span m='1204210'>definition</span> <span m='1204720'>of</span> <span m='1204780'>preferred</span>
  <span m='1205440'>because</span> <span m='1205620'>now</span> <span m='1205860'>it's</span>
  <span m='1206040'>the</span> <span m='1206160'>latest</span> <span m='1206520'>thing</span>
  <span m='1206780'>accessed.</span> <span m='1211890'>So</span> <span m='1212030'>we've</span>
  <span m='1212150'>got</span> <span m='1212270'>to</span> <span m='1212420'>fix</span>
  <span m='1212720'>that.</span> </p><p><span m='1215720'>But</span> <span m='1215750'>we're</span>
  <span m='1215840'>going</span> <span m='1215960'>to</span> <span m='1216020'>do</span>
  <span m='1216140'>a</span> <span m='1216170'>little</span> <span m='1216380'>bit</span>
  <span m='1216530'>more</span> <span m='1216890'>we're</span> <span m='1217070'>also</span>
  <span m='1217490'>going</span> <span m='1217760'>to</span> <span m='1219080'>make</span>
  <span m='1220620'>v</span> <span m='1222604'>the</span> <span m='1223100'>root</span>
  <span m='1223460'>of</span> <span m='1223670'>its</span> <span m='1223880'>ox</span>
  <span m='1224240'>tree.</span> <span m='1230270'>Which</span> <span m='1230510'>will</span>
  <span m='1230690'>mean,</span> <span m='1231920'>because</span> <span m='1232130'>that</span>
  <span m='1232400'>ox tree</span> <span m='1232700'>is</span> <span m='1232790'>now</span>
  <span m='1233060'>the</span> <span m='1233300'>top</span> <span m='1233690'>most</span>
  <span m='1234210'>ox tree</span> <span m='1234590'>because</span> <span m='1235610'>that</span>
  <span m='1235760'>actually</span> <span m='1236120'>contains</span> <span m='1236570'>the</span>
  <span m='1236660'>root</span> <span m='1236900'>and</span> <span m='1237020'>it</span>
  <span m='1237110'>contains</span> <span m='1237470'>v.</span> <span m='1238354'>So</span>
  <span m='1239240'>in</span> <span m='1239330'>fact,</span> <span m='1240200'>v</span>
  <span m='1240560'>is</span> <span m='1240980'>the</span> <span m='1241130'>root</span>
  <span m='1243830'>of</span> <span m='1244130'>the</span> <span m='1244250'>tree</span>
  <span m='1244520'>of</span> <span m='1244640'>ox</span> <span m='1244850'>trees.</span>
  <span m='1245520'>It's</span> <span m='1245540'>the</span> <span m='1245690'>overall</span>
  <span m='1246140'>root</span> <span m='1250430'>for</span> <span m='1250730'>this</span>
  <span m='1251360'>tree</span> <span m='1251570'>of</span> <span m='1251660'>our</span>
  <span m='1251810'>streets.</span> <span m='1254420'>Why</span> <span m='1254630'>do</span>
  <span m='1254720'>we</span> <span m='1254810'>do</span> <span m='1254930'>that?</span>
  <span m='1255300'>Well,</span> <span m='1255530'>it's</span> <span m='1255650'>sort</span>
  <span m='1255950'>of</span> <span m='1256040'>going</span> <span m='1256190'>to</span>
  <span m='1256250'>just</span> <span m='1256400'>be</span> <span m='1256490'>a</span>
  <span m='1256550'>consequence</span> <span m='1257110'>of</span> <span m='1257900'>using</span>
  <span m='1258170'>splay,</span> <span m='1258680'>because</span> <span m='1258860'>whenever</span>
  <span m='1259160'>you</span> <span m='1259260'>splice</span> <span m='1259520'>something</span>
  <span m='1259880'>you</span> <span m='1259970'>move</span> <span m='1260150'>it</span>
  <span m='1260210'>to</span> <span m='1260330'>the</span> <span m='1260420'>root</span>
  <span m='1261220'>in</span> <span m='1261340'>this</span> <span m='1261960'>zigzaggy</span>
  <span m='1262550'>way.</span> <span m='1264020'>But</span> <span m='1264880'>it</span>
  <span m='1265110'>will</span> <span m='1265220'>actually</span> <span m='1265490'>be</span>
  <span m='1265640'>really</span> <span m='1265850'>helpful</span> <span m='1266210'>to</span>
  <span m='1266330'>have</span> <span m='1266510'>this</span> <span m='1266660'>property,</span>
  <span m='1267200'>and</span> <span m='1267290'>that's</span> <span m='1267440'>why</span>
  <span m='1267590'>these</span> <span m='1267800'>are</span> <span m='1268370'>the</span>
  <span m='1268520'>simplest</span> <span m='1269060'>link-cut</span> <span m='1269300'>trees</span>
  <span m='1269750'>I</span> <span m='1269840'>know.</span> </p><p><span m='1271450'>OK,</span>
  <span m='1272210'>so</span> <span m='1272810'>how</span> <span m='1272960'>do</span>
  <span m='1273080'>we</span> <span m='1273170'>do</span> <span m='1273320'>this?</span>
  <span m='1275300'>So</span> <span m='1275410'>you're</span> <span m='1275660'>given</span>
  <span m='1275930'>the</span> <span m='1276020'>node</span> <span m='1276240'>v</span>
  <span m='1276860'>somewhere</span> <span m='1277220'>in</span> <span m='1277310'>this</span>
  <span m='1277940'>world,</span> <span m='1278840'>and</span> <span m='1278990'>we've</span>
  <span m='1279170'>basically</span> <span m='1279470'>got</span> <span m='1279590'>to</span>
  <span m='1279680'>fix</span> <span m='1280280'>a</span> <span m='1280310'>lot</span>
  <span m='1280580'>of</span> <span m='1280670'>preferred</span> <span m='1281090'>child</span>
  <span m='1281480'>pointers.</span> <span m='1283910'>And,</span> <span m='1284150'>whereas,</span>
  <span m='1284420'>tango</span> <span m='1284760'>trees</span> <span m='1284960'>basically</span>
  <span m='1285350'>walked</span> <span m='1285920'>from</span> <span m='1286160'>the</span>
  <span m='1286250'>top</span> <span m='1286640'>down,</span> <span m='1287900'>navigating</span>
  <span m='1288980'>one</span> <span m='1289640'>preferred</span> <span m='1290000'>path</span>
  <span m='1290420'>until</span> <span m='1290720'>it</span> <span m='1290790'>found</span>
  <span m='1291050'>the</span> <span m='1291140'>right</span> <span m='1291290'>place</span>
  <span m='1291560'>to</span> <span m='1291650'>exit</span> <span m='1292070'>and</span>
  <span m='1292190'>then</span> <span m='1292340'>fixing</span> <span m='1292790'>that</span>
  <span m='1292970'>edge,</span> <span m='1293670'>were</span> <span m='1293970'>going</span>
  <span m='1294090'>to</span> <span m='1294200'>be</span> <span m='1294380'>working</span>
  <span m='1294740'>bottom</span> <span m='1295070'>up.</span> <span m='1295220'>Because</span>
  <span m='1295460'>we</span> <span m='1295610'>already</span> <span m='1295850'>know</span>
  <span m='1296000'>where</span> <span m='1296090'>the</span> <span m='1296180'>vertexes,</span>
  <span m='1296780'>were</span> <span m='1296900'>given</span> <span m='1297230'>it,</span>
  <span m='1298010'>and</span> <span m='1298220'>we</span> <span m='1298310'>need</span>
  <span m='1298460'>to</span> <span m='1298580'>walk</span> <span m='1298880'>our</span>
  <span m='1298970'>way</span> <span m='1299240'>up</span> <span m='1299480'>the</span>
  <span m='1299600'>tree</span> <span m='1300500'>and</span> <span m='1300620'>kind</span>
  <span m='1300800'>of</span> <span m='1300890'>push</span> <span m='1301280'>v</span>
  <span m='1301520'>to</span> <span m='1301700'>the</span> <span m='1301820'>root</span>
  <span m='1302420'>overall.</span> </p><p><span m='1303620'>So</span> <span m='1303740'>the</span>
  <span m='1303830'>first</span> <span m='1304100'>thing</span> <span m='1304250'>to</span>
  <span m='1304370'>do</span> <span m='1305030'>is</span> <span m='1305220'>splay</span>
  <span m='1305920'>v.</span> <span m='1309290'>So</span> <span m='1310040'>that,</span>
  <span m='1311060'>now,</span> <span m='1311330'>when</span> <span m='1311480'>I</span>
  <span m='1311600'>say</span> <span m='1311960'>splay v,</span> <span m='1312530'>I</span>
  <span m='1312680'>mean</span> <span m='1313610'>within</span> <span m='1314090'>its</span>
  <span m='1314300'>ox</span> <span m='1314620'>tree.</span> <span m='1316990'>Doesn't</span>
  <span m='1317260'>make</span> <span m='1317450'>sense</span> <span m='1317960'>to</span>
  <span m='1318110'>do</span> <span m='1318290'>it</span> <span m='1318440'>in</span>
  <span m='1318590'>any</span> <span m='1318770'>global</span> <span m='1319130'>sense.</span>
  <span m='1320650'>In</span> <span m='1320750'>some</span> <span m='1320990'>sense</span>
  <span m='1321260'>access</span> <span m='1321740'>is</span> <span m='1321830'>going</span>
  <span m='1321970'>to</span> <span m='1322040'>be</span> <span m='1322160'>our</span>
  <span m='1322280'>global</span> <span m='1322640'>version</span> <span m='1322970'>of</span>
  <span m='1323050'>splay.</span> <span m='1324060'>Whenever</span> <span m='1324290'>I</span>
  <span m='1324350'>say</span> <span m='1324530'>splay</span> <span m='1324890'>a</span>
  <span m='1324950'>node,</span> <span m='1325280'>I</span> <span m='1325370'>mean</span>
  <span m='1325580'>just</span> <span m='1325790'>within</span> <span m='1326060'>its</span>
  <span m='1326240'>ox</span> <span m='1326530'>tree.</span> <span m='1326900'>That's</span>
  <span m='1327230'>going</span> <span m='1327380'>to</span> <span m='1327470'>be</span>
  <span m='1327560'>the</span> <span m='1327680'>definition</span> <span m='1327980'>of</span>
  <span m='1328280'>splay tree.</span> <span m='1328555'>So</span> <span m='1329990'>you</span>
  <span m='1330110'>may</span> <span m='1330260'>recall</span> <span m='1330620'>from</span>
  <span m='1330840'>Lecture</span> <span m='1330980'>Six</span> <span m='1331390'>there's
  the</span> <span m='1331550'>zig-zig</span> <span m='1332030'>case</span> <span
  m='1332380'>and</span> <span m='1332460'>zig-zag</span> <span m='1332930'>case.</span>
  <span m='1333290'>You</span> <span m='1333380'>do</span> <span m='1333530'>some</span>
  <span m='1333830'>rotation,</span> <span m='1334310'>double</span> <span m='1334550'>rotation,</span>
  <span m='1334970'>whatever.</span> <span m='1336470'>In</span> <span m='1336620'>the</span>
  <span m='1336770'>end,</span> <span m='1336920'>maybe</span> <span m='1337190'>one</span>
  <span m='1337400'>more</span> <span m='1337550'>rotation,</span> <span m='1338420'>and</span>
  <span m='1338510'>then</span> <span m='1338660'>v</span> <span m='1338840'>becomes</span>
  <span m='1339260'>the</span> <span m='1339380'>root.</span> </p><p><span m='1340910'>So</span>
  <span m='1341120'>what</span> <span m='1341270'>does</span> <span m='1341420'>the</span>
  <span m='1341540'>picture</span> <span m='1341810'>look</span> <span m='1341990'>like?</span>
  <span m='1342230'>We've</span> <span m='1342380'>got</span> <span m='1342620'>v</span>
  <span m='1343010'>at</span> <span m='1343250'>the</span> <span m='1343370'>root</span>
  <span m='1343760'>of</span> <span m='1343940'>it's</span> <span m='1344120'>ox</span>
  <span m='1344420'>tree.</span> <span m='1345260'>Then</span> <span m='1345380'>we've</span>
  <span m='1345560'>got</span> <span m='1345830'>things</span> <span m='1346190'>in</span>
  <span m='1346280'>the</span> <span m='1346370'>left</span> <span m='1346610'>subtree</span>
  <span m='1347060'>which</span> <span m='1347300'>have</span> <span m='1347510'>smaller</span>
  <span m='1348050'>depth.</span> <span m='1349910'>And</span> <span m='1350090'>then</span>
  <span m='1350240'>we've</span> <span m='1350420'>got</span> <span m='1350660'>things</span>
  <span m='1350990'>in</span> <span m='1351080'>the</span> <span m='1351170'>right</span>
  <span m='1351350'>subtree</span> <span m='1351480'>of</span> <span m='1351530'>tree</span>
  <span m='1351710'>which</span> <span m='1351890'>have</span> <span m='1352040'>bigger</span>
  <span m='1352280'>depth.</span> <span m='1354260'>Depth</span> <span m='1354560'>bigger</span>
  <span m='1355160'>than</span> <span m='1355490'>v.</span> <span m='1356390'>So</span>
  <span m='1356570'>we</span> <span m='1356630'>just</span> <span m='1356870'>pulled</span>
  <span m='1357470'>to</span> <span m='1357590'>the</span> <span m='1357710'>root.</span>
  <span m='1358620'>So</span> <span m='1358830'>in</span> <span m='1359020'>the</span>
  <span m='1359340'>represented</span> <span m='1359680'>tree</span> <span m='1360350'>what</span>
  <span m='1360500'>we</span> <span m='1360620'>have</span> <span m='1360890'>is</span>
  <span m='1361010'>a</span> <span m='1361070'>path</span> <span m='1362230'>v.</span>
  <span m='1363170'>These</span> <span m='1363350'>are</span> <span m='1363440'>things</span>
  <span m='1363650'>of</span> <span m='1363740'>smaller</span> <span m='1364070'>depth</span>
  <span m='1364370'>these</span> <span m='1364670'>things</span> <span m='1364910'>of</span>
  <span m='1365000'>larger</span> <span m='1365300'>depth.</span> <span m='1366210'>Now,</span>
  <span m='1366470'>if</span> <span m='1366650'>you</span> <span m='1366770'>look</span>
  <span m='1366980'>at</span> <span m='1367100'>the</span> <span m='1367250'>definition</span>
  <span m='1367910'>of</span> <span m='1368000'>preferred</span> <span m='1368330'>child,</span>
  <span m='1370100'>when</span> <span m='1370280'>we</span> <span m='1370430'>access</span>
  <span m='1370980'>v,</span> <span m='1371826'>v</span> <span m='1372560'>now</span>
  <span m='1372890'>no</span> <span m='1373130'>longer</span> <span m='1373490'>has</span>
  <span m='1373760'>a</span> <span m='1373820'>preferred</span> <span m='1374180'>child.</span>
  <span m='1374480'>This</span> <span m='1374600'>preferred</span> <span m='1374900'>child</span>
  <span m='1375140'>is</span> <span m='1375230'>now</span> <span m='1375470'>none.</span>
  <span m='1377120'>If</span> <span m='1377270'>you</span> <span m='1377360'>look</span>
  <span m='1377510'>at</span> <span m='1377570'>this</span> <span m='1377750'>picture,</span>
  <span m='1378240'>this</span> <span m='1378320'>is</span> <span m='1378440'>a</span>
  <span m='1378530'>preferred</span> <span m='1378920'>path,</span> <span m='1380240'>currently,</span>
  <span m='1380540'>v</span> <span m='1380840'>has</span> <span m='1381350'>a</span>
  <span m='1381410'>preferred</span> <span m='1381800'>child.</span> <span m='1382650'>We</span>
  <span m='1382670'>want</span> <span m='1382820'>to</span> <span m='1382910'>get</span>
  <span m='1383120'>rid</span> <span m='1383270'>of</span> <span m='1383420'>that.</span>
  <span m='1383870'>That's</span> <span m='1384080'>our</span> <span m='1384200'>first</span>
  <span m='1385580'>operation.</span> </p><p><span m='1389330'>First</span> <span
  m='1389570'>thing</span> <span m='1389720'>we</span> <span m='1389810'>want</span>
  <span m='1389990'>to</span> <span m='1390080'>do</span> <span m='1390860'>is</span>
  <span m='1391010'>get</span> <span m='1391280'>rid</span> <span m='1391640'>of</span>
  <span m='1391760'>that</span> <span m='1392030'>edge.</span> <span m='1392390'>It's</span>
  <span m='1392540'>no</span> <span m='1392780'>longer</span> <span m='1393080'>a</span>
  <span m='1393110'>preferred</span> <span m='1393560'>edge.</span> <span m='1395460'>So</span>
  <span m='1395640'>that</span> <span m='1395970'>essentially</span> <span m='1396450'>corresponds</span>
  <span m='1397050'>to</span> <span m='1397200'>this</span> <span m='1397530'>edge</span>
  <span m='1399670'>because</span> <span m='1399880'>that's</span> <span m='1400120'>the</span>
  <span m='1400210'>connection</span> <span m='1400570'>from</span> <span m='1400780'>v</span>
  <span m='1400990'>to</span> <span m='1401140'>deeper</span> <span m='1401470'>things.</span>
  <span m='1402040'>I</span> <span m='1402070'>mean</span> <span m='1402220'>in</span>
  <span m='1402340'>fact,</span> <span m='1403240'>this</span> <span m='1403420'>node</span>
  <span m='1403720'>right</span> <span m='1403900'>below</span> <span m='1404260'>us</span>
  <span m='1404800'>let's</span> <span m='1404950'>call</span> <span m='1405250'>it</span>
  <span m='1406210'>x</span> <span m='1407680'>is</span> <span m='1407950'>right</span>
  <span m='1408160'>here.</span> <span m='1409530'>It's</span> <span m='1409860'>the</span>
  <span m='1410030'>smallest</span> <span m='1410640'>depth</span> <span m='1411160'>among</span>
  <span m='1411460'>the</span> <span m='1411550'>nodes</span> <span m='1411880'>with</span>
  <span m='1412030'>larger</span> <span m='1412330'>depth</span> <span m='1413260'>than</span>
  <span m='1413440'>v.</span> </p><p><span m='1413860'>But</span> <span m='1414310'>if</span>
  <span m='1414490'>we</span> <span m='1414850'>kind</span> <span m='1415090'>of</span>
  <span m='1415180'>kill</span> <span m='1415390'>that</span> <span m='1415570'>connection,</span>
  <span m='1416080'>then,</span> <span m='1416350'>now,</span> <span m='1416590'>this</span>
  <span m='1416800'>path</span> <span m='1417150'>is</span> <span m='1417280'>its</span>
  <span m='1417460'>own</span> <span m='1417730'>thing,</span> <span m='1418510'>the</span>
  <span m='1418610'>part</span> <span m='1418960'>below v,</span> <span m='1419720'>separate</span>
  <span m='1420100'>from</span> <span m='1420340'>v</span> <span m='1420520'>and</span>
  <span m='1420640'>above.</span> <span m='1422120'>So</span> <span m='1422140'>that's</span>
  <span m='1422380'>what</span> <span m='1422500'>we're</span> <span m='1422560'>going</span>
  <span m='1422680'>to</span> <span m='1422770'>do</span> <span m='1422920'>first.</span>
  <span m='1424210'>Remove</span> <span m='1426990'>these</span> <span m='1428540'>preferred</span>
  <span m='1428900'>child.</span> <span m='1433510'>And</span> <span m='1433690'>I'm</span>
  <span m='1433810'>going</span> <span m='1433990'>to</span> <span m='1434080'>elaborate</span>
  <span m='1434590'>exactly</span> <span m='1435160'>the</span> <span m='1435280'>point</span>
  <span m='1435530'>arithmetic</span> <span m='1436120'>that</span> <span m='1436270'>makes</span>
  <span m='1436480'>that</span> <span m='1436630'>happen.</span> <span m='1439720'>This</span>
  <span m='1439960'>is</span> <span m='1440140'>the</span> <span m='1440890'>kind</span>
  <span m='1441040'>of</span> <span m='1441130'>tedious</span> <span m='1441520'>part</span>
  <span m='1441970'>of,</span> <span m='1442720'>or</span> <span m='1443050'>really</span>
  <span m='1443320'>any</span> <span m='1443560'>point</span> <span m='1443770'>of</span>
  <span m='1443830'>machine</span> <span m='1444100'>data</span> <span m='1444310'>structure.</span>
  <span m='1445870'>This</span> <span m='1445990'>is</span> <span m='1446080'>going</span>
  <span m='1446200'>to</span> <span m='1446290'>all</span> <span m='1446410'>work</span>
  <span m='1446620'>on</span> <span m='1446710'>a</span> <span m='1446770'>point of</span>
  <span m='1446980'>machine,</span> <span m='1447280'>by</span> <span m='1447400'>the</span>
  <span m='1447490'>way.</span> </p><p><span m='1465710'>OK,</span> <span m='1466950'>so</span>
  <span m='1467880'>basically</span> <span m='1468180'>I'm</span> <span m='1468300'>obliterating</span>
  <span m='1468870'>the</span> <span m='1469020'>edge.</span> <span m='1469860'>So</span>
  <span m='1471150'>I'm</span> <span m='1471270'>going</span> <span m='1471480'>to</span>
  <span m='1471630'>make</span> <span m='1472020'>this</span> <span m='1472500'>vertex</span>
  <span m='1473010'>here,</span> <span m='1474330'>have</span> <span m='1474780'>a</span>
  <span m='1475020'>path</span> <span m='1475380'>parent</span> <span m='1475770'>pointer</span>
  <span m='1477060'>to</span> <span m='1477210'>v</span> <span m='1480030'>and</span>
  <span m='1480750'>otherwise</span> <span m='1481140'>obliterate</span> <span m='1481530'>this</span>
  <span m='1481710'>edge.</span> <span m='1481920'>It</span> <span m='1481980'>will</span>
  <span m='1482070'>no</span> <span m='1482220'>longer</span> <span m='1482460'>has</span>
  <span m='1482580'>a</span> <span m='1482640'>parent,</span> <span m='1482900'>v</span>
  <span m='1483160'>no</span> <span m='1483280'>longer</span> <span m='1483570'>has</span>
  <span m='1483750'>a</span> <span m='1483810'>right</span> <span m='1484020'>child.</span>
  <span m='1485160'>So</span> <span m='1485250'>it's</span> <span m='1485340'>going</span>
  <span m='1485490'>to</span> <span m='1485580'>be</span> <span m='1486300'>v</span>
  <span m='1486780'>has</span> <span m='1487590'>a</span> <span m='1487650'>left</span>
  <span m='1487950'>thing</span> <span m='1488670'>and</span> <span m='1488850'>no</span>
  <span m='1489030'>right</span> <span m='1489240'>pointer.</span> <span m='1490680'>But</span>
  <span m='1490890'>this</span> <span m='1491400'>separate</span> <span m='1492330'>tree</span>
  <span m='1492660'>is</span> <span m='1492750'>going</span> <span m='1492900'>to</span>
  <span m='1493110'>a</span> <span m='1493170'>parent</span> <span m='1493470'>pointer</span>
  <span m='1493890'>to v.</span> </p><p><span m='1495690'>This</span> <span m='1495870'>is,</span>
  <span m='1495930'>of</span> <span m='1495990'>course,</span> <span m='1496230'>if</span>
  <span m='1496380'>it</span> <span m='1496470'>exists.</span> <span m='1496860'>If</span>
  <span m='1497010'>v.right</span> <span m='1497910'>is</span> <span m='1498270'>nothing</span>
  <span m='1498660'>already,</span> <span m='1499140'>then</span> <span m='1499500'>you</span>
  <span m='1499650'>don't</span> <span m='1499800'>do</span> <span m='1499920'>any</span>
  <span m='1500100'>of</span> <span m='1500160'>this.</span> <span m='1501690'>But</span>
  <span m='1501900'>if</span> <span m='1502020'>there</span> <span m='1502140'>is</span>
  <span m='1502290'>a</span> <span m='1502350'>right</span> <span m='1502530'>pointer</span>
  <span m='1502950'>then</span> <span m='1503280'>you've</span> <span m='1503400'>got</span>
  <span m='1503520'>to</span> <span m='1503580'>do</span> <span m='1503730'>this.</span>
  <span m='1504970'>So</span> <span m='1504990'>this</span> <span m='1505170'>is</span>
  <span m='1505330'>the</span> <span m='1505380'>place</span> <span m='1505710'>where</span>
  <span m='1505850'>we're</span> <span m='1505920'>going</span> <span m='1506040'>to</span>
  <span m='1506100'>set</span> <span m='1506400'>path</span> <span m='1506670'>parents,</span>
  <span m='1507780'>pretty</span> <span m='1508020'>obvious</span> <span m='1508290'>stuff.</span>
  <span m='1509400'>The</span> <span m='1509490'>only</span> <span m='1509640'>thing</span>
  <span m='1509790'>to</span> <span m='1509880'>check</span> <span m='1510210'>is</span>
  <span m='1510300'>that</span> <span m='1510420'>this</span> <span m='1510600'>is</span>
  <span m='1510720'>really</span> <span m='1510960'>in</span> <span m='1511050'>the</span>
  <span m='1511140'>right</span> <span m='1511320'>place.</span> <span m='1511710'>This</span>
  <span m='1511980'>thing</span> <span m='1512580'>is</span> <span m='1512790'>the</span>
  <span m='1512910'>root</span> <span m='1513240'>of</span> <span m='1513390'>this</span>
  <span m='1514200'>ox</span> <span m='1514500'>tree,</span> <span m='1515630'>which</span>
  <span m='1515760'>is</span> <span m='1515880'>where</span> <span m='1516000'>the</span>
  <span m='1516120'>parent</span> <span m='1516360'>pointer</span> <span m='1516880'>path</span>
  <span m='1517200'>parent</span> <span m='1517410'>supposed</span> <span m='1517710'>to</span>
  <span m='1517860'>be,</span> <span m='1518790'>and</span> <span m='1518910'>it</span>
  <span m='1519000'>points</span> <span m='1519360'>to</span> <span m='1519500'>v</span>
  <span m='1519930'>meaning,</span> <span m='1520850'>that</span> <span m='1521070'>the</span>
  <span m='1521190'>parent</span> <span m='1521520'>of</span> <span m='1521640'>x</span>
  <span m='1522450'>is</span> <span m='1522670'>v</span> <span m='1523220'>in</span>
  <span m='1523380'>the</span> <span m='1523480'>represented</span> <span m='1523980'>tree.</span>
  <span m='1524220'>And</span> <span m='1524310'>that's</span> <span m='1524490'>exactly</span>
  <span m='1524880'>what</span> <span m='1525030'>this</span> <span m='1525510'>picture</span>
  <span m='1525810'>is.</span> <span m='1525930'>This</span> <span m='1526110'>is</span>
  <span m='1526230'>the</span> <span m='1526320'>represented</span> <span m='1526800'>tree</span>
  <span m='1527610'>parent</span> <span m='1527850'>of</span> <span m='1527950'>x</span>
  <span m='1528700'>is</span> <span m='1528970'>v,</span> <span m='1529410'>and</span>
  <span m='1529500'>so</span> <span m='1529650'>that's</span> <span m='1529860'>the</span>
  <span m='1529950'>correct</span> <span m='1530250'>definition</span> <span m='1530670'>of</span>
  <span m='1531280'>pat parent.</span> </p><p><span m='1532990'>Cool.</span> <span
  m='1534650'>OK,</span> <span m='1535020'>now</span> <span m='1537180'>the</span>
  <span m='1537270'>fun</span> <span m='1537480'>part.</span> <span m='1542520'>Now,</span>
  <span m='1542760'>we're</span> <span m='1542850'>going</span> <span m='1542960'>to</span>
  <span m='1543030'>walk</span> <span m='1543330'>up</span> <span m='1543450'>the</span>
  <span m='1543570'>tree.</span> <span m='1547150'>We've seen</span> <span m='1547380'>everything</span>
  <span m='1547770'>on</span> <span m='1547860'>the</span> <span m='1547980'>outline</span>
  <span m='1548310'>except</span> <span m='1548730'>this</span> <span m='1548940'>heavy</span>
  <span m='1549180'>light</span> <span m='1549390'>decomposition.</span> <span m='1550640'>We'll</span>
  <span m='1550800'>come</span> <span m='1550980'>to</span> <span m='1551100'>that</span>
  <span m='1551440'>soon.</span> <span m='1557480'>OK,</span> <span m='1559170'>so</span>
  <span m='1560490'>now</span> <span m='1560650'>we're</span> <span m='1560710'>going</span>
  <span m='1560820'>to</span> <span m='1560910'>walk</span> <span m='1561210'>up</span>
  <span m='1561300'>the</span> <span m='1561420'>tree</span> <span m='1561900'>and</span>
  <span m='1562260'>add</span> <span m='1562770'>new</span> <span m='1563070'>preferred</span>
  <span m='1565020'>child</span> <span m='1565350'>pointers.</span> <span m='1565710'>This</span>
  <span m='1565860'>is</span> <span m='1565980'>the</span> <span m='1566070'>one</span>
  <span m='1566250'>that</span> <span m='1566370'>we</span> <span m='1566490'>had</span>
  <span m='1566640'>to</span> <span m='1566730'>remove</span> <span m='1568200'>because</span>
  <span m='1568560'>it's</span> <span m='1569070'>the</span> <span m='1569130'>stuff</span>
  <span m='1569400'>below</span> <span m='1569730'>v.</span> <span m='1570090'>But</span>
  <span m='1570560'>up</span> <span m='1570750'>the</span> <span m='1570870'>path,</span>
  <span m='1571650'>if</span> <span m='1571950'>we</span> <span m='1572040'>walk</span>
  <span m='1572310'>up</span> <span m='1572460'>to</span> <span m='1572580'>the</span>
  <span m='1572700'>root</span> <span m='1572940'>here,</span> <span m='1573530'>to</span>
  <span m='1573660'>the</span> <span m='1573750'>left</span> <span m='1573960'>most</span>
  <span m='1574230'>node</span> <span m='1574470'>of</span> <span m='1574660'>v</span>
  <span m='1575820'>then</span> <span m='1576060'>there's</span> <span m='1576240'>a</span>
  <span m='1576270'>path</span> <span m='1576570'>parent</span> <span m='1576840'>from</span>
  <span m='1577020'>there,</span> <span m='1577530'>we</span> <span m='1577710'>want</span>
  <span m='1577890'>to</span> <span m='1578310'>make</span> <span m='1578490'>that</span>
  <span m='1578610'>not</span> <span m='1578790'>a</span> <span m='1578850'>path</span>
  <span m='1579180'>parent</span> <span m='1579450'>but</span> <span m='1579570'>a</span>
  <span m='1579630'>regular</span> <span m='1580050'>parent.</span> <span m='1581330'>Because</span>
  <span m='1581550'>that</span> <span m='1581970'>right</span> <span m='1582150'>now,</span>
  <span m='1583140'>is</span> <span m='1583230'>living</span> <span m='1583500'>in</span>
  <span m='1583560'>its</span> <span m='1583740'>own</span> <span m='1584040'>little</span>
  <span m='1584820'>preferred</span> <span m='1585120'>path</span> <span m='1585450'>that</span>
  <span m='1585570'>we</span> <span m='1585690'>want</span> <span m='1585840'>that</span>
  <span m='1585960'>preferred</span> <span m='1586290'>path</span> <span m='1586500'>to</span>
  <span m='1586560'>extend</span> <span m='1586920'>all</span> <span m='1587100'>the</span>
  <span m='1587190'>way</span> <span m='1587310'>to</span> <span m='1587400'>the</span>
  <span m='1587520'>root,</span> <span m='1589230'>by</span> <span m='1589410'>the</span>
  <span m='1589500'>definition</span> <span m='1590040'>of</span> <span m='1590310'>a</span>
  <span m='1590490'>child</span> <span m='1590830'>after</span> <span m='1591090'>doing</span>
  <span m='1591300'>an</span> <span m='1591390'>access.</span> </p><p><span m='1593050'>So</span>
  <span m='1593490'>we're</span> <span m='1593640'>going</span> <span m='1593780'>to</span>
  <span m='1593880'>do</span> <span m='1594270'>a</span> <span m='1594330'>loop</span>
  <span m='1596070'>until</span> <span m='1596670'>v</span> <span m='1598350'>path</span>
  <span m='1598680'>parent</span> <span m='1602350'>is</span> <span m='1602670'>none.</span>
  <span m='1608800'>I'm</span> <span m='1608860'>going</span> <span m='1608990'>to</span>
  <span m='1609050'>let</span> <span m='1610310'>w be</span> <span m='1610670'>v's</span>
  <span m='1612200'>path</span> <span m='1612530'>parent.</span> <span m='1617470'>save</span>
  <span m='1617710'>some</span> <span m='1617960'>writing.</span> <span m='1619700'>And</span>
  <span m='1619790'>then</span> <span m='1619910'>we're</span> <span m='1619970'>going</span>
  <span m='1620060'>to</span> <span m='1620160'>splay</span> <span m='1620920'>w.</span>
  <span m='1622170'>OK,</span> <span m='1622940'>I</span> <span m='1623030'>think</span>
  <span m='1623300'>at</span> <span m='1623390'>this</span> <span m='1623570'>point,</span>
  <span m='1623840'>I</span> <span m='1623930'>should</span> <span m='1624110'>draw</span>
  <span m='1624320'>a</span> <span m='1624350'>picture.</span> <span m='1625540'>So</span>
  <span m='1632780'>many</span> <span m='1633090'>pictures</span> <span m='1633510'>to</span>
  <span m='1633630'>draw.</span> <span m='1635020'>So</span> <span m='1635160'>we</span>
  <span m='1635310'>have,</span> <span m='1636330'>let's</span> <span m='1636540'>say,</span>
  <span m='1637260'>a</span> <span m='1637350'>node</span> <span m='1638710'>w</span>
  <span m='1640500'>as</span> <span m='1640650'>a</span> <span m='1640710'>child</span>
  <span m='1641200'>v.</span> <span m='1641410'>This</span> <span m='1641610'>is</span>
  <span m='1641730'>the</span> <span m='1641910'>represented</span> <span m='1642570'>tree.</span>
  <span m='1645120'>That's</span> <span m='1645300'>some</span> <span m='1645510'>other</span>
  <span m='1645750'>child</span> <span m='1646170'>x</span> <span m='1646710'>and</span>
  <span m='1646930'>I</span> <span m='1647160'>can</span> <span m='1647340'>have</span>
  <span m='1647430'>many</span> <span m='1647640'>children.</span> </p><p><span m='1650370'>Let's</span>
  <span m='1650610'>suppose</span> <span m='1651060'>that,</span> <span m='1651210'>right</span>
  <span m='1651480'>now,</span> <span m='1652140'>the</span> <span m='1652380'>preferred</span>
  <span m='1652890'>child</span> <span m='1653280'>from</span> <span m='1653460'>w</span>
  <span m='1654060'>is</span> <span m='1654390'>x.</span> <span m='1655890'>It's</span>
  <span m='1656040'>not</span> <span m='1656310'>v</span> <span m='1656700'>because</span>
  <span m='1657000'>we</span> <span m='1657090'>just</span> <span m='1657240'>followed</span>
  <span m='1657510'>a</span> <span m='1657570'>path</span> <span m='1657930'>parent</span>
  <span m='1658200'>pointer</span> <span m='1658560'>to</span> <span m='1658650'>go</span>
  <span m='1658800'>from</span> <span m='1659610'>v's</span> <span m='1659910'>path,</span>
  <span m='1660390'>which</span> <span m='1660600'>is</span> <span m='1660690'>something</span>
  <span m='1661050'>here,</span> <span m='1661800'>to</span> <span m='1662140'>w's</span>
  <span m='1662580'>path.</span> <span m='1662940'>So</span> <span m='1663060'>w's</span>
  <span m='1663420'>path</span> <span m='1663780'>is</span> <span m='1663900'>going</span>
  <span m='1664050'>to</span> <span m='1664140'>be</span> <span m='1664260'>something</span>
  <span m='1664590'>like</span> <span m='1664770'>this.</span> <span m='1665850'>So</span>
  <span m='1666000'>it</span> <span m='1666240'>goes</span> <span m='1666510'>to</span>
  <span m='1666600'>some</span> <span m='1666810'>other</span> <span m='1667140'>guy</span>
  <span m='1667450'>x,</span> <span m='1668340'>we</span> <span m='1668490'>want</span>
  <span m='1668730'>change</span> <span m='1669240'>that</span> <span m='1670440'>that</span>
  <span m='1670680'>pointer.</span> <span m='1671610'>Instead</span> <span m='1671910'>of</span>
  <span m='1671970'>being</span> <span m='1672180'>that,</span> <span m='1672900'>we</span>
  <span m='1673020'>want</span> <span m='1673170'>to</span> <span m='1673260'>go</span>
  <span m='1673470'>here.</span> <span m='1676160'>That's</span> <span m='1676370'>in</span>
  <span m='1676470'>the</span> <span m='1676560'>represented</span> <span m='1677100'>tree.</span>
  <span m='1678000'>Now</span> <span m='1678120'>what</span> <span m='1678300'>does</span>
  <span m='1678420'>this</span> <span m='1678570'>look</span> <span m='1678810'>like</span>
  <span m='1679200'>in</span> <span m='1680730'>the</span> <span m='1680880'>tree</span>
  <span m='1681300'>of</span> <span m='1681470'>ox</span> <span m='1681750'>trees?</span>
  <span m='1683610'>W</span> <span m='1684120'>lives</span> <span m='1684480'>in</span>
  <span m='1684590'>some</span> <span m='1684910'>thing.</span> <span m='1689760'>w's</span>
  <span m='1690270'>there,</span> <span m='1691320'>x's</span> <span m='1691860'>its</span>
  <span m='1693300'>successor</span> <span m='1693900'>in</span> <span m='1694020'>there,</span>
  <span m='1694260'>so</span> <span m='1694410'>maybe</span> <span m='1694620'>it's</span>
  <span m='1694710'>like</span> <span m='1694920'>a</span> <span m='1694980'>right</span>
  <span m='1695160'>child</span> <span m='1695820'>or</span> <span m='1695880'>whatever,</span>
  <span m='1699720'>somewhere</span> <span m='1700050'>else</span> <span m='1700230'>in</span>
  <span m='1700320'>the</span> <span m='1700440'>tree.</span> </p><p><span m='1701250'>And</span>
  <span m='1701370'>then</span> <span m='1701490'>separately</span> <span m='1702870'>we've</span>
  <span m='1703080'>already</span> <span m='1703410'>built</span> <span m='1703680'>this</span>
  <span m='1703860'>thing.</span> <span m='1704210'>v</span> <span m='1704720'>it</span>
  <span m='1704870'>has</span> <span m='1705120'>a</span> <span m='1705180'>left</span>
  <span m='1705390'>child,</span> <span m='1705830'>it</span> <span m='1705900'>has</span>
  <span m='1706140'>no</span> <span m='1706320'>right</span> <span m='1706560'>child</span>
  <span m='1707730'>because</span> <span m='1708060'>there's</span> <span m='1708210'>nothing</span>
  <span m='1708540'>deeper</span> <span m='1708840'>than</span> <span m='1708990'>v</span>
  <span m='1709170'>in</span> <span m='1710670'>its</span> <span m='1710880'>own</span>
  <span m='1711030'>preferred</span> <span m='1711330'>path.</span> <span m='1712680'>And</span>
  <span m='1712830'>then</span> <span m='1713010'>we</span> <span m='1713130'>have</span>
  <span m='1714210'>a</span> <span m='1714300'>path</span> <span m='1714600'>parent</span>
  <span m='1714840'>pointer</span> <span m='1715170'>that</span> <span m='1715260'>goes</span>
  <span m='1715440'>like</span> <span m='1715590'>this.</span> <span m='1720070'>I</span>
  <span m='1720190'>want</span> <span m='1720340'>to</span> <span m='1720400'>fix.</span>
  <span m='1720910'>That</span> <span m='1721170'>the</span> <span m='1721270'>first</span>
  <span m='1721540'>thing</span> <span m='1721690'>I'm</span> <span m='1721780'>going</span>
  <span m='1721870'>to</span> <span m='1721960'>do</span> <span m='1722110'>is</span>
  <span m='1722190'>splay</span> <span m='1722500'>w,</span> <span m='1722860'>so</span>
  <span m='1723040'>the</span> <span m='1723160'>w is</span> <span m='1723640'>in</span>
  <span m='1723730'>the</span> <span m='1723850'>root</span> <span m='1724180'>of</span>
  <span m='1724330'>its</span> <span m='1724540'>own</span> <span m='1724810'>tree.</span>
  <span m='1726070'>So</span> <span m='1726280'>then</span> <span m='1726610'>it's</span>
  <span m='1726790'>going</span> <span m='1726940'>to</span> <span m='1727000'>look</span>
  <span m='1727210'>like</span> <span m='1728590'>w.</span> </p><p><span m='1730480'>It's</span>
  <span m='1730660'>going</span> <span m='1730780'>to</span> <span m='1730840'>have</span>
  <span m='1731290'>a</span> <span m='1731320'>left</span> <span m='1731570'>child,</span>
  <span m='1732220'>left</span> <span m='1732520'>subtree,</span> <span m='1733000'>right</span>
  <span m='1733210'>subtree.</span> <span m='1734110'>X</span> <span m='1734440'>is</span>
  <span m='1734560'>going</span> <span m='1734700'>to</span> <span m='1734800'>be</span>
  <span m='1735190'>its</span> <span m='1735370'>successor</span> <span m='1736060'>so</span>
  <span m='1736230'>it's</span> <span m='1736360'>the</span> <span m='1736450'>leftmost</span>
  <span m='1737020'>thing</span> <span m='1737290'>in</span> <span m='1737470'>there.</span>
  <span m='1738640'>And</span> <span m='1738820'>we</span> <span m='1738910'>still</span>
  <span m='1739150'>have</span> <span m='1739680'>v</span> <span m='1740890'>with</span>
  <span m='1741060'>its</span> <span m='1741220'>left</span> <span m='1741490'>child</span>
  <span m='1743050'>and</span> <span m='1743350'>this</span> <span m='1743590'>pointer.</span>
  <span m='1746020'>It's</span> <span m='1746170'>not</span> <span m='1746440'>in</span>
  <span m='1746620'>the</span> <span m='1746710'>tree.</span> <span m='1747110'>So</span>
  <span m='1747280'>if</span> <span m='1747400'>two</span> <span m='1747610'>ox</span>
  <span m='1747880'>trees,</span> <span m='1748240'>now</span> <span m='1748480'>I</span>
  <span m='1748570'>want</span> <span m='1748750'>to</span> <span m='1748840'>basically</span>
  <span m='1749230'>merge</span> <span m='1749620'>these</span> <span m='1749800'>two</span>
  <span m='1750010'>ox</span> <span m='1750250'>trees,</span> <span m='1750460'>but</span>
  <span m='1750580'>also</span> <span m='1751540'>get</span> <span m='1751840'>rid</span>
  <span m='1752080'>of</span> <span m='1752230'>this</span> <span m='1752410'>stuff.</span>
  <span m='1753880'>Just</span> <span m='1754060'>like</span> <span m='1754240'>we</span>
  <span m='1754360'>did</span> <span m='1754570'>up</span> <span m='1754720'>here</span>
  <span m='1754960'>actually.</span> <span m='1755350'>First,</span> <span m='1755620'>I</span>
  <span m='1755650'>have</span> <span m='1755770'>to</span> <span m='1755860'>destroy</span>
  <span m='1756310'>this</span> <span m='1756490'>preferred</span> <span m='1758020'>child</span>
  <span m='1758620'>and</span> <span m='1758740'>then</span> <span m='1758890'>make</span>
  <span m='1759100'>a</span> <span m='1759160'>new</span> <span m='1759370'>one,</span>
  <span m='1759650'>which</span> <span m='1759730'>is</span> <span m='1759850'>v.</span>
  </p><p><span m='1760810'>So</span> <span m='1760930'>how</span> <span m='1761050'>do</span>
  <span m='1761140'>I</span> <span m='1761230'>do</span> <span m='1761410'>it?</span>
  <span m='1761530'>I</span> <span m='1761620'>just</span> <span m='1761830'>replace</span>
  <span m='1762280'>the</span> <span m='1762370'>right</span> <span m='1762550'>pointer</span>
  <span m='1762850'>from</span> <span m='1763000'>w</span> <span m='1763960'>to</span>
  <span m='1764210'>be</span> <span m='1764535'>v</span> <span m='1764860'>instead</span>
  <span m='1765280'>of</span> <span m='1765520'>whatever</span> <span m='1765790'>this</span>
  <span m='1765970'>thing</span> <span m='1766150'>is</span> <span m='1767680'>that's</span>
  <span m='1767860'>it.</span> <span m='1769480'>So</span> <span m='1772150'>say,</span>
  <span m='1772390'>switch</span> <span m='1774220'>w's</span> <span m='1775490'>preferred</span>
  <span m='1775900'>child</span> <span m='1777670'>to</span> <span m='1777790'>be</span>
  <span m='1778160'>v.</span> <span m='1779740'>And</span> <span m='1781410'>what</span>
  <span m='1781510'>we</span> <span m='1781690'>do</span> <span m='1782110'>is</span>
  <span m='1782340'>say</span> <span m='1782750'>w,</span> <span m='1784770'>first</span>
  <span m='1785140'>we</span> <span m='1785290'>clip</span> <span m='1785590'>off</span>
  <span m='1786830'>the</span> <span m='1786970'>existing</span> <span m='1787390'>guy,</span>
  <span m='1791440'>we</span> <span m='1791560'>say</span> <span m='1792460'>this</span>
  <span m='1792820'>node's</span> <span m='1793810'>w.rights</span> <span m='1794770'>path</span>
  <span m='1795160'>parent</span> <span m='1795580'>is</span> <span m='1795700'>now</span>
  <span m='1795850'>going</span> <span m='1795970'>to</span> <span m='1796060'>be</span>
  <span m='1796180'>w.</span> </p><p><span m='1797110'>We</span> <span m='1797200'>still</span>
  <span m='1797440'>want</span> <span m='1797620'>to</span> <span m='1797680'>have</span>
  <span m='1797830'>some</span> <span m='1798070'>way</span> <span m='1798190'>to</span>
  <span m='1798280'>get</span> <span m='1798430'>from</span> <span m='1798610'>here</span>
  <span m='1798910'>back</span> <span m='1799160'>up</span> <span m='1799330'>to</span>
  <span m='1799420'>w,</span> <span m='1799900'>just</span> <span m='1800080'>like</span>
  <span m='1800290'>we</span> <span m='1800380'>did</span> <span m='1800560'>up</span>
  <span m='1800710'>here.</span> <span m='1801640'>This</span> <span m='1801790'>code</span>
  <span m='1802000'>is</span> <span m='1802120'>going</span> <span m='1802240'>to</span>
  <span m='1802300'>look</span> <span m='1802450'>very</span> <span m='1802600'>similar</span>
  <span m='1802930'>to</span> <span m='1803080'>these</span> <span m='1803260'>two</span>
  <span m='1803410'>lines.</span> <span m='1804530'>We</span> <span m='1804550'>set</span>
  <span m='1804790'>it's</span> <span m='1804910'>parents</span> <span m='1805470'>to</span>
  <span m='1805540'>none.</span> <span m='1809300'>And</span> <span m='1809470'>we</span>
  <span m='1809620'>set</span> <span m='1811180'>w.right.</span> <span m='1813560'>Up,</span>
  <span m='1814490'>here</span> <span m='1814690'>we</span> <span m='1814780'>set</span>
  <span m='1814940'>it</span> <span m='1815020'>to</span> <span m='1815170'>none.</span>
  <span m='1815470'>Now</span> <span m='1815680'>we</span> <span m='1815770'>know</span>
  <span m='1815920'>it</span> <span m='1816010'>actually</span> <span m='1816280'>needs</span>
  <span m='1816460'>to</span> <span m='1816580'>be</span> <span m='1816730'>v.</span>
  <span m='1818230'>And</span> <span m='1818530'>then</span> <span m='1818740'>we</span>
  <span m='1818890'>set</span> <span m='1819130'>the</span> <span m='1819250'>reverse</span>
  <span m='1819550'>pointer</span> <span m='1819880'>so</span> <span m='1820710'>v's</span>
  <span m='1820960'>parent</span> <span m='1821520'>is</span> <span m='1821680'>now</span>
  <span m='1821860'>w</span> <span m='1823450'>and</span> <span m='1823900'>v</span>
  <span m='1824500'>no</span> <span m='1824740'>longer</span> <span m='1825040'>has</span>
  <span m='1825340'>a</span> <span m='1825400'>path</span> <span m='1825700'>parent.</span>
  </p><p><span m='1831920'>So</span> <span m='1832030'>essentially</span> <span m='1832450'>the</span>
  <span m='1832630'>reverse</span> <span m='1833200'>of</span> <span m='1833380'>these</span>
  <span m='1833680'>operations.</span> <span m='1835900'>So</span> <span m='1836080'>we</span>
  <span m='1836530'>remove</span> <span m='1837010'>this</span> <span m='1837160'>preferred</span>
  <span m='1837760'>child</span> <span m='1838060'>pointer</span> <span m='1838450'>and</span>
  <span m='1838630'>we</span> <span m='1838810'>add</span> <span m='1839080'>this</span>
  <span m='1839260'>one</span> <span m='1839440'>in.</span> <span m='1839770'>So</span>
  <span m='1839920'>the</span> <span m='1840040'>new</span> <span m='1840190'>picture</span>
  <span m='1840580'>will</span> <span m='1840760'>be,</span> <span m='1841570'>we</span>
  <span m='1841690'>have</span> <span m='1842740'>w</span> <span m='1843910'>has</span>
  <span m='1844120'>its</span> <span m='1844210'>left</span> <span m='1844450'>subtree</span>
  <span m='1844840'>just</span> <span m='1845050'>like</span> <span m='1845200'>before.</span>
  <span m='1846250'>It's</span> <span m='1846490'>right</span> <span m='1846730'>subtree</span>
  <span m='1847140'>is</span> <span m='1847210'>now</span> <span m='1847450'>v</span>
  <span m='1847870'>with</span> <span m='1848080'>its</span> <span m='1848290'>left</span>
  <span m='1848500'>subtree.</span> <span m='1849770'>And</span> <span m='1849790'>then</span>
  <span m='1849940'>we</span> <span m='1850090'>also</span> <span m='1850450'>have</span>
  <span m='1850810'>this</span> <span m='1851020'>other</span> <span m='1851290'>tree</span>
  <span m='1851590'>hanging</span> <span m='1851920'>out.</span> <span m='1853210'>Not</span>
  <span m='1853480'>directly</span> <span m='1853900'>connected</span> <span m='1854380'>except</span>
  <span m='1854710'>by</span> <span m='1855060'>path</span> <span m='1855430'>parent</span>
  <span m='1855730'>pointer.</span> <span m='1857470'>So</span> <span m='1857620'>whereas</span>
  <span m='1857830'>before,</span> <span m='1858220'>v</span> <span m='1858400'>was</span>
  <span m='1858580'>linked in</span> <span m='1858880'>with</span> <span m='1858970'>the</span>
  <span m='1859060'>path</span> <span m='1859300'>parent</span> <span m='1859510'>pointer,</span>
  <span m='1859840'>now</span> <span m='1860080'>this</span> <span m='1860290'>thing</span>
  <span m='1860500'>is</span> <span m='1860590'>linked</span> <span m='1860770'>to</span>
  <span m='1860890'>in</span> <span m='1861190'>the</span> <span m='1861250'>parent</span>
  <span m='1861460'>pointer</span> <span m='1861730'>and</span> <span m='1861850'>sort</span>
  <span m='1862010'>of</span> <span m='1862080'>the</span> <span m='1862180'>primary</span>
  <span m='1863260'>connection,</span> <span m='1863680'>the</span> <span m='1863770'>white</span>
  <span m='1863950'>connection</span> <span m='1865000'>is</span> <span m='1865600'>direct</span>
  <span m='1866080'>from</span> <span m='1866350'>w</span> <span m='1866770'>to</span>
  <span m='1866900'>v.</span> <span m='1867670'>And</span> <span m='1867820'>that's</span>
  <span m='1868060'>exactly</span> <span m='1868720'>what</span> <span m='1868900'>corresponds</span>
  <span m='1869470'>to</span> <span m='1869620'>clipping</span> <span m='1870100'>off</span>
  <span m='1870340'>this</span> <span m='1870520'>portion</span> <span m='1870850'>of</span>
  <span m='1870910'>the</span> <span m='1871030'>preferred</span> <span m='1871360'>path</span>
  <span m='1871730'>and</span> <span m='1871900'>concatenating</span> <span m='1872590'>on</span>
  <span m='1872770'>this</span> <span m='1872920'>portion</span> <span m='1873820'>of</span>
  <span m='1873970'>the</span> <span m='1874060'>preferred</span> <span m='1874390'>path.</span>
  </p><p><span m='1876330'>More</span> <span m='1876510'>or</span> <span m='1876540'>less</span>
  <span m='1876720'>clear?</span> <span m='1877600'>You</span> <span m='1877710'>can</span>
  <span m='1877830'>double</span> <span m='1878070'>check</span> <span m='1878310'>this</span>
  <span m='1879060'>at</span> <span m='1879150'>home</span> <span m='1879450'>but</span>
  <span m='1880920'>that's</span> <span m='1882000'>what</span> <span m='1882120'>we</span>
  <span m='1882210'>need</span> <span m='1882360'>to,</span> <span m='1882480'>do.</span>
  <span m='1883860'>To</span> <span m='1883980'>go</span> <span m='1884130'>back</span>
  <span m='1884370'>and</span> <span m='1884460'>forth</span> <span m='1884760'>between</span>
  <span m='1885060'>these</span> <span m='1885210'>two</span> <span m='1885390'>worlds.</span>
  <span m='1885670'>The</span> <span m='1885750'>represented</span> <span m='1886290'>world</span>
  <span m='1886770'>and</span> <span m='1887060'>the</span> <span m='1887190'>tree</span>
  <span m='1887400'>of</span> <span m='1887490'>our</span> <span m='1887970'>world</span>
  <span m='1889200'>is</span> <span m='1889380'>doing</span> <span m='1889590'>the</span>
  <span m='1889650'>right</span> <span m='1889800'>thing.</span> <span m='1890010'>Again</span>
  <span m='1890280'>you</span> <span m='1890400'>can</span> <span m='1890520'>check</span>
  <span m='1890760'>that</span> <span m='1892740'>this</span> <span m='1892890'>path</span>
  <span m='1893280'>parent</span> <span m='1894160'>is,</span> <span m='1894370'>indeed,</span>
  <span m='1894620'>the</span> <span m='1894720'>right</span> <span m='1894900'>thing.</span>
  </p><p><span m='1895410'>It's</span> <span m='1895560'>essentially</span> <span
  m='1895920'>saying</span> <span m='1896130'>the</span> <span m='1896220'>parent</span>
  <span m='1896520'>of</span> <span m='1896640'>x</span> <span m='1896970'>equals</span>
  <span m='1897330'>w,</span> <span m='1897930'>which</span> <span m='1898110'>is,</span>
  <span m='1898200'>indeed,</span> <span m='1898500'>the</span> <span m='1898590'>case.</span>
  <span m='1899890'>That</span> <span m='1900300'>left</span> <span m='1900580'>most</span>
  <span m='1901050'>thing</span> <span m='1901470'>here,</span> <span m='1902680'>its</span>
  <span m='1902850'>parent</span> <span m='1903210'>is</span> <span m='1903360'>w.</span>
  <span m='1905640'>Cool</span> <span m='1906240'>last</span> <span m='1906570'>thing</span>
  <span m='1906750'>we</span> <span m='1906840'>do</span> <span m='1908620'>is</span>
  <span m='1909330'>kind</span> <span m='1909600'>of</span> <span m='1909720'>a</span>
  <span m='1910920'>lame</span> <span m='1911190'>way</span> <span m='1911310'>to</span>
  <span m='1911400'>say</span> <span m='1911610'>it,</span> <span m='1911730'>but</span>
  <span m='1911880'>I</span> <span m='1912000'>want</span> <span m='1912210'>to</span>
  <span m='1912420'>splay</span> <span m='1913060'>v</span> <span m='1914340'>within</span>
  <span m='1914580'>its</span> <span m='1914760'>ox tree</span> <span m='1915210'>Now,</span>
  <span m='1915360'>v</span> <span m='1915570'>is</span> <span m='1915690'>a</span>
  <span m='1915780'>child</span> <span m='1916170'>of</span> <span m='1916260'>the</span>
  <span m='1916350'>root.</span> <span m='1916720'>So</span> <span m='1916770'>this</span>
  <span m='1917860'>just</span> <span m='1918060'>means</span> <span m='1918330'>rotate</span>
  <span m='1918870'>v.</span> <span m='1919900'>So</span> <span m='1921000'>what</span>
  <span m='1921290'>it's</span> <span m='1921420'>going</span> <span m='1921540'>to</span>
  <span m='1921600'>look</span> <span m='1921810'>like</span> <span m='1923340'>is</span>
  <span m='1924020'>v</span> <span m='1924450'>becomes</span> <span m='1924900'>the</span>
  <span m='1924990'>root,</span> <span m='1925800'>it's</span> <span m='1926190'>left</span>
  <span m='1926460'>child</span> <span m='1926970'>is</span> <span m='1927270'>w,</span>
  <span m='1929040'>that</span> <span m='1929280'>left</span> <span m='1929490'>child</span>
  <span m='1929850'>is</span> <span m='1930000'>whatever,</span> <span m='1930690'>that</span>
  <span m='1930870'>right</span> <span m='1931080'>child</span> <span m='1931410'>is</span>
  <span m='1931530'>whatever.</span> </p><p><span m='1932330'>V</span> <span m='1932550'>will</span>
  <span m='1932670'>still</span> <span m='1932940'>have</span> <span m='1933150'>no</span>
  <span m='1933330'>right</span> <span m='1933510'>child</span> <span m='1933900'>because</span>
  <span m='1934590'>v</span> <span m='1934860'>is</span> <span m='1935040'>the</span>
  <span m='1935220'>deepest</span> <span m='1935610'>node</span> <span m='1935850'>in</span>
  <span m='1935940'>it's</span> <span m='1936060'>preferred</span> <span m='1936390'>path.</span>
  <span m='1936720'>So</span> <span m='1936840'>there's</span> <span m='1937020'>nothing</span>
  <span m='1937320'>deeper</span> <span m='1937590'>than</span> <span m='1937770'>it.</span>
  <span m='1937890'>There's</span> <span m='1938040'>nothing</span> <span m='1938340'>to</span>
  <span m='1938430'>the</span> <span m='1938550'>right</span> <span m='1938740'>of</span>
  <span m='1938820'>v.</span> <span m='1939510'>So</span> <span m='1939660'>these</span>
  <span m='1939870'>two</span> <span m='1940470'>triangles</span> <span m='1941370'>go</span>
  <span m='1941490'>to</span> <span m='1941580'>here.</span> <span m='1942010'>Of</span>
  <span m='1942110'>course,</span> <span m='1942310'>there's</span> <span m='1942330'>still</span>
  <span m='1942570'>the</span> <span m='1942720'>old</span> <span m='1942900'>triangle</span>
  <span m='1943290'>with</span> <span m='1943500'>x in it,</span> <span m='1944520'>and</span>
  <span m='1944700'>it's</span> <span m='1944820'>still</span> <span m='1945090'>going</span>
  <span m='1945210'>to</span> <span m='1945330'>prefer</span> <span m='1945820'>it's</span>
  <span m='1945980'>still</span> <span m='1946140'>going</span> <span m='1946260'>to</span>
  <span m='1946320'>point</span> <span m='1946650'>to</span> <span m='1947140'>w.</span>
  <span m='1950040'>But</span> <span m='1950280'>we</span> <span m='1950460'>want</span>
  <span m='1950720'>v</span> <span m='1950910'>to</span> <span m='1951030'>eventually</span>
  <span m='1951420'>end</span> <span m='1951510'>up</span> <span m='1951660'>to</span>
  <span m='1951840'>be</span> <span m='1951930'>the</span> <span m='1952050'>very,</span>
  <span m='1952390'>very</span> <span m='1952500'>root</span> <span m='1953490'>so</span>
  <span m='1953700'>I'd</span> <span m='1953820'>like</span> <span m='1953970'>to</span>
  <span m='1954120'>make</span> <span m='1954440'>the</span> <span m='1954780'>root</span>
  <span m='1955020'>again</span> <span m='1955860'>after</span> <span m='1956250'>I</span>
  <span m='1956340'>did</span> <span m='1956490'>this</span> <span m='1956670'>concatenation.</span>
  </p><p><span m='1959450'>And</span> <span m='1959580'>so</span> <span m='1959730'>there</span>
  <span m='1959880'>you</span> <span m='1959970'>go</span> <span m='1961110'>you</span>
  <span m='1961230'>can</span> <span m='1961350'>think</span> <span m='1961500'>of</span>
  <span m='1961590'>this</span> <span m='1961770'>as</span> <span m='1961890'>a</span>
  <span m='1961950'>second</span> <span m='1962280'>splay</span> <span m='1963260'>if</span>
  <span m='1963360'>you</span> <span m='1963420'>want</span> <span m='1964050'>or</span>
  <span m='1964320'>as</span> <span m='1964440'>a</span> <span m='1964530'>rotation,</span>
  <span m='1968730'>either</span> <span m='1968970'>way.</span> <span m='1970170'>And</span>
  <span m='1970290'>now</span> <span m='1970680'>we're</span> <span m='1970800'>going</span>
  <span m='1970950'>to</span> <span m='1971010'>loop.</span> <span m='1972040'>OK,</span>
  <span m='1972500'>the</span> <span m='1972600'>one</span> <span m='1972810'>thing</span>
  <span m='1973320'>I</span> <span m='1973950'>didn't</span> <span m='1974190'>make</span>
  <span m='1974370'>explicit</span> <span m='1974820'>is</span> <span m='1974940'>that</span>
  <span m='1975090'>when</span> <span m='1975240'>we</span> <span m='1975360'>do</span>
  <span m='1975480'>a</span> <span m='1975560'>splay,</span> <span m='1976110'>or</span>
  <span m='1976380'>when</span> <span m='1976530'>we</span> <span m='1976620'>do</span>
  <span m='1976740'>a</span> <span m='1976770'>rotation,</span> <span m='1978870'>you</span>
  <span m='1979080'>have</span> <span m='1979320'>to</span> <span m='1979620'>carry</span>
  <span m='1980070'>along</span> <span m='1980520'>the</span> <span m='1980820'>path</span>
  <span m='1981330'>parent</span> <span m='1981750'>pointer.</span> <span m='1982650'>So</span>
  <span m='1982920'>like</span> <span m='1983070'>right</span> <span m='1983280'>now,</span>
  <span m='1984180'>sorry,</span> <span m='1984720'>in</span> <span m='1984840'>this</span>
  <span m='1985020'>picture,</span> <span m='1985830'>w</span> <span m='1986310'>has</span>
  <span m='1986500'>some</span> <span m='1986670'>path</span> <span m='1986880'>parent</span>
  <span m='1987090'>pointer</span> <span m='1987330'>because</span> <span m='1987510'>it's</span>
  <span m='1987690'>the</span> <span m='1987810'>root</span> <span m='1988050'>of</span>
  <span m='1988200'>its</span> <span m='1988410'>ox</span> <span m='1988690'>tree.</span>
  <span m='1989340'>After</span> <span m='1989610'>we</span> <span m='1989700'>do</span>
  <span m='1989790'>the</span> <span m='1989880'>rotation,</span> <span m='1990670'>v</span>
  <span m='1990960'>is</span> <span m='1991230'>the</span> <span m='1991350'>root</span>
  <span m='1991800'>and</span> <span m='1991920'>so</span> <span m='1992100'>it's</span>
  <span m='1992250'>going</span> <span m='1992360'>to</span> <span m='1992430'>have</span>
  <span m='1992610'>the</span> <span m='1992730'>parent</span> <span m='1993000'>path</span>
  <span m='1993270'>parent</span> <span m='1993480'>point.</span> <span m='1993690'>Or</span>
  <span m='1993780'>you</span> <span m='1993900'>can</span> <span m='1994020'>just</span>
  <span m='1994170'>define</span> <span m='1994620'>rotate</span> <span m='1995010'>to</span>
  <span m='1995490'>preserve</span> <span m='1995910'>that</span> <span m='1996060'>information.</span>
  </p><p><span m='1998770'>So</span> <span m='1998850'>now</span> <span m='1999270'>v</span>
  <span m='1999540'>has</span> <span m='1999750'>some</span> <span m='1999990'>new</span>
  <span m='2000200'>path</span> <span m='2000530'>parent</span> <span m='2001270'>and</span>
  <span m='2001370'>we</span> <span m='2001490'>do</span> <span m='2001610'>the</span>
  <span m='2001730'>loop.</span> <span m='2002030'>As</span> <span m='2002180'>long</span>
  <span m='2002390'>as</span> <span m='2002540'>it</span> <span m='2002610'>is</span>
  <span m='2002720'>not</span> <span m='2003300'>there's</span> <span m='2003470'>something</span>
  <span m='2003860'>there,</span> <span m='2004650'>we're</span> <span m='2004850'>going</span>
  <span m='2004970'>to</span> <span m='2005060'>splay</span> <span m='2005420'>it</span>
  <span m='2006470'>stick</span> <span m='2006800'>them</span> <span m='2006920'>together.</span>
  <span m='2007700'>Repeat,</span> <span m='2009170'>the</span> <span m='2009260'>number</span>
  <span m='2009470'>of</span> <span m='2009530'>times</span> <span m='2009800'>we</span>
  <span m='2009860'>repeat,</span> <span m='2010490'>is</span> <span m='2010640'>equal</span>
  <span m='2010910'>to</span> <span m='2011090'>the</span> <span m='2011180'>number</span>
  <span m='2011480'>of</span> <span m='2011570'>preferred</span> <span m='2011930'>child</span>
  <span m='2013190'>changes.</span> <span m='2014730'>So</span> <span m='2014830'>that's</span>
  <span m='2014930'>how</span> <span m='2015020'>we're</span> <span m='2015080'>going</span>
  <span m='2015200'>to</span> <span m='2015260'>analyze</span> <span m='2015710'>the</span>
  <span m='2015780'>thing.</span> <span m='2016000'>How</span> <span m='2016190'>many</span>
  <span m='2016430'>times</span> <span m='2016850'>does</span> <span m='2017030'>a</span>
  <span m='2017390'>child</span> <span m='2017660'>have</span> <span m='2017810'>to</span>
  <span m='2017870'>change</span> <span m='2018720'>in</span> <span m='2018830'>this</span>
  <span m='2018980'>world.</span> </p><p><span m='2021020'>OK,</span> <span m='2025500'>clear,</span>
  <span m='2026010'>more</span> <span m='2026130'>or</span> <span m='2026160'>less</span>
  <span m='2026790'>that</span> <span m='2026970'>is</span> <span m='2027160'>that's</span>
  <span m='2027410'>the</span> <span m='2027510'>hard</span> <span m='2028380'>the</span>
  <span m='2028500'>hard</span> <span m='2028710'>operation</span> <span m='2029330'>access.</span>
  <span m='2032960'>One</span> <span m='2033110'>thing</span> <span m='2033320'>to</span>
  <span m='2033410'>note</span> <span m='2034160'>is</span> <span m='2034310'>v</span>
  <span m='2034550'>will</span> <span m='2034760'>have</span> <span m='2034970'>no</span>
  <span m='2035150'>right</span> <span m='2035330'>child</span> <span m='2035660'>at</span>
  <span m='2035750'>the</span> <span m='2035870'>end,</span> <span m='2036290'>and</span>
  <span m='2036440'>it</span> <span m='2036500'>will</span> <span m='2036620'>be</span>
  <span m='2036740'>the</span> <span m='2036860'>root</span> <span m='2037640'>of</span>
  <span m='2037790'>the</span> <span m='2037880'>tree</span> <span m='2038090'>of</span>
  <span m='2038180'>ox</span> <span m='2038320'>trees.</span> <span m='2039410'>Why</span>
  <span m='2040070'>the</span> <span m='2040220'>tree</span> <span m='2040370'>of</span>
  <span m='2040640'>ox trees?</span> <span m='2041240'>When</span> <span m='2041450'>we</span>
  <span m='2041570'>stop,</span> <span m='2042410'>we</span> <span m='2042530'>have</span>
  <span m='2042800'>no</span> <span m='2042920'>path</span> <span m='2043210'>parent.</span>
  <span m='2043490'>That</span> <span m='2043640'>means</span> <span m='2043880'>we</span>
  <span m='2044060'>are</span> <span m='2044180'>the</span> <span m='2044300'>overall</span>
  <span m='2044690'>root.</span> <span m='2045720'>So</span> <span m='2046040'>that's</span>
  <span m='2046250'>the</span> <span m='2046370'>end.</span> </p><p><span m='2049570'>Cool</span>
  <span m='2051219'>now</span> <span m='2051489'>let</span> <span m='2051639'>me</span>
  <span m='2051760'>tell</span> <span m='2052000'>you</span> <span m='2052210'>how</span>
  <span m='2052449'>to</span> <span m='2052600'>do--</span> <span m='2054830'>first,</span>
  <span m='2054980'>I'll</span> <span m='2055120'>do</span> <span m='2055239'>the</span>
  <span m='2055360'>queries,</span> <span m='2056320'>and</span> <span m='2056469'>then</span>
  <span m='2056620'>I'll</span> <span m='2056710'>do</span> <span m='2057100'>the</span>
  <span m='2057250'>updates,</span> <span m='2057760'>link-cut.</span> <span m='2057989'>Cut</span>
  <span m='2058989'>Make</span> <span m='2059170'>tree,</span> <span m='2059949'>I'm
  pretty sure,</span> <span m='2060340'>if</span> <span m='2060560'>you all think</span>
  <span m='2060590'>you know</span> <span m='2060699'>how</span> <span m='2060810'>did</span>
  <span m='2061010'>you</span> <span m='2061120'>make</span> <span m='2061310'>tree.</span>
  <span m='2062440'>So</span> <span m='2062620'>let's</span> <span m='2062800'>start</span>
  <span m='2063100'>with</span> <span m='2063489'>find</span> <span m='2063760'>root.</span>
  <span m='2068530'>So</span> <span m='2070900'>for</span> <span m='2071050'>find</span>
  <span m='2071350'>root,</span> <span m='2072580'>first</span> <span m='2072820'>thing</span>
  <span m='2073000'>we're</span> <span m='2073070'>going</span> <span m='2073170'>to</span>
  <span m='2073270'>do</span> <span m='2073389'>is</span> <span m='2073540'>access
  v.</span> </p><p><span m='2076150'>So</span> <span m='2076630'>what</span> <span
  m='2076840'>that</span> <span m='2077020'>gives</span> <span m='2077320'>us</span>
  <span m='2078190'>is</span> <span m='2078580'>v,</span> <span m='2079300'>no</span>
  <span m='2079690'>right child,</span> <span m='2080485'>some</span> <span m='2080800'>left</span>
  <span m='2080980'>child.</span> <span m='2082750'>This</span> <span m='2082989'>is</span>
  <span m='2083469'>v's</span> <span m='2083800'>ox</span> <span m='2084159'>tree,</span>
  <span m='2085150'>but</span> <span m='2085330'>the</span> <span m='2085480'>roots</span>
  <span m='2086050'>of</span> <span m='2086170'>the</span> <span m='2086320'>overall</span>
  <span m='2086710'>tree</span> <span m='2087489'>is</span> <span m='2087670'>right</span>
  <span m='2087850'>here.</span> <span m='2088949'>This</span> <span m='2089110'>is</span>
  <span m='2089260'>r.</span> <span m='2092060'>Because,</span> <span m='2093380'>in</span>
  <span m='2093560'>the</span> <span m='2093679'>end,</span> <span m='2093860'>we</span>
  <span m='2093980'>know</span> <span m='2094280'>that,</span> <span m='2094610'>the</span>
  <span m='2095179'>mean</span> <span m='2095389'>the</span> <span m='2095480'>root</span>
  <span m='2095719'>ox</span> <span m='2095989'>tree</span> <span m='2096290'>always</span>
  <span m='2096650'>contains</span> <span m='2097850'>the</span> <span m='2097940'>root</span>
  <span m='2098150'>node</span> <span m='2098600'>of</span> <span m='2098780'>the</span>
  <span m='2098900'>tree,</span> <span m='2099590'>and</span> <span m='2100070'>the</span>
  <span m='2100190'>access</span> <span m='2100640'>operation</span> <span m='2101210'>makes</span>
  <span m='2101450'>it</span> <span m='2101570'>also</span> <span m='2102010'>contain</span>
  <span m='2102470'>v</span> <span m='2105200'>So</span> <span m='2106400'>what's</span>
  <span m='2107420'>the</span> <span m='2107570'>highest</span> <span m='2107930'>node</span>
  <span m='2108230'>in</span> <span m='2108320'>that</span> <span m='2108500'>path</span>
  <span m='2108920'>from</span> <span m='2109130'>r to v?</span> <span m='2109400'>Well,</span>
  <span m='2109670'>it's</span> <span m='2109940'>the</span> <span m='2110030'>left</span>
  <span m='2110140'>most</span> <span m='2110480'>node</span> <span m='2110700'>in</span>
  <span m='2110780'>the</span> <span m='2110900'>thing.</span> <span m='2111590'>So</span>
  <span m='2111770'>you</span> <span m='2111860'>just</span> <span m='2112430'>block</span>
  <span m='2112730'>left</span> <span m='2117320'>to</span> <span m='2117500'>find</span>
  <span m='2119090'>the</span> <span m='2119180'>root</span> <span m='2119420'>r.</span>
  </p><p><span m='2120650'>And then,</span> <span m='2120980'>we</span> <span m='2121160'>are</span>
  <span m='2121250'>going</span> <span m='2121370'>to</span> <span m='2121430'>do</span>
  <span m='2121550'>one</span> <span m='2121760'>more</span> <span m='2121910'>thing,</span>
  <span m='2122250'>which</span> <span m='2122310'>splay</span> <span m='2122970'>r.</span>
  <span m='2124546'>If</span> <span m='2124940'>we</span> <span m='2125030'>didn't</span>
  <span m='2125280'>splay</span> <span m='2125570'>r,</span> <span m='2125720'>we'd</span>
  <span m='2125870'>be</span> <span m='2125990'>in</span> <span m='2126080'>trouble</span>
  <span m='2126410'>because</span> <span m='2126800'>this</span> <span m='2127010'>is</span>
  <span m='2127130'>a</span> <span m='2127190'>splay</span> <span m='2127460'>tree.</span>
  <span m='2128450'>If</span> <span m='2128660'>you</span> <span m='2128780'>say</span>
  <span m='2129290'>this r</span> <span m='2129760'>might</span> <span m='2130190'>be</span>
  <span m='2130310'>extremely</span> <span m='2130820'>deep</span> <span m='2131060'>in</span>
  <span m='2131150'>the</span> <span m='2131270'>tree.</span> <span m='2132360'>And</span>
  <span m='2132410'>so</span> <span m='2132560'>if</span> <span m='2132650'>you</span>
  <span m='2132740'>just</span> <span m='2133100'>repeatedly</span> <span m='2133670'>said,</span>
  <span m='2133880'>find</span> <span m='2134150'>root</span> <span m='2134270'>of</span>
  <span m='2134370'>v,</span> <span m='2134510'>find</span> <span m='2134840'>v</span>
  <span m='2135110'>for</span> <span m='2135230'>the</span> <span m='2135320'>same</span>
  <span m='2135560'>v,</span> <span m='2136340'>you</span> <span m='2136460'>don't</span>
  <span m='2136610'>want</span> <span m='2136730'>to</span> <span m='2136790'>have</span>
  <span m='2136910'>to</span> <span m='2137000'>walk</span> <span m='2137300'>down</span>
  <span m='2137510'>linear</span> <span m='2137900'>length</span> <span m='2138170'>path</span>
  <span m='2138560'>every</span> <span m='2138800'>single</span> <span m='2139070'>time.</span>
  <span m='2139940'>So</span> <span m='2140180'>we're</span> <span m='2140300'>going</span>
  <span m='2140420'>to</span> <span m='2140480'>splay</span> <span m='2140870'>it</span>
  <span m='2141500'>every</span> <span m='2141710'>time</span> <span m='2142040'>we</span>
  <span m='2142280'>touch</span> <span m='2142640'>the</span> <span m='2142760'>root,</span>
  <span m='2143870'>so</span> <span m='2144080'>that</span> <span m='2144500'>very</span>
  <span m='2144710'>soon</span> <span m='2145070'>r</span> <span m='2145330'>will</span>
  <span m='2145460'>be</span> <span m='2146090'>near</span> <span m='2146270'>the</span>
  <span m='2146390'>root</span> <span m='2146660'>of</span> <span m='2146810'>the</span>
  <span m='2146900'>tree</span> <span m='2147140'>of</span> <span m='2147230'>ox</span>
  <span m='2147500'>trees,</span> <span m='2147810'>and</span> <span m='2147900'>so</span>
  <span m='2148100'>this</span> <span m='2148370'>operation</span> <span m='2148760'>will</span>
  <span m='2148880'>become</span> <span m='2149210'>fast.</span> <span m='2149520'>So</span>
  <span m='2149750'>amortized</span> <span m='2150310'>it</span> <span m='2150380'>will</span>
  <span m='2150500'>always</span> <span m='2150710'>be</span> <span m='2150840'>order
  log n.</span> <span m='2152150'>But</span> <span m='2152270'>we</span> <span m='2152420'>need</span>
  <span m='2152600'>to</span> <span m='2152720'>do</span> <span m='2152870'>that.</span>
  </p><p><span m='2154970'>OK</span> <span m='2155240'>that's</span> <span m='2156110'>fine</span>
  <span m='2156470'>root.</span> <span m='2157700'>Let's</span> <span m='2157940'>do</span>
  <span m='2158270'>half</span> <span m='2158570'>aggregate.</span> <span m='2165570'>Of</span>
  <span m='2166190'>aggregates</span> <span m='2166670'>basically</span> <span m='2167060'>the</span>
  <span m='2167150'>same.</span> <span m='2168440'>Actually,</span> <span m='2168710'>even</span>
  <span m='2168920'>easier.</span> <span m='2169910'>First</span> <span m='2170150'>thing</span>
  <span m='2170300'>we</span> <span m='2170390'>do</span> <span m='2170780'>like</span>
  <span m='2170990'>all</span> <span m='2171170'>of</span> <span m='2171290'>our</span>
  <span m='2171350'>operations,</span> <span m='2172040'>is</span> <span m='2172400'>access</span>
  <span m='2173325'>v,</span> <span m='2173780'>so</span> <span m='2173930'>we</span>
  <span m='2174020'>get</span> <span m='2174170'>that</span> <span m='2174350'>picture.</span>
  <span m='2176270'>So</span> <span m='2177170'>remember</span> <span m='2177590'>what</span>
  <span m='2177770'>this</span> <span m='2177920'>corresponds</span> <span m='2178550'>to?</span>
  <span m='2178700'>This</span> <span m='2179570'>is</span> <span m='2179760'>an</span>
  <span m='2180110'>ox</span> <span m='2180440'>tree</span> <span m='2181620'>that</span>
  <span m='2181880'>represents</span> <span m='2183230'>a</span> <span m='2183290'>path</span>
  <span m='2184160'>ending</span> <span m='2184490'>in</span> <span m='2184610'>v</span>
  <span m='2186026'>So</span> <span m='2186500'>this</span> <span m='2186710'>is</span>
  <span m='2186830'>in</span> <span m='2186920'>the</span> <span m='2187010'>represented</span>
  <span m='2187490'>tree.</span> </p><p><span m='2189860'>And</span> <span m='2190250'>the</span>
  <span m='2190370'>goal</span> <span m='2190760'>of</span> <span m='2190910'>a</span>
  <span m='2190970'>path</span> <span m='2191270'>aggregate</span> <span m='2191720'>is</span>
  <span m='2191840'>to</span> <span m='2191930'>compute</span> <span m='2192380'>the</span>
  <span m='2192470'>min</span> <span m='2192710'>or</span> <span m='2192800'>the</span>
  <span m='2192920'>max</span> <span m='2193220'>or</span> <span m='2193280'>to</span>
  <span m='2193410'>some</span> <span m='2193690'>of</span> <span m='2193910'>those</span>
  <span m='2194120'>things.</span> <span m='2195480'>So</span> <span m='2196280'>I</span>
  <span m='2196400'>basically</span> <span m='2196760'>have</span> <span m='2196940'>this</span>
  <span m='2197120'>tree</span> <span m='2197360'>that</span> <span m='2197450'>represents</span>
  <span m='2197930'>exactly</span> <span m='2198410'>the</span> <span m='2198530'>things</span>
  <span m='2198770'>I</span> <span m='2198830'>care</span> <span m='2199040'>about,</span>
  <span m='2199970'>and</span> <span m='2200120'>I</span> <span m='2200180'>just</span>
  <span m='2200300'>need</span> <span m='2200450'>to</span> <span m='2200600'>do</span>
  <span m='2201390'>a</span> <span m='2201500'>sum</span> <span m='2202010'>or</span>
  <span m='2202250'>a</span> <span m='2202280'>min</span> <span m='2202520'>or</span>
  <span m='2202620'>a</span> <span m='2202640'>max</span> <span m='2203030'>or</span>
  <span m='2203090'>whatever.</span> <span m='2203780'>So</span> <span m='2204020'>easy</span>
  <span m='2204290'>way</span> <span m='2204410'>to</span> <span m='2204500'>do</span>
  <span m='2204620'>it</span> <span m='2204710'>is</span> <span m='2204800'>augment</span>
  <span m='2205340'>all</span> <span m='2205550'>the</span> <span m='2205760'>ox</span>
  <span m='2206030'>trees</span> <span m='2206390'>to</span> <span m='2206600'>have</span>
  <span m='2207020'>subtree</span> <span m='2207480'>size,</span> <span m='2207800'>subtree</span>
  <span m='2208250'>sums,</span> <span m='2208640'>or</span> <span m='2208760'>mins</span>
  <span m='2209090'>or</span> <span m='2209150'>maxes,</span> <span m='2209630'>whatever</span>
  <span m='2209930'>operations</span> <span m='2210380'>you</span> <span m='2210500'>care</span>
  <span m='2210650'>about.</span> <span m='2211860'>And</span> <span m='2211880'>so</span>
  <span m='2212060'>then</span> <span m='2212390'>it's just</span> <span m='2212690'>a</span>
  <span m='2214100'>return</span> <span m='2216800'>v.subtree</span> <span m='2222210'>min</span>
  <span m='2222440'>max,</span> <span m='2223180'>whatever.</span> </p><p><span m='2228230'>You</span>
  <span m='2228320'>have</span> <span m='2228440'>to</span> <span m='2228620'>have</span>
  <span m='2228740'>to</span> <span m='2228830'>check</span> <span m='2229760'>when</span>
  <span m='2229910'>we</span> <span m='2230000'>do</span> <span m='2230150'>link-cuts</span>
  <span m='2230840'>that</span> <span m='2230990'>it's</span> <span m='2231110'>easy</span>
  <span m='2231350'>to</span> <span m='2231500'>maintain</span> <span m='2231890'>augmentation</span>
  <span m='2232460'>like</span> <span m='2232610'>this,</span> <span m='2232790'>but</span>
  <span m='2232940'>it</span> <span m='2233060'>is.</span> <span m='2233930'>And</span>
  <span m='2234080'>now</span> <span m='2234320'>this,</span> <span m='2235110'>the</span>
  <span m='2235310'>subtree</span> <span m='2236330'>aggregations</span> <span m='2237200'>are</span>
  <span m='2237410'>relative</span> <span m='2237950'>to</span> <span m='2238040'>your</span>
  <span m='2238250'>own</span> <span m='2238560'>ox tree.</span> <span m='2239030'>You</span>
  <span m='2239750'>don't</span> <span m='2239930'>go</span> <span m='2240080'>deeper.</span>
  <span m='2240920'>In</span> <span m='2240980'>fact,</span> <span m='2241160'>there's</span>
  <span m='2241280'>no</span> <span m='2241460'>way</span> <span m='2241640'>to</span>
  <span m='2241730'>go</span> <span m='2241880'>deeper</span> <span m='2242240'>because</span>
  <span m='2243230'>if</span> <span m='2243410'>you</span> <span m='2243500'>look</span>
  <span m='2243680'>at</span> <span m='2243740'>the</span> <span m='2243830'>structure,</span>
  <span m='2244380'>there's</span> <span m='2244580'>no</span> <span m='2244790'>way</span>
  <span m='2244880'>to</span> <span m='2244970'>go</span> <span m='2245120'>down.</span>
  <span m='2245540'>We</span> <span m='2245690'>store</span> <span m='2245960'>these</span>
  <span m='2246110'>path</span> <span m='2246410'>parents,</span> <span m='2246860'>but</span>
  <span m='2247010'>we</span> <span m='2247100'>can't</span> <span m='2247430'>afford</span>
  <span m='2247820'>to</span> <span m='2247910'>store</span> <span m='2248150'>path</span>
  <span m='2248580'>children</span> <span m='2249260'>because</span> <span m='2249440'>a</span>
  <span m='2249500'>node</span> <span m='2249800'>may</span> <span m='2249950'>have</span>
  <span m='2250160'>a</span> <span m='2250400'>zillion</span> <span m='2250820'>path</span>
  <span m='2251160'>children.</span> <span m='2252050'>So</span> <span m='2252770'>it's</span>
  <span m='2252920'>kind</span> <span m='2253100'>of</span> <span m='2253220'>awkward</span>
  <span m='2253490'>to</span> <span m='2253580'>store</span> <span m='2253820'>them.</span>
  <span m='2254600'>we</span> <span m='2254810'>don't</span> <span m='2254990'>have</span>
  <span m='2255200'>to</span> <span m='2256590'>because</span> <span m='2256970'>this</span>
  <span m='2257180'>aggregation</span> <span m='2257630'>is</span> <span m='2257720'>just</span>
  <span m='2257900'>within</span> <span m='2258320'>the</span> <span m='2258490'>ox</span>
  <span m='2258740'>tree.</span> <span m='2259010'>That's</span> <span m='2259220'>exactly</span>
  <span m='2259730'>what</span> <span m='2259850'>we</span> <span m='2259940'>care</span>
  <span m='2260150'>about</span> <span m='2260330'>because</span> <span m='2260510'>it</span>
  <span m='2260570'>represents</span> <span m='2261080'>that</span> <span m='2261260'>path</span>
  <span m='2261650'>and</span> <span m='2261740'>nothing</span> <span m='2262070'>more.</span>
  </p><p><span m='2264120'>So</span> <span m='2264170'>you</span> <span m='2264260'>see,</span>
  <span m='2264530'>access</span> <span m='2265010'>makes</span> <span m='2265490'>our</span>
  <span m='2265610'>life</span> <span m='2265940'>pretty</span> <span m='2266330'>darn</span>
  <span m='2266570'>easy.</span> <span m='2268670'>Once</span> <span m='2268880'>that</span>
  <span m='2269030'>path</span> <span m='2269270'>is</span> <span m='2269390'>preferred,</span>
  <span m='2269930'>we</span> <span m='2270080'>can</span> <span m='2270230'>do</span>
  <span m='2270350'>whatever</span> <span m='2270650'>we</span> <span m='2270800'>need</span>
  <span m='2270950'>to</span> <span m='2271100'>with</span> <span m='2271220'>that</span>
  <span m='2271370'>path.</span> <span m='2271760'>We</span> <span m='2271880'>can</span>
  <span m='2272480'>compute</span> <span m='2272720'>aggregations,</span> <span m='2273720'>the</span>
  <span m='2273820'>root,</span> <span m='2274670'>anything</span> <span m='2276140'>pretty</span>
  <span m='2276350'>much</span> <span m='2276680'>instantly</span> <span m='2277520'>once</span>
  <span m='2277730'>we</span> <span m='2277820'>have</span> <span m='2278000'>access.</span>
  <span m='2280790'>OK,</span> <span m='2281570'>I</span> <span m='2281720'>claim</span>
  <span m='2282500'>also</span> <span m='2283100'>link and cut</span> <span m='2283730'>are
  really</span> <span m='2283940'>easy.</span> <span m='2288060'>So</span> <span m='2288410'>let</span>
  <span m='2288590'>me</span> <span m='2288710'>show</span> <span m='2288890'>you</span>
  <span m='2288980'>that.</span> </p><p><span m='2291210'>So</span> <span m='2291410'>let's</span>
  <span m='2291560'>start</span> <span m='2291800'>with</span> <span m='2292150'>cut.</span>
  <span m='2296060'>First</span> <span m='2296300'>thing</span> <span m='2296420'>we</span>
  <span m='2296510'>do,</span> <span m='2297650'>you</span> <span m='2297740'>guessed</span>
  <span m='2298040'>it,</span> <span m='2298440'>access</span> <span m='2298800'>v.</span>
  <span m='2302150'>So</span> <span m='2303320'>think</span> <span m='2303470'>about</span>
  <span m='2303680'>this</span> <span m='2303860'>picture</span> <span m='2304160'>a</span>
  <span m='2304190'>little</span> <span m='2304400'>bit.</span> <span m='2304940'>So</span>
  <span m='2305030'>we</span> <span m='2305120'>have</span> <span m='2305470'>v,</span>
  <span m='2305960'>have</span> <span m='2306980'>this</span> <span m='2307130'>stuff.</span>
  <span m='2308900'>What</span> <span m='2309080'>this</span> <span m='2309260'>corresponds</span>
  <span m='2309950'>to,</span> <span m='2310070'>this</span> <span m='2310220'>is</span>
  <span m='2310280'>the</span> <span m='2310430'>ox</span> <span m='2310730'>tree</span>
  <span m='2311520'>in</span> <span m='2311780'>the</span> <span m='2311870'>represented</span>
  <span m='2312380'>tree.</span> <span m='2313250'>This</span> <span m='2313460'>is</span>
  <span m='2313550'>a</span> <span m='2313610'>path</span> <span m='2314000'>from</span>
  <span m='2314210'>the</span> <span m='2314300'>root</span> <span m='2314960'>to</span>
  <span m='2315080'>v.</span> <span m='2317090'>And</span> <span m='2317240'>our</span>
  <span m='2317420'>goal</span> <span m='2318080'>in</span> <span m='2318260'>the</span>
  <span m='2318350'>cut</span> <span m='2318620'>operation</span> <span m='2319280'>is</span>
  <span m='2319370'>to</span> <span m='2319490'>separate</span> <span m='2319970'>v
  from</span> <span m='2320530'>its</span> <span m='2320660'>parent</span> <span m='2321320'>in</span>
  <span m='2321470'>the</span> <span m='2321560'>represented</span> <span m='2322130'>tree.</span>
  <span m='2322700'>So</span> <span m='2322820'>we</span> <span m='2322940'>want</span>
  <span m='2323180'>to</span> <span m='2323300'>remove</span> <span m='2323750'>this</span>
  <span m='2323990'>edge</span> <span m='2324950'>above</span> <span m='2325360'>v.</span>
  <span m='2326180'>That</span> <span m='2326390'>basically</span> <span m='2326840'>corresponds</span>
  <span m='2327350'>to</span> <span m='2327470'>this</span> <span m='2327740'>edge.</span>
  <span m='2328970'>Connection</span> <span m='2329300'>from</span> <span m='2329510'>v</span>
  <span m='2329720'>to</span> <span m='2329840'>all</span> <span m='2329990'>the</span>
  <span m='2330080'>things</span> <span m='2330350'>less</span> <span m='2330650'>deep</span>
  <span m='2330920'>than</span> <span m='2331070'>it.</span> <span m='2332210'>So</span>
  <span m='2332330'>this</span> <span m='2332570'>is</span> <span m='2332690'>the</span>
  <span m='2332810'>preferred</span> <span m='2333170'>path.</span> </p><p><span m='2333530'>Of</span>
  <span m='2333620'>course,</span> <span m='2334080'>in</span> <span m='2334580'>reality,</span>
  <span m='2335060'>there</span> <span m='2335120'>is</span> <span m='2335210'>some</span>
  <span m='2335420'>subtree</span> <span m='2335840'>down</span> <span m='2336110'>here,</span>
  <span m='2337040'>and</span> <span m='2337160'>that's</span> <span m='2337400'>going</span>
  <span m='2337550'>to</span> <span m='2337610'>correspond</span> <span m='2338390'>to</span>
  <span m='2338690'>things</span> <span m='2339050'>that</span> <span m='2339170'>are</span>
  <span m='2339260'>linked</span> <span m='2339560'>here</span> <span m='2339990'>by
  path</span> <span m='2340490'>parent</span> <span m='2340760'>pointers.</span> <span
  m='2342030'>So</span> <span m='2342890'>they'll</span> <span m='2343040'>come</span>
  <span m='2343280'>along</span> <span m='2343550'>for</span> <span m='2343670'>the</span>
  <span m='2343760'>ride,</span> <span m='2344120'>because</span> <span m='2344300'>what</span>
  <span m='2344960'>they</span> <span m='2345140'>know</span> <span m='2345410'>is</span>
  <span m='2345530'>they're</span> <span m='2345650'>attached</span> <span m='2346040'>to</span>
  <span m='2346130'>v.</span> <span m='2348350'>And</span> <span m='2348470'>so</span>
  <span m='2348620'>all</span> <span m='2348830'>we</span> <span m='2348950'>need</span>
  <span m='2349100'>to</span> <span m='2349190'>do</span> <span m='2349310'>is</span>
  <span m='2349400'>delete</span> <span m='2349670'>this</span> <span m='2349770'>edge</span>
  <span m='2350030'>and</span> <span m='2350150'>we're</span> <span m='2350270'>done.</span>
  <span m='2351650'>It's</span> <span m='2351740'>kind</span> <span m='2353450'>of</span>
  <span m='2353540'>crazy,</span> <span m='2355400'>but</span> <span m='2355610'>it</span>
  <span m='2355700'>works.</span> <span m='2357450'>So</span> <span m='2357590'>what</span>
  <span m='2357720'>we</span> <span m='2357820'>do,</span> <span m='2358630'>say,</span>
  <span m='2359110'>v</span> <span m='2360470'>left</span> <span m='2361870'>the</span>
  <span m='2361980'>parent</span> <span m='2364750'>is</span> <span m='2364970'>none.</span>
  <span m='2367550'>The</span> <span m='2367760'>left</span> <span m='2369400'>is</span>
  <span m='2369560'>none.</span> <span m='2371870'>That's it.</span> <span m='2372860'>Gone.</span>
  <span m='2373830'>That</span> <span m='2374140'>edge has</span> <span m='2374360'>disappeared.</span>
  <span m='2376100'>What</span> <span m='2376340'>will</span> <span m='2376490'>be</span>
  <span m='2376670'>left</span> <span m='2376940'>with</span> <span m='2377720'>is</span>
  <span m='2378230'>v</span> <span m='2379850'>all</span> <span m='2380000'>by</span>
  <span m='2380150'>itself.</span> <span m='2380405'>/</span> <span m='2380660'>Has</span>
  <span m='2380870'>no</span> <span m='2381050'>left</span> <span m='2381290'>child,</span>
  <span m='2381680'>no</span> <span m='2381830'>right</span> <span m='2382040'>child.</span>
  <span m='2382970'>It</span> <span m='2383090'>still</span> <span m='2383450'>has</span>
  <span m='2385070'>some</span> <span m='2385640'>things</span> <span m='2385970'>that</span>
  <span m='2386180'>link</span> <span m='2386420'>into</span> <span m='2386690'>it</span>
  <span m='2387200'>via</span> <span m='2387520'>path</span> <span m='2387830'>parent</span>
  <span m='2388070'>pointers.</span> </p><p><span m='2389940'>But</span> <span m='2392390'>v</span>
  <span m='2392570'>is</span> <span m='2392690'>alone</span> <span m='2393050'>in</span>
  <span m='2393140'>its</span> <span m='2393320'>ox</span> <span m='2393620'>tree</span>
  <span m='2394760'>after</span> <span m='2395030'>you</span> <span m='2395120'>do</span>
  <span m='2395270'>a</span> <span m='2395340'>cut.</span> <span m='2396500'>This</span>
  <span m='2396710'>thing</span> <span m='2396950'>will</span> <span m='2397070'>now</span>
  <span m='2397280'>live</span> <span m='2397670'>in</span> <span m='2397910'>a</span>
  <span m='2397970'>separate</span> <span m='2398480'>world.</span> <span m='2399860'>In</span>
  <span m='2399980'>particular,</span> <span m='2401300'>this</span> <span m='2401540'>node</span>
  <span m='2402260'>becomes</span> <span m='2402680'>the</span> <span m='2402800'>new</span>
  <span m='2403100'>root</span> <span m='2403760'>of</span> <span m='2404270'>the</span>
  <span m='2404420'>tree</span> <span m='2404660'>of</span> <span m='2404750'>ox</span>
  <span m='2404990'>trees</span> <span m='2405920'>for</span> <span m='2406100'>this</span>
  <span m='2406310'>tree.</span> <span m='2406860'>after</span> <span m='2407120'>we</span>
  <span m='2407180'>do</span> <span m='2407300'>the</span> <span m='2407390'>cut,</span>
  <span m='2407600'>there's</span> <span m='2407780'>two</span> <span m='2407960'>trees.</span>
  <span m='2408770'>So</span> <span m='2408890'>there's</span> <span m='2409070'>two</span>
  <span m='2409280'>trees</span> <span m='2409550'>of</span> <span m='2409640'>ox</span>
  <span m='2409880'>trees.</span> <span m='2410150'>There's</span> <span m='2410360'>the</span>
  <span m='2410450'>one</span> <span m='2410630'>with</span> <span m='2411330'>v,</span>
  <span m='2411500'>v will</span> <span m='2411620'>remain</span> <span m='2411980'>the</span>
  <span m='2412070'>root</span> <span m='2412250'>of</span> <span m='2412340'>its</span>
  <span m='2412700'>tree</span> <span m='2412910'>of</span> <span m='2413000'>ox</span>
  <span m='2413150'>trees.</span> <span m='2414200'>And</span> <span m='2414320'>the</span>
  <span m='2414440'>other</span> <span m='2414650'>one,</span> <span m='2415070'>this</span>
  <span m='2415250'>thing</span> <span m='2416690'>called</span> <span m='2416900'>x,</span>
  <span m='2417950'>becomes</span> <span m='2418460'>its</span> <span m='2418640'>own</span>
  <span m='2418970'>root</span> <span m='2419300'>of</span> <span m='2419600'>its</span>
  <span m='2419780'>own</span> <span m='2420080'>tree</span> <span m='2420350'>of</span>
  <span m='2420440'>ox</span> <span m='2420640'>trees.</span> <span m='2421720'>So</span>
  <span m='2421975'>there's</span> <span m='2422390'>nothing</span> <span m='2422660'>else</span>
  <span m='2422840'>to do.</span> <span m='2423130'>It</span> <span m='2423190'>doesn't</span>
  <span m='2423380'>need</span> <span m='2423530'>a</span> <span m='2423790'>parent</span>
  <span m='2424040'>pointer</span> <span m='2424850'>because</span> <span m='2425030'>it's</span>
  <span m='2425120'>not</span> <span m='2425270'>linked</span> <span m='2425400'>to</span>
  <span m='2425480'>anything</span> <span m='2425870'>above</span> <span m='2426110'>it.</span>
  <span m='2428230'>The end.</span> </p><p><span m='2430910'>OK,</span> <span m='2431310'>I
  corresponds</span> <span m='2431790'>to</span> <span m='2431910'>some</span> <span
  m='2432150'>node</span> <span m='2432390'>up</span> <span m='2432540'>here.</span>
  <span m='2433740'>Kind of</span> <span m='2433980'>the</span> <span m='2434070'>median</span>
  <span m='2434450'>node.</span> <span m='2439130'>So</span> <span m='2439560'>there</span>
  <span m='2439750'>you</span> <span m='2439860'>go.</span> <span m='2440550'>That's</span>
  <span m='2440700'>a</span> <span m='2440760'>cut.</span> <span m='2441570'>It's</span>
  <span m='2441690'>like</span> <span m='2442020'>super</span> <span m='2442530'>short</span>
  <span m='2442740'>code.</span> <span m='2444220'>You</span> <span m='2444320'>have</span>
  <span m='2444450'>to</span> <span m='2444540'>stare</span> <span m='2444780'>at</span>
  <span m='2444870'>it</span> <span m='2444930'>for</span> <span m='2445080'>a</span>
  <span m='2445110'>while</span> <span m='2445290'>and</span> <span m='2445380'>make</span>
  <span m='2445500'>sure</span> <span m='2445650'>it</span> <span m='2445710'>does</span>
  <span m='2445890'>all</span> <span m='2445980'>the</span> <span m='2446070'>right</span>
  <span m='2446220'>things,</span> <span m='2446580'>but</span> <span m='2447270'>it</span>
  <span m='2447390'>does.</span> <span m='2449940'>How</span> <span m='2450130'>about</span>
  <span m='2450260'>a</span> <span m='2450330'>link?</span> <span m='2451240'>Well</span>
  <span m='2451350'>first</span> <span m='2451590'>thing</span> <span m='2451710'>we</span>
  <span m='2451770'>do</span> <span m='2451860'>on</span> <span m='2451950'>a</span>
  <span m='2451980'>link,</span> <span m='2452280'>is</span> <span m='2452490'>access</span>
  <span m='2452970'>v</span> <span m='2453220'>and</span> <span m='2453330'>access</span>
  <span m='2453690'>w.</span> </p><p><span m='2455340'>These</span> <span m='2455520'>don't</span>
  <span m='2455670'>interfere</span> <span m='2456060'>with</span> <span m='2456180'>each</span>
  <span m='2456330'>other</span> <span m='2456540'>because</span> <span m='2457140'>precondition</span>
  <span m='2457680'>is</span> <span m='2457830'>that</span> <span m='2458140'>v and
  w</span> <span m='2459010'>are</span> <span m='2459170'>in</span> <span m='2459420'>different</span>
  <span m='2460440'>trees</span> <span m='2460680'>of</span> <span m='2460760'>ox</span>
  <span m='2460930'>trees.</span> <span m='2461360'>They're</span> <span m='2461520'>indifferent</span>
  <span m='2462090'>represented</span> <span m='2462600'>trees.</span> <span m='2464520'>So</span>
  <span m='2465030'>they're</span> <span m='2465150'>completely</span> <span m='2465510'>independent.</span>
  <span m='2466170'>The</span> <span m='2466320'>result</span> <span m='2466680'>will</span>
  <span m='2466800'>be</span> <span m='2467580'>that</span> <span m='2467730'>we</span>
  <span m='2467850'>have--</span> <span m='2475030'>should</span> <span m='2475100'>be</span>
  <span m='2475970'>consistent</span> <span m='2476420'>--so</span> <span m='2476630'>ox</span>
  <span m='2476930'>trees</span> <span m='2477200'>are</span> <span m='2477290'>on</span>
  <span m='2477380'>the</span> <span m='2477470'>left.</span> <span m='2478790'>We're</span>
  <span m='2478910'>going</span> <span m='2479020'>to</span> <span m='2479120'>have</span>
  <span m='2479600'>w,</span> <span m='2480660'>is</span> <span m='2480830'>going</span>
  <span m='2480980'>to</span> <span m='2481040'>have</span> <span m='2481250'>a</span>
  <span m='2481280'>left</span> <span m='2481640'>thing.</span> </p><p><span m='2482690'>We're</span>
  <span m='2482790'>going</span> <span m='2482970'>to</span> <span m='2483070'>have</span>
  <span m='2483410'>v</span> <span m='2484490'>claim</span> <span m='2485390'>all</span>
  <span m='2485600'>by</span> <span m='2485780'>itself</span> <span m='2486170'>because</span>
  <span m='2486350'>remember</span> <span m='2487010'>what</span> <span m='2487190'>a</span>
  <span m='2487230'>link</span> <span m='2487520'>does?</span> <span m='2488540'>It's</span>
  <span m='2488620'>right</span> <span m='2488780'>here,</span> <span m='2488990'>v</span>
  <span m='2489320'>is</span> <span m='2489500'>assumed</span> <span m='2489830'>to</span>
  <span m='2489920'>be</span> <span m='2490070'>a</span> <span m='2490130'>root</span>
  <span m='2490340'>node.</span> <span m='2491390'>So</span> <span m='2491510'>if</span>
  <span m='2491600'>you</span> <span m='2491660'>do</span> <span m='2491780'>an</span>
  <span m='2491900'>access</span> <span m='2492380'>on</span> <span m='2492560'>the</span>
  <span m='2492650'>root</span> <span m='2492890'>node,</span> <span m='2494030'>then</span>
  <span m='2494330'>the</span> <span m='2494450'>path</span> <span m='2494990'>from</span>
  <span m='2495200'>the</span> <span m='2495320'>root</span> <span m='2495500'>to</span>
  <span m='2495620'>v</span> <span m='2495830'>is</span> <span m='2495950'>a</span>
  <span m='2495980'>very</span> <span m='2496190'>short</span> <span m='2496430'>path.</span>
  <span m='2496840'>It</span> <span m='2496970'>is</span> <span m='2497090'>just</span>
  <span m='2497360'>v</span> <span m='2497540'>itself.</span> <span m='2498630'>So</span>
  <span m='2498770'>the</span> <span m='2498980'>ox</span> <span m='2499280'>tree</span>
  <span m='2499460'>containing</span> <span m='2499850'>v,</span> <span m='2500030'>will</span>
  <span m='2500150'>just</span> <span m='2500330'>be</span> <span m='2500480'>v</span>
  <span m='2500630'>itself</span> <span m='2502730'>when</span> <span m='2502850'>you</span>
  <span m='2502910'>do</span> <span m='2503060'>x</span> <span m='2503360'>as</span>
  <span m='2503480'>v.</span> <span m='2505660'>Yeah,</span> <span m='2505880'>so</span>
  <span m='2506060'>this</span> <span m='2506270'>is</span> <span m='2506360'>the</span>
  <span m='2506450'>picture</span> <span m='2507620'>in</span> <span m='2508040'>represented</span>
  <span m='2508610'>space.</span> </p><p><span m='2510140'>And</span> <span m='2510290'>so</span>
  <span m='2510480'>we</span> <span m='2510670'>access v,</span> <span m='2511040'>we're</span>
  <span m='2511340'>going</span> <span m='2511460'>to</span> <span m='2511520'>have</span>
  <span m='2511610'>this.</span> <span m='2511880'>Of</span> <span m='2512000'>course,</span>
  <span m='2512220'>there's</span> <span m='2512290'>stuff</span> <span m='2512540'>pointing</span>
  <span m='2512870'>into</span> <span m='2513140'>it.</span> <span m='2513790'>We're</span>
  <span m='2514090'>at</span> <span m='2514610'>access w,</span> <span m='2515100'>so</span>
  <span m='2515370'>it's</span> <span m='2515570'>going</span> <span m='2515690'>to</span>
  <span m='2515750'>look</span> <span m='2515900'>like</span> <span m='2516080'>this.</span>
  <span m='2516770'>And</span> <span m='2516920'>then</span> <span m='2517550'>this</span>
  <span m='2517820'>path</span> <span m='2518780'>is</span> <span m='2518930'>going</span>
  <span m='2519050'>to</span> <span m='2519140'>be</span> <span m='2519440'>what's</span>
  <span m='2519620'>over</span> <span m='2519800'>here.</span> <span m='2520640'>And
  there's,</span> <span m='2520850'>of</span> <span m='2520970'>course,</span> <span
  m='2521180'>more</span> <span m='2521360'>stuff</span> <span m='2521660'>linked</span>
  <span m='2522110'>from</span> <span m='2522320'>below</span> <span m='2523010'>into</span>
  <span m='2523220'>those.</span> <span m='2523880'>Our</span> <span m='2524060'>goal</span>
  <span m='2525080'>is</span> <span m='2525230'>to</span> <span m='2525350'>add</span>
  <span m='2525620'>this</span> <span m='2525860'>edge</span> <span m='2526220'>between</span>
  <span m='2526550'>v and</span> <span m='2526660'>w,</span> <span m='2527870'>which</span>
  <span m='2528050'>corresponds</span> <span m='2528680'>to</span> <span m='2529690'>adding</span>
  <span m='2530030'>this</span> <span m='2530270'>change.</span> <span m='2535050'>So</span>
  <span m='2535220'>that's</span> <span m='2535430'>what</span> <span m='2535520'>we're</span>
  <span m='2535610'>going</span> <span m='2535760'>to</span> <span m='2535820'>do.</span>
  <span m='2538540'>V.left</span> <span m='2538850'>left</span> <span m='2539490'>equals</span>
  <span m='2539810'>w.</span> <span m='2543086'>W.parent</span> <span m='2543560'>equals</span>
  <span m='2543860'>v.</span> </p><p><span m='2549920'>If</span> <span m='2550100'>you</span>
  <span m='2550220'>want,</span> <span m='2550610'>you</span> <span m='2550760'>could</span>
  <span m='2550910'>instead</span> <span m='2551420'>make</span> <span m='2551770'>v</span>
  <span m='2552830'>the</span> <span m='2552980'>right</span> <span m='2553190'>child</span>
  <span m='2553550'>of</span> <span m='2553690'>w.</span> <span m='2554210'>And</span>
  <span m='2554300'>that</span> <span m='2554450'>looks</span> <span m='2554660'>much</span>
  <span m='2554900'>more</span> <span m='2555080'>sane.</span> <span m='2555740'>I</span>
  <span m='2555830'>like</span> <span m='2556040'>it</span> <span m='2556130'>this</span>
  <span m='2556310'>way</span> <span m='2556430'>because</span> <span m='2556700'>it</span>
  <span m='2556760'>looks</span> <span m='2556970'>kind</span> <span m='2557150'>of</span>
  <span m='2557270'>insane.</span> <span m='2558390'>This</span> <span m='2558710'>is
  not</span> <span m='2559190'>unbalanced</span> <span m='2559610'>or</span> <span
  m='2559850'>anything.</span> <span m='2560080'>But</span> <span m='2560480'>splay
  trees will</span> <span m='2560570'>fix</span> <span m='2560840'>it</span> <span
  m='2560990'>so</span> <span m='2561290'>you</span> <span m='2561410'>don't</span>
  <span m='2561590'>have</span> <span m='2561770'>to</span> <span m='2561860'>worry.</span>
  <span m='2562220'>This</span> <span m='2562400'>is</span> <span m='2562520'>the</span>
  <span m='2563000'>carefree</span> <span m='2563630'>approach</span> <span m='2564110'>to</span>
  <span m='2564350'>data</span> <span m='2564560'>structuring.</span> <span m='2565490'>And</span>
  <span m='2565640'>you</span> <span m='2565700'>just</span> <span m='2565820'>leave</span>
  <span m='2566000'>it</span> <span m='2566090'>to</span> <span m='2566180'>the</span>
  <span m='2566270'>analysis</span> <span m='2566840'>to</span> <span m='2567020'>make</span>
  <span m='2567170'>sure.</span> <span m='2567830'>Everything</span> <span m='2568190'>here</span>
  <span m='2568340'>is</span> <span m='2568400'>going</span> <span m='2568580'>to</span>
  <span m='2568640'>be</span> <span m='2568730'>log</span> <span m='2568890'>n</span>
  <span m='2569120'>amortized.</span> </p><p><span m='2572060'>But</span> <span m='2572270'>you</span>
  <span m='2572390'>can</span> <span m='2572510'>check</span> <span m='2572720'>this</span>
  <span m='2572930'>is</span> <span m='2572990'>doing</span> <span m='2573230'>the</span>
  <span m='2573320'>right</span> <span m='2573470'>thing,</span> <span m='2573770'>because</span>
  <span m='2575930'>v</span> <span m='2576170'>is</span> <span m='2576410'>deeper</span>
  <span m='2576860'>than</span> <span m='2577040'>w,</span> <span m='2577570'>right?</span>
  <span m='2577780'>So</span> <span m='2577910'>we</span> <span m='2577970'>had</span>
  <span m='2578120'>this</span> <span m='2578270'>path</span> <span m='2578960'>from</span>
  <span m='2579140'>the</span> <span m='2579260'>root</span> <span m='2579740'>over</span>
  <span m='2579980'>here</span> <span m='2580250'>to</span> <span m='2580370'>w.</span>
  <span m='2581250'>We're</span> <span m='2581360'>extending</span> <span m='2581810'>the</span>
  <span m='2581900'>path</span> <span m='2582140'>by</span> <span m='2582320'>one</span>
  <span m='2582530'>node,</span> <span m='2583410'>v,</span> <span m='2584000'>and</span>
  <span m='2584120'>so</span> <span m='2584290'>v</span> <span m='2584450'>should</span>
  <span m='2584630'>be</span> <span m='2584750'>to</span> <span m='2584870'>the</span>
  <span m='2584990'>right</span> <span m='2585230'>of</span> <span m='2585320'>everything.</span>
  <span m='2585800'>So</span> <span m='2586080'>either it</span> <span m='2586250'>goes</span>
  <span m='2586460'>that</span> <span m='2586660'>here</span> <span m='2587450'>is</span>
  <span m='2587520'>that</span> <span m='2587600'>right</span> <span m='2587750'>child</span>
  <span m='2588140'>w</span> <span m='2588470'>that</span> <span m='2588620'>would</span>
  <span m='2588740'>also</span> <span m='2588980'>work,</span> <span m='2589250'>or</span>
  <span m='2589430'>would</span> <span m='2589550'>make</span> <span m='2589700'>it</span>
  <span m='2589760'>the</span> <span m='2589850'>parent</span> <span m='2590180'>of</span>
  <span m='2590720'>w</span> <span m='2591110'>on</span> <span m='2591290'>the</span>
  <span m='2591380'>right</span> <span m='2592700'>that</span> <span m='2592910'>works.</span>
  <span m='2593280'>It's</span> <span m='2593300'>in</span> <span m='2593570'>the</span>
  <span m='2593690'>correct</span> <span m='2593990'>order,</span> <span m='2594350'>binary</span>
  <span m='2594650'>search</span> <span m='2594890'>tree</span> <span m='2595070'>order.</span>
  <span m='2596750'>OK?</span> </p><p><span m='2598220'>So</span> <span m='2598670'>you</span>
  <span m='2598810'>see</span> <span m='2599000'>length</span> <span m='2599440'>and</span>
  <span m='2599640'>links</span> <span m='2599810'>and</span> <span m='2599900'>cuts</span>
  <span m='2600140'>are</span> <span m='2600200'>easy.</span> <span m='2600600'>In</span>
  <span m='2600700'>fact,</span> <span m='2600900'>the</span> <span m='2600920'>most</span>
  <span m='2601160'>complicated</span> <span m='2601700'>was</span> <span m='2601850'>find</span>
  <span m='2602090'>root</span> <span m='2602300'>where</span> <span m='2602420'>we</span>
  <span m='2602510'>had</span> <span m='2602660'>to</span> <span m='2602750'>do</span>
  <span m='2602870'>a</span> <span m='2602960'>walk</span> <span m='2603810'>and</span>
  <span m='2603950'>splay,</span> <span m='2605690'>but</span> <span m='2605780'>basically,</span>
  <span m='2606260'>everything</span> <span m='2606740'>reduces</span> <span m='2607280'>to</span>
  <span m='2607460'>access.</span> <span m='2608360'>If</span> <span m='2608510'>access</span>
  <span m='2608990'>is</span> <span m='2609080'>fast,</span> <span m='2610010'>all</span>
  <span m='2610190'>these</span> <span m='2610370'>operations</span> <span m='2610910'>will</span>
  <span m='2611030'>be</span> <span m='2611150'>fast</span> <span m='2611480'>because</span>
  <span m='2611660'>they</span> <span m='2611840'>spend</span> <span m='2612200'>essentially</span>
  <span m='2612620'>constant</span> <span m='2613040'>time</span> <span m='2613970'>plus</span>
  <span m='2614330'>a</span> <span m='2614390'>constant</span> <span m='2614720'>number</span>
  <span m='2614930'>of</span> <span m='2615020'>accesses.</span> <span m='2616370'>Except</span>
  <span m='2616700'>for</span> <span m='2616850'>find</span> <span m='2617090'>root.</span>
  <span m='2617240'>It</span> <span m='2617330'>also</span> <span m='2617600'>doesn't</span>
  <span m='2617810'>splay.</span> <span m='2618290'>But</span> <span m='2618440'>we're</span>
  <span m='2618530'>going</span> <span m='2618650'>to</span> <span m='2618710'>show</span>
  <span m='2618860'>displays</span> <span m='2619210'>are</span> <span m='2619310'>efficient</span>
  <span m='2619640'>as,</span> <span m='2619760'>well</span> <span m='2620480'>as</span>
  <span m='2620660'>part</span> <span m='2620960'>of</span> <span m='2621050'>access,</span>
  <span m='2621440'>because</span> <span m='2621620'>access</span> <span m='2621950'>does</span>
  <span m='2622130'>a</span> <span m='2622190'>ton</span> <span m='2622400'>of</span>
  <span m='2622490'>splays.</span> <span m='2624010'>So</span> <span m='2624110'>this</span>
  <span m='2624380'>is</span> <span m='2624470'>log</span> <span m='2624630'>n</span>
  <span m='2624800'>amortize,</span> <span m='2625190'>surely</span> <span m='2625550'>one</span>
  <span m='2626000'>splay</span> <span m='2626210'>is</span> <span m='2626450'>log</span>
  <span m='2626720'>n</span> <span m='2626810'>amortized.</span> <span m='2627290'>And</span>
  <span m='2627380'>indeed,</span> <span m='2627710'>that</span> <span m='2628630'>will</span>
  <span m='2628730'>be</span> <span m='2628820'>the</span> <span m='2628910'>case.</span>
  </p><p><span m='2630300'>AUDIENCE:</span> <span m='2630550'>Splay</span> <span m='2630800'>as</span>
  <span m='2631300'>access.</span> </p><p><span m='2633800'>PROFESSOR:</span> <span
  m='2633915'>Here,</span> <span m='2634030'>I'm</span> <span m='2634160'>treating</span>
  <span m='2634580'>splaying</span> <span m='2635090'>not</span> <span m='2635390'>as</span>
  <span m='2635510'>an</span> <span m='2635600'>access.</span> <span m='2636680'>So</span>
  <span m='2636830'>I'm</span> <span m='2636890'>going</span> <span m='2637010'>to</span>
  <span m='2637070'>define</span> <span m='2637460'>access</span> <span m='2637850'>to</span>
  <span m='2637970'>mean</span> <span m='2638990'>calling</span> <span m='2639410'>this</span>
  <span m='2639590'>function.</span> </p><p><span m='2640569'>AUDIENCE:</span> <span
  m='2640803'>[INAUDIBLE].</span> </p><p></p><p><span m='2647140'>PROFESSOR:</span>
  <span m='2647245'>OK</span> <span m='2647350'>so</span> <span m='2647470'>over</span>
  <span m='2647690'>here,</span> <span m='2647930'>access</span> <span m='2648500'>first</span>
  <span m='2648800'>splays</span> <span m='2649330'>v</span> <span m='2650250'>and</span>
  <span m='2650510'>displays</span> <span m='2650930'>various</span> <span m='2651260'>things.</span>
  <span m='2651470'>It</span> <span m='2651560'>might</span> <span m='2651860'>not</span>
  <span m='2652040'>splay</span> <span m='2652510'>r.</span> </p><p><span m='2653914'>AUDIENCE:</span>
  <span m='2654147'>No,</span> <span m='2654381'>I'm</span> <span m='2654848'>saying,</span>
  <span m='2655315'>do</span> <span m='2655782'>you</span> <span m='2656249'>call
  access r</span> <span m='2656716'>[INAUDIBLE]?</span> </p><p><span m='2657650'>PROFESSOR:</span>
  <span m='2657792'>Oh</span> <span m='2658220'>good.</span> <span m='2659270'>That</span>
  <span m='2659420'>might</span> <span m='2659600'>simplify</span> <span m='2660170'>my</span>
  <span m='2660350'>analysis.</span> <span m='2661160'>I'll</span> <span m='2661260'>just</span>
  <span m='2661370'>change</span> <span m='2662540'>this</span> <span m='2662750'>line</span>
  <span m='2663170'>to</span> <span m='2663530'>access</span> <span m='2664010'>r.</span>
  <span m='2665540'>Good,</span> <span m='2667950'>why</span> <span m='2668000'>not?</span>
  <span m='2671060'>Yeah,</span> <span m='2671350'>that</span> <span m='2671460'>seems</span>
  <span m='2672350'>like</span> <span m='2672500'>a</span> <span m='2672560'>good</span>
  <span m='2672710'>way.</span> <span m='2676400'>OK,</span> <span m='2677510'>I</span>
  <span m='2677600'>think</span> <span m='2677780'>you</span> <span m='2677870'>could</span>
  <span m='2677990'>do</span> <span m='2678110'>that.</span> <span m='2678350'>It</span>
  <span m='2678410'>might</span> <span m='2678620'>simplify,</span> <span m='2679730'>conceptually,</span>
  <span m='2680270'>what's</span> <span m='2680450'>going</span> <span m='2680720'>on.</span>
  <span m='2681410'>The</span> <span m='2681530'>one</span> <span m='2681740'>thing</span>
  <span m='2681950'>I</span> <span m='2682040'>find</span> <span m='2682310'>annoying</span>
  <span m='2682670'>about</span> <span m='2683800'>it's</span> <span m='2683900'>just--</span>
  <span m='2685410'>it's</span> <span m='2685580'>an</span> <span m='2686015'>aesthetic,</span>
  <span m='2686360'>let's</span> <span m='2686480'>say.</span> </p><p><span m='2687050'>So</span>
  <span m='2687200'>here,</span> <span m='2687670'>I</span> <span m='2687720'>was</span>
  <span m='2687830'>talking</span> <span m='2688100'>about</span> <span m='2688370'>the</span>
  <span m='2688460'>last</span> <span m='2689000'>access.</span> <span m='2690260'>And</span>
  <span m='2690440'>if</span> <span m='2690530'>you</span> <span m='2690620'>define</span>
  <span m='2691160'>lost</span> <span m='2691550'>access</span> <span m='2691880'>to</span>
  <span m='2692010'>mean</span> <span m='2692240'>access,</span> <span m='2692810'>that's</span>
  <span m='2692990'>fine.</span> <span m='2693800'>But</span> <span m='2694160'>also</span>
  <span m='2694460'>another</span> <span m='2694760'>intuitive</span> <span m='2695120'>notion</span>
  <span m='2695420'>of</span> <span m='2695510'>the</span> <span m='2695570'>last</span>
  <span m='2695810'>access,</span> <span m='2696170'>is</span> <span m='2696260'>the</span>
  <span m='2696380'>last</span> <span m='2696620'>time</span> <span m='2696830'>it</span>
  <span m='2696920'>was</span> <span m='2697250'>given</span> <span m='2697550'>to</span>
  <span m='2697640'>any</span> <span m='2697820'>of</span> <span m='2697880'>these</span>
  <span m='2698060'>functions</span> <span m='2698540'>cut</span> <span m='2698900'>link</span>
  <span m='2699650'>find</span> <span m='2699980'>root</span> <span m='2700160'>path</span>
  <span m='2700460'>aggregate.</span> <span m='2701520'>And</span> <span m='2701570'>so</span>
  <span m='2701780'>r</span> <span m='2701980'>is</span> <span m='2702080'>not</span>
  <span m='2702230'>really</span> <span m='2702470'>given</span> <span m='2703580'>to</span>
  <span m='2703640'>the</span> <span m='2703730'>function.</span> <span m='2704100'>Of</span>
  <span m='2704120'>course,</span> <span m='2704430'>it's</span> <span m='2704530'>the</span>
  <span m='2704600'>output</span> <span m='2705020'>of</span> <span m='2705080'>find</span>
  <span m='2705350'>roots,</span> <span m='2705650'>so</span> <span m='2705740'>maybe</span>
  <span m='2705920'>you</span> <span m='2706070'>think</span> <span m='2706280'>of</span>
  <span m='2706370'>that</span> <span m='2706520'>as</span> <span m='2706640'>an</span>
  <span m='2706700'>access.</span> <span m='2707840'>You</span> <span m='2707900'>could</span>
  <span m='2708050'>say</span> <span m='2708200'>find</span> <span m='2708470'>root</span>
  <span m='2708580'>is</span> <span m='2708740'>accessing</span> <span m='2709280'>the</span>
  <span m='2709340'>root.</span> <span m='2710270'>Either</span> <span m='2710480'>way,</span>
  <span m='2711150'>this</span> <span m='2711350'>should</span> <span m='2711500'>work</span>
  <span m='2711710'>either</span> <span m='2711890'>way,</span> <span m='2713680'>but</span>
  <span m='2714260'>I</span> <span m='2714350'>think</span> <span m='2714620'>I</span>
  <span m='2714680'>like</span> <span m='2714920'>that.</span> <span m='2715660'>You</span>
  <span m='2716080'>just have</span> <span m='2716180'>to</span> <span m='2716270'>redefine</span>
  <span m='2716720'>things</span> <span m='2716930'>a</span> <span m='2716960'>little.</span>
  </p><p><span m='2719190'>OK,</span> <span m='2719630'>let's</span> <span m='2720350'>do</span>
  <span m='2720530'>some</span> <span m='2720650'>analysis.</span> <span m='2721250'>This</span>
  <span m='2721460'>is</span> <span m='2721790'>the</span> <span m='2721880'>data</span>
  <span m='2722090'>structure.</span> <span m='2722990'>Algorithms</span> <span m='2723380'>are</span>
  <span m='2723470'>all</span> <span m='2723740'>up</span> <span m='2723890'>there</span>
  <span m='2724190'>in</span> <span m='2724750'>they're</span> <span m='2724910'>gory</span>
  <span m='2725150'>detail.</span> <span m='2725480'>This</span> <span m='2725660'>is.</span>
  <span m='2725780'>Of</span> <span m='2725900'>course.</span> <span m='2726260'>goriest.</span>
  <span m='2734604'>I can</span> <span m='2735088'>now</span> <span m='2735572'>erase</span>
  <span m='2736370'>the,</span> <span m='2739820'>API.</span> <span m='2753780'>Makes</span>
  <span m='2753950'>me</span> <span m='2754190'>think</span> <span m='2754380'>of</span>
  <span m='2754950'>Google</span> <span m='2755220'>versus</span> <span m='2755520'>Oracle.</span>
  <span m='2757290'>And</span> <span m='2757710'>then</span> <span m='2757860'>following</span>
  <span m='2758220'>that</span> <span m='2758340'>case?</span> <span m='2759180'>Yeah,</span>
  <span m='2760760'>it's</span> <span m='2761310'>interesting.</span> <span m='2766190'>OK</span>
  <span m='2782390'>pretty</span> <span m='2782600'>clear</span> <span m='2782780'>this</span>
  <span m='2782960'>implementation</span> <span m='2783590'>is</span> <span m='2783680'>much</span>
  <span m='2783920'>more</span> <span m='2784250'>significant</span> <span m='2784850'>than</span>
  <span m='2784970'>the</span> <span m='2785060'>API,</span> <span m='2785520'>but
  anyway.</span> <span m='2786360'>If</span> </p><p><span m='2788120'>First</span>
  <span m='2788420'>goal</span> <span m='2788780'>is</span> <span m='2788930'>to</span>
  <span m='2788990'>prove</span> <span m='2789230'>log</span> <span m='2789500'>squared.</span>
  <span m='2790190'>This</span> <span m='2790370'>is</span> <span m='2790460'>just</span>
  <span m='2790670'>like</span> <span m='2790880'>a</span> <span m='2790940'>warm</span>
  <span m='2791210'>up.</span> <span m='2791840'>This</span> <span m='2792050'>is</span>
  <span m='2792380'>actually</span> <span m='2792710'>trivial</span> <span m='2793100'>at</span>
  <span m='2793190'>this</span> <span m='2793310'>point.</span> <span m='2793910'>We've</span>
  <span m='2794000'>done</span> <span m='2794180'>all</span> <span m='2794330'>the</span>
  <span m='2794420'>work</span> <span m='2794630'>to</span> <span m='2794750'>do</span>
  <span m='2794900'>a</span> <span m='2794930'>lot</span> <span m='2795080'>of</span>
  <span m='2795170'>squared</span> <span m='2795470'>bound.</span> <span m='2795830'>In</span>
  <span m='2795890'>fact,</span> <span m='2796190'>you</span> <span m='2796280'>just</span>
  <span m='2796460'>replace</span> <span m='2796820'>the slay</span> <span m='2797180'>tree</span>
  <span m='2797420'>with</span> <span m='2797570'>a</span> <span m='2797630'>red-black</span>
  <span m='2798050'>tree,</span> <span m='2799040'>and</span> <span m='2799190'>you</span>
  <span m='2799310'>know</span> <span m='2799670'>that</span> <span m='2799820'>each</span>
  <span m='2800030'>of</span> <span m='2800090'>these</span> <span m='2800270'>operations</span>
  <span m='2801860'>is</span> <span m='2802170'>Log n.</span> <span m='2804380'>All</span>
  <span m='2804590'>displays</span> <span m='2805190'>that</span> <span m='2805340'>we</span>
  <span m='2805460'>do,</span> <span m='2806150'>I</span> <span m='2806180'>mean,</span>
  <span m='2806370'>you</span> <span m='2806470'>can</span> <span m='2806510'>do</span>
  <span m='2806660'>essentially</span> <span m='2807140'>like</span> <span m='2807410'>a</span>
  <span m='2807470'>splay</span> <span m='2807880'>in</span> <span m='2807980'>a</span>
  <span m='2808790'>balance</span> <span m='2809150'>binary</span> <span m='2809540'>[INAUDIBLE]</span>
  <span m='2809630'>tree,</span> <span m='2809885'>you</span> <span m='2810140'>can</span>
  <span m='2810290'>still</span> <span m='2810530'>move</span> <span m='2810710'>it</span>
  <span m='2810770'>to</span> <span m='2810860'>the</span> <span m='2810950'>root.</span>
  <span m='2811170'>You</span> <span m='2811250'>can</span> <span m='2811370'>still</span>
  <span m='2811580'>maintain</span> <span m='2812040'>it</span> <span m='2812810'>temporarily</span>
  <span m='2813590'>and</span> <span m='2813710'>maintain</span> <span m='2814070'>the</span>
  <span m='2814160'>height</span> <span m='2814370'>is</span> <span m='2814490'>order</span>
  <span m='2814810'>log n.</span> </p><p><span m='2815520'>That's</span> <span m='2815630'>one</span>
  <span m='2815810'>way</span> <span m='2815930'>to</span> <span m='2816020'>view</span>
  <span m='2816200'>it.</span> <span m='2816320'>Or</span> <span m='2816650'>you</span>
  <span m='2816830'>can</span> <span m='2816980'>observe</span> <span m='2817310'>the</span>
  <span m='2817400'>splay</span> <span m='2817760'>tree</span> <span m='2817940'>analysis</span>
  <span m='2819070'>that</span> <span m='2819200'>gives</span> <span m='2819410'>you</span>
  <span m='2819530'>log</span> <span m='2819770'>n,</span> <span m='2819920'>which</span>
  <span m='2820070'>we</span> <span m='2820160'>haven't</span> <span m='2820370'>actually</span>
  <span m='2820610'>covered</span> <span m='2820880'>in</span> <span m='2820970'>this</span>
  <span m='2821120'>class.</span> <span m='2822140'>Still</span> <span m='2822440'>applies</span>
  <span m='2822860'>in</span> <span m='2822950'>this</span> <span m='2823070'>scenario.</span>
  <span m='2823520'>Even</span> <span m='2823760'>though</span> <span m='2823820'>it's</span>
  <span m='2823940'>not</span> <span m='2824090'>one</span> <span m='2824270'>splay</span>
  <span m='2824600'>a</span> <span m='2824660'>tree.</span> <span m='2824990'>It's</span>
  <span m='2825110'>a</span> <span m='2825170'>bunch</span> <span m='2825410'>of</span>
  <span m='2825710'>trees.</span> <span m='2826490'>You</span> <span m='2826550'>can</span>
  <span m='2826700'>show</span> <span m='2826880'>each</span> <span m='2827030'>of</span>
  <span m='2827090'>the</span> <span m='2827270'>splays</span> <span m='2827660'>is</span>
  <span m='2827930'>order</span> <span m='2828180'>log</span> <span m='2828935'>n.</span>
  </p><p><span m='2829220'>So</span> <span m='2829490'>what</span> <span m='2829730'>that</span>
  <span m='2829880'>gives</span> <span m='2830150'>you</span> <span m='2831380'>is</span>
  <span m='2831590'>that--</span> <span m='2833900'>so</span> <span m='2834350'>we</span>
  <span m='2834450'>have</span> <span m='2834780'>lets</span> <span m='2835090'>just</span>
  <span m='2835290'>say</span> <span m='2835580'>it's</span> <span m='2835850'>order</span>
  <span m='2836120'>log</span> <span m='2836370'>n</span> <span m='2837220'>amortized</span>
  <span m='2838285'>per</span> <span m='2838620'>splay,</span> <span m='2839680'>a</span>
  <span m='2839780'>few</span> <span m='2840020'>splay</span> <span m='2840500'>trees</span>
  <span m='2841070'>or</span> <span m='2841370'>use</span> <span m='2841880'>regular</span>
  <span m='2842210'>balancer</span> <span m='2842680'>trees</span> <span m='2843010'>is</span>
  <span m='2843130'>definitely</span> <span m='2843410'>log</span> <span m='2843740'>n.</span>
  <span m='2844690'>So</span> <span m='2844910'>then</span> <span m='2845540'>if</span>
  <span m='2845690'>we</span> <span m='2845780'>do</span> <span m='2845970'>m</span>
  <span m='2846140'>operations,</span> <span m='2850250'>it's</span> <span m='2850610'>going</span>
  <span m='2850730'>to</span> <span m='2850820'>cost</span> <span m='2852950'>--we're</span>
  <span m='2853070'>not</span> <span m='2853220'>actually</span> <span m='2853520'>going</span>
  <span m='2853640'>to</span> <span m='2853700'>be</span> <span m='2853790'>done--</span>
  <span m='2855020'>order</span> <span m='2855260'>log</span> <span m='2855545'>n</span>
  <span m='2855830'>times</span> <span m='2856820'>m</span> <span m='2857150'>plus</span>
  <span m='2858680'>total</span> <span m='2860450'>number</span> <span m='2861680'>of</span>
  <span m='2861920'>preferred</span> <span m='2862370'>child</span> <span m='2862760'>changes.</span>
  </p><p><span m='2874400'>This</span> <span m='2874640'>bound</span> <span m='2875010'>should</span>
  <span m='2875240'>be</span> <span m='2875420'>clear,</span> <span m='2875750'>because</span>
  <span m='2876830'>every</span> <span m='2877100'>operation</span> <span m='2877700'>reduces</span>
  <span m='2878150'>to</span> <span m='2879290'>accesses</span> <span m='2879980'>plus</span>
  <span m='2880400'>constant</span> <span m='2880880'>amount</span> <span m='2881120'>of</span>
  <span m='2881210'>work.</span> <span m='2882170'>Maybe</span> <span m='2882470'>one</span>
  <span m='2882710'>more</span> <span m='2882920'>splay</span> <span m='2883390'>a</span>
  <span m='2883470'>splay</span> <span m='2883870'>is</span> <span m='2883970'>just</span>
  <span m='2884150'>another</span> <span m='2884450'>log</span> <span m='2884600'>n.</span>
  <span m='2887070'>And</span> <span m='2888350'>the</span> <span m='2892760'>total</span>
  <span m='2893690'>number</span> <span m='2893960'>of</span> <span m='2894020'>preferred</span>
  <span m='2894380'>child</span> <span m='2894710'>changes</span> <span m='2895100'>comes</span>
  <span m='2895370'>from</span> <span m='2895520'>this</span> <span m='2895700'>access</span>
  <span m='2896180'>thing.</span> <span m='2896920'>We're</span> <span m='2897020'>doing</span>
  <span m='2897260'>one</span> <span m='2897530'>splay</span> <span m='2898070'>per</span>
  <span m='2898850'>preferred</span> <span m='2899240'>child</span> <span m='2899840'>change.</span>
  <span m='2900740'>So</span> <span m='2900890'>that</span> <span m='2901070'>thing</span>
  <span m='2901280'>is</span> <span m='2901370'>reasonable,</span> <span m='2902010'>you</span>
  <span m='2902060'>just</span> <span m='2902150'>take</span> <span m='2902390'>it,</span>
  <span m='2902540'>multiply</span> <span m='2902960'>by</span> <span m='2903080'>log</span>
  <span m='2903350'>n,</span> <span m='2903930'>we're</span> <span m='2904050'>done.</span>
  </p><p><span m='2904640'>So</span> <span m='2904850'>the</span> <span m='2904940'>remaining</span>
  <span m='2905330'>thing</span> <span m='2906110'>is,</span> <span m='2906860'>at</span>
  <span m='2906920'>this</span> <span m='2907070'>point,</span> <span m='2907380'>just</span>
  <span m='2907460'>claim.</span> <span m='2908810'>Total</span> <span m='2909140'>number</span>
  <span m='2909380'>of</span> <span m='2909440'>preferred</span> <span m='2909770'>trial</span>
  <span m='2910070'>changes</span> <span m='2911060'>is</span> <span m='2911210'>order</span>
  <span m='2911990'>m</span> <span m='2912560'>log</span> <span m='2913070'>n.</span>
  <span m='2914700'>So</span> <span m='2914870'>if</span> <span m='2914990'>you</span>
  <span m='2915050'>take</span> <span m='2915260'>this</span> <span m='2915440'>whole</span>
  <span m='2915620'>thing,</span> <span m='2916310'>divide</span> <span m='2916640'>by</span>
  <span m='2916850'>m,</span> <span m='2918470'>you</span> <span m='2918620'>get</span>
  <span m='2918770'>log</span> <span m='2919040'>squared</span> <span m='2919310'>amortize.</span>
  <span m='2921740'>So</span> <span m='2922610'>that</span> <span m='2922910'>sounds</span>
  <span m='2923270'>kind</span> <span m='2923600'>of</span> <span m='2923690'>lame,</span>
  <span m='2924020'>log square</span> <span m='2924380'>is</span> <span m='2924470'>not</span>
  <span m='2924650'>such</span> <span m='2924890'>a</span> <span m='2924920'>good</span>
  <span m='2925070'>bound,</span> <span m='2926090'>but</span> <span m='2926270'>it's</span>
  <span m='2926420'>a</span> <span m='2926480'>warm</span> <span m='2926720'>up.</span>
  <span m='2926990'>In</span> <span m='2927060'>fact,</span> <span m='2927260'>we</span>
  <span m='2927380'>need</span> <span m='2927500'>to</span> <span m='2927590'>prove</span>
  <span m='2927800'>this</span> <span m='2927950'>anyway.</span> <span m='2928430'>We</span>
  <span m='2928520'>need</span> <span m='2928670'>this</span> <span m='2928790'>for</span>
  <span m='2928880'>the</span> <span m='2928960'>log</span> <span m='2929210'>n</span>
  <span m='2929300'>analysis.</span> <span m='2930090'>So</span> <span m='2930200'>first</span>
  <span m='2930440'>thing</span> <span m='2930620'>I'm</span> <span m='2930680'>going
  to</span> <span m='2930830'>do</span> <span m='2931520'>is</span> <span m='2931640'>prove</span>
  <span m='2932000'>total</span> <span m='2932270'>number</span> <span m='2932480'>of</span>
  <span m='2932540'>preferred</span> <span m='2932870'>child</span> <span m='2933170'>changes</span>
  <span m='2934110'>is</span> <span m='2934290'>log</span> <span m='2934550'>squared.</span>
  <span m='2936020'>Before</span> <span m='2936440'>I</span> <span m='2936530'>do</span>
  <span m='2936710'>that,</span> <span m='2937550'>I</span> <span m='2937670'>need</span>
  <span m='2938000'>heavy-light</span> <span m='2938480'>decomposition.</span> <span
  m='2939510'>So</span> <span m='2939680'>to</span> <span m='2939740'>prove,</span>
  <span m='2940010'>this</span> <span m='2940220'>we're</span> <span m='2940280'>going</span>
  <span m='2940380'>to</span> <span m='2940470'>use</span> <span m='2940640'>heavy-light</span>
  <span m='2941030'>decomposition.</span> <span m='2942140'>And</span> <span m='2942230'>this</span>
  <span m='2942440'>I</span> <span m='2942520'>think,</span> <span m='2942710'>is</span>
  <span m='2942800'>where</span> <span m='2942950'>things</span> <span m='2943190'>get</span>
  <span m='2943340'>pretty</span> <span m='2943580'>cool.</span> </p><p><span m='2962440'>So</span>
  <span m='2962740'>heavy-light</span> <span m='2963250'>decomposition,</span> <span
  m='2965050'>this</span> <span m='2965320'>is</span> <span m='2966010'>another</span>
  <span m='2966370'>way</span> <span m='2967060'>to</span> <span m='2967210'>decompose</span>
  <span m='2969130'>a</span> <span m='2969250'>tree</span> <span m='2969610'>into</span>
  <span m='2969910'>paths.</span> <span m='2973510'>So</span> <span m='2973750'>heavy-light</span>
  <span m='2974180'>decomposition</span> <span m='2974770'>is,</span> <span m='2974890'>again,</span>
  <span m='2975250'>going</span> <span m='2975490'>to</span> <span m='2975610'>apply</span>
  <span m='2976120'>to</span> <span m='2976420'>the</span> <span m='2976810'>represented</span>
  <span m='2977620'>tree.</span> <span m='2978580'>Not</span> <span m='2978790'>the</span>
  <span m='2978880'>tree</span> <span m='2979050'>of</span> <span m='2979320'>ox trees.</span>
  <span m='2979630'>It's</span> <span m='2980080'>like</span> <span m='2980230'>an</span>
  <span m='2980290'>intrinsic</span> <span m='2981010'>thing.</span> <span m='2982930'>It's</span>
  <span m='2983140'>very</span> <span m='2983380'>simple</span> <span m='2984610'>we</span>
  <span m='2984760'>define</span> <span m='2985420'>the</span> <span m='2985540'>size</span>
  <span m='2986020'>of the</span> <span m='2986080'>node</span> <span m='2987340'>to</span>
  <span m='2987460'>be</span> <span m='2988810'>the</span> <span m='2988900'>number</span>
  <span m='2989140'>of</span> <span m='2989200'>nodes</span> <span m='2989470'>in</span>
  <span m='2989560'>that</span> <span m='2989710'>subtree.</span> <span m='2990340'>We've</span>
  <span m='2990490'>done</span> <span m='2990700'>this</span> <span m='2991660'>many</span>
  <span m='2991870'>times,</span> <span m='2992290'>I</span> <span m='2992350'>think.</span>
  </p><p><span m='2998140'>And</span> <span m='2999490'>then,</span> <span m='2999850'>we're</span>
  <span m='3000030'>going</span> <span m='3000270'>to</span> <span m='3000450'>call</span>
  <span m='3001770'>an</span> <span m='3001920'>edge</span> <span m='3003240'>from</span>
  <span m='3003490'>v</span> <span m='3004560'>to</span> <span m='3004680'>its</span>
  <span m='3006230'>parent</span> <span m='3011700'>heavy</span> <span m='3012690'>or</span>
  <span m='3012870'>light.</span> <span m='3014150'>It's</span> <span m='3014520'>heavy</span>
  <span m='3016530'>if</span> <span m='3018230'>the</span> <span m='3018450'>size</span>
  <span m='3018930'>of</span> <span m='3019000'>v</span> <span m='3021390'>is</span>
  <span m='3021540'>more</span> <span m='3021840'>than</span> <span m='3022320'>half</span>
  <span m='3023020'>of</span> <span m='3023340'>the</span> <span m='3023400'>size</span>
  <span m='3023880'>of</span> <span m='3023970'>its</span> <span m='3024120'>parent.</span>
  <span m='3032310'>And,</span> <span m='3032520'>otherwise,</span> <span m='3032910'>it's</span>
  <span m='3033000'>called</span> <span m='3033210'>light.</span> <span m='3041570'>OK,</span>
  <span m='3041750'>so</span> <span m='3041930'>we</span> <span m='3042020'>have</span>
  <span m='3042500'>parent</span> <span m='3043580'>and</span> <span m='3043870'>sub</span>
  <span m='3044090'>child</span> <span m='3044450'>v</span> <span m='3045640'>has</span>
  <span m='3045830'>loads</span> <span m='3046070'>of</span> <span m='3046160'>other</span>
  <span m='3046340'>children.</span> </p><p><span m='3047990'>I</span> <span m='3048080'>just</span>
  <span m='3048230'>want</span> <span m='3048370'>to</span> <span m='3048470'>know,</span>
  <span m='3048800'>is</span> <span m='3049070'>the</span> <span m='3049580'>heaviest</span>
  <span m='3050090'>of</span> <span m='3050210'>all</span> <span m='3050390'>your</span>
  <span m='3050510'>children?</span> <span m='3051080'>That's</span> <span m='3051290'>one</span>
  <span m='3051500'>way</span> <span m='3051620'>to</span> <span m='3051740'>define</span>
  <span m='3052070'>it.</span> <span m='3052910'>But,</span> <span m='3053090'>in,</span>
  <span m='3053150'>particular</span> <span m='3053540'>is</span> <span m='3053660'>a</span>
  <span m='3053720'>bigger</span> <span m='3053990'>than</span> <span m='3054140'>half</span>
  <span m='3055010'>of</span> <span m='3055220'>the</span> <span m='3055340'>total</span>
  <span m='3055700'>weight</span> <span m='3055910'>of</span> <span m='3056030'>p?</span>
  <span m='3057020'>So</span> <span m='3057080'>there</span> <span m='3057170'>might</span>
  <span m='3057320'>not</span> <span m='3057470'>be</span> <span m='3057620'>any</span>
  <span m='3057800'>heavy</span> <span m='3058070'>child</span> <span m='3058400'>according</span>
  <span m='3058700'>to</span> <span m='3058790'>this</span> <span m='3058940'>definition.</span>
  <span m='3059400'>Maybe</span> <span m='3059570'>it's</span> <span m='3059690'>nicely</span>
  <span m='3060080'>evenly</span> <span m='3060440'>balanced.</span> <span m='3061700'>Everybody's</span>
  <span m='3062180'>got</span> <span m='3062330'>a</span> <span m='3062390'>third.</span>
  <span m='3063090'>But</span> <span m='3063170'>if</span> <span m='3063230'>somebody</span>
  <span m='3063500'>has</span> <span m='3063590'>got</span> <span m='3063740'>bigger</span>
  <span m='3063950'>than</span> <span m='3064070'>1/2,</span> <span m='3064370'>I</span>
  <span m='3064430'>call</span> <span m='3064610'>it</span> <span m='3064670'>heavy.</span>
  <span m='3065540'>Everybody</span> <span m='3066020'>else</span> <span m='3066240'>is</span>
  <span m='3066370'>light.</span> <span m='3066620'>So</span> <span m='3066830'>there's</span>
  <span m='3067040'>going</span> <span m='3067130'>to</span> <span m='3067250'>be,</span>
  <span m='3067400'>at</span> <span m='3067490'>most,</span> <span m='3067880'>one</span>
  <span m='3068150'>heavy</span> <span m='3068450'>edge</span> <span m='3069230'>from</span>
  <span m='3069410'>every</span> <span m='3069620'>node.</span> <span m='3070490'>Therefore,</span>
  <span m='3071390'>heavy</span> <span m='3071700'>edges</span> <span m='3071960'>decompose</span>
  <span m='3072530'>your</span> <span m='3072650'>world</span> <span m='3072980'>into</span>
  <span m='3073220'>path's.</span> <span m='3074590'>Heavy</span> <span m='3074890'>paths</span>
  <span m='3076520'>decompose</span> <span m='3076970'>the</span> <span m='3077060'>tree.</span>
  </p><p><span m='3088730'>Nodes,</span> <span m='3091670'>every</span> <span m='3091940'>node</span>
  <span m='3092210'>lives</span> <span m='3092420'>in</span> <span m='3092510'>some</span>
  <span m='3092750'>heavy</span> <span m='3092950'>path.</span> <span m='3094100'>It</span>
  <span m='3094220'>may</span> <span m='3094370'>be</span> <span m='3094520'>node</span>
  <span m='3094790'>has</span> <span m='3095000'>no</span> <span m='3095180'>heavy</span>
  <span m='3095430'>childs,</span> <span m='3096300'>but,</span> <span m='3096520'>at</span>
  <span m='3096980'>most,</span> <span m='3097250'>one.</span> <span m='3098840'>This</span>
  <span m='3098990'>may</span> <span m='3099140'>seem</span> <span m='3099440'>kind</span>
  <span m='3099710'>of</span> <span m='3099980'>silly,</span> <span m='3101030'>but</span>
  <span m='3101150'>in</span> <span m='3101240'>fact,</span> <span m='3101600'>because</span>
  <span m='3102500'>your</span> <span m='3102740'>maybe</span> <span m='3103010'>all</span>
  <span m='3103220'>edges</span> <span m='3103460'>are</span> <span m='3103550'>light.</span>
  <span m='3103880'>This</span> <span m='3104030'>might</span> <span m='3104180'>not</span>
  <span m='3104330'>do</span> <span m='3104510'>anything,</span> <span m='3105200'>every</span>
  <span m='3105440'>node</span> <span m='3105640'>is</span> <span m='3105770'>in</span>
  <span m='3105860'>its</span> <span m='3106010'>own</span> <span m='3106130'>path,</span>
  <span m='3107030'>that's</span> <span m='3107270'>actually</span> <span m='3107570'>a</span>
  <span m='3107600'>really</span> <span m='3107810'>good</span> <span m='3108020'>case,</span>
  <span m='3109160'>light</span> <span m='3109460'>edges</span> <span m='3109970'>are</span>
  <span m='3110090'>good.</span> </p><p><span m='3111360'>Why</span> <span m='3111410'>are</span>
  <span m='3111470'>they</span> <span m='3111620'>good?</span> <span m='3111830'>Because</span>
  <span m='3112310'>then</span> <span m='3112490'>the</span> <span m='3112580'>size</span>
  <span m='3113000'>of</span> <span m='3113090'>v</span> <span m='3113780'>is</span>
  <span m='3113900'>at</span> <span m='3113990'>most</span> <span m='3114290'>half</span>
  <span m='3114680'>the</span> <span m='3114800'>size</span> <span m='3115130'>of</span>
  <span m='3115220'>its</span> <span m='3115340'>parent.</span> <span m='3116190'>I</span>
  <span m='3116230'>mean,</span> <span m='3116390'>every</span> <span m='3116690'>time</span>
  <span m='3116930'>you</span> <span m='3117020'>follow</span> <span m='3117410'>a</span>
  <span m='3117470'>light</span> <span m='3117710'>edge,</span> <span m='3118640'>the</span>
  <span m='3118760'>size</span> <span m='3119060'>of</span> <span m='3119150'>your</span>
  <span m='3119270'>subtree</span> <span m='3119660'>went</span> <span m='3119840'>down</span>
  <span m='3120050'>by</span> <span m='3120200'>a</span> <span m='3120230'>factor</span>
  <span m='3120530'>of</span> <span m='3120620'>2.</span> <span m='3121350'>How</span>
  <span m='3121370'>many</span> <span m='3121520'>times</span> <span m='3121740'>is</span>
  <span m='3121790'>going</span> <span m='3121910'>to</span> <span m='3122000'>happen?</span>
  <span m='3122930'>Log</span> <span m='3123200'>n times.</span> <span m='3124310'>Start</span>
  <span m='3124610'>with</span> <span m='3124940'>everything</span> <span m='3125450'>at</span>
  <span m='3125540'>the</span> <span m='3125630'>root,</span> <span m='3126170'>as</span>
  <span m='3126320'>you</span> <span m='3126440'>walk</span> <span m='3126680'>down,</span>
  <span m='3127430'>if</span> <span m='3127660'>you're</span> <span m='3127910'>decreasing</span>
  <span m='3128660'>your</span> <span m='3128750'>side</span> <span m='3129030'>effect</span>
  <span m='3129260'>or</span> <span m='3129400'>two</span> <span m='3129560'>every</span>
  <span m='3129740'>time,</span> <span m='3129980'>you</span> <span m='3130070'>can</span>
  <span m='3130190'>only</span> <span m='3130670'>follow</span> <span m='3131180'>log</span>
  <span m='3131750'>.</span> <span m='3132140'>Light</span> <span m='3132590'>edges.</span>
  </p><p><span m='3133740'>This</span> <span m='3133790'>is</span> <span m='3133880'>what</span>
  <span m='3134030'>we</span> <span m='3134120'>call</span> <span m='3134420'>the</span>
  <span m='3134540'>light</span> <span m='3134870'>depth</span> <span m='3135260'>of</span>
  <span m='3135380'>a</span> <span m='3135420'>node.</span> <span m='3142440'>This</span>
  <span m='3142680'>is</span> <span m='3143010'>the</span> <span m='3143310'>number</span>
  <span m='3143790'>of</span> <span m='3144210'>light</span> <span m='3144480'>edges</span>
  <span m='3146730'>on</span> <span m='3147000'>a</span> <span m='3147150'>root</span>
  <span m='3147450'>to</span> <span m='3149010'>the</span> <span m='3149250'>path.</span>
  <span m='3158070'>And</span> <span m='3158340'>it</span> <span m='3158490'>is</span>
  <span m='3158670'>always,</span> <span m='3159150'>at</span> <span m='3159300'>most,</span>
  <span m='3159720'>log</span> <span m='3159970'>n.</span> <span m='3162420'>Now,</span>
  <span m='3162580'>remember</span> <span m='3162900'>heavy</span> <span m='3163170'>edges</span>
  <span m='3163410'>could</span> <span m='3163560'>be</span> <span m='3163710'>huge.</span>
  <span m='3164040'>Maybe</span> <span m='3164310'>you</span> <span m='3164430'>follow,</span>
  <span m='3165300'>maybe</span> <span m='3165520'>your</span> <span m='3165600'>tree</span>
  <span m='3165830'>is</span> <span m='3165930'>a</span> <span m='3165990'>path.</span>
  <span m='3166380'>Then</span> <span m='3166560'>every</span> <span m='3166830'>edge</span>
  <span m='3166950'>is</span> <span m='3167070'>heavy.</span> <span m='3167940'>And</span>
  <span m='3168330'>you</span> <span m='3168510'>n</span> <span m='3168900'>of</span>
  <span m='3169200'>them</span> <span m='3169410'>to</span> <span m='3169530'>get</span>
  <span m='3169710'>from</span> <span m='3170490'>the</span> <span m='3170610'>root</span>
  <span m='3171090'>of</span> <span m='3171480'>v.</span> <span m='3173580'>So</span>
  <span m='3173760'>we</span> <span m='3173850'>can't</span> <span m='3174060'>bound</span>
  <span m='3174270'>the</span> <span m='3174330'>number</span> <span m='3174540'>of</span>
  <span m='3174610'>heavy</span> <span m='3174870'>edges.</span> </p><p><span m='3175480'>But</span>
  <span m='3175620'>the</span> <span m='3175710'>number</span> <span m='3175920'>of</span>
  <span m='3175980'>light</span> <span m='3176520'>we</span> <span m='3176670'>can</span>
  <span m='3176820'>bound</span> <span m='3177660'>as</span> <span m='3178140'>log</span>
  <span m='3178520'>n.</span> <span m='3179760'>This</span> <span m='3179970'>is</span>
  <span m='3180090'>where</span> <span m='3181990'>heavy</span> <span m='3182280'>light</span>
  <span m='3182460'>to</span> <span m='3182580'>composition</span> <span m='3183120'>is</span>
  <span m='3183240'>useful.</span> <span m='3184520'>So</span> <span m='3184950'>you've</span>
  <span m='3185060'>got</span> <span m='3185220'>preferred</span> <span m='3185520'>path</span>
  <span m='3185880'>composition.</span> <span m='3186510'>Our</span> <span m='3186860'>Or</span>
  <span m='3186960'>data</span> <span m='3187200'>structure,</span> <span m='3187650'>we're</span>
  <span m='3187770'>not</span> <span m='3187860'>going</span> <span m='3188010'>to</span>
  <span m='3188070'>change</span> <span m='3188370'>it.</span> <span m='3188490'>It's</span>
  <span m='3188640'>still</span> <span m='3188910'>following</span> <span m='3189370'>the</span>
  <span m='3189420'>preferred</span> <span m='3189750'>path</span> <span m='3189970'>the</span>
  <span m='3190100'>decomposition.</span> <span m='3190680'>But</span> <span m='3190830'>our</span>
  <span m='3190920'>analysis</span> <span m='3191550'>is</span> <span m='3191610'>going</span>
  <span m='3191760'>to</span> <span m='3191850'>think</span> <span m='3192120'>about</span>
  <span m='3192840'>which</span> <span m='3193050'>edges</span> <span m='3193350'>are</span>
  <span m='3193440'>heavy</span> <span m='3194190'>and</span> <span m='3194340'>which</span>
  <span m='3194520'>are</span> <span m='3194610'>light.</span> </p><p><span m='3196830'>In</span>
  <span m='3196950'>general,</span> <span m='3198030'>an</span> <span m='3198180'>edge</span>
  <span m='3198450'>can</span> <span m='3198600'>have</span> <span m='3198810'>four</span>
  <span m='3199110'>different</span> <span m='3199440'>states.</span> <span m='3200310'>It</span>
  <span m='3200400'>can</span> <span m='3200550'>be</span> <span m='3200700'>preferred</span>
  <span m='3201420'>or</span> <span m='3201570'>not</span> <span m='3201760'>preferred.</span>
  <span m='3202710'>And</span> <span m='3202830'>it</span> <span m='3202920'>can</span>
  <span m='3203040'>be</span> <span m='3203730'>preferred</span> <span m='3204120'>or</span>
  <span m='3204210'>not</span> <span m='3204390'>preferred,</span> <span m='3205110'>it</span>
  <span m='3205200'>could</span> <span m='3205310'>be</span> <span m='3205440'>heavy</span>
  <span m='3205770'>or</span> <span m='3205860'>light.</span> <span m='3207020'>All</span>
  <span m='3207230'>four</span> <span m='3207480'>of</span> <span m='3207540'>those</span>
  <span m='3207720'>combinations</span> <span m='3208380'>are</span> <span m='3208440'>possible,</span>
  <span m='3209050'>because</span> <span m='3209220'>one</span> <span m='3209400'>of</span>
  <span m='3209460'>them</span> <span m='3209580'>has</span> <span m='3209760'>to</span>
  <span m='3209850'>do</span> <span m='3209970'>with</span> <span m='3210090'>the</span>
  <span m='3210180'>access</span> <span m='3210480'>sequence,</span> <span m='3211560'>the</span>
  <span m='3211710'>other</span> <span m='3211920'>has</span> <span m='3212160'>to</span>
  <span m='3212280'>do</span> <span m='3212520'>with</span> <span m='3212850'>the</span>
  <span m='3212970'>structure</span> <span m='3213360'>of</span> <span m='3213450'>the</span>
  <span m='3213570'>tree.</span> <span m='3214290'>These</span> <span m='3214430'>are</span>
  <span m='3214500'>basically</span> <span m='3214890'>orthogonal</span> <span m='3215400'>to</span>
  <span m='3215520'>each</span> <span m='3215700'>other.</span> </p><p><span m='3218588'>OK,</span>
  <span m='3219490'>so</span> <span m='3221700'>let's</span> <span m='3221970'>maybe</span>
  <span m='3222300'>go</span> <span m='3224310'>here.</span> <span m='3249990'>So</span>
  <span m='3250070'>next</span> <span m='3250370'>thing</span> <span m='3250730'>I'm</span>
  <span m='3250820'>going</span> <span m='3251060'>to</span> <span m='3251180'>do</span>
  <span m='3251300'>is</span> <span m='3251420'>use</span> <span m='3251830'>heavy</span>
  <span m='3252080'>light</span> <span m='3252260'>decomposition</span> <span m='3252890'>to</span>
  <span m='3252980'>analyze</span> <span m='3253640'>total</span> <span m='3254060'>number</span>
  <span m='3254330'>of</span> <span m='3254390'>preferred</span> <span m='3254780'>child</span>
  <span m='3255140'>changes,</span> <span m='3256250'>by</span> <span m='3256400'>looking</span>
  <span m='3256790'>at</span> <span m='3257090'>not</span> <span m='3257330'>only</span>
  <span m='3257540'>whether</span> <span m='3257750'>an</span> <span m='3257840'>edge</span>
  <span m='3257990'>is</span> <span m='3258080'>preferred</span> <span m='3258470'>or</span>
  <span m='3258530'>not,</span> <span m='3259220'>but</span> <span m='3259400'>whether</span>
  <span m='3259700'>it</span> <span m='3259790'>is</span> <span m='3259910'>heavy</span>
  <span m='3260210'>or</span> <span m='3260300'>light.</span> <span m='3263960'>We're</span>
  <span m='3264060'>going</span> <span m='3264200'>to</span> <span m='3264260'>get</span>
  <span m='3264560'>an</span> <span m='3264710'>order</span> <span m='3265920'>m</span>
  <span m='3266265'>log</span> <span m='3266610'>n</span> <span m='3266800'>bound</span>
  <span m='3268010'>on</span> <span m='3269540'>preferred</span> <span m='3271160'>child</span>
  <span m='3272910'>changes.</span> </p><p><span m='3280970'>So</span> <span m='3281300'>here's</span>
  <span m='3281960'>the</span> <span m='3282120'>big</span> <span m='3282380'>idea.</span>
  <span m='3329970'>In</span> <span m='3330090'>order</span> <span m='3330270'>for</span>
  <span m='3331140'>a</span> <span m='3332490'>preferred</span> <span m='3332810'>child</span>
  <span m='3333070'>to</span> <span m='3333240'>change,</span> <span m='3333990'>I</span>
  <span m='3334080'>mean</span> <span m='3334200'>when</span> <span m='3334320'>you</span>
  <span m='3334410'>change</span> <span m='3335400'>for</span> <span m='3335610'>a</span>
  <span m='3335640'>child</span> <span m='3335880'>of</span> <span m='3335970'>one</span>
  <span m='3336150'>node</span> <span m='3336360'>from</span> <span m='3336810'>this</span>
  <span m='3337200'>to</span> <span m='3337500'>this,</span> <span m='3338610'>I'm</span>
  <span m='3338710'>going to</span> <span m='3338740'>think</span> <span m='3338970'>of</span>
  <span m='3339090'>this</span> <span m='3339530'>edge</span> <span m='3339870'>as
  being</span> <span m='3340530'>destroyed</span> <span m='3341430'>from</span> <span
  m='3341670'>its</span> <span m='3341820'>preferredness,</span> <span m='3342270'>and</span>
  <span m='3343170'>this</span> <span m='3343320'>one</span> <span m='3343500'>is</span>
  <span m='3343620'>being</span> <span m='3343830'>created</span> <span m='3344480'>in</span>
  <span m='3344610'>it's</span> <span m='3344750'>preferredness.</span> </p><p><span
  m='3346520'>OK,</span> <span m='3347350'>so</span> <span m='3348060'>of</span> <span
  m='3348120'>course,</span> <span m='3348330'>if</span> <span m='3349080'>we</span>
  <span m='3349230'>could</span> <span m='3349350'>count</span> <span m='3349980'>preferred</span>
  <span m='3350340'>edge</span> <span m='3350750'>equations,</span> <span m='3352140'>that</span>
  <span m='3352260'>would</span> <span m='3352410'>be</span> <span m='3352530'>basically</span>
  <span m='3352890'>the</span> <span m='3352980'>same</span> <span m='3353310'>as</span>
  <span m='3353430'>preferred</span> <span m='3353970'>child</span> <span m='3355050'>changes.</span>
  <span m='3356940'>Or</span> <span m='3357210'>we</span> <span m='3357330'>could</span>
  <span m='3357450'>count</span> <span m='3358020'>preferred</span> <span m='3358590'>edge</span>
  <span m='3359670'>destructions,</span> <span m='3360900'>that</span> <span m='3361110'>would</span>
  <span m='3361200'>be</span> <span m='3361320'>basically,</span> <span m='3361650'>the</span>
  <span m='3361710'>same</span> <span m='3361980'>as</span> <span m='3362050'>the</span>
  <span m='3362090'>number</span> <span m='3362340'>of</span> <span m='3362400'>changes.</span>
  <span m='3364030'>OK,</span> <span m='3364530'>so</span> <span m='3364890'>that's</span>
  <span m='3365130'>the</span> <span m='3365220'>idea.</span> <span m='3365610'>If</span>
  <span m='3365790'>you</span> <span m='3365920'>ignore</span> <span m='3366150'>this</span>
  <span m='3366300'>part,</span> <span m='3366740'>or</span> <span m='3366930'>look</span>
  <span m='3367080'>at</span> <span m='3367140'>pilferage</span> <span m='3367620'>equations</span>
  <span m='3368220'>or</span> <span m='3368310'>prefer</span> <span m='3368520'>it</span>
  <span m='3368620'>is</span> <span m='3368810'>destructions.</span> <span m='3369480'>But</span>
  <span m='3369630'>then</span> <span m='3369960'>I</span> <span m='3370110'>also</span>
  <span m='3370410'>care</span> <span m='3370590'>about</span> <span m='3370770'>whether</span>
  <span m='3370980'>that</span> <span m='3371160'>edge</span> <span m='3371370'>is</span>
  <span m='3371460'>light</span> <span m='3372030'>or</span> <span m='3372180'>heavy.</span>
  </p><p><span m='3373890'>So</span> <span m='3375030'>it</span> <span m='3375180'>turns</span>
  <span m='3375450'>out</span> <span m='3375630'>for</span> <span m='3375810'>the</span>
  <span m='3375900'>light</span> <span m='3376170'>edges,</span> <span m='3376530'>it's</span>
  <span m='3376650'>going</span> <span m='3376800'>to</span> <span m='3376860'>be</span>
  <span m='3376950'>easier</span> <span m='3377370'>to</span> <span m='3377490'>talk</span>
  <span m='3377790'>about</span> <span m='3378330'>the</span> <span m='3378450'>creations</span>
  <span m='3379530'>or</span> <span m='3379650'>to</span> <span m='3379800'>bound</span>
  <span m='3380040'>the</span> <span m='3380160'>creations.</span> <span m='3380610'>For</span>
  <span m='3380770'>heavy</span> <span m='3381030'>edges</span> <span m='3381270'>is</span>
  <span m='3381360'>going</span> <span m='3381480'>to</span> <span m='3381570'>be</span>
  <span m='3381660'>easier</span> <span m='3382310'>to</span> <span m='3382530'>bound</span>
  <span m='3382860'>the</span> <span m='3382970'>destructions.</span> <span m='3384360'>If</span>
  <span m='3384510'>I</span> <span m='3384660'>do</span> <span m='3384810'>both</span>
  <span m='3385110'>of</span> <span m='3385170'>those</span> <span m='3385380'>and</span>
  <span m='3385470'>add</span> <span m='3385620'>them</span> <span m='3385770'>up,</span>
  <span m='3386130'>that</span> <span m='3386390'>in</span> <span m='3386520'>total</span>
  <span m='3386910'>is,</span> <span m='3387150'>basically,</span> <span m='3387720'>the</span>
  <span m='3387840'>number</span> <span m='3388050'>of</span> <span m='3388110'>preferred</span>
  <span m='3388440'>edge</span> <span m='3389250'>changes</span> <span m='3390330'>according</span>
  <span m='3390600'>to</span> <span m='3390690'>whether</span> <span m='3390820'>there</span>
  <span m='3390900'>is</span> <span m='3390990'>light</span> <span m='3391200'>or</span>
  <span m='3391290'>heavy.</span> </p><p><span m='3392460'>You</span> <span m='3392610'>need</span>
  <span m='3392760'>to</span> <span m='3392850'>add</span> <span m='3393090'>in</span>
  <span m='3393210'>a</span> <span m='3393270'>little</span> <span m='3393540'>bit</span>
  <span m='3393750'>more</span> <span m='3394140'>because</span> <span m='3395200'>and</span>
  <span m='3395370'>edge</span> <span m='3395790'>might</span> <span m='3396020'>get</span>
  <span m='3396180'>created</span> <span m='3396750'>but</span> <span m='3396870'>never</span>
  <span m='3397110'>destroyed.</span> <span m='3398160'>And</span> <span m='3398340'>if</span>
  <span m='3398520'>it's</span> <span m='3399120'>heavy,</span> <span m='3399900'>then</span>
  <span m='3400050'>it</span> <span m='3400110'>won't</span> <span m='3400260'>get</span>
  <span m='3400380'>counted</span> <span m='3400710'>here.</span> <span m='3401310'>Or</span>
  <span m='3401460'>an</span> <span m='3401550'>edge</span> <span m='3401730'>might</span>
  <span m='3401910'>get</span> <span m='3402090'>destroyed</span> <span m='3402720'>because</span>
  <span m='3402930'>it</span> <span m='3403290'>exists</span> <span m='3403710'>originally,</span>
  <span m='3404790'>never</span> <span m='3405000'>got</span> <span m='3405180'>created</span>
  <span m='3405600'>but</span> <span m='3405690'>it</span> <span m='3405750'>got</span>
  <span m='3405960'>destroyed</span> <span m='3406440'>over</span> <span m='3406620'>the</span>
  <span m='3406680'>operations.</span> <span m='3407740'>And</span> <span m='3407840'>if</span>
  <span m='3407850'>it</span> <span m='3407910'>was</span> <span m='3408060'>light,</span>
  <span m='3408490'>then</span> <span m='3408540'>it</span> <span m='3408600'>wouldn't</span>
  <span m='3408810'>be</span> <span m='3408930'>counted</span> <span m='3409260'>here.</span>
  <span m='3409460'>So</span> <span m='3409670'>just</span> <span m='3409830'>add</span>
  <span m='3410040'>on</span> <span m='3410190'>n</span> <span m='3410310'>plus</span>
  <span m='3410520'>1</span> <span m='3410760'>for</span> <span m='3410940'>all</span>
  <span m='3411100'>the</span> <span m='3411240'>edges</span> <span m='3411480'>might</span>
  <span m='3411660'>get</span> <span m='3411840'>a</span> <span m='3411960'>bonus</span>
  <span m='3412320'>point.</span> <span m='3413100'>But,</span> <span m='3413250'>otherwise,</span>
  <span m='3414660'>this</span> <span m='3414840'>will</span> <span m='3415160'>bound</span>
  <span m='3415380'>it,</span> <span m='3416260'>it's</span> <span m='3416360'>going</span>
  <span m='3416370'>to</span> <span m='3416430'>look</span> <span m='3416550'>at</span>
  <span m='3416670'>light</span> <span m='3416940'>edge</span> <span m='3417090'>creations--</span>
  <span m='3418345'>creations,</span> <span m='3418950'>light</span> <span m='3419250'>preferred</span>
  <span m='3419700'>edge</span> <span m='3419880'>creations,</span> <span m='3420810'>heavy</span>
  <span m='3421140'>preferred</span> <span m='3421590'>edge</span> <span m='3421800'>distructions.</span>
  </p><p><span m='3423180'>And</span> <span m='3423300'>it</span> <span m='3423390'>can</span>
  <span m='3423540'>be</span> <span m='3423660'>destroyed</span> <span m='3424110'>because</span>
  <span m='3424380'>it</span> <span m='3424470'>becomes</span> <span m='3424740'>no</span>
  <span m='3424860'>longer</span> <span m='3425100'>heavy</span> <span m='3425370'>or</span>
  <span m='3425610'>no</span> <span m='3425760'>longer</span> <span m='3426070'>preferred.</span>
  <span m='3426990'>And</span> <span m='3427110'>it</span> <span m='3427170'>can</span>
  <span m='3427320'>be</span> <span m='3427410'>created</span> <span m='3427860'>because</span>
  <span m='3428250'>it</span> <span m='3428730'>becomes</span> <span m='3429240'>light</span>
  <span m='3429600'>or</span> <span m='3429730'>it</span> <span m='3429780'>becomes</span>
  <span m='3430140'>preferred</span> <span m='3430560'>and</span> <span m='3430660'>was</span>
  <span m='3430800'>already</span> <span m='3431100'>the</span> <span m='3431220'>other</span>
  <span m='3431400'>one.</span> <span m='3432810'>OK,</span> <span m='3432960'>so</span>
  <span m='3433290'>all</span> <span m='3433470'>we</span> <span m='3433590'>need</span>
  <span m='3433740'>to</span> <span m='3433830'>do</span> <span m='3434010'>is</span>
  <span m='3434130'>think</span> <span m='3434310'>about,</span> <span m='3434780'>in</span>
  <span m='3435330'>all</span> <span m='3435480'>these</span> <span m='3435630'>operations,</span>
  <span m='3436230'>access</span> <span m='3436740'>link-cut,</span> <span m='3438360'>just</span>
  <span m='3438510'>the</span> <span m='3438630'>updates.</span> <span m='3439230'>So</span>
  <span m='3439500'>access</span> <span m='3439930'>link/cut.</span> <span m='3441720'>How</span>
  <span m='3441930'>can</span> <span m='3442110'>this</span> <span m='3442260'>change?</span>
  </p><p><span m='3443860'>So</span> <span m='3443940'>let's</span> <span m='3444120'>start</span>
  <span m='3444360'>with</span> <span m='3444660'>access.</span> <span m='3450180'>So</span>
  <span m='3451310'>access.</span> <span m='3453060'>The</span> <span m='3453180'>hard</span>
  <span m='3453450'>one.</span> <span m='3457620'>Well,</span> <span m='3458310'>there's</span>
  <span m='3458670'>all</span> <span m='3458850'>this</span> <span m='3459000'>implementation,</span>
  <span m='3459820'>which</span> <span m='3459870'>is</span> <span m='3459960'>dealing</span>
  <span m='3460230'>with</span> <span m='3460350'>the</span> <span m='3460440'>tree</span>
  <span m='3460650'>of</span> <span m='3460760'>ox</span> <span m='3461010'>trees,</span>
  <span m='3461730'>but</span> <span m='3461850'>really,</span> <span m='3462260'>an</span>
  <span m='3462390'>access</span> <span m='3462720'>does</span> <span m='3462900'>a</span>
  <span m='3462960'>very</span> <span m='3463140'>simple</span> <span m='3463470'>thing.</span>
  <span m='3464100'>It</span> <span m='3464220'>makes</span> <span m='3464490'>the</span>
  <span m='3464580'>path</span> <span m='3464940'>from</span> <span m='3465120'>the</span>
  <span m='3465210'>root</span> <span m='3465390'>to</span> <span m='3465510'>be</span>
  <span m='3465810'>preferred.</span> <span m='3467460'>That's</span> <span m='3467670'>its</span>
  <span m='3467820'>goal.</span> <span m='3468790'>So</span> <span m='3468890'>there's</span>
  <span m='3469140'>the</span> <span m='3469260'>root,</span> <span m='3470280'>it's</span>
  <span m='3470580'>to</span> <span m='3470730'>v,</span> <span m='3471750'>this</span>
  <span m='3471990'>becomes</span> <span m='3472410'>preferred</span> <span m='3472920'>whether</span>
  <span m='3473220'>it</span> <span m='3473280'>was</span> <span m='3473730'>before</span>
  <span m='3474240'>or</span> <span m='3474300'>not.</span> <span m='3474630'>Some</span>
  <span m='3474930'>of</span> <span m='3475050'>it</span> <span m='3475140'>was</span>
  <span m='3475320'>before</span> <span m='3475680'>some</span> <span m='3475920'>of</span>
  <span m='3476040'>it</span> <span m='3476100'>wasn't.</span> <span m='3477300'>So</span>
  <span m='3477420'>some</span> <span m='3477690'>of</span> <span m='3477780'>these</span>
  <span m='3478050'>might</span> <span m='3478260'>be</span> <span m='3478940'>on</span>
  <span m='3479320'>newly</span> <span m='3479700'>preferred.</span> </p><p><span
  m='3485630'>It</span> <span m='3485780'>does</span> <span m='3485930'>not</span>
  <span m='3486170'>change</span> <span m='3486440'>which</span> <span m='3486650'>edges</span>
  <span m='3486890'>are</span> <span m='3486980'>heavy</span> <span m='3487250'>or</span>
  <span m='3487340'>light.</span> <span m='3487820'>It</span> <span m='3487880'>does</span>
  <span m='3488030'>not</span> <span m='3488180'>change</span> <span m='3488420'>the</span>
  <span m='3488510'>structure</span> <span m='3488930'>of</span> <span m='3489020'>the</span>
  <span m='3489110'>tree</span> <span m='3489350'>when</span> <span m='3489470'>you</span>
  <span m='3489560'>do</span> <span m='3489680'>an</span> <span m='3489770'>access.</span>
  <span m='3490160'>Only</span> <span m='3490430'>link/cut</span> <span m='3490970'>changed</span>
  <span m='3491240'>the</span> <span m='3491330'>structure</span> <span m='3491690'>of</span>
  <span m='3491750'>the</span> <span m='3491810'>tree.</span> <span m='3492740'>So</span>
  <span m='3493280'>it</span> <span m='3493940'>makes</span> <span m='3494210'>some</span>
  <span m='3494420'>of</span> <span m='3494510'>these</span> <span m='3494690'>edges</span>
  <span m='3494930'>preferred.</span> <span m='3496010'>What</span> <span m='3496250'>that</span>
  <span m='3496400'>means,</span> <span m='3496800'>of</span> <span m='3496900'>course,</span>
  <span m='3497220'>is</span> <span m='3497300'>that</span> <span m='3497480'>some</span>
  <span m='3497870'>other</span> <span m='3498170'>edges</span> <span m='3499070'>used</span>
  <span m='3499310'>to</span> <span m='3499430'>be</span> <span m='3499550'>preferred</span>
  <span m='3500030'>and</span> <span m='3500180'>are</span> <span m='3500300'>no</span>
  <span m='3500480'>longer</span> <span m='3500810'>preferred.</span> <span m='3501770'>Those</span>
  <span m='3502220'>are</span> <span m='3502280'>the</span> <span m='3502400'>preferred</span>
  <span m='3502850'>child</span> <span m='3503240'>changes.</span> <span m='3504510'>So</span>
  <span m='3504710'>if</span> <span m='3504860'>we</span> <span m='3504980'>look</span>
  <span m='3505160'>at</span> <span m='3505220'>this,</span> <span m='3506270'>first</span>
  <span m='3506690'>concern</span> <span m='3507140'>is</span> <span m='3507230'>that</span>
  <span m='3507350'>we're</span> <span m='3507500'>creating</span> <span m='3508190'>new</span>
  <span m='3508970'>preferred</span> <span m='3509330'>edges,</span> <span m='3509620'>so</span>
  <span m='3509810'>maybe</span> <span m='3510170'>we</span> <span m='3510290'>create</span>
  <span m='3510650'>some</span> <span m='3510830'>new</span> <span m='3511070'>light</span>
  <span m='3511370'>preferred</span> <span m='3511760'>edges.</span> <span m='3513090'>How</span>
  <span m='3513170'>many</span> <span m='3513440'>new</span> <span m='3513650'>light</span>
  <span m='3513890'>preferred</span> <span m='3514220'>edges</span> <span m='3514490'>could</span>
  <span m='3514670'>we</span> <span m='3514790'>create</span> <span m='3515540'>along</span>
  <span m='3515870'>this</span> <span m='3516020'>path?</span> <span m='3518250'>Most</span>
  <span m='3518560'>log</span> <span m='3518860'>n.</span> <span m='3519110'>Whatever</span>
  <span m='3519560'>the</span> <span m='3519950'>light</span> <span m='3520700'>depth</span>
  <span m='3521060'>of v</span> <span m='3521290'>is</span> <span m='3521610'>as</span>
  <span m='3521930'>an</span> <span m='3522020'>upper</span> <span m='3522230'>bound.</span>
  </p><p><span m='3523380'>So</span> <span m='3527110'>make,</span> <span m='3529350'>at</span>
  <span m='3529520'>most,</span> <span m='3529940'>log</span> <span m='3530300'>and,</span>
  <span m='3531610'>like</span> <span m='3531860'>preferred</span> <span m='3532200'>edges,</span>
  <span m='3532490'>because</span> <span m='3532970'>they</span> <span m='3533180'>all</span>
  <span m='3533480'>live</span> <span m='3533720'>on</span> <span m='3533810'>a</span>
  <span m='3533870'>single</span> <span m='3534170'>path.</span> <span m='3536420'>And</span>
  <span m='3536540'>it</span> <span m='3536600'>would</span> <span m='3536690'>be</span>
  <span m='3536780'>really</span> <span m='3537080'>hard</span> <span m='3537470'>to</span>
  <span m='3537650'>bound</span> <span m='3537980'>how</span> <span m='3538160'>many</span>
  <span m='3538430'>heavy</span> <span m='3538760'>preferred</span> <span m='3539120'>edges</span>
  <span m='3539390'>we</span> <span m='3539510'>make.</span> <span m='3541050'>But</span>
  <span m='3541220'>we</span> <span m='3541310'>don't</span> <span m='3541460'>have</span>
  <span m='3541670'>to.</span> <span m='3542050'>We</span> <span m='3542120'>don't</span>
  <span m='3542270'>have</span> <span m='3542480'>to</span> <span m='3542660'>worry</span>
  <span m='3542840'>about</span> <span m='3543080'>heavy</span> <span m='3543740'>preferred</span>
  <span m='3544080'>edges</span> <span m='3544250'>being</span> <span m='3544460'>destroyed.</span>
  <span m='3545510'>Now,</span> <span m='3545660'>those</span> <span m='3545930'>edges</span>
  <span m='3546230'>could</span> <span m='3546410'>be</span> <span m='3546660'>these</span>
  <span m='3546980'>ones.</span> <span m='3547310'>These</span> <span m='3547550'>edges</span>
  <span m='3547820'>used</span> <span m='3548090'>to</span> <span m='3548180'>be</span>
  <span m='3548300'>preferred,</span> <span m='3549110'>now</span> <span m='3549320'>they're</span>
  <span m='3549440'>not.</span> <span m='3549740'>If</span> <span m='3549890'>they</span>
  <span m='3550010'>were</span> <span m='3550130'>heavy,</span> <span m='3551000'>then</span>
  <span m='3551180'>I</span> <span m='3551270'>have</span> <span m='3551420'>to</span>
  <span m='3551510'>pay</span> <span m='3551720'>for</span> <span m='3551930'>them.</span>
  </p><p><span m='3553610'>But</span> <span m='3554690'>the</span> <span m='3554780'>number</span>
  <span m='3555050'>of</span> <span m='3555140'>these</span> <span m='3555350'>edges</span>
  <span m='3556340'>is</span> <span m='3556580'>equal</span> <span m='3556910'>to,</span>
  <span m='3557420'>or</span> <span m='3557600'>is</span> <span m='3557780'>at</span>
  <span m='3557870'>most,</span> <span m='3558390'>the</span> <span m='3558490'>number</span>
  <span m='3558620'>of</span> <span m='3558740'>these</span> <span m='3558950'>edges.</span>
  <span m='3559310'>I</span> <span m='3559370'>mean,</span> <span m='3559750'>if</span>
  <span m='3560270'>this</span> <span m='3560480'>edge</span> <span m='3560630'>was</span>
  <span m='3560750'>heavy,</span> <span m='3561470'>every</span> <span m='3561710'>node</span>
  <span m='3561890'>has</span> <span m='3562040'>only</span> <span m='3562280'>one</span>
  <span m='3562490'>heavy</span> <span m='3563300'>down</span> <span m='3563540'>pointer.</span>
  <span m='3563960'>So</span> <span m='3564080'>if</span> <span m='3564150'>this</span>
  <span m='3564320'>edge</span> <span m='3564460'>is</span> <span m='3564590'>heavy</span>
  <span m='3565220'>hanging</span> <span m='3565520'>off,</span> <span m='3565700'>then</span>
  <span m='3565820'>this</span> <span m='3565970'>one</span> <span m='3566150'>is</span>
  <span m='3566360'>light.</span> <span m='3567280'>We</span> <span m='3567320'>know</span>
  <span m='3567470'>there's</span> <span m='3567620'>only</span> <span m='3567860'>log</span>
  <span m='3568190'>n</span> <span m='3568310'>light</span> <span m='3568520'>edges</span>
  <span m='3568850'>here.</span> <span m='3569880'>So</span> <span m='3569980'>the</span>
  <span m='3570080'>number</span> <span m='3570260'>of</span> <span m='3570350'>heavy</span>
  <span m='3570680'>edges</span> <span m='3570950'>coming</span> <span m='3571280'>off</span>
  <span m='3571520'>here</span> <span m='3571790'>can</span> <span m='3572000'>also</span>
  <span m='3572330'>be</span> <span m='3572670'>most</span> <span m='3572920'>log</span>
  <span m='3573190'>n,</span> </p><p><span m='3575370'>So</span> <span m='3575960'>destroy,</span>
  <span m='3578264'>at</span> <span m='3578690'>most,</span> <span m='3579910'>log</span>
  <span m='3580520'>n</span> <span m='3582590'>heavy</span> <span m='3583170'>preferred</span>
  <span m='3583420'>edges.</span> <span m='3587120'>Yeah</span> <span m='3590660'>In</span>
  <span m='3590930'>some sense,</span> <span m='3591140'>we</span> <span m='3591230'>don't</span>
  <span m='3591410'>even</span> <span m='3591590'>really</span> <span m='3591800'>are</span>
  <span m='3591980'>about</span> <span m='3592190'>the</span> <span m='3592280'>word</span>
  <span m='3592400'>preferred</span> <span m='3592850'>here.</span> <span m='3595040'>But,</span>
  <span m='3595190'>of</span> <span m='3595310'>course,</span> <span m='3595520'>we're</span>
  <span m='3595640'>not</span> <span m='3595880'>making</span> <span m='3596420'>them,</span>
  <span m='3596700'>light</span> <span m='3597080'>so</span> <span m='3597670'>anyway.</span>
  <span m='3601324'>Is that</span> <span m='3602090'>clear?</span> <span m='3602540'>Now,</span>
  <span m='3602660'>there's</span> <span m='3602810'>actually</span> <span m='3603110'>one</span>
  <span m='3603320'>more</span> <span m='3603500'>edge</span> <span m='3603710'>that</span>
  <span m='3603800'>could</span> <span m='3603950'>change</span> <span m='3604430'>which</span>
  <span m='3604670'>is,</span> <span m='3605210'>there</span> <span m='3605330'>used</span>
  <span m='3605570'>to</span> <span m='3605690'>be</span> <span m='3605810'>a</span>
  <span m='3605870'>preferred</span> <span m='3606200'>edge</span> <span m='3606380'>from</span>
  <span m='3606560'>v,</span> <span m='3607190'>now</span> <span m='3607370'>there</span>
  <span m='3607490'>isn't.</span> <span m='3607880'>We</span> <span m='3608000'>destroyed</span>
  <span m='3608420'>that</span> <span m='3608630'>in</span> <span m='3608720'>the</span>
  <span m='3608810'>very</span> <span m='3609020'>beginning</span> <span m='3609380'>of</span>
  <span m='3609510'>the</span> <span m='3609550'>operation.</span> <span m='3611220'>So</span>
  <span m='3611330'>maybe</span> <span m='3612470'>plus</span> <span m='3612770'>1</span>
  <span m='3613250'>that</span> <span m='3613370'>might</span> <span m='3613520'>have</span>
  <span m='3613610'>destroyed</span> <span m='3614000'>one</span> <span m='3614210'>more</span>
  <span m='3614390'>heavy</span> <span m='3614660'>edge.</span> <span m='3615650'>But</span>
  <span m='3615740'>overall</span> <span m='3616890'>order</span> <span m='3617330'>log
  n.</span> <span m='3619940'>So,</span> <span m='3620090'>actually,</span> <span
  m='3620510'>really</span> <span m='3620780'>easy</span> <span m='3621950'>to</span>
  <span m='3622100'>analyze</span> <span m='3622490'>access.</span> <span m='3626100'>Any</span>
  <span m='3626420'>questions</span> <span m='3626810'>about</span> <span m='3627030'>that?</span>
  </p><p><span m='3642500'>OK,</span> <span m='3643720'>link/cut</span> <span m='3646390'>not
  much</span> <span m='3646950'>to</span> <span m='3647090'>say</span> <span m='3647600'>here.</span>
  <span m='3650000'>Yeah,</span> <span m='3651170'>so</span> <span m='3651320'>link/cut</span>
  <span m='3652150'>don't really</span> <span m='3652430'>change</span> <span m='3652820'>what's</span>
  <span m='3653030'>preferred.</span> <span m='3653600'>I'm</span> <span m='3653990'>analyzing--</span>
  <span m='3655380'>I'm</span> <span m='3655510'>going</span> <span m='3655700'>to</span>
  <span m='3655760'>think</span> <span m='3655910'>about</span> <span m='3656120'>what</span>
  <span m='3656360'>link</span> <span m='3656570'>does</span> <span m='3656930'>after</span>
  <span m='3657260'>it</span> <span m='3657350'>accesses</span> <span m='3657790'>v
  and w.</span> <span m='3658310'>Because</span> <span m='3658490'>access</span> <span
  m='3658880'>we've</span> <span m='3659060'>already</span> <span m='3659630'>analyzed.</span>
  <span m='3660710'>So</span> <span m='3660920'>link</span> <span m='3661490'>is</span>
  <span m='3661730'>just</span> <span m='3663590'>these</span> <span m='3663830'>two</span>
  <span m='3664070'>operations</span> <span m='3664730'>which</span> <span m='3664910'>add</span>
  <span m='3665120'>a</span> <span m='3665150'>single</span> <span m='3665450'>pointer.</span>
  </p><p><span m='3666540'>So</span> <span m='3666700'>if</span> <span m='3666800'>you</span>
  <span m='3666890'>look</span> <span m='3667130'>at</span> <span m='3667280'>what</span>
  <span m='3667460'>that's</span> <span m='3667700'>doing</span> <span m='3668210'>in</span>
  <span m='3668540'>the</span> <span m='3669710'>represented</span> <span m='3670400'>tree,</span>
  <span m='3670760'>which</span> <span m='3670940'>was</span> <span m='3671720'>v</span>
  <span m='3672110'>was the</span> <span m='3672230'>route</span> <span m='3673700'>and</span>
  <span m='3673850'>we</span> <span m='3674030'>made</span> <span m='3674330'>it</span>
  <span m='3674570'>to</span> <span m='3674690'>be</span> <span m='3674900'>a</span>
  <span m='3674960'>new</span> <span m='3675110'>child</span> <span m='3676050'>w,</span>
  <span m='3678710'>which</span> <span m='3678980'>lived</span> <span m='3679220'>in</span>
  <span m='3679340'>some</span> <span m='3679610'>tree</span> <span m='3681260'>over</span>
  <span m='3681440'>here.</span> <span m='3682520'>That's</span> <span m='3682930'>in</span>
  <span m='3683120'>the</span> <span m='3683210'>represented</span> <span m='3683720'>tree,</span>
  <span m='3683960'>what</span> <span m='3684080'>happens.</span> <span m='3688470'>What</span>
  <span m='3688820'>happens</span> <span m='3689390'>is</span> <span m='3689570'>that</span>
  <span m='3690770'>w</span> <span m='3691550'>gets</span> <span m='3692000'>heavier.</span>
  <span m='3694100'>I</span> <span m='3694190'>guess</span> <span m='3694910'>also</span>
  <span m='3695240'>this</span> <span m='3695430'>get's</span> <span m='3695790'>heavier.</span>
  <span m='3696680'>All</span> <span m='3696890'>the</span> <span m='3697010'>nodes</span>
  <span m='3697370'>on</span> <span m='3697520'>this</span> <span m='3698000'>route</span>
  <span m='3698300'>to</span> <span m='3698480'>w</span> <span m='3698840'>path</span>
  <span m='3699320'>get</span> <span m='3699500'>heavier.</span> <span m='3701180'>That's</span>
  <span m='3701390'>all</span> <span m='3701570'>that</span> <span m='3701690'>happens</span>
  <span m='3702620'>in</span> <span m='3702740'>terms</span> <span m='3703040'>of</span>
  <span m='3703610'>heavy,</span> <span m='3703940'>light.</span> <span m='3704270'>Preferred</span>
  <span m='3704600'>paths</span> <span m='3704900'>don't</span> <span m='3705050'>change.</span>
  <span m='3705890'>It's</span> <span m='3706190'>just</span> <span m='3706370'>about</span>
  <span m='3707160'>heavy and</span> <span m='3707390'>light</span> <span m='3707570'>changing.</span>
  </p><p><span m='3709870'>OK,</span> <span m='3711230'>in</span> <span m='3711350'>fact,</span>
  <span m='3711620'>this</span> <span m='3711770'>will</span> <span m='3711890'>be</span>
  <span m='3712010'>a</span> <span m='3712070'>preferred</span> <span m='3712430'>path</span>
  <span m='3712850'>from</span> <span m='3713210'>the</span> <span m='3713330'>root</span>
  <span m='3713630'>to</span> <span m='3713740'>v</span> <span m='3714690'>because</span>
  <span m='3714860'>we</span> <span m='3714950'>just</span> <span m='3715160'>accessed</span>
  <span m='3715520'>those</span> <span m='3715730'>guys.</span> <span m='3722640'>So</span>
  <span m='3723130'>we're</span> <span m='3723350'>heavying</span> <span m='3724150'>edges,</span>
  <span m='3724840'>which</span> <span m='3725050'>means</span> <span m='3725260'>you</span>
  <span m='3725350'>might</span> <span m='3725590'>create</span> <span m='3726670'>new</span>
  <span m='3727150'>heavy</span> <span m='3727600'>preferred</span> <span m='3728140'>edges.</span>
  <span m='3729010'>But</span> <span m='3729130'>we</span> <span m='3729220'>don't</span>
  <span m='3729400'>care</span> <span m='3729610'>about</span> <span m='3730600'>heavy</span>
  <span m='3730870'>preferred</span> <span m='3731200'>edges</span> <span m='3732130'>being</span>
  <span m='3732370'>created.</span> <span m='3732760'>We</span> <span m='3732880'>only</span>
  <span m='3733060'>care</span> <span m='3733210'>about</span> <span m='3733420'>them</span>
  <span m='3733540'>being</span> <span m='3733750'>destroyed.</span> </p><p><span
  m='3736580'>So</span> <span m='3736905'>has</span> <span m='3737230'>anything</span>
  <span m='3737590'>changed?</span> <span m='3738010'>Well,</span> <span m='3739120'>there</span>
  <span m='3739240'>might</span> <span m='3739450'>have</span> <span m='3739540'>been</span>
  <span m='3739690'>a</span> <span m='3739750'>heavy</span> <span m='3740110'>edge</span>
  <span m='3740500'>hanging</span> <span m='3740920'>off</span> <span m='3741100'>of</span>
  <span m='3741220'>here.</span> <span m='3742450'>Is that</span> <span m='3742610'>possible?</span>
  <span m='3746550'>Yeah,</span> <span m='3746830'>so</span> <span m='3746940'>this</span>
  <span m='3747120'>might</span> <span m='3747300'>turn</span> <span m='3747660'>light,</span>
  <span m='3748890'>because</span> <span m='3749310'>this</span> <span m='3749460'>one</span>
  <span m='3749640'>became</span> <span m='3750000'>heavier.</span> <span m='3751340'>So</span>
  <span m='3751440'>this</span> <span m='3751650'>edge</span> <span m='3751800'>might</span>
  <span m='3752100'>become</span> <span m='3752610'>light,</span> <span m='3753010'>which</span>
  <span m='3753090'>means</span> <span m='3753330'>we</span> <span m='3753420'>might</span>
  <span m='3753660'>have</span> <span m='3754680'>potentially</span> <span m='3755220'>lost--</span>
  <span m='3756180'>this</span> <span m='3756390'>could</span> <span m='3756540'>have</span>
  <span m='3756660'>been</span> <span m='3756780'>preferred</span> <span m='3757140'>before.</span>
  <span m='3758430'>It</span> <span m='3758550'>wasn't</span> <span m='3758790'>preferred,</span>
  <span m='3759180'>so</span> <span m='3759330'>who</span> <span m='3759420'>cares?</span>
  <span m='3760980'>If</span> <span m='3761090'>we've</span> <span m='3761220'>already</span>
  <span m='3761400'>done</span> <span m='3761550'>the</span> <span m='3761670'>accesses,</span>
  <span m='3762180'>the</span> <span m='3762540'>edges</span> <span m='3762870'>are</span>
  <span m='3763140'>already not</span> <span m='3763320'>preferred.</span> <span m='3763830'>So</span>
  <span m='3764160'>not</span> <span m='3764310'>a</span> <span m='3764370'>big</span>
  <span m='3764520'>deal.</span> <span m='3765120'>So</span> <span m='3765300'>can</span>
  <span m='3765420'>anything</span> <span m='3765720'>happen?</span> <span m='3765990'>I</span>
  <span m='3766050'>think</span> <span m='3766890'>not.</span> </p><p><span m='3768990'>Some</span>
  <span m='3769290'>of</span> <span m='3769350'>the</span> <span m='3769470'>edges</span>
  <span m='3769770'>on</span> <span m='3769890'>the</span> <span m='3769980'>path</span>
  <span m='3770190'>might</span> <span m='3770340'>become</span> <span m='3770610'>heavy,</span>
  <span m='3770880'>but</span> <span m='3771000'>we</span> <span m='3771120'>don't</span>
  <span m='3771240'>care</span> <span m='3771570'>because</span> <span m='3771750'>they</span>
  <span m='3772080'>are</span> <span m='3772170'>preferred.</span> <span m='3773160'>Some</span>
  <span m='3773400'>of</span> <span m='3773460'>the</span> <span m='3773610'>edges</span>
  <span m='3774090'>off</span> <span m='3774330'>the</span> <span m='3774420'>path</span>
  <span m='3774660'>might</span> <span m='3774810'>become</span> <span m='3775050'>light,</span>
  <span m='3775260'>but</span> <span m='3775350'>we</span> <span m='3775410'>don't</span>
  <span m='3775560'>care</span> <span m='3775710'>because</span> <span m='3775860'>they're</span>
  <span m='3775980'>not</span> <span m='3776160'>preferred.</span> <span m='3776968'>Done.</span>
  <span m='3778680'>So</span> <span m='3778830'>this</span> <span m='3779040'>actually</span>
  <span m='3779310'>costs</span> <span m='3780270'>zero</span> <span m='3783570'>in</span>
  <span m='3783780'>just</span> <span m='3783960'>analyzing</span> <span m='3784380'>number</span>
  <span m='3784610'>of preferred</span> <span m='3784950'>child</span> <span m='3785250'>changes.</span>
  <span m='3785860'>Cuts,</span> <span m='3786120'>not</span> <span m='3786300'>quite</span>
  <span m='3786540'>so</span> <span m='3786660'>simple.</span> <span m='3789210'>When</span>
  <span m='3789330'>we</span> <span m='3789420'>do</span> <span m='3789600'>a</span>
  <span m='3789660'>cut,</span> <span m='3792310'>we're</span> <span m='3792570'>lightning</span>
  <span m='3793190'>stuff.</span> </p><p><span m='3796530'>The</span> <span m='3796650'>path</span>
  <span m='3796950'>from</span> <span m='3797130'>the</span> <span m='3797250'>root</span>
  <span m='3797400'>to</span> <span m='3797550'>v</span> <span m='3797970'>in</span>
  <span m='3798120'>the</span> <span m='3798180'>represented</span> <span m='3798720'>tree,</span>
  <span m='3799550'>when</span> <span m='3799770'>we</span> <span m='3799860'>line</span>
  <span m='3800100'>up</span> <span m='3800250'>there,</span> <span m='3801090'>becomes</span>
  <span m='3801900'>lighter,</span> <span m='3803580'>because</span> <span m='3803870'>we</span>
  <span m='3804420'>cut</span> <span m='3804750'>off</span> <span m='3805500'>that</span>
  <span m='3805680'>whole</span> <span m='3805890'>subtree</span> <span m='3806310'>containing</span>
  <span m='3806710'>v.</span> <span m='3808290'>So</span> <span m='3808530'>we</span>
  <span m='3808680'>might</span> <span m='3808920'>create</span> <span m='3810090'>light</span>
  <span m='3810480'>preferred</span> <span m='3811050'>edges</span> <span m='3811980'>on</span>
  <span m='3812160'>that</span> <span m='3812340'>path.</span> <span m='3813210'>And</span>
  <span m='3813360'>that's</span> <span m='3813600'>something</span> <span m='3814050'>we</span>
  <span m='3814140'>actually</span> <span m='3814770'>want</span> <span m='3814920'>to</span>
  <span m='3815010'>count.</span> <span m='3815470'>we count</span> <span m='3815760'>number</span>
  <span m='3816000'>of</span> <span m='3816090'>light</span> <span m='3816320'>preferred</span>
  <span m='3816600'>edges</span> <span m='3816900'>created.</span> <span m='3817710'>But,</span>
  <span m='3817800'>again,</span> <span m='3818130'>they're</span> <span m='3818260'>on</span>
  <span m='3818490'>a</span> <span m='3818550'>path</span> <span m='3819090'>so</span>
  <span m='3819270'>it's, at</span> <span m='3819410'>most,</span> <span m='3819620'>log</span>
  <span m='3819880'>n</span> </p><p><span m='3823294'>Most</span> <span m='3823710'>log</span>
  <span m='3824070'>n</span> <span m='3825040'>light</span> <span m='3826430'>preferred</span>
  <span m='3826900'>edges</span> <span m='3828300'>created.</span> <span m='3830560'>We</span>
  <span m='3830580'>don't</span> <span m='3830760'>care</span> <span m='3831030'>about</span>
  <span m='3831300'>edges</span> <span m='3831630'>hanging</span> <span m='3831930'>off</span>
  <span m='3832140'>that</span> <span m='3832290'>path</span> <span m='3832560'>because</span>
  <span m='3832740'>they're</span> <span m='3832860'>not</span> <span m='3833010'>preferred</span>
  <span m='3833370'>anymore,</span> <span m='3833970'>so</span> <span m='3834670'>it's</span>
  <span m='3834810'>nothing</span> <span m='3835080'>to</span> <span m='3835200'>talk</span>
  <span m='3835470'>about.</span> <span m='3837390'>So</span> <span m='3837510'>that's</span>
  <span m='3837720'>it.</span> <span m='3837840'>That</span> <span m='3838000'>proves</span>
  <span m='3838470'>m</span> <span m='3838750'>log n</span> <span m='3839070'>preferred</span>
  <span m='3839460'>child</span> <span m='3839850'>changes.</span> <span m='3841810'>It's</span>
  <span m='3841920'>amortized</span> <span m='3842490'>because</span> <span m='3842850'>we're</span>
  <span m='3842970'>doing</span> <span m='3843150'>this</span> <span m='3843270'>creation/destruction</span>
  <span m='3844200'>business.</span> <span m='3845370'>This</span> <span m='3845670'>thing</span>
  <span m='3846000'>is</span> <span m='3846180'>worst</span> <span m='3846480'>case</span>
  <span m='3847110'>log</span> <span m='3847350'>n</span> <span m='3847440'>per</span>
  <span m='3847825'>operation,</span> <span m='3848210'>this</span> <span m='3848250'>quantity.</span>
  <span m='3848720'>But</span> <span m='3849690'>when</span> <span m='3849810'>you</span>
  <span m='3849870'>sum</span> <span m='3850140'>it</span> <span m='3850230'>up,</span>
  <span m='3850430'>then</span> <span m='3850580'>you</span> <span m='3850650'>actually</span>
  <span m='3850890'>get</span> <span m='3851010'>about</span> <span m='3851260'>the</span>
  <span m='3851370'>number</span> <span m='3851580'>of</span> <span m='3851640'>preferred</span>
  <span m='3851970'>child</span> <span m='3852330'>changes</span> <span m='3852880'>overall.</span>
  </p><p><span m='3859800'>So</span> <span m='3860130'>if</span> <span m='3860310'>you</span>
  <span m='3860400'>plug</span> <span m='3860670'>that</span> <span m='3860850'>into</span>
  <span m='3861210'>this</span> <span m='3861930'>bound,</span> <span m='3862770'>we</span>
  <span m='3862890'>get</span> <span m='3863190'>a</span> <span m='3863260'>log</span>
  <span m='3863560'>squared m</span> <span m='3864370'>bound.</span> <span m='3865020'>Big</span>
  <span m='3865560'>deal.</span> <span m='3868450'>But</span> <span m='3868830'>with</span>
  <span m='3869010'>a</span> <span m='3869040'>little</span> <span m='3869340'>bit</span>
  <span m='3869490'>more</span> <span m='3869670'>work,</span> <span m='3869910'>we</span>
  <span m='3870030'>can</span> <span m='3870150'>actually</span> <span m='3870450'>get</span>
  <span m='3870690'>a</span> <span m='3870790'>log</span> <span m='3870930'>n</span>
  <span m='3871425'>bound.</span> <span m='3879840'>For</span> <span m='3879990'>this,</span>
  <span m='3880200'>we</span> <span m='3880320'>need</span> <span m='3880500'>to</span>
  <span m='3880710'>actually</span> <span m='3881100'>know</span> <span m='3881280'>a</span>
  <span m='3881310'>little</span> <span m='3881580'>bit</span> <span m='3881700'>about</span>
  <span m='3881970'>splay</span> <span m='3882240'>tree</span> <span m='3882420'>analysis.</span>
  <span m='3883880'>I</span> <span m='3884340'>didn't</span> <span m='3884610'>cover</span>
  <span m='3885000'>in</span> <span m='3885150'>Lecture</span> <span m='3885360'>Six.</span>
  <span m='3886770'>You</span> <span m='3887040'>probably</span> <span m='3887340'>would</span>
  <span m='3887430'>have</span> <span m='3887520'>forgotten</span> <span m='3887820'>it</span>
  <span m='3887910'>by</span> <span m='3888030'>now</span> <span m='3888210'>anyway.</span>
  <span m='3888560'>So</span> <span m='3889470'>let</span> <span m='3889590'>me</span>
  <span m='3889710'>give</span> <span m='3889890'>you</span> <span m='3890040'>what</span>
  <span m='3890290'>little</span> <span m='3890580'>you</span> <span m='3890730'>need</span>
  <span m='3890880'>to</span> <span m='3891000'>know</span> <span m='3891240'>about</span>
  <span m='3892540'>splay</span> <span m='3892920'>analysis.</span> <span m='3894180'>First,</span>
  <span m='3894510'>I</span> <span m='3894570'>need</span> <span m='3894750'>to</span>
  <span m='3894840'>define</span> <span m='3895350'>a</span> <span m='3895440'>slightly</span>
  <span m='3895860'>weird</span> <span m='3896070'>quantity.</span> <span m='3897930'>It's</span>
  <span m='3898770'>kind</span> <span m='3898950'>of</span> <span m='3899010'>like</span>
  <span m='3899190'>the</span> <span m='3899280'>weight</span> <span m='3899520'>of</span>
  <span m='3899610'>a</span> <span m='3899670'>node.</span> <span m='3900600'>It's</span>
  <span m='3900720'>a</span> <span m='3900780'>capital</span> <span m='3901340'>W,</span>
  <span m='3902850'>but</span> <span m='3903150'>a</span> <span m='3903180'>little</span>
  <span m='3903450'>bit</span> <span m='3904500'>weird.</span> </p><p><span m='3920600'>OK,</span>
  <span m='3921400'>now</span> <span m='3921640'>we're</span> <span m='3921760'>thinking</span>
  <span m='3922000'>about</span> <span m='3922210'>the</span> <span m='3922270'>tree</span>
  <span m='3922510'>of</span> <span m='3922600'>ox</span> <span m='3922840'>trees.</span>
  <span m='3923640'>For</span> <span m='3923800'>the</span> <span m='3923890'>analysis</span>
  <span m='3924340'>we</span> <span m='3924460'>need</span> <span m='3924610'>that.</span>
  <span m='3925540'>It's</span> <span m='3925690'>a</span> <span m='3925780'>tree</span>
  <span m='3925990'>of</span> <span m='3926080'>splay</span> <span m='3926330'>trees.</span>
  <span m='3927370'>And</span> <span m='3927520'>what</span> <span m='3927700'>I'm</span>
  <span m='3927820'>looking</span> <span m='3928180'>at,</span> <span m='3928330'>is</span>
  <span m='3928450'>in</span> <span m='3928630'>that</span> <span m='3928780'>tree</span>
  <span m='3928930'>of</span> <span m='3929020'>ox</span> <span m='3929230'>trees,</span>
  <span m='3929500'>how</span> <span m='3929710'>many</span> <span m='3929890'>nodes</span>
  <span m='3930130'>are</span> <span m='3930190'>in</span> <span m='3930280'>the</span>
  <span m='3930370'>subtree</span> <span m='3930910'>of</span> <span m='3931100'>v?</span>
  <span m='3931800'>That's what</span> <span m='3931930'>I'm going</span> <span m='3932320'>to
  call</span> <span m='3932590'>wv</span> <span m='3932860'>.</span> <span m='3933190'>Whereas</span>
  <span m='3933430'>size</span> <span m='3933850'>of</span> <span m='3933940'>v was</span>
  <span m='3934420'>thinking</span> <span m='3934750'>in</span> <span m='3935560'>the</span>
  <span m='3935800'>represented</span> <span m='3936430'>tree.</span> <span m='3936760'>So
  this</span> <span m='3936910'>is</span> <span m='3937060'>a</span> <span m='3937090'>totally</span>
  <span m='3937480'>different</span> <span m='3937720'>world.</span> </p><p><span
  m='3938590'>Here,</span> <span m='3938770'>we're</span> <span m='3938860'>thinking</span>
  <span m='3939100'>about</span> <span m='3939250'>the</span> <span m='3939340'>tree</span>
  <span m='3939550'>of</span> <span m='3939630'>ox</span> <span m='3939880'>trees.</span>
  <span m='3941050'>So</span> <span m='3941410'>one</span> <span m='3941710'>way</span>
  <span m='3941860'>you</span> <span m='3942010'>can</span> <span m='3942160'>rewrite</span>
  <span m='3942640'>this</span> <span m='3943480'>count</span> <span m='3944640'>as</span>
  <span m='3945370'>the</span> <span m='3945490'>sum</span> <span m='3946840'>of</span>
  <span m='3946960'>all</span> <span m='3947200'>nodes</span> <span m='3947680'>w</span>
  <span m='3948880'>in</span> <span m='3949180'>the</span> <span m='3949390'>ox</span>
  <span m='3949780'>tree</span> <span m='3951760'>containing</span> <span m='3952780'>v.</span>
  <span m='3954370'>It's a weird</span> <span m='3954730'>notation,</span> <span m='3955300'>but</span>
  <span m='3955750'>look</span> <span m='3955900'>at</span> <span m='3955990'>all</span>
  <span m='3956140'>the</span> <span m='3956260'>other</span> <span m='3956470'>nodes</span>
  <span m='3956740'>in</span> <span m='3956830'>the</span> <span m='3956920'>ox</span>
  <span m='3957130'>tree--</span> <span m='3959760'>is that right?</span> <span m='3960000'>Sorry.</span>
  <span m='3962665'>No.</span> <span m='3966960'>I</span> <span m='3967020'>should</span>
  <span m='3967200'>say</span> <span m='3968130'>w</span> <span m='3970590'>in</span>
  <span m='3971410'>v's</span> <span m='3972030'>subtree</span> <span m='3974890'>in</span>
  <span m='3976010'>v's</span> <span m='3976620'>ox</span> <span m='3976950'>tree.</span>
  <span m='3979140'>It's awkward</span> <span m='3979590'>to</span> <span m='3979740'>say.</span>
  <span m='3980610'>What</span> <span m='3980790'>I</span> <span m='3980880'>mean</span>
  <span m='3981090'>is</span> <span m='3981330'>there</span> <span m='3981430'>is</span>
  <span m='3981540'>an</span> <span m='3981660'>ox</span> <span m='3981990'>tree</span>
  <span m='3982290'>containing</span> <span m='3982890'>a</span> <span m='3982950'>node</span>
  <span m='3983230'>v,</span> <span m='3984930'>and</span> <span m='3985410'>I</span>
  <span m='3985560'>want</span> <span m='3985770'>to</span> <span m='3985830'>look</span>
  <span m='3986070'>in</span> <span m='3986250'>that</span> <span m='3986460'>subtree</span>
  <span m='3987250'>I'll</span> <span m='3987500'>know as</span> <span m='3987780'>w.</span>
  <span m='3988650'>Just</span> <span m='3988890'>within</span> <span m='3989100'>the</span>
  <span m='3989220'>ox</span> <span m='3989460'>tree</span> <span m='3989670'>though.</span>
  <span m='3991170'>And</span> <span m='3991410'>for</span> <span m='3991620'>all</span>
  <span m='3991770'>those</span> <span m='3991950'>nodes,</span> <span m='3992240'>I</span>
  <span m='3992340'>take</span> <span m='3992640'>1</span> <span m='3993120'>plus</span>
  <span m='3993720'>the</span> <span m='3994650'>size</span> <span m='3995700'>of</span>
  <span m='3997080'>ox</span> <span m='3997350'>trees</span> <span m='3997710'>hanging</span>
  <span m='3998080'>off.</span> </p><p><span m='4006970'>So</span> <span m='4007150'>total</span>
  <span m='4007450'>number</span> <span m='4007750'>of</span> <span m='4007840'>nodes.</span>
  <span m='4008770'>And</span> <span m='4009070'>when</span> <span m='4009190'>I</span>
  <span m='4009250'>say</span> <span m='4009400'>hanging</span> <span m='4009700'>off</span>
  <span m='4009880'>I</span> <span m='4009970'>mean</span> <span m='4012190'>via</span>
  <span m='4012700'>pathed</span> <span m='4013030'>parent</span> <span m='4013270'>pointers.</span>
  <span m='4014930'>So</span> <span m='4015160'>down</span> <span m='4015400'>here,</span>
  <span m='4015610'>there</span> <span m='4015770'>are</span> <span m='4015790'>trees,</span>
  <span m='4016930'>add</span> <span m='4017140'>up</span> <span m='4017290'>all</span>
  <span m='4017410'>their</span> <span m='4017560'>sizes</span> <span m='4018070'>total</span>
  <span m='4018310'>number</span> <span m='4018520'>of</span> <span m='4018580'>nodes</span>
  <span m='4018850'>in</span> <span m='4018940'>them,</span> <span m='4019570'>add</span>
  <span m='4019810'>one</span> <span m='4020080'>for</span> <span m='4020260'>w</span>
  <span m='4020620'>itself,</span> <span m='4021820'>that's</span> <span m='4021970'>another</span>
  <span m='4022240'>way</span> <span m='4022390'>of</span> <span m='4022480'>writing</span>
  <span m='4022780'>this.</span> <span m='4024340'>I'll</span> <span m='4024430'>just</span>
  <span m='4024610'>mention</span> <span m='4025060'>that</span> <span m='4027100'>this</span>
  <span m='4027400'>part</span> <span m='4030010'>is</span> <span m='4030190'>what's</span>
  <span m='4030400'>normally</span> <span m='4030910'>considered</span> <span m='4031360'>in</span>
  <span m='4031490'>splay</span> <span m='4031750'>trees.</span> <span m='4032530'>This</span>
  <span m='4032740'>is</span> <span m='4032860'>a</span> <span m='4032950'>bonus</span>
  <span m='4033400'>thing</span> <span m='4033810'>that,</span> <span m='4034120'>basically,</span>
  <span m='4034630'>doesn't</span> <span m='4034870'>matter.</span> <span m='4037940'>I'll</span>
  <span m='4038040'>justify</span> <span m='4038370'>that</span> <span m='4038470'>in</span>
  <span m='4038560'>a</span> <span m='4038620'>second.</span> <span m='4040400'>So</span>
  <span m='4040510'>we</span> <span m='4040630'>define</span> <span m='4041020'>a</span>
  <span m='4041080'>potential</span> <span m='4041530'>function</span> <span m='4041980'>for</span>
  <span m='4042140'>our</span> <span m='4042250'>amortization</span> <span m='4044120'>fee,</span>
  <span m='4045400'>which</span> <span m='4045640'>is</span> <span m='4046060'>sum</span>
  <span m='4046950'>over</span> <span m='4047160'>all</span> <span m='4047300'>nodes</span>
  <span m='4047800'>v</span> <span m='4048470'>of</span> <span m='4048770'>log</span>
  <span m='4049420'>this</span> <span m='4049690'>quantity</span> <span m='4050080'>wv,</span>
  <span m='4051960'>this</span> <span m='4052390'>thing.</span> </p><p><span m='4053500'>So</span>
  <span m='4053770'>just</span> <span m='4054580'>think</span> <span m='4054820'>of</span>
  <span m='4054910'>this</span> <span m='4055120'>as</span> <span m='4055270'>an</span>
  <span m='4055420'>abstract</span> <span m='4055960'>quantity,</span> <span m='4057460'>which</span>
  <span m='4057790'>for</span> <span m='4057940'>every</span> <span m='4058420'>node</span>
  <span m='4058810'>it</span> <span m='4058900'>has</span> <span m='4059080'>some</span>
  <span m='4059590'>number</span> <span m='4059860'>associated</span> <span m='4060370'>with</span>
  <span m='4060550'>it.</span> <span m='4061040'>Splay</span> <span m='4061450'>trees</span>
  <span m='4062050'>allow</span> <span m='4062440'>you</span> <span m='4062650'>to</span>
  <span m='4062850'>assign</span> <span m='4063250'>arbitrary</span> <span m='4063760'>weight</span>
  <span m='4063940'>to</span> <span m='4064060'>every</span> <span m='4064330'>node,</span>
  <span m='4065200'>use</span> <span m='4065470'>this</span> <span m='4065620'>potential</span>
  <span m='4066070'>function,</span> <span m='4067050'>and</span> <span m='4067210'>prove</span>
  <span m='4067720'>abound</span> <span m='4068200'>--which</span> <span m='4068350'>is</span>
  <span m='4068470'>called</span> <span m='4068680'>the</span> <span m='4068800'>access</span>
  <span m='4069280'>lemma</span> <span m='4075390'>The</span> <span m='4075480'>access</span>
  <span m='4075900'>lemma</span> <span m='4076900'>says</span> <span m='4077240'>is</span>
  <span m='4077490'>that,</span> <span m='4077700'>for</span> <span m='4077880'>this</span>
  <span m='4078060'>potential</span> <span m='4078480'>function,</span> <span m='4079470'>the</span>
  <span m='4079620'>amortized</span> <span m='4080130'>cost</span> <span m='4081090'>of</span>
  <span m='4081210'>doing</span> <span m='4081450'>a</span> <span m='4081510'>splay</span>
  <span m='4081810'>operation</span> <span m='4086940'>splay</span> <span m='4087640'>of
  v,</span> <span m='4092620'>is,</span> <span m='4092860'>at</span> <span m='4092950'>most,</span>
  <span m='4094690'>three</span> <span m='4095920'>times</span> <span m='4097380'>log</span>
  <span m='4099370'>w</span> <span m='4101060'>of</span> <span m='4102580'>root</span>
  <span m='4103850'>of</span> <span m='4104370'>v's</span> <span m='4104800'>ox</span>
  <span m='4105130'>tree</span> <span m='4110290'>minus</span> <span m='4111890'>log</span>
  <span m='4114189'>w</span> <span m='4114660'>of</span> <span m='4114939'>v</span>
  <span m='4116735'>plus</span> <span m='4117729'>1.</span> </p><p><span m='4121000'>OK,</span>
  <span m='4122260'>so</span> <span m='4122410'>this</span> <span m='4122590'>is</span>
  <span m='4122680'>something</span> <span m='4122950'>called</span> <span m='4123100'>the</span>
  <span m='4123220'>access</span> <span m='4123609'>Lemma</span> <span m='4123969'>It's
  used</span> <span m='4124330'>to</span> <span m='4124450'>prove,</span> <span m='4125000'>for</span>
  <span m='4125020'>example,</span> <span m='4125380'>that</span> <span m='4125770'>splay
  trees</span> <span m='4125950'>have</span> <span m='4126310'>log n</span> <span
  m='4126910'>performance</span> <span m='4127420'>amortize.</span> <span m='4128350'>It's</span>
  <span m='4128470'>also</span> <span m='4128740'>used</span> <span m='4128950'>to</span>
  <span m='4129040'>prove</span> <span m='4129279'>that</span> <span m='4129430'>they</span>
  <span m='4129520'>have</span> <span m='4129700'>a</span> <span m='4129729'>working</span>
  <span m='4130029'>set</span> <span m='4130270'>bound,</span> <span m='4131870'>which</span>
  <span m='4131950'>you</span> <span m='4132040'>may</span> <span m='4132160'>recall</span>
  <span m='4132810'>from</span> <span m='4133020'>Lecture Six.</span> <span m='4134229'>But</span>
  <span m='4134380'>we</span> <span m='4134470'>never</span> <span m='4134740'>actually</span>
  <span m='4135010'>mentioned</span> <span m='4135310'>the</span> <span m='4135370'>access</span>
  <span m='4135760'>lemma</span> <span m='4136180'>It's</span> <span m='4136359'>a</span>
  <span m='4136450'>tool.</span> <span m='4137040'>It's</span> <span m='4137050'>an</span>
  <span m='4137140'>analysis</span> <span m='4137620'>tool.</span> </p><p><span m='4140950'>This</span>
  <span m='4141130'>works</span> <span m='4141370'>no</span> <span m='4141490'>matter</span>
  <span m='4141640'>how</span> <span m='4141880'>the</span> <span m='4141970'>w's</span>
  <span m='4142330'>are</span> <span m='4142420'>defined.</span> <span m='4144580'>And</span>
  <span m='4144790'>remember,</span> <span m='4145109'>we're</span> <span m='4145149'>thinking</span>
  <span m='4145420'>of</span> <span m='4145479'>splaying</span> <span m='4145899'>just</span>
  <span m='4146140'>within</span> <span m='4146410'>a</span> <span m='4146470'>single</span>
  <span m='4146800'>ox</span> <span m='4147069'>tree.</span> <span m='4147529'>So</span>
  <span m='4148290'>the</span> <span m='4148840'>size</span> <span m='4149080'>of</span>
  <span m='4149140'>the</span> <span m='4149200'>ox trees</span> <span m='4149560'>hanging</span>
  <span m='4149890'>off</span> <span m='4150069'>don't</span> <span m='4150310'>change</span>
  <span m='4150790'>during</span> <span m='4151060'>a</span> <span m='4151120'>splay.</span>
  <span m='4151460'>They</span> <span m='4151569'>just</span> <span m='4151720'>come</span>
  <span m='4151930'>along</span> <span m='4152200'>for</span> <span m='4152290'>the</span>
  <span m='4152380'>ride.</span> <span m='4153500'>So</span> <span m='4155560'>the</span>
  <span m='4155710'>old</span> <span m='4155890'>analysis</span> <span m='4156340'>of
  splay trees</span> <span m='4156910'>I</span> <span m='4157109'>haven't</span> <span
  m='4157370'>proved</span> <span m='4157590'>this</span> <span m='4157720'>lemma</span>
  <span m='4157930'>to</span> <span m='4158050'>you.</span> <span m='4158170'>But</span>
  <span m='4159529'>it</span> <span m='4159670'>still</span> <span m='4159939'>applies</span>
  <span m='4160359'>in</span> <span m='4160420'>this</span> <span m='4160540'>setting.</span>
  <span m='4161710'>And</span> <span m='4161859'>given</span> <span m='4162100'>my</span>
  <span m='4162220'>lack</span> <span m='4162460'>of</span> <span m='4162550'>time.</span>
  </p><p><span m='4163100'>I</span> <span m='4163149'>will</span> <span m='4163300'>just</span>
  <span m='4163420'>say</span> <span m='4163720'>in</span> <span m='4163840'>words,</span>
  <span m='4165260'>the</span> <span m='4165279'>way</span> <span m='4165490'>you</span>
  <span m='4165609'>prove</span> <span m='4165880'>this</span> <span m='4166029'>lemma</span>
  <span m='4166450'>is</span> <span m='4166600'>very</span> <span m='4166779'>simple.</span>
  <span m='4167800'>You</span> <span m='4167899'>do</span> <span m='4168180'>you</span>
  <span m='4168430'>analyze</span> <span m='4168970'>each</span> <span m='4169240'>operation</span>
  <span m='4169779'>of</span> <span m='4169870'>display</span> <span m='4170229'>separately</span>
  <span m='4170710'>there's</span> <span m='4170890'>a</span> <span m='4170950'>zig-zag</span>
  <span m='4171340'>case</span> <span m='4171760'>in</span> <span m='4171850'>a</span>
  <span m='4171910'>zigzag</span> <span m='4172420'>case.</span> <span m='4174130'>And</span>
  <span m='4175240'>you</span> <span m='4175600'>argue</span> <span m='4176020'>that</span>
  <span m='4177520'>every</span> <span m='4177760'>time</span> <span m='4178149'>you</span>
  <span m='4178270'>do</span> <span m='4178479'>such</span> <span m='4178750'>an</span>
  <span m='4178810'>operation,</span> <span m='4179500'>you</span> <span m='4179680'>pay</span>
  <span m='4180520'>three</span> <span m='4181270'>times</span> <span m='4181540'>a</span>
  <span m='4181569'>log</span> <span m='4182050'>of</span> <span m='4182260'>w</span>
  <span m='4183319'>of</span> <span m='4183670'>v</span> <span m='4184240'>after</span>
  <span m='4184630'>the</span> <span m='4184750'>operation</span> <span m='4185529'>minus</span>
  <span m='4186109'>log</span> <span m='4186520'>of</span> <span m='4186640'>wv</span>
  <span m='4187240'>before</span> <span m='4187720'>the</span> <span m='4187870'>operation.</span>
  <span m='4188740'>So</span> <span m='4188830'>you</span> <span m='4188899'>just</span>
  <span m='4189060'>see</span> <span m='4189310'>how</span> <span m='4189640'>wv</span>
  <span m='4190120'>changes</span> <span m='4190630'>when</span> <span m='4190750'>it</span>
  <span m='4190810'>goes</span> <span m='4191080'>up</span> <span m='4191680'>after</span>
  <span m='4191890'>you</span> <span m='4191979'>do</span> <span m='4192100'>display</span>
  <span m='4193270'>operation,</span> <span m='4194710'>and</span> <span m='4194920'>turns</span>
  <span m='4195160'>out</span> <span m='4195280'>it's the</span> <span m='4195460'>most</span>
  <span m='4195640'>three</span> <span m='4195850'>times</span> <span m='4196090'>log
  of</span> <span m='4196300'>that.</span> <span m='4196530'>And it</span> <span m='4196690'>has</span>
  <span m='4196870'>to</span> <span m='4196930'>do</span> <span m='4197020'>with</span>
  <span m='4197110'>concavity</span> <span m='4197680'>of</span> <span m='4197770'>log</span>
  <span m='4198160'>n.</span> <span m='4198290'>It's</span> <span m='4198790'>just</span>
  <span m='4199090'>basic</span> <span m='4199450'>checking.</span> </p><p><span m='4200650'>Once</span>
  <span m='4200830'>you</span> <span m='4200920'>have</span> <span m='4201100'>that</span>
  <span m='4202180'>you</span> <span m='4202330'>get</span> <span m='4202480'>a</span>
  <span m='4202510'>telescoping</span> <span m='4203140'>sum.</span> <span m='4203500'>Each</span>
  <span m='4203710'>operation</span> <span m='4204370'>is</span> <span m='4205030'>log</span>
  <span m='4205470'>w</span> <span m='4205840'>new</span> <span m='4206170'>minus</span>
  <span m='4206470'>long</span> <span m='4206740'>w</span> <span m='4207100'>old.</span>
  <span m='4207820'>Those</span> <span m='4208030'>cancel,</span> <span m='4208720'>in</span>
  <span m='4209110'>turn,</span> <span m='4209650'>until</span> <span m='4209890'>you</span>
  <span m='4210040'>get</span> <span m='4210610'>the</span> <span m='4210700'>final</span>
  <span m='4211510'>log</span> <span m='4211950'>w</span> <span m='4212410'>of</span>
  <span m='4212740'>v,</span> <span m='4213070'>minus</span> <span m='4213790'>the</span>
  <span m='4214060'>original</span> <span m='4214510'>log</span> <span m='4214780'>w
  of v.</span> <span m='4215740'>The</span> <span m='4215830'>final</span> <span m='4216240'>log</span>
  <span m='4216510'>w</span> <span m='4216880'>is</span> <span m='4217090'>whatever--</span>
  <span m='4217720'>I</span> <span m='4217780'>mean,</span> <span m='4217900'>v</span>
  <span m='4218050'>becomes</span> <span m='4218380'>the</span> <span m='4218510'>root</span>
  <span m='4219220'>and</span> <span m='4219310'>so it</span> <span m='4219520'>has</span>
  <span m='4219730'>everybody</span> <span m='4220150'>below</span> <span m='4220440'>it.</span>
  <span m='4221510'>So</span> <span m='4221560'>that's</span> <span m='4221830'>the</span>
  <span m='4221920'>axis</span> <span m='4222250'>lemma.</span> </p><p><span m='4224440'>So</span>
  <span m='4226480'>assuming</span> <span m='4226930'>the</span> <span m='4227020'>access</span>
  <span m='4227380'>lemma,</span> <span m='4227680'>I</span> <span m='4227860'>want</span>
  <span m='4228010'>to</span> <span m='4228070'>prove</span> <span m='4228340'>to</span>
  <span m='4228530'>you</span> <span m='4228670'>a</span> <span m='4228730'>log n</span>
  <span m='4229060'>bound.</span> <span m='4231480'>Maybe</span> <span m='4232540'>over</span>
  <span m='4234130'>here</span> <span m='4251010'>OK,</span> <span m='4252770'>another</span>
  <span m='4253000'>thing</span> <span m='4253180'>to</span> <span m='4253300'>note,</span>
  <span m='4253920'>when</span> <span m='4254050'>we</span> <span m='4254170'>change</span>
  <span m='4254510'>preferred</span> <span m='4254890'>children,</span> <span m='4255760'>it</span>
  <span m='4255820'>does</span> <span m='4256000'>not</span> <span m='4256240'>affect</span>
  <span m='4256540'>w.</span> <span m='4257430'>W</span> <span m='4257560'>defined</span>
  <span m='4260650'>on</span> <span m='4260800'>the</span> <span m='4260890'>tree</span>
  <span m='4261130'>of</span> <span m='4261250'>ox</span> <span m='4261490'>trees.</span>
  <span m='4261880'>If</span> <span m='4262000'>you</span> <span m='4262090'>turn</span>
  <span m='4262510'>a</span> <span m='4262930'>path</span> <span m='4263260'>parent</span>
  <span m='4263500'>pointer</span> <span m='4263800'>into</span> <span m='4264090'>a</span>
  <span m='4264180'>regular</span> <span m='4264580'>parent</span> <span m='4264850'>pointer</span>
  <span m='4265180'>or</span> <span m='4265240'>vice</span> <span m='4265510'>versa,</span>
  <span m='4265910'>It</span> <span m='4265960'>doesn't</span> <span m='4266230'>care.</span>
  <span m='4267440'>It</span> <span m='4267540'>looks</span> <span m='4267640'>the</span>
  <span m='4267730'>same</span> <span m='4268060'>from</span> <span m='4268180'>the</span>
  <span m='4268270'>tree</span> <span m='4268420'>of</span> <span m='4268510'>ox trees'</span>
  <span m='4268900'>perspective.</span> <span m='4269350'>All</span> <span m='4269560'>that</span>
  <span m='4269680'>changes,</span> <span m='4270640'>all</span> <span m='4270760'>that</span>
  <span m='4270880'>matters</span> <span m='4271180'>is</span> <span m='4271270'>when</span>
  <span m='4271450'>you</span> <span m='4271540'>do</span> <span m='4271690'>splays</span>
  <span m='4272650'>this</span> <span m='4272770'>stuff</span> <span m='4273010'>happens.</span>
  <span m='4273400'>But</span> <span m='4273550'>the splay</span> <span m='4273910'>analysis</span>
  <span m='4274330'>tells</span> <span m='4274600'>us</span> <span m='4274720'>how</span>
  <span m='4274900'>splays</span> <span m='4275230'>behave.</span> <span m='4275710'>So</span>
  <span m='4275890'>we're</span> <span m='4275980'>kind</span> <span m='4276190'>of</span>
  <span m='4276820'>good.</span> </p><p><span m='4278890'>If</span> <span m='4279160'>you</span>
  <span m='4279340'>look</span> <span m='4279670'>at</span> <span m='4280900'>what</span>
  <span m='4281110'>we</span> <span m='4281230'>did</span> <span m='4281380'>over</span>
  <span m='4281620'>here,</span> <span m='4283210'>when</span> <span m='4283420'>we</span>
  <span m='4284110'>splayed</span> <span m='4284260'>v,</span> <span m='4285040'>then</span>
  <span m='4285820'>we</span> <span m='4285950'>splayed</span> <span m='4286540'>w,</span>
  <span m='4287930'>then</span> <span m='4288010'>we</span> <span m='4288730'>did</span>
  <span m='4288970'>a</span> <span m='4289030'>little</span> <span m='4289270'>bit</span>
  <span m='4289360'>of</span> <span m='4289450'>manipulation</span> <span m='4290140'>which</span>
  <span m='4290470'>doesn't</span> <span m='4290800'>matter</span> <span m='4291250'>in</span>
  <span m='4291370'>this</span> <span m='4291610'>analysis.</span> <span m='4292820'>And</span>
  <span m='4292920'>then</span> <span m='4292930'>we</span> <span m='4292990'>splayed</span>
  <span m='4293320'>v</span> <span m='4293530'>one</span> <span m='4293710'>more</span>
  <span m='4293860'>time.</span> <span m='4296040'>How</span> <span m='4296260'>much</span>
  <span m='4296470'>does</span> <span m='4296650'>that</span> <span m='4296830'>cost</span>
  <span m='4297340'>according</span> <span m='4297760'>to</span> <span m='4297850'>the</span>
  <span m='4297970'>access</span> <span m='4298420'>lemma.</span> <span m='4298780'>It's</span>
  <span m='4298990'>basically</span> <span m='4299350'>going</span> <span m='4299500'>to</span>
  <span m='4299560'>cost</span> <span m='4299980'>you</span> <span m='4300790'>order</span>
  <span m='4301780'>log</span> <span m='4303220'>w</span> <span m='4303610'>of</span>
  <span m='4303880'>little</span> <span m='4304150'>w</span> <span m='4304690'>minus</span>
  <span m='4305620'>log</span> <span m='4306580'>w</span> <span m='4307120'>of</span>
  <span m='4307570'>v</span> <span m='4308920'>plus</span> <span m='4309250'>1,</span>
  <span m='4311620'>because</span> <span m='4316630'>well</span> <span m='4317420'>is</span>
  <span m='4317530'>it</span> <span m='4317620'>clear?</span> <span m='4320410'>When</span>
  <span m='4320620'>we</span> <span m='4320710'>do</span> <span m='4320860'>the</span>
  <span m='4320950'>first</span> <span m='4321310'>splay</span> <span m='4321760'>of</span>
  <span m='4322020'>v</span> <span m='4322270'>going</span> <span m='4322570'>up</span>
  <span m='4322690'>to</span> <span m='4322810'>the</span> <span m='4322930'>root</span>
  <span m='4323830'>that</span> <span m='4324010'>cost</span> <span m='4324340'>log</span>
  <span m='4325060'>of</span> <span m='4325570'>w</span> <span m='4326020'>of</span>
  <span m='4326260'>the</span> <span m='4326380'>whole</span> <span m='4326710'>tree</span>
  <span m='4326980'>containing</span> <span m='4327460'>b</span> <span m='4327700'>minus</span>
  <span m='4328180'>longer</span> <span m='4328820'>wv.</span> </p><p><span m='4330070'>But</span>
  <span m='4330400'>if</span> <span m='4330550'>you</span> <span m='4330640'>just</span>
  <span m='4330790'>look</span> <span m='4330970'>at</span> <span m='4331180'>log,</span>
  <span m='4331850'>I</span> <span m='4331950'>mean,</span> <span m='4332020'>w</span>
  <span m='4332380'>is</span> <span m='4332500'>higher</span> <span m='4332890'>than</span>
  <span m='4333040'>the</span> <span m='4333130'>root</span> <span m='4333310'>of</span>
  <span m='4333370'>v.</span> <span m='4334360'>So</span> <span m='4335320'>if</span>
  <span m='4335410'>we</span> <span m='4335500'>take</span> <span m='4335720'>a</span>
  <span m='4335740'>log</span> <span m='4336100'>of</span> <span m='4336190'>w</span>
  <span m='4336580'>this</span> <span m='4336760'>the</span> <span m='4337360'>whole</span>
  <span m='4337690'>thing</span> <span m='4338560'>from</span> <span m='4338740'>w</span>
  <span m='4339100'>downwards</span> <span m='4340030'>minus</span> <span m='4340510'>log</span>
  <span m='4341830'>wv,</span> <span m='4342640'>that</span> <span m='4343120'>includes</span>
  <span m='4343720'>the</span> <span m='4343840'>cost</span> <span m='4344170'>that</span>
  <span m='4344290'>we</span> <span m='4344380'>did</span> <span m='4344680'>for</span>
  <span m='4344860'>the</span> <span m='4344980'>initial</span> <span m='4345310'>splay</span>
  <span m='4345610'>of</span> <span m='4345700'>v.</span> <span m='4347170'>Then</span>
  <span m='4347950'>when</span> <span m='4348130'>we</span> <span m='4348280'>played</span>
  <span m='4348560'>w,</span> <span m='4349280'>well</span> <span m='4349450'>that's</span>
  <span m='4349630'>basically</span> <span m='4349990'>the</span> <span m='4350110'>same</span>
  <span m='4350350'>thing</span> <span m='4350530'>but</span> <span m='4350620'>the</span>
  <span m='4350710'>next</span> <span m='4350950'>level</span> <span m='4351250'>up.</span>
  </p><p><span m='4352090'>So</span> <span m='4352300'>if</span> <span m='4352420'>you</span>
  <span m='4352510'>look</span> <span m='4352720'>at</span> <span m='4352810'>log
  of</span> <span m='4353150'>w</span> <span m='4354370'>minus</span> <span m='4355510'>log
  of</span> <span m='4355840'>w</span> <span m='4356200'>of</span> <span m='4356290'>next</span>
  <span m='4356770'>level</span> <span m='4357040'>up,</span> <span m='4358270'>that's</span>
  <span m='4358510'>what</span> <span m='4358660'>it's</span> <span m='4358750'>going</span>
  <span m='4358900'>to</span> <span m='4358960'>cost</span> <span m='4359200'>this</span>
  <span m='4359320'>splay</span> <span m='4359500'>w.</span> <span m='4359950'>To</span>
  <span m='4360140'>splay</span> <span m='4360370'>v</span> <span m='4360580'>again,</span>
  <span m='4361090'>will</span> <span m='4361240'>again</span> <span m='4361480'>cost</span>
  <span m='4361750'>this</span> <span m='4361930'>bound.</span> <span m='4362950'>The</span>
  <span m='4363040'>point</span> <span m='4363280'>is,</span> <span m='4363400'>we</span>
  <span m='4363640'>sum</span> <span m='4364060'>this</span> <span m='4364300'>up</span>
  <span m='4367340'>over</span> <span m='4367560'>all</span> <span m='4367840'>the</span>
  <span m='4367960'>preferred</span> <span m='4368290'>child</span> <span m='4368620'>changes.</span>
  <span m='4369670'>And</span> <span m='4369810'>what</span> <span m='4370000'>we</span>
  <span m='4370120'>get</span> <span m='4370480'>is</span> <span m='4370720'>a</span>
  <span m='4370810'>telescoping</span> <span m='4371440'>scum</span> <span m='4372160'>again.</span>
  <span m='4373720'>Same</span> <span m='4374170'>as</span> <span m='4374290'>in</span>
  <span m='4374410'>the</span> <span m='4374480'>display</span> <span m='4374770'>analysis.</span>
  <span m='4375820'>So</span> <span m='4375940'>we</span> <span m='4376090'>end</span>
  <span m='4376270'>up</span> <span m='4376450'>with</span> <span m='4377290'>order</span>
  <span m='4378520'>log</span> <span m='4379390'>w</span> <span m='4379660'>of</span>
  <span m='4379750'>everything,</span> <span m='4380320'>which</span> <span m='4380680'>an</span>
  <span m='4381460'>n</span> <span m='4382750'>minus,</span> <span m='4383290'>I</span>
  <span m='4383380'>guess,</span> <span m='4383730'>the</span> <span m='4383910'>log
  of</span> <span m='4384370'>w</span> <span m='4384700'>of the</span> <span m='4384790'>original</span>
  <span m='4385190'>v,</span> <span m='4385480'>-but</span> <span m='4385660'>we</span>
  <span m='4385750'>don't</span> <span m='4385900'>really</span> <span m='4386080'>care</span>
  <span m='4386260'>about</span> <span m='4386470'>that--</span> <span m='4387220'>plus</span>
  <span m='4388540'>the</span> <span m='4388660'>number</span> <span m='4389080'>of</span>
  <span m='4389380'>preferred</span> <span m='4389770'>child</span> <span m='4390070'>changes.</span>
  </p><p><span m='4394950'>And</span> <span m='4395500'>now</span> <span m='4395860'>we're</span>
  <span m='4395980'>golden</span> <span m='4396440'>because</span> <span m='4396760'>before,</span>
  <span m='4397420'>the</span> <span m='4397540'>obvious</span> <span m='4397830'>bound</span>
  <span m='4398070'>was</span> <span m='4398230'>number</span> <span m='4398500'>preferred</span>
  <span m='4398920'>child</span> <span m='4399310'>changes</span> <span m='4399700'>times</span>
  <span m='4400310'>again,</span> <span m='4401080'>now</span> <span m='4401290'>it's</span>
  <span m='4401440'>number</span> <span m='4401670'>of</span> <span m='4401710'>preferred</span>
  <span m='4402090'>time</span> <span m='4402370'>changes</span> <span m='4402790'>plus</span>
  <span m='4403180'>log</span> <span m='4403480'>n</span> <span m='4403630'>for</span>
  <span m='4403750'>an</span> <span m='4403810'>entire</span> <span m='4404290'>access.</span>
  <span m='4405790'>And</span> <span m='4405910'>so</span> <span m='4406210'>we</span>
  <span m='4406370'>pay</span> <span m='4406570'>log</span> <span m='4406860'>n</span>
  <span m='4407050'>here.</span> <span m='4407830'>We</span> <span m='4407980'>already</span>
  <span m='4408370'>know</span> <span m='4408580'>the</span> <span m='4408730'>amortize</span>
  <span m='4409190'>number</span> <span m='4409420'>preferred</span> <span m='4409720'>child</span>
  <span m='4409960'>changes</span> <span m='4410370'>is</span> <span m='4410430'>log</span>
  <span m='4410770'>n</span> <span m='4410890'>per</span> <span m='4411100'>operation.</span>
  <span m='4412060'>So</span> <span m='4412210'>overall</span> <span m='4412780'>the</span>
  <span m='4412900'>amortize</span> <span m='4413290'>cost</span> <span m='4413590'>per</span>
  <span m='4413740'>operation</span> <span m='4414340'>is</span> <span m='4414550'>log</span>
  <span m='4415020'>n.</span> <span m='4415930'>And</span> <span m='4416590'>we're</span>
  <span m='4416710'>done.</span> </p><p><span m='4419020'>So</span> <span m='4419500'>I'll</span>
  <span m='4419590'>just</span> <span m='4419770'>mention</span> <span m='4420280'>the</span>
  <span m='4420490'>worst</span> <span m='4420850'>case</span> <span m='4421180'>version</span>
  <span m='4421630'>of</span> <span m='4421870'>link-cut</span> <span m='4422230'>trees</span>
  <span m='4423370'>instead</span> <span m='4423610'>of</span> <span m='4423670'>the</span>
  <span m='4423790'>amortize</span> <span m='4424240'>splay</span> <span m='4424570'>based</span>
  <span m='4424810'>version.</span> <span m='4427060'>They</span> <span m='4427210'>actually</span>
  <span m='4427510'>store</span> <span m='4427960'>the</span> <span m='4428080'>heavy</span>
  <span m='4428350'>light</span> <span m='4428560'>decomposition.</span> <span m='4429710'>They</span>
  <span m='4429730'>don't</span> <span m='4429910'>use</span> <span m='4430090'>preferred</span>
  <span m='4430420'>path</span> <span m='4430760'>to</span> <span m='4430940'>decomposition</span>
  <span m='4431350'>at</span> <span m='4431440'>all,</span> <span m='4432280'>which</span>
  <span m='4432430'>makes</span> <span m='4432700'>all</span> <span m='4432880'>the</span>
  <span m='4433030'>algorithms</span> <span m='4433450'>messy.</span> <span m='4435280'>But</span>
  <span m='4435550'>you</span> <span m='4435730'>can</span> <span m='4435910'>just</span>
  <span m='4436150'>maintain</span> <span m='4436720'>the</span> <span m='4436810'>heavy</span>
  <span m='4436910'>[? likely ?]</span> <span m='4437210'>composition</span> <span
  m='4437440'>position</span> <span m='4437950'>dynamically</span> <span m='4438700'>as</span>
  <span m='4439030'>the</span> <span m='4439150'>tree</span> <span m='4439420'>is</span>
  <span m='4439570'>changing,</span> <span m='4440860'>and</span> <span m='4441160'>then</span>
  <span m='4442630'>you</span> <span m='4442870'>use</span> <span m='4443250'>a</span>
  <span m='4443320'>kind</span> <span m='4443620'>of</span> <span m='4443710'>weight</span>
  <span m='4443920'>balanced</span> <span m='4444250'>trees,</span> <span m='4444610'>like</span>
  <span m='4444790'>we</span> <span m='4444880'>saw</span> <span m='4445030'>in</span>
  <span m='4445120'>the</span> <span m='4445210'>strings</span> <span m='4445570'>lecture,</span>
  <span m='4446440'>where</span> <span m='4449470'>the</span> <span m='4449590'>depth</span>
  <span m='4449860'>of</span> <span m='4449980'>a</span> <span m='4450010'>node</span>
  <span m='4450310'>is</span> <span m='4450400'>sort</span> <span m='4450610'>of</span>
  <span m='4450730'>related</span> <span m='4451090'>to</span> <span m='4451240'>log</span>
  <span m='4451560'>of</span> <span m='4451660'>its</span> <span m='4451750'>size</span>
  <span m='4453560'>or</span> <span m='4453700'>inversely</span> <span m='4454180'>related</span>
  <span m='4454570'>I</span> <span m='4454630'>guess.</span> </p><p><span m='4454910'>So</span>
  <span m='4455440'>you</span> <span m='4455530'>try</span> <span m='4455740'>to</span>
  <span m='4455860'>put</span> <span m='4456010'>all</span> <span m='4456100'>the</span>
  <span m='4456220'>heavy</span> <span m='4456430'>things</span> <span m='4456730'>near</span>
  <span m='4457120'>the</span> <span m='4457780'>root,</span> <span m='4458410'>because</span>
  <span m='4458590'>they're</span> <span m='4458710'>more</span> <span m='4458950'>likely</span>
  <span m='4459250'>to</span> <span m='4459340'>be</span> <span m='4459460'>accessed.</span>
  <span m='4460450'>And</span> <span m='4460570'>then</span> <span m='4460720'>you</span>
  <span m='4460810'>guarantee</span> <span m='4461170'>that</span> <span m='4461320'>the</span>
  <span m='4461470'>overall</span> <span m='4462010'>tree</span> <span m='4462280'>of</span>
  <span m='4462370'>ox</span> <span m='4462580'>trees</span> <span m='4462940'>has</span>
  <span m='4463210'>long</span> <span m='4463450'>n</span> <span m='4463610'>depth</span>
  <span m='4464500'>by</span> <span m='4464680'>skewing</span> <span m='4465490'>each</span>
  <span m='4465760'>of</span> <span m='4465820'>the</span> <span m='4466000'>end</span>
  <span m='4466360'>of</span> <span m='4466600'>the</span> <span m='4466840'>ox</span>
  <span m='4467110'>trees</span> <span m='4467500'>to</span> <span m='4468220'>match.</span>
  <span m='4470110'>So</span> <span m='4470260'>it</span> <span m='4470320'>can</span>
  <span m='4470440'>be</span> <span m='4470530'>done</span> <span m='4470740'>but</span>
  <span m='4470860'>all</span> <span m='4470950'>the</span> <span m='4471040'>operations</span>
  <span m='4471550'>are</span> <span m='4471640'>messier,</span> <span m='4472030'>because</span>
  <span m='4472210'>you</span> <span m='4472270'>no</span> <span m='4472390'>longer</span>
  <span m='4472630'>have</span> <span m='4472810'>the</span> <span m='4472900'>convenience</span>
  <span m='4473380'>of</span> <span m='4473470'>preferred</span> <span m='4473830'>paths</span>
  <span m='4474550'>to</span> <span m='4474640'>make</span> <span m='4474790'>it</span>
  <span m='4474850'>easy</span> <span m='4475180'>to</span> <span m='4475380'>link/cut</span>
  <span m='4475870'>things.</span> </p>
type: course
uid: bdd3c2d6fa36678ed0fe88273f37deb3

---
None