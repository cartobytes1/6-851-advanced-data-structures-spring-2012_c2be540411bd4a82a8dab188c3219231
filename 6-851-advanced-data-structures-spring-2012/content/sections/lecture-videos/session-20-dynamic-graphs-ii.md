---
about_this_resource_text: '<p><strong>Description:</strong> Dynamic graphs: Euler
  tour trees, decremental connectivity in trees in O(1), fully dynamic connectivity
  in O(lg<sup>2</sup><em> n</em>), survey.</p> <p><strong>Speaker:</strong> Prof.
  Erik Demaine</p>'
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: L7ywsci9ujo
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Video-YouTube-Stream
  type: Video
  uid: 9bed47a90eb19ee6fe2266d653ba7630
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-20-dynamic-graphs-ii/id735348884?i=169611772
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Video-iTunes U-MP4
  type: Video
  uid: 9c2a133893587b7bc0bd1c512bf737f3
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec20_300k.mp4
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Video-Internet Archive-MP4
  type: Video
  uid: 83f145052bb1d5eb7e54e88770b80ab4
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/L7ywsci9ujo/default.jpg
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: 506edbcf89addef80cb7bd7931c55b1b
- id: 3Play-3PlayYouTubeid-MP4
  media_location: L7ywsci9ujo
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 5344f8f56a201b5d93789bd4034d57f8
- id: L7ywsci9ujo.srt
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-20-dynamic-graphs-ii/L7ywsci9ujo.srt
  title: 3play caption file
  type: null
  uid: f101377f7baa92a7aee02a2558aa404c
- id: L7ywsci9ujo.pdf
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-20-dynamic-graphs-ii/L7ywsci9ujo.pdf
  title: 3play pdf file
  type: null
  uid: abf65c50c8a4de1d2d3130e5c5b1e08e
- id: Caption-3Play YouTube id-SRT
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 650b2923119e7860c5d0136602812a3e
- id: Transcript-3Play YouTube id-PDF
  parent_uid: d213cd2d4ebd4a0536a545835a062f45
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: dc8be1e775badb9e17e307c33fea6971
inline_embed_id: 5662126session20:dynamicgraphsii41143547
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-20-dynamic-graphs-ii
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-20-dynamic-graphs-ii
template_type: Tabbed
title: 'Session 20: Dynamic Graphs II'
transcript: <p><span m='90'>The</span> <span m='180'>following</span> <span m='630'>content</span>
  <span m='1200'>is</span> <span m='1320'>provided</span> <span m='1770'>under</span>
  <span m='2009'>a</span> <span m='2070'>Creative</span> <span m='2490'>Commons</span>
  <span m='2910'>license.</span> <span m='4030'>Your</span> <span m='4200'>support</span>
  <span m='4710'>will</span> <span m='4860'>help</span> <span m='5100'>MIT</span>
  <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span> <span m='6870'>to</span>
  <span m='6960'>offer</span> <span m='7380'>high-quality</span> <span m='8100'>educational</span>
  <span m='8730'>resources</span> <span m='9360'>for</span> <span m='9510'>free.</span>
  <span m='10720'>To</span> <span m='10740'>make</span> <span m='10920'>a</span> <span
  m='10980'>donation,</span> <span m='11730'>or</span> <span m='11940'>view</span>
  <span m='12390'>additional</span> <span m='12810'>materials</span> <span m='13320'>from</span>
  <span m='13500'>hundreds</span> <span m='13920'>of</span> <span m='14040'>MIT</span>
  <span m='14460'>courses,</span> <span m='15550'>visit</span> <span m='15780'>MIT</span>
  <span m='16200'>OpenCourseWare</span> <span m='17280'>at</span> <span m='17430'>ocw.mit.edu,</span>
  </p><p><span m='21280'>ERIK DEMAINE:</span> <span m='21445'>Today</span> <span m='21610'>we</span>
  <span m='21760'>continue</span> <span m='22240'>our</span> <span m='22390'>theme</span>
  <span m='22780'>of</span> <span m='22960'>dynamic</span> <span m='23410'>graphs.</span>
  <span m='23930'>This</span> <span m='24130'>is</span> <span m='24280'>the</span>
  <span m='24370'>second</span> <span m='24850'>of</span> <span m='25150'>three</span>
  <span m='25510'>lectures.</span> <span m='26410'>And</span> <span m='28300'>this</span>
  <span m='28450'>will</span> <span m='28570'>be</span> <span m='28750'>the</span>
  <span m='28900'>main</span> <span m='29170'>lecture</span> <span m='29620'>about</span>
  <span m='30610'>upper</span> <span m='30850'>bounds</span> <span m='31390'>for</span>
  <span m='31600'>general</span> <span m='32380'>graphs.</span> </p><p><span m='32890'>Last</span>
  <span m='33190'>class</span> <span m='33580'>was</span> <span m='33730'>about</span>
  <span m='34000'>link</span> <span m='34150'>cut</span> <span m='34490'>trees.</span>
  <span m='34900'>And</span> <span m='35020'>we</span> <span m='35170'>saw,</span>
  <span m='35440'>essentially,</span> <span m='35920'>how</span> <span m='36040'>to</span>
  <span m='36130'>solve</span> <span m='36810'>a</span> <span m='37030'>problem</span>
  <span m='37300'>called</span> <span m='37510'>dynamic</span> <span m='37960'>connectivity,</span>
  <span m='40820'>which</span> <span m='40900'>is</span> <span m='40990'>where</span>
  <span m='41110'>you</span> <span m='41200'>can</span> <span m='41320'>insert</span>
  <span m='41590'>into</span> <span m='41740'>lead</span> <span m='41920'>edges</span>
  <span m='42280'>and you</span> <span m='42340'>want</span> <span m='42460'>to</span>
  <span m='42520'>know</span> <span m='42910'>what's</span> <span m='43210'>connected</span>
  <span m='43600'>to</span> <span m='43750'>what.</span> <span m='45490'>For</span>
  <span m='45760'>trees,</span> <span m='46300'>we</span> <span m='46420'>solved</span>
  <span m='46840'>it.</span> </p><p><span m='46990'>We're</span> <span m='47110'>going</span>
  <span m='47230'>to</span> <span m='47320'>solve</span> <span m='47560'>it</span>
  <span m='47650'>again</span> <span m='48040'>for</span> <span m='48190'>trees</span>
  <span m='48570'>in</span> <span m='48680'>an</span> <span m='48790'>easier</span>
  <span m='49210'>way.</span> <span m='49600'>Because</span> <span m='49900'>we</span>
  <span m='50020'>need</span> <span m='50320'>a</span> <span m='50410'>slightly</span>
  <span m='50830'>simpler</span> <span m='51220'>data</span> <span m='51430'>structure</span>
  <span m='51790'>we</span> <span m='51910'>can</span> <span m='52030'>augment</span>
  <span m='52390'>in</span> <span m='52480'>different</span> <span m='52750'>ways,</span>
  <span m='53550'>called</span> <span m='53740'>Euler-tour</span> <span m='54250'>trees.</span>
  <span m='56260'>And</span> <span m='57400'>then</span> <span m='57610'>we'll</span>
  <span m='57730'>solve</span> <span m='58060'>trees,</span> <span m='58360'>yet</span>
  <span m='58570'>again,</span> <span m='59800'>in</span> <span m='59980'>a</span>
  <span m='60100'>setting</span> <span m='60520'>where</span> <span m='60610'>you</span>
  <span m='60700'>can</span> <span m='60850'>only</span> <span m='61210'>delete</span>
  <span m='61540'>edges.</span> <span m='61900'>Then</span> <span m='62080'>we</span>
  <span m='62170'>can</span> <span m='62290'>get</span> <span m='62560'>from</span>
  <span m='62800'>log</span> <span m='63060'>n</span> <span m='63190'>time</span>
  <span m='63430'>to</span> <span m='63550'>constant</span> <span m='64030'>time.</span>
  </p><p><span m='65780'>So</span> <span m='66030'>we'll</span> <span m='66400'>still</span>
  <span m='66700'>talk</span> <span m='66970'>about</span> <span m='67210'>trees</span>
  <span m='67540'>for</span> <span m='67690'>quite</span> <span m='68030'>awhile.</span>
  <span m='68560'>But</span> <span m='68710'>then</span> <span m='68890'>we'll</span>
  <span m='69070'>finally</span> <span m='69400'>get</span> <span m='69520'>to</span>
  <span m='69730'>general</span> <span m='70060'>graphs.</span> <span m='70690'>And</span>
  <span m='72200'>we'll</span> <span m='72340'>do</span> <span m='72520'>a</span>
  <span m='72580'>log</span> <span m='72880'>squared</span> <span m='73180'>n</span>
  <span m='73330'>solution</span> <span m='73720'>for</span> <span m='73870'>general</span>
  <span m='74170'>graphs.</span> <span m='74570'>So</span> <span m='75160'>just</span>
  <span m='75430'>another</span> <span m='75730'>log</span> <span m='75940'>factor</span>
  <span m='76330'>more,</span> <span m='76990'>you</span> <span m='77110'>can</span>
  <span m='77230'>generalize</span> <span m='77620'>from</span> <span m='77770'>trees</span>
  <span m='78130'>to</span> <span m='80110'>undirected</span> <span m='80680'>graphs.</span>
  </p><p><span m='81550'>And</span> <span m='81670'>then</span> <span m='81820'>I'll</span>
  <span m='81880'>give</span> <span m='82060'>you</span> <span m='82240'>a</span>
  <span m='82360'>flavor</span> <span m='82900'>of</span> <span m='83020'>what's</span>
  <span m='83290'>out</span> <span m='83500'>there.</span> <span m='83650'>Dynamic</span>
  <span m='84040'>graphs</span> <span m='84280'>is</span> <span m='84430'>a</span>
  <span m='84490'>big</span> <span m='85390'>world.</span> <span m='85665'>It</span>
  <span m='85940'>has</span> <span m='86320'>lots</span> <span m='86590'>of</span>
  <span m='86710'>results.</span> <span m='87340'>And</span> <span m='87490'>I'll</span>
  <span m='87580'>give</span> <span m='87760'>you</span> <span m='87910'>some</span>
  <span m='88270'>idea</span> <span m='88570'>of</span> <span m='88630'>what</span>
  <span m='88900'>other</span> <span m='89110'>problems</span> <span m='89500'>have</span>
  <span m='89590'>been</span> <span m='89740'>studied</span> <span m='90190'>in</span>
  <span m='90370'>dynamic</span> <span m='90700'>graphs,</span> <span m='91060'>both</span>
  <span m='91300'>undirected</span> <span m='91810'>and</span> <span m='91930'>directed.</span>
  <span m='92770'>Though</span> <span m='93100'>for</span> <span m='93250'>directed</span>
  <span m='93580'>graphs,</span> <span m='93880'>things</span> <span m='94090'>get</span>
  <span m='94240'>pretty</span> <span m='94480'>slow.</span> </p><p><span m='97480'>Yeah,</span>
  <span m='97750'>next</span> <span m='98050'>class</span> <span m='98290'>will</span>
  <span m='98380'>be</span> <span m='98500'>about</span> <span m='98740'>lower</span>
  <span m='99070'>bounds,</span> <span m='99460'>which</span> <span m='99640'>will</span>
  <span m='99760'>prove</span> <span m='100120'>that</span> <span m='100330'>this</span>
  <span m='100570'>log</span> <span m='100930'>stuff</span> <span m='101230'>is</span>
  <span m='101350'>actually</span> <span m='101650'>necessary,</span> <span m='104830'>in</span>
  <span m='104890'>case</span> <span m='105160'>you</span> <span m='105260'>were</span>
  <span m='105370'>wondering.</span> <span m='106240'>Because</span> <span m='106540'>a</span>
  <span m='106600'>lot</span> <span m='106840'>of</span> <span m='106900'>the</span>
  <span m='106990'>time,</span> <span m='107230'>we've</span> <span m='107380'>been</span>
  <span m='107500'>able</span> <span m='107650'>to</span> <span m='107740'>get</span>
  <span m='107890'>better</span> <span m='108160'>than</span> <span m='108310'>log</span>
  <span m='108580'>in</span> <span m='108670'>this</span> <span m='108820'>class.</span>
  <span m='109620'>And</span> <span m='109750'>dynamic</span> <span m='110110'>graphs,</span>
  <span m='110470'>you</span> <span m='110560'>can't.</span> <span m='111040'>They're</span>
  <span m='111370'>log</span> <span m='111700'>lower</span> <span m='111930'>bounds.</span>
  </p><p><span m='113650'>So</span> <span m='113950'>let's</span> <span m='114250'>start</span>
  <span m='114580'>out</span> <span m='114730'>with</span> <span m='115360'>a</span>
  <span m='115510'>definition</span> <span m='115990'>of</span> <span m='116050'>the</span>
  <span m='116110'>problem.</span> <span m='117280'>We'll</span> <span m='117570'>be</span>
  <span m='117760'>focusing,</span> <span m='118390'>today,</span> <span m='118720'>mostly</span>
  <span m='119170'>on</span> <span m='119440'>this</span> <span m='119590'>dynamic</span>
  <span m='120130'>connectivity</span> <span m='120550'>problem.</span> <span m='128139'>Maintain</span>
  <span m='128800'>an</span> <span m='128889'>undirected</span> <span m='129340'>graph</span>
  <span m='136220'>subject</span> <span m='136670'>to</span> <span m='138680'>[INAUDIBLE]</span>
  <span m='139160'>insertion</span> <span m='139610'>and</span> <span m='139700'>deletion.</span>
  </p><p><span m='147090'>And</span> <span m='148080'>you</span> <span m='148250'>can</span>
  <span m='148430'>also</span> <span m='148970'>insert</span> <span m='149330'>and</span>
  <span m='149420'>delete</span> <span m='149690'>degree-0</span> <span m='150290'>vertices.</span>
  <span m='153170'>But</span> <span m='153600'>we're</span> <span m='153710'>not</span>
  <span m='153830'>really</span> <span m='154010'>going</span> <span m='154160'>to</span>
  <span m='154220'>worry</span> <span m='154430'>about</span> <span m='155390'>vertices.</span>
  <span m='155870'>It's</span> <span m='155990'>easy</span> <span m='156230'>to</span>
  <span m='156320'>add</span> <span m='156740'>vertices</span> <span m='157130'>that</span>
  <span m='157220'>have</span> <span m='157370'>no</span> <span m='157520'>edges</span>
  <span m='157760'>to</span> <span m='157880'>them.</span> <span m='158110'>Also</span>
  <span m='158300'>easy</span> <span m='158540'>to</span> <span m='158660'>delete</span>
  <span m='158960'>them.</span> <span m='159525'>It'll</span> <span m='159880'>be</span>
  <span m='160010'>more</span> <span m='160190'>about</span> <span m='161000'>adding</span>
  <span m='161360'>and</span> <span m='161450'>removing</span> <span m='161840'>edges</span>
  <span m='162170'>incident</span> <span m='162530'>to</span> <span m='162650'>those</span>
  <span m='162860'>vertices.</span> </p><p><span m='165020'>And</span> <span m='165230'>then</span>
  <span m='165380'>the</span> <span m='165470'>query</span> <span m='166490'>connectivity</span>
  <span m='167030'>query</span> <span m='171890'>is</span> <span m='172100'>given</span>
  <span m='172460'>two</span> <span m='172760'>vertices.</span> <span m='176100'>Is</span>
  <span m='176270'>there</span> <span m='177710'>a</span> <span m='178040'>v</span>
  <span m='178430'>to</span> <span m='178580'>w</span> <span m='178970'>path?</span>
  <span m='182000'>So</span> <span m='182210'>this</span> <span m='182420'>is</span>
  <span m='182540'>asking</span> <span m='183080'>are</span> <span m='183290'>two</span>
  <span m='183470'>vertices,</span> <span m='183860'>v and</span> <span m='184130'>w,</span>
  <span m='184400'>in</span> <span m='184550'>the</span> <span m='184640'>same</span>
  <span m='184880'>connected</span> <span m='185240'>component?</span> </p><p><span
  m='187310'>That's</span> <span m='187810'>a</span> <span m='188270'>strong</span>
  <span m='188990'>query.</span> <span m='189610'>In</span> <span m='189750'>some</span>
  <span m='189980'>sense,</span> <span m='190260'>a</span> <span m='190360'>weaker</span>
  <span m='190820'>query is</span> <span m='191120'>just</span> <span m='191300'>to</span>
  <span m='191390'>know</span> <span m='191540'>globally,</span> <span m='192800'>is</span>
  <span m='192980'>the</span> <span m='193070'>graph</span> <span m='193370'>connected?</span>
  <span m='194930'>That's</span> <span m='195110'>another</span> <span m='195470'>interpretation</span>
  <span m='196980'>of</span> <span m='197300'>dynamic</span> <span m='197690'>connectivity.</span>
  <span m='198260'>It</span> <span m='198320'>turns</span> <span m='198590'>out,</span>
  <span m='199010'>both</span> <span m='199310'>of</span> <span m='199370'>these</span>
  <span m='199550'>problems</span> <span m='199850'>are</span> <span m='199940'>interesting</span>
  <span m='201590'>and</span> <span m='201710'>useful</span> <span m='202160'>for</span>
  <span m='202340'>solving</span> <span m='203300'>problems.</span> </p><p><span m='205400'>But</span>
  <span m='205610'>they</span> <span m='205700'>also</span> <span m='205910'>turn</span>
  <span m='206090'>out</span> <span m='206210'>to</span> <span m='206300'>be,</span>
  <span m='206420'>more</span> <span m='206630'>or</span> <span m='206660'>less,</span>
  <span m='206840'>equivalent.</span> <span m='207350'>All</span> <span m='207530'>the</span>
  <span m='207620'>upper</span> <span m='207830'>bounds</span> <span m='208100'>we</span>
  <span m='208190'>know</span> <span m='208310'>for</span> <span m='208460'>one</span>
  <span m='208700'>apply</span> <span m='208980'>to</span> <span m='209090'>the</span>
  <span m='209210'>other</span> <span m='209570'>and</span> <span m='209690'>vice</span>
  <span m='209930'>versa.</span> <span m='210510'>So</span> <span m='211270'>it</span>
  <span m='211530'>doesn't</span> <span m='211760'>seem</span> <span m='211940'>to</span>
  <span m='212030'>make</span> <span m='212180'>much</span> <span m='212390'>difference</span>
  <span m='212720'>which</span> <span m='212900'>kind</span> <span m='213050'>of</span>
  <span m='213140'>query</span> <span m='213380'>you</span> <span m='213470'>want.</span>
  <span m='214130'>So</span> <span m='214370'>might</span> <span m='214510'>as</span>
  <span m='214580'>well</span> <span m='214700'>take</span> <span m='214880'>both.</span>
  <span m='215790'>We'll</span> <span m='216140'>focus</span> <span m='216500'>on</span>
  <span m='216620'>the</span> <span m='216710'>v, w</span> <span m='217310'>query.</span>
  </p><p><span m='220100'>OK.</span> <span m='221690'>So</span> <span m='221870'>that's</span>
  <span m='222230'>the</span> <span m='222830'>problem,</span> <span m='224450'>in</span>
  <span m='224570'>general.</span> <span m='225200'>And</span> <span m='225530'>I</span>
  <span m='225650'>want</span> <span m='225890'>to</span> <span m='226550'>introduce</span>
  <span m='226880'>some</span> <span m='227090'>terminology,</span> <span m='229490'>like</span>
  <span m='229670'>when</span> <span m='229820'>we</span> <span m='229910'>had</span>
  <span m='230120'>partially</span> <span m='230840'>and</span> <span m='230960'>full</span>
  <span m='231740'>persistence,</span> <span m='233060'>there's</span> <span m='233240'>also</span>
  <span m='233510'>a</span> <span m='233690'>partial</span> <span m='234140'>and</span>
  <span m='234230'>full</span> <span m='235580'>dynamicness.</span> <span m='237530'>A</span>
  <span m='237710'>fully</span> <span m='238070'>dynamic</span> <span m='239330'>data</span>
  <span m='239600'>structure</span> <span m='240620'>is</span> <span m='240800'>one</span>
  <span m='241010'>where</span> <span m='241100'>you</span> <span m='241250'>can</span>
  <span m='241430'>do</span> <span m='242180'>inserts</span> <span m='242660'>and</span>
  <span m='242900'>deletes</span> <span m='244510'>of</span> <span m='244700'>edges.</span>
  </p><p><span m='248400'>And</span> <span m='248710'>a</span> <span m='249120'>partially</span>
  <span m='249630'>dynamic</span> <span m='250110'>data</span> <span m='250350'>structure</span>
  <span m='255600'>is</span> <span m='255780'>one</span> <span m='255960'>where</span>
  <span m='256050'>you</span> <span m='256170'>can</span> <span m='256290'>do</span>
  <span m='256380'>inserts</span> <span m='256829'>or</span> <span m='257010'>deletes.</span>
  <span m='259790'>So</span> <span m='262770'>you</span> <span m='262890'>can</span>
  <span m='263040'>only</span> <span m='263310'>do</span> <span m='263460'>inserts,</span>
  <span m='264390'>or</span> <span m='265230'>you</span> <span m='265320'>can</span>
  <span m='265440'>only</span> <span m='265650'>do</span> <span m='265780'>deletes</span>
  <span m='266430'>throughout</span> <span m='266910'>the</span> <span m='267030'>lifetime</span>
  <span m='267480'>of</span> <span m='267540'>the</span> <span m='267630'>data</span>
  <span m='267810'>structure.</span> <span m='270180'>And</span> <span m='270300'>these</span>
  <span m='270480'>have</span> <span m='270570'>specific</span> <span m='271080'>names.</span>
  </p><p><span m='271350'>Because</span> <span m='271500'>usually</span> <span m='271830'>you
  use</span> <span m='272010'>different</span> <span m='272280'>data</span> <span
  m='272490'>structures</span> <span m='272880'>for</span> <span m='273030'>just</span>
  <span m='273270'>insertions</span> <span m='273780'>or</span> <span m='273840'>just</span>
  <span m='274050'>deletions.</span> <span m='275000'>Just</span> <span m='275190'>insertions</span>
  <span m='275760'>is</span> <span m='275880'>called</span> <span m='276120'>incremental.</span>
  <span m='283540'>And</span> <span m='283840'>just</span> <span m='284050'>deletions</span>
  <span m='284560'>is</span> <span m='284680'>called</span> <span m='284920'>decremental.</span>
  </p><p><span m='289957'>The</span> <span m='290440'>idea</span> <span m='290710'>of</span>
  <span m='290830'>incremental</span> <span m='291310'>algorithms</span> <span m='292040'>is</span>
  <span m='292150'>definitely</span> <span m='293050'>not</span> <span m='293230'>a</span>
  <span m='293290'>new</span> <span m='293470'>one.</span> <span m='293900'>But</span>
  <span m='294040'>in</span> <span m='294420'>dynamic</span> <span m='294760'>graphs,</span>
  <span m='295600'>it</span> <span m='295720'>always</span> <span m='295960'>makes</span>
  <span m='296140'>sense.</span> <span m='297010'>So</span> <span m='298210'>in</span>
  <span m='298360'>general, a</span> <span m='298660'>dynamic</span> <span m='299060'>graph</span>
  <span m='299290'>problem</span> <span m='299590'>is</span> <span m='299680'>defined</span>
  <span m='300010'>usually</span> <span m='300280'>by</span> <span m='300430'>insertion</span>
  <span m='300820'>and</span> <span m='300910'>deletion</span> <span m='301180'>of</span>
  <span m='301300'>edges,</span> <span m='302320'>and</span> <span m='302710'>either</span>
  <span m='303070'>fully</span> <span m='303370'>dynamic</span> <span m='303820'>or</span>
  <span m='303940'>partially</span> <span m='304300'>dynamic.</span> </p><p><span
  m='305500'>And</span> <span m='305620'>then</span> <span m='305710'>the</span> <span
  m='305800'>query</span> <span m='306130'>is</span> <span m='306220'>what</span>
  <span m='306370'>can</span> <span m='306520'>vary.</span> <span m='307250'>We're</span>
  <span m='307390'>going</span> <span m='307510'>to</span> <span m='307570'>focus</span>
  <span m='307860'>on</span> <span m='307990'>connectivity</span> <span m='308530'>queries.</span>
  <span m='309020'>But</span> <span m='309550'>you</span> <span m='309670'>could</span>
  <span m='309790'>do</span> <span m='309910'>others.</span> </p><p><span m='310850'>So</span>
  <span m='310990'>this</span> <span m='311170'>explains,</span> <span m='311800'>for</span>
  <span m='312160'>decremental,</span> <span m='313120'>we're</span> <span m='313210'>going</span>
  <span m='313360'>to</span> <span m='313450'>solve</span> <span m='313780'>trees</span>
  <span m='314110'>in</span> <span m='314200'>constant</span> <span m='314530'>time.</span>
  <span m='315370'>For</span> <span m='315550'>fully</span> <span m='315850'>dynamic,</span>
  <span m='316450'>we're</span> <span m='316570'>going</span> <span m='316690'>to</span>
  <span m='316780'>solve</span> <span m='317350'>general</span> <span m='317680'>graphs</span>
  <span m='318040'>in</span> <span m='318190'>log</span> <span m='318400'>squared</span>
  <span m='318670'>n</span> <span m='318790'>time.</span> <span m='326220'>I</span>
  <span m='326370'>guess</span> <span m='326550'>these</span> <span m='326820'>three</span>
  <span m='327210'>are</span> <span m='328030'>sort</span> <span m='328260'>of</span>
  <span m='328400'>the</span> <span m='328530'>meat</span> <span m='328770'>of</span>
  <span m='328890'>the</span> <span m='328980'>lecture.</span> </p><p><span m='330250'>But</span>
  <span m='330350'>before</span> <span m='330540'>I</span> <span m='330630'>go</span>
  <span m='330780'>into</span> <span m='331020'>that,</span> <span m='331330'>I</span>
  <span m='331430'>want</span> <span m='331470'>to</span> <span m='331920'>tell</span>
  <span m='332130'>you</span> <span m='332250'>where</span> <span m='332490'>this</span>
  <span m='333300'>dynamic</span> <span m='333700'>connectivity</span> <span m='334260'>results</span>
  <span m='334620'>fit</span> <span m='334920'>into</span> <span m='335310'>the</span>
  <span m='335460'>literature</span> <span m='335880'>in</span> <span m='336000'>general</span>
  <span m='337260'>on</span> <span m='337560'>dynamic</span> <span m='337920'>connectivity.</span>
  <span m='345510'>This</span> <span m='345720'>is</span> <span m='345810'>part</span>
  <span m='346110'>of</span> <span m='346230'>our</span> <span m='346350'>survey,</span>
  <span m='347610'>but</span> <span m='347760'>just</span> <span m='348090'>on</span>
  <span m='348270'>dynamic</span> <span m='348820'>connectivity.</span> <span m='359780'>Well,</span>
  <span m='361130'>for</span> <span m='361270'>trees,</span> <span m='361790'>this</span>
  <span m='362020'>is</span> <span m='362140'>the</span> <span m='362230'>best</span>
  <span m='362470'>we</span> <span m='362590'>know.</span> </p><p><span m='364000'>This</span>
  <span m='364180'>is</span> <span m='364270'>the</span> <span m='364360'>best,</span>
  <span m='364570'>possible</span> <span m='364990'>really.</span> <span m='365680'>You</span>
  <span m='365800'>can</span> <span m='365950'>do</span> <span m='366170'>log</span>
  <span m='366615'>n</span> <span m='367060'>in</span> <span m='367180'>general,</span>
  <span m='368050'>and</span> <span m='368230'>then</span> <span m='369190'>decremental.</span>
  <span m='374990'>You</span> <span m='375220'>can</span> <span m='375370'>do</span>
  <span m='375520'>constant.</span> </p><p><span m='376930'>We</span> <span m='377140'>actually</span>
  <span m='377380'>already</span> <span m='377650'>know</span> <span m='377830'>how</span>
  <span m='377950'>to</span> <span m='378070'>do</span> <span m='378190'>trees</span>
  <span m='379090'>with</span> <span m='379300'>lint</span> <span m='379480'>cut</span>
  <span m='379690'>trees.</span> <span m='380200'>It's</span> <span m='380620'>not</span>
  <span m='380980'>totally</span> <span m='381460'>obvious,</span> <span m='381890'>but</span>
  <span m='381940'>you</span> <span m='382090'>can</span> <span m='382930'>use</span>
  <span m='383140'>links</span> <span m='383560'>to</span> <span m='383710'>simulate</span>
  <span m='385640'>edge</span> <span m='385900'>insertions.</span> <span m='387010'>And</span>
  <span m='387160'>you</span> <span m='387280'>can</span> <span m='387430'>use</span>
  <span m='387580'>cuts</span> <span m='387970'>to</span> <span m='388090'>simulate</span>
  <span m='388900'>edge</span> <span m='389110'>deletions.</span> </p><p><span m='390040'>It's</span>
  <span m='390130'>not</span> <span m='390280'>totally</span> <span m='390640'>obvious</span>
  <span m='390910'>because</span> <span m='391340'>the</span> <span m='393130'>link</span>
  <span m='393430'>operation</span> <span m='393850'>requires</span> <span m='394180'>that</span>
  <span m='394300'>one</span> <span m='394450'>of</span> <span m='394510'>the</span>
  <span m='394570'>vertices</span> <span m='395050'>is</span> <span m='395740'>the</span>
  <span m='395860'>root</span> <span m='396220'>of</span> <span m='396400'>its</span>
  <span m='396580'>tree.</span> <span m='397660'>So</span> <span m='398410'>that's</span>
  <span m='399340'>not</span> <span m='399490'>so</span> <span m='399640'>trivial.</span>
  <span m='400030'>But</span> <span m='400180'>we'll</span> <span m='400330'>see</span>
  <span m='400780'>an</span> <span m='400960'>easy</span> <span m='401200'>way</span>
  <span m='401320'>to</span> <span m='401410'>do</span> <span m='401560'>that</span>
  <span m='401770'>in</span> <span m='401980'>Euler-tour</span> <span m='402490'>trees</span>
  <span m='403720'>later</span> <span m='403960'>on.</span> </p><p><span m='405890'>So</span>
  <span m='406110'>this we</span> <span m='406270'>kind</span> <span m='406510'>of</span>
  <span m='406600'>already</span> <span m='406780'>know</span> <span m='406900'>how</span>
  <span m='406990'>to</span> <span m='407080'>do.</span> <span m='407360'>But</span>
  <span m='407380'>we're</span> <span m='407480'>going</span> <span m='407600'>to</span>
  <span m='407690'>see</span> <span m='408040'>another</span> <span m='408370'>simpler</span>
  <span m='408700'>way.</span> <span m='410490'>The</span> <span m='410620'>constant</span>
  <span m='411070'>time</span> <span m='411750'>amortized</span> <span m='412300'>decremental</span>
  <span m='412930'>we're</span> <span m='413050'>going</span> <span m='413160'>to</span>
  <span m='413260'>do</span> <span m='413410'>today.</span> <span m='415470'>So</span>
  <span m='415570'>we're</span> <span m='415690'>also</span> <span m='415930'>going</span>
  <span m='416050'>to</span> <span m='416140'>do</span> <span m='416260'>this</span>
  <span m='417010'>today.</span> </p><p><span m='419590'>Incremental,</span> <span
  m='421180'>I</span> <span m='421240'>don't</span> <span m='421390'>think</span>
  <span m='421570'>it's</span> <span m='421690'>known,</span> <span m='421870'>how</span>
  <span m='421960'>to</span> <span m='422080'>do</span> <span m='422920'>constant</span>
  <span m='423340'>time.</span> <span m='424840'>But</span> <span m='425020'>I'll</span>
  <span m='425140'>tell</span> <span m='425350'>you</span> <span m='425500'>another</span>
  <span m='425800'>result.</span> <span m='426100'>You</span> <span m='426310'>can</span>
  <span m='426550'>get</span> <span m='426700'>almost</span> <span m='427030'>constant</span>
  <span m='427360'>time.</span> </p><p><span m='430310'>Another</span> <span m='430600'>special</span>
  <span m='430960'>type</span> <span m='431200'>of</span> <span m='431320'>graph</span>
  <span m='431650'>you</span> <span m='431780'>could</span> <span m='431890'>consider</span>
  <span m='432340'>is</span> <span m='432610'>a</span> <span m='432700'>plane</span>
  <span m='433120'>graph.</span> <span m='433450'>This</span> <span m='433600'>is</span>
  <span m='433720'>a</span> <span m='433780'>graph</span> <span m='434140'>with</span>
  <span m='434540'>planar</span> <span m='434890'>embedding.</span> <span m='435670'>So</span>
  <span m='435820'>as</span> <span m='435970'>you're</span> <span m='436090'>inserting</span>
  <span m='436480'>edges</span> <span m='437320'>or</span> <span m='437440'>adding</span>
  <span m='437800'>vertices</span> <span m='438280'>and</span> <span m='438370'>whatnot,</span>
  <span m='438670'>you</span> <span m='438800'>say</span> <span m='439030'>which</span>
  <span m='439210'>face</span> <span m='439480'>they</span> <span m='439630'>live</span>
  <span m='439840'>in.</span> <span m='440440'>And</span> <span m='440560'>so</span>
  <span m='440680'>you</span> <span m='440770'>have</span> <span m='440950'>a</span>
  <span m='441010'>fixed</span> <span m='441370'>planar</span> <span m='441660'>embedding.</span>
  <span m='442120'>It's</span> <span m='442270'>being</span> <span m='442480'>constructed</span>
  <span m='442960'>as</span> <span m='443080'>you</span> <span m='443140'>go</span>
  <span m='443260'>along.</span> </p><p><span m='444070'>These</span> <span m='444930'>are</span>
  <span m='445210'>easy</span> <span m='445450'>to</span> <span m='445630'>maintain.</span>
  <span m='446590'>You</span> <span m='446680'>can</span> <span m='446800'>get</span>
  <span m='447010'>order</span> <span m='447250'>log</span> <span m='447490'>n.</span>
  <span m='448150'>I</span> <span m='448210'>guess,</span> <span m='448420'>in</span>
  <span m='448510'>some</span> <span m='448720'>sense,</span> <span m='448960'>that</span>
  <span m='449070'>generalizes</span> <span m='449620'>trees.</span> <span m='450040'>Because</span>
  <span m='450220'>they</span> <span m='450340'>also</span> <span m='450610'>have</span>
  <span m='451480'>pretty</span> <span m='451780'>obvious</span> <span m='452170'>planar</span>
  <span m='452490'>embedding.</span> <span m='453820'>So</span> <span m='454000'>that's</span>
  <span m='455590'>something</span> <span m='455950'>you</span> <span m='456010'>can</span>
  <span m='456130'>do,</span> <span m='459550'>in</span> <span m='459700'>log</span>
  <span m='459920'>n.</span> </p><p><span m='460750'>But</span> <span m='460900'>the</span>
  <span m='461050'>big</span> <span m='461290'>question</span> <span m='462400'>is,</span>
  <span m='462610'>for</span> <span m='462760'>general</span> <span m='463090'>graphs,</span>
  <span m='467920'>can</span> <span m='468280'>you</span> <span m='468430'>do</span>
  <span m='469390'>log</span> <span m='469690'>n</span> <span m='469840'>per</span>
  <span m='470255'>operation?</span> <span m='471580'>That's</span> <span m='471790'>an</span>
  <span m='471910'>open</span> <span m='472210'>problem,</span> <span m='473530'>probably</span>
  <span m='473830'>the</span> <span m='473920'>central</span> <span m='474370'>open</span>
  <span m='474640'>problem</span> <span m='475100'>in</span> <span m='475390'>dynamic</span>
  <span m='475645'>connectivity.</span> <span m='486300'>But</span> <span m='487760'>we're</span>
  <span m='487920'>not</span> <span m='488100'>so</span> <span m='488280'>far</span>
  <span m='488460'>away</span> <span m='488610'>from</span> <span m='488790'>that.</span>
  </p><p><span m='489070'>As</span> <span m='489120'>I</span> <span m='489180'>said,</span>
  <span m='489390'>you</span> <span m='489510'>can</span> <span m='489630'>get</span>
  <span m='489780'>log</span> <span m='490020'>squared.</span> <span m='491130'>Let</span>
  <span m='491280'>me</span> <span m='491400'>say</span> <span m='491790'>what</span>
  <span m='491940'>the</span> <span m='492030'>log</span> <span m='492210'>squared</span>
  <span m='492480'>result</span> <span m='492810'>is.</span> <span m='493110'>It's
  a</span> <span m='493140'>little</span> <span m='493350'>bit</span> <span m='493530'>better</span>
  <span m='494270'>than</span> <span m='494400'>just</span> <span m='494580'>log</span>
  <span m='494860'>squared.</span> <span m='495250'>You</span> <span m='495300'>get</span>
  <span m='495450'>log</span> <span m='495660'>squared</span> <span m='495960'>update,</span>
  <span m='497400'>but</span> <span m='497670'>query</span> <span m='498150'>is</span>
  <span m='498360'>actually</span> <span m='498690'>sub</span> <span m='498950'>logarithmic.</span>
  <span m='503010'>You</span> <span m='503490'>got a</span> <span m='503970'>log</span>
  <span m='504570'>n</span> <span m='505080'>over</span> <span m='505350'>log</span>
  <span m='505590'>log</span> <span m='505830'>n</span> <span m='505980'>query.</span>
  </p><p><span m='512650'>And</span> <span m='514900'>another</span> <span m='515190'>result</span>
  <span m='515950'>is</span> <span m='516309'>you</span> <span m='516400'>can</span>
  <span m='516520'>do</span> <span m='516610'>a</span> <span m='516640'>little</span>
  <span m='516880'>bit</span> <span m='517000'>better</span> <span m='517299'>than</span>
  <span m='517450'>log</span> <span m='517669'>squared.</span> <span m='518049'>You</span>
  <span m='518169'>can</span> <span m='518320'>do</span> <span m='519080'>log</span>
  <span m='519650'>times</span> <span m='521500'>log</span> <span m='522100'>log</span>
  <span m='522730'>n</span> <span m='523570'>cube</span> <span m='525210'>update.</span>
  <span m='525750'>So</span> <span m='525900'>roughly</span> <span m='526330'>log</span>
  <span m='526600'>n</span> <span m='526690'>update,</span> <span m='527110'>but</span>
  <span m='527290'>there's</span> <span m='527430'>some</span> <span m='527710'>poly</span>
  <span m='527920'>log</span> <span m='528190'>log</span> <span m='529210'>term.</span>
  </p><p><span m='530470'>And</span> <span m='531550'>query</span> <span m='532060'>slows</span>
  <span m='532480'>down</span> <span m='532870'>very</span> <span m='533230'>slightly.</span>
  <span m='534280'>It</span> <span m='534400'>becomes</span> <span m='534880'>log</span>
  <span m='535270'>n</span> <span m='535990'>over</span> <span m='536300'>a</span>
  <span m='536350'>log</span> <span m='537490'>log</span> <span m='538690'>log</span>
  <span m='539140'>n.</span> <span m='544700'>Well,</span> <span m='545090'>it'll</span>
  <span m='545380'>sort</span> <span m='545650'>of</span> <span m='545710'>makes</span>
  <span m='545950'>sense</span> <span m='546250'>why</span> <span m='547420'>in</span>
  <span m='547570'>a</span> <span m='547630'>moment.</span> </p><p><span m='548060'>So</span>
  <span m='548900'>the</span> <span m='549100'>lowest</span> <span m='549580'>update</span>
  <span m='549880'>time</span> <span m='550120'>known</span> <span m='550390'>is</span>
  <span m='550540'>this</span> <span m='550720'>one,</span> <span m='551350'>log</span>
  <span m='551830'>times</span> <span m='552340'>log</span> <span m='552580'>log</span>
  <span m='552820'>cubed.</span> <span m='554710'>Big</span> <span m='554980'>open</span>
  <span m='555250'>question</span> <span m='555610'>is</span> <span m='555730'>whether</span>
  <span m='556000'>you</span> <span m='556120'>can</span> <span m='556270'>get</span>
  <span m='557740'>log</span> <span m='559330'>for</span> <span m='559570'>update,</span>
  <span m='561160'>and</span> <span m='561310'>any</span> <span m='561490'>kind</span>
  <span m='561670'>of</span> <span m='561760'>reasonable</span> <span m='562210'>query</span>
  <span m='562480'>time.</span> <span m='563160'>But</span> <span m='563610'>ideally,</span>
  <span m='563950'>log</span> <span m='564190'>for</span> <span m='564340'>both.</span>
  </p><p><span m='566650'>So</span> <span m='566860'>that's</span> <span m='567070'>for</span>
  <span m='567350'>a</span> <span m='567370'>fully</span> <span m='567670'>dynamic.</span>
  <span m='568210'>If</span> <span m='568300'>I</span> <span m='568360'>don't</span>
  <span m='568540'>say</span> <span m='568720'>any</span> <span m='569320'>otherwise,</span>
  <span m='569800'>fully</span> <span m='570040'>dynamic</span> <span m='570490'>is</span>
  <span m='570610'>always</span> <span m='570880'>the</span> <span m='571090'>default.</span>
  <span m='573610'>Result,</span> <span m='574460'>that's</span> <span m='574840'>the</span>
  <span m='574960'>case</span> <span m='575210'>you</span> <span m='575650'>usually</span>
  <span m='576010'>care</span> <span m='576190'>about.</span> <span m='579520'>Cool.</span>
  </p><p><span m='580240'>But</span> <span m='580510'>if</span> <span m='580690'>you</span>
  <span m='580810'>want</span> <span m='580990'>to</span> <span m='581050'>do</span>
  <span m='581200'>incremental,</span> <span m='586990'>you</span> <span m='587140'>can</span>
  <span m='587320'>achieve</span> <span m='591310'>an</span> <span m='591520'>alpha</span>
  <span m='591910'>bound.</span> <span m='592870'>Because</span> <span m='593680'>incremental</span>
  <span m='594310'>dynamic</span> <span m='594700'>connectivity</span> <span m='595390'>is</span>
  <span m='595690'>really</span> <span m='595930'>the</span> <span m='596080'>union</span>
  <span m='596410'>find</span> <span m='596770'>problem.</span> <span m='598580'>Union</span>
  <span m='599140'>find,</span> <span m='599470'>you</span> <span m='599560'>have</span>
  <span m='599740'>a</span> <span m='599800'>bunch</span> <span m='600070'>of</span>
  <span m='600520'>sets</span> <span m='600820'>of</span> <span m='600880'>elements.</span>
  <span m='601300'>You</span> <span m='601420'>can</span> <span m='601690'>take</span>
  <span m='601960'>two</span> <span m='602140'>of</span> <span m='602200'>them and</span>
  <span m='602410'>union</span> <span m='602710'>them</span> <span m='602830'>together.</span>
  </p><p><span m='603850'>Once</span> <span m='604060'>they're</span> <span m='604180'>unioned,</span>
  <span m='604510'>they</span> <span m='604630'>can</span> <span m='604750'>never</span>
  <span m='604960'>be</span> <span m='605080'>split</span> <span m='605290'>apart.</span>
  <span m='606040'>And</span> <span m='606130'>find</span> <span m='606490'>is</span>
  <span m='606580'>tell</span> <span m='606790'>me</span> <span m='606940'>what</span>
  <span m='607100'>set</span> <span m='607270'>I'm</span> <span m='607420'>in.</span>
  <span m='607570'>So</span> <span m='607720'>if</span> <span m='607840'>I</span>
  <span m='608380'>do</span> <span m='608530'>find</span> <span m='608830'>on</span>
  <span m='608950'>two</span> <span m='609790'>vertices,</span> <span m='610300'>I</span>
  <span m='610390'>can</span> <span m='610540'>find</span> <span m='611470'>which</span>
  <span m='611710'>connected</span> <span m='612010'>components</span> <span m='612460'>there</span>
  <span m='612610'>and</span> <span m='613810'>check</span> <span m='614080'>whether</span>
  <span m='614320'>they're</span> <span m='614470'>the</span> <span m='614560'>same.</span>
  <span m='615070'>That</span> <span m='615220'>will</span> <span m='615490'>give</span>
  <span m='615730'>me</span> <span m='616360'>connectivity</span> <span m='616900'>query.</span>
  </p><p><span m='617200'>Insertion</span> <span m='617740'>corresponds</span> <span
  m='618250'>to</span> <span m='618370'>merging</span> <span m='618820'>two</span>
  <span m='618970'>connected</span> <span m='619320'>components</span> <span m='619790'>unless</span>
  <span m='620050'>they</span> <span m='620160'>were</span> <span m='620260'>already</span>
  <span m='620650'>together.</span> <span m='621880'>And it's</span> <span m='622180'>known</span>
  <span m='622420'>you</span> <span m='622510'>can</span> <span m='622660'>get an</span>
  <span m='622900'>alpha</span> <span m='623230'>amortized</span> <span m='623720'>bound.</span>
  <span m='623960'>And</span> <span m='624050'>that's</span> <span m='624220'>optimal</span>
  <span m='625390'>for</span> <span m='625660'>that</span> <span m='626440'>problem.</span>
  <span m='626870'>So</span> <span m='627010'>I</span> <span m='627070'>guess</span>
  <span m='627280'>that's</span> <span m='627430'>actually</span> <span m='627730'>a</span>
  <span m='627810'>theta.</span> <span m='631670'>So</span> <span m='631690'>that's</span>
  <span m='631870'>sort</span> <span m='631990'>of</span> <span m='632080'>well-known</span>
  <span m='633160'>stuff.</span> <span m='634100'>It's</span> <span m='634330'>a</span>
  <span m='634360'>complicated</span> <span m='634900'>analysis,</span> <span m='635470'>but</span>
  <span m='636190'>already</span> <span m='636400'>been</span> <span m='636550'>done.</span>
  </p><p><span m='639250'>So</span> <span m='639400'>in</span> <span m='639490'>particular,</span>
  <span m='640360'>that's,</span> <span m='641020'>I</span> <span m='641140'>believe,</span>
  <span m='641500'>the</span> <span m='641650'>best</span> <span m='641980'>way</span>
  <span m='642160'>we</span> <span m='642310'>know</span> <span m='642520'>how</span>
  <span m='642670'>to</span> <span m='642760'>solve</span> <span m='643720'>incremental</span>
  <span m='644830'>connectivity</span> <span m='645400'>in</span> <span m='645490'>trees.</span>
  <span m='646120'>Though</span> <span m='647470'>I'm</span> <span m='647920'>curious</span>
  <span m='648250'>whether</span> <span m='648460'>you</span> <span m='648580'>can</span>
  <span m='648700'>do</span> <span m='648820'>constant</span> <span m='649450'>incremental.</span>
  <span m='654790'>Decremental,</span> <span m='655570'>there's</span> <span m='655810'>essentially</span>
  <span m='656260'>a</span> <span m='656290'>log</span> <span m='656570'>n</span>
  <span m='656720'>solution.</span> <span m='659022'>Not</span> <span m='659450'>quite,</span>
  <span m='660830'>but</span> <span m='661650'>for</span> <span m='662500'>dense</span>
  <span m='662770'>graphs,</span> <span m='663130'>there's</span> <span m='663310'>a</span>
  <span m='663370'>log</span> <span m='663550'>n</span> <span m='663670'>solution.</span>
  </p><p><span m='671830'>So</span> <span m='672070'>I'm</span> <span m='672190'>stating,</span>
  <span m='673100'>instead</span> <span m='673450'>of</span> <span m='673540'>a</span>
  <span m='673630'>bound</span> <span m='673930'>per</span> <span m='674140'>operation,</span>
  <span m='674740'>this</span> <span m='674890'>is</span> <span m='675010'>a</span>
  <span m='675070'>total</span> <span m='675430'>bound.</span> <span m='677230'>Let's</span>
  <span m='677380'>say</span> <span m='677530'>you</span> <span m='677650'>start</span>
  <span m='677950'>with</span> <span m='678130'>an</span> <span m='678370'>m-edge</span>
  <span m='678730'>graph</span> <span m='679150'>and</span> <span m='679240'>you</span>
  <span m='679360'>delete</span> <span m='679690'>all</span> <span m='679840'>the</span>
  <span m='679990'>edges.</span> <span m='680860'>Then</span> <span m='681010'>you</span>
  <span m='681100'>pay</span> <span m='681340'>log</span> <span m='681670'>n</span>
  <span m='681880'>for</span> <span m='682180'>each</span> <span m='682420'>edge.</span>
  </p><p><span m='684180'>But</span> <span m='684340'>you</span> <span m='684490'>also</span>
  <span m='684700'>have</span> <span m='684790'>to</span> <span m='684880'>pay</span>
  <span m='685030'>this</span> <span m='685190'>n</span> <span m='685500'>poly</span>
  <span m='685720'>log</span> <span m='685960'>n</span> <span m='686740'>cost.</span>
  <span m='687580'>So</span> <span m='687730'>if</span> <span m='687820'>m</span>
  <span m='688000'>is</span> <span m='689410'>a</span> <span m='689470'>bit</span>
  <span m='689650'>bigger</span> <span m='689920'>than</span> <span m='690070'>n,</span>
  <span m='690400'>then</span> <span m='690610'>this</span> <span m='690790'>dominates.</span>
  <span m='691870'>And</span> <span m='691990'>so</span> <span m='692120'>it's</span>
  <span m='692230'>log</span> <span m='692500'>n</span> <span m='692590'>per operation.</span>
  <span m='693220'>But</span> <span m='693340'>if</span> <span m='693430'>you</span>
  <span m='693490'>have</span> <span m='693580'>a</span> <span m='693640'>sparse</span>
  <span m='693940'>graph,</span> <span m='694840'>it's</span> <span m='694960'>still</span>
  <span m='695230'>poly</span> <span m='695545'>log</span> <span m='695860'>per</span>
  <span m='696070'>operation.</span> </p><p><span m='697540'>So</span> <span m='698200'>decremental,</span>
  <span m='698740'>we</span> <span m='698860'>can</span> <span m='699010'>kind</span>
  <span m='699280'>of</span> <span m='699370'>get</span> <span m='699760'>log</span>
  <span m='701260'>for</span> <span m='701470'>general</span> <span m='701800'>graphs.</span>
  <span m='703850'>Another</span> <span m='704050'>goal</span> <span m='704230'>you</span>
  <span m='704350'>might</span> <span m='704560'>have</span> <span m='704860'>is</span>
  <span m='704980'>what</span> <span m='705130'>if</span> <span m='705280'>I</span>
  <span m='705340'>wanted</span> <span m='705610'>to</span> <span m='705910'>get</span>
  <span m='706150'>worse-case</span> <span m='706660'>bounds?</span> <span m='707110'>Everything</span>
  <span m='707530'>I've</span> <span m='707620'>said</span> <span m='707860'>so</span>
  <span m='708010'>far</span> <span m='708280'>is</span> <span m='708400'>amortized.</span>
  </p><p><span m='709630'>If you</span> <span m='709780'>want</span> <span m='709930'>to</span>
  <span m='709990'>get</span> <span m='710110'>worse</span> <span m='710320'>case,</span>
  <span m='710680'>not</span> <span m='710920'>much</span> <span m='711130'>is</span>
  <span m='711250'>known.</span> <span m='711910'>Big</span> <span m='712090'>open</span>
  <span m='712330'>question</span> <span m='713500'>is,</span> <span m='715040'>can</span>
  <span m='715210'>I</span> <span m='715300'>get</span> <span m='716610'>a</span>
  <span m='716920'>poly</span> <span m='717400'>log</span> <span m='718510'>updating</span>
  <span m='718960'>query.</span> <span m='725500'>So</span> <span m='725670'>it was</span>
  <span m='725750'>actually</span> <span m='726010'>a</span> <span m='726040'>pretty</span>
  <span m='726310'>big</span> <span m='726610'>breakthrough</span> <span m='727270'>to</span>
  <span m='727450'>get</span> <span m='727720'>poly</span> <span m='728020'>log</span>
  <span m='728320'>whatsoever.</span> </p><p><span m='729410'>This</span> <span m='729490'>first</span>
  <span m='729730'>result</span> <span m='730840'>is</span> <span m='731140'>from</span>
  <span m='731580'>2001</span> <span m='732160'>or</span> <span m='732250'>so,</span>
  <span m='733510'>after</span> <span m='733840'>people</span> <span m='734090'>have</span>
  <span m='734170'>worked</span> <span m='734410'>on</span> <span m='734500'>dynamic</span>
  <span m='734785'>graphs</span> <span m='735070'>for</span> <span m='735790'>probably</span>
  <span m='736060'>a</span> <span m='736090'>decade.</span> <span m='736940'>So</span>
  <span m='736990'>it</span> <span m='737050'>took</span> <span m='737230'>quite</span>
  <span m='737440'>a</span> <span m='737500'>while</span> <span m='737680'>to</span>
  <span m='737770'>find</span> <span m='738100'>this</span> <span m='738390'>any</span>
  <span m='738640'>kind</span> <span m='738790'>of</span> <span m='738850'>poly log.</span>
  <span m='739860'>That</span> <span m='740020'>still</span> <span m='740260'>hasn't</span>
  <span m='740530'>been</span> <span m='740860'>made</span> <span m='741100'>worse</span>
  <span m='741310'>case.</span> <span m='742030'>So</span> <span m='742210'>the</span>
  <span m='742330'>best</span> <span m='742630'>results</span> <span m='744040'>are</span>
  <span m='745780'>state</span> <span m='746020'>of</span> <span m='746080'>the</span>
  <span m='746200'>art</span> <span m='746350'>at</span> <span m='746440'>the</span>
  <span m='746530'>time,</span> <span m='746860'>before</span> <span m='747160'>the</span>
  <span m='747280'>poly log</span> <span m='747760'>came</span> <span m='748000'>out,</span>
  <span m='748570'>which</span> <span m='748840'>is</span> <span m='749770'>square</span>
  <span m='750060'>root</span> <span m='750220'>of</span> <span m='750310'>n</span>
  <span m='750430'>update,</span> <span m='751960'>constant</span> <span m='752440'>query.</span>
  </p><p><span m='760806'>There's</span> <span m='761200'>one</span> <span m='761410'>other</span>
  <span m='761620'>result</span> <span m='761950'>for</span> <span m='762070'>worse</span>
  <span m='762280'>case,</span> <span m='762620'>which</span> <span m='762920'>is</span>
  <span m='763120'>if</span> <span m='763300'>you</span> <span m='763450'>want</span>
  <span m='763660'>to</span> <span m='763750'>do</span> <span m='763990'>an</span>
  <span m='764080'>incremental</span> <span m='764800'>solution,</span> <span m='765340'>so</span>
  <span m='765430'>you're</span> <span m='765520'>just</span> <span m='765760'>inserting</span>
  <span m='766150'>edges.</span> <span m='767260'>Then</span> <span m='768900'>there's
  a</span> <span m='769210'>bound.</span> <span m='769640'>It's</span> <span m='769840'>actually</span>
  <span m='770110'>a</span> <span m='770140'>whole</span> <span m='770320'>trade</span>
  <span m='770590'>off</span> <span m='770860'>between</span> <span m='771160'>updates</span>
  <span m='771490'>and</span> <span m='771610'>queries.</span> <span m='773950'>If</span>
  <span m='774100'>you</span> <span m='774220'>have</span> <span m='775420'>updates</span>
  <span m='775780'>to</span> <span m='775870'>take</span> <span m='776080'>order</span>
  <span m='776290'>x</span> <span m='776590'>time,</span> <span m='777430'>then</span>
  <span m='777580'>you</span> <span m='777700'>get</span> <span m='778060'>queries</span>
  <span m='778660'>that</span> <span m='778780'>take</span> <span m='779540'>log</span>
  <span m='780020'>n</span> <span m='780300'>over</span> <span m='780880'>log</span>
  <span m='781210'>x</span> <span m='781480'>time.</span> </p><p><span m='791150'>So</span>
  <span m='791570'>log</span> <span m='791840'>base</span> <span m='792080'>x</span>
  <span m='792320'>of</span> <span m='792470'>n.</span> <span m='793490'>And</span>
  <span m='793700'>that's</span> <span m='793940'>optimal.</span> <span m='794450'>These</span>
  <span m='794660'>are</span> <span m='794820'>theta.</span> <span m='795140'>There's</span>
  <span m='795350'>matching</span> <span m='795680'>lower</span> <span m='795810'>bounds.</span>
  <span m='798080'>So</span> <span m='798560'>this</span> <span m='799310'>is</span>
  <span m='799400'>again,</span> <span m='799700'>really</span> <span m='800450'>union</span>
  <span m='800780'>find.</span> <span m='801770'>And</span> <span m='801920'>so</span>
  <span m='802370'>union</span> <span m='802640'>find</span> <span m='802850'>has</span>
  <span m='803000'>been</span> <span m='803180'>well</span> <span m='803330'>studied,</span>
  <span m='804420'>even</span> <span m='804680'>in</span> <span m='806120'>the</span>
  <span m='806560'>worse-case</span> <span m='806900'>setting.</span> <span m='807740'>Can't</span>
  <span m='808040'>do</span> <span m='808220'>as</span> <span m='808310'>well</span>
  <span m='808490'>as</span> <span m='808610'>alpha,</span> <span m='808960'>basically.</span>
  </p><p><span m='811570'>OK.</span> <span m='812810'>And</span> <span m='812900'>then</span>
  <span m='813050'>finally,</span> <span m='813780'>I</span> <span m='813880'>want</span>
  <span m='813980'>to</span> <span m='814040'>talk</span> <span m='814280'>about</span>
  <span m='814730'>lower</span> <span m='815000'>bounds.</span> <span m='823260'>So</span>
  <span m='823440'>there</span> <span m='823620'>are</span> <span m='823650'>two</span>
  <span m='824280'>complementary</span> <span m='824970'>results.</span> <span m='827380'>But</span>
  <span m='827730'>maybe</span> <span m='828000'>first</span> <span m='828180'>I'll</span>
  <span m='828300'>summarize</span> <span m='828810'>by</span> <span m='828930'>saying</span>
  <span m='829650'>you</span> <span m='829800'>need</span> <span m='830270'>omega</span>
  <span m='830700'>log</span> <span m='831030'>n</span> <span m='832830'>update</span>
  <span m='833340'>or</span> <span m='833580'>query.</span> <span m='834300'>One</span>
  <span m='834480'>of</span> <span m='834570'>them</span> <span m='834720'>has</span>
  <span m='834930'>to</span> <span m='835020'>be</span> <span m='835290'>at</span>
  <span m='835410'>least</span> <span m='836610'>log</span> <span m='837120'>n</span>
  <span m='838320'>to</span> <span m='838470'>do</span> <span m='838770'>dynamic</span>
  <span m='839130'>connectivity.</span> </p><p><span m='843690'>As</span> <span m='843840'>you</span>
  <span m='843930'>see,</span> <span m='844230'>queries</span> <span m='844650'>can</span>
  <span m='844860'>be</span> <span m='844980'>sublogarithmic.</span> <span m='845740'>We</span>
  <span m='845820'>don't</span> <span m='846000'>know</span> <span m='846120'>how</span>
  <span m='846210'>to</span> <span m='846300'>make</span> <span m='846480'>updates</span>
  <span m='846780'>sublogarithmic</span> <span m='848100'>and</span> <span m='848250'>get</span>
  <span m='848430'>any</span> <span m='848700'>reasonable</span> <span m='849120'>query</span>
  <span m='849390'>time.</span> <span m='851610'>But</span> <span m='853140'>one</span>
  <span m='853350'>of</span> <span m='853440'>them</span> <span m='853650'>has</span>
  <span m='853830'>to</span> <span m='853950'>be</span> <span m='854010'>at</span>
  <span m='854070'>least</span> <span m='854280'>log.</span> <span m='855240'>And</span>
  <span m='855420'>here's</span> <span m='855750'>the</span> <span m='855900'>specific</span>
  <span m='856440'>theorems</span> <span m='856770'>that</span> <span m='856920'>imply</span>
  <span m='857250'>that.</span> </p><p><span m='873310'>That's</span> <span m='873640'>actually</span>
  <span m='874210'>similar</span> <span m='874660'>to</span> <span m='874810'>this</span>
  <span m='875800'>result,</span> <span m='876280'>but not</span> <span m='876490'>quite</span>
  <span m='876730'>the</span> <span m='876850'>same.</span> <span m='878550'>Because</span>
  <span m='878970'>there's a</span> <span m='879070'>log</span> <span m='879430'>on</span>
  <span m='879550'>the</span> <span m='879610'>left-hand</span> <span m='879970'>side.</span>
  <span m='886870'>And</span> <span m='887080'>these</span> <span m='887260'>results</span>
  <span m='887870'>hold</span> <span m='888370'>for</span> <span m='888580'>amortized</span>
  <span m='890140'>solutions.</span> <span m='891670'>Whoops.</span> <span m='892750'>Key</span>
  <span m='893230'>word's</span> <span m='893560'>missing</span> <span m='893860'>here.</span>
  <span m='894760'>This</span> <span m='894910'>is</span> <span m='895030'>an</span>
  <span m='895120'>update</span> <span m='895510'>bound.</span> <span m='896140'>And</span>
  <span m='896320'>this</span> <span m='896500'>is</span> <span m='896650'>a</span>
  <span m='896710'>query</span> <span m='897070'>bound.</span> </p><p><span m='902340'>So</span>
  <span m='902520'>these</span> <span m='902730'>are</span> <span m='903090'>basically</span>
  <span m='903510'>symmetric</span> <span m='904320'>results.</span> <span m='904920'>Says</span>
  <span m='905250'>if</span> <span m='905400'>you</span> <span m='905520'>have</span>
  <span m='905880'>super</span> <span m='906240'>logarithmic</span> <span m='906840'>update,</span>
  <span m='907980'>so</span> <span m='908170'>you</span> <span m='908250'>have</span>
  <span m='908340'>some</span> <span m='908800'>x</span> <span m='909510'>bigger</span>
  <span m='909750'>than</span> <span m='909900'>1</span> <span m='910620'>times</span>
  <span m='910980'>log</span> <span m='911250'>n</span> <span m='911400'>update,</span>
  <span m='912120'>then</span> <span m='912330'>you</span> <span m='912540'>get</span>
  <span m='912840'>log</span> <span m='913090'>n</span> <span m='913200'>over</span>
  <span m='913450'>log x</span> <span m='913820'>query.</span> <span m='914940'>That's</span>
  <span m='915150'>a</span> <span m='915210'>lower</span> <span m='915450'>bound.</span>
  </p><p><span m='916050'>If</span> <span m='916230'>you</span> <span m='916320'>have</span>
  <span m='916850'>a</span> <span m='917140'>super</span> <span m='917430'>logarithmic</span>
  <span m='917970'>query,</span> <span m='918450'>so</span> <span m='918630'>let's</span>
  <span m='918750'>say</span> <span m='918870'>it's</span> <span m='919020'>x</span>
  <span m='919230'>times</span> <span m='919500'>larger</span> <span m='919800'>than</span>
  <span m='919940'>log</span> <span m='920160'>n,</span> <span m='920790'>then</span>
  <span m='921030'>you</span> <span m='922290'>need</span> <span m='922500'>at</span>
  <span m='922590'>least</span> <span m='922950'>a</span> <span m='923010'>log</span>
  <span m='923340'>n</span> <span m='923460'>over</span> <span m='923670'>log</span>
  <span m='923970'>x</span> <span m='924840'>update</span> <span m='925170'>time.</span>
  <span m='928080'>So</span> <span m='928320'>this</span> <span m='928500'>result</span>
  <span m='929130'>is</span> <span m='929470'>the</span> <span m='929670'>one</span>
  <span m='930090'>of</span> <span m='930360'>relevance.</span> <span m='930870'>Because</span>
  <span m='931140'>we</span> <span m='931230'>don't</span> <span m='931410'>know</span>
  <span m='931650'>any</span> <span m='933720'>sublogarithmic</span> <span m='934560'>updates.</span>
  <span m='935630'>But</span> <span m='935790'>we</span> <span m='935880'>do</span>
  <span m='936000'>know</span> <span m='936120'>sublogarithmic</span> <span m='936750'>queries.</span>
  <span m='937240'>So</span> <span m='937290'>this</span> <span m='937500'>is</span>
  <span m='937790'>the</span> <span m='937860'>regime</span> <span m='938340'>that</span>
  <span m='939120'>we</span> <span m='939270'>have,</span> <span m='939720'>essentially,</span>
  <span m='940200'>matching</span> <span m='940590'>upper</span> <span m='940800'>bounds.</span>
  </p><p><span m='942510'>Let</span> <span m='942690'>me</span> <span m='943260'>show</span>
  <span m='943650'>you.</span> <span m='945450'>This</span> <span m='945750'>result,</span>
  <span m='947460'>this</span> <span m='947730'>result,</span> <span m='949320'>and</span>
  <span m='950160'>this</span> <span m='950340'>result,</span> <span m='950670'>even,</span>
  <span m='951890'>are,</span> <span m='952260'>in</span> <span m='952350'>some</span>
  <span m='952530'>sense,</span> <span m='952800'>tight</span> <span m='953160'>against</span>
  <span m='953520'>this</span> <span m='953700'>trade-off,</span> <span m='954220'>this</span>
  <span m='954360'>update</span> <span m='954690'>query</span> <span m='955020'>trade-off.</span>
  <span m='956850'>So</span> <span m='957060'>this</span> <span m='957540'>update</span>
  <span m='957990'>is</span> <span m='958230'>log</span> <span m='958560'>n</span>
  <span m='958740'>times</span> <span m='959130'>log</span> <span m='959460'>n.</span>
  <span m='959610'>So</span> <span m='959760'>x is</span> <span m='960060'>log</span>
  <span m='960390'>n.</span> <span m='961260'>And</span> <span m='961410'>over</span>
  <span m='961590'>here</span> <span m='961860'>we</span> <span m='961950'>get</span>
  <span m='962190'>log</span> <span m='963300'>n</span> <span m='963570'>over</span>
  <span m='963810'>log</span> <span m='964200'>log</span> <span m='964500'>n.</span>
  <span m='965550'>So</span> <span m='965790'>that's</span> <span m='966180'>tight</span>
  <span m='966450'>against</span> <span m='966750'>that.</span> </p><p><span m='967590'>Here,</span>
  <span m='968070'>also,</span> <span m='968490'>we</span> <span m='968610'>have</span>
  <span m='969270'>here</span> <span m='969510'>x</span> <span m='969810'>is</span>
  <span m='970050'>log</span> <span m='970290'>log</span> <span m='970470'>n</span>
  <span m='970620'>cubed.</span> <span m='971570'>So</span> <span m='971660'>you</span>
  <span m='971720'>take</span> <span m='971910'>a</span> <span m='971940'>log</span>
  <span m='972390'>of</span> <span m='972720'>log</span> <span m='972960'>log</span>
  <span m='973170'>n</span> <span m='973290'>cubed,</span> <span m='973590'>you</span>
  <span m='973680'>get</span> <span m='973830'>log</span> <span m='974100'>log</span>
  <span m='974370'>log</span> <span m='974730'>n.</span> <span m='975100'>So</span>
  <span m='975270'>that's</span> <span m='975480'>why</span> <span m='975660'>there's</span>
  <span m='975810'>a</span> <span m='975870'>log</span> <span m='976110'>log</span>
  <span m='976320'>log</span> <span m='976560'>n</span> <span m='977280'>down</span>
  <span m='977520'>here.</span> <span m='977950'>That's</span> <span m='978090'>the</span>
  <span m='978210'>best</span> <span m='978540'>you</span> <span m='978630'>could</span>
  <span m='978750'>hope</span> <span m='978900'>for,</span> <span m='979680'>given</span>
  <span m='980520'>that</span> <span m='980670'>update</span> <span m='980940'>time,</span>
  <span m='981630'>that's</span> <span m='981810'>the</span> <span m='981900'>best</span>
  <span m='982170'>query</span> <span m='982440'>time</span> <span m='982680'>you</span>
  <span m='982800'>can</span> <span m='982920'>get.</span> </p><p><span m='983160'>Same</span>
  <span m='983490'>over</span> <span m='983670'>here.</span> <span m='983880'>Given</span>
  <span m='984180'>an</span> <span m='984330'>update</span> <span m='984450'>time</span>
  <span m='984720'>of</span> <span m='984840'>root</span> <span m='985080'>n,</span>
  <span m='987660'>well,</span> <span m='987960'>of</span> <span m='988020'>course,</span>
  <span m='988260'>the best</span> <span m='988440'>you</span> <span m='988530'>can</span>
  <span m='988750'>hope for</span> <span m='988950'>is</span> <span m='989220'>constant</span>
  <span m='989490'>query.</span> <span m='989760'>But</span> <span m='989940'>indeed,</span>
  <span m='990450'>it</span> <span m='990600'>works</span> <span m='990870'>out.</span>
  <span m='990960'>As</span> <span m='991350'>you're</span> <span m='991590'>taking</span>
  <span m='991950'>log</span> <span m='992190'>n</span> <span m='992310'>divided</span>
  <span m='992480'>it</span> <span m='992580'>by</span> <span m='992700'>1/2</span>
  <span m='992970'>log</span> <span m='993180'>n,</span> <span m='993330'>you</span>
  <span m='993450'>get</span> <span m='993570'>constant.</span> </p><p><span m='995430'>So</span>
  <span m='996620'>these</span> <span m='996810'>results,</span> <span m='998070'>they</span>
  <span m='998250'>may</span> <span m='998430'>sound</span> <span m='999600'>suboptimal.</span>
  <span m='1000260'>But</span> <span m='1000440'>a</span> <span m='1000500'>certain</span>
  <span m='1000830'>sense,</span> <span m='1001090'>they're</span> <span m='1001190'>optimal.</span>
  <span m='1002030'>Of</span> <span m='1002150'>course,</span> <span m='1002940'>these</span>
  <span m='1003020'>are</span> <span m='1003080'>just</span> <span m='1003350'>single</span>
  <span m='1003710'>points</span> <span m='1004040'>on</span> <span m='1004130'>the</span>
  <span m='1004220'>trade-off</span> <span m='1004610'>curve.</span> <span m='1004880'>We</span>
  <span m='1004970'>still</span> <span m='1005240'>really</span> <span m='1005510'>care</span>
  <span m='1005720'>about</span> <span m='1005930'>the</span> <span m='1006050'>situation</span>
  <span m='1006590'>of--</span> <span m='1008535'>where's</span> <span m='1008950'>the</span>
  <span m='1009160'>open</span> <span m='1009370'>problem</span> <span m='1009620'>here--</span>
  <span m='1009800'>log</span> <span m='1010130'>n</span> <span m='1010280'>update</span>
  <span m='1010730'>and</span> <span m='1010940'>query,</span> <span m='1011390'>that</span>
  <span m='1011540'>would</span> <span m='1012260'>still</span> <span m='1012530'>be</span>
  <span m='1012950'>ideal.</span> </p><p><span m='1014630'>But</span> <span m='1015020'>these</span>
  <span m='1015200'>are</span> <span m='1015290'>not</span> <span m='1015500'>as</span>
  <span m='1015590'>bad</span> <span m='1015800'>as</span> <span m='1015890'>they</span>
  <span m='1016010'>look,</span> <span m='1016310'>is</span> <span m='1016550'>the</span>
  <span m='1016640'>point.</span> <span m='1017450'>Of</span> <span m='1017600'>course,</span>
  <span m='1017900'>it'd</span> <span m='1017990'>be</span> <span m='1018110'>better</span>
  <span m='1018440'>if</span> <span m='1018530'>this</span> <span m='1018770'>wasn't</span>
  <span m='1018990'>a</span> <span m='1019070'>3,</span> <span m='1019370'>it</span>
  <span m='1019430'>was</span> <span m='1019610'>only</span> <span m='1019820'>a</span>
  <span m='1019900'>1.</span> <span m='1020740'>But</span> <span m='1021940'>they're</span>
  <span m='1022150'>still,</span> <span m='1022530'>in a</span> <span m='1022630'>certain</span>
  <span m='1022970'>sense,</span> <span m='1023210'>tight</span> <span m='1023450'>against</span>
  <span m='1023790'>this,</span> <span m='1024980'>the</span> <span m='1025099'>query</span>
  <span m='1025339'>bound</span> <span m='1025609'>that</span> <span m='1025730'>you</span>
  <span m='1025849'>get.</span> </p><p><span m='1027540'>Another</span> <span m='1027800'>open</span>
  <span m='1028040'>problem</span> <span m='1028460'>here</span> <span m='1028619'>is</span>
  <span m='1029000'>whether</span> <span m='1029240'>this,</span> <span m='1030050'>the</span>
  <span m='1030140'>reverse</span> <span m='1030470'>situation,</span> <span m='1031099'>is</span>
  <span m='1031250'>ever</span> <span m='1031470'>relevant.</span> <span m='1033230'>Can</span>
  <span m='1033470'>you</span> <span m='1033619'>have</span> <span m='1035780'>a</span>
  <span m='1035810'>sublogarithmic</span> <span m='1036710'>update</span> <span m='1037040'>time</span>
  <span m='1037520'>and</span> <span m='1037670'>get</span> <span m='1037910'>any</span>
  <span m='1038599'>poly</span> <span m='1038950'>log</span> <span m='1039250'>query</span>
  <span m='1039500'>time?</span> <span m='1040950'>So</span> <span m='1040970'>this
  is</span> <span m='1041180'>another</span> <span m='1041480'>open</span> <span m='1041780'>problem.</span>
  <span m='1046550'>Little</span> <span m='1046970'>o of</span> <span m='1047240'>log</span>
  <span m='1047569'>n</span> <span m='1047720'>query.</span> <span m='1049240'>Sorry,</span>
  <span m='1049880'>little</span> <span m='1050150'>o</span> <span m='1050450'>of</span>
  <span m='1050660'>log n</span> <span m='1050900'>update,</span> <span m='1052520'>and</span>
  <span m='1052910'>let's</span> <span m='1053060'>say</span> <span m='1053230'>poly
  log</span> <span m='1053910'>query.</span> </p><p><span m='1058890'>The</span> <span
  m='1059010'>lower</span> <span m='1059280'>bound</span> <span m='1059550'>kind</span>
  <span m='1059700'>of</span> <span m='1059760'>predicts</span> <span m='1060120'>that</span>
  <span m='1060270'>something</span> <span m='1060570'>like</span> <span m='1060720'>this</span>
  <span m='1060900'>ought</span> <span m='1061050'>to</span> <span m='1061170'>exist.</span>
  <span m='1061720'>But</span> <span m='1062130'>it</span> <span m='1062270'>may</span>
  <span m='1062380'>be</span> <span m='1062640'>it's</span> <span m='1062730'>just</span>
  <span m='1062910'>impossible.</span> <span m='1063210'>And</span> <span m='1063510'>there's</span>
  <span m='1063690'>a</span> <span m='1063750'>different</span> <span m='1065130'>lower</span>
  <span m='1065370'>bound</span> <span m='1065610'>that</span> <span m='1065700'>makes</span>
  <span m='1065910'>it</span> <span m='1065970'>impossible.</span> </p><p><span m='1072680'>Some</span>
  <span m='1074470'>theta</span> <span m='1075000'>I</span> <span m='1075160'>wanted</span>
  <span m='1075370'>to</span> <span m='1075620'>add</span> <span m='1076020'>here.</span>
  <span m='1082600'>OK.</span> <span m='1084350'>Another</span> <span m='1084680'>fun</span>
  <span m='1084920'>thing</span> <span m='1085100'>about</span> <span m='1085310'>this</span>
  <span m='1085730'>lower</span> <span m='1086000'>bound,</span> <span m='1086390'>is</span>
  <span m='1086610'>that it</span> <span m='1086700'>holds</span> <span m='1087110'>even</span>
  <span m='1087380'>if</span> <span m='1087500'>your</span> <span m='1087590'>graphs</span>
  <span m='1088010'>are</span> <span m='1088190'>paths.</span> <span m='1093320'>So</span>
  <span m='1093500'>in</span> <span m='1093590'>particular,</span> <span m='1094160'>that</span>
  <span m='1094340'>tells</span> <span m='1094670'>us</span> <span m='1094790'>that</span>
  <span m='1094940'>this</span> <span m='1095390'>dynamic</span> <span m='1095870'>tree</span>
  <span m='1096200'>result</span> <span m='1096840'>that</span> <span m='1096950'>we</span>
  <span m='1097190'>covered</span> <span m='1097460'>last</span> <span m='1097730'>class,</span>
  <span m='1097980'>say,</span> <span m='1098720'>you</span> <span m='1098900'>need</span>
  <span m='1099470'>log</span> <span m='1099880'>n.</span> <span m='1101570'>If</span>
  <span m='1101720'>you're</span> <span m='1101810'>going</span> <span m='1101930'>to</span>
  <span m='1101990'>do</span> <span m='1102260'>both</span> <span m='1102500'>operations</span>
  <span m='1103040'>and</span> <span m='1103130'>log</span> <span m='1103470'>n,</span>
  <span m='1103760'>that's</span> <span m='1104000'>optimal.</span> </p><p><span m='1106730'>Even</span>
  <span m='1107030'>if</span> <span m='1107120'>your</span> <span m='1107540'>trees</span>
  <span m='1107810'>are</span> <span m='1107920'>paths,</span> <span m='1108355'>which</span>
  <span m='1108790'>is</span> <span m='1109100'>like</span> <span m='1109280'>the</span>
  <span m='1109400'>really</span> <span m='1110100'>easy</span> <span m='1110330'>case.</span>
  <span m='1110570'>And</span> <span m='1110660'>we're</span> <span m='1110750'>going</span>
  <span m='1110880'>to</span> <span m='1110960'>prove</span> <span m='1111350'>this</span>
  <span m='1111530'>theorem</span> <span m='1111830'>next</span> <span m='1112040'>class.</span>
  <span m='1113190'>So</span> <span m='1113360'>if</span> <span m='1113540'>you</span>
  <span m='1113630'>want,</span> <span m='1113960'>that'll</span> <span m='1114160'>be</span>
  <span m='1114290'>our</span> <span m='1115430'>last</span> <span m='1115640'>class,</span>
  <span m='1115970'>our</span> <span m='1116060'>last</span> <span m='1116270'>lower</span>
  <span m='1116510'>bound.</span> </p><p><span m='1118355'>That's</span> <span m='1118850'>next</span>
  <span m='1119060'>time.</span> <span m='1119540'>Tune</span> <span m='1119720'>in</span>
  <span m='1119810'>next</span> <span m='1120020'>time.</span> <span m='1120380'>But</span>
  <span m='1120560'>today</span> <span m='1120800'>we're</span> <span m='1120890'>going</span>
  <span m='1121010'>to</span> <span m='1121070'>focus</span> <span m='1121370'>on</span>
  <span m='1121490'>upper</span> <span m='1121760'>bounds,</span> <span m='1122180'>namely</span>
  <span m='1123410'>these</span> <span m='1123650'>two</span> <span m='1125300'>and</span>
  <span m='1126500'>this</span> <span m='1126710'>one.</span> <span m='1132980'>So</span>
  <span m='1134090'>let's</span> <span m='1134270'>do</span> <span m='1134430'>them.</span>
  </p><p><span m='1136532'>The</span> <span m='1137030'>first</span> <span m='1137300'>one</span>
  <span m='1137510'>is</span> <span m='1137640'>Euler-tour</span> <span m='1138100'>trees,</span>
  <span m='1138975'>which</span> <span m='1139330'>is</span> <span m='1139470'>another</span>
  <span m='1139820'>way</span> <span m='1139970'>to</span> <span m='1140150'>do</span>
  <span m='1140420'>the</span> <span m='1140570'>log</span> <span m='1140790'>n</span>
  <span m='1142820'>bound.</span> <span m='1143180'>It's</span> <span m='1143300'>something</span>
  <span m='1143690'>we</span> <span m='1143780'>need.</span> <span m='1145430'>We'll</span>
  <span m='1145550'>need</span> <span m='1145760'>it</span> <span m='1145880'>for</span>
  <span m='1146030'>doing</span> <span m='1146270'>the</span> <span m='1146360'>log</span>
  <span m='1146620'>squared</span> <span m='1147170'>solution,</span> <span m='1149020'>for</span>
  <span m='1149270'>a</span> <span m='1149300'>reason</span> <span m='1149610'>we'll</span>
  <span m='1149720'>see</span> <span m='1149960'>in</span> <span m='1150050'>a</span>
  <span m='1150080'>moment.</span> </p><p><span m='1163730'>So</span> <span m='1163930'>Euler-tour</span>
  <span m='1164160'>tress</span> <span m='1164450'>go</span> <span m='1164570'>back</span>
  <span m='1164750'>to</span> <span m='1164870'>1995,</span> <span m='1165680'>Henzinger</span>
  <span m='1166060'>and</span> <span m='1166250'>King.</span> <span m='1167680'>They're</span>
  <span m='1168100'>simpler</span> <span m='1168470'>dynamic</span> <span m='1168900'>trees,</span>
  <span m='1169650'>simpler</span> <span m='1170010'>than</span> <span m='1170140'>link</span>
  <span m='1170320'>cut,</span> <span m='1171530'>even</span> <span m='1171770'>though</span>
  <span m='1171900'>they're</span> <span m='1172880'>newer.</span> <span m='1174560'>And</span>
  <span m='1177290'>the</span> <span m='1177530'>key</span> <span m='1177800'>difference</span>
  <span m='1178370'>compared</span> <span m='1178730'>to</span> <span m='1178790'>link</span>
  <span m='1179000'>cut</span> <span m='1179110'>trees</span> <span m='1179630'>is</span>
  <span m='1179840'>that</span> <span m='1180020'>they</span> <span m='1181040'>let</span>
  <span m='1181220'>you</span> <span m='1181370'>do</span> <span m='1181520'>stuff</span>
  <span m='1181790'>with</span> <span m='1181970'>subtrees</span> <span m='1182630'>of</span>
  <span m='1182750'>the</span> <span m='1182870'>tree</span> <span m='1183890'>instead</span>
  <span m='1184250'>of</span> <span m='1184370'>paths</span> <span m='1185000'>of</span>
  <span m='1185090'>the</span> <span m='1185210'>tree.</span> </p><p><span m='1185630'>Link</span>
  <span m='1185810'>cut</span> <span m='1186020'>trees</span> <span m='1186260'>are</span>
  <span m='1186320'>great.</span> <span m='1186560'>We</span> <span m='1186680'>could</span>
  <span m='1186890'>compute</span> <span m='1187670'>the</span> <span m='1187760'>min</span>
  <span m='1187970'>or</span> <span m='1188090'>the</span> <span m='1188180'>max</span>
  <span m='1188540'>or</span> <span m='1188600'>the</span> <span m='1188720'>sum</span>
  <span m='1189050'>of</span> <span m='1189260'>a</span> <span m='1189350'>bunch</span>
  <span m='1189650'>of</span> <span m='1189740'>weights</span> <span m='1190070'>on</span>
  <span m='1190250'>any</span> <span m='1190460'>path</span> <span m='1190910'>that</span>
  <span m='1191030'>we</span> <span m='1191120'>cared</span> <span m='1191360'>about.</span>
  <span m='1192350'>But</span> <span m='1192590'>for</span> <span m='1193100'>various</span>
  <span m='1193430'>reasons,</span> <span m='1194510'>we</span> <span m='1194660'>want</span>
  <span m='1194900'>to</span> <span m='1194990'>do</span> <span m='1195140'>the</span>
  <span m='1195230'>same</span> <span m='1195500'>thing</span> <span m='1195680'>on</span>
  <span m='1195800'>subtrees.</span> <span m='1196410'>And</span> <span m='1196510'>this</span>
  <span m='1196550'>turns</span> <span m='1196790'>out</span> <span m='1196850'>to</span>
  <span m='1196970'>be</span> <span m='1197090'>easier.</span> </p><p><span m='1198890'>So</span>
  <span m='1199400'>what</span> <span m='1199640'>do</span> <span m='1199820'>we</span>
  <span m='1199940'>do</span> <span m='1200645'>with</span> <span m='1200960'>Euler-tour</span>
  <span m='1201420'>trees?</span> <span m='1202640'>We</span> <span m='1202880'>take</span>
  <span m='1203180'>an</span> <span m='1203450'>Euler-tour.</span> <span m='1203930'>Remember</span>
  <span m='1204230'>Euler-tour</span> <span m='1205010'>from--</span> <span m='1205295'>I</span>
  <span m='1205580'>can</span> <span m='1205960'>never</span> <span m='1206200'>remember--</span>
  <span m='1207080'>lecture</span> <span m='1207470'>15.</span> </p><p><span m='1207845'>[LAUGHS]</span>
  </p><p><span m='1210170'>I</span> <span m='1210230'>don't</span> <span m='1210380'>quite</span>
  <span m='1210590'>remember</span> <span m='1210890'>what</span> <span m='1211040'>that</span>
  <span m='1211550'>lecture</span> <span m='1211850'>was.</span> <span m='1213170'>When</span>
  <span m='1213230'>did</span> <span m='1213320'>we</span> <span m='1213470'>do</span>
  <span m='1213700'>Euler-tours?</span> <span m='1218164'>Well,</span> <span m='1218620'>doesn't</span>
  <span m='1218770'>matter.</span> <span m='1219180'>You</span> <span m='1219220'>remember</span>
  <span m='1219490'>the</span> <span m='1219580'>idea</span> <span m='1219830'>of</span>
  <span m='1219890'>an</span> <span m='1220090'>Euler-tour.</span> <span m='1220210'>It
  was</span> <span m='1220570'>just</span> <span m='1220720'>walk</span> <span m='1221020'>around</span>
  <span m='1221260'>the</span> <span m='1221320'>tree,</span> <span m='1221550'>do</span>
  <span m='1221680'>a</span> <span m='1221740'>depth</span> <span m='1221950'>for</span>
  <span m='1222190'>search,</span> <span m='1223710'>and</span> <span m='1224260'>keep</span>
  <span m='1224530'>track</span> <span m='1224830'>of</span> <span m='1224950'>every</span>
  <span m='1225130'>time</span> <span m='1225370'>you</span> <span m='1225460'>visit</span>
  <span m='1225870'>a</span> <span m='1226270'>node.</span> </p><p><span m='1227551'>So</span>
  <span m='1227980'>you</span> <span m='1228220'>visit</span> <span m='1228520'>some</span>
  <span m='1228730'>nodes</span> <span m='1229270'>multiple</span> <span m='1229630'>times.</span>
  <span m='1229990'>In</span> <span m='1230050'>general,</span> <span m='1230980'>the</span>
  <span m='1231070'>degree</span> <span m='1231370'>of</span> <span m='1231460'>the</span>
  <span m='1231550'>node</span> <span m='1231820'>is</span> <span m='1231910'>the</span>
  <span m='1231970'>number</span> <span m='1232210'>of</span> <span m='1232300'>times</span>
  <span m='1232660'>you</span> <span m='1232720'>visit</span> <span m='1232990'>it.</span>
  <span m='1234190'>Every</span> <span m='1234460'>edge</span> <span m='1234760'>gets</span>
  <span m='1234970'>visited</span> <span m='1235390'>exactly</span> <span m='1235870'>twice.</span>
  </p><p><span m='1237220'>So</span> <span m='1237940'>it's</span> <span m='1238150'>the</span>
  <span m='1238210'>linear</span> <span m='1238540'>number</span> <span m='1238780'>of</span>
  <span m='1238850'>visits</span> <span m='1239140'>total.</span> <span m='1242300'>I</span>
  <span m='1242390'>just</span> <span m='1242570'>want</span> <span m='1242750'>to</span>
  <span m='1242840'>take</span> <span m='1243110'>that</span> <span m='1245120'>linear</span>
  <span m='1245660'>order</span> <span m='1246450'>of</span> <span m='1246620'>visits,</span>
  <span m='1248360'>pull</span> <span m='1248660'>it</span> <span m='1248750'>out</span>
  <span m='1248930'>straight,</span> <span m='1250010'>store</span> <span m='1250400'>that</span>
  <span m='1250760'>in</span> <span m='1250910'>a</span> <span m='1250970'>balanced</span>
  <span m='1251300'>binary</span> <span m='1251570'>search</span> <span m='1251840'>tree.</span>
  <span m='1252710'>That's</span> <span m='1253020'>Euler-tour</span> <span m='1253320'>trees.</span>
  <span m='1253590'>They're</span> <span m='1253690'>very</span> <span m='1254150'>simple.</span>
  <span m='1259760'>Store</span> <span m='1260690'>the</span> <span m='1261050'>node</span>
  <span m='1261560'>visits</span> <span m='1267170'>by</span> <span m='1267440'>the</span>
  <span m='1267560'>Euler-tour,</span> <span m='1270915'>and</span> <span m='1271410'>a</span>
  <span m='1271710'>balanced</span> <span m='1272190'>binary</span> <span m='1272520'>search</span>
  <span m='1272820'>tree.</span> </p><p><span m='1277940'>What's</span> <span m='1278110'>the</span>
  <span m='1278260'>order?</span> <span m='1278650'>We're</span> <span m='1278770'>storing</span>
  <span m='1279040'>them</span> <span m='1279160'>in</span> <span m='1279340'>order</span>
  <span m='1279790'>by</span> <span m='1281110'>the</span> <span m='1281290'>order</span>
  <span m='1281590'>that</span> <span m='1282630'>the</span> <span m='1282810'>Euler-tour</span>
  <span m='1283200'>visits,</span> <span m='1284350'>the</span> <span m='1284610'>visits.</span>
  <span m='1285800'>So</span> <span m='1286450'>this</span> <span m='1286600'>will</span>
  <span m='1286690'>be</span> <span m='1286810'>the</span> <span m='1286900'>left-most,</span>
  <span m='1287530'>the</span> <span m='1287680'>min</span> <span m='1287890'>in</span>
  <span m='1287980'>the</span> <span m='1288070'>tree.</span> <span m='1288370'>This</span>
  <span m='1288550'>will</span> <span m='1288640'>be the</span> <span m='1288820'>next</span>
  <span m='1289210'>and</span> <span m='1289330'>then</span> <span m='1289420'>next.</span>
  <span m='1289750'>So if</span> <span m='1289900'>you</span> <span m='1289960'>do</span>
  <span m='1290050'>an</span> <span m='1290120'>in-order</span> <span m='1290380'>traversal</span>
  <span m='1290500'>of</span> <span m='1290770'>the</span> <span m='1290890'>tree,</span>
  <span m='1291520'>you</span> <span m='1291610'>should</span> <span m='1291730'>get</span>
  <span m='1291850'>the</span> <span m='1291940'>visits</span> <span m='1292270'>in</span>
  <span m='1292420'>this</span> <span m='1292600'>order.</span> </p><p><span m='1294370'>This</span>
  <span m='1294550'>is,</span> <span m='1294700'>of</span> <span m='1294820'>course,</span>
  <span m='1295150'>a</span> <span m='1295300'>way</span> <span m='1295570'>to</span>
  <span m='1295870'>balance</span> <span m='1296350'>a</span> <span m='1296410'>tree,</span>
  <span m='1296650'>in</span> <span m='1296770'>some</span> <span m='1296980'>sense.</span>
  <span m='1297400'>I</span> <span m='1297520'>drew</span> <span m='1297700'>a</span>
  <span m='1297760'>balanced</span> <span m='1298120'>tree</span> <span m='1298450'>as</span>
  <span m='1298840'>the</span> <span m='1299140'>thing</span> <span m='1299350'>we're</span>
  <span m='1299440'>trying</span> <span m='1299650'>to</span> <span m='1299740'>represent.</span>
  <span m='1300190'>But</span> <span m='1300610'>again,</span> <span m='1300850'>it</span>
  <span m='1300940'>could</span> <span m='1301060'>be</span> <span m='1301210'>a</span>
  <span m='1301330'>totally</span> <span m='1301750'>unbalanced</span> <span m='1302230'>thing.</span>
  <span m='1302800'>But</span> <span m='1303070'>when</span> <span m='1303280'>you</span>
  <span m='1303340'>do</span> <span m='1303490'>an</span> <span m='1303580'>Euler-tour,</span>
  <span m='1304210'>you</span> <span m='1304390'>get</span> <span m='1305710'>order</span>
  <span m='1306010'>n</span> <span m='1306250'>visits.</span> <span m='1307300'>And</span>
  <span m='1307390'>you</span> <span m='1307480'>throw</span> <span m='1307690'>them</span>
  <span m='1307810'>into</span> <span m='1308020'>a</span> <span m='1308080'>balanced</span>
  <span m='1308360'>binary</span> <span m='1308470'>search</span> <span m='1308530'>tree,</span>
  <span m='1308915'>it's</span> <span m='1309300'>balanced,</span> <span m='1309820'>of</span>
  <span m='1309940'>course.</span> </p><p><span m='1311490'>It's</span> <span m='1311920'>a</span>
  <span m='1311980'>bit</span> <span m='1312130'>of</span> <span m='1312250'>a</span>
  <span m='1312310'>weird</span> <span m='1312580'>thing,</span> <span m='1312790'>because</span>
  <span m='1312940'>you're</span> <span m='1313060'>not</span> <span m='1313210'>really</span>
  <span m='1313510'>preserving</span> <span m='1313960'>the</span> <span m='1314080'>structure</span>
  <span m='1314530'>in</span> <span m='1315820'>an</span> <span m='1315910'>obvious</span>
  <span m='1316270'>way.</span> <span m='1316530'>But</span> <span m='1317320'>there's</span>
  <span m='1317680'>one</span> <span m='1318160'>more</span> <span m='1318310'>thing</span>
  <span m='1318520'>we</span> <span m='1318730'>store,</span> <span m='1319570'>which</span>
  <span m='1319750'>will</span> <span m='1319900'>let</span> <span m='1320050'>us</span>
  <span m='1320170'>do,</span> <span m='1320590'>essentially,</span> <span m='1320950'>whatever</span>
  <span m='1321190'>we</span> <span m='1321310'>want.</span> <span m='1322960'>Each</span>
  <span m='1323200'>node</span> <span m='1325770'>stores</span> <span m='1328390'>two</span>
  <span m='1328570'>pointers</span> <span m='1328830'>into</span> <span m='1329230'>this</span>
  <span m='1330040'>structure</span> <span m='1332730'>to</span> <span m='1333340'>the</span>
  <span m='1333670'>first</span> <span m='1334900'>and</span> <span m='1335050'>last</span>
  <span m='1335440'>visit.</span> </p><p><span m='1341230'>So</span> <span m='1341530'>like</span>
  <span m='1341710'>this</span> <span m='1341890'>node</span> <span m='1342190'>has</span>
  <span m='1342370'>a</span> <span m='1342430'>pointer</span> <span m='1342790'>to</span>
  <span m='1342970'>its</span> <span m='1343120'>first</span> <span m='1343360'>visit</span>
  <span m='1344200'>and</span> <span m='1344380'>its</span> <span m='1344500'>last</span>
  <span m='1344800'>visit</span> <span m='1345160'>along</span> <span m='1346930'>this</span>
  <span m='1347350'>structure.</span> <span m='1347980'>It</span> <span m='1348430'>doesn't</span>
  <span m='1348790'>keep</span> <span m='1349000'>track</span> <span m='1349360'>of</span>
  <span m='1349540'>any</span> <span m='1349720'>middle</span> <span m='1349960'>visits.</span>
  <span m='1350290'>Because</span> <span m='1350440'>there</span> <span m='1350530'>could</span>
  <span m='1350680'>be</span> <span m='1350800'>a</span> <span m='1350830'>lot</span>
  <span m='1351040'>of</span> <span m='1351100'>those.</span> <span m='1351490'>And</span>
  <span m='1351790'>we</span> <span m='1351910'>just</span> <span m='1352060'>want</span>
  <span m='1352210'>to</span> <span m='1352270'>have</span> <span m='1352420'>a</span>
  <span m='1352450'>constant</span> <span m='1352810'>number</span> <span m='1352990'>of</span>
  <span m='1353050'>pointers.</span> <span m='1353410'>This is</span> <span m='1353560'>going</span>
  <span m='1353710'>to</span> <span m='1353770'>be</span> <span m='1353830'>a</span>
  <span m='1353890'>pointer</span> <span m='1354170'>machine</span> <span m='1354470'>data</span>
  <span m='1354610'>structure</span> <span m='1355000'>just</span> <span m='1355210'>like</span>
  <span m='1355390'>link</span> <span m='1355570'>cut</span> <span m='1355790'>trees.</span>
  </p><p><span m='1359680'>Let's</span> <span m='1359830'>see.</span> <span m='1361090'>How</span>
  <span m='1361270'>do</span> <span m='1361360'>we</span> <span m='1361510'>solve</span>
  <span m='1362140'>our</span> <span m='1362350'>operations,</span> <span m='1363050'>inserting</span>
  <span m='1363550'>and deleting</span> <span m='1363760'>of</span> <span m='1364000'>edges</span>
  <span m='1364890'>and</span> <span m='1364990'>connectivity?</span> <span m='1365770'>Actually,</span>
  <span m='1366100'>I'll</span> <span m='1366190'>start</span> <span m='1366490'>with</span>
  <span m='1366610'>just</span> <span m='1367210'>phrasing</span> <span m='1367600'>it</span>
  <span m='1367690'>like</span> <span m='1367840'>link cut</span> <span m='1368080'>trees.</span>
  <span m='1368560'>We</span> <span m='1368650'>can</span> <span m='1368800'>do</span>
  <span m='1369580'>most</span> <span m='1369820'>of</span> <span m='1369880'>the</span>
  <span m='1369940'>link</span> <span m='1370255'>cut</span> <span m='1370570'>tree</span>
  <span m='1370780'>operations.</span> <span m='1371380'>Remember,</span> <span m='1371650'>there</span>
  <span m='1371770'>was</span> <span m='1371880'>a</span> <span m='1371920'>find</span>
  <span m='1372240'>root,</span> <span m='1372460'>link and</span> <span m='1372820'>cut</span>
  <span m='1374020'>were</span> <span m='1374140'>our</span> <span m='1374230'>main</span>
  <span m='1374470'>operations.</span> <span m='1374940'>Than</span> <span m='1375130'>there</span>
  <span m='1375220'>was</span> <span m='1375310'>aggregation.</span> <span m='1375655'>But</span>
  <span m='1376360'>that</span> <span m='1376540'>will</span> <span m='1376660'>have</span>
  <span m='1376810'>to</span> <span m='1376870'>change.</span> </p><p><span m='1377785'>But</span>
  <span m='1378190'>if</span> <span m='1378310'>we</span> <span m='1378400'>want</span>
  <span m='1378640'>to do</span> <span m='1378760'>find</span> <span m='1379060'>root--</span>
  <span m='1382690'>so</span> <span m='1382900'>we're</span> <span m='1383050'>given</span>
  <span m='1383890'>one</span> <span m='1384040'>of</span> <span m='1384100'>these</span>
  <span m='1384280'>balanced</span> <span m='1384580'>binary</span> <span m='1384850'>search</span>
  <span m='1385090'>trees.</span> <span m='1385910'>In</span> <span m='1386110'>it</span>
  <span m='1386350'>is</span> <span m='1386710'>the</span> <span m='1386820'>node</span>
  <span m='1387105'>v.</span> <span m='1389800'>Well,</span> <span m='1389980'>actually,</span>
  <span m='1390460'>it's</span> <span m='1390640'>a</span> <span m='1390670'>little</span>
  <span m='1392980'>weirder</span> <span m='1393310'>here.</span> </p><p><span m='1393560'>But</span>
  <span m='1394390'>we</span> <span m='1394510'>have</span> <span m='1394660'>some</span>
  <span m='1394890'>node</span> <span m='1395205'>v</span> <span m='1395740'>in</span>
  <span m='1395890'>our</span> <span m='1396010'>tree.</span> <span m='1397240'>And</span>
  <span m='1397450'>really,</span> <span m='1397770'>we</span> <span m='1398080'>have</span>
  <span m='1398380'>our</span> <span m='1398470'>pointers</span> <span m='1398980'>into</span>
  <span m='1399220'>this.</span> <span m='1399980'>This</span> <span m='1400360'>is</span>
  <span m='1400420'>a</span> <span m='1400490'>balanced</span> <span m='1400870'>binary</span>
  <span m='1401170'>search</span> <span m='1401410'>tree</span> <span m='1401620'>here.</span>
  <span m='1403270'>We</span> <span m='1403390'>have</span> <span m='1403480'>pointers</span>
  <span m='1403810'>to</span> <span m='1403900'>the</span> <span m='1404020'>first</span>
  <span m='1404350'>and</span> <span m='1404440'>last</span> <span m='1404710'>visit</span>
  <span m='1404980'>in</span> <span m='1405100'>here.</span> </p><p><span m='1405430'>I</span>
  <span m='1405490'>don't</span> <span m='1405640'>care.</span> <span m='1405790'>Just</span>
  <span m='1406090'>take</span> <span m='1406300'>any</span> <span m='1406480'>visit,</span>
  <span m='1406840'>anything</span> <span m='1407260'>in</span> <span m='1407350'>here,</span>
  <span m='1407640'>just</span> <span m='1407740'>say</span> <span m='1408550'>the</span>
  <span m='1408670'>first</span> <span m='1408940'>visit</span> <span m='1409240'>of</span>
  <span m='1409300'>v.</span> <span m='1410350'>Then</span> <span m='1410650'>walk</span>
  <span m='1411010'>up</span> <span m='1411130'>the</span> <span m='1411250'>tree.</span>
  <span m='1412150'>Then</span> <span m='1412390'>walk</span> <span m='1412690'>down</span>
  <span m='1412960'>the</span> <span m='1413080'>tree</span> <span m='1413620'>on</span>
  <span m='1413800'>the</span> <span m='1413920'>left</span> <span m='1415360'>spine.</span>
  <span m='1416740'>That</span> <span m='1416980'>is</span> <span m='1417190'>the</span>
  <span m='1417390'>min.</span> </p><p><span m='1418600'>And</span> <span m='1418780'>that's</span>
  <span m='1419020'>going</span> <span m='1419260'>to</span> <span m='1419380'>be</span>
  <span m='1419590'>the</span> <span m='1419770'>first</span> <span m='1420790'>visit</span>
  <span m='1421600'>of</span> <span m='1421810'>the</span> <span m='1421960'>root</span>
  <span m='1422200'>node.</span> <span m='1423400'>And</span> <span m='1423520'>so</span>
  <span m='1423700'>this</span> <span m='1424090'>has</span> <span m='1424390'>a</span>
  <span m='1424450'>pointer,</span> <span m='1425420'>in</span> <span m='1425590'>turn,</span>
  <span m='1425920'>to</span> <span m='1426250'>the</span> <span m='1426370'>root</span>
  <span m='1426520'>node.</span> <span m='1427570'>Boom,</span> <span m='1427780'>you</span>
  <span m='1427870'>found</span> <span m='1428110'>the</span> <span m='1428200'>root</span>
  <span m='1428350'>of</span> <span m='1428440'>your</span> <span m='1428560'>tree.</span>
  </p><p><span m='1430120'>Again,</span> <span m='1430390'>we're</span> <span m='1430570'>maintaining</span>
  <span m='1431330'>forest</span> <span m='1431860'>of</span> <span m='1431950'>trees.</span>
  <span m='1433070'>And</span> <span m='1433210'>so</span> <span m='1433570'>we</span>
  <span m='1433720'>just</span> <span m='1433870'>need</span> <span m='1434020'>to</span>
  <span m='1434080'>find</span> <span m='1434290'>which</span> <span m='1434500'>tree</span>
  <span m='1434890'>v is</span> <span m='1435040'>in,</span> <span m='1435520'>walk</span>
  <span m='1435790'>up,</span> <span m='1435970'>walk</span> <span m='1436150'>down,</span>
  <span m='1436480'>that's</span> <span m='1436600'>order</span> <span m='1436870'>log</span>
  <span m='1437200'>n,</span> <span m='1437470'>because</span> <span m='1437680'>this</span>
  <span m='1437830'>thing</span> <span m='1438010'>is</span> <span m='1438130'>balanced,</span>
  <span m='1439450'>and</span> <span m='1439570'>we</span> <span m='1439690'>found</span>
  <span m='1439900'>the</span> <span m='1440030'>root.</span> <span m='1441220'>So</span>
  <span m='1441410'>that's</span> <span m='1441610'>easy.</span> </p><p><span m='1443500'>Turns</span>
  <span m='1443740'>out,</span> <span m='1443860'>the</span> <span m='1443980'>other</span>
  <span m='1444160'>operations</span> <span m='1444610'>are</span> <span m='1444700'>not</span>
  <span m='1444880'>too</span> <span m='1445030'>easy</span> <span m='1446380'>if</span>
  <span m='1446590'>you</span> <span m='1446740'>can</span> <span m='1447070'>split</span>
  <span m='1447490'>and</span> <span m='1447610'>concatenate</span> <span m='1448210'>your</span>
  <span m='1448360'>tree.</span> <span m='1450430'>So</span> <span m='1450640'>let's</span>
  <span m='1450790'>start</span> <span m='1450970'>with</span> <span m='1451120'>cut.</span>
  <span m='1455580'>We</span> <span m='1455700'>need</span> <span m='1456130'>a</span>
  <span m='1456270'>bigger</span> <span m='1456960'>diagram.</span> </p><p><span m='1469540'>So</span>
  <span m='1469620'>here's</span> <span m='1470050'>v.</span> <span m='1471350'>Here's</span>
  <span m='1471600'>the</span> <span m='1471690'>parent of</span> <span m='1472070'>v.</span>
  <span m='1472290'>I'll</span> <span m='1472380'>call</span> <span m='1472570'>it</span>
  <span m='1472780'>w.</span> <span m='1473760'>Here's</span> <span m='1473940'>the</span>
  <span m='1474090'>edge.</span> <span m='1474840'>And</span> <span m='1474990'>our</span>
  <span m='1475140'>goal,</span> <span m='1476300'>and</span> <span m='1476660'>the</span>
  <span m='1479070'>cut</span> <span m='1479280'>operation</span> <span m='1479790'>is</span>
  <span m='1479970'>to</span> <span m='1480120'>delete</span> <span m='1480420'>that</span>
  <span m='1480630'>edge,</span> <span m='1482040'>separate</span> <span m='1482610'>this</span>
  <span m='1482790'>tree</span> <span m='1483090'>from</span> <span m='1483690'>that</span>
  <span m='1483840'>tree.</span> </p><p><span m='1485890'>So</span> <span m='1486240'>what</span>
  <span m='1486970'>I</span> <span m='1487080'>need</span> <span m='1487230'>to</span>
  <span m='1487350'>do</span> <span m='1487530'>is</span> <span m='1487710'>isolate</span>
  <span m='1488370'>this</span> <span m='1488610'>subtree</span> <span m='1489340'>of</span>
  <span m='1489500'>v.</span> <span m='1490680'>But</span> <span m='1490830'>conveniently,</span>
  <span m='1491520'>if</span> <span m='1491670'>you</span> <span m='1491760'>think</span>
  <span m='1491910'>of</span> <span m='1492000'>the</span> <span m='1492090'>Euler-tour,</span>
  <span m='1493330'>the</span> <span m='1493480'>Euler-tour,</span> <span m='1494220'>it</span>
  <span m='1494730'>does</span> <span m='1494910'>some</span> <span m='1495090'>stuff</span>
  <span m='1495360'>here.</span> <span m='1496050'>Eventually</span> <span m='1496470'>it</span>
  <span m='1496530'>follows</span> <span m='1496860'>this</span> <span m='1497040'>edge.</span>
  <span m='1497910'>Visits</span> <span m='1498270'>v</span> <span m='1498480'>for</span>
  <span m='1498600'>the</span> <span m='1498720'>first</span> <span m='1499020'>time</span>
  <span m='1499740'>here.</span> <span m='1500700'>Then</span> <span m='1501160'>it</span>
  <span m='1501280'>visits</span> <span m='1501570'>all</span> <span m='1501690'>the</span>
  <span m='1501750'>stuff</span> <span m='1501990'>down</span> <span m='1502200'>here.</span>
  <span m='1502890'>Then</span> <span m='1503040'>it</span> <span m='1503120'>visits</span>
  <span m='1503460'>v</span> <span m='1503760'>for the</span> <span m='1504060'>last</span>
  <span m='1504390'>time.</span> <span m='1505360'>Then</span> <span m='1505530'>it</span>
  <span m='1505590'>follows</span> <span m='1505900'>this</span> <span m='1506040'>edge</span>
  <span m='1506460'>and</span> <span m='1506580'>then</span> <span m='1506670'>does</span>
  <span m='1506850'>other</span> <span m='1507030'>stuff.</span> </p><p><span m='1507990'>So</span>
  <span m='1508200'>the</span> <span m='1508500'>v</span> <span m='1508800'>subtree</span>
  <span m='1509460'>is</span> <span m='1509760'>a</span> <span m='1510030'>contiguous</span>
  <span m='1510720'>interval</span> <span m='1511770'>of</span> <span m='1511980'>the</span>
  <span m='1512070'>Euler-tour.</span> <span m='1513060'>So</span> <span m='1513300'>we</span>
  <span m='1513420'>just</span> <span m='1514230'>cut</span> <span m='1514380'>it</span>
  <span m='1514470'>open,</span> <span m='1515160'>cut</span> <span m='1515310'>it</span>
  <span m='1515400'>apart.</span> <span m='1517560'>So</span> <span m='1517740'>we</span>
  <span m='1517830'>split</span> <span m='1518190'>the</span> <span m='1518390'>BST</span>
  <span m='1520820'>at</span> <span m='1521130'>the</span> <span m='1521250'>first</span>
  <span m='1521610'>and</span> <span m='1521700'>last</span> <span m='1522030'>visits</span>
  <span m='1522450'>to</span> <span m='1522600'>v,</span> <span m='1525870'>which</span>
  <span m='1526080'>is</span> <span m='1526200'>exactly</span> <span m='1526680'>what</span>
  <span m='1526800'>we</span> <span m='1526920'>know.</span> </p><p><span m='1529110'>We</span>
  <span m='1529260'>have</span> <span m='1529440'>a</span> <span m='1529500'>pointer</span>
  <span m='1530220'>from</span> <span m='1530550'>v</span> <span m='1532230'>to</span>
  <span m='1532360'>its</span> <span m='1532470'>first</span> <span m='1532710'>and</span>
  <span m='1532830'>last</span> <span m='1533040'>visits</span> <span m='1533340'>in</span>
  <span m='1533470'>the</span> <span m='1533540'>Euler-tour.</span> <span m='1534450'>So</span>
  <span m='1534630'>split</span> <span m='1534990'>the</span> <span m='1535080'>tree</span>
  <span m='1535310'>there.</span> <span m='1535520'>Split</span> <span m='1535830'>the</span>
  <span m='1535950'>tree</span> <span m='1536160'>there.</span> </p><p><span m='1536430'>You</span>
  <span m='1536550'>know</span> <span m='1537090'>split</span> <span m='1537480'>in</span>
  <span m='1537590'>a</span> <span m='1537630'>binary</span> <span m='1537930'>search</span>
  <span m='1538170'>tree.</span> <span m='1538800'>You're</span> <span m='1538920'>given</span>
  <span m='1539220'>a</span> <span m='1539280'>particular</span> <span m='1539820'>key</span>
  <span m='1540030'>value,</span> <span m='1540510'>let's</span> <span m='1541860'>say,</span>
  <span m='1542340'>x.</span> <span m='1543420'>And</span> <span m='1543570'>you</span>
  <span m='1543660'>split</span> <span m='1544080'>into</span> <span m='1544980'>everything</span>
  <span m='1546210'>less</span> <span m='1546510'>than</span> <span m='1546660'>x,</span>
  <span m='1547050'>and</span> <span m='1547170'>everything</span> <span m='1548340'>great</span>
  <span m='1548580'>than</span> <span m='1548710'>or</span> <span m='1548850'>equal
  to</span> <span m='1548940'>x,</span> <span m='1549225'>or</span> <span m='1549510'>something</span>
  <span m='1549810'>like</span> <span m='1549930'>that.</span> </p><p><span m='1551430'>That's</span>
  <span m='1551580'>a</span> <span m='1551640'>split</span> <span m='1551880'>operation.</span>
  <span m='1552330'>It</span> <span m='1552390'>can</span> <span m='1552480'>be</span>
  <span m='1552570'>done</span> <span m='1552750'>in</span> <span m='1552840'>log</span>
  <span m='1553110'>n</span> <span m='1553230'>time,</span> <span m='1553620'>and</span>
  <span m='1554070'>pick</span> <span m='1554250'>your</span> <span m='1554340'>favorite</span>
  <span m='1554790'>balanced</span> <span m='1555070'>binary</span> <span m='1555430'>search</span>
  <span m='1555560'>tree.</span> <span m='1556350'>Red-black</span> <span m='1556710'>trees,</span>
  <span m='1557070'>AVL</span> <span m='1557400'>trees,</span> <span m='1557860'>they</span>
  <span m='1557880'>can</span> <span m='1558030'>all</span> <span m='1558150'>do</span>
  <span m='1558330'>this</span> <span m='1558570'>and</span> <span m='1558660'>maintain</span>
  <span m='1559050'>balance</span> <span m='1560020'>in</span> <span m='1560120'>these</span>
  <span m='1560250'>two</span> <span m='1560400'>things.</span> <span m='1560670'>Even</span>
  <span m='1560880'>though</span> <span m='1561000'>they</span> <span m='1561120'>might</span>
  <span m='1561300'>be</span> <span m='1561420'>very</span> <span m='1561570'>different</span>
  <span m='1561840'>sizes,</span> <span m='1562350'>they'll</span> <span m='1562470'>both</span>
  <span m='1562710'>be</span> <span m='1563340'>log</span> <span m='1563730'>height</span>
  <span m='1565220'>relative</span> <span m='1565570'>to</span> <span m='1565680'>their</span>
  <span m='1565830'>own</span> <span m='1565980'>size.</span> </p><p><span m='1567660'>This</span>
  <span m='1567810'>is</span> <span m='1567930'>obviously</span> <span m='1568230'>not</span>
  <span m='1568440'>quite</span> <span m='1568710'>enough.</span> <span m='1569070'>Because</span>
  <span m='1569250'>what</span> <span m='1569370'>we've</span> <span m='1569520'>done</span>
  <span m='1569730'>is</span> <span m='1570700'>basically</span> <span m='1571020'>cut</span>
  <span m='1571260'>here</span> <span m='1571530'>and</span> <span m='1571620'>cut</span>
  <span m='1571890'>here.</span> <span m='1572760'>Now</span> <span m='1572940'>we</span>
  <span m='1573060'>have</span> <span m='1573300'>three</span> <span m='1573690'>trees.</span>
  <span m='1574650'>We</span> <span m='1574830'>have</span> <span m='1575580'>the</span>
  <span m='1575670'>one</span> <span m='1575850'>we</span> <span m='1576000'>want</span>
  <span m='1576330'>for</span> <span m='1576510'>v,</span> <span m='1576780'>v</span>
  <span m='1577050'>is</span> <span m='1577350'>subtree.</span> </p><p><span m='1578250'>That</span>
  <span m='1578430'>will</span> <span m='1578520'>correspond</span> <span m='1579090'>to</span>
  <span m='1580620'>the</span> <span m='1580680'>Euler-tour</span> <span m='1580950'>of</span>
  <span m='1581220'>exactly</span> <span m='1581640'>that</span> <span m='1581820'>thing.</span>
  <span m='1582360'>So</span> <span m='1582480'>this</span> <span m='1582690'>is</span>
  <span m='1582780'>the</span> <span m='1583050'>represented</span> <span m='1583450'>tree</span>
  <span m='1583680'>I'm</span> <span m='1583770'>talking</span> <span m='1584040'>about.</span>
  <span m='1584730'>And</span> <span m='1584880'>this</span> <span m='1585060'>is</span>
  <span m='1585180'>the</span> <span m='1585300'>balanced</span> <span m='1585600'>binary</span>
  <span m='1585860'>search</span> <span m='1586440'>tree.</span> </p><p><span m='1588990'>But</span>
  <span m='1589620'>the</span> <span m='1589710'>rest</span> <span m='1590040'>of</span>
  <span m='1590100'>the</span> <span m='1590190'>tree</span> <span m='1590430'>is</span>
  <span m='1590550'>in</span> <span m='1590730'>two</span> <span m='1590910'>parts.</span>
  <span m='1591400'>There's</span> <span m='1591540'>the</span> <span m='1591660'>part</span>
  <span m='1591830'>to</span> <span m='1591910'>the</span> <span m='1591990'>left</span>
  <span m='1592320'>of</span> <span m='1592410'>v,</span> <span m='1593490'>before</span>
  <span m='1593880'>we</span> <span m='1593970'>visited</span> <span m='1594430'>v,</span>
  <span m='1594570'>the part</span> <span m='1594750'>after</span> <span m='1595100'>we</span>
  <span m='1595190'>visited</span> <span m='1595540'>v.</span> <span m='1596070'>Those</span>
  <span m='1596280'>we</span> <span m='1596400'>just</span> <span m='1596580'>have</span>
  <span m='1596730'>to</span> <span m='1596850'>stick</span> <span m='1597060'>back</span>
  <span m='1597240'>together,</span> <span m='1597570'>so</span> <span m='1597720'>we</span>
  <span m='1597810'>concatenate</span> <span m='1598380'>them.</span> <span m='1603680'>Yeah.</span>
  </p><p><span m='1610420'>So</span> <span m='1610610'>I'll</span> <span m='1610670'>call</span>
  <span m='1610860'>them</span> <span m='1611030'>the</span> <span m='1611120'>before-v</span>
  <span m='1611640'>tree</span> <span m='1612400'>and</span> <span m='1612640'>the</span>
  <span m='1612850'>after-v</span> <span m='1613230'>tree.</span> <span m='1614800'>There</span>
  <span m='1614950'>is</span> <span m='1615100'>actually</span> <span m='1615400'>a</span>
  <span m='1615460'>tiny</span> <span m='1615880'>thing</span> <span m='1616060'>that</span>
  <span m='1616150'>has</span> <span m='1616330'>to</span> <span m='1616450'>happen</span>
  <span m='1616750'>here,</span> <span m='1616930'>which I</span> <span m='1617000'>just</span>
  <span m='1617170'>remembered.</span> <span m='1618070'>Which</span> <span m='1618280'>is</span>
  <span m='1618430'>we</span> <span m='1618580'>need,</span> <span m='1619990'>somewhere,</span>
  <span m='1620560'>to</span> <span m='1620680'>delete</span> <span m='1621070'>one</span>
  <span m='1621970'>occurrence</span> <span m='1623260'>of</span> <span m='1623410'>w,</span>
  <span m='1624950'>of</span> <span m='1625150'>the</span> <span m='1625240'>parent</span>
  <span m='1625600'>of</span> <span m='1625670'>v.</span> </p><p><span m='1627130'>Because</span>
  <span m='1627310'>it</span> <span m='1627400'>used</span> <span m='1627550'>to</span>
  <span m='1627670'>be</span> <span m='1628270'>we</span> <span m='1628420'>visit</span>
  <span m='1628810'>w,</span> <span m='1629450'>then</span> <span m='1629650'>we</span>
  <span m='1629770'>visit</span> <span m='1630040'>v,</span> <span m='1630250'>blah,</span>
  <span m='1630560'>blah,</span> <span m='1630710'>blah.</span> <span m='1630850'>Then</span>
  <span m='1631000'>we</span> <span m='1631120'>visit</span> <span m='1631360'>w</span>
  <span m='1631750'>again.</span> <span m='1632080'>If</span> <span m='1632260'>we</span>
  <span m='1632350'>cut</span> <span m='1632560'>out</span> <span m='1632740'>this</span>
  <span m='1632890'>part,</span> <span m='1633820'>we're</span> <span m='1633910'>going</span>
  <span m='1634030'>to</span> <span m='1634090'>have</span> <span m='1634180'>two</span>
  <span m='1634360'>visits</span> <span m='1634720'>to</span> <span m='1634870'>w</span>
  <span m='1635200'>in</span> <span m='1635320'>a</span> <span m='1635380'>row.</span>
  <span m='1635620'>We</span> <span m='1635740'>really</span> <span m='1635950'>just</span>
  <span m='1636100'>want</span> <span m='1636280'>one</span> <span m='1636460'>visit.</span>
  <span m='1637100'>So</span> <span m='1637150'>this</span> <span m='1637300'>is</span>
  <span m='1637360'>a</span> <span m='1637420'>minor</span> <span m='1637720'>thing,</span>
  <span m='1637920'>but</span> <span m='1638050'>we</span> <span m='1638110'>need</span>
  <span m='1638260'>to</span> <span m='1638350'>do</span> <span m='1638470'>a</span>
  <span m='1638510'>delete</span> <span m='1638800'>in</span> <span m='1638920'>there.</span>
  </p><p><span m='1640980'>So</span> <span m='1641620'>each</span> <span m='1641860'>of</span>
  <span m='1641920'>these</span> <span m='1642160'>is</span> <span m='1642250'>log</span>
  <span m='1642490'>n</span> <span m='1642640'>time.</span> <span m='1642990'>So</span>
  <span m='1643120'>the</span> <span m='1643180'>overall</span> <span m='1643510'>time</span>
  <span m='1643750'>is</span> <span m='1643840'>log</span> <span m='1644120'>n.</span>
  <span m='1644750'>Easy.</span> <span m='1645400'>This</span> <span m='1645550'>is</span>
  <span m='1645730'>a</span> <span m='1646030'>cut-and-paste</span> <span m='1646660'>kind</span>
  <span m='1646870'>of</span> <span m='1647620'>argument,</span> <span m='1648550'>all</span>
  <span m='1648760'>pretty</span> <span m='1649000'>cheap.</span> <span m='1651060'>OK,</span>
  <span m='1651340'>now</span> <span m='1651760'>let's</span> <span m='1652000'>do</span>
  <span m='1652880'>link.</span> </p><p><span m='1658080'>Concatenate</span> <span
  m='1658360'>is</span> <span m='1658640'>the</span> <span m='1658910'>reverse</span>
  <span m='1659250'>of</span> <span m='1659360'>split,</span> <span m='1659700'>by</span>
  <span m='1659800'>the</span> <span m='1659900'>way.</span> <span m='1660140'>You</span>
  <span m='1660260'>have</span> <span m='1660500'>two</span> <span m='1661340'>trees.</span>
  <span m='1661790'>All</span> <span m='1661950'>the</span> <span m='1662030'>things</span>
  <span m='1662270'>in</span> <span m='1662330'>the</span> <span m='1662390'>left</span>
  <span m='1663040'>are</span> <span m='1663290'>smaller</span> <span m='1663650'>than</span>
  <span m='1663770'>all</span> <span m='1663920'>things</span> <span m='1664160'>in</span>
  <span m='1664250'>the</span> <span m='1664310'>right.</span> <span m='1664550'>You</span>
  <span m='1664610'>just</span> <span m='1664790'>want</span> <span m='1664940'>to</span>
  <span m='1665450'>join</span> <span m='1665720'>them</span> <span m='1665870'>together</span>
  <span m='1667430'>like</span> <span m='1667610'>a</span> <span m='1667670'>very</span>
  <span m='1667880'>restrictive</span> <span m='1668330'>kind</span> <span m='1668510'>of</span>
  <span m='1668570'>merge.</span> </p><p><span m='1671060'>So</span> <span m='1671630'>join,</span>
  <span m='1673700'>recall,</span> <span m='1674360'>is</span> <span m='1674780'>you</span>
  <span m='1674900'>have</span> <span m='1675980'>a</span> <span m='1676040'>node</span>
  <span m='1676290'>v.</span> <span m='1678590'>And</span> <span m='1678710'>you</span>
  <span m='1678800'>want</span> <span m='1678950'>to</span> <span m='1680060'>make</span>
  <span m='1680330'>it</span> <span m='1680450'>a</span> <span m='1680540'>new</span>
  <span m='1680750'>child</span> <span m='1681290'>of</span> <span m='1681470'>w.</span>
  <span m='1682414'>w</span> <span m='1682886'>might</span> <span m='1683360'>have</span>
  <span m='1683540'>other</span> <span m='1683720'>children.</span> <span m='1685350'>It</span>
  <span m='1685850'>lives</span> <span m='1686120'>in</span> <span m='1686210'>some</span>
  <span m='1686510'>bigger</span> <span m='1686780'>tree.</span> <span m='1689060'>We</span>
  <span m='1689180'>want</span> <span m='1689300'>to</span> <span m='1689390'>add</span>
  <span m='1689690'>v</span> <span m='1689970'>as</span> <span m='1690110'>a</span>
  <span m='1690170'>child</span> <span m='1690680'>of</span> <span m='1690830'>w.</span>
  <span m='1691120'>So</span> <span m='1691280'>we're</span> <span m='1691370'>assuming</span>
  <span m='1691700'>here</span> <span m='1692110'>v</span> <span m='1692290'>is</span>
  <span m='1692410'>a</span> <span m='1692490'>root,</span> <span m='1692840'>for</span>
  <span m='1693020'>now.</span> </p><p><span m='1695880'>So</span> <span m='1696110'>what</span>
  <span m='1696230'>do</span> <span m='1696320'>we</span> <span m='1696410'>do?</span>
  <span m='1700280'>Sort</span> <span m='1700550'>of</span> <span m='1700610'>the</span>
  <span m='1700700'>same</span> <span m='1700940'>thing.</span> <span m='1701750'>We</span>
  <span m='1701900'>sort</span> <span m='1702110'>of</span> <span m='1702200'>know</span>
  <span m='1702380'>we</span> <span m='1702530'>want</span> <span m='1702710'>to</span>
  <span m='1702800'>put</span> <span m='1703010'>v</span> <span m='1703340'>in</span>
  <span m='1703490'>here</span> <span m='1703670'>somewhere.</span> <span m='1705260'>It</span>
  <span m='1705380'>actually</span> <span m='1705620'>doesn't</span> <span m='1705830'>really</span>
  <span m='1706040'>matter</span> <span m='1706370'>where</span> <span m='1706610'>we</span>
  <span m='1706760'>put</span> <span m='1707030'>it.</span> <span m='1707690'>We're</span>
  <span m='1708080'>not</span> <span m='1708260'>keeping</span> <span m='1708590'>track</span>
  <span m='1708860'>of</span> <span m='1708950'>the</span> <span m='1709070'>order</span>
  <span m='1709400'>of</span> <span m='1709520'>nodes</span> <span m='1709770'>in</span>
  <span m='1709910'>here.</span> </p><p><span m='1710750'>So</span> <span m='1710870'>I'm</span>
  <span m='1710930'>going</span> <span m='1711050'>to</span> <span m='1711110'>simplify</span>
  <span m='1711590'>my</span> <span m='1711710'>life</span> <span m='1712010'>and</span>
  <span m='1712100'>say,</span> <span m='1713060'>let's</span> <span m='1713270'>put</span>
  <span m='1714050'>v</span> <span m='1714520'>at</span> <span m='1714710'>the</span>
  <span m='1714890'>end.</span> <span m='1715550'>I</span> <span m='1715640'>want</span>
  <span m='1715790'>to</span> <span m='1715850'>make</span> <span m='1716090'>v</span>
  <span m='1716450'>the</span> <span m='1716600'>last</span> <span m='1717230'>child</span>
  <span m='1717650'>of</span> <span m='1717780'>w,</span> <span m='1719210'>like</span>
  <span m='1719390'>this.</span> <span m='1721370'>So</span> <span m='1721750'>we</span>
  <span m='1722300'>can</span> <span m='1722450'>find</span> <span m='1722780'>the</span>
  <span m='1722870'>last</span> <span m='1723260'>child,</span> <span m='1723710'>in</span>
  <span m='1723800'>some</span> <span m='1723980'>sense.</span> <span m='1725030'>After</span>
  <span m='1725330'>we</span> <span m='1725420'>visit</span> <span m='1725690'>the</span>
  <span m='1725750'>last</span> <span m='1725990'>child,</span> <span m='1726230'>we</span>
  <span m='1726380'>come</span> <span m='1726560'>back</span> <span m='1726800'>and</span>
  <span m='1726900'>do</span> <span m='1726980'>the</span> <span m='1727100'>last</span>
  <span m='1727490'>visit</span> <span m='1727760'>to</span> <span m='1727880'>w.</span>
  </p><p><span m='1729170'>So</span> <span m='1729320'>I'm</span> <span m='1729380'>going</span>
  <span m='1729500'>to</span> <span m='1729560'>look</span> <span m='1729740'>at</span>
  <span m='1729830'>the</span> <span m='1729920'>last</span> <span m='1730160'>visit</span>
  <span m='1730390'>of</span> <span m='1730460'>w,</span> <span m='1731120'>cut</span>
  <span m='1731360'>the</span> <span m='1731480'>tree</span> <span m='1731780'>open</span>
  <span m='1732080'>there,</span> <span m='1732620'>and</span> <span m='1732740'>stick</span>
  <span m='1733010'>this</span> <span m='1733160'>part</span> <span m='1733430'>in.</span>
  <span m='1734400'>Cut</span> <span m='1734620'>the</span> <span m='1734750'>Euler-tour</span>
  <span m='1736250'>in</span> <span m='1736340'>half</span> <span m='1736630'>there.</span>
  <span m='1736880'>So</span> <span m='1737050'>split.</span> <span m='1741270'>w</span>
  <span m='1742350'>is</span> <span m='1742490'>tree</span> <span m='1745690'>at</span>
  <span m='1746740'>w's</span> <span m='1747190'>last</span> <span m='1747350'>visit.</span>
  <span m='1752640'>Right?</span> </p><p><span m='1754140'>And</span> <span m='1754320'>then</span>
  <span m='1755100'>we</span> <span m='1755250'>do</span> <span m='1755710'>omega</span>
  <span m='1756150'>concatenate.</span> <span m='1757780'>We're</span> <span m='1757850'>going</span>
  <span m='1758000'>to</span> <span m='1758120'>concatenate,</span> <span m='1761430'>basically,</span>
  <span m='1763020'>before</span> <span m='1764860'>w's</span> <span m='1765210'>last</span>
  <span m='1765510'>visit.</span> <span m='1771370'>We're</span> <span m='1771450'>going</span>
  <span m='1771690'>to</span> <span m='1771810'>concatenate</span> <span m='1772680'>a</span>
  <span m='1773730'>single</span> <span m='1774510'>occurrence</span> <span m='1774960'>of</span>
  <span m='1775050'>w.</span> <span m='1775410'>Because</span> <span m='1775590'>there's</span>
  <span m='1775740'>a</span> <span m='1775830'>new</span> <span m='1776040'>occurrence</span>
  <span m='1776430'>of</span> <span m='1776490'>w</span> <span m='1776880'>now.</span>
  <span m='1777120'>We</span> <span m='1777240'>do</span> <span m='1777420'>it</span>
  <span m='1777540'>before</span> <span m='1777870'>and</span> <span m='1777960'>after</span>
  <span m='1778260'>v.</span> </p><p><span m='1779130'>So</span> <span m='1779250'>we</span>
  <span m='1779370'>add</span> <span m='1779520'>another</span> <span m='1780120'>w.</span>
  <span m='1780640'>Then</span> <span m='1780690'>we</span> <span m='1780840'>add</span>
  <span m='1781420'>v's</span> <span m='1783840'>Euler-tour,</span> <span m='1785010'>v's</span>
  <span m='1785970'>BST,</span> <span m='1786660'>and</span> <span m='1786870'>then</span>
  <span m='1787110'>we</span> <span m='1787200'>do</span> <span m='1787410'>after</span>
  <span m='1789340'>whatever</span> <span m='1789690'>used</span> <span m='1789870'>to</span>
  <span m='1789960'>be</span> <span m='1790050'>there</span> <span m='1790590'>after</span>
  <span m='1790890'>w's</span> <span m='1791220'>last</span> <span m='1791510'>visit.</span>
  <span m='1794160'>Let's</span> <span m='1794370'>say,</span> <span m='1795600'>after</span>
  <span m='1796080'>and</span> <span m='1796230'>including</span> <span m='1801610'>that</span>
  <span m='1801890'>w</span> <span m='1802660'>visit.</span> </p><p><span m='1805690'>So</span>
  <span m='1806220'>just</span> <span m='1806470'>the</span> <span m='1806590'>symmetric</span>
  <span m='1807040'>of</span> <span m='1807130'>this,</span> <span m='1807490'>here</span>
  <span m='1807730'>we</span> <span m='1807880'>had</span> <span m='1808060'>to</span>
  <span m='1808240'>delete</span> <span m='1808600'>one</span> <span m='1808810'>occurrence</span>
  <span m='1809110'>of</span> <span m='1809190'>w.</span> <span m='1809620'>Here</span>
  <span m='1809770'>we</span> <span m='1809860'>have</span> <span m='1810010'>to</span>
  <span m='1810100'>add</span> <span m='1810280'>one</span> <span m='1810460'>back</span>
  <span m='1810710'>in.</span> <span m='1811480'>But</span> <span m='1811570'>you</span>
  <span m='1811660'>just</span> <span m='1811930'>cut,</span> <span m='1812460'>paste</span>
  <span m='1812700'>in</span> <span m='1812830'>the</span> <span m='1812920'>thing</span>
  <span m='1813100'>you</span> <span m='1813190'>need,</span> <span m='1813430'>and</span>
  <span m='1813520'>rejoin</span> <span m='1813910'>everything.</span> <span m='1814970'>So</span>
  <span m='1815050'>again,</span> <span m='1815290'>very</span> <span m='1815470'>easy.</span>
  <span m='1816530'>It's</span> <span m='1816630'>a</span> <span m='1816730'>constant</span>
  <span m='1816970'>number</span> <span m='1817300'>of</span> <span m='1817450'>log</span>
  <span m='1817720'>n</span> <span m='1817840'>time</span> <span m='1818080'>operations,</span>
  <span m='1818455'>if</span> <span m='1818830'>you</span> <span m='1818950'>can</span>
  <span m='1819100'>do</span> <span m='1819220'>split</span> <span m='1819430'>and</span>
  <span m='1819520'>concatenate</span> <span m='1820080'>in</span> <span m='1820240'>log</span>
  <span m='1820430'>n</span> <span m='1820540'>time.</span> </p><p><span m='1822830'>So</span>
  <span m='1824020'>you</span> <span m='1824110'>see</span> <span m='1824290'>this,</span>
  <span m='1824500'>it's</span> <span m='1824620'>like</span> <span m='1824770'>wow,</span>
  <span m='1825140'>why</span> <span m='1825220'>do</span> <span m='1825340'>we</span>
  <span m='1825400'>spend</span> <span m='1825610'>so</span> <span m='1825730'>much</span>
  <span m='1825880'>time</span> <span m='1826060'>with</span> <span m='1826180'>link</span>
  <span m='1826310'>cut</span> <span m='1826480'>trees?</span> <span m='1827470'>This</span>
  <span m='1827590'>is</span> <span m='1827710'>really</span> <span m='1828040'>easy.</span>
  <span m='1829520'>But</span> <span m='1829540'>they</span> <span m='1829730'>have</span>
  <span m='1829910'>their</span> <span m='1830040'>different</span> <span m='1830370'>applications.</span>
  <span m='1830950'>If</span> <span m='1831070'>you</span> <span m='1831160'>want</span>
  <span m='1831310'>to</span> <span m='1831370'>compute</span> <span m='1831640'>aggregates</span>
  <span m='1832120'>on</span> <span m='1832240'>paths</span> <span m='1832630'>you</span>
  <span m='1832780'>need</span> <span m='1833020'>to</span> <span m='1833140'>use</span>
  <span m='1833330'>link</span> <span m='1833510'>cut tress.</span> <span m='1833750'>It's
  the</span> <span m='1833900'>best</span> <span m='1834130'>we</span> <span m='1834520'>know.</span>
  </p><p><span m='1835270'>This</span> <span m='1835420'>structure</span> <span m='1835750'>will</span>
  <span m='1835870'>not</span> <span m='1836110'>do</span> <span m='1836530'>aggregates</span>
  <span m='1836980'>on</span> <span m='1837070'>paths.</span> <span m='1837430'>But</span>
  <span m='1838120'>it</span> <span m='1838270'>will</span> <span m='1838390'>do</span>
  <span m='1838510'>aggregates</span> <span m='1839110'>on</span> <span m='1839290'>subtrees.</span>
  <span m='1839920'>Because</span> <span m='1840220'>subtrees</span> <span m='1840700'>are</span>
  <span m='1840760'>represented</span> <span m='1841360'>by</span> <span m='1841540'>these</span>
  <span m='1841720'>intervals</span> <span m='1842680'>in</span> <span m='1842820'>the</span>
  <span m='1842920'>Euler-tour</span> <span m='1843430'>tree.</span> </p><p><span
  m='1843730'>So</span> <span m='1843880'>if</span> <span m='1843970'>you</span> <span
  m='1844060'>have</span> <span m='1844180'>a</span> <span m='1844240'>weight</span>
  <span m='1844990'>on</span> <span m='1845200'>all</span> <span m='1845350'>the</span>
  <span m='1845470'>nodes</span> <span m='1845860'>in</span> <span m='1846010'>here,</span>
  <span m='1846180'>say,</span> <span m='1847570'>you</span> <span m='1847750'>can</span>
  <span m='1847870'>easily</span> <span m='1848260'>find</span> <span m='1848680'>this</span>
  <span m='1849490'>interval</span> <span m='1849970'>and</span> <span m='1850090'>do</span>
  <span m='1850240'>a</span> <span m='1850330'>range</span> <span m='1850630'>query</span>
  <span m='1850900'>there.</span> <span m='1851050'>So you</span> <span m='1851260'>take</span>
  <span m='1851470'>the</span> <span m='1851560'>min</span> <span m='1851800'>of</span>
  <span m='1851920'>all</span> <span m='1852050'>those</span> <span m='1852280'>things.</span>
  <span m='1852550'>If</span> <span m='1852670'>you</span> <span m='1852730'>have</span>
  <span m='1852850'>subtree</span> <span m='1853300'>mins,</span> <span m='1854800'>you</span>
  <span m='1855010'>can</span> <span m='1855490'>take</span> <span m='1855760'>the</span>
  <span m='1855880'>min</span> <span m='1856150'>of</span> <span m='1856360'>log</span>
  <span m='1856660'>n</span> <span m='1856810'>things</span> <span m='1857830'>and</span>
  <span m='1858115'>in</span> <span m='1858490'>log</span> <span m='1858700'>n</span>
  <span m='1858820'>time,</span> <span m='1859210'>compute</span> <span m='1859840'>the</span>
  <span m='1859930'>min</span> <span m='1860200'>in</span> <span m='1860290'>an</span>
  <span m='1860380'>interval,</span> <span m='1861130'>or</span> <span m='1861790'>min</span>
  <span m='1862510'>over</span> <span m='1862840'>a</span> <span m='1862900'>subtree</span>
  <span m='1863890'>rooted</span> <span m='1864190'>at</span> <span m='1864310'>a</span>
  <span m='1864370'>node,</span> <span m='1865240'>or</span> <span m='1865420'>max</span>
  <span m='1865810'>or</span> <span m='1865930'>sum,</span> <span m='1866350'>or</span>
  <span m='1866410'>whatever.</span> </p><p><span m='1866800'>So</span> <span m='1866950'>here</span>
  <span m='1867130'>you</span> <span m='1867220'>can</span> <span m='1867340'>do</span>
  <span m='1867430'>subtree</span> <span m='1867850'>aggregation</span> <span m='1868900'>in</span>
  <span m='1869000'>log</span> <span m='1869020'>n</span> <span m='1869410'>time.</span>
  <span m='1869820'>And</span> <span m='1869910'>we're</span> <span m='1870010'>going</span>
  <span m='1870130'>to</span> <span m='1870190'>need</span> <span m='1870400'>that</span>
  <span m='1871270'>for</span> <span m='1871480'>the</span> <span m='1871570'>log</span>
  <span m='1871780'>squared</span> <span m='1872890'>solution.</span> <span m='1877120'>One</span>
  <span m='1877300'>other</span> <span m='1877480'>thing</span> <span m='1877690'>I</span>
  <span m='1877990'>wanted</span> <span m='1878290'>to</span> <span m='1878530'>maybe</span>
  <span m='1879580'>mention,</span> <span m='1880990'>here</span> <span m='1881200'>we</span>
  <span m='1881320'>did</span> <span m='1881500'>join.</span> <span m='1881890'>And
  join</span> <span m='1882340'>assumed</span> <span m='1883390'>that</span> <span
  m='1884380'>v</span> <span m='1884680'>was</span> <span m='1884860'>the</span> <span
  m='1884980'>root</span> <span m='1885160'>of</span> <span m='1885280'>its</span>
  <span m='1885460'>tree.</span> <span m='1886300'>What</span> <span m='1886480'>if</span>
  <span m='1886620'>v</span> <span m='1886780'>is</span> <span m='1886900'>not</span>
  <span m='1887200'>the</span> <span m='1887290'>root</span> <span m='1887440'>of</span>
  <span m='1887530'>its</span> <span m='1887680'>tree</span> <span m='1887890'>and</span>
  <span m='1887980'>we</span> <span m='1888070'>still</span> <span m='1888340'>want</span>
  <span m='1888490'>to</span> <span m='1888580'>insert</span> <span m='1889030'>an</span>
  <span m='1889120'>edge?</span> </p><p><span m='1889570'>Because</span> <span m='1889780'>insert,</span>
  <span m='1891360'>when</span> <span m='1891570'>we're</span> <span m='1891670'>maintaining</span>
  <span m='1892150'>an</span> <span m='1892210'>undirected</span> <span m='1892640'>graph,</span>
  <span m='1892910'>there</span> <span m='1893080'>is</span> <span m='1893320'>no</span>
  <span m='1894340'>rootedness.</span> <span m='1895440'>That</span> <span m='1895720'>rootedness</span>
  <span m='1896200'>is</span> <span m='1896260'>just</span> <span m='1896530'>a</span>
  <span m='1896710'>tool.</span> <span m='1897720'>You</span> <span m='1897820'>could</span>
  <span m='1897970'>say</span> <span m='1898120'>at</span> <span m='1898180'>the</span>
  <span m='1898300'>first</span> <span m='1898510'>step</span> <span m='1898780'>here,</span>
  <span m='1899010'>just</span> <span m='1899170'>root</span> <span m='1899380'>the</span>
  <span m='1899470'>tree</span> <span m='1899710'>somewhere</span> <span m='1901180'>so</span>
  <span m='1901420'>that</span> <span m='1901540'>we</span> <span m='1901720'>can</span>
  <span m='1902020'>have</span> <span m='1902320'>a</span> <span m='1902590'>well-defined</span>
  <span m='1903100'>beginning</span> <span m='1903520'>and</span> <span m='1903610'>end</span>
  <span m='1903760'>to</span> <span m='1903850'>the</span> <span m='1903950'>Euler-tour.</span>
  </p><p><span m='1904810'>Of</span> <span m='1904900'>course,</span> <span m='1905080'>Euler-tour</span>
  <span m='1905800'>in</span> <span m='1905900'>it's</span> <span m='1906040'>the</span>
  <span m='1906140'>most</span> <span m='1906370'>natural</span> <span m='1906730'>form,</span>
  <span m='1906940'>is</span> <span m='1907060'>actually</span> <span m='1907450'>a</span>
  <span m='1907540'>cycle.</span> <span m='1908680'>And</span> <span m='1908830'>it</span>
  <span m='1908890'>would</span> <span m='1909040'>only</span> <span m='1909250'>have</span>
  <span m='1909520'>one</span> <span m='1909760'>visit</span> <span m='1910090'>here.</span>
  <span m='1913150'>So</span> <span m='1913270'>you</span> <span m='1913360'>can</span>
  <span m='1913480'>think</span> <span m='1913690'>of</span> <span m='1913780'>it</span>
  <span m='1913870'>that</span> <span m='1914080'>way.</span> <span m='1914800'>I'd</span>
  <span m='1914920'>still</span> <span m='1915160'>like</span> <span m='1915340'>to</span>
  <span m='1915430'>have</span> <span m='1915700'>the</span> <span m='1915790'>two</span>
  <span m='1915940'>visits</span> <span m='1916900'>conceptually,</span> <span m='1917470'>because</span>
  <span m='1918500'>that</span> <span m='1918790'>makes</span> <span m='1919570'>even</span>
  <span m='1919870'>the</span> <span m='1919960'>subtree</span> <span m='1920440'>rooted</span>
  <span m='1920740'>at</span> <span m='1920860'>the</span> <span m='1920950'>root</span>
  <span m='1922240'>an</span> <span m='1922390'>interval</span> <span m='1922810'>between</span>
  <span m='1923170'>the</span> <span m='1923290'>beginning</span> <span m='1923650'>and</span>
  <span m='1923740'>the</span> <span m='1923860'>end.</span> </p><p><span m='1926110'>But</span>
  <span m='1926290'>the</span> <span m='1926350'>nice</span> <span m='1926590'>thing</span>
  <span m='1926740'>of</span> <span m='1926830'>the</span> <span m='1926920'>cycle</span>
  <span m='1927310'>view</span> <span m='1927940'>is</span> <span m='1928120'>if</span>
  <span m='1928270'>I</span> <span m='1928360'>wanted</span> <span m='1928600'>to</span>
  <span m='1928720'>change</span> <span m='1929200'>who</span> <span m='1929320'>the</span>
  <span m='1929440'>root</span> <span m='1929710'>is,</span> <span m='1929900'>say</span>
  <span m='1930100'>I</span> <span m='1930190'>want</span> <span m='1931990'>this</span>
  <span m='1932170'>node</span> <span m='1932360'>to</span> <span m='1932470'>be</span>
  <span m='1932590'>the</span> <span m='1932680'>root,</span> <span m='1934000'>that's</span>
  <span m='1934240'>just</span> <span m='1934480'>a</span> <span m='1934540'>cyclic</span>
  <span m='1934990'>shift</span> <span m='1935320'>of</span> <span m='1935470'>everything.</span>
  <span m='1936230'>It</span> <span m='1936330'>just</span> <span m='1936370'>means</span>
  <span m='1936580'>I</span> <span m='1936640'>want</span> <span m='1936790'>to</span>
  <span m='1936850'>start</span> <span m='1937090'>the</span> <span m='1937210'>cycle</span>
  <span m='1937540'>here</span> <span m='1937720'>and</span> <span m='1937810'>end</span>
  <span m='1938020'>it</span> <span m='1938140'>here.</span> <span m='1938340'>So</span>
  <span m='1938510'>I'd</span> <span m='1938620'>basically</span> <span m='1939550'>duplicate</span>
  <span m='1940120'>this</span> <span m='1940300'>copy</span> <span m='1940690'>of</span>
  <span m='1940780'>the</span> <span m='1940870'>vertex,</span> <span m='1943540'>singlify</span>
  <span m='1944390'>this</span> <span m='1944590'>one.</span> </p><p><span m='1945310'>There's</span>
  <span m='1945460'>only</span> <span m='1945670'>one</span> <span m='1945820'>copy.</span>
  <span m='1946160'>That's</span> <span m='1946390'>the</span> <span m='1946430'>constant</span>
  <span m='1946690'>number</span> <span m='1946900'>of</span> <span m='1946990'>inserts</span>
  <span m='1947320'>and</span> <span m='1947410'>deletes.</span> <span m='1948490'>And</span>
  <span m='1948610'>now</span> <span m='1949300'>rotate.</span> </p><p><span m='1949660'>[LAUGHS]</span>
  </p><p><span m='1951280'>What</span> <span m='1951430'>does</span> <span m='1951580'>it</span>
  <span m='1951660'>rotate</span> <span m='1952150'>mean?</span> <span m='1952380'>Well,</span>
  <span m='1952930'>before</span> <span m='1953330'>it</span> <span m='1953360'>was</span>
  <span m='1953530'>a</span> <span m='1953590'>sequential</span> <span m='1954160'>order,</span>
  <span m='1954680'>starting</span> <span m='1955030'>here,</span> <span m='1956050'>ending</span>
  <span m='1956410'>here.</span> <span m='1956950'>Now,</span> <span m='1957190'>I</span>
  <span m='1957250'>want</span> <span m='1957420'>it</span> <span m='1957490'>to</span>
  <span m='1957580'>be</span> <span m='1957670'>a</span> <span m='1957700'>sequential</span>
  <span m='1958450'>order,</span> <span m='1958810'>say,</span> <span m='1959150'>starting</span>
  <span m='1959440'>here,</span> <span m='1960370'>continuing</span> <span m='1960910'>this</span>
  <span m='1961090'>way,</span> <span m='1962380'>and</span> <span m='1962500'>then</span>
  <span m='1962680'>ending</span> <span m='1963070'>back</span> <span m='1963340'>here.</span>
  <span m='1964200'>So</span> <span m='1964300'>if</span> <span m='1964420'>you</span>
  <span m='1964510'>look</span> <span m='1964720'>at</span> <span m='1964810'>what</span>
  <span m='1965020'>that</span> <span m='1965350'>requires,</span> <span m='1966220'>maybe</span>
  <span m='1966330'>use</span> <span m='1967240'>another</span> <span m='1967540'>color,</span>
  <span m='1967930'>I</span> <span m='1968080'>want</span> <span m='1969310'>this</span>
  <span m='1969580'>part.</span> <span m='1975120'>That's</span> <span m='1975330'>an</span>
  <span m='1975450'>interval</span> <span m='1975930'>of</span> <span m='1976020'>the</span>
  <span m='1976140'>old</span> <span m='1976320'>tree,</span> <span m='1976710'>of</span>
  <span m='1976830'>the</span> <span m='1976950'>old</span> <span m='1978090'>sequence.</span>
  <span m='1978810'>And</span> <span m='1978930'>then</span> <span m='1979050'>I</span>
  <span m='1979140'>want</span> <span m='1979440'>this</span> <span m='1979770'>part.</span>
  </p><p><span m='1981970'>So</span> <span m='1982020'>there's</span> <span m='1982230'>two</span>
  <span m='1982470'>pieces</span> <span m='1983010'>of</span> <span m='1983250'>the</span>
  <span m='1983310'>old</span> <span m='1983520'>tree.</span> <span m='1984270'>And</span>
  <span m='1984420'>I</span> <span m='1984480'>just</span> <span m='1984660'>want</span>
  <span m='1984810'>to</span> <span m='1984870'>change</span> <span m='1985170'>their</span>
  <span m='1985290'>order.</span> <span m='1986590'>It's</span> <span m='1986790'>a</span>
  <span m='1986840'>cyclic</span> <span m='1987210'>shift.</span> <span m='1987450'>Cyclic</span>
  <span m='1987780'>shift</span> <span m='1988080'>is</span> <span m='1988200'>just</span>
  <span m='1988440'>a</span> <span m='1988500'>cut</span> <span m='1989040'>and</span>
  <span m='1989160'>then</span> <span m='1989400'>a</span> <span m='1989640'>rejoin</span>
  <span m='1990150'>the</span> <span m='1990240'>other</span> <span m='1990420'>way.</span>
  </p><p><span m='1991780'>So</span> <span m='1991830'>I</span> <span m='1991920'>can</span>
  <span m='1992100'>reroute</span> <span m='1992610'>a</span> <span m='1992700'>tree</span>
  <span m='1993180'>in</span> <span m='1993360'>log</span> <span m='1993600'>n</span>
  <span m='1993720'>time</span> <span m='1993990'>as</span> <span m='1994110'>well.</span>
  <span m='1995050'>So</span> <span m='1995160'>this</span> <span m='1995370'>is</span>
  <span m='1995520'>why,</span> <span m='1996240'>in</span> <span m='1996330'>this</span>
  <span m='1996510'>world,</span> <span m='1997200'>join</span> <span m='1997620'>is</span>
  <span m='1997740'>equivalent</span> <span m='1998220'>to</span> <span m='1998430'>insert.</span>
  <span m='1999280'>If</span> <span m='1999390'>I</span> <span m='1999450'>want</span>
  <span m='1999630'>to</span> <span m='1999690'>do</span> <span m='1999810'>a</span>
  <span m='1999870'>general</span> <span m='2000200'>insert,</span> <span m='2000890'>first</span>
  <span m='2001190'>I</span> <span m='2001310'>reroute</span> <span m='2001910'>v's</span>
  <span m='2002300'>tree.</span> <span m='2002640'>I</span> <span m='2002700'>do</span>
  <span m='2002900'>a</span> <span m='2002950'>cyclic</span> <span m='2003320'>shift</span>
  <span m='2003590'>with</span> <span m='2003710'>one</span> <span m='2003920'>split</span>
  <span m='2004220'>one</span> <span m='2004400'>concatenate,</span> <span m='2005720'>like</span>
  <span m='2005930'>this.</span> </p><p><span m='2006650'>And</span> <span m='2006890'>I</span>
  <span m='2006980'>get</span> <span m='2007420'>v</span> <span m='2007560'>to be</span>
  <span m='2007640'>the</span> <span m='2007760'>root.</span> <span m='2008120'>Then</span>
  <span m='2008300'>I</span> <span m='2008360'>can</span> <span m='2008480'>do</span>
  <span m='2008570'>the</span> <span m='2008690'>join.</span> <span m='2010560'>So</span>
  <span m='2010670'>again,</span> <span m='2010910'>constant</span> <span m='2011270'>number</span>
  <span m='2011510'>of</span> <span m='2012110'>splits</span> <span m='2012410'>and</span>
  <span m='2012500'>concatenates.</span> </p><p><span m='2017140'>So it's</span> <span
  m='2017390'>another</span> <span m='2017660'>operation</span> <span m='2018080'>we</span>
  <span m='2018170'>can</span> <span m='2018290'>do,</span> <span m='2019220'>in</span>
  <span m='2019790'>log</span> <span m='2020060'>in.</span> <span m='2022280'>Everything</span>
  <span m='2022670'>here</span> <span m='2022850'>is</span> <span m='2023590'>log</span>
  <span m='2023870'>n.</span> <span m='2028070'>Cool.</span> <span m='2029140'>Any</span>
  <span m='2029350'>questions</span> <span m='2029770'>about</span> <span m='2029990'>Euler-tour</span>
  <span m='2030520'>trees.</span> <span m='2031840'>That's</span> <span m='2032020'>all</span>
  <span m='2032260'>I'll</span> <span m='2032650'>say</span> <span m='2032890'>about</span>
  <span m='2033130'>them.</span> <span m='2034180'>We</span> <span m='2034330'>will</span>
  <span m='2034510'>next</span> <span m='2035110'>move</span> <span m='2035350'>on</span>
  <span m='2035710'>to</span> <span m='2041450'>next</span> <span m='2041690'>result.</span>
  </p><p><span m='2041930'>AUDIENCE:</span> <span m='2042336'>Can link cut trees also
  do a reroute?</span> </p><p><span m='2043554'>ERIK DEMAINE:</span> <span m='2043960'>Can</span>
  <span m='2044190'>link</span> <span m='2044370'>cut tress</span> <span m='2044780'>also</span>
  <span m='2045080'>do</span> <span m='2045260'>a</span> <span m='2045710'>reroute?</span>
  <span m='2046010'>I</span> <span m='2046070'>haven't</span> <span m='2046400'>thought</span>
  <span m='2046640'>about</span> <span m='2046910'>that.</span> <span m='2050480'>I</span>
  <span m='2050540'>would</span> <span m='2050960'>guess</span> <span m='2052400'>so.</span>
  </p><p><span m='2052684'>[LAUGHS]</span> </p><p><span m='2054650'>But</span> <span
  m='2054949'>it's</span> <span m='2055190'>going</span> <span m='2055340'>to</span>
  <span m='2055400'>require</span> <span m='2055760'>some</span> <span m='2055940'>more</span>
  <span m='2056090'>thought.</span> <span m='2056400'>So</span> <span m='2056420'>let's</span>
  <span m='2056600'>see,</span> <span m='2057210'>link</span> <span m='2057460'>cut</span>
  <span m='2057724'>tree,</span> <span m='2058460'>we</span> <span m='2058610'>can</span>
  <span m='2058790'>do</span> <span m='2059719'>a</span> <span m='2059810'>little</span>
  <span m='2059989'>aside</span> <span m='2060320'>here.</span> <span m='2061070'>Link
  cut</span> <span m='2061330'>tree,</span> <span m='2061820'>we</span> <span m='2061969'>do</span>
  <span m='2062120'>an</span> <span m='2062210'>axis</span> <span m='2062719'>on</span>
  <span m='2063010'>v.</span> <span m='2064070'>So</span> <span m='2064219'>now</span>
  <span m='2064429'>we</span> <span m='2064550'>get</span> <span m='2064820'>that</span>
  <span m='2065030'>v</span> <span m='2065449'>is</span> <span m='2065719'>up</span>
  <span m='2065900'>here,</span> <span m='2066340'>right</span> <span m='2066530'>at</span>
  <span m='2066650'>the</span> <span m='2066770'>root</span> <span m='2067130'>of</span>
  <span m='2067370'>the</span> <span m='2067489'>tree</span> <span m='2067820'>of</span>
  <span m='2067909'>oxx</span> <span m='2068179'>trees.</span> <span m='2069210'>Now</span>
  <span m='2069290'>we've</span> <span m='2069409'>got</span> <span m='2069620'>other</span>
  <span m='2070100'>trees</span> <span m='2070429'>of</span> <span m='2070510'>[INAUDIBLE]</span>
  <span m='2070760'>trees</span> <span m='2070969'>hanging</span> <span m='2071330'>off</span>
  <span m='2071540'>here.</span> </p><p><span m='2073159'>But</span> <span m='2073605'>in</span>
  <span m='2073870'>particular,</span> <span m='2074300'>this</span> <span m='2074540'>thing</span>
  <span m='2074810'>represents</span> <span m='2075320'>a</span> <span m='2075380'>path.</span>
  <span m='2078560'>It</span> <span m='2078650'>represents</span> <span m='2079159'>the</span>
  <span m='2079400'>route</span> <span m='2079670'>to</span> <span m='2079850'>v</span>
  <span m='2080030'>path.</span> <span m='2081860'>It</span> <span m='2082130'>actually</span>
  <span m='2082400'>has</span> <span m='2082580'>no</span> <span m='2082760'>right</span>
  <span m='2083050'>child.</span> </p><p><span m='2083389'>So</span> <span m='2083889'>it's</span>
  <span m='2084080'>a</span> <span m='2084139'>little</span> <span m='2084350'>bit</span>
  <span m='2085130'>emptier,</span> <span m='2085580'>like</span> <span m='2085760'>that.</span>
  <span m='2088460'>So</span> <span m='2088730'>now</span> <span m='2088909'>we</span>
  <span m='2089060'>want</span> <span m='2089210'>to</span> <span m='2089449'>flip</span>
  <span m='2089719'>things</span> <span m='2089960'>around</span> <span m='2090199'>and</span>
  <span m='2090290'>say</span> <span m='2090469'>v</span> <span m='2090739'>is</span>
  <span m='2091010'>the</span> <span m='2091100'>root.</span> <span m='2091360'>We</span>
  <span m='2091429'>basically</span> <span m='2091730'>want</span> <span m='2091909'>to</span>
  <span m='2091969'>reverse</span> <span m='2092420'>the</span> <span m='2092570'>order</span>
  <span m='2092840'>of</span> <span m='2092960'>all</span> <span m='2093080'>the</span>
  <span m='2093170'>nodes</span> <span m='2093409'>in</span> <span m='2093500'>this</span>
  <span m='2093679'>tree.</span> </p><p><span m='2095090'>So</span> <span m='2095510'>reversing</span>
  <span m='2096139'>the</span> <span m='2096230'>order</span> <span m='2096500'>of</span>
  <span m='2096620'>nodes</span> <span m='2096860'>in</span> <span m='2096980'>a</span>
  <span m='2097100'>binary</span> <span m='2097400'>search</span> <span m='2097610'>tree,</span>
  <span m='2097760'>you</span> <span m='2097880'>can't</span> <span m='2098330'>regularly</span>
  <span m='2098990'>do.</span> <span m='2099860'>But</span> <span m='2100130'>if</span>
  <span m='2100280'>you</span> <span m='2100460'>augment</span> <span m='2100850'>your</span>
  <span m='2101090'>data</span> <span m='2101330'>structure</span> <span m='2101690'>to</span>
  <span m='2101810'>say,</span> <span m='2103160'>I</span> <span m='2103340'>could</span>
  <span m='2103490'>basically</span> <span m='2104090'>mark</span> <span m='2104480'>these</span>
  <span m='2104720'>nodes</span> <span m='2105020'>as</span> <span m='2105290'>all</span>
  <span m='2105740'>inverted,</span> <span m='2106250'>treat</span> <span m='2106460'>left</span>
  <span m='2106730'>as</span> <span m='2106850'>right</span> <span m='2107030'>and</span>
  <span m='2107120'>right</span> <span m='2107300'>as</span> <span m='2107390'>left.</span>
  <span m='2107880'>It's</span> <span m='2107930'>basically</span> <span m='2108410'>the</span>
  <span m='2108530'>dyslexic</span> <span m='2109220'>approach.</span> </p><p><span
  m='2110180'>You</span> <span m='2110240'>have</span> <span m='2110390'>a</span>
  <span m='2110450'>bit</span> <span m='2110660'>saying</span> <span m='2111950'>from</span>
  <span m='2112970'>here</span> <span m='2113330'>down</span> <span m='2113570'>to</span>
  <span m='2113660'>here,</span> <span m='2114350'>mark</span> <span m='2114560'>everything</span>
  <span m='2114890'>as</span> <span m='2115010'>dyslexic.</span> <span m='2116540'>And</span>
  <span m='2116660'>so</span> <span m='2116870'>you</span> <span m='2117080'>invert</span>
  <span m='2117440'>left</span> <span m='2117680'>and</span> <span m='2117770'>right.</span>
  <span m='2118040'>So</span> <span m='2118160'>I</span> <span m='2118220'>think,</span>
  <span m='2118490'>with</span> <span m='2118790'>this</span> <span m='2119000'>appropriate</span>
  <span m='2119450'>augmentation,</span> <span m='2119990'>you</span> <span m='2120140'>can</span>
  <span m='2122180'>reroute</span> <span m='2122570'>the</span> <span m='2122690'>tree</span>
  <span m='2123170'>in</span> <span m='2124180'>log</span> <span m='2124380'>n</span>
  <span m='2124550'>time.</span> <span m='2125200'>But</span> <span m='2125540'>of</span>
  <span m='2125630'>course,</span> <span m='2125900'>there's</span> <span m='2126040'>some</span>
  <span m='2126230'>details</span> <span m='2126620'>to</span> <span m='2126740'>check.</span>
  </p><p><span m='2128570'>It</span> <span m='2128660'>might</span> <span m='2128870'>even</span>
  <span m='2129050'>be</span> <span m='2129170'>that's</span> <span m='2129360'>in</span>
  <span m='2129500'>the</span> <span m='2129590'>original</span> <span m='2129900'>link</span>
  <span m='2130040'>cut tree</span> <span m='2130340'>paper.</span> <span m='2130700'>But</span>
  <span m='2130820'>I</span> <span m='2130880'>don't</span> <span m='2131090'>remember</span>
  <span m='2131480'>offhand.</span> <span m='2132170'>So</span> <span m='2132470'>I'm</span>
  <span m='2132560'>pretty</span> <span m='2132800'>sure</span> <span m='2132950'>it</span>
  <span m='2133040'>works,</span> <span m='2134000'>and</span> <span m='2134180'>therefore,</span>
  <span m='2134480'>gives</span> <span m='2134660'>you</span> <span m='2134750'>dynamic</span>
  <span m='2135110'>connectivity.</span> <span m='2135740'>But</span> <span m='2135890'>if</span>
  <span m='2136010'>it</span> <span m='2136070'>doesn't,</span> <span m='2136400'>Euler-tour</span>
  <span m='2136880'>trees</span> <span m='2137120'>do</span> <span m='2137240'>it</span>
  <span m='2137310'>too.</span> <span m='2137610'>So</span> <span m='2138920'>we're</span>
  <span m='2139090'>covered</span> <span m='2139400'>either</span> <span m='2139610'>way.</span>
  </p><p><span m='2141170'>So</span> <span m='2141320'>that's</span> <span m='2141500'>Euler-tour</span>
  <span m='2141980'>trees.</span> <span m='2142460'>Next</span> <span m='2142790'>on</span>
  <span m='2142910'>our</span> <span m='2143000'>list</span> <span m='2143330'>is</span>
  <span m='2143690'>decremental</span> <span m='2144350'>connectivity</span> <span
  m='2144980'>in</span> <span m='2145100'>trees.</span> <span m='2146180'>So</span>
  <span m='2146240'>we're</span> <span m='2146300'>going</span> <span m='2146420'>to</span>
  <span m='2146480'>solve</span> <span m='2146750'>a</span> <span m='2146810'>weaker</span>
  <span m='2147080'>problem,</span> <span m='2147690'>which</span> <span m='2147740'>is</span>
  <span m='2147860'>just</span> <span m='2148670'>deletions</span> <span m='2149180'>only</span>
  <span m='2149840'>instead</span> <span m='2150110'>of</span> <span m='2150200'>inserts</span>
  <span m='2150560'>and</span> <span m='2150650'>deletes.</span> <span m='2151790'>We're</span>
  <span m='2151880'>going</span> <span m='2152000'>to</span> <span m='2152060'>solve</span>
  <span m='2152330'>it</span> <span m='2152420'>faster.</span> <span m='2155300'>Constant</span>
  <span m='2155840'>time</span> <span m='2156080'>per</span> <span m='2156230'>operation.</span>
  <span m='2158450'>This</span> <span m='2158630'>is</span> <span m='2158930'>just</span>
  <span m='2159170'>a</span> <span m='2159230'>fun</span> <span m='2159440'>little</span>
  <span m='2159650'>result.</span> </p><p><span m='2176650'>It's</span> <span m='2176830'>fun</span>
  <span m='2177070'>because</span> <span m='2177370'>it</span> <span m='2177460'>uses</span>
  <span m='2178510'>some</span> <span m='2178720'>techniques</span> <span m='2179140'>we</span>
  <span m='2179260'>know.</span> <span m='2181270'>So</span> <span m='2182050'>bound</span>
  <span m='2182470'>is</span> <span m='2182830'>constant</span> <span m='2183380'>amortized,</span>
  <span m='2184930'>assuming</span> <span m='2186100'>all</span> <span m='2186400'>edges</span>
  <span m='2186700'>get</span> <span m='2186850'>deleted.</span> <span m='2195280'>We</span>
  <span m='2195400'>need</span> <span m='2195550'>to</span> <span m='2195670'>assume</span>
  <span m='2196030'>this,</span> <span m='2196360'>essentially,</span> <span m='2196780'>because</span>
  <span m='2196990'>we're</span> <span m='2197110'>amortizing</span> <span m='2197920'>against</span>
  <span m='2198220'>the</span> <span m='2198310'>future.</span> </p><p><span m='2199460'>So</span>
  <span m='2201380'>we</span> <span m='2201490'>need</span> <span m='2201640'>to</span>
  <span m='2201760'>get</span> <span m='2201910'>all</span> <span m='2202060'>the</span>
  <span m='2202180'>way</span> <span m='2202300'>to</span> <span m='2202420'>the</span>
  <span m='2202570'>end.</span> <span m='2203710'>Overall,</span> <span m='2204250'>over</span>
  <span m='2204610'>n</span> <span m='2204760'>operations</span> <span m='2205330'>it's</span>
  <span m='2205420'>going</span> <span m='2205570'>to</span> <span m='2205630'>take</span>
  <span m='2205780'>order</span> <span m='2205960'>n</span> <span m='2206140'>time.</span>
  <span m='2209050'>This</span> <span m='2209290'>is,</span> <span m='2209380'>again,</span>
  <span m='2209650'>a</span> <span m='2209740'>series</span> <span m='2210280'>of</span>
  <span m='2210580'>refinements,</span> <span m='2211290'>or</span> <span m='2211570'>a</span>
  <span m='2211630'>bunch</span> <span m='2212050'>of</span> <span m='2212230'>pieces</span>
  <span m='2212590'>of the</span> <span m='2212710'>solution</span> <span m='2213160'>that</span>
  <span m='2213310'>get</span> <span m='2213520'>combined</span> <span m='2213880'>together,</span>
  <span m='2214250'>not</span> <span m='2214420'>a</span> <span m='2214480'>sequential</span>
  <span m='2214900'>algorithm.</span> </p><p><span m='2217540'>So</span> <span m='2217780'>the</span>
  <span m='2217900'>first</span> <span m='2218140'>observation</span> <span m='2218680'>is,</span>
  <span m='2218800'>of</span> <span m='2218920'>course,</span> <span m='2219190'>we</span>
  <span m='2219310'>can</span> <span m='2219460'>do</span> <span m='2220150'>order</span>
  <span m='2220390'>log</span> <span m='2220600'>n.</span> <span m='2221200'>We</span>
  <span m='2221450'>know,</span> <span m='2222070'>now,</span> <span m='2222370'>maybe</span>
  <span m='2222700'>two</span> <span m='2222910'>ways</span> <span m='2223150'>to</span>
  <span m='2223270'>do</span> <span m='2223420'>it.</span> <span m='2224350'>But</span>
  <span m='2225070'>you can</span> <span m='2225250'>use</span> <span m='2225670'>Euler-tour</span>
  <span m='2226090'>trees</span> <span m='2226330'>and</span> <span m='2226420'>only</span>
  <span m='2226720'>do</span> <span m='2226840'>cuts,</span> <span m='2227850'>life</span>
  <span m='2228010'>is</span> <span m='2228295'>easy.</span> <span m='2228580'>Link</span>
  <span m='2228780'>cut trees,</span> <span m='2229180'>you</span> <span m='2229240'>could</span>
  <span m='2229390'>also</span> <span m='2229630'>just</span> <span m='2229810'>do</span>
  <span m='2229930'>cuts.</span> <span m='2230170'>You</span> <span m='2230230'>don't</span>
  <span m='2230410'>even</span> <span m='2230590'>need</span> <span m='2231310'>rerouting.</span>
  <span m='2231980'>Rerouting</span> <span m='2232390'>was</span> <span m='2232540'>only</span>
  <span m='2232840'>for</span> <span m='2233050'>joins.</span> </p><p><span m='2234790'>So</span>
  <span m='2234970'>that</span> <span m='2235120'>may</span> <span m='2235270'>seem</span>
  <span m='2235570'>obvious.</span> <span m='2236060'>But</span> <span m='2237670'>how</span>
  <span m='2237820'>do</span> <span m='2237910'>we</span> <span m='2238030'>reduce</span>
  <span m='2238300'>the</span> <span m='2238390'>log</span> <span m='2238630'>n</span>
  <span m='2238680'>to</span> <span m='2238840'>a</span> <span m='2238900'>constant?</span>
  <span m='2241140'>In</span> <span m='2241360'>general,</span> <span m='2241810'>in</span>
  <span m='2241900'>this</span> <span m='2242050'>class?</span> </p><p><span m='2243510'>AUDIENCE:</span>
  <span m='2243985'>Make up tables.</span> </p><p><span m='2244935'>ERIK DEMAINE:</span>
  <span m='2245410'>Indirection,</span> <span m='2246550'>and</span> <span m='2246700'>maybe</span>
  <span m='2246940'>look</span> <span m='2247090'>up</span> <span m='2247240'>tables.</span>
  <span m='2247650'>Yep.</span> <span m='2248440'>How</span> <span m='2248590'>do</span>
  <span m='2248680'>we</span> <span m='2248770'>do</span> <span m='2248980'>indirection</span>
  <span m='2249520'>in</span> <span m='2249670'>a</span> <span m='2249730'>tree?</span>
  </p><p><span m='2251858'>AUDIENCE:</span> <span m='2252079'>Leaf</span> <span m='2252300'>pruning?</span>
  </p><p><span m='2253184'>ERIK DEMAINE:</span> <span m='2253630'>Leaf</span> <span
  m='2254210'>pruning,</span> <span m='2254680'>leaf</span> <span m='2254920'>trimming,</span>
  <span m='2255850'>whatever</span> <span m='2256090'>you</span> <span m='2256180'>want</span>
  <span m='2256300'>to</span> <span m='2256360'>call</span> <span m='2256570'>it.</span>
  <span m='2257540'>Should</span> <span m='2258300'>call</span> <span m='2258820'>it</span>
  <span m='2259420'>the</span> <span m='2260350'>Edward</span> <span m='2260650'>Scissorhands</span>
  <span m='2261250'>approach,</span> <span m='2261730'>or</span> <span m='2261790'>something.</span>
  <span m='2263380'>So</span> <span m='2263800'>leaf</span> <span m='2264040'>trimming,</span>
  <span m='2264520'>what</span> <span m='2264730'>I</span> <span m='2264790'>want</span>
  <span m='2264970'>to</span> <span m='2265030'>do</span> <span m='2265420'>is</span>
  <span m='2266170'>cut</span> <span m='2266650'>below</span> <span m='2268690'>maximally</span>
  <span m='2270490'>deep</span> <span m='2270940'>nodes</span> <span m='2271540'>that</span>
  <span m='2271750'>are</span> <span m='2272070'>[INAUDIBLE]</span> <span m='2272320'>log</span>
  <span m='2272605'>n.</span> <span m='2280510'>Say</span> <span m='2280730'>with</span>
  <span m='2281090'>greater</span> <span m='2281480'>than</span> <span m='2281780'>log</span>
  <span m='2282210'>n</span> <span m='2283380'>descendants.</span> </p><p><span m='2289400'>So</span>
  <span m='2289930'>we</span> <span m='2290110'>have</span> <span m='2290440'>our</span>
  <span m='2290530'>top</span> <span m='2290830'>tree.</span> <span m='2292600'>And</span>
  <span m='2292750'>then</span> <span m='2293020'>hanging</span> <span m='2293380'>off</span>
  <span m='2293620'>some</span> <span m='2293800'>nodes</span> <span m='2294100'>here,</span>
  <span m='2294370'>we're</span> <span m='2294430'>going</span> <span m='2294550'>to</span>
  <span m='2294610'>have</span> <span m='2294910'>some</span> <span m='2295090'>bottom</span>
  <span m='2295390'>trees.</span> <span m='2303150'>These</span> <span m='2303480'>each</span>
  <span m='2303690'>have,</span> <span m='2304540'>at</span> <span m='2304710'>most,</span>
  <span m='2304980'>log n</span> <span m='2305310'>nodes.</span> <span m='2306840'>These</span>
  <span m='2307810'>have</span> <span m='2308130'>bigger</span> <span m='2308430'>than</span>
  <span m='2309060'>log</span> <span m='2309330'>n</span> <span m='2309450'>nodes</span>
  <span m='2309690'>below</span> <span m='2310020'>them.</span> <span m='2310260'>So</span>
  <span m='2310410'>we</span> <span m='2310500'>can</span> <span m='2310650'>charge</span>
  <span m='2310980'>every</span> <span m='2311160'>leaf</span> <span m='2311400'>in</span>
  <span m='2311490'>the</span> <span m='2311580'>structure</span> <span m='2312060'>to</span>
  <span m='2312240'>the</span> <span m='2312360'>log</span> <span m='2312630'>n</span>
  <span m='2313200'>nodes</span> <span m='2313440'>below</span> <span m='2313740'>it.</span>
  </p><p><span m='2314950'>And</span> <span m='2315030'>so</span> <span m='2315450'>up</span>
  <span m='2315660'>here</span> <span m='2315930'>we</span> <span m='2316110'>have</span>
  <span m='2316440'>at</span> <span m='2316630'>most,</span> <span m='2318240'>sorry,</span>
  <span m='2319500'>n</span> <span m='2319860'>over</span> <span m='2320190'>log</span>
  <span m='2320430'>n</span> <span m='2321570'>leaves.</span> <span m='2322320'>Not</span>
  <span m='2322890'>nodes.</span> <span m='2323580'>Nodes</span> <span m='2323880'>could</span>
  <span m='2324000'>still</span> <span m='2324210'>be</span> <span m='2324330'>linear</span>
  <span m='2325230'>if</span> <span m='2325710'>the</span> <span m='2325800'>graph</span>
  <span m='2326040'>is</span> <span m='2326110'>a</span> <span m='2326190'>path.</span>
  <span m='2326610'>But</span> <span m='2327240'>at</span> <span m='2327540'>most,</span>
  <span m='2327720'>n</span> <span m='2327810'>over</span> <span m='2327980'>log</span>
  <span m='2328200'>n</span> <span m='2328350'>leaves.</span> <span m='2329850'>So</span>
  <span m='2330030'>we</span> <span m='2330120'>have,</span> <span m='2330270'>at</span>
  <span m='2330330'>most,</span> <span m='2330560'>n</span> <span m='2330660'>over</span>
  <span m='2330830'>log</span> <span m='2331110'>n</span> <span m='2331500'>branching</span>
  <span m='2331920'>nodes</span> <span m='2332190'>up here.</span> </p><p><span m='2333750'>So</span>
  <span m='2334200'>what</span> <span m='2334380'>we</span> <span m='2334500'>need</span>
  <span m='2334860'>is</span> <span m='2335070'>a</span> <span m='2335130'>structure</span>
  <span m='2335610'>for</span> <span m='2335970'>dealing</span> <span m='2336300'>with</span>
  <span m='2336450'>long</span> <span m='2336720'>paths</span> <span m='2337650'>in</span>
  <span m='2337800'>the</span> <span m='2337890'>top,</span> <span m='2338610'>a</span>
  <span m='2338730'>structure</span> <span m='2339120'>for</span> <span m='2339240'>dealing</span>
  <span m='2339600'>with</span> <span m='2339780'>log</span> <span m='2340090'>n size</span>
  <span m='2340470'>things</span> <span m='2340980'>down</span> <span m='2341220'>here,</span>
  <span m='2342180'>and</span> <span m='2342390'>a</span> <span m='2342420'>structure</span>
  <span m='2342840'>for</span> <span m='2343770'>combining</span> <span m='2344220'>the</span>
  <span m='2344310'>paths</span> <span m='2344610'>together.</span> <span m='2346390'>And</span>
  <span m='2346490'>that's</span> <span m='2346770'>the</span> <span m='2346890'>easy</span>
  <span m='2347160'>part.</span> </p><p><span m='2349620'>If</span> <span m='2349770'>we</span>
  <span m='2349860'>treat</span> <span m='2350190'>each</span> <span m='2350550'>long</span>
  <span m='2350850'>path</span> <span m='2351150'>as</span> <span m='2351270'>a</span>
  <span m='2351330'>single</span> <span m='2351660'>edge,</span> <span m='2352080'>basically,</span>
  <span m='2352440'>we</span> <span m='2352560'>look</span> <span m='2352710'>at</span>
  <span m='2352830'>the</span> <span m='2352980'>compressed</span> <span m='2353910'>top</span>
  <span m='2354270'>tree,</span> <span m='2355070'>in</span> <span m='2355140'>the</span>
  <span m='2355230'>sense</span> <span m='2355500'>of</span> <span m='2355590'>compressed</span>
  <span m='2355980'>tries.</span> <span m='2356430'>But</span> <span m='2356580'>it's</span>
  <span m='2356670'>now</span> <span m='2356800'>a</span> <span m='2356860'>tree</span>
  <span m='2357090'>instead</span> <span m='2357360'>of</span> <span m='2357420'>a</span>
  <span m='2357630'>try.</span> <span m='2357840'>I</span> <span m='2357960'>guess</span>
  <span m='2358170'>it's</span> <span m='2358290'>a</span> <span m='2358350'>try.</span>
  <span m='2358650'>Whatever</span> </p><p><span m='2360080'>We</span> <span m='2360210'>look</span>
  <span m='2360360'>at</span> <span m='2360450'>the</span> <span m='2360540'>compressed</span>
  <span m='2360910'>tree</span> <span m='2361060'>up</span> <span m='2361230'>here.</span>
  <span m='2361650'>That</span> <span m='2361830'>will</span> <span m='2361950'>have</span>
  <span m='2362130'>size,</span> <span m='2362700'>n</span> <span m='2362850'>over
  log</span> <span m='2363180'>n.</span> <span m='2363780'>And</span> <span m='2363900'>then</span>
  <span m='2364140'>we</span> <span m='2364230'>can</span> <span m='2364380'>afford</span>
  <span m='2364680'>to</span> <span m='2364800'>use</span> <span m='2364920'>structure</span>
  <span m='2365370'>one.</span> </p><p><span m='2367320'>Why?</span> <span m='2367800'>Because</span>
  <span m='2368940'>in</span> <span m='2369030'>some</span> <span m='2369240'>sense,</span>
  <span m='2369840'>there</span> <span m='2370020'>only</span> <span m='2370290'>be</span>
  <span m='2370560'>n</span> <span m='2370770'>over</span> <span m='2370980'>log</span>
  <span m='2371230'>n</span> <span m='2371310'>operations</span> <span m='2371820'>performed.</span>
  <span m='2372855'>So</span> <span m='2373230'>it's</span> <span m='2373350'>not</span>
  <span m='2373530'>a</span> <span m='2373590'>space</span> <span m='2373950'>issue</span>
  <span m='2374190'>there</span> <span m='2374280'>we're</span> <span m='2374400'>trying</span>
  <span m='2374640'>to</span> <span m='2374730'>save.</span> <span m='2374970'>It's</span>
  <span m='2375090'>a</span> <span m='2375150'>time</span> <span m='2375510'>issue.</span>
  <span m='2375760'>So</span> <span m='2375900'>a</span> <span m='2375960'>little</span>
  <span m='2376200'>different</span> <span m='2376530'>from</span> <span m='2376710'>the</span>
  <span m='2376800'>past.</span> </p><p><span m='2379920'>There</span> <span m='2380190'>are</span>
  <span m='2380340'>only</span> <span m='2380400'>n</span> <span m='2381240'>over</span>
  <span m='2381450'>log</span> <span m='2381690'>n</span> <span m='2381810'>times</span>
  <span m='2382110'>that</span> <span m='2382200'>you</span> <span m='2382260'>can</span>
  <span m='2382410'>destroy</span> <span m='2382830'>a</span> <span m='2382890'>path</span>
  <span m='2383220'>up</span> <span m='2383360'>here.</span> <span m='2383640'>Because</span>
  <span m='2383790'>there's</span> <span m='2383940'>only</span> <span m='2384180'>n</span>
  <span m='2384270'>over</span> <span m='2384430'>log</span> <span m='2384690'>n</span>
  <span m='2384810'>paths.</span> <span m='2385920'>Each</span> <span m='2386070'>time</span>
  <span m='2386220'>you</span> <span m='2386280'>destroy</span> <span m='2386610'>a</span>
  <span m='2386640'>path,</span> <span m='2386940'>I</span> <span m='2387000'>do</span>
  <span m='2387150'>an</span> <span m='2387240'>operation</span> <span m='2387720'>up</span>
  <span m='2387810'>here,</span> <span m='2388000'>I</span> <span m='2388080'>pay</span>
  <span m='2388290'>log</span> <span m='2388590'>n.</span> </p><p><span m='2389030'>But</span>
  <span m='2389400'>if the</span> <span m='2389550'>total</span> <span m='2389820'>number</span>
  <span m='2390030'>of</span> <span m='2390120'>operations</span> <span m='2390780'>n</span>
  <span m='2390870'>over</span> <span m='2391050'>log</span> <span m='2391300'>n,</span>
  <span m='2391950'>total</span> <span m='2392190'>cost</span> <span m='2392490'>is</span>
  <span m='2392610'>linear.</span> <span m='2393120'>So</span> <span m='2393270'>constant</span>
  <span m='2393750'>amortized</span> <span m='2394350'>against</span> <span m='2394650'>the</span>
  <span m='2394740'>future.</span> <span m='2396670'>So</span> <span m='2397130'>I'm</span>
  <span m='2397260'>going</span> <span m='2397560'>to</span> <span m='2397920'>use</span>
  <span m='2398460'>structure</span> <span m='2399000'>one</span> <span m='2400410'>on</span>
  <span m='2400920'>the</span> <span m='2401040'>compressed</span> <span m='2402330'>top</span>
  <span m='2402690'>tree.</span> <span m='2408640'>And</span> <span m='2408850'>what</span>
  <span m='2409000'>remains</span> <span m='2409600'>is</span> <span m='2409900'>what</span>
  <span m='2410080'>I</span> <span m='2410170'>do</span> <span m='2410290'>in</span>
  <span m='2410350'>the</span> <span m='2410440'>bottom</span> <span m='2410740'>trees?</span>
  <span m='2411820'>What</span> <span m='2412000'>I</span> <span m='2412090'>do</span>
  <span m='2412240'>on</span> <span m='2412330'>the</span> <span m='2412420'>paths?</span>
  <span m='2413050'>And</span> <span m='2413170'>then</span> <span m='2413260'>how</span>
  <span m='2413410'>do</span> <span m='2413530'>I</span> <span m='2413590'>combine</span>
  <span m='2413980'>all</span> <span m='2414070'>those</span> <span m='2414280'>results</span>
  <span m='2414640'>together?</span> </p><p><span m='2415390'>Let's</span> <span m='2415540'>first</span>
  <span m='2415750'>talk</span> <span m='2415960'>about</span> <span m='2416170'>how</span>
  <span m='2416290'>to</span> <span m='2416410'>combine</span> <span m='2416770'>the</span>
  <span m='2416830'>results.</span> <span m='2417380'>There</span> <span m='2417430'>are</span>
  <span m='2417460'>a</span> <span m='2417490'>couple</span> <span m='2417820'>of</span>
  <span m='2417910'>different</span> <span m='2418180'>cases.</span> <span m='2419650'>It</span>
  <span m='2421470'>So</span> <span m='2421600'>we're</span> <span m='2421690'>doing</span>
  <span m='2421900'>a</span> <span m='2421960'>query</span> <span m='2422350'>on</span>
  <span m='2422470'>v, w,</span> <span m='2423220'>and</span> <span m='2423310'>we</span>
  <span m='2423430'>want</span> <span m='2423640'>to</span> <span m='2423730'>do</span>
  <span m='2424010'>connectivity</span> <span m='2424710'>query.</span> </p><p><span
  m='2427630'>So</span> <span m='2427900'>it</span> <span m='2427990'>could</span>
  <span m='2428200'>be</span> <span m='2428590'>that</span> <span m='2428770'>v and</span>
  <span m='2429045'>w</span> <span m='2429320'>are</span> <span m='2429460'>in</span>
  <span m='2429640'>the</span> <span m='2429760'>same</span> <span m='2431440'>bottom</span>
  <span m='2431860'>tree.</span> <span m='2432940'>In</span> <span m='2433060'>that</span>
  <span m='2433240'>case,</span> <span m='2434330'>we</span> <span m='2434350'>just</span>
  <span m='2434560'>need</span> <span m='2434770'>to</span> <span m='2436000'>do</span>
  <span m='2436210'>a</span> <span m='2436270'>query</span> <span m='2436720'>within</span>
  <span m='2437050'>a</span> <span m='2437140'>bottom</span> <span m='2437490'>tree.</span>
  <span m='2437860'>So</span> <span m='2438460'>as</span> <span m='2438550'>long</span>
  <span m='2438760'>as</span> <span m='2438850'>we</span> <span m='2438970'>can</span>
  <span m='2439120'>solve</span> <span m='2439570'>the</span> <span m='2439630'>bottom</span>
  <span m='2439960'>tree</span> <span m='2440110'>case</span> <span m='2442120'>quickly,</span>
  <span m='2442540'>we're</span> <span m='2442780'>happy.</span> <span m='2443650'>Constant</span>
  <span m='2443935'>time,</span> <span m='2444220'>I</span> <span m='2444280'>guess.</span>
  <span m='2445960'>That</span> <span m='2446110'>will</span> <span m='2446230'>turn</span>
  <span m='2446410'>out</span> <span m='2446470'>to</span> <span m='2446590'>be</span>
  <span m='2446770'>pretty</span> <span m='2446980'>easy.</span> </p><p><span m='2449700'>That's</span>
  <span m='2449800'>the easy</span> <span m='2450220'>case.</span> <span m='2451990'>Otherwise</span>
  <span m='2453580'>they</span> <span m='2453670'>could</span> <span m='2453820'>be</span>
  <span m='2453940'>in</span> <span m='2454030'>different</span> <span m='2454330'>bottom</span>
  <span m='2454660'>trees.</span> <span m='2455260'>So</span> <span m='2455380'>it</span>
  <span m='2455440'>could</span> <span m='2455620'>be</span> <span m='2456330'>v's</span>
  <span m='2456670'>down</span> <span m='2456910'>here</span> <span m='2458530'>and</span>
  <span m='2460180'>w's</span> <span m='2460740'>in</span> <span m='2460840'>some</span>
  <span m='2461050'>other</span> <span m='2461230'>bottom</span> <span m='2461530'>tree.</span>
  </p><p><span m='2462430'>So</span> <span m='2462550'>then</span> <span m='2462730'>we</span>
  <span m='2462880'>have</span> <span m='2463330'>three</span> <span m='2463600'>queries</span>
  <span m='2464050'>we</span> <span m='2464170'>need</span> <span m='2464290'>to</span>
  <span m='2464410'>do.</span> <span m='2465080'>One</span> <span m='2465190'>is</span>
  <span m='2465310'>like</span> <span m='2465490'>this.</span> <span m='2466570'>One</span>
  <span m='2466720'>is</span> <span m='2466840'>like</span> <span m='2467050'>this.</span>
  <span m='2468700'>We</span> <span m='2468820'>need</span> <span m='2468940'>to</span>
  <span m='2469030'>test</span> <span m='2469330'>the</span> <span m='2469420'>single</span>
  <span m='2469750'>edge,</span> <span m='2470080'>but</span> <span m='2470200'>that's</span>
  <span m='2470530'>trivial.</span> <span m='2471880'>And</span> <span m='2472000'>then</span>
  <span m='2472120'>we</span> <span m='2472210'>need</span> <span m='2472350'>to</span>
  <span m='2472420'>do</span> <span m='2472540'>a</span> <span m='2472570'>query</span>
  <span m='2472890'>in</span> <span m='2472990'>the</span> <span m='2473080'>top.</span>
  <span m='2474660'>Can</span> <span m='2474820'>you</span> <span m='2474910'>get</span>
  <span m='2475060'>from</span> <span m='2475240'>here</span> <span m='2475390'>to</span>
  <span m='2475480'>here?</span> </p><p><span m='2476300'>Now,</span> <span m='2477250'>these</span>
  <span m='2477430'>nodes</span> <span m='2477640'>are</span> <span m='2477730'>a</span>
  <span m='2477760'>little</span> <span m='2478000'>bit</span> <span m='2478150'>special,</span>
  <span m='2478510'>because</span> <span m='2478840'>they</span> <span m='2478960'>are</span>
  <span m='2479080'>leaves.</span> <span m='2479500'>They</span> <span m='2479650'>will</span>
  <span m='2479800'>be</span> <span m='2480010'>at</span> <span m='2480190'>the</span>
  <span m='2480520'>ends</span> <span m='2481150'>of</span> <span m='2481420'>paths.</span>
  </p><p><span m='2482710'>So</span> <span m='2482860'>this</span> <span m='2483070'>is</span>
  <span m='2483190'>really</span> <span m='2483490'>just</span> <span m='2483670'>a</span>
  <span m='2483730'>query</span> <span m='2484150'>we</span> <span m='2484330'>can</span>
  <span m='2484510'>do</span> <span m='2484720'>using</span> <span m='2485110'>structure</span>
  <span m='2485540'>one.</span> <span m='2486550'>Because</span> <span m='2488710'>we</span>
  <span m='2488860'>take</span> <span m='2489190'>either</span> <span m='2489520'>an</span>
  <span m='2489640'>entire</span> <span m='2490030'>path</span> <span m='2490330'>or</span>
  <span m='2490450'>no</span> <span m='2490660'>path</span> <span m='2490930'>at</span>
  <span m='2491020'>all.</span> <span m='2492610'>So</span> <span m='2493120'>we</span>
  <span m='2493240'>can</span> <span m='2493390'>look</span> <span m='2493570'>at</span>
  <span m='2493660'>the</span> <span m='2493750'>compressed</span> <span m='2494320'>tree</span>
  <span m='2494650'>and</span> <span m='2494740'>that's</span> <span m='2494950'>enough,</span>
  <span m='2495780'>because</span> <span m='2495860'>the</span> <span m='2495940'>leaves</span>
  <span m='2496390'>exist on</span> <span m='2496880'>the</span> <span m='2496990'>compressed</span>
  <span m='2497350'>tree.</span> </p><p><span m='2498180'>That's</span> <span m='2498340'>not</span>
  <span m='2498520'>always</span> <span m='2498760'>the</span> <span m='2498850'>case.</span>
  <span m='2499430'>A</span> <span m='2499530'>different</span> <span m='2499690'>situation</span>
  <span m='2501430'>is</span> <span m='2502030'>this.</span> <span m='2502390'>We</span>
  <span m='2502510'>might</span> <span m='2502720'>have,</span> <span m='2503120'>for</span>
  <span m='2503140'>example,</span> <span m='2504000'>v</span> <span m='2504280'>up</span>
  <span m='2504410'>here,</span> <span m='2505110'>w</span> <span m='2505480'>up</span>
  <span m='2505660'>here,</span> <span m='2505860'>and</span> <span m='2507280'>v</span>
  <span m='2507565'>and w</span> <span m='2507850'>are</span> <span m='2507970'>not</span>
  <span m='2508210'>down</span> <span m='2508480'>here.</span> <span m='2508760'>So</span>
  <span m='2508810'>these</span> <span m='2508990'>are</span> <span m='2509110'>irrelevant.</span>
  <span m='2510200'>We</span> <span m='2510300'>just</span> <span m='2510310'>want</span>
  <span m='2510490'>to</span> <span m='2510550'>know,</span> <span m='2510700'>in</span>
  <span m='2510850'>the</span> <span m='2510940'>top</span> <span m='2511220'>tree,</span>
  <span m='2511450'>can</span> <span m='2511660'>I</span> <span m='2511720'>get</span>
  <span m='2511870'>from</span> <span m='2512020'>v</span> <span m='2512350'>to</span>
  <span m='2512680'>w?</span> </p><p><span m='2513610'>Now,</span> <span m='2513700'>this
  is</span> <span m='2513880'>a</span> <span m='2513910'>little</span> <span m='2514120'>more</span>
  <span m='2514300'>awkward</span> <span m='2514720'>because</span> <span m='2515830'>v</span>
  <span m='2516100'>is</span> <span m='2516220'>going</span> <span m='2516370'>to</span>
  <span m='2516430'>live</span> <span m='2516670'>on</span> <span m='2516820'>some</span>
  <span m='2517060'>path.</span> <span m='2518380'>w</span> <span m='2518680'>is</span>
  <span m='2518740'>going</span> <span m='2518890'>to</span> <span m='2518950'>live</span>
  <span m='2519130'>on</span> <span m='2519250'>some</span> <span m='2519460'>path.</span>
  <span m='2519790'>But</span> <span m='2519910'>it</span> <span m='2519970'>might</span>
  <span m='2520150'>be</span> <span m='2520270'>in</span> <span m='2520330'>the</span>
  <span m='2520450'>middle</span> <span m='2520720'>of</span> <span m='2520840'>a</span>
  <span m='2520900'>path.</span> </p><p><span m='2522220'>And</span> <span m='2522340'>so</span>
  <span m='2522670'>there's</span> <span m='2522940'>now</span> <span m='2523120'>three</span>
  <span m='2523360'>queries</span> <span m='2523750'>we</span> <span m='2523840'>need</span>
  <span m='2523960'>to</span> <span m='2524050'>do.</span> <span m='2524330'>One</span>
  <span m='2524470'>is</span> <span m='2525010'>can</span> <span m='2525220'>I</span>
  <span m='2525310'>get</span> <span m='2525580'>to</span> <span m='2525790'>the</span>
  <span m='2525940'>top</span> <span m='2526270'>of</span> <span m='2526360'>my</span>
  <span m='2526540'>path?</span> <span m='2528160'>And</span> <span m='2528340'>then</span>
  <span m='2528520'>can</span> <span m='2528760'>I</span> <span m='2528850'>get</span>
  <span m='2529060'>from</span> <span m='2529810'>one</span> <span m='2529990'>path</span>
  <span m='2530290'>to</span> <span m='2530410'>the</span> <span m='2530530'>other?</span>
  </p><p><span m='2531290'>So</span> <span m='2531340'>these</span> <span m='2531640'>are</span>
  <span m='2531730'>branching</span> <span m='2532210'>nodes</span> <span m='2532450'>here.</span>
  <span m='2533210'>And</span> <span m='2533290'>can</span> <span m='2533470'>I</span>
  <span m='2533500'>get</span> <span m='2533680'>from</span> <span m='2533800'>this</span>
  <span m='2533920'>branching</span> <span m='2534340'>node</span> <span m='2534420'>to</span>
  <span m='2534550'>that</span> <span m='2534730'>branching</span> <span m='2535090'>node?</span>
  <span m='2535330'>It</span> <span m='2535420'>might</span> <span m='2535600'>not</span>
  <span m='2535720'>always</span> <span m='2535930'>be</span> <span m='2536050'>going</span>
  <span m='2536320'>up.</span> </p><p><span m='2536500'>Sometimes</span> <span m='2536860'>you</span>
  <span m='2536920'>have</span> <span m='2537010'>to</span> <span m='2537100'>go</span>
  <span m='2537220'>down.</span> <span m='2537640'>But</span> <span m='2538270'>point</span>
  <span m='2538480'>is,</span> <span m='2538630'>a</span> <span m='2538720'>constant</span>
  <span m='2539080'>number</span> <span m='2539290'>of</span> <span m='2539350'>queries</span>
  <span m='2539800'>to</span> <span m='2540160'>path</span> <span m='2540520'>structures,</span>
  <span m='2541590'>to</span> <span m='2541750'>compressed</span> <span m='2542250'>structures.</span>
  <span m='2542830'>This</span> <span m='2542950'>is,</span> <span m='2543070'>again,</span>
  <span m='2543340'>the</span> <span m='2543460'>one</span> <span m='2543850'>structure.</span>
  </p><p><span m='2544900'>And</span> <span m='2545720'>a</span> <span m='2545830'>constant</span>
  <span m='2546190'>number</span> <span m='2546490'>of</span> <span m='2546730'>calls</span>
  <span m='2547090'>to</span> <span m='2547320'>a</span> <span m='2547480'>bottom</span>
  <span m='2547810'>structure</span> <span m='2548680'>will</span> <span m='2548860'>suffice</span>
  <span m='2549250'>to</span> <span m='2549310'>answer</span> <span m='2549550'>the</span>
  <span m='2549670'>query.</span> <span m='2549970'>There's</span> <span m='2550150'>a</span>
  <span m='2550210'>few</span> <span m='2550450'>more</span> <span m='2550630'>cases</span>
  <span m='2550990'>that</span> <span m='2551080'>I</span> <span m='2551140'>haven't</span>
  <span m='2551410'>drawn.</span> <span m='2552220'>If</span> <span m='2552340'>you</span>
  <span m='2552430'>could</span> <span m='2552580'>be</span> <span m='2552700'>half</span>
  <span m='2553000'>of</span> <span m='2553090'>this</span> <span m='2553360'>and</span>
  <span m='2553480'>half</span> <span m='2553750'>of</span> <span m='2553810'>this.</span>
  </p><p><span m='2555406'>But it</span> <span m='2555790'>can</span> <span m='2555940'>all</span>
  <span m='2556030'>be</span> <span m='2556150'>done,</span> <span m='2556690'>as</span>
  <span m='2556840'>long</span> <span m='2557050'>as</span> <span m='2557140'>we</span>
  <span m='2557260'>can</span> <span m='2557400'>solve</span> <span m='2557650'>bottom</span>
  <span m='2558360'>and</span> <span m='2558520'>paths.</span> <span m='2559300'>So</span>
  <span m='2559450'>let's</span> <span m='2559660'>solve</span> <span m='2560680'>paths</span>
  <span m='2561130'>first,</span> <span m='2561500'>I</span> <span m='2561550'>think.</span>
  <span m='2562540'>Oh no,</span> <span m='2562750'>bottom</span> <span m='2563800'>trees,</span>
  <span m='2564070'>fine.</span> </p><p><span m='2565900'>So</span> <span m='2566350'>part</span>
  <span m='2566620'>3</span> <span m='2566890'>of</span> <span m='2566980'>the</span>
  <span m='2567040'>solution</span> <span m='2567960'>is</span> <span m='2568170'>solve</span>
  <span m='2568450'>a</span> <span m='2568510'>bottom</span> <span m='2568840'>tree.</span>
  <span m='2572170'>Here</span> <span m='2572410'>we</span> <span m='2572530'>can</span>
  <span m='2572650'>do</span> <span m='2572800'>it</span> <span m='2572920'>in</span>
  <span m='2573160'>constant</span> <span m='2573580'>worse</span> <span m='2573790'>case.</span>
  <span m='2578530'>So</span> <span m='2580000'>this</span> <span m='2580180'>is</span>
  <span m='2580270'>essentially</span> <span m='2580720'>the</span> <span m='2580840'>lookup</span>
  <span m='2581230'>table</span> <span m='2581530'>thing,</span> <span m='2581740'>although</span>
  <span m='2581900'>it's a</span> <span m='2582070'>pretty</span> <span m='2582340'>simple</span>
  <span m='2582670'>lookup</span> <span m='2582970'>table.</span> </p><p><span m='2583810'>What</span>
  <span m='2583960'>we</span> <span m='2584080'>do,</span> <span m='2586360'>bottom</span>
  <span m='2586630'>tree</span> <span m='2586870'>has</span> <span m='2587230'>only</span>
  <span m='2587500'>log n</span> <span m='2587890'>nodes.</span> <span m='2588860'>So</span>
  <span m='2588910'>we</span> <span m='2589000'>can</span> <span m='2589210'>represent</span>
  <span m='2589690'>1</span> <span m='2589900'>bit</span> <span m='2590110'>per</span>
  <span m='2590290'>node</span> <span m='2590680'>in</span> <span m='2590920'>a</span>
  <span m='2590980'>single</span> <span m='2591310'>word.</span> <span m='2592480'>And</span>
  <span m='2592630'>what</span> <span m='2592780'>we'll</span> <span m='2592900'>do,</span>
  <span m='2593560'>store</span> <span m='2593830'>bit</span> <span m='2594010'>vector</span>
  <span m='2597220'>of</span> <span m='2598630'>which</span> <span m='2598930'>edges</span>
  <span m='2602470'>have</span> <span m='2602740'>been</span> <span m='2602950'>deleted.</span>
  </p><p><span m='2607750'>In</span> <span m='2607930'>what</span> <span m='2608110'>order?</span>
  <span m='2608650'>I</span> <span m='2608740'>don't</span> <span m='2608890'>really</span>
  <span m='2609100'>care.</span> <span m='2609490'>Just</span> <span m='2609670'>pick</span>
  <span m='2609880'>some</span> <span m='2610780'>fixed</span> <span m='2611080'>order</span>
  <span m='2611920'>on</span> <span m='2612100'>the</span> <span m='2612250'>edges</span>
  <span m='2612580'>down</span> <span m='2612820'>here,</span> <span m='2613810'>and</span>
  <span m='2613990'>store</span> <span m='2614320'>the</span> <span m='2614470'>bits</span>
  <span m='2614800'>in</span> <span m='2614920'>that</span> <span m='2615070'>order.</span>
  <span m='2615790'>And</span> <span m='2615910'>say</span> <span m='2616090'>every</span>
  <span m='2616330'>edge</span> <span m='2616870'>knows</span> <span m='2617200'>its</span>
  <span m='2617320'>sequence.</span> </p><p><span m='2617840'>So</span> <span m='2618100'>you</span>
  <span m='2618250'>could</span> <span m='2618370'>do</span> <span m='2618640'>a</span>
  <span m='2618940'>depth</span> <span m='2619150'>first</span> <span m='2619360'>search</span>
  <span m='2619640'>at the</span> <span m='2619750'>beginning,</span> <span m='2620760'>to</span>
  <span m='2621100'>label</span> <span m='2621460'>the</span> <span m='2621610'>edges</span>
  <span m='2621910'>in</span> <span m='2622030'>some</span> <span m='2622810'>canonical</span>
  <span m='2623260'>order.</span> <span m='2624140'>And</span> <span m='2624190'>then</span>
  <span m='2624310'>every</span> <span m='2624580'>edge</span> <span m='2624910'>knows</span>
  <span m='2625360'>what</span> <span m='2625660'>its bit</span> <span m='2625990'>position</span>
  <span m='2626440'>is</span> <span m='2626620'>in</span> <span m='2626710'>the</span>
  <span m='2626800'>vector.</span> <span m='2627230'>So</span> <span m='2627310'>when</span>
  <span m='2627430'>I</span> <span m='2627490'>go</span> <span m='2627610'>to</span>
  <span m='2627700'>delete</span> <span m='2628000'>an</span> <span m='2628090'>edge,</span>
  <span m='2628810'>I</span> <span m='2628900'>just</span> <span m='2629470'>set</span>
  <span m='2629800'>that</span> <span m='2629980'>one</span> <span m='2630190'>bit</span>
  <span m='2630400'>using</span> <span m='2630700'>an</span> <span m='2630790'>or</span>
  <span m='2631060'>operation.</span> </p><p><span m='2633740'>Cool.</span> <span
  m='2634450'>So</span> <span m='2634630'>I</span> <span m='2634720'>can</span> <span
  m='2634900'>delete</span> <span m='2635170'>edges.</span> <span m='2635620'>I</span>
  <span m='2635680'>can</span> <span m='2635830'>actually</span> <span m='2636070'>even</span>
  <span m='2636250'>insert</span> <span m='2636550'>edges</span> <span m='2636850'>down</span>
  <span m='2637030'>here</span> <span m='2638170'>that</span> <span m='2638350'>used</span>
  <span m='2638650'>to</span> <span m='2638740'>exist.</span> <span m='2639190'>I</span>
  <span m='2639280'>could</span> <span m='2639430'>undelete</span> <span m='2639850'>an</span>
  <span m='2639970'>edge.</span> <span m='2640810'>But</span> <span m='2640960'>that</span>
  <span m='2641110'>only</span> <span m='2641320'>works</span> <span m='2641500'>in</span>
  <span m='2641590'>the</span> <span m='2641680'>bottom</span> <span m='2641980'>structure.</span>
  </p><p><span m='2642490'>So</span> <span m='2643540'>not</span> <span m='2643720'>generally</span>
  <span m='2644020'>useful.</span> <span m='2644850'>OK,</span> <span m='2645070'>so</span>
  <span m='2645460'>it's</span> <span m='2645610'>clear</span> <span m='2646030'>how</span>
  <span m='2646150'>to</span> <span m='2646240'>do</span> <span m='2646360'>an</span>
  <span m='2646420'>update,</span> <span m='2646750'>how</span> <span m='2646900'>to</span>
  <span m='2646990'>do</span> <span m='2647110'>a</span> <span m='2647170'>delete.</span>
  <span m='2647510'>I</span> <span m='2647590'>just</span> <span m='2647770'>mark</span>
  <span m='2648010'>a</span> <span m='2648070'>bit.</span> <span m='2648730'>How</span>
  <span m='2648910'>do</span> <span m='2649030'>I</span> <span m='2649090'>do</span>
  <span m='2649240'>a</span> <span m='2649300'>query?</span> </p><p><span m='2650230'>I</span>
  <span m='2650350'>want</span> <span m='2650560'>to</span> <span m='2650620'>know,</span>
  <span m='2650900'>given</span> <span m='2651100'>two</span> <span m='2651250'>nodes,</span>
  <span m='2651460'>v</span> <span m='2651760'>and w,</span> <span m='2652060'>one</span>
  <span m='2652210'>of</span> <span m='2652270'>them</span> <span m='2652420'>could</span>
  <span m='2652570'>be</span> <span m='2652690'>the</span> <span m='2652810'>root</span>
  <span m='2652960'>of</span> <span m='2653050'>the</span> <span m='2653140'>tree.</span>
  <span m='2654250'>I</span> <span m='2654460'>want</span> <span m='2654610'>to</span>
  <span m='2654670'>know</span> <span m='2654820'>can</span> <span m='2655120'>I</span>
  <span m='2655210'>get</span> <span m='2655420'>from</span> <span m='2655600'>v</span>
  <span m='2655945'>to w?</span> <span m='2656560'>Or</span> <span m='2657270'>there's</span>
  <span m='2657610'>only</span> <span m='2657820'>a</span> <span m='2657880'>single</span>
  <span m='2658150'>path</span> <span m='2658450'>that</span> <span m='2658570'>might</span>
  <span m='2658750'>exist.</span> <span m='2659340'>So</span> <span m='2659440'>it's</span>
  <span m='2659560'>a</span> <span m='2659620'>matter</span> <span m='2659880'>of</span>
  <span m='2660090'>has</span> <span m='2660550'>any</span> <span m='2660880'>edge</span>
  <span m='2661210'>along</span> <span m='2661630'>this</span> <span m='2661780'>path</span>
  <span m='2662120'>been</span> <span m='2662320'>deleted?</span> </p><p><span m='2664460'>So</span>
  <span m='2665200'>a</span> <span m='2665500'>general</span> <span m='2665890'>way</span>
  <span m='2666100'>to</span> <span m='2666280'>write</span> <span m='2666550'>that</span>
  <span m='2667600'>is</span> <span m='2667990'>I</span> <span m='2668080'>have</span>
  <span m='2671560'>w.</span> <span m='2672580'>I</span> <span m='2672700'>look</span>
  <span m='2672940'>at</span> <span m='2673090'>v's</span> <span m='2673540'>path</span>
  <span m='2674020'>to</span> <span m='2674170'>the</span> <span m='2674290'>root.</span>
  <span m='2674980'>I</span> <span m='2675040'>look</span> <span m='2675250'>at</span>
  <span m='2675340'>w's</span> <span m='2675790'>path</span> <span m='2676150'>to</span>
  <span m='2676270'>the</span> <span m='2676390'>root.</span> <span m='2676840'>At</span>
  <span m='2676960'>some</span> <span m='2677140'>point,</span> <span m='2677500'>we've</span>
  <span m='2677720'>reach</span> <span m='2677980'>the</span> <span m='2678130'>LCA.</span>
  </p><p><span m='2679450'>What</span> <span m='2679630'>I</span> <span m='2679720'>want</span>
  <span m='2679900'>to</span> <span m='2679990'>know</span> <span m='2680200'>is,</span>
  <span m='2680500'>have</span> <span m='2680770'>any</span> <span m='2681070'>of</span>
  <span m='2681160'>these</span> <span m='2681400'>edges</span> <span m='2681700'>been</span>
  <span m='2681880'>deleted?</span> <span m='2682890'>If</span> <span m='2683050'>yes,</span>
  <span m='2683320'>I</span> <span m='2683410'>can't</span> <span m='2683620'>get</span>
  <span m='2683800'>there.</span> <span m='2684160'>If</span> <span m='2684340'>none</span>
  <span m='2684490'>of</span> <span m='2684550'>them</span> <span m='2684710'>have</span>
  <span m='2684770'>been</span> <span m='2684880'>deleted,</span> <span m='2685280'>I</span>
  <span m='2685380'>can</span> <span m='2685390'>get</span> <span m='2685570'>there.</span>
  <span m='2685780'>It's</span> <span m='2686140'>an</span> <span m='2686350'>if and</span>
  <span m='2686440'>only</span> <span m='2686680'>if.</span> </p><p><span m='2686950'>I</span>
  <span m='2687010'>don't</span> <span m='2687160'>care</span> <span m='2687370'>about</span>
  <span m='2687640'>these</span> <span m='2687850'>edges</span> <span m='2688150'>up</span>
  <span m='2688270'>here</span> <span m='2689200'>above</span> <span m='2689500'>the</span>
  <span m='2689620'>LCA.</span> <span m='2689980'>Because</span> <span m='2690160'>I</span>
  <span m='2690230'>only</span> <span m='2690370'>need</span> <span m='2690520'>to</span>
  <span m='2690610'>go</span> <span m='2690700'>to</span> <span m='2690760'>the</span>
  <span m='2690880'>LCA</span> <span m='2691210'>and</span> <span m='2691300'>back</span>
  <span m='2691510'>down.</span> <span m='2693170'>So</span> <span m='2693280'>what</span>
  <span m='2693400'>do</span> <span m='2693490'>I</span> <span m='2693580'>do?</span>
  </p><p><span m='2695170'>Each</span> <span m='2695350'>vertex</span> <span m='2699281'>stores</span>
  <span m='2700210'>a</span> <span m='2700270'>bit</span> <span m='2700510'>vector</span>
  <span m='2700840'>of</span> <span m='2700960'>its</span> <span m='2701170'>ancestors,</span>
  <span m='2707916'>of</span> <span m='2708420'>the</span> <span m='2708810'>ancestor</span>
  <span m='2709470'>edges.</span> <span m='2717740'>Well,</span> <span m='2719570'>ancestor</span>
  <span m='2720100'>edges</span> <span m='2720460'>is</span> <span m='2720670'>kind</span>
  <span m='2720880'>of</span> <span m='2720970'>weird.</span> <span m='2721930'>It</span>
  <span m='2722290'>stores</span> <span m='2723040'>a</span> <span m='2723100'>bit</span>
  <span m='2723280'>vector</span> <span m='2723850'>representing</span> <span m='2724570'>its</span>
  <span m='2726550'>path</span> <span m='2726850'>to</span> <span m='2726970'>the</span>
  <span m='2727090'>root.</span> </p><p><span m='2731372'>That's</span> <span m='2731790'>this</span>
  <span m='2732070'>red</span> <span m='2732280'>stuff.</span> <span m='2732700'>I</span>
  <span m='2732820'>want</span> <span m='2733030'>to</span> <span m='2733120'>know,</span>
  <span m='2733680'>for</span> <span m='2733810'>vertex</span> <span m='2734200'>v,</span>
  <span m='2734710'>what</span> <span m='2734890'>are</span> <span m='2734950'>the</span>
  <span m='2735100'>edges</span> <span m='2735400'>along</span> <span m='2735670'>the</span>
  <span m='2735760'>path</span> <span m='2736030'>to</span> <span m='2736150'>the</span>
  <span m='2736270'>root</span> <span m='2736480'>of</span> <span m='2736630'>this</span>
  <span m='2736780'>bottom</span> <span m='2737110'>tree?</span> <span m='2738760'>Just</span>
  <span m='2738970'>preprocessed.</span> <span m='2739780'>You</span> <span m='2739930'>can</span>
  <span m='2740110'>build</span> <span m='2740350'>this</span> <span m='2740530'>thing</span>
  <span m='2740740'>as</span> <span m='2740860'>you</span> <span m='2740950'>do</span>
  <span m='2741070'>the</span> <span m='2741190'>depth</span> <span m='2741340'>first</span>
  <span m='2741520'>search</span> <span m='2741820'>and</span> <span m='2741940'>store</span>
  <span m='2742240'>it.</span> </p><p><span m='2742570'>Again,</span> <span m='2742840'>it's</span>
  <span m='2742960'>one</span> <span m='2743380'>word</span> <span m='2743890'>per</span>
  <span m='2744370'>vertex.</span> <span m='2745220'>So</span> <span m='2745390'>I</span>
  <span m='2745480'>can</span> <span m='2746790'>fit</span> <span m='2746950'>it</span>
  <span m='2747040'>with</span> <span m='2747190'>constant</span> <span m='2747700'>space.</span>
  <span m='2748962'>It's</span> <span m='2749340'>constant</span> <span m='2749560'>space</span>
  <span m='2749830'>overhead.</span> </p><p><span m='2750880'>And</span> <span m='2751000'>now,</span>
  <span m='2751540'>if</span> <span m='2751720'>I</span> <span m='2751780'>have</span>
  <span m='2751960'>two</span> <span m='2752110'>vertices,</span> <span m='2752800'>I</span>
  <span m='2752920'>take</span> <span m='2753250'>the</span> <span m='2753610'>XOR</span>
  <span m='2754790'>of</span> <span m='2754960'>those</span> <span m='2755170'>two</span>
  <span m='2755350'>paths.</span> <span m='2755950'>That</span> <span m='2756160'>will</span>
  <span m='2756280'>give</span> <span m='2756490'>me</span> <span m='2756880'>this</span>
  <span m='2757060'>part.</span> <span m='2758470'>And</span> <span m='2758650'>then</span>
  <span m='2758830'>I</span> <span m='2759490'>use</span> <span m='2759730'>that</span>
  <span m='2759940'>as</span> <span m='2760060'>a</span> <span m='2760120'>mask</span>
  <span m='2760720'>into</span> <span m='2760960'>the bit</span> <span m='2761230'>vector,</span>
  <span m='2762530'>say,</span> <span m='2763250'>are</span> <span m='2763390'>any</span>
  <span m='2763630'>of</span> <span m='2763690'>these</span> <span m='2763900'>1?</span>
  </p><p><span m='2764940'>How</span> <span m='2765020'>do</span> <span m='2765100'>I</span>
  <span m='2765200'>do</span> <span m='2765340'>that? I</span> <span m='2765430'>just</span>
  <span m='2765580'>mask.</span> <span m='2766420'>And</span> <span m='2766570'>if</span>
  <span m='2766720'>the</span> <span m='2766810'>result</span> <span m='2767440'>is</span>
  <span m='2767590'>the</span> <span m='2767710'>0</span> <span m='2768070'>word,</span>
  <span m='2768430'>then</span> <span m='2768610'>I</span> <span m='2768700'>know</span>
  <span m='2768880'>none</span> <span m='2769090'>of</span> <span m='2769150'>them</span>
  <span m='2769330'>are</span> <span m='2769420'>1.</span> <span m='2769780'>Otherwise,</span>
  <span m='2770230'>I</span> <span m='2770320'>know</span> <span m='2770560'>some</span>
  <span m='2771850'>edge</span> <span m='2772000'>was</span> <span m='2772120'>deleted</span>
  <span m='2772510'>and</span> <span m='2772630'>I'm</span> <span m='2772720'>screwed.</span>
  </p><p><span m='2774080'>So</span> <span m='2774340'>I</span> <span m='2774460'>take</span>
  <span m='2775263'>XOR</span> <span m='2777470'>of</span> <span m='2778600'>v's</span>
  <span m='2778900'>path</span> <span m='2780760'>and</span> <span m='2781010'>w's</span>
  <span m='2781390'>path.</span> <span m='2785710'>And</span> <span m='2785860'>then</span>
  <span m='2786040'>I</span> <span m='2786190'>mask</span> <span m='2788650'>this</span>
  <span m='2788950'>thing,</span> <span m='2789190'>which</span> <span m='2789340'>stores</span>
  <span m='2789670'>which</span> <span m='2789850'>edges</span> <span m='2790090'>were</span>
  <span m='2790210'>deleted.</span> <span m='2791410'>And</span> <span m='2791590'>then</span>
  <span m='2791740'>I</span> <span m='2791920'>check</span> <span m='2792940'>whether</span>
  <span m='2793180'>that</span> <span m='2793420'>word</span> <span m='2793870'>equals</span>
  <span m='2794440'>0.</span> </p><p><span m='2795270'>If</span> <span m='2795650'>it</span>
  <span m='2796030'>equals</span> <span m='2796300'>0,</span> <span m='2796660'>yes,</span>
  <span m='2796960'>I</span> <span m='2797050'>can</span> <span m='2797200'>get</span>
  <span m='2797380'>there.</span> <span m='2797880'>If it</span> <span m='2797950'>doesn't</span>
  <span m='2798190'>equal</span> <span m='2798370'>0,</span> <span m='2798610'>I</span>
  <span m='2798670'>can't</span> <span m='2798910'>get</span> <span m='2799060'>there</span>
  <span m='2799230'>because</span> <span m='2799390'>some</span> <span m='2799530'>edge</span>
  <span m='2799750'>was</span> <span m='2799870'>deleted.</span> <span m='2801230'>So</span>
  <span m='2801400'>very</span> <span m='2801640'>easy,</span> <span m='2802990'>because</span>
  <span m='2803650'>we</span> <span m='2803770'>can</span> <span m='2803950'>fit</span>
  <span m='2805510'>log</span> <span m='2805870'>n</span> <span m='2806020'>bits</span>
  <span m='2806230'>in</span> <span m='2806320'>a</span> <span m='2806380'>word.</span>
  <span m='2809800'>OK,</span> <span m='2810030'>that's</span> <span m='2810240'>the</span>
  <span m='2810330'>bottom</span> <span m='2810630'>tree</span> <span m='2810810'>structure.</span>
  <span m='2811770'>Next</span> <span m='2812070'>we</span> <span m='2812220'>need</span>
  <span m='2813570'>a</span> <span m='2813630'>path</span> <span m='2813960'>structure.</span>
  </p><p><span m='2843180'>Here</span> <span m='2843390'>we</span> <span m='2843540'>can</span>
  <span m='2843720'>use</span> <span m='2844020'>due</span> <span m='2844290'>constant</span>
  <span m='2844560'>amortized</span> <span m='2845580'>with</span> <span m='2845790'>a</span>
  <span m='2846150'>similar</span> <span m='2846570'>trick.</span> <span m='2850650'>So</span>
  <span m='2850860'>here's</span> <span m='2851180'>our</span> <span m='2851250'>path.</span>
  <span m='2853560'>We're</span> <span m='2853680'>going</span> <span m='2853800'>to</span>
  <span m='2853890'>use,</span> <span m='2854100'>essentially,</span> <span m='2854580'>indirection</span>
  <span m='2855120'>again.</span> <span m='2857610'>Again,</span> <span m='2857820'>we</span>
  <span m='2857910'>know</span> <span m='2858030'>how</span> <span m='2858090'>to</span>
  <span m='2858180'>solve</span> <span m='2858420'>this in</span> <span m='2858620'>log</span>
  <span m='2858910'>n.</span> </p><p><span m='2860720'>When</span> <span m='2860850'>we</span>
  <span m='2860910'>have</span> <span m='2861020'>a</span> <span m='2861060'>sequential</span>
  <span m='2861510'>thing,</span> <span m='2861720'>our</span> <span m='2861810'>usual</span>
  <span m='2862080'>way</span> <span m='2862260'>of</span> <span m='2862350'>indirection</span>
  <span m='2862890'>is</span> <span m='2863040'>to</span> <span m='2863160'>split</span>
  <span m='2863490'>into</span> <span m='2863760'>chunks.</span> <span m='2867850'>Each</span>
  <span m='2867990'>chunk</span> <span m='2868350'>here,</span> <span m='2869110'>I</span>
  <span m='2869210'>need</span> <span m='2869280'>to</span> <span m='2869400'>be</span>
  <span m='2869580'>about</span> <span m='2869880'>log</span> <span m='2870180'>n</span>
  <span m='2870795'>in</span> <span m='2871140'>size.</span> <span m='2871410'>So</span>
  <span m='2871680'>I'll just</span> <span m='2871790'>make</span> <span m='2871980'>it</span>
  <span m='2872070'>exactly</span> <span m='2872490'>log</span> <span m='2872730'>n</span>
  <span m='2872970'>in size.</span> <span m='2873840'>So</span> <span m='2873910'>there's</span>
  <span m='2874080'>n</span> <span m='2874260'>over</span> <span m='2874450'>log</span>
  <span m='2874710'>n</span> <span m='2874860'>chunks.</span> </p><p><span m='2876570'>So</span>
  <span m='2876720'>if</span> <span m='2876960'>I</span> <span m='2877080'>store</span>
  <span m='2877380'>a</span> <span m='2877440'>summary</span> <span m='2878070'>vector,</span>
  <span m='2879180'>we</span> <span m='2879330'>can</span> <span m='2879480'>think</span>
  <span m='2879660'>of</span> <span m='2879780'>these</span> <span m='2879990'>as</span>
  <span m='2880080'>being</span> <span m='2880330'>0,</span> <span m='2880710'>1,</span>
  <span m='2881400'>0,</span> <span m='2881640'>1,</span> <span m='2881880'>whatever,</span>
  <span m='2882630'>where</span> <span m='2882720'>the</span> <span m='2882840'>1's</span>
  <span m='2883090'>mean</span> <span m='2883380'>this</span> <span m='2883490'>edge</span>
  <span m='2883710'>has</span> <span m='2883800'>been</span> <span m='2883920'>deleted.</span>
  <span m='2884280'>0</span> <span m='2884490'>means</span> <span m='2884700'>it</span>
  <span m='2884760'>hasn't</span> <span m='2885030'>been</span> <span m='2885150'>deleted.</span>
  <span m='2886300'>All</span> <span m='2886500'>right,</span> <span m='2886900'>let</span>
  <span m='2886980'>me</span> <span m='2887120'>write</span> <span m='2888430'>n</span>
  <span m='2888780'>over</span> <span m='2888960'>log</span> <span m='2889230'>n</span>
  <span m='2889380'>chunks,</span> <span m='2893160'>each</span> <span m='2893730'>log</span>
  <span m='2894030'>n</span> <span m='2894180'>edges.</span> <span m='2899190'>And</span>
  <span m='2899670'>I'm</span> <span m='2899760'>going</span> <span m='2899880'>to</span>
  <span m='2899940'>store each</span> <span m='2900330'>chunk</span> <span m='2900750'>as</span>
  <span m='2901050'>a</span> <span m='2901110'>bit</span> <span m='2901260'>vector.</span>
  </p><p><span m='2908180'>Bit</span> <span m='2908290'>vector</span> <span m='2908950'>has</span>
  <span m='2909190'>log</span> <span m='2909430'>n</span> <span m='2909550'>bits.</span>
  <span m='2910390'>w's</span> <span m='2910840'>at</span> <span m='2910930'>least</span>
  <span m='2911110'>log</span> <span m='2911380'>n.</span> <span m='2911620'>So</span>
  <span m='2911770'>I</span> <span m='2911920'>can</span> <span m='2912520'>do</span>
  <span m='2912670'>the</span> <span m='2912760'>same</span> <span m='2913030'>sort</span>
  <span m='2913210'>of</span> <span m='2913300'>things</span> <span m='2913550'>I</span>
  <span m='2913630'>could</span> <span m='2913750'>do</span> <span m='2913900'>before.</span>
  <span m='2914690'>If</span> <span m='2914790'>I</span> <span m='2914890'>delete</span>
  <span m='2915010'>an</span> <span m='2915130'>edge,</span> <span m='2915490'>I</span>
  <span m='2915580'>just</span> <span m='2917110'>set</span> <span m='2917320'>a</span>
  <span m='2917370'>1</span> <span m='2917590'>bit</span> <span m='2918460'>in</span>
  <span m='2918640'>the</span> <span m='2918760'>chunk</span> <span m='2919120'>vector.</span>
  </p><p><span m='2922990'>Now,</span> <span m='2923890'>that's</span> <span m='2924190'>good</span>
  <span m='2924370'>for</span> <span m='2924520'>local</span> <span m='2924880'>queries.</span>
  <span m='2925370'>If</span> <span m='2925420'>I</span> <span m='2925480'>want</span>
  <span m='2925660'>to</span> <span m='2925720'>do</span> <span m='2925810'>a</span>
  <span m='2925870'>long-distance</span> <span m='2926500'>query,</span> <span m='2927310'>I</span>
  <span m='2927430'>need</span> <span m='2927580'>to</span> <span m='2927700'>basically</span>
  <span m='2928060'>summarize,</span> <span m='2928710'>are</span> <span m='2928870'>any</span>
  <span m='2929080'>of</span> <span m='2929140'>these</span> <span m='2931000'>edges</span>
  <span m='2931240'>deleted?</span> <span m='2931690'>If</span> <span m='2931840'>so,</span>
  <span m='2932230'>I'll put</span> <span m='2932410'>a</span> <span m='2932490'>1</span>
  <span m='2932830'>up</span> <span m='2933010'>here.</span> <span m='2933840'>Any</span>
  <span m='2933960'>of</span> <span m='2934030'>these</span> <span m='2934210'>edges</span>
  <span m='2934450'>deleted?</span> <span m='2934660'>If</span> <span m='2934810'>not,</span>
  <span m='2935110'>put</span> <span m='2935290'>a</span> <span m='2935350'>0.</span>
  </p><p><span m='2937000'>And</span> <span m='2937150'>now,</span> <span m='2937600'>I</span>
  <span m='2937780'>want</span> <span m='2938020'>to</span> <span m='2938110'>structure</span>
  <span m='2938620'>over--</span> <span m='2939100'>this,</span> <span m='2939340'>you</span>
  <span m='2939430'>might</span> <span m='2939580'>call</span> <span m='2939820'>the</span>
  <span m='2939940'>summary</span> <span m='2940360'>vector,</span> <span m='2940870'>like</span>
  <span m='2941110'>in</span> <span m='2941390'>[INAUDIBLE].</span> <span m='2942490'>Done</span>
  <span m='2942670'>that</span> <span m='2942760'>before</span> <span m='2943150'>with</span>
  <span m='2943300'>indirection</span> <span m='2943750'>as</span> <span m='2943870'>well.</span>
  <span m='2945470'>Now,</span> <span m='2945610'>this</span> <span m='2946090'>summary</span>
  <span m='2946480'>vector</span> <span m='2946810'>has</span> <span m='2946990'>size</span>
  <span m='2947260'>n</span> <span m='2947410'>over</span> <span m='2947540'>log</span>
  <span m='2947750'>n.</span> <span m='2948280'>So</span> <span m='2948490'>I</span>
  <span m='2948550'>can</span> <span m='2948700'>afford</span> <span m='2949090'>to</span>
  <span m='2949240'>use</span> <span m='2949990'>our</span> <span m='2950230'>log
  n</span> <span m='2950590'>solution</span> <span m='2951930'>that</span> <span m='2952030'>we</span>
  <span m='2952120'>started</span> <span m='2952390'>with.</span> </p><p><span m='2953360'>So</span>
  <span m='2954780'>use</span> <span m='2955150'>1</span> <span m='2957010'>on</span>
  <span m='2958810'>summary</span> <span m='2962920'>vector</span> <span m='2964410'>of</span>
  <span m='2965140'>chunks.</span> <span m='2966730'>Because</span> <span m='2967240'>again,</span>
  <span m='2969220'>the</span> <span m='2969310'>first</span> <span m='2969670'>time</span>
  <span m='2970000'>I</span> <span m='2970090'>set</span> <span m='2970330'>one</span>
  <span m='2970480'>of</span> <span m='2970540'>the</span> <span m='2970630'>bits</span>
  <span m='2970870'>in</span> <span m='2970990'>here,</span> <span m='2971230'>I</span>
  <span m='2971290'>have</span> <span m='2971470'>to</span> <span m='2971560'>do</span>
  <span m='2971680'>an</span> <span m='2971770'>update</span> <span m='2972070'>up</span>
  <span m='2972220'>here.</span> <span m='2972700'>But</span> <span m='2972910'>only</span>
  <span m='2973180'>then.</span> </p><p><span m='2973600'>Once</span> <span m='2973810'>it's</span>
  <span m='2973960'>been</span> <span m='2974170'>done</span> <span m='2974380'>once,</span>
  <span m='2974710'>I</span> <span m='2974770'>don't</span> <span m='2974920'>have</span>
  <span m='2975130'>to</span> <span m='2975340'>update</span> <span m='2975700'>again.</span>
  <span m='2976450'>So</span> <span m='2976600'>there</span> <span m='2976690'>will
  only</span> <span m='2976960'>be</span> <span m='2977110'>n</span> <span m='2977260'>over</span>
  <span m='2977440'>log</span> <span m='2977680'>n</span> <span m='2977770'>updates.</span>
  <span m='2978200'>So</span> <span m='2978220'>I</span> <span m='2978280'>can</span>
  <span m='2978400'>afford</span> <span m='2978700'>log</span> <span m='2978940'>n</span>
  <span m='2979150'>per</span> <span m='2980080'>update.</span> <span m='2980510'>It'll</span>
  <span m='2980640'>still</span> <span m='2980860'>be</span> <span m='2980980'>linear</span>
  <span m='2981250'>time</span> <span m='2981490'>total,</span> <span m='2982180'>constant</span>
  <span m='2982630'>per</span> <span m='2982810'>operation</span> <span m='2983410'>amortized.</span>
  <span m='2985300'>So</span> <span m='2985660'>this</span> <span m='2985900'>is</span>
  <span m='2986140'>my</span> <span m='2986320'>solution.</span> </p><p><span m='2986870'>If</span>
  <span m='2986890'>I</span> <span m='2987040'>have</span> <span m='2987220'>a</span>
  <span m='2987280'>query,</span> <span m='2988370'>let's</span> <span m='2988420'>say</span>
  <span m='2988750'>I</span> <span m='2988840'>want</span> <span m='2989020'>to</span>
  <span m='2989080'>know</span> <span m='2989290'>between</span> <span m='2991060'>here</span>
  <span m='2992440'>and</span> <span m='2992830'>here,</span> <span m='2994030'>I</span>
  <span m='2994120'>first</span> <span m='2994420'>check,</span> <span m='2994660'>can</span>
  <span m='2994990'>I</span> <span m='2995050'>get</span> <span m='2995230'>to</span>
  <span m='2995350'>the</span> <span m='2995470'>right</span> <span m='2995680'>endpoint</span>
  <span m='2997000'>locally?</span> <span m='2998200'>Which</span> <span m='2998410'>is</span>
  <span m='2999010'>a</span> <span m='2999100'>query</span> <span m='2999400'>within</span>
  <span m='2999730'>the</span> <span m='2999850'>chunk.</span> <span m='3000720'>Which</span>
  <span m='3000870'>is</span> <span m='3000990'>again,</span> <span m='3001380'>I</span>
  <span m='3001470'>just</span> <span m='3001650'>mask</span> <span m='3001935'>out</span>
  <span m='3002220'>these</span> <span m='3002400'>bits.</span> </p><p><span m='3002660'>I</span>
  <span m='3002730'>say</span> <span m='3003270'>and</span> <span m='3003450'>now</span>
  <span m='3003870'>do</span> <span m='3004020'>I</span> <span m='3004080'>have</span>
  <span m='3004230'>the</span> <span m='3004320'>0</span> <span m='3004590'>vector?</span>
  <span m='3004860'>In</span> <span m='3004920'>which</span> <span m='3005070'>case,</span>
  <span m='3005280'>nothing</span> <span m='3005640'>I</span> <span m='3005730'>care</span>
  <span m='3005880'>about</span> <span m='3006030'>has</span> <span m='3006210'>been</span>
  <span m='3006330'>deleted</span> <span m='3006660'>and</span> <span m='3006750'>I</span>
  <span m='3006810'>can</span> <span m='3006930'>get</span> <span m='3007080'>there?</span>
  <span m='3007910'>Or</span> <span m='3008040'>if</span> <span m='3008130'>I</span>
  <span m='3008190'>don't</span> <span m='3008340'>have</span> <span m='3008490'>the</span>
  <span m='3008580'>0</span> <span m='3008790'>vector,</span> <span m='3009500'>I</span>
  <span m='3009600'>can't</span> <span m='3009840'>get</span> <span m='3010020'>there.</span>
  </p><p><span m='3011160'>I</span> <span m='3011280'>want</span> <span m='3011450'>to</span>
  <span m='3011520'>know,</span> <span m='3011670'>can</span> <span m='3011850'>I</span>
  <span m='3011910'>get</span> <span m='3012060'>to</span> <span m='3012180'>the</span>
  <span m='3012240'>left</span> <span m='3012480'>from</span> <span m='3012660'>here?</span>
  <span m='3013740'>Again</span> <span m='3013980'>it's</span> <span m='3014100'>a</span>
  <span m='3014160'>mask</span> <span m='3014580'>and</span> <span m='3014700'>a</span>
  <span m='3014760'>check</span> <span m='3015000'>against</span> <span m='3015210'>0.</span>
  <span m='3016020'>And</span> <span m='3016140'>then</span> <span m='3016290'>I</span>
  <span m='3016350'>want</span> <span m='3016530'>to</span> <span m='3016590'>know,</span>
  <span m='3016860'>can</span> <span m='3017160'>I</span> <span m='3017280'>go</span>
  <span m='3017580'>over</span> <span m='3017910'>this</span> <span m='3019440'>interval</span>
  <span m='3019860'>of</span> <span m='3019950'>chunks?</span> </p><p><span m='3020730'>And</span>
  <span m='3020760'>that,</span> <span m='3021060'>I</span> <span m='3021180'>can</span>
  <span m='3021360'>use</span> <span m='3021540'>the</span> <span m='3021630'>summary</span>
  <span m='3021990'>vector</span> <span m='3022340'>for.</span> <span m='3023970'>And</span>
  <span m='3024630'>again,</span> <span m='3024990'>that</span> <span m='3025200'>is</span>
  <span m='3025350'>a</span> <span m='3025410'>mask</span> <span m='3026040'>of</span>
  <span m='3026230'>a</span> <span m='3026310'>subinterval,</span> <span m='3028050'>and</span>
  <span m='3028200'>then</span> <span m='3028350'>checking</span> <span m='3028650'>whether</span>
  <span m='3028810'>it</span> <span m='3028870'>has</span> <span m='3029010'>0.</span>
  <span m='3029490'>So</span> <span m='3029700'>I</span> <span m='3029790'>take</span>
  <span m='3030000'>the</span> <span m='3030150'>and</span> <span m='3030510'>of</span>
  <span m='3030630'>these</span> <span m='3030870'>three</span> <span m='3031260'>results,</span>
  <span m='3032550'>and</span> <span m='3032940'>I'm</span> <span m='3033060'>done.</span>
  <span m='3034320'>That</span> <span m='3034470'>gives</span> <span m='3034680'>me</span>
  <span m='3034830'>a</span> <span m='3034860'>query</span> <span m='3035190'>over</span>
  <span m='3035370'>a</span> <span m='3035430'>path.</span> </p><p><span m='3036350'>So</span>
  <span m='3036480'>it's</span> <span m='3036570'>kind</span> <span m='3036720'>of</span>
  <span m='3036780'>fun.</span> <span m='3036970'>We</span> <span m='3037050'>use</span>
  <span m='3037200'>two</span> <span m='3037380'>levels</span> <span m='3037710'>of</span>
  <span m='3037770'>indirection.</span> <span m='3038860'>One</span> <span m='3040260'>to</span>
  <span m='3040350'>reduce</span> <span m='3040620'>the</span> <span m='3040680'>number</span>
  <span m='3040920'>of</span> <span m='3041010'>leaves.</span> <span m='3043040'>And</span>
  <span m='3043170'>then</span> <span m='3043350'>these</span> <span m='3043500'>were</span>
  <span m='3043680'>sort</span> <span m='3043890'>of</span> <span m='3043980'>trivial.</span>
  </p><p><span m='3044910'>And</span> <span m='3045000'>then</span> <span m='3045210'>within</span>
  <span m='3045630'>the</span> <span m='3046350'>structure,</span> <span m='3046860'>we</span>
  <span m='3046980'>could</span> <span m='3047130'>only</span> <span m='3048450'>afford</span>
  <span m='3048750'>things</span> <span m='3048990'>on</span> <span m='3049080'>the</span>
  <span m='3049140'>non-branching</span> <span m='3049740'>part,</span> <span m='3050070'>so</span>
  <span m='3050220'>we</span> <span m='3050280'>had</span> <span m='3050400'>to</span>
  <span m='3050460'>deal</span> <span m='3050610'>with</span> <span m='3050730'>paths</span>
  <span m='3051030'>separately.</span> <span m='3051510'>And</span> <span m='3051600'>there</span>
  <span m='3051720'>we</span> <span m='3051840'>use</span> <span m='3051960'>another</span>
  <span m='3052260'>level</span> <span m='3052500'>of</span> <span m='3052560'>indirection.</span>
  <span m='3054270'>But</span> <span m='3054450'>in</span> <span m='3054540'>the</span>
  <span m='3054660'>end,</span> <span m='3054810'>we</span> <span m='3054900'>get</span>
  <span m='3055080'>rid</span> <span m='3055200'>of</span> <span m='3055320'>all</span>
  <span m='3055470'>of</span> <span m='3055560'>our</span> <span m='3055650'>logs.</span>
  <span m='3056550'>And it's</span> <span m='3056910'>constant</span> <span m='3057330'>amortized</span>
  <span m='3059040'>for</span> <span m='3059400'>deletions</span> <span m='3060060'>in</span>
  <span m='3060210'>a</span> <span m='3060270'>tree.</span> </p><p><span m='3062270'>Questions</span>
  <span m='3062530'>about</span> <span m='3062740'>that?</span> <span m='3064360'>That</span>
  <span m='3064510'>was</span> <span m='3064720'>our</span> <span m='3065920'>second</span>
  <span m='3066220'>result.</span> <span m='3067912'>We</span> <span m='3068356'>have</span>
  <span m='3068800'>one</span> <span m='3069010'>more.</span> </p><p><span m='3095140'>Last</span>
  <span m='3095380'>result</span> <span m='3095710'>we're</span> <span m='3095800'>going</span>
  <span m='3095920'>to</span> <span m='3095980'>talk</span> <span m='3096220'>about</span>
  <span m='3096470'>is</span> <span m='3096640'>log</span> <span m='3096880'>squared</span>
  <span m='3097150'>n</span> <span m='3097330'>update,</span> <span m='3098290'>log</span>
  <span m='3098590'>over</span> <span m='3098800'>log</span> <span m='3099070'>log</span>
  <span m='3099310'>query,</span> <span m='3100960'>for</span> <span m='3101200'>general</span>
  <span m='3101620'>graphs.</span> <span m='3101980'>Finally,</span> <span m='3102400'>we</span>
  <span m='3102520'>graduate</span> <span m='3103150'>from</span> <span m='3103390'>trees</span>
  <span m='3104440'>to</span> <span m='3105240'>general</span> <span m='3105570'>graphs.</span>
  </p><p></p><p><span m='3144100'>This</span> <span m='3144280'>is</span> <span m='3144400'>a</span>
  <span m='3144430'>result</span> <span m='3144820'>by</span> <span m='3145330'>Holm,</span>
  <span m='3145645'>de</span> <span m='3145960'>Lichtenberg,</span> <span m='3146710'>and</span>
  <span m='3146970'>Thorup,</span> <span m='3148420'>2001</span> <span m='3148830'>is</span>
  <span m='3149240'>the</span> <span m='3149320'>journal</span> <span m='3149620'>version.</span>
  <span m='3152740'>So</span> <span m='3152950'>we</span> <span m='3153100'>want</span>
  <span m='3153250'>to</span> <span m='3153320'>solve</span> <span m='3153520'>dynamic</span>
  <span m='3153880'>connectivity.</span> <span m='3154540'>We</span> <span m='3154660'>want</span>
  <span m='3154900'>to</span> <span m='3155200'>understand,</span> <span m='3155830'>in</span>
  <span m='3155950'>general,</span> <span m='3157420'>when</span> <span m='3157660'>two</span>
  <span m='3157810'>vertices</span> <span m='3158290'>are</span> <span m='3158410'>in</span>
  <span m='3158500'>the</span> <span m='3158590'>same</span> <span m='3158800'>connected</span>
  <span m='3159160'>component</span> <span m='3159580'>or</span> <span m='3159670'>not.</span>
  <span m='3160780'>That</span> <span m='3160960'>sounds</span> <span m='3162160'>tricky.</span>
  </p><p><span m='3163370'>We're</span> <span m='3163420'>going</span> <span m='3163570'>to</span>
  <span m='3163630'>do</span> <span m='3163780'>that</span> <span m='3164200'>in</span>
  <span m='3164320'>a</span> <span m='3164410'>pretty</span> <span m='3164740'>simple</span>
  <span m='3165370'>way</span> <span m='3165970'>at</span> <span m='3166060'>a</span>
  <span m='3166120'>high</span> <span m='3166270'>level.</span> <span m='3167080'>High</span>
  <span m='3167230'>level</span> <span m='3167530'>is,</span> <span m='3167860'>we</span>
  <span m='3167980'>want</span> <span m='3168220'>to</span> <span m='3168310'>store</span>
  <span m='3169390'>a</span> <span m='3169690'>spanning</span> <span m='3170290'>forest.</span>
  <span m='3172540'>You</span> <span m='3172630'>know</span> <span m='3172760'>what</span>
  <span m='3172840'>a</span> <span m='3172900'>spanning</span> <span m='3173290'>tree</span>
  <span m='3173560'>is.</span> </p><p><span m='3173660'>Spanning</span> <span m='3174070'>forest,</span>
  <span m='3175910'>well,</span> <span m='3176110'>your</span> <span m='3176230'>graph</span>
  <span m='3176500'>might</span> <span m='3176650'>be</span> <span m='3176770'>disconnected.</span>
  <span m='3177310'>That's</span> <span m='3177490'>the</span> <span m='3177580'>whole</span>
  <span m='3177700'>point</span> <span m='3177940'>of</span> <span m='3178000'>the</span>
  <span m='3178090'>data</span> <span m='3178270'>structure.</span> <span m='3178660'>If</span>
  <span m='3178710'>it's</span> <span m='3178810'>not</span> <span m='3178990'>disconnected,</span>
  <span m='3179510'>you</span> <span m='3179620'>answer</span> <span m='3179890'>yes</span>
  <span m='3180160'>all</span> <span m='3180280'>the</span> <span m='3180400'>time.</span>
  </p><p><span m='3181390'>When</span> <span m='3181510'>it's</span> <span m='3181630'>disconnected</span>
  <span m='3182470'>you</span> <span m='3182530'>say,</span> <span m='3182680'>OK,</span>
  <span m='3182950'>I'll</span> <span m='3183010'>have</span> <span m='3183160'>a</span>
  <span m='3183190'>spanning</span> <span m='3183550'>tree</span> <span m='3183730'>for</span>
  <span m='3183850'>this</span> <span m='3183970'>connected</span> <span m='3184280'>component,</span>
  <span m='3184640'>spanning</span> <span m='3184960'>tree</span> <span m='3185110'>for</span>
  <span m='3185260'>every</span> <span m='3185470'>connected</span> <span m='3185770'>component.</span>
  <span m='3186100'>Together</span> <span m='3186460'>we</span> <span m='3186550'>call</span>
  <span m='3186730'>that</span> <span m='3186880'>a</span> <span m='3186910'>spanning</span>
  <span m='3187300'>forest.</span> <span m='3188770'>That's</span> <span m='3189400'>the</span>
  <span m='3189580'>maximal</span> <span m='3190120'>connectivity</span> <span m='3190660'>you</span>
  <span m='3190750'>can</span> <span m='3190870'>get,</span> <span m='3191050'>but</span>
  <span m='3191200'>represented</span> <span m='3192010'>as</span> <span m='3192220'>a</span>
  <span m='3192280'>tree.</span> </p><p><span m='3192940'>Now,</span> <span m='3193120'>we</span>
  <span m='3193360'>have</span> <span m='3193690'>a</span> <span m='3193750'>great</span>
  <span m='3194020'>way</span> <span m='3194230'>to</span> <span m='3194320'>represent</span>
  <span m='3194740'>trees,</span> <span m='3195850'>Euler-tour</span> <span m='3196350'>trees.</span>
  <span m='3197710'>And</span> <span m='3198070'>if</span> <span m='3198280'>you</span>
  <span m='3198610'>somehow</span> <span m='3199030'>connected</span> <span m='3199450'>together</span>
  <span m='3199840'>two</span> <span m='3199990'>components,</span> <span m='3201010'>that</span>
  <span m='3201250'>is</span> <span m='3201460'>an</span> <span m='3201580'>insertion</span>
  <span m='3202120'>of</span> <span m='3202210'>an</span> <span m='3202300'>edge</span>
  <span m='3202580'>in</span> <span m='3202650'>an</span> <span m='3202770'>Euler-tour</span>
  <span m='3203280'>structure.</span> <span m='3204460'>Great.</span> </p><p><span
  m='3206020'>So</span> <span m='3206230'>we</span> <span m='3206320'>can</span> <span
  m='3206500'>maintain</span> <span m='3207040'>all</span> <span m='3207140'>these</span>
  <span m='3207280'>connected</span> <span m='3207610'>components</span> <span m='3208600'>and</span>
  <span m='3208750'>merge</span> <span m='3209080'>them</span> <span m='3209260'>if</span>
  <span m='3209380'>we</span> <span m='3209500'>have</span> <span m='3209770'>to,</span>
  <span m='3210490'>using</span> <span m='3211060'>an</span> <span m='3211210'>insert</span>
  <span m='3211750'>in</span> <span m='3211960'>Euler-tour</span> <span m='3212440'>structure.</span>
  <span m='3213790'>And</span> <span m='3214480'>to</span> <span m='3214690'>do</span>
  <span m='3214810'>a</span> <span m='3215320'>connectivity</span> <span m='3215890'>query--</span>
  <span m='3216130'>I</span> <span m='3216160'>don't</span> <span m='3216250'>think</span>
  <span m='3216400'>I</span> <span m='3216490'>mentioned</span> <span m='3216760'>this--</span>
  <span m='3216940'>you</span> <span m='3217030'>do</span> <span m='3217150'>find</span>
  <span m='3217450'>root</span> <span m='3217660'>on</span> <span m='3217780'>v and
  w,</span> <span m='3218200'>see</span> <span m='3218620'>whether</span> <span m='3218830'>they're</span>
  <span m='3218970'>the</span> <span m='3219070'>same</span> <span m='3219340'>root.</span>
  <span m='3220050'>Because</span> <span m='3220210'>root</span> <span m='3220420'>is</span>
  <span m='3220690'>a</span> <span m='3220750'>canonical</span> <span m='3221230'>name</span>
  <span m='3221560'>for</span> <span m='3221680'>the</span> <span m='3221800'>connected</span>
  <span m='3222130'>component.</span> </p><p><span m='3223510'>You</span> <span m='3223570'>can</span>
  <span m='3223690'>solve</span> <span m='3223930'>connectivity</span> <span m='3224470'>using</span>
  <span m='3224770'>find</span> <span m='3225010'>root</span> <span m='3225530'>in</span>
  <span m='3225820'>constant</span> <span m='3226310'>time.</span> <span m='3226885'>Well,</span>
  <span m='3227210'>constant</span> <span m='3227560'>extra</span> <span m='3227890'>time,</span>
  <span m='3228460'>log</span> <span m='3228880'>for</span> <span m='3229120'>the</span>
  <span m='3229260'>find</span> <span m='3229600'>root.</span> <span m='3231270'>OK,</span>
  <span m='3231910'>so</span> <span m='3232150'>everything</span> <span m='3232480'>looks</span>
  <span m='3232660'>great.</span> <span m='3232900'>I</span> <span m='3233020'>can</span>
  <span m='3233170'>connectivity.</span> </p><p><span m='3233890'>I</span> <span m='3233950'>can</span>
  <span m='3234100'>do</span> <span m='3234190'>insertion.</span> <span m='3235120'>What</span>
  <span m='3235330'>about</span> <span m='3235720'>deletion?</span> <span m='3237730'>If</span>
  <span m='3237910'>I</span> <span m='3238090'>delete</span> <span m='3238540'>an</span>
  <span m='3238660'>edge</span> <span m='3239010'>that</span> <span m='3239170'>is</span>
  <span m='3239320'>not</span> <span m='3239710'>in</span> <span m='3239830'>my</span>
  <span m='3239980'>spanning</span> <span m='3240370'>forest,</span> <span m='3242080'>I'm</span>
  <span m='3242260'>happy.</span> <span m='3242950'>I</span> <span m='3242980'>have</span>
  <span m='3243160'>exactly</span> <span m='3243550'>the</span> <span m='3243610'>same</span>
  <span m='3243820'>connectivity</span> <span m='3244320'>as</span> <span m='3244450'>before,</span>
  <span m='3244810'>as</span> <span m='3245080'>proved</span> <span m='3245470'>by</span>
  <span m='3245620'>the</span> <span m='3245710'>spanning</span> <span m='3246040'>forest.</span>
  </p><p><span m='3247180'>The</span> <span m='3247300'>trouble</span> <span m='3247660'>is</span>
  <span m='3247750'>when</span> <span m='3247900'>I</span> <span m='3247990'>delete</span>
  <span m='3248380'>an</span> <span m='3248470'>edge</span> <span m='3248800'>that's</span>
  <span m='3249040'>in</span> <span m='3249220'>the</span> <span m='3249310'>spanning</span>
  <span m='3249700'>forest.</span> <span m='3250960'>Then</span> <span m='3251140'>it's</span>
  <span m='3251230'>like,</span> <span m='3251530'>uh,</span> <span m='3252740'>maybe.</span>
  <span m='3254080'>So</span> <span m='3254270'>here's</span> <span m='3255570'>spanning</span>
  <span m='3256240'>tree,</span> <span m='3257055'>whatever.</span> </p><p><span m='3262690'>And</span>
  <span m='3262840'>now</span> <span m='3263140'>let's</span> <span m='3263260'>say</span>
  <span m='3263710'>I</span> <span m='3263830'>delete</span> <span m='3264220'>this</span>
  <span m='3264430'>edge</span> <span m='3264700'>here.</span> <span m='3267280'>Then</span>
  <span m='3267810'>there's</span> <span m='3268120'>a</span> <span m='3268180'>couple</span>
  <span m='3268510'>possibilities.</span> <span m='3273230'>It</span> <span m='3273330'>was</span>
  <span m='3273450'>a</span> <span m='3273500'>graph,</span> <span m='3273940'>it's
  not</span> <span m='3274090'>a</span> <span m='3274150'>tree.</span> <span m='3274480'>So</span>
  <span m='3274660'>there</span> <span m='3274780'>could</span> <span m='3274900'>be</span>
  <span m='3275020'>some</span> <span m='3275230'>other</span> <span m='3275440'>edge</span>
  <span m='3275620'>that</span> <span m='3275740'>connects</span> <span m='3276100'>those</span>
  <span m='3276310'>two</span> <span m='3276460'>trees.</span> <span m='3276820'>Then</span>
  <span m='3277000'>I</span> <span m='3277060'>have</span> <span m='3277240'>to</span>
  <span m='3277330'>find</span> <span m='3277690'>it.</span> </p><p><span m='3278582'>Oh,</span>
  <span m='3278970'>I'm</span> <span m='3279070'>going to</span> <span m='3279130'>find</span>
  <span m='3279400'>it.</span> <span m='3279550'>That's</span> <span m='3279850'>going</span>
  <span m='3280000'>to</span> <span m='3280060'>be</span> <span m='3280150'>annoying.</span>
  <span m='3281230'>Or it</span> <span m='3281440'>could</span> <span m='3281590'>be</span>
  <span m='3281680'>there's</span> <span m='3281860'>no</span> <span m='3282010'>such</span>
  <span m='3282280'>edge.</span> <span m='3282490'>Then</span> <span m='3283030'>I'm</span>
  <span m='3283150'>fine.</span> <span m='3283450'>Then</span> <span m='3283600'>it's</span>
  <span m='3283690'>just</span> <span m='3283870'>a</span> <span m='3283930'>cut.</span>
  </p><p><span m='3285610'>But</span> <span m='3285790'>distinguishing</span> <span
  m='3286360'>those</span> <span m='3286540'>two</span> <span m='3286660'>cases</span>
  <span m='3287050'>is</span> <span m='3287110'>going</span> <span m='3287260'>to</span>
  <span m='3287320'>be</span> <span m='3287430'>our</span> <span m='3287500'>challenge.</span>
  <span m='3287920'>And</span> <span m='3288010'>that's</span> <span m='3288190'>where</span>
  <span m='3288310'>we're</span> <span m='3288370'>going</span> <span m='3288490'>to</span>
  <span m='3288550'>lose</span> <span m='3288790'>another log</span> <span m='3289250'>factor,</span>
  <span m='3290950'>but</span> <span m='3291100'>only</span> <span m='3291310'>another</span>
  <span m='3291550'>log</span> <span m='3291760'>factor.</span> <span m='3293250'>To</span>
  <span m='3293530'>only</span> <span m='3293860'>lose</span> <span m='3294040'>another</span>
  <span m='3294310'>log</span> <span m='3294520'>factor,</span> <span m='3294850'>what</span>
  <span m='3295000'>we're</span> <span m='3295090'>going</span> <span m='3295200'>to</span>
  <span m='3295330'>do</span> <span m='3295480'>is</span> <span m='3295600'>not</span>
  <span m='3295810'>just</span> <span m='3295960'>store</span> <span m='3296230'>one</span>
  <span m='3296680'>spanning</span> <span m='3297100'>forest.</span> </p><p><span
  m='3299560'>We</span> <span m='3299770'>will</span> <span m='3299980'>store</span>
  <span m='3300190'>the</span> <span m='3300280'>spanning</span> <span m='3300610'>forest,</span>
  <span m='3301040'>but</span> <span m='3301090'>then</span> <span m='3301270'>we're</span>
  <span m='3301390'>going</span> <span m='3301510'>to</span> <span m='3301660'>hierarchically</span>
  <span m='3302440'>decompose</span> <span m='3303130'>it</span> <span m='3303910'>and</span>
  <span m='3304060'>say,</span> <span m='3304550'>well,</span> <span m='3306200'>yeah,</span>
  <span m='3306400'>there's</span> <span m='3306910'>this</span> <span m='3307060'>big</span>
  <span m='3307300'>tree.</span> <span m='3308110'>But</span> <span m='3310060'>some</span>
  <span m='3310390'>of</span> <span m='3310480'>the</span> <span m='3310630'>edges</span>
  <span m='3311470'>I'm</span> <span m='3311560'>going</span> <span m='3311680'>to</span>
  <span m='3311740'>put</span> <span m='3311980'>in</span> <span m='3312130'>the</span>
  <span m='3312220'>next</span> <span m='3312460'>level</span> <span m='3312700'>down.</span>
  <span m='3313600'>Some</span> <span m='3313900'>I</span> <span m='3313990'>won't.</span>
  <span m='3314560'>So</span> <span m='3314800'>some</span> <span m='3315070'>subset</span>
  <span m='3315670'>of</span> <span m='3315760'>this</span> <span m='3315910'>forest</span>
  <span m='3316240'>will</span> <span m='3316330'>be</span> <span m='3316420'>at</span>
  <span m='3316480'>the</span> <span m='3316570'>next</span> <span m='3316750'>level</span>
  <span m='3317020'>down.</span> </p><p><span m='3317890'>And</span> <span m='3317980'>there's</span>
  <span m='3318110'>going</span> <span m='3318260'>to</span> <span m='3318340'>be</span>
  <span m='3318460'>log n</span> <span m='3318910'>levels.</span> <span m='3319660'>That's</span>
  <span m='3319840'>where</span> <span m='3319960'>we</span> <span m='3320260'>lose</span>
  <span m='3320440'>our</span> <span m='3320530'>log</span> <span m='3320770'>factor.</span>
  <span m='3321850'>And</span> <span m='3322000'>the</span> <span m='3322090'>weird</span>
  <span m='3322330'>thing</span> <span m='3322630'>is,</span> <span m='3323380'>there's</span>
  <span m='3323530'>no</span> <span m='3323980'>real</span> <span m='3324640'>reason</span>
  <span m='3325060'>to</span> <span m='3325150'>put</span> <span m='3325330'>things</span>
  <span m='3325630'>down,</span> <span m='3326260'>except</span> <span m='3327190'>we'll</span>
  <span m='3327310'>use</span> <span m='3327520'>it</span> <span m='3327610'>as</span>
  <span m='3327700'>a</span> <span m='3327760'>charging</span> <span m='3328210'>scheme.</span>
  <span m='3329200'>We'll</span> <span m='3329320'>prove</span> <span m='3329710'>that</span>
  <span m='3329890'>an</span> <span m='3330010'>edge</span> <span m='3330190'>can</span>
  <span m='3330340'>only</span> <span m='3330580'>go</span> <span m='3330730'>down</span>
  <span m='3331090'>log</span> <span m='3331420'>n</span> <span m='3331570'>levels.</span>
  <span m='3332740'>And</span> <span m='3333040'>then</span> <span m='3333190'>it</span>
  <span m='3333250'>has</span> <span m='3333460'>to</span> <span m='3333580'>get</span>
  <span m='3333700'>deleted</span> <span m='3334810'>before</span> <span m='3335200'>it</span>
  <span m='3335290'>becomes</span> <span m='3335710'>relevant</span> <span m='3336190'>again.</span>
  <span m='3336820'>So</span> <span m='3337090'>it</span> <span m='3337180'>will</span>
  <span m='3337900'>let</span> <span m='3338170'>us</span> <span m='3338350'>charge</span>
  <span m='3338710'>only</span> <span m='3338920'>log</span> <span m='3339240'>n</span>
  <span m='3339400'>times</span> <span m='3339790'>per</span> <span m='3341890'>edge.</span>
  </p><p><span m='3343030'>OK,</span> <span m='3343180'>that's</span> <span m='3343360'>about</span>
  <span m='3343570'>as</span> <span m='3343990'>good</span> <span m='3344200'>as</span>
  <span m='3344320'>I</span> <span m='3344410'>can</span> <span m='3344500'>give</span>
  <span m='3344620'>you</span> <span m='3344710'>a</span> <span m='3344740'>high-level</span>
  <span m='3345160'>overview.</span> <span m='3345490'>Now</span> <span m='3345670'>we</span>
  <span m='3345790'>have</span> <span m='3345940'>to</span> <span m='3346060'>see</span>
  <span m='3346210'>the</span> <span m='3346300'>details.</span> <span m='3348040'>It's</span>
  <span m='3348250'>kind</span> <span m='3348430'>of</span> <span m='3348520'>amazing</span>
  <span m='3348920'>that</span> <span m='3349000'>this</span> <span m='3349300'>works,</span>
  <span m='3351145'>but it</span> <span m='3351610'>does.</span> </p><p><span m='3353740'>So</span>
  <span m='3353980'>we're</span> <span m='3354040'>going</span> <span m='3354160'>to</span>
  <span m='3354750'>talk</span> <span m='3354970'>about</span> <span m='3355180'>the</span>
  <span m='3355270'>level</span> <span m='3355720'>of</span> <span m='3355840'>an</span>
  <span m='3355960'>edge.</span> <span m='3357320'>This</span> <span m='3357430'>is</span>
  <span m='3357580'>not</span> <span m='3357850'>a</span> <span m='3358210'>definition,</span>
  <span m='3359020'>per</span> <span m='3359290'>se.</span> <span m='3361970'>But</span>
  <span m='3362320'>it's</span> <span m='3362590'>a</span> <span m='3362710'>change</span>
  <span m='3362810'>in</span> <span m='3363220'>quantity</span> <span m='3363730'>over</span>
  <span m='3363940'>time.</span> </p><p><span m='3364420'>As</span> <span m='3364570'>you</span>
  <span m='3364690'>do</span> <span m='3364960'>edge</span> <span m='3365220'>deletions,</span>
  <span m='3365680'>some</span> <span m='3366130'>edges</span> <span m='3366520'>are</span>
  <span m='3366610'>going</span> <span m='3366850'>to</span> <span m='3366970'>decrease</span>
  <span m='3367480'>in</span> <span m='3367600'>level.</span> <span m='3368590'>They</span>
  <span m='3368740'>all</span> <span m='3369010'>start</span> <span m='3372070'>at</span>
  <span m='3372300'>log</span> <span m='3372680'>n.</span> <span m='3373060'>Log</span>
  <span m='3373510'>n is</span> <span m='3373630'>going</span> <span m='3373750'>to</span>
  <span m='3373840'>be</span> <span m='3373930'>the</span> <span m='3374020'>top</span>
  <span m='3374320'>level.</span> <span m='3374590'>That's</span> <span m='3374800'>the</span>
  <span m='3374920'>whole</span> <span m='3375250'>spanning</span> <span m='3375680'>forest.</span>
  <span m='3379390'>They</span> <span m='3379510'>will</span> <span m='3379630'>only</span>
  <span m='3379900'>decrease,</span> <span m='3380380'>so it's</span> <span m='3380560'>monotone.</span>
  <span m='3383320'>And</span> <span m='3383620'>they</span> <span m='3383740'>can</span>
  <span m='3383920'>never</span> <span m='3384250'>get</span> <span m='3384550'>below</span>
  <span m='3384970'>0.</span> <span m='3385840'>So</span> <span m='3385980'>we</span>
  <span m='3386030'>start at</span> <span m='3386440'>log</span> <span m='3386810'>n.</span>
  <span m='3387430'>They</span> <span m='3387550'>could</span> <span m='3387790'>go</span>
  <span m='3388030'>down.</span> <span m='3388960'>And</span> <span m='3389200'>the</span>
  <span m='3389680'>lowest</span> <span m='3390100'>value</span> <span m='3390380'>is</span>
  <span m='3390430'>0.</span> <span m='3391720'>Now,</span> <span m='3391990'>Gi</span>
  <span m='3393820'>is</span> <span m='3393970'>my</span> <span m='3394120'>graph.</span>
  <span m='3395350'>And</span> <span m='3395560'>G</span> <span m='3395920'>is</span>
  <span m='3396040'>going</span> <span m='3396160'>to</span> <span m='3396250'>be</span>
  <span m='3396340'>the</span> <span m='3396460'>subgraph</span> <span m='3397750'>of</span>
  <span m='3399190'>lower-level</span> <span m='3399850'>edges.</span> </p><p><span
  m='3407785'>It's</span> <span m='3408160'>going</span> <span m='3408260'>to</span>
  <span m='3408490'>say,</span> <span m='3408820'>level</span> <span m='3409150'>less</span>
  <span m='3409480'>than</span> <span m='3409630'>or</span> <span m='3409720'>equal</span>
  <span m='3409990'>to</span> <span m='3410200'>i.</span> <span m='3412210'>So</span>
  <span m='3412420'>in</span> <span m='3412510'>particular,</span> <span m='3413210'>G</span>
  <span m='3413390'>log</span> <span m='3413700'>n</span> <span m='3413920'>is</span>
  <span m='3414040'>the</span> <span m='3414130'>whole</span> <span m='3414280'>graph.</span>
  <span m='3417830'>So</span> <span m='3417850'>we</span> <span m='3417970'>always</span>
  <span m='3418210'>include</span> <span m='3418510'>lower-level</span> <span m='3419200'>edges.</span>
  </p><p><span m='3420530'>So</span> <span m='3420690'>level</span> <span m='3420940'>0</span>
  <span m='3421210'>is</span> <span m='3421300'>going</span> <span m='3421420'>to</span>
  <span m='3421630'>appear</span> <span m='3421900'>in</span> <span m='3421990'>all</span>
  <span m='3422170'>the</span> <span m='3422460'>Gi's.</span> <span m='3423490'>But</span>
  <span m='3424160'>if</span> <span m='3424870'>we</span> <span m='3426400'>look</span>
  <span m='3426610'>at</span> <span m='3426670'>G 0,</span> <span m='3427170'>it's</span>
  <span m='3427300'>only</span> <span m='3427600'>level</span> <span m='3427840'>0</span>
  <span m='3428050'>edges.</span> <span m='3428370'>G1</span> <span m='3428770'>is</span>
  <span m='3428860'>level</span> <span m='3429070'>0</span> <span m='3429330'>and</span>
  <span m='3429430'>1.</span> <span m='3430250'>And</span> <span m='3430350'>so</span>
  <span m='3430450'>this</span> <span m='3430660'>is</span> <span m='3430750'>sort</span>
  <span m='3430930'>of</span> <span m='3431050'>a</span> <span m='3431110'>hierarchical</span>
  <span m='3431680'>decomposition</span> <span m='3432310'>of</span> <span m='3432400'>the</span>
  <span m='3432490'>graph.</span> <span m='3432790'>We</span> <span m='3432880'>have</span>
  <span m='3432970'>fewer</span> <span m='3433270'>edges</span> <span m='3433540'>at</span>
  <span m='3433630'>the</span> <span m='3433750'>bottom</span> <span m='3434060'>levels.</span>
  </p><p><span m='3437530'>And</span> <span m='3437650'>there's</span> <span m='3437780'>going</span>
  <span m='3437920'>to</span> <span m='3437980'>be</span> <span m='3438340'>two</span>
  <span m='3438670'>key</span> <span m='3438910'>invariants</span> <span m='3439450'>we</span>
  <span m='3439600'>have</span> <span m='3439900'>over</span> <span m='3440760'>these</span>
  <span m='3440950'>structures.</span> <span m='3442530'>In</span> <span m='3442840'>variant</span>
  <span m='3443370'>one</span> <span m='3445175'>it's</span> <span m='3445630'>is</span>
  <span m='3445820'>going</span> <span m='3445970'>to</span> <span m='3446060'>be</span>
  <span m='3446510'>every</span> <span m='3446840'>connected</span> <span m='3447230'>component</span>
  <span m='3447740'>of</span> <span m='3447890'>Gi</span> <span m='3448370'>is</span>
  <span m='3449870'>small.</span> <span m='3463711'>It's</span> <span m='3464220'>going</span>
  <span m='3464400'>to</span> <span m='3464500'>be</span> <span m='3464620'>size,</span>
  <span m='3464920'>at</span> <span m='3465010'>most,</span> <span m='3465460'>2</span>
  <span m='3465730'>to</span> <span m='3465820'>the</span> <span m='3466000'>i.</span>
  </p><p><span m='3471140'>This</span> <span m='3471310'>is</span> <span m='3471430'>really</span>
  <span m='3471640'>what's</span> <span m='3472190'>going</span> <span m='3472320'>to</span>
  <span m='3472390'>let</span> <span m='3472570'>us</span> <span m='3472690'>charge</span>
  <span m='3473020'>against</span> <span m='3473250'>something.</span> <span m='3474160'>Whenever</span>
  <span m='3474460'>you</span> <span m='3474580'>go</span> <span m='3474790'>down</span>
  <span m='3475150'>a</span> <span m='3475210'>level,</span> <span m='3475840'>the</span>
  <span m='3476140'>max</span> <span m='3476440'>size</span> <span m='3476680'>of</span>
  <span m='3476740'>a</span> <span m='3476770'>connected</span> <span m='3477400'>component</span>
  <span m='3477820'>goes</span> <span m='3478030'>down</span> <span m='3478330'>by</span>
  <span m='3478510'>a</span> <span m='3478540'>factor</span> <span m='3478930'>of</span>
  <span m='3479020'>2.</span> <span m='3479740'>So at</span> <span m='3479870'>level</span>
  <span m='3480160'>0,</span> <span m='3480580'>all</span> <span m='3480730'>components</span>
  <span m='3481120'>have</span> <span m='3481210'>size</span> <span m='3481640'>1.</span>
  </p><p><span m='3483380'>There are</span> <span m='3483490'>no</span> <span m='3483670'>edges</span>
  <span m='3484320'>at</span> <span m='3484690'>level</span> <span m='3484950'>0.</span>
  <span m='3485760'>So</span> <span m='3485900'>I</span> <span m='3486010'>kind</span>
  <span m='3486250'>of</span> <span m='3486310'>lied.</span> <span m='3486580'>I</span>
  <span m='3486640'>guess</span> <span m='3487540'>the</span> <span m='3487660'>lowest</span>
  <span m='3487930'>level is</span> <span m='3488260'>1.</span> </p><p><span m='3489320'>At</span>
  <span m='3489700'>level</span> <span m='3490000'>1,</span> <span m='3490990'>you</span>
  <span m='3491170'>can</span> <span m='3491320'>have</span> <span m='3491470'>two</span>
  <span m='3491650'>vertices.</span> <span m='3492140'>So</span> <span m='3492220'>there</span>
  <span m='3492400'>can</span> <span m='3492520'>be</span> <span m='3492670'>isolated</span>
  <span m='3493270'>edges</span> <span m='3494350'>in</span> <span m='3494650'>Gi.</span>
  <span m='3495000'>But</span> <span m='3495130'>that's</span> <span m='3495370'>it.</span>
  <span m='3496050'>You</span> <span m='3496150'>can't</span> <span m='3496360'>have</span>
  <span m='3496720'>a</span> <span m='3496780'>path</span> <span m='3497170'>of</span>
  <span m='3497260'>length</span> <span m='3497530'>2</span> <span m='3498290'>in</span>
  <span m='3498460'>G1,</span> <span m='3499510'>and</span> <span m='3499660'>so</span>
  <span m='3499840'>on</span> <span m='3500050'>up</span> <span m='3500170'>the</span>
  <span m='3500290'>tree.</span> <span m='3500500'>At</span> <span m='3500690'>G</span>
  <span m='3500800'>log</span> <span m='3501010'>n,</span> <span m='3501280'>you</span>
  <span m='3501370'>can</span> <span m='3501520'>have</span> <span m='3501910'>the</span>
  <span m='3501970'>whole</span> <span m='3502120'>graph.</span> <span m='3502420'>Whole</span>
  <span m='3502570'>thing</span> <span m='3502750'>could</span> <span m='3502870'>be</span>
  <span m='3502990'>connected.</span> <span m='3504010'>But</span> <span m='3504220'>this</span>
  <span m='3504400'>will</span> <span m='3504520'>let</span> <span m='3504700'>us</span>
  <span m='3506170'>charge</span> <span m='3506590'>to</span> <span m='3506710'>something</span>
  <span m='3507100'>as</span> <span m='3507280'>we</span> <span m='3507430'>go</span>
  <span m='3507610'>down</span> <span m='3507970'>in</span> <span m='3508120'>the</span>
  <span m='3508240'>tree.</span> <span m='3511240'>As</span> <span m='3511390'>we</span>
  <span m='3511450'>go</span> <span m='3511570'>down</span> <span m='3511780'>in</span>
  <span m='3511920'>levels,</span> <span m='3512740'>I</span> <span m='3513130'>should</span>
  <span m='3513520'>say.</span> </p><p><span m='3527890'>So</span> <span m='3528460'>next</span>
  <span m='3528730'>thing</span> <span m='3528940'>we</span> <span m='3529030'>need</span>
  <span m='3530170'>is</span> <span m='3530350'>a</span> <span m='3530410'>spanning</span>
  <span m='3530830'>forest</span> <span m='3531280'>for</span> <span m='3531400'>each</span>
  <span m='3531680'>Gi.</span> <span m='3532900'>Fi</span> <span m='3533500'>is</span>
  <span m='3533680'>going</span> <span m='3533860'>to</span> <span m='3533920'>be</span>
  <span m='3534030'>spanning</span> <span m='3534390'>forest</span> <span m='3535500'>of</span>
  <span m='3535710'>Gi.</span> <span m='3538690'>So</span> <span m='3538780'>it's</span>
  <span m='3538870'>going</span> <span m='3539020'>to</span> <span m='3539080'>maintain</span>
  <span m='3539620'>the</span> <span m='3539710'>connected</span> <span m='3540070'>components</span>
  <span m='3540580'>of</span> <span m='3540820'>Gi.</span> </p><p><span m='3543550'>And</span>
  <span m='3543700'>we're</span> <span m='3543820'>going</span> <span m='3543940'>to</span>
  <span m='3544030'>store</span> <span m='3544300'>that</span> <span m='3545350'>using</span>
  <span m='3545620'>an</span> <span m='3545680'>Euler-tour</span> <span m='3546100'>tree.</span>
  <span m='3553570'>There's</span> <span m='3553670'>this</span> <span m='3553970'>issue</span>
  <span m='3554270'>of</span> <span m='3554360'>pluralization.</span> <span m='3554855'>I'll</span>
  <span m='3555350'>say</span> <span m='3555830'>trees.</span> <span m='3556820'>Because</span>
  <span m='3557450'>Fi</span> <span m='3557780'>is</span> <span m='3557900'>disconnected.</span>
  </p><p><span m='3558710'>Each</span> <span m='3558920'>connected</span> <span m='3559250'>component</span>
  <span m='3559700'>you</span> <span m='3559820'>use,</span> <span m='3560330'>you</span>
  <span m='3560420'>store</span> <span m='3560660'>using</span> <span m='3560960'>an</span>
  <span m='3561030'>Euler-tour</span> <span m='3561680'>tree.</span> <span m='3563390'>Together,</span>
  <span m='3563780'>it's</span> <span m='3563900'>an</span> <span m='3564020'>Euler-tour</span>
  <span m='3564500'>forest,</span> <span m='3564980'>I</span> <span m='3565010'>suppose.</span>
  <span m='3567200'>So</span> <span m='3567500'>that</span> <span m='3567680'>way</span>
  <span m='3567890'>we</span> <span m='3568040'>can</span> <span m='3568190'>do</span>
  <span m='3568310'>a</span> <span m='3568370'>query.</span> <span m='3568850'>And</span>
  <span m='3568940'>so</span> <span m='3569300'>given</span> <span m='3569630'>two</span>
  <span m='3569780'>nodes,</span> <span m='3570110'>we</span> <span m='3570260'>can</span>
  <span m='3570380'>know</span> <span m='3570530'>whether</span> <span m='3570740'>they're</span>
  <span m='3570890'>in</span> <span m='3570950'>the</span> <span m='3571040'>same</span>
  <span m='3571280'>connected</span> <span m='3571640'>component</span> <span m='3572810'>in</span>
  <span m='3573170'>Fi,</span> <span m='3574040'>just</span> <span m='3574250'>by</span>
  <span m='3574580'>saying</span> <span m='3574820'>whether</span> <span m='3575030'>they</span>
  <span m='3575600'>live</span> <span m='3577310'>under</span> <span m='3577520'>the</span>
  <span m='3577610'>same</span> <span m='3578060'>root.</span> </p><p><span m='3581090'>Well,</span>
  <span m='3581390'>in</span> <span m='3581510'>particular,</span> <span m='3582150'>that</span>
  <span m='3582230'>means</span> <span m='3582470'>that</span> <span m='3582800'>f</span>
  <span m='3583050'>log</span> <span m='3583310'>n,</span> <span m='3584400'>which</span>
  <span m='3584450'>is</span> <span m='3584540'>a</span> <span m='3584600'>spanning</span>
  <span m='3584960'>forest</span> <span m='3585260'>of</span> <span m='3585560'>G
  log</span> <span m='3585940'>n,</span> <span m='3586410'>which</span> <span m='3586520'>is</span>
  <span m='3586790'>everything,</span> <span m='3588200'>that</span> <span m='3588440'>will</span>
  <span m='3588560'>let</span> <span m='3588740'>me</span> <span m='3588860'>solve</span>
  <span m='3589190'>queries.</span> <span m='3590940'>This</span> <span m='3591080'>is</span>
  <span m='3591380'>the</span> <span m='3591500'>desired</span> <span m='3593040'>spanning</span>
  <span m='3593430'>forest</span> <span m='3595780'>that</span> <span m='3596430'>will</span>
  <span m='3596540'>let</span> <span m='3596720'>me</span> <span m='3597110'>ask</span>
  <span m='3597440'>connectivity</span> <span m='3598010'>queries.</span> </p><p><span
  m='3598730'>So</span> <span m='3598850'>all</span> <span m='3599030'>this</span>
  <span m='3599200'>infrastructure</span> <span m='3599550'>is</span> <span m='3599960'>in</span>
  <span m='3600080'>order</span> <span m='3600260'>to</span> <span m='3600380'>support</span>
  <span m='3600740'>deletes</span> <span m='3601160'>efficiently.</span> <span m='3602330'>But</span>
  <span m='3602540'>queries</span> <span m='3602900'>are</span> <span m='3603110'>easy.</span>
  <span m='3603540'>We</span> <span m='3603640'>just</span> <span m='3603710'>look</span>
  <span m='3603860'>at</span> <span m='3603920'>the</span> <span m='3604010'>top</span>
  <span m='3604310'>forest.</span> <span m='3604730'>That's</span> <span m='3604970'>the
  one</span> <span m='3605150'>we</span> <span m='3605270'>want.</span> </p><p><span
  m='3607520'>OK,</span> <span m='3608270'>now</span> <span m='3608630'>second</span>
  <span m='3608960'>invariant,</span> <span m='3609890'>this</span> <span m='3610280'>is</span>
  <span m='3610400'>where</span> <span m='3610580'>things</span> <span m='3610910'>get</span>
  <span m='3611060'>interesting.</span> <span m='3615938'>Variant</span> <span m='3616420'>2.</span>
  <span m='3619552'>The</span> <span m='3620030'>forests</span> <span m='3620720'>have</span>
  <span m='3620990'>to</span> <span m='3621150'>nest.</span> <span m='3627320'>So</span>
  <span m='3627520'>F</span> <span m='3627910'>log</span> <span m='3628160'>n,</span>
  <span m='3628550'>of</span> <span m='3628670'>course,</span> <span m='3628910'>has</span>
  <span m='3629090'>the</span> <span m='3629180'>most</span> <span m='3629450'>edges.</span>
  <span m='3630245'>F0</span> <span m='3630920'>is</span> <span m='3631010'>going</span>
  <span m='3631130'>to</span> <span m='3631190'>have</span> <span m='3631280'>the</span>
  <span m='3631370'>fewest</span> <span m='3631760'>edges.</span> <span m='3632420'>But</span>
  <span m='3632570'>I</span> <span m='3632630'>want</span> <span m='3632840'>them</span>
  <span m='3632990'>to</span> <span m='3633110'>be</span> <span m='3633260'>contained</span>
  <span m='3633830'>in</span> <span m='3633950'>this</span> <span m='3634790'>nested</span>
  <span m='3635120'>structure.</span> </p><p><span m='3635840'>All</span> <span m='3635990'>this</span>
  <span m='3636140'>is</span> <span m='3636200'>saying</span> <span m='3637040'>is</span>
  <span m='3637160'>that</span> <span m='3637250'>there's</span> <span m='3637460'>really</span>
  <span m='3637760'>only</span> <span m='3638000'>one</span> <span m='3638180'>spanning</span>
  <span m='3638540'>forest,</span> <span m='3639580'>F</span> <span m='3639880'>log</span>
  <span m='3640140'>n.</span> <span m='3640495'>Fi</span> <span m='3641330'>is</span>
  <span m='3641750'>just</span> <span m='3642330'>F</span> <span m='3642610'>log</span>
  <span m='3642860'>n,</span> <span m='3644300'>but</span> <span m='3644480'>restricted</span>
  <span m='3645170'>to</span> <span m='3646820'>the</span> <span m='3647030'>edges</span>
  <span m='3647480'>of</span> <span m='3647720'>Gi.</span> <span m='3650030'>So</span>
  <span m='3650180'>really</span> <span m='3650480'>we're</span> <span m='3650600'>trying</span>
  <span m='3650930'>to</span> <span m='3651050'>represent</span> <span m='3651590'>this</span>
  <span m='3651770'>forest.</span> <span m='3652730'>But</span> <span m='3652880'>then,</span>
  <span m='3653630'>as</span> <span m='3653810'>we</span> <span m='3653930'>look</span>
  <span m='3654110'>at</span> <span m='3654200'>lower</span> <span m='3654500'>levels,</span>
  <span m='3655130'>we</span> <span m='3655340'>just</span> <span m='3655610'>forget</span>
  <span m='3655970'>about</span> <span m='3656180'>the</span> <span m='3656270'>higher-level</span>
  <span m='3656780'>edges.</span> </p><p><span m='3657490'>Restrict</span> <span m='3657810'>to</span>
  <span m='3657950'>the</span> <span m='3658030'>lower</span> <span m='3658700'>edges</span>
  <span m='3659030'>of</span> <span m='3659150'>level</span> <span m='3659390'>less</span>
  <span m='3659580'>than or equal to</span> <span m='3659930'>i,</span> <span m='3660200'>that's</span>
  <span m='3660410'>our</span> <span m='3661100'>smaller</span> <span m='3661520'>force.</span>
  <span m='3661880'>This</span> <span m='3662060'>is,</span> <span m='3662180'>in</span>
  <span m='3662270'>some</span> <span m='3662450'>sense,</span> <span m='3662690'>the</span>
  <span m='3662780'>hierarchical</span> <span m='3663290'>decomposition</span> <span
  m='3664040'>of</span> <span m='3664190'>the</span> <span m='3664280'>forest.</span>
  <span m='3665275'>Because</span> <span m='3665760'>there's</span> <span m='3665840'>really</span>
  <span m='3666050'>only</span> <span m='3666260'>one</span> <span m='3666440'>forest.</span>
  <span m='3667430'>That</span> <span m='3667610'>would</span> <span m='3667730'>make</span>
  <span m='3667970'>our</span> <span m='3668060'>lives</span> <span m='3668820'>way</span>
  <span m='3669110'>easier.</span> </p><p><span m='3670640'>Fun</span> <span m='3670880'>fact,</span>
  <span m='3672200'>is</span> <span m='3672410'>that</span> <span m='3672680'>that</span>
  <span m='3672950'>forest,</span> <span m='3673460'>then,</span> <span m='3674510'>is</span>
  <span m='3674630'>actually</span> <span m='3675230'>not</span> <span m='3675440'>just</span>
  <span m='3675590'>any</span> <span m='3675770'>spanning</span> <span m='3676150'>forest.</span>
  <span m='3676850'>It's</span> <span m='3677000'>a</span> <span m='3677060'>minimum</span>
  <span m='3677480'>spanning</span> <span m='3677930'>forest,</span> <span m='3679370'>with</span>
  <span m='3679550'>respect</span> <span m='3679910'>to</span> <span m='3680030'>level.</span>
  <span m='3685130'>You've</span> <span m='3685280'>probably</span> <span m='3685550'>heard</span>
  <span m='3685700'>of</span> <span m='3685790'>minimum</span> <span m='3686090'>spanning</span>
  <span m='3686450'>tree.</span> <span m='3686720'>Minimum</span> <span m='3686990'>spanning</span>
  <span m='3687320'>forest</span> <span m='3688150'>is</span> <span m='3688340'>just</span>
  <span m='3688640'>the</span> <span m='3688790'>analog</span> <span m='3689180'>for</span>
  <span m='3690110'>disconnected</span> <span m='3690560'>graphs.</span> </p><p><span
  m='3693680'>So</span> <span m='3694310'>we're</span> <span m='3694430'>defining</span>
  <span m='3694910'>the</span> <span m='3695270'>weight</span> <span m='3695600'>of</span>
  <span m='3695690'>an</span> <span m='3695780'>edge</span> <span m='3696560'>to</span>
  <span m='3696680'>be</span> <span m='3696860'>it's</span> <span m='3697010'>level.</span>
  <span m='3699000'>And</span> <span m='3699410'>so</span> <span m='3700395'>F</span>
  <span m='3700720'>log</span> <span m='3701120'>n can't</span> <span m='3701330'>just</span>
  <span m='3701510'>be</span> <span m='3701660'>any</span> <span m='3701840'>spanning</span>
  <span m='3702140'>forest.</span> <span m='3702460'>It</span> <span m='3702560'>has</span>
  <span m='3702740'>to</span> <span m='3702860'>prefer</span> <span m='3703370'>lower-level</span>
  <span m='3703970'>edges.</span> <span m='3704750'>Otherwise,</span> <span m='3705120'>this</span>
  <span m='3705230'>nesting</span> <span m='3705650'>structure</span> <span m='3706070'>won't</span>
  <span m='3706220'>be</span> <span m='3706340'>true.</span> </p><p><span m='3708440'>Now,</span>
  <span m='3710300'>that</span> <span m='3710480'>doesn't</span> <span m='3710750'>uniquely</span>
  <span m='3711110'>define</span> <span m='3711410'>the</span> <span m='3711500'>forest</span>
  <span m='3711800'>or</span> <span m='3711860'>anything.</span> <span m='3712190'>Because</span>
  <span m='3712340'>maybe</span> <span m='3712610'>all</span> <span m='3712730'>the</span>
  <span m='3712820'>levels</span> <span m='3713120'>are</span> <span m='3713180'>log</span>
  <span m='3713440'>n.</span> <span m='3713630'>And</span> <span m='3713720'>then</span>
  <span m='3714290'>every</span> <span m='3714560'>spanning</span> <span m='3714890'>forest</span>
  <span m='3715230'>is</span> <span m='3715380'>a minimum</span> <span m='3715660'>spanning</span>
  <span m='3716000'>forest.</span> <span m='3716840'>But</span> <span m='3717350'>it's</span>
  <span m='3717560'>a</span> <span m='3717680'>constraint</span> <span m='3718190'>on</span>
  <span m='3718370'>spanning</span> <span m='3718700'>forest.</span> <span m='3720890'>Cool</span>
  <span m='3723190'>Let's go</span> <span m='3723420'>over</span> <span m='3723640'>here.</span>
  </p><p><span m='3748120'>Let</span> <span m='3748270'>me</span> <span m='3748360'>quickly</span>
  <span m='3748690'>say</span> <span m='3748830'>how</span> <span m='3748910'>to</span>
  <span m='3749080'>do</span> <span m='3749380'>an</span> <span m='3749500'>insert</span>
  <span m='3750130'>and</span> <span m='3750250'>how</span> <span m='3750370'>to</span>
  <span m='3750460'>do</span> <span m='3750580'>a</span> <span m='3750640'>query.</span>
  <span m='3751120'>These</span> <span m='3751690'>are</span> <span m='3751750'>really</span>
  <span m='3751960'>easy.</span> <span m='3753340'>Delete</span> <span m='3753640'>is</span>
  <span m='3753760'>really</span> <span m='3754000'>where</span> <span m='3754150'>the</span>
  <span m='3754270'>action</span> <span m='3754600'>is,</span> <span m='3754970'>but</span>
  <span m='3755200'>just</span> <span m='3755380'>to</span> <span m='3755500'>make</span>
  <span m='3755650'>sure</span> <span m='3755860'>we're</span> <span m='3756010'>on</span>
  <span m='3756130'>the</span> <span m='3756190'>same</span> <span m='3756430'>page,</span>
  <span m='3760340'>and</span> <span m='3760640'>to</span> <span m='3760690'>introduce</span>
  <span m='3761080'>a</span> <span m='3761110'>little</span> <span m='3761290'>bit</span>
  <span m='3761410'>of</span> <span m='3761500'>notation,</span> <span m='3762790'>and</span>
  <span m='3763000'>say</span> <span m='3763180'>a</span> <span m='3763210'>little</span>
  <span m='3763450'>bit</span> <span m='3763570'>about</span> <span m='3763750'>what</span>
  <span m='3763900'>we</span> <span m='3764020'>do.</span> <span m='3765640'>We</span>
  <span m='3765850'>are</span> <span m='3765940'>going</span> <span m='3766060'>to</span>
  <span m='3766150'>store</span> <span m='3766630'>incidence</span> <span m='3767140'>lists,</span>
  <span m='3768710'>which</span> <span m='3768820'>is</span> <span m='3769030'>for</span>
  <span m='3769240'>every</span> <span m='3771370'>vertex,</span> <span m='3771940'>we</span>
  <span m='3772090'>have</span> <span m='3772270'>a</span> <span m='3772330'>list</span>
  <span m='3772600'>of</span> <span m='3772720'>the</span> <span m='3772870'>incident</span>
  <span m='3773260'>edges</span> <span m='3774550'>in</span> <span m='3774790'>a</span>
  <span m='3774940'>linked</span> <span m='3775210'>list.</span> </p><p><span m='3779050'>So</span>
  <span m='3779170'>in</span> <span m='3779260'>constant</span> <span m='3779590'>time,</span>
  <span m='3779860'>we</span> <span m='3779950'>can</span> <span m='3780100'>add</span>
  <span m='3780310'>our</span> <span m='3780430'>edge</span> <span m='3780670'>to</span>
  <span m='3780820'>v</span> <span m='3780930'>and</span> <span m='3781030'>w's</span>
  <span m='3781390'>incidence</span> <span m='3781500'>lists.</span> <span m='3782110'>That's</span>
  <span m='3782770'>not</span> <span m='3782890'>maintaining</span> <span m='3783370'>any</span>
  <span m='3783520'>order or</span> <span m='3783850'>anything</span> <span m='3784150'>special.</span>
  <span m='3786250'>Then</span> <span m='3786430'>we</span> <span m='3786610'>also</span>
  <span m='3787090'>set</span> <span m='3789010'>the</span> <span m='3789490'>level</span>
  <span m='3789910'>of</span> <span m='3790030'>the</span> <span m='3790150'>edge</span>
  <span m='3790480'>to</span> <span m='3790630'>the</span> <span m='3791500'>log</span>
  <span m='3791930'>n.</span> <span m='3793540'>That's</span> <span m='3793840'>what</span>
  <span m='3793990'>I</span> <span m='3794020'>said,</span> <span m='3794290'>every</span>
  <span m='3794560'>edge</span> <span m='3794770'>starts</span> <span m='3795040'>at</span>
  <span m='3795100'>level</span> <span m='3795430'>log</span> <span m='3795820'>n.</span>
  </p><p><span m='3796990'>And</span> <span m='3797440'>then</span> <span m='3797560'>there's</span>
  <span m='3797710'>one</span> <span m='3797830'>more</span> <span m='3797980'>thing,</span>
  <span m='3798410'>which</span> <span m='3798520'>is</span> <span m='3798760'>if</span>
  <span m='3799383'>v</span> <span m='3799766'>and</span> <span m='3800150'>w</span>
  <span m='3802010'>are</span> <span m='3802390'>disconnected,</span> <span m='3807400'>and</span>
  <span m='3807880'>F</span> <span m='3808120'>log</span> <span m='3808390'>n,</span>
  <span m='3811720'>we</span> <span m='3811870'>can</span> <span m='3812200'>tell</span>
  <span m='3812560'>that</span> <span m='3812860'>because</span> <span m='3813280'>we</span>
  <span m='3813370'>can</span> <span m='3813550'>do</span> <span m='3813880'>a</span>
  <span m='3814120'>connectivity</span> <span m='3814720'>query</span> <span m='3815110'>on</span>
  <span m='3815260'>F</span> <span m='3815470'>log</span> <span m='3815710'>n.</span>
  <span m='3816400'>We</span> <span m='3816520'>have</span> <span m='3816670'>that</span>
  <span m='3816820'>as</span> <span m='3816910'>an</span> <span m='3817070'>Euler-tour</span>
  <span m='3817170'>tree.</span> <span m='3817690'>So</span> <span m='3817840'>we</span>
  <span m='3817900'>can</span> <span m='3818020'>see</span> <span m='3818170'>whether</span>
  <span m='3818380'>v</span> <span m='3818470'>and</span> <span m='3818620'>w</span>
  <span m='3818850'>are in</span> <span m='3818950'>different</span> <span m='3819310'>components.</span>
  <span m='3820180'>If</span> <span m='3820300'>they</span> <span m='3820450'>are,</span>
  <span m='3820690'>we</span> <span m='3820810'>have</span> <span m='3820960'>to</span>
  <span m='3821050'>merge</span> <span m='3821320'>them.</span> <span m='3821800'>So</span>
  <span m='3822160'>we</span> <span m='3822280'>merge</span> <span m='3822520'>them.</span>
  <span m='3823750'>We</span> <span m='3824680'>This</span> <span m='3825010'>is</span>
  <span m='3825360'>what</span> <span m='3825710'>you</span> <span m='3826360'>call</span>
  <span m='3826600'>an</span> <span m='3826720'>edge</span> <span m='3826870'>insertion.</span>
  </p><p><span m='3832340'>So</span> <span m='3832390'>this</span> <span m='3832600'>is</span>
  <span m='3832810'>an</span> <span m='3832980'>Euler-tour</span> <span m='3833500'>tree</span>
  <span m='3834100'>insertion,</span> <span m='3835390'>that</span> <span m='3835570'>we</span>
  <span m='3835690'>know</span> <span m='3835840'>how</span> <span m='3835960'>to</span>
  <span m='3836080'>do</span> <span m='3836290'>in</span> <span m='3836500'>log</span>
  <span m='3836970'>n. We</span> <span m='3837120'>reroute</span> <span m='3838020'>and</span>
  <span m='3838340'>we</span> <span m='3838450'>do</span> <span m='3838570'>a</span>
  <span m='3838630'>join.</span> <span m='3840508'>So</span> <span m='3840910'>that's</span>
  <span m='3841540'>cheap.</span> <span m='3842640'>And</span> <span m='3843520'>that's</span>
  <span m='3843700'>it.</span> </p><p><span m='3844640'>So</span> <span m='3844870'>insertion</span>
  <span m='3845290'>is</span> <span m='3845410'>easy</span> <span m='3845650'>to</span>
  <span m='3845800'>do</span> <span m='3846130'>in</span> <span m='3846370'>log</span>
  <span m='3846600'>n</span> <span m='3846760'>time,</span> <span m='3847000'>actually.</span>
  <span m='3847930'>Its</span> <span m='3848320'>deletion</span> <span m='3848810'>that's</span>
  <span m='3848920'>going</span> <span m='3849040'>to</span> <span m='3849130'>be</span>
  <span m='3850120'>painful.</span> <span m='3850880'>Actually,</span> <span m='3851400'>we're</span>
  <span m='3851560'>going</span> <span m='3851710'>to</span> <span m='3851770'>charge</span>
  <span m='3852130'>through</span> <span m='3852220'>the</span> <span m='3852340'>inserts.</span>
  <span m='3852690'>So</span> <span m='3852880'>it'll</span> <span m='3852910'>be</span>
  <span m='3853060'>end</span> <span m='3853180'>up</span> <span m='3853270'>being</span>
  <span m='3853440'>log</span> <span m='3853630'>squared</span> <span m='3853840'>amortized.</span>
  <span m='3854350'>But</span> <span m='3854470'>worst</span> <span m='3854680'>case,</span>
  <span m='3854950'>it's</span> <span m='3855250'>log</span> <span m='3855660'>n.</span>
  </p><p><span m='3857770'>Great.</span> <span m='3859600'>I</span> <span m='3859630'>want</span>
  <span m='3859750'>to</span> <span m='3859810'>say</span> <span m='3859900'>a</span>
  <span m='3859930'>little</span> <span m='3860170'>bit</span> <span m='3860260'>about</span>
  <span m='3860510'>connectivity.</span> <span m='3861160'>Now</span> <span m='3861340'>we</span>
  <span m='3861490'>know</span> <span m='3862330'>how</span> <span m='3862420'>to</span>
  <span m='3862540'>solve</span> <span m='3862750'>connectivity</span> <span m='3863290'>already.</span>
  <span m='3864100'>We</span> <span m='3864190'>do</span> <span m='3864310'>find</span>
  <span m='3864610'>root</span> <span m='3864850'>on</span> <span m='3865120'>v</span>
  <span m='3865380'>and</span> <span m='3865870'>w</span> <span m='3867160'>and</span>
  <span m='3868090'>in</span> <span m='3868190'>log</span> <span m='3868260'>n</span>
  <span m='3868510'>time,</span> <span m='3868870'>we</span> <span m='3869050'>determine</span>
  <span m='3869470'>whether</span> <span m='3869890'>they're</span> <span m='3869990'>in</span>
  <span m='3870130'>the</span> <span m='3870190'>same</span> <span m='3870430'>component.</span>
  <span m='3871450'>But</span> <span m='3871660'>I</span> <span m='3871810'>actually</span>
  <span m='3872230'>claimed--</span> <span m='3872640'>it's</span> <span m='3873050'>maybe</span>
  <span m='3873490'>erased</span> <span m='3874270'>by</span> <span m='3874450'>now.</span>
  <span m='3876560'>Yeah.</span> </p><p><span m='3877170'>But</span> <span m='3877300'>I</span>
  <span m='3877360'>claim</span> <span m='3877660'>not</span> <span m='3877840'>to</span>
  <span m='3877900'>log</span> <span m='3878230'>n</span> <span m='3878350'>query.</span>
  <span m='3878560'>I</span> <span m='3878650'>claimed</span> <span m='3878950'>a</span>
  <span m='3879010'>log</span> <span m='3879370'>over</span> <span m='3879610'>log</span>
  <span m='3879910'>log</span> <span m='3880150'>query.</span> <span m='3880660'>Turns</span>
  <span m='3880870'>out,</span> <span m='3881020'>that's</span> <span m='3881230'>really</span>
  <span m='3881440'>easy</span> <span m='3881680'>to</span> <span m='3881830'>do.</span>
  <span m='3883400'>You</span> <span m='3883510'>just</span> <span m='3885070'>change</span>
  <span m='3885850'>the</span> <span m='3886300'>top</span> <span m='3886720'>level</span>
  <span m='3887200'>minimum</span> <span m='3887500'>spanning</span> <span m='3887860'>forest</span>
  <span m='3888100'>slightly.</span> </p><p><span m='3889720'>So</span> <span m='3890020'>I</span>
  <span m='3890140'>want</span> <span m='3890290'>to</span> <span m='3890380'>make</span>
  <span m='3892890'>F</span> <span m='3893350'>log</span> <span m='3893680'>n</span>
  <span m='3896050'>equal</span> <span m='3896380'>to</span> <span m='3896810'>a</span>
  <span m='3897180'>B-tree.</span> <span m='3897940'>Or</span> <span m='3898330'>actually,</span>
  <span m='3898630'>it's</span> <span m='3898780'>a</span> <span m='3898840'>bunch</span>
  <span m='3899080'>of</span> <span m='3899220'>B-trees,</span> <span m='3899880'>one</span>
  <span m='3900130'>per</span> <span m='3900310'>connected</span> <span m='3900640'>component,</span>
  <span m='3902260'>of</span> <span m='3902470'>branching</span> <span m='3902890'>factor</span>
  <span m='3904460'>log</span> <span m='3905000'>n.</span> <span m='3908680'>I</span>
  <span m='3908740'>guess</span> <span m='3908940'>it's a</span> <span m='3909010'>B-tree,</span>
  <span m='3909560'>so</span> <span m='3909630'>I</span> <span m='3909670'>have</span>
  <span m='3909880'>to</span> <span m='3909940'>have</span> <span m='3910060'>some</span>
  <span m='3910210'>slop.</span> <span m='3910600'>Theta</span> <span m='3910900'>log</span>
  <span m='3911170'>n, let's</span> <span m='3911380'>say.</span> </p><p><span m='3913600'>Usually</span>
  <span m='3915310'>we</span> <span m='3915640'>said</span> <span m='3915820'>with</span>
  <span m='3915940'>Euler-tour</span> <span m='3916390'>trees,</span> <span m='3916720'>it</span>
  <span m='3916780'>was</span> <span m='3917020'>a</span> <span m='3917380'>balanced</span>
  <span m='3917740'>binary</span> <span m='3918160'>search</span> <span m='3918370'>tree.</span>
  <span m='3919090'>I'm</span> <span m='3919180'>going</span> <span m='3919290'>to</span>
  <span m='3919360'>make</span> <span m='3919540'>this</span> <span m='3919810'>particular</span>
  <span m='3920560'>forest</span> <span m='3921430'>use</span> <span m='3921850'>a</span>
  <span m='3922090'>log</span> <span m='3922510'>n</span> <span m='3922780'>way,</span>
  <span m='3923450'>B-tree.</span> <span m='3924700'>This</span> <span m='3924880'>is</span>
  <span m='3924970'>going</span> <span m='3925090'>to</span> <span m='3925210'>slow</span>
  <span m='3925590'>down</span> <span m='3926020'>updates.</span> <span m='3926560'>But</span>
  <span m='3926770'>it</span> <span m='3926860'>actually</span> <span m='3927190'>speeds</span>
  <span m='3927610'>up</span> <span m='3927790'>queries.</span> </p><p><span m='3929710'>So</span>
  <span m='3931870'>to</span> <span m='3931990'>do</span> <span m='3932140'>a</span>
  <span m='3932200'>find</span> <span m='3932550'>root</span> <span m='3934000'>is</span>
  <span m='3934180'>now</span> <span m='3934390'>a</span> <span m='3934420'>little</span>
  <span m='3934660'>bit</span> <span m='3934750'>easier.</span> <span m='3936280'>Find</span>
  <span m='3936610'>root</span> <span m='3936820'>should</span> <span m='3936970'>just</span>
  <span m='3937210'>be</span> <span m='3940030'>log</span> <span m='3940630'>base</span>
  <span m='3941020'>log</span> <span m='3941470'>n</span> <span m='3942220'>of</span>
  <span m='3942400'>n,</span> <span m='3942790'>which</span> <span m='3943030'>is</span>
  <span m='3943210'>log</span> <span m='3943540'>n</span> <span m='3943720'>over</span>
  <span m='3943930'>log</span> <span m='3944200'>log</span> <span m='3944380'>n.</span>
  <span m='3945850'>Because</span> <span m='3946240'>find</span> <span m='3946540'>root,</span>
  <span m='3946810'>you</span> <span m='3946930'>just</span> <span m='3947110'>need</span>
  <span m='3947260'>to</span> <span m='3947350'>go</span> <span m='3947710'>to</span>
  <span m='3947800'>your</span> <span m='3947920'>parent,</span> <span m='3948250'>to</span>
  <span m='3948370'>your</span> <span m='3948460'>parent,</span> <span m='3948850'>to</span>
  <span m='3948880'>your</span> <span m='3948970'>parent.</span> </p><p><span m='3949660'>Go</span>
  <span m='3949780'>to</span> <span m='3949840'>the</span> <span m='3949960'>top.</span>
  <span m='3950390'>And</span> <span m='3950490'>then</span> <span m='3950740'>you</span>
  <span m='3950830'>have</span> <span m='3950950'>to</span> <span m='3951070'>go</span>
  <span m='3951220'>to</span> <span m='3951310'>the</span> <span m='3951400'>leftmost</span>
  <span m='3951910'>place.</span> <span m='3952840'>But</span> <span m='3953170'>it's</span>
  <span m='3953350'>easy,</span> <span m='3953860'>in</span> <span m='3953980'>a</span>
  <span m='3954060'>B-tree,</span> <span m='3954400'>to</span> <span m='3954520'>always</span>
  <span m='3954880'>go</span> <span m='3954970'>to</span> <span m='3955030'>the</span>
  <span m='3955120'>leftmost</span> <span m='3955510'>place.</span> </p><p><span m='3955840'>If</span>
  <span m='3955960'>I</span> <span m='3955990'>had</span> <span m='3956110'>to</span>
  <span m='3956170'>do</span> <span m='3956290'>a</span> <span m='3956350'>search</span>
  <span m='3956650'>within</span> <span m='3956750'>the</span> <span m='3956980'>node,</span>
  <span m='3957130'>that</span> <span m='3957280'>would</span> <span m='3957370'>be</span>
  <span m='3957490'>annoying.</span> <span m='3958360'>But</span> <span m='3958570'>going</span>
  <span m='3958810'>to</span> <span m='3958870'>the</span> <span m='3958930'>leftmost,</span>
  <span m='3959410'>that's</span> <span m='3959650'>easy.</span> <span m='3960160'>So</span>
  <span m='3960370'>I</span> <span m='3960430'>only</span> <span m='3960640'>pay</span>
  <span m='3961440'>log</span> <span m='3961700'>over</span> <span m='3961860'>log</span>
  <span m='3962110'>log</span> <span m='3962590'>for</span> <span m='3962740'>query,</span>
  <span m='3963190'>so</span> <span m='3963400'>I</span> <span m='3963470'>got</span>
  <span m='3963940'>my</span> <span m='3964120'>desired</span> <span m='3964450'>query</span>
  <span m='3964720'>time.</span> </p><p><span m='3966410'>And</span> <span m='3966430'>I</span>
  <span m='3966490'>claim the</span> <span m='3966790'>update</span> <span m='3967390'>is</span>
  <span m='3967660'>kind</span> <span m='3967930'>of</span> <span m='3968020'>OK.</span>
  <span m='3968620'>Because</span> <span m='3969850'>it's</span> <span m='3969960'>slowed</span>
  <span m='3970240'>down,</span> <span m='3970600'>but</span> <span m='3970750'>we're</span>
  <span m='3970930'>already</span> <span m='3971170'>going</span> <span m='3971290'>to</span>
  <span m='3971350'>pay</span> <span m='3971530'>log</span> <span m='3971800'>square</span>
  <span m='3972100'>eventually.</span> <span m='3973090'>And</span> <span m='3973240'>here</span>
  <span m='3973420'>we</span> <span m='3973500'>were</span> <span m='3973600'>doing</span>
  <span m='3973870'>log.</span> </p><p><span m='3974470'>So</span> <span m='3976630'>we</span>
  <span m='3976720'>don't</span> <span m='3976840'>need</span> <span m='3976960'>to</span>
  <span m='3977050'>be</span> <span m='3977170'>that</span> <span m='3977350'>fast.</span>
  <span m='3980080'>Update</span> <span m='3980470'>is</span> <span m='3980590'>now</span>
  <span m='3980770'>going</span> <span m='3980890'>to</span> <span m='3980980'>be--</span>
  <span m='3983160'>let's</span> <span m='3983610'>see--</span> <span m='3986070'>the</span>
  <span m='3986680'>height</span> <span m='3986950'>of</span> <span m='3987070'>the</span>
  <span m='3987160'>tree</span> <span m='3989290'>times</span> <span m='3990370'>the</span>
  <span m='3990460'>branching</span> <span m='3990850'>factor.</span> <span m='3994230'>If</span>
  <span m='3994300'>we</span> <span m='3994420'>touch</span> <span m='3995470'>nodes</span>
  <span m='3995920'>in</span> <span m='3996040'>a</span> <span m='3996220'>root-to-leaf</span>
  <span m='3996940'>path,</span> <span m='3997870'>there's</span> <span m='3998020'>log</span>
  <span m='3998230'>over</span> <span m='3998410'>log</span> <span m='3998650'>log</span>
  <span m='3998920'>of</span> <span m='3999040'>them.</span> </p><p><span m='3999310'>For</span>
  <span m='3999460'>each</span> <span m='3999670'>one,</span> <span m='3999910'>we</span>
  <span m='4000000'>have</span> <span m='4000150'>to</span> <span m='4000240'>rewrite</span>
  <span m='4000600'>the</span> <span m='4000690'>whole</span> <span m='4000840'>node.</span>
  <span m='4001170'>So</span> <span m='4001320'>we</span> <span m='4001410'>pay</span>
  <span m='4001590'>log.</span> <span m='4002510'>But</span> <span m='4002630'>this</span>
  <span m='4003580'>is</span> <span m='4003690'>less</span> <span m='4003960'>than</span>
  <span m='4004110'>log</span> <span m='4004310'>squared.</span> </p><p><span m='4009970'>So</span>
  <span m='4010150'>this</span> <span m='4010540'>won't</span> <span m='4010840'>end</span>
  <span m='4011050'>up</span> <span m='4011170'>hurting</span> <span m='4011470'>us.</span>
  <span m='4011620'>Because</span> <span m='4011800'>we</span> <span m='4011980'>only</span>
  <span m='4012310'>do</span> <span m='4012430'>this</span> <span m='4012640'>at</span>
  <span m='4012730'>the</span> <span m='4012850'>top</span> <span m='4013240'>forest</span>
  <span m='4013660'>level.</span> <span m='4014410'>We</span> <span m='4014470'>don't</span>
  <span m='4014680'>do</span> <span m='4014800'>it</span> <span m='4014890'>at</span>
  <span m='4014980'>all</span> <span m='4015130'>the</span> <span m='4015220'>levels.</span>
  <span m='4015580'>If</span> <span m='4015670'>we</span> <span m='4015760'>did</span>
  <span m='4015910'>it at all</span> <span m='4016060'>the</span> <span m='4016150'>levels,</span>
  <span m='4016450'>we</span> <span m='4016630'>would</span> <span m='4017110'>lose</span>
  <span m='4017290'>another</span> <span m='4017560'>log</span> <span m='4017780'>factor,</span>
  <span m='4018220'>log</span> <span m='4018490'>over</span> <span m='4018640'>log</span>
  <span m='4018850'>log</span> <span m='4019030'>factor.</span> </p><p><span m='4020290'>But</span>
  <span m='4020470'>here,</span> <span m='4021670'>we</span> <span m='4021910'>do</span>
  <span m='4022060'>this</span> <span m='4022240'>once</span> <span m='4022480'>at</span>
  <span m='4022540'>the</span> <span m='4022660'>top,</span> <span m='4022960'>pay</span>
  <span m='4023140'>log</span> <span m='4023400'>squared</span> <span m='4023610'>over</span>
  <span m='4023720'>log</span> <span m='4023950'>log.</span> <span m='4024520'>Then</span>
  <span m='4024700'>we</span> <span m='4024820'>have</span> <span m='4024970'>to</span>
  <span m='4025060'>update</span> <span m='4025690'>log</span> <span m='4025990'>n</span>
  <span m='4026110'>other</span> <span m='4026290'>levels,</span> <span m='4026680'>each</span>
  <span m='4026830'>paying</span> <span m='4027130'>log.</span> <span m='4027540'>So
  we're</span> <span m='4027700'>already</span> <span m='4027940'>paying</span> <span
  m='4028150'>log</span> <span m='4028420'>squared</span> <span m='4028630'>for</span>
  <span m='4028720'>the</span> <span m='4028810'>lower</span> <span m='4029050'>level.</span>
  <span m='4029450'>So</span> <span m='4029670'>if</span> <span m='4029800'>we</span>
  <span m='4029920'>increase</span> <span m='4030220'>the</span> <span m='4030280'>top</span>
  <span m='4030520'>level</span> <span m='4030760'>a</span> <span m='4030820'>bit,</span>
  <span m='4031030'>not</span> <span m='4031180'>a</span> <span m='4031240'>big</span>
  <span m='4031420'>deal.</span> <span m='4032500'>So</span> <span m='4032590'>that's</span>
  <span m='4032770'>how</span> <span m='4032860'>you</span> <span m='4033040'>improve</span>
  <span m='4033570'>connectivity</span> <span m='4034090'>queries</span> <span m='4035320'>slightly.</span>
  </p><p><span m='4038230'>And</span> <span m='4038310'>now,</span> <span m='4038650'>finally,</span>
  <span m='4039130'>we</span> <span m='4039250'>get</span> <span m='4039400'>to</span>
  <span m='4039610'>deletes.</span> <span m='4039760'>This</span> <span m='4040270'>is</span>
  <span m='4040840'>the</span> <span m='4040960'>moment</span> <span m='4041320'>you've</span>
  <span m='4041470'>been</span> <span m='4041620'>waiting</span> <span m='4041920'>for.</span>
  <span m='4044188'>How</span> <span m='4044680'>do</span> <span m='4044860'>we</span>
  <span m='4044980'>do</span> <span m='4045130'>a</span> <span m='4045160'>delete</span>
  <span m='4045490'>in</span> <span m='4045610'>this</span> <span m='4045710'>structure?</span>
  <span m='4047870'>What</span> <span m='4047920'>are</span> <span m='4048010'>all</span>
  <span m='4048130'>these</span> <span m='4048280'>levels</span> <span m='4048730'>good</span>
  <span m='4048970'>for?</span> </p><p><span m='4062860'>So</span> <span m='4063220'>we're</span>
  <span m='4063310'>deleting</span> <span m='4063660'>an</span> <span m='4063770'>edge</span>
  <span m='4064170'>e. Its</span> <span m='4064350'>endpoints</span> <span m='4064810'>are</span>
  <span m='4064930'>v</span> <span m='4065275'>and</span> <span m='4065620'>w.</span>
  <span m='4068260'>First</span> <span m='4068500'>thing</span> <span m='4068680'>we</span>
  <span m='4068770'>do</span> <span m='4069160'>is</span> <span m='4069430'>remove</span>
  <span m='4070050'>e</span> <span m='4070390'>from</span> <span m='4070630'>the</span>
  <span m='4070720'>incidence</span> <span m='4071060'>list.</span> <span m='4079710'>If</span>
  <span m='4079830'>every</span> <span m='4080110'>edge</span> <span m='4080260'>stores</span>
  <span m='4080490'>a</span> <span m='4080550'>pointer</span> <span m='4080940'>to</span>
  <span m='4081120'>where</span> <span m='4081300'>it</span> <span m='4081360'>lives</span>
  <span m='4081570'>in</span> <span m='4081660'>the</span> <span m='4081720'>incidence</span>
  <span m='4082040'>list,</span> <span m='4082250'>you</span> <span m='4082350'>can</span>
  <span m='4082470'>do</span> <span m='4082590'>that</span> <span m='4082740'>deletion</span>
  <span m='4083090'>in</span> <span m='4083280'>constant</span> <span m='4083640'>time.</span>
  <span m='4085578'>Great.</span> </p><p><span m='4086550'>So</span> <span m='4088110'>as</span>
  <span m='4088290'>I</span> <span m='4088350'>said,</span> <span m='4090120'>if</span>
  <span m='4090360'>e</span> <span m='4091740'>is</span> <span m='4091980'>not</span>
  <span m='4092880'>in</span> <span m='4093990'>this</span> <span m='4094200'>forest--</span>
  <span m='4101670'>what</span> <span m='4101850'>if</span> <span m='4102000'>it's</span>
  <span m='4102149'>in</span> <span m='4102270'>a</span> <span m='4102359'>lower</span>
  <span m='4102750'>level</span> <span m='4102990'>of</span> <span m='4103460'>forest?</span>
  <span m='4107220'>Oh,</span> <span m='4107340'>I</span> <span m='4107430'>see,</span>
  <span m='4107899'>right.</span> <span m='4108504'>I</span> <span m='4108939'>forgot.</span>
  </p><p><span m='4109810'>In</span> <span m='4110100'>variant</span> <span m='4110370'>two,</span>
  <span m='4111300'>variant</span> <span m='4111510'>two</span> <span m='4111689'>says</span>
  <span m='4111950'>the</span> <span m='4112050'>forests</span> <span m='4112350'>are</span>
  <span m='4112439'>nested.</span> <span m='4112930'>So</span> <span m='4112950'>if</span>
  <span m='4113069'>it's</span> <span m='4113189'>in</span> <span m='4113310'>any</span>
  <span m='4113580'>forest,</span> <span m='4114029'>it's</span> <span m='4114149'>going</span>
  <span m='4114300'>to</span> <span m='4114390'>be</span> <span m='4114479'>in</span>
  <span m='4114540'>the</span> <span m='4114630'>last</span> <span m='4114899'>one.</span>
  <span m='4116279'>So</span> <span m='4116399'>if</span> <span m='4116520'>it's</span>
  <span m='4116609'>not</span> <span m='4116880'>in</span> <span m='4116970'>the</span>
  <span m='4117060'>last</span> <span m='4117300'>one,</span> <span m='4117420'>that</span>
  <span m='4117540'>means</span> <span m='4117720'>it's</span> <span m='4117810'>not</span>
  <span m='4117990'>in</span> <span m='4118080'>any</span> <span m='4118189'>of</span>
  <span m='4118270'>the</span> <span m='4118399'>forests.</span> <span m='4119160'>That</span>
  <span m='4119279'>means</span> <span m='4119630'>we're done.</span> <span m='4119970'>We</span>
  <span m='4120090'>do</span> <span m='4120240'>nothing.</span> <span m='4121240'>That's</span>
  <span m='4121350'>the</span> <span m='4121410'>easy</span> <span m='4121649'>case.</span>
  </p><p><span m='4123750'>We</span> <span m='4123810'>didn't</span> <span m='4123990'>destroy</span>
  <span m='4124290'>any</span> <span m='4124439'>connectivity,</span> <span m='4124950'>because</span>
  <span m='4125130'>the</span> <span m='4125189'>forests</span> <span m='4125520'>represent</span>
  <span m='4125970'>maximal</span> <span m='4126540'>connectivity.</span> <span m='4127300'>They're</span>
  <span m='4127390'>spanning.</span> <span m='4128939'>But</span> <span m='4129090'>if</span>
  <span m='4129210'>it's</span> <span m='4129330'>in</span> <span m='4129450'>the</span>
  <span m='4129540'>forest,</span> <span m='4129899'>then</span> <span m='4130470'>something</span>
  <span m='4131340'>changed.</span> </p><p><span m='4132120'>Then</span> <span m='4132270'>we</span>
  <span m='4132359'>need</span> <span m='4132510'>to</span> <span m='4132630'>determine,</span>
  <span m='4133580'>like</span> <span m='4133770'>in</span> <span m='4133830'>this</span>
  <span m='4133950'>picture,</span> <span m='4134580'>is</span> <span m='4134760'>there</span>
  <span m='4134910'>a</span> <span m='4134939'>replacement</span> <span m='4135510'>edge?</span>
  <span m='4136229'>Or</span> <span m='4136380'>is</span> <span m='4136500'>there</span>
  <span m='4136620'>no</span> <span m='4136770'>replacement</span> <span m='4137279'>edge?</span>
  <span m='4138880'>In</span> <span m='4139020'>which</span> <span m='4139200'>case,</span>
  <span m='4140220'>when</span> <span m='4140399'>there's</span> <span m='4140520'>no</span>
  <span m='4140640'>replacement</span> <span m='4141029'>edge,</span> <span m='4141149'>we</span>
  <span m='4141240'>basically</span> <span m='4141569'>don't</span> <span m='4141750'>do</span>
  <span m='4141870'>anything.</span> </p><p><span m='4142300'>We</span> <span m='4142399'>have</span>
  <span m='4142410'>to</span> <span m='4142500'>do</span> <span m='4142620'>a</span>
  <span m='4142649'>bunch</span> <span m='4142920'>of</span> <span m='4143520'>deletes</span>
  <span m='4144000'>in</span> <span m='4144149'>the</span> <span m='4144390'>forests.</span>
  <span m='4146859'>But</span> <span m='4147620'>yeah,</span> <span m='4149030'>is</span>
  <span m='4149310'>that what</span> <span m='4149779'>I</span> <span m='4149899'>want</span>
  <span m='4150020'>to</span> <span m='4150090'>say</span> <span m='4150340'>next?</span>
  <span m='4151500'>Yes,</span> <span m='4152010'>we</span> <span m='4152130'>always</span>
  <span m='4152370'>do</span> <span m='4152520'>that.</span> </p><p><span m='4153430'>We're</span>
  <span m='4153510'>going</span> <span m='4153620'>to</span> <span m='4153720'>delete</span>
  <span m='4154090'>e.</span> <span m='4154830'>We</span> <span m='4154920'>have</span>
  <span m='4155069'>to</span> <span m='4155160'>delete</span> <span m='4155500'>e.</span>
  <span m='4155760'>So</span> <span m='4155819'>we're</span> <span m='4155910'>going</span>
  <span m='4156029'>to</span> <span m='4156090'>recursively</span> <span m='4156689'>delete</span>
  <span m='4156990'>it</span> <span m='4160170'>from</span> <span m='4161680'>f</span>
  <span m='4163135'>sub</span> <span m='4163620'>e</span> <span m='4164109'>dot</span>
  <span m='4164490'>level</span> <span m='4167000'>up</span> <span m='4167189'>to</span>
  <span m='4168479'>F</span> <span m='4168859'>log</span> <span m='4169240'>n.</span>
  <span m='4169686'>e</span> <span m='4170132'>dot</span> <span m='4170580'>level</span>
  <span m='4170939'>is</span> <span m='4171120'>the</span> <span m='4171359'>earliest</span>
  <span m='4171840'>forest</span> <span m='4172109'>it</span> <span m='4172220'>appears</span>
  <span m='4172560'>in.</span> <span m='4172689'>And</span> <span m='4172790'>we</span>
  <span m='4172979'>have</span> <span m='4173130'>to</span> <span m='4173250'>delete</span>
  <span m='4173490'>it</span> <span m='4173550'>from</span> <span m='4173729'>all</span>
  <span m='4173880'>those.</span> </p><p><span m='4174345'>Each</span> <span m='4174810'>of</span>
  <span m='4174870'>those</span> <span m='4175250'>is</span> <span m='4175470'>an</span>
  <span m='4175700'>Euler-tour</span> <span m='4176100'>tree</span> <span m='4176310'>deletion,</span>
  <span m='4176819'>or</span> <span m='4176939'>cut.</span> <span m='4177770'>And</span>
  <span m='4177870'>so</span> <span m='4178050'>each</span> <span m='4178229'>of</span>
  <span m='4178290'>them</span> <span m='4178410'>pays</span> <span m='4178649'>log
  n</span> <span m='4179069'>total</span> <span m='4179340'>cost</span> <span m='4179670'>log</span>
  <span m='4179850'>squared</span> <span m='4180090'>n.</span> <span m='4180240'>So</span>
  <span m='4180600'>this is</span> <span m='4180960'>where</span> <span m='4181080'>the</span>
  <span m='4181170'>log</span> <span m='4181359'>squared's</span> <span m='4181649'>coming</span>
  <span m='4181920'>from.</span> </p><p><span m='4182790'>That's</span> <span m='4183000'>great.</span>
  <span m='4183540'>Now</span> <span m='4184109'>we've</span> <span m='4184529'>successfully</span>
  <span m='4185040'>deleted</span> <span m='4185340'>the</span> <span m='4185490'>edge.</span>
  <span m='4185700'>But</span> <span m='4185819'>now</span> <span m='4186000'>we</span>
  <span m='4186090'>need</span> <span m='4186240'>to</span> <span m='4186300'>know,</span>
  <span m='4186960'>is</span> <span m='4187109'>there</span> <span m='4187290'>a</span>
  <span m='4187304'>replacement?</span> <span m='4188609'>And</span> <span m='4188729'>at</span>
  <span m='4188819'>what</span> <span m='4188939'>level</span> <span m='4189270'>is</span>
  <span m='4189390'>there</span> <span m='4189640'>a</span> <span m='4189660'>replacement?</span>
  </p><p><span m='4190520'>Now,</span> <span m='4190830'>we</span> <span m='4191040'>know</span>
  <span m='4191460'>by</span> <span m='4193859'>invariant</span> <span m='4194340'>2,</span>
  <span m='4195750'>that</span> <span m='4195900'>there</span> <span m='4196050'>could</span>
  <span m='4196230'>be</span> <span m='4196380'>no</span> <span m='4196650'>replacement</span>
  <span m='4197310'>of</span> <span m='4197490'>lower</span> <span m='4197970'>level.</span>
  <span m='4199380'>The</span> <span m='4199470'>point</span> <span m='4199740'>is,</span>
  <span m='4201540'>this is a</span> <span m='4201690'>minimum</span> <span m='4202050'>spanning</span>
  <span m='4202470'>tree.</span> <span m='4203300'>So</span> <span m='4203400'>e</span>
  <span m='4203670'>was</span> <span m='4204000'>the</span> <span m='4204150'>lowest</span>
  <span m='4204570'>level</span> <span m='4204970'>edge</span> <span m='4205140'>that</span>
  <span m='4205230'>could</span> <span m='4205380'>connect</span> <span m='4205800'>the</span>
  <span m='4205890'>two</span> <span m='4206070'>sides,</span> <span m='4207160'>these</span>
  <span m='4207210'>two</span> <span m='4207390'>connected</span> <span m='4207720'>components</span>
  <span m='4208710'>of</span> <span m='4209010'>the</span> <span m='4209220'>forest.</span>
  </p><p><span m='4210720'>So</span> <span m='4211200'>if</span> <span m='4211380'>there's</span>
  <span m='4211530'>any</span> <span m='4211720'>replacements</span> <span m='4212280'>at</span>
  <span m='4212540'>e's</span> <span m='4212760'>level</span> <span m='4213030'>or</span>
  <span m='4213210'>higher,</span> <span m='4215160'>there</span> <span m='4215340'>might</span>
  <span m='4215490'>not</span> <span m='4215640'>be</span> <span m='4215820'>a</span>
  <span m='4215880'>replacement</span> <span m='4216390'>at</span> <span m='4216720'>e</span>
  <span m='4216960'>dot</span> <span m='4217140'>level.</span> <span m='4217540'>But</span>
  <span m='4217560'>there</span> <span m='4217680'>might</span> <span m='4217830'>be</span>
  <span m='4217920'>a</span> <span m='4217950'>replacement</span> <span m='4218410'>at
  a</span> <span m='4218460'>higher</span> <span m='4218700'>level.</span> <span m='4218940'>We</span>
  <span m='4219060'>want</span> <span m='4219240'>to</span> <span m='4219300'>find</span>
  <span m='4219480'>the</span> <span m='4219600'>smallest</span> <span m='4220170'>level</span>
  <span m='4220440'>for</span> <span m='4220590'>which</span> <span m='4220800'>there</span>
  <span m='4220870'>is</span> <span m='4220990'>a</span> <span m='4221010'>replacement.</span>
  <span m='4221970'>That</span> <span m='4222150'>will</span> <span m='4222300'>preserve</span>
  <span m='4222810'>invariant</span> <span m='4223270'>2,</span> <span m='4223920'>that</span>
  <span m='4224010'>we</span> <span m='4224130'>have</span> <span m='4224280'>a</span>
  <span m='4224340'>minimum</span> <span m='4224640'>spanning</span> <span m='4225000'>forest.</span>
  </p><p><span m='4226890'>So</span> <span m='4227040'>that's</span> <span m='4227190'>what</span>
  <span m='4227280'>we're</span> <span m='4227340'>going</span> <span m='4227440'>to</span>
  <span m='4227520'>do,</span> <span m='4228100'>loop</span> <span m='4228350'>over</span>
  <span m='4228570'>the</span> <span m='4228660'>levels</span> <span m='4229350'>to</span>
  <span m='4229560'>try</span> <span m='4229770'>to</span> <span m='4229890'>find</span>
  <span m='4230070'>a</span> <span m='4230130'>replacement</span> <span m='4230580'>edge.</span>
  <span m='4232500'>So</span> <span m='4232680'>we're</span> <span m='4232740'>going</span>
  <span m='4232850'>to</span> <span m='4232950'>start</span> <span m='4233310'>at</span>
  <span m='4234035'>e</span> <span m='4234460'>dot</span> <span m='4234690'>level,</span>
  <span m='4236620'>loop</span> <span m='4237090'>potentially</span> <span m='4237390'>up</span>
  <span m='4237690'>to</span> <span m='4237970'>log</span> <span m='4238440'>n,</span>
  <span m='4239040'>call it a</span> <span m='4239340'>level</span> <span m='4239730'>i.</span>
  <span m='4241740'>Then</span> <span m='4243540'>I</span> <span m='4243660'>want</span>
  <span m='4243900'>to</span> <span m='4244050'>identify,</span> <span m='4244680'>at</span>
  <span m='4244830'>level</span> <span m='4245150'>i,</span> <span m='4245910'>the</span>
  <span m='4246030'>two</span> <span m='4246270'>sides</span> <span m='4246750'>of</span>
  <span m='4246870'>the</span> <span m='4247020'>edge.</span> <span m='4247320'>Let</span>
  <span m='4247530'>Tv</span> <span m='4248540'>and</span> <span m='4248710'>Tw</span>
  <span m='4250200'>be</span> <span m='4250530'>the</span> <span m='4250650'>trees</span>
  <span m='4252340'>of</span> <span m='4252990'>Fi,</span> <span m='4254970'>containing</span>
  <span m='4256980'>v</span> <span m='4257430'>and</span> <span m='4257580'>w,</span>
  <span m='4258810'>respectively.</span> </p><p><span m='4260660'>We</span> <span
  m='4260790'>just</span> <span m='4260970'>deleted</span> <span m='4261390'>the</span>
  <span m='4261540'>edge</span> <span m='4261810'>connecting</span> <span m='4262350'>those</span>
  <span m='4262560'>two</span> <span m='4262710'>sides.</span> <span m='4263100'>So</span>
  <span m='4263220'>we</span> <span m='4263310'>know</span> <span m='4263520'>that</span>
  <span m='4263640'>they're</span> <span m='4263760'>in</span> <span m='4263850'>two</span>
  <span m='4264000'>different</span> <span m='4264330'>trees,</span> <span m='4264660'>Tv</span>
  <span m='4265380'>and</span> <span m='4265590'>Tw.</span> <span m='4267310'>And</span>
  <span m='4267900'>one</span> <span m='4268110'>of</span> <span m='4268170'>them</span>
  <span m='4268320'>is</span> <span m='4268410'>smaller</span> <span m='4268740'>than</span>
  <span m='4268890'>the</span> <span m='4269010'>other.</span> <span m='4269650'>I'd</span>
  <span m='4269730'>like</span> <span m='4269880'>to</span> <span m='4270090'>relabel</span>
  <span m='4270690'>v</span> <span m='4270790'>and</span> <span m='4270850'>w</span>
  <span m='4272280'>so</span> <span m='4272580'>that</span> <span m='4273420'>the</span>
  <span m='4273540'>size</span> <span m='4274020'>of</span> <span m='4274140'>Tv</span>
  <span m='4275100'>is</span> <span m='4275310'>less</span> <span m='4275520'>than</span>
  <span m='4275610'>or</span> <span m='4275670'>equal</span> <span m='4275880'>to</span>
  <span m='4276120'>the</span> <span m='4276180'>size</span> <span m='4276540'>of</span>
  <span m='4276630'>Tw,</span> <span m='4277050'>size,</span> <span m='4277410'>in</span>
  <span m='4277500'>terms</span> <span m='4277770'>of</span> <span m='4277860'>number</span>
  <span m='4278190'>of</span> <span m='4278970'>vertices</span> <span m='4279910'>from</span>
  <span m='4280290'>there</span> <span m='4281260'>in</span> <span m='4281460'>the</span>
  <span m='4281550'>tree.</span> <span m='4284240'>So</span> <span m='4284580'>swapped</span>
  <span m='4285110'>v</span> <span m='4285410'>and w</span> <span m='4285710'>if</span>
  <span m='4285800'>necessary.</span> </p><p><span m='4287780'>Here's</span> <span
  m='4288080'>the</span> <span m='4288140'>fun</span> <span m='4288380'>thing.</span>
  <span m='4288890'>If</span> <span m='4289050'>we</span> <span m='4290420'>apply</span>
  <span m='4291430'>invariant</span> <span m='4291690'>1,</span> <span m='4296090'>then</span>
  <span m='4296560'>we</span> <span m='4296800'>learn</span> <span m='4298520'>these</span>
  <span m='4298700'>sizes</span> <span m='4299410'>are</span> <span m='4299590'>not</span>
  <span m='4299830'>so</span> <span m='4299980'>big.</span> <span m='4301210'>Claim,</span>
  <span m='4301480'>at</span> <span m='4301570'>most,</span> <span m='4301910'>2</span>
  <span m='4302140'>to</span> <span m='4302230'>the</span> <span m='4302430'>i.</span>
  <span m='4303320'>As you</span> <span m='4303765'>realize</span> <span m='4304210'>it's</span>
  <span m='4304330'>almost</span> <span m='4304600'>2</span> <span m='4304810'>to
  the</span> <span m='4304990'>i,</span> <span m='4305130'>you</span> <span m='4305290'>have</span>
  <span m='4305410'>to</span> <span m='4305500'>imagine</span> <span m='4305890'>the</span>
  <span m='4305980'>moment</span> <span m='4306640'>before</span> <span m='4307120'>this</span>
  <span m='4307300'>deletion</span> <span m='4307690'>happened,</span> <span m='4308050'>before</span>
  <span m='4308410'>we</span> <span m='4308800'>deleted</span> <span m='4309160'>the</span>
  <span m='4309310'>edge.</span> </p><p><span m='4310120'>Because</span> <span m='4310300'>at</span>
  <span m='4310390'>that</span> <span m='4310570'>point,</span> <span m='4310930'>Tv</span>
  <span m='4311140'>and</span> <span m='4311450'>Tw</span> <span m='4311745'>were</span>
  <span m='4312040'>actually</span> <span m='4312580'>one</span> <span m='4312960'>tree.</span>
  <span m='4313240'>They</span> <span m='4313360'>were</span> <span m='4313450'>connected</span>
  <span m='4313810'>by</span> <span m='4314020'>edge</span> <span m='4314200'>e.</span>
  <span m='4315260'>We've</span> <span m='4315390'>just</span> <span m='4315580'>deleted</span>
  <span m='4315940'>them.</span> </p><p><span m='4316120'>But</span> <span m='4316270'>the</span>
  <span m='4316360'>moment</span> <span m='4316660'>before</span> <span m='4316930'>we</span>
  <span m='4317020'>deleted</span> <span m='4317380'>them,</span> <span m='4317560'>invariant</span>
  <span m='4317980'>1</span> <span m='4318240'>held.</span> <span m='4319090'>And</span>
  <span m='4319180'>so</span> <span m='4319360'>that</span> <span m='4319450'>was</span>
  <span m='4319570'>a</span> <span m='4319630'>connected</span> <span m='4319990'>component.</span>
  <span m='4320820'>It</span> <span m='4320920'>should</span> <span m='4321070'>have</span>
  <span m='4321220'>size,</span> <span m='4321520'>at</span> <span m='4321610'>most,</span>
  <span m='4321850'>2</span> <span m='4322000'>to</span> <span m='4322090'>the</span>
  <span m='4322240'>i.</span> </p><p><span m='4322480'>Now,</span> <span m='4322690'>we</span>
  <span m='4322810'>split</span> <span m='4323140'>it.</span> <span m='4323560'>But</span>
  <span m='4323950'>that's</span> <span m='4324130'>all</span> <span m='4324280'>we've</span>
  <span m='4324460'>done.</span> <span m='4324820'>So</span> <span m='4325030'>the</span>
  <span m='4325120'>sum</span> <span m='4325390'>of</span> <span m='4325510'>those</span>
  <span m='4325660'>sizes</span> <span m='4326080'>has</span> <span m='4326260'>to</span>
  <span m='4326350'>be</span> <span m='4326470'>at</span> <span m='4326530'>most</span>
  <span m='4326770'>2</span> <span m='4326890'>to</span> <span m='4327010'>the</span>
  <span m='4327130'>i.</span> <span m='4327560'>Because</span> <span m='4327840'>that</span>
  <span m='4328090'>used</span> <span m='4328300'>to</span> <span m='4328390'>be</span>
  <span m='4328480'>a</span> <span m='4328540'>connected</span> <span m='4328870'>component.</span>
  <span m='4330760'>Cool</span> </p><p><span m='4332050'>So</span> <span m='4332230'>that</span>
  <span m='4332410'>means</span> <span m='4333460'>that</span> <span m='4334010'>size</span>
  <span m='4334330'>of</span> <span m='4334450'>Tv</span> <span m='4336130'>is</span>
  <span m='4336790'>1/2</span> <span m='4337180'>that,</span> <span m='4338320'>at</span>
  <span m='4338440'>most</span> <span m='4338710'>2</span> <span m='4338860'>to</span>
  <span m='4338950'>i</span> <span m='4339190'>minus</span> <span m='4339520'>1.</span>
  <span m='4339990'>Because</span> <span m='4340930'>Tv</span> <span m='4341580'>is</span>
  <span m='4341850'>less</span> <span m='4342070'>than</span> <span m='4342170'>or</span>
  <span m='4342270'>equal</span> <span m='4342340'>to</span> <span m='4342430'>Tw.</span>
  <span m='4343130'>So</span> <span m='4343300'>it's, at</span> <span m='4343390'>most,</span>
  <span m='4343660'>1/2</span> <span m='4344050'>of</span> <span m='4344140'>the</span>
  <span m='4344230'>total.</span> </p><p><span m='4346980'>So</span> <span m='4347270'>Tv</span>
  <span m='4347720'>is</span> <span m='4347960'>even</span> <span m='4348320'>smaller.</span>
  <span m='4349730'>In</span> <span m='4349850'>particular,</span> <span m='4350390'>what</span>
  <span m='4350570'>that</span> <span m='4350720'>tells</span> <span m='4351050'>us--</span>
  <span m='4351140'>now</span> <span m='4351350'>we</span> <span m='4351470'>have</span>
  <span m='4351650'>Tv</span> <span m='4352010'>and</span> <span m='4352090'>Tw</span>
  <span m='4352520'>as</span> <span m='4352670'>kind</span> <span m='4352850'>of</span>
  <span m='4352910'>separate</span> <span m='4353240'>components</span> <span m='4353740'>temporarily--</span>
  <span m='4354920'>we</span> <span m='4355040'>don't</span> <span m='4355190'>really</span>
  <span m='4355610'>know</span> <span m='4355820'>that</span> <span m='4355970'>they're</span>
  <span m='4356210'>separate</span> <span m='4357380'>at</span> <span m='4357530'>level</span>
  <span m='4357800'>i.</span> <span m='4358640'>But</span> <span m='4358760'>we</span>
  <span m='4358910'>know</span> <span m='4359070'>at</span> <span m='4359180'>level</span>
  <span m='4359450'>i</span> <span m='4359570'>minus</span> <span m='4359870'>1</span>
  <span m='4360200'>they are</span> <span m='4360380'>separate.</span> </p><p><span
  m='4361270'>At</span> <span m='4361340'>level</span> <span m='4361490'>i</span>
  <span m='4361590'>minus</span> <span m='4361720'>1,</span> <span m='4362090'>there</span>
  <span m='4362210'>is</span> <span m='4362360'>no</span> <span m='4362480'>replacement</span>
  <span m='4362960'>edge,</span> <span m='4363200'>by</span> <span m='4363770'>the</span>
  <span m='4363890'>minimum</span> <span m='4364170'>spanning</span> <span m='4364520'>forest</span>
  <span m='4364790'>property.</span> <span m='4366050'>So</span> <span m='4367220'>what</span>
  <span m='4367490'>we</span> <span m='4367670'>could</span> <span m='4368000'>do,</span>
  <span m='4368930'>at</span> <span m='4369080'>this</span> <span m='4369230'>point,</span>
  <span m='4369470'>is</span> <span m='4369590'>take</span> <span m='4369920'>Tv,</span>
  <span m='4370340'>take</span> <span m='4370640'>all</span> <span m='4370880'>of</span>
  <span m='4371030'>the</span> <span m='4371180'>edges</span> <span m='4371460'>internal</span>
  <span m='4371870'>to</span> <span m='4371960'>Tv,</span> <span m='4372740'>and</span>
  <span m='4372860'>push</span> <span m='4373160'>them</span> <span m='4373310'>down</span>
  <span m='4373580'>to</span> <span m='4373700'>level</span> <span m='4373970'>i</span>
  <span m='4374120'>minus</span> <span m='4374440'>1.</span> <span m='4375860'>We</span>
  <span m='4375980'>could</span> <span m='4376130'>afford</span> <span m='4376490'>that.</span>
  </p><p><span m='4377870'>What</span> <span m='4378090'>do I</span> <span m='4378170'>mean</span>
  <span m='4378320'>by</span> <span m='4378470'>we</span> <span m='4378590'>could</span>
  <span m='4378710'>afford</span> <span m='4378980'>that?</span> <span m='4379260'>We</span>
  <span m='4379370'>wouldn't</span> <span m='4379670'>destroy</span> <span m='4380180'>invariant</span>
  <span m='4380630'>1.</span> <span m='4381470'>Because</span> <span m='4381650'>we're</span>
  <span m='4381770'>taking</span> <span m='4382070'>2</span> <span m='4382270'>to
  the</span> <span m='4382520'>i minus 1</span> <span m='4382790'>vertices,</span>
  <span m='4384200'>pushing</span> <span m='4384590'>all</span> <span m='4384740'>those</span>
  <span m='4384950'>edges</span> <span m='4385280'>down.</span> </p><p><span m='4386240'>We</span>
  <span m='4386360'>don't</span> <span m='4386450'>have</span> <span m='4386540'>to</span>
  <span m='4386600'>push</span> <span m='4386780'>all</span> <span m='4386930'>of</span>
  <span m='4386990'>them.</span> <span m='4387170'>We</span> <span m='4387230'>could</span>
  <span m='4387350'>push</span> <span m='4387550'>some</span> <span m='4387740'>subset</span>
  <span m='4388100'>of</span> <span m='4388160'>the</span> <span m='4388250'>edges</span>
  <span m='4388490'>down.</span> <span m='4389110'>Whatever</span> <span m='4389410'>connectivity</span>
  <span m='4389660'>component</span> <span m='4390140'>we</span> <span m='4390230'>make</span>
  <span m='4390470'>at</span> <span m='4390560'>that</span> <span m='4390740'>level</span>
  <span m='4391700'>will</span> <span m='4391970'>be</span> <span m='4392150'>of</span>
  <span m='4392210'>size</span> <span m='4392490'>at</span> <span m='4392600'>most</span>
  <span m='4392920'>2</span> <span m='4393260'>to d,</span> <span m='4393515'>i</span>
  <span m='4393770'>minus</span> <span m='4394130'>1, and</span> <span m='4394520'>so</span>
  <span m='4394700'>invariant</span> <span m='4395090'>1</span> <span m='4395270'>will</span>
  <span m='4395360'>be</span> <span m='4395510'>preserved.</span> </p><p><span m='4398730'>So</span>
  <span m='4398920'>great.</span> <span m='4399950'>We</span> <span m='4400160'>can</span>
  <span m='4400430'>afford</span> <span m='4403592'>in</span> <span m='4404040'>this</span>
  <span m='4404450'>certain</span> <span m='4404720'>sense</span> <span m='4405040'>of</span>
  <span m='4405220'>"afford,"</span> <span m='4407930'>to</span> <span m='4408110'>push</span>
  <span m='4409520'>all</span> <span m='4409820'>of</span> <span m='4409940'>Tv's</span>
  <span m='4410440'>edges</span> <span m='4415940'>to</span> <span m='4417230'>level</span>
  <span m='4419286'>i</span> <span m='4419758'>minus</span> <span m='4420230'>1.</span>
  <span m='4424480'>Great</span> </p><p><span m='4428080'>We</span> <span m='4428200'>don't</span>
  <span m='4428380'>actually</span> <span m='4428740'>need</span> <span m='4428950'>to</span>
  <span m='4429040'>do</span> <span m='4429250'>this.</span> <span m='4431170'>But</span>
  <span m='4431260'>what</span> <span m='4431400'>we're</span> <span m='4431530'>going</span>
  <span m='4431710'>to</span> <span m='4431800'>do</span> <span m='4431920'>is</span>
  <span m='4432070'>use</span> <span m='4432430'>it</span> <span m='4432700'>to</span>
  <span m='4433660'>pay</span> <span m='4433870'>for</span> <span m='4434020'>stuff.</span>
  <span m='4442150'>We</span> <span m='4442300'>have</span> <span m='4442420'>this</span>
  <span m='4442540'>scary</span> <span m='4442990'>goal,</span> <span m='4443380'>which</span>
  <span m='4443590'>is</span> <span m='4443740'>we</span> <span m='4443890'>want</span>
  <span m='4444070'>to</span> <span m='4444160'>find</span> <span m='4444640'>is</span>
  <span m='4444820'>there</span> <span m='4445000'>a</span> <span m='4445030'>replacement</span>
  <span m='4445710'>edge?</span> </p><p><span m='4446950'>I</span> <span m='4447070'>don't</span>
  <span m='4447220'>know</span> <span m='4447460'>a</span> <span m='4447520'>good</span>
  <span m='4447670'>way</span> <span m='4447820'>to</span> <span m='4447940'>find</span>
  <span m='4448120'>a</span> <span m='4448150'>replacement</span> <span m='4448630'>edge,</span>
  <span m='4448810'>except</span> <span m='4449110'>to</span> <span m='4449230'>do,</span>
  <span m='4449410'>basically,</span> <span m='4449770'>a</span> <span m='4449800'>depth</span>
  <span m='4450070'>first</span> <span m='4450280'>search</span> <span m='4450550'>and</span>
  <span m='4450640'>look</span> <span m='4450820'>at</span> <span m='4451000'>all</span>
  <span m='4451240'>the</span> <span m='4451390'>edges.</span> <span m='4452680'>That's</span>
  <span m='4452890'>going</span> <span m='4453010'>to</span> <span m='4453070'>take</span>
  <span m='4453370'>a</span> <span m='4453460'>lot</span> <span m='4453760'>of</span>
  <span m='4453880'>time.</span> <span m='4455090'>But</span> <span m='4455410'>the</span>
  <span m='4455500'>good</span> <span m='4455710'>news</span> <span m='4455980'>is,</span>
  <span m='4456250'>if</span> <span m='4456430'>we</span> <span m='4456570'>search</span>
  <span m='4457030'>from</span> <span m='4457270'>Tv,</span> <span m='4458560'>every</span>
  <span m='4458920'>edge</span> <span m='4459160'>that's</span> <span m='4459370'>useless,</span>
  <span m='4461020'>we</span> <span m='4461230'>can</span> <span m='4461410'>just</span>
  <span m='4461680'>decrease</span> <span m='4462160'>its</span> <span m='4462280'>level.</span>
  </p><p><span m='4463480'>And</span> <span m='4463660'>whenever</span> <span m='4463960'>we</span>
  <span m='4464080'>decrease</span> <span m='4464410'>the</span> <span m='4464500'>level</span>
  <span m='4464770'>of</span> <span m='4464860'>an</span> <span m='4464950'>edge,</span>
  <span m='4465160'>we</span> <span m='4465400'>basically</span> <span m='4465820'>get</span>
  <span m='4466000'>a</span> <span m='4466060'>free</span> <span m='4466300'>coin</span>
  <span m='4466840'>to</span> <span m='4466960'>continue.</span> <span m='4468260'>So</span>
  <span m='4468460'>you</span> <span m='4468610'>get</span> <span m='4468730'>a</span>
  <span m='4468790'>free</span> <span m='4468970'>life</span> <span m='4469240'>every</span>
  <span m='4469450'>time</span> <span m='4469840'>you</span> <span m='4470290'>push</span>
  <span m='4471430'>an</span> <span m='4471550'>edge</span> <span m='4471880'>down</span>
  <span m='4472150'>by</span> <span m='4472270'>one</span> <span m='4472450'>level.</span>
  <span m='4472750'>Because</span> <span m='4473050'>overall,</span> <span m='4473560'>number</span>
  <span m='4473800'>of</span> <span m='4473860'>pushes</span> <span m='4474280'>can</span>
  <span m='4474460'>be</span> <span m='4475450'>number</span> <span m='4478090'>insertions</span>
  <span m='4478720'>times</span> <span m='4479660'>log</span> <span m='4480030'>n.</span>
  <span m='4480550'>Because</span> <span m='4480700'>every</span> <span m='4481000'>edge</span>
  <span m='4481210'>can</span> <span m='4481360'>only</span> <span m='4481630'>be</span>
  <span m='4481900'>pushed</span> <span m='4482290'>long</span> <span m='4482540'>n</span>
  <span m='4482650'>times.</span> </p><p><span m='4483830'>So</span> <span m='4484240'>whenever</span>
  <span m='4484660'>we</span> <span m='4484780'>push</span> <span m='4484990'>down</span>
  <span m='4485210'>an</span> <span m='4485290'>edge,</span> <span m='4485590'>we</span>
  <span m='4485710'>get</span> <span m='4485860'>a</span> <span m='4485950'>free</span>
  <span m='4487110'>bonus</span> <span m='4487360'>life,</span> <span m='4488080'>so</span>
  <span m='4488230'>we</span> <span m='4488320'>can</span> <span m='4488470'>keep</span>
  <span m='4488860'>doing</span> <span m='4489130'>our</span> <span m='4489220'>search.</span>
  <span m='4490330'>So</span> <span m='4490570'>here's</span> <span m='4490900'>how</span>
  <span m='4491020'>the</span> <span m='4491110'>search</span> <span m='4491380'>works.</span>
  <span m='4492325'>I'm</span> <span m='4492820'>going to</span> <span m='4492950'>say,</span>
  <span m='4495030'>for</span> <span m='4495370'>each--</span> <span m='4497335'>this</span>
  <span m='4497830'>is</span> <span m='4498325'>a</span> <span m='4498820'>little</span>
  <span m='4499180'>bit</span> <span m='4499510'>tricky</span> <span m='4499930'>to</span>
  <span m='4500050'>implement.</span> <span m='4500620'>I'm</span> <span m='4500710'>going</span>
  <span m='4500830'>to</span> <span m='4500890'>first</span> <span m='4501160'>tell</span>
  <span m='4501340'>you</span> <span m='4501490'>what</span> <span m='4501640'>we</span>
  <span m='4501760'>want</span> <span m='4501960'>to</span> <span m='4502060'>do</span>
  <span m='4502900'>and</span> <span m='4503020'>why</span> <span m='4503170'>that's</span>
  <span m='4503380'>OK.</span> <span m='4504400'>And</span> <span m='4504550'>then</span>
  <span m='4504670'>we'll</span> <span m='4504760'>see</span> <span m='4504940'>how</span>
  <span m='4505060'>we</span> <span m='4505180'>actually</span> <span m='4505540'>do</span>
  <span m='4505750'>it.</span> </p><p><span m='4510730'>So</span> <span m='4510850'>I</span>
  <span m='4510940'>want</span> <span m='4511090'>to</span> <span m='4511180'>search</span>
  <span m='4511900'>from</span> <span m='4512170'>every</span> <span m='4512470'>vertex</span>
  <span m='4512965'>in</span> <span m='4513460'>Fv.</span> <span m='4514280'>I</span>
  <span m='4514690'>want</span> <span m='4514900'>to</span> <span m='4514960'>look</span>
  <span m='4515140'>at</span> <span m='4515260'>all</span> <span m='4515650'>the</span>
  <span m='4515920'>outgoing</span> <span m='4516400'>edges</span> <span m='4516670'>from</span>
  <span m='4516850'>there</span> <span m='4517470'>of</span> <span m='4517690'>level</span>
  <span m='4518210'>i.</span> <span m='4520720'>Never</span> <span m='4520990'>mind</span>
  <span m='4521170'>how</span> <span m='4521260'>to</span> <span m='4521350'>find</span>
  <span m='4521590'>those</span> <span m='4521740'>edges.</span> <span m='4522070'>Just</span>
  <span m='4522190'>pretend</span> <span m='4522550'>you</span> <span m='4522670'>could</span>
  <span m='4522820'>find</span> <span m='4523090'>it</span> <span m='4523240'>in</span>
  <span m='4523420'>constant</span> <span m='4523720'>time</span> <span m='4524020'>per</span>
  <span m='4524275'>edge.</span> <span m='4525610'>It's</span> <span m='4525730'>going</span>
  <span m='4525850'>to</span> <span m='4525940'>be</span> <span m='4526870'>log</span>
  <span m='4527290'>n time</span> <span m='4527720'>per</span> <span m='4527820'>edge.</span>
  <span m='4527920'>But</span> <span m='4528020'>that's</span> <span m='4528220'>OK.</span>
  </p><p><span m='4529951'>It's</span> <span m='4530440'>two</span> <span m='4530590'>cases.</span>
  <span m='4532060'>Either</span> <span m='4533200'>y</span> <span m='4533620'>is</span>
  <span m='4533860'>in</span> <span m='4534295'>Tw.</span> <span m='4536260'>Otherwise,</span>
  <span m='4537970'>y</span> <span m='4538240'>is</span> <span m='4538360'>going</span>
  <span m='4538440'>to</span> <span m='4538570'>be</span> <span m='4538720'>in</span>
  <span m='4538900'>Tv.</span> <span m='4542440'>Because</span> <span m='4543070'>we</span>
  <span m='4543610'>have</span> <span m='4543820'>Tv</span> <span m='4544150'>here.</span>
  <span m='4544850'>We</span> <span m='4545130'>have</span> <span m='4545380'>Tw.</span>
  </p><p><span m='4546700'>We</span> <span m='4547000'>just</span> <span m='4547270'>deleted</span>
  <span m='4548400'>this</span> <span m='4548510'>edge,</span> <span m='4548990'>e.</span>
  <span m='4550240'>Sadly,</span> <span m='4550750'>we</span> <span m='4550870'>want</span>
  <span m='4551050'>to</span> <span m='4551110'>find</span> <span m='4551320'>a</span>
  <span m='4551380'>replacement</span> <span m='4551860'>edge.</span> <span m='4552640'>So</span>
  <span m='4552760'>if</span> <span m='4552850'>we</span> <span m='4552910'>look</span>
  <span m='4553120'>at</span> <span m='4553210'>all</span> <span m='4553330'>the</span>
  <span m='4553450'>edges</span> <span m='4553990'>coming</span> <span m='4554410'>out</span>
  <span m='4554590'>of</span> <span m='4554680'>a</span> <span m='4554740'>vertex</span>
  <span m='4555250'>in</span> <span m='4555900'>Tv,</span> <span m='4556210'>this</span>
  <span m='4556520'>is,</span> <span m='4556800'>I guess,</span> <span m='4557090'>x.</span>
  </p><p><span m='4558310'>It</span> <span m='4558400'>could</span> <span m='4558580'>be</span>
  <span m='4558700'>it's</span> <span m='4558790'>an</span> <span m='4558880'>edge</span>
  <span m='4559150'>that</span> <span m='4559270'>stays</span> <span m='4559630'>within</span>
  <span m='4559900'>Tv.</span> <span m='4560710'>Or</span> <span m='4560950'>could</span>
  <span m='4561100'>be</span> <span m='4561310'>it's</span> <span m='4561460'>an</span>
  <span m='4561550'>edge</span> <span m='4561820'>that</span> <span m='4561940'>goes</span>
  <span m='4562180'>to</span> <span m='4562300'>Tw.</span> <span m='4562750'>There</span>
  <span m='4562900'>are</span> <span m='4562960'>no</span> <span m='4563140'>other</span>
  <span m='4563380'>options,</span> <span m='4563890'>because</span> <span m='4564220'>of</span>
  <span m='4564340'>our</span> <span m='4564430'>invariants.</span> </p><p><span m='4565780'>If</span>
  <span m='4565930'>it's</span> <span m='4566050'>in</span> <span m='4566200'>Tv,</span>
  <span m='4567236'>oh,</span> <span m='4567990'>that's</span> <span m='4568180'>kind</span>
  <span m='4568390'>of</span> <span m='4568450'>annoying.</span> <span m='4569470'>Doesn't</span>
  <span m='4570010'>help</span> <span m='4570280'>us.</span> <span m='4571430'>But</span>
  <span m='4571680'>then</span> <span m='4571830'>we</span> <span m='4571960'>can</span>
  <span m='4572110'>just</span> <span m='4572320'>set</span> <span m='4573040'>the</span>
  <span m='4573130'>level</span> <span m='4573460'>of</span> <span m='4573580'>that</span>
  <span m='4573760'>edge,</span> <span m='4574960'>e-prime,</span> <span m='4576530'>to</span>
  <span m='4576690'>be</span> <span m='4576970'>i</span> <span m='4577180'>minus</span>
  <span m='4577480'>1.</span> <span m='4580072'>Because</span> <span m='4581200'>we</span>
  <span m='4581380'>can</span> <span m='4581590'>afford</span> <span m='4582100'>to</span>
  <span m='4582250'>push</span> <span m='4582520'>all</span> <span m='4582680'>of</span>
  <span m='4582720'>these</span> <span m='4582880'>edges</span> <span m='4583120'>down</span>
  <span m='4583300'>by</span> <span m='4583420'>one</span> <span m='4583600'>level.</span>
  <span m='4584110'>So</span> <span m='4584260'>that</span> <span m='4584470'>pays</span>
  <span m='4584860'>for</span> <span m='4584980'>this</span> <span m='4585610'>round</span>
  <span m='4585940'>of</span> <span m='4586030'>the</span> <span m='4586120'>loop.</span>
  </p><p><span m='4590760'>What</span> <span m='4590910'>about</span> <span m='4591090'>the</span>
  <span m='4591210'>other</span> <span m='4591360'>case?</span> <span m='4591670'>The</span>
  <span m='4591770'>other</span> <span m='4591780'>cases</span> <span m='4592140'>is
  the</span> <span m='4592260'>good</span> <span m='4592410'>case.</span> <span m='4593040'>That</span>
  <span m='4593190'>means</span> <span m='4593370'>we've</span> <span m='4593520'>found</span>
  <span m='4594030'>a</span> <span m='4594090'>replacement</span> <span m='4594630'>edge</span>
  <span m='4594840'>for</span> <span m='4594970'>e.</span> <span m='4596020'>If</span>
  <span m='4596280'>we</span> <span m='4596400'>have</span> <span m='4596550'>an</span>
  <span m='4596640'>edge</span> <span m='4596800'>from</span> <span m='4596920'>Tv</span>
  <span m='4597240'>to</span> <span m='4597360'>Tw.</span> <span m='4598260'>And</span>
  <span m='4598390'>at</span> <span m='4598550'>level</span> <span m='4598730'>i,</span>
  <span m='4599610'>we</span> <span m='4599970'>did</span> <span m='4600240'>these</span>
  <span m='4600540'>levels</span> <span m='4600870'>in</span> <span m='4600990'>order.</span>
  </p><p><span m='4601880'>Did I</span> <span m='4602310'>say</span> <span m='4602550'>that?</span>
  <span m='4602690'>Yeah,</span> <span m='4602970'>we're</span> <span m='4603090'>doing</span>
  <span m='4603300'>levels</span> <span m='4603600'>in</span> <span m='4603720'>order.</span>
  <span m='4604930'>So</span> <span m='4605010'>if</span> <span m='4605070'>we</span>
  <span m='4605190'>can</span> <span m='4605340'>find</span> <span m='4606120'>this</span>
  <span m='4606300'>is</span> <span m='4606390'>the</span> <span m='4606480'>lowest</span>
  <span m='4606780'>level</span> <span m='4607290'>replacement</span> <span m='4607770'>edge,</span>
  <span m='4608670'>so</span> <span m='4609120'>we</span> <span m='4609630'>do</span>
  <span m='4609840'>it.</span> <span m='4609960'>We</span> <span m='4610320'>insert</span>
  <span m='4611610'>that</span> <span m='4611820'>edge</span> <span m='4614640'>into</span>
  <span m='4615250'>Fi</span> <span m='4616740'>using</span> <span m='4617170'>an</span>
  <span m='4617430'>Euler-tour</span> <span m='4617870'>tree</span> <span m='4618370'>insertion.</span>
  </p><p><span m='4620100'>And</span> <span m='4620280'>then</span> <span m='4620460'>we're</span>
  <span m='4620580'>done.</span> <span m='4622500'>So</span> <span m='4622680'>we</span>
  <span m='4622830'>stop</span> <span m='4623190'>the</span> <span m='4623320'>algorithm.</span>
  <span m='4625260'>The</span> <span m='4625380'>moment</span> <span m='4625650'>we</span>
  <span m='4625770'>find</span> <span m='4626030'>a</span> <span m='4626100'>desired</span>
  <span m='4626460'>edge</span> <span m='4626670'>we're</span> <span m='4626820'>happy.</span>
  </p><p><span m='4627180'>Now,</span> <span m='4627300'>maybe</span> <span m='4627540'>there</span>
  <span m='4627630'>are</span> <span m='4627690'>lots</span> <span m='4627930'>of</span>
  <span m='4628050'>edges.</span> <span m='4628420'>So</span> <span m='4628440'>we've</span>
  <span m='4628530'>got</span> <span m='4628680'>to</span> <span m='4628770'>stop</span>
  <span m='4629160'>when</span> <span m='4629280'>we</span> <span m='4629370'>find</span>
  <span m='4629580'>the</span> <span m='4629670'>first</span> <span m='4629910'>one.</span>
  <span m='4630910'>Then</span> <span m='4631110'>we've</span> <span m='4631440'>restored</span>
  <span m='4631980'>our</span> <span m='4632350'>minimum</span> <span m='4632820'>spanning</span>
  <span m='4633150'>forest</span> <span m='4633390'>property.</span> <span m='4633810'>We</span>
  <span m='4633930'>have</span> <span m='4634080'>maximal</span> <span m='4634470'>connectivity,</span>
  <span m='4635100'>all</span> <span m='4635190'>these</span> <span m='4635340'>great</span>
  <span m='4635520'>things.</span> </p><p><span m='4637650'>As</span> <span m='4637770'>long</span>
  <span m='4637950'>as</span> <span m='4638010'>we</span> <span m='4638100'>don't</span>
  <span m='4638340'>find</span> <span m='4638550'>an</span> <span m='4638640'>edge,</span>
  <span m='4639300'>we</span> <span m='4639510'>can</span> <span m='4639660'>push</span>
  <span m='4639930'>things</span> <span m='4640200'>down</span> <span m='4640470'>a</span>
  <span m='4640530'>level</span> <span m='4640890'>and</span> <span m='4641040'>pay</span>
  <span m='4641340'>for</span> <span m='4641490'>this</span> <span m='4641700'>round.</span>
  <span m='4642400'>So</span> <span m='4642720'>it's</span> <span m='4642960'>constant</span>
  <span m='4643410'>time</span> <span m='4643710'>or</span> <span m='4643910'>log</span>
  <span m='4644370'>n</span> <span m='4644490'>time</span> <span m='4644670'>to</span>
  <span m='4644760'>do</span> <span m='4644850'>the</span> <span m='4644910'>last</span>
  <span m='4645210'>step.</span> <span m='4645570'>But</span> <span m='4645720'>all</span>
  <span m='4645840'>the</span> <span m='4645930'>other</span> <span m='4646080'>steps</span>
  <span m='4646350'>are</span> <span m='4646410'>paid</span> <span m='4646650'>for</span>
  <span m='4646890'>by</span> <span m='4647040'>the</span> <span m='4647070'>decrease</span>
  <span m='4647450'>in</span> <span m='4647550'>level.</span> </p><p><span m='4651870'>So</span>
  <span m='4651990'>the</span> <span m='4652110'>claim</span> <span m='4652440'>is</span>
  <span m='4652560'>overall,</span> <span m='4653640'>we</span> <span m='4653790'>pay</span>
  <span m='4654330'>log</span> <span m='4654700'>squared</span> <span m='4655000'>n.</span>
  <span m='4655890'>Because</span> <span m='4656160'>we</span> <span m='4656250'>had</span>
  <span m='4656430'>to</span> <span m='4656520'>do</span> <span m='4656640'>log</span>
  <span m='4656860'>squared</span> <span m='4657050'>n</span> <span m='4657240'>for</span>
  <span m='4657360'>these</span> <span m='4657540'>deletions.</span> <span m='4658860'>Plus</span>
  <span m='4662010'>log</span> <span m='4662310'>n</span> <span m='4663630'>times</span>
  <span m='4664290'>the</span> <span m='4664560'>number</span> <span m='4665070'>of</span>
  <span m='4666030'>level</span> <span m='4667950'>decreases.</span> <span m='4671820'>That's</span>
  <span m='4672130'>for</span> <span m='4672310'>this</span> <span m='4672490'>step.</span>
  </p><p><span m='4673030'>I</span> <span m='4673180'>claim</span> <span m='4673540'>that</span>
  <span m='4673660'>each</span> <span m='4674410'>round</span> <span m='4674650'>of</span>
  <span m='4674740'>this</span> <span m='4675370'>loop</span> <span m='4675580'>cost</span>
  <span m='4675870'>log</span> <span m='4676120'>n.</span> <span m='4677210'>So</span>
  <span m='4677360'>that's</span> <span m='4677480'>why</span> <span m='4677600'>we've</span>
  <span m='4677680'>get</span> <span m='4677830'>log</span> <span m='4678070'>n times</span>
  <span m='4678430'>number of</span> <span m='4678640'>level</span> <span m='4678910'>decreases.</span>
  <span m='4679420'>But</span> <span m='4679570'>number of</span> <span m='4679870'>level</span>
  <span m='4680110'>decreases</span> <span m='4681160'>is,</span> <span m='4681310'>at</span>
  <span m='4681400'>most,</span> <span m='4682150'>number</span> <span m='4682450'>of
  edge</span> <span m='4682720'>insertions</span> <span m='4684660'>times</span> <span
  m='4685100'>log n.</span> <span m='4685510'>Because</span> <span m='4685810'>each</span>
  <span m='4686050'>edge</span> <span m='4686260'>can</span> <span m='4686380'>only</span>
  <span m='4686590'>decrease</span> <span m='4686950'>in</span> <span m='4687040'>level</span>
  <span m='4687250'>log</span> <span m='4687490'>n</span> <span m='4687610'>times,</span>
  <span m='4688450'>by</span> <span m='4688570'>definition</span> <span m='4688990'>of</span>
  <span m='4689080'>levels.</span> </p><p><span m='4690290'>And</span> <span m='4690310'>so</span>
  <span m='4690460'>we</span> <span m='4690580'>can</span> <span m='4690700'>charge</span>
  <span m='4691060'>to</span> <span m='4691150'>the</span> <span m='4691300'>insert</span>
  <span m='4691600'>operations</span> <span m='4692320'>at</span> <span m='4692500'>a</span>
  <span m='4692590'>factor</span> <span m='4694270'>of</span> <span m='4695000'>log</span>
  <span m='4695420'>n.</span> <span m='4695650'>So</span> <span m='4696100'>there's</span>
  <span m='4696340'>two</span> <span m='4696520'>log</span> <span m='4696770'>n's</span>
  <span m='4696940'>here.</span> <span m='4697090'>So</span> <span m='4697330'>inserts</span>
  <span m='4697720'>now</span> <span m='4697930'>cost</span> <span m='4698200'>log</span>
  <span m='4698490'>squared</span> <span m='4698710'>amortized</span> <span m='4699190'>as</span>
  <span m='4699280'>well.</span> <span m='4700500'>To</span> <span m='4700600'>deletes</span>
  <span m='4700810'>costs</span> <span m='4701110'>log</span> <span m='4701430'>squared</span>
  <span m='4701540'>amortized.</span> <span m='4702330'>And</span> <span m='4702560'>we</span>
  <span m='4702730'>get</span> <span m='4702820'>log</span> <span m='4703060'>squared</span>
  <span m='4703240'>overall.</span> </p><p><span m='4705460'>One</span> <span m='4705760'>last</span>
  <span m='4706030'>issue</span> <span m='4706270'>though,</span> <span m='4706580'>which</span>
  <span m='4706720'>is</span> <span m='4707040'>how</span> <span m='4707230'>do</span>
  <span m='4707360'>we</span> <span m='4707500'>do</span> <span m='4707650'>this</span>
  <span m='4707860'>step?</span> <span m='4708760'>Actually,</span> <span m='4709030'>there's</span>
  <span m='4709210'>another</span> <span m='4709510'>step</span> <span m='4709920'>that's</span>
  <span m='4710080'>not</span> <span m='4710230'>so</span> <span m='4710500'>trivial,</span>
  <span m='4711370'>this</span> <span m='4711580'>one.</span> <span m='4712450'>We</span>
  <span m='4712570'>need</span> <span m='4712720'>to</span> <span m='4712870'>know</span>
  <span m='4713050'>the</span> <span m='4713140'>size</span> <span m='4713530'>of</span>
  <span m='4713590'>Tv</span> <span m='4714460'>and</span> <span m='4714550'>the</span>
  <span m='4714640'>size</span> <span m='4714940'>of</span> <span m='4715000'>Tw.</span>
  </p><p><span m='4715780'>Well,</span> <span m='4715870'>that's</span> <span m='4716050'>easy.</span>
  <span m='4716290'>I</span> <span m='4716350'>just</span> <span m='4716510'>store</span>
  <span m='4716710'>subtree</span> <span m='4717100'>sizes</span> <span m='4717490'>at</span>
  <span m='4717610'>every</span> <span m='4717790'>node.</span> <span m='4718390'>So</span>
  <span m='4718540'>then</span> <span m='4718690'>I</span> <span m='4718750'>look</span>
  <span m='4718900'>at</span> <span m='4718990'>the</span> <span m='4719110'>root</span>
  <span m='4720220'>of</span> <span m='4720340'>the</span> <span m='4720580'>BST,</span>
  <span m='4721720'>and</span> <span m='4721930'>it</span> <span m='4721990'>tells</span>
  <span m='4722230'>me</span> <span m='4722350'>how</span> <span m='4722470'>big</span>
  <span m='4722680'>that</span> <span m='4723760'>tree</span> <span m='4724030'>is.</span>
  <span m='4724270'>And</span> <span m='4724360'>so</span> <span m='4724510'>I</span>
  <span m='4724750'>can</span> <span m='4724930'>see</span> <span m='4725140'>which</span>
  <span m='4725350'>is</span> <span m='4725440'>bigger</span> <span m='4726130'>and</span>
  <span m='4726700'>switch</span> <span m='4726970'>accordingly.</span> <span m='4727420'>But</span>
  <span m='4727900'>that's</span> <span m='4728140'>trivial.</span> </p><p><span m='4728980'>This</span>
  <span m='4729160'>one</span> <span m='4729340'>requires</span> <span m='4729790'>a</span>
  <span m='4729830'>different</span> <span m='4730210'>augmentation</span> <span m='4730900'>for</span>
  <span m='4732420'>Euler-tour</span> <span m='4733600'>trees.</span> <span m='4734840'>And</span>
  <span m='4734860'>again,</span> <span m='4735115'>in</span> <span m='4735370'>both</span>
  <span m='4735640'>of</span> <span m='4735700'>these</span> <span m='4735850'>situations,</span>
  <span m='4736480'>we're</span> <span m='4736600'>using</span> <span m='4736900'>the</span>
  <span m='4736990'>fact</span> <span m='4737230'>that</span> <span m='4737350'>we</span>
  <span m='4737590'>can</span> <span m='4737860'>augment</span> <span m='4738220'>on</span>
  <span m='4738370'>subtrees,</span> <span m='4738940'>not</span> <span m='4739120'>on</span>
  <span m='4739320'>paths.</span> <span m='4739700'>That's</span> <span m='4739840'>why</span>
  <span m='4740020'>we</span> <span m='4740110'>need</span> <span m='4740290'>Euler-tour</span>
  <span m='4740740'>trees,</span> <span m='4741010'>not</span> <span m='4741190'>link</span>
  <span m='4741340'>cut</span> <span m='4741625'>trees.</span> </p><p><span m='4742910'>So</span>
  <span m='4743260'>what</span> <span m='4743470'>we</span> <span m='4743590'>store</span>
  <span m='4744800'>in</span> <span m='4745390'>F--</span> <span m='4746405'>why</span>
  <span m='4746880'>did</span> <span m='4746940'>I</span> <span m='4747150'>write</span>
  <span m='4747380'>Fv?</span> <span m='4748690'>I</span> <span m='4748750'>mean</span>
  <span m='4750370'>Tv</span> <span m='4750730'>here.</span> <span m='4755000'>So</span>
  <span m='4755290'>in</span> <span m='4755500'>Fi--</span> <span m='4756100'>this</span>
  <span m='4756540'>is</span> <span m='4756760'>for</span> <span m='4756940'>each</span>
  <span m='4757210'>i,</span> <span m='4757410'>but</span> <span m='4757530'>at</span>
  <span m='4757670'>the</span> <span m='4757770'>forest at</span> <span m='4758260'>level</span>
  <span m='4758560'>i--</span> <span m='4759580'>what I'm</span> <span m='4759880'>going</span>
  <span m='4760060'>to</span> <span m='4760120'>store</span> <span m='4760500'>is
  at</span> <span m='4760660'>every</span> <span m='4760960'>node</span> <span m='4761890'>in</span>
  <span m='4762145'>the</span> <span m='4762400'>Euler-tour</span> <span m='4762970'>tree,</span>
  <span m='4764590'>I</span> <span m='4764680'>want</span> <span m='4764890'>to</span>
  <span m='4764950'>know</span> <span m='4765700'>in</span> <span m='4765910'>the</span>
  <span m='4766030'>subtree</span> <span m='4766900'>rooted</span> <span m='4767240'>in</span>
  <span m='4767320'>that</span> <span m='4767570'>node--</span> <span m='4768830'>so</span>
  <span m='4768930'>here's</span> <span m='4769590'>Euler-tour</span> <span m='4770360'>tree.</span>
  <span m='4771430'>Here's</span> <span m='4771790'>a</span> <span m='4772180'>node,
  v.</span> <span m='4772660'>This</span> <span m='4772870'>is</span> <span m='4773850'>a</span>
  <span m='4773890'>tree</span> <span m='4774280'>in</span> <span m='4774490'>Fi.</span>
  </p><p><span m='4775405'>I</span> <span m='4775780'>want</span> <span m='4775930'>to</span>
  <span m='4775990'>know,</span> <span m='4776170'>in</span> <span m='4776350'>this</span>
  <span m='4776500'>subtree,</span> <span m='4777460'>in</span> <span m='4777640'>here,</span>
  <span m='4778990'>is</span> <span m='4779230'>there</span> <span m='4780880'>any</span>
  <span m='4781150'>node</span> <span m='4781980'>that</span> <span m='4782080'>has</span>
  <span m='4783550'>a</span> <span m='4783610'>level</span> <span m='4783940'>i</span>
  <span m='4784280'>edge</span> <span m='4784570'>incident</span> <span m='4784990'>to</span>
  <span m='4785170'>it?</span> <span m='4786180'>So</span> <span m='4786340'>I</span>
  <span m='4786370'>want</span> <span m='4786550'>to</span> <span m='4786610'>know,</span>
  <span m='4787430'>are</span> <span m='4787480'>there</span> <span m='4787630'>any</span>
  <span m='4787900'>level</span> <span m='4788350'>i</span> <span m='4788806'>edges?</span>
  <span m='4793370'>If</span> <span m='4793490'>there</span> <span m='4793640'>aren't</span>
  <span m='4793910'>any</span> <span m='4794060'>level</span> <span m='4794270'>i</span>
  <span m='4794480'>edges,</span> <span m='4794840'>then</span> <span m='4794990'>for</span>
  <span m='4795110'>the</span> <span m='4795230'>purposes</span> <span m='4795680'>of</span>
  <span m='4795770'>this</span> <span m='4795920'>search,</span> <span m='4797010'>I</span>
  <span m='4797110'>should</span> <span m='4797120'>just</span> <span m='4797270'>skip</span>
  <span m='4797540'>that</span> <span m='4797750'>subtree.</span> </p><p><span m='4798930'>It's</span>
  <span m='4799370'>as</span> <span m='4799550'>if</span> <span m='4799700'>the</span>
  <span m='4799810'>subtree</span> <span m='4800270'>was</span> <span m='4801040'>erased.</span>
  <span m='4802310'>So</span> <span m='4802430'>I</span> <span m='4802490'>have</span>
  <span m='4802700'>some</span> <span m='4802940'>tree.</span> <span m='4803340'>It</span>
  <span m='4803440'>has</span> <span m='4803540'>height</span> <span m='4803780'>log</span>
  <span m='4804050'>n</span> <span m='4804170'>overall.</span> <span m='4804620'>I</span>
  <span m='4804770'>erase</span> <span m='4805130'>some</span> <span m='4805310'>of</span>
  <span m='4805400'>the</span> <span m='4805490'>subtrees</span> <span m='4805940'>according</span>
  <span m='4806270'>to</span> <span m='4806390'>this</span> <span m='4806570'>bit,</span>
  <span m='4807120'>which</span> <span m='4807200'>is</span> <span m='4807320'>an</span>
  <span m='4807380'>easy</span> <span m='4807740'>thing</span> <span m='4807950'>to</span>
  <span m='4808850'>keep</span> <span m='4809000'>track</span> <span m='4809360'>of.</span>
  <span m='4809610'>It's</span> <span m='4809660'>an</span> <span m='4809720'>augmentation,</span>
  <span m='4811670'>constant</span> <span m='4812060'>factor</span> <span m='4812360'>overhead.</span>
  </p><p><span m='4813670'>Then</span> <span m='4815210'>I</span> <span m='4815300'>basically</span>
  <span m='4815660'>want</span> <span m='4815810'>to</span> <span m='4816080'>do</span>
  <span m='4816610'>an</span> <span m='4816640'>in-order</span> <span m='4816950'>traversal</span>
  <span m='4817310'>of</span> <span m='4817370'>this</span> <span m='4817490'>tree,</span>
  <span m='4817880'>but</span> <span m='4818180'>skipping</span> <span m='4818750'>the</span>
  <span m='4818810'>stuff</span> <span m='4819080'>below.</span> <span m='4820460'>So</span>
  <span m='4820640'>I</span> <span m='4820700'>mean,</span> <span m='4820820'>one</span>
  <span m='4821000'>way</span> <span m='4821060'>to</span> <span m='4821180'>think</span>
  <span m='4821360'>of</span> <span m='4821450'>it</span> <span m='4821540'>is</span>
  <span m='4821780'>you</span> <span m='4822020'>just</span> <span m='4822350'>repeatedly</span>
  <span m='4822920'>call</span> <span m='4823160'>successor,</span> <span m='4824400'>like</span>
  <span m='4824720'>successor</span> <span m='4825200'>in</span> <span m='4825290'>a</span>
  <span m='4825320'>binary</span> <span m='4825620'>search</span> <span m='4825860'>tree.</span>
  <span m='4826070'>But</span> <span m='4826190'>whenever</span> <span m='4826520'>I</span>
  <span m='4826610'>see</span> <span m='4827000'>that</span> <span m='4827150'>there's</span>
  <span m='4827300'>no</span> <span m='4827480'>level</span> <span m='4827780'>edges</span>
  <span m='4827990'>below</span> <span m='4828260'>me,</span> <span m='4828380'>I</span>
  <span m='4828470'>just</span> <span m='4828620'>skip.</span> </p><p><span m='4830900'>So</span>
  <span m='4831000'>in</span> <span m='4831110'>log</span> <span m='4831320'>n</span>
  <span m='4831410'>time</span> <span m='4831680'>you</span> <span m='4831770'>can</span>
  <span m='4831920'>basically</span> <span m='4832220'>find</span> <span m='4832520'>the</span>
  <span m='4832610'>next</span> <span m='4833270'>place</span> <span m='4833720'>where</span>
  <span m='4833840'>there's</span> <span m='4834020'>an</span> <span m='4834110'>outgoing</span>
  <span m='4834530'>edge.</span> <span m='4835250'>I</span> <span m='4835340'>guess</span>
  <span m='4835520'>also,</span> <span m='4836210'>the</span> <span m='4836390'>incidence</span>
  <span m='4836780'>lists</span> <span m='4837080'>have</span> <span m='4837320'>to</span>
  <span m='4837440'>be</span> <span m='4837590'>stored</span> <span m='4838730'>separately</span>
  <span m='4839270'>for</span> <span m='4839450'>each</span> <span m='4839630'>level.</span>
  <span m='4840090'>So</span> <span m='4840110'>you</span> <span m='4840170'>can</span>
  <span m='4840320'>say,</span> <span m='4840830'>what</span> <span m='4841070'>are</span>
  <span m='4841160'>your</span> <span m='4841340'>outgoing</span> <span m='4841820'>level
  i</span> <span m='4842270'>edges</span> <span m='4842690'>from</span> <span m='4842930'>a</span>
  <span m='4843020'>vertex?</span> </p><p><span m='4843500'>This</span> <span m='4843620'>lets</span>
  <span m='4843800'>you</span> <span m='4843890'>find</span> <span m='4844100'>the</span>
  <span m='4844190'>vertex</span> <span m='4844610'>quickly,</span> <span m='4844970'>but</span>
  <span m='4845060'>then</span> <span m='4845210'>you</span> <span m='4845270'>have</span>
  <span m='4845360'>to</span> <span m='4845420'>find</span> <span m='4845630'>the</span>
  <span m='4845750'>edges</span> <span m='4846050'>quickly.</span> <span m='4847040'>So</span>
  <span m='4847220'>the</span> <span m='4847340'>instance</span> <span m='4847670'>lists</span>
  <span m='4847880'>are</span> <span m='4847940'>not</span> <span m='4848120'>just</span>
  <span m='4848270'>stored</span> <span m='4849230'>as</span> <span m='4849410'>one</span>
  <span m='4849680'>single</span> <span m='4849920'>link</span> <span m='4850100'>lists,</span>
  <span m='4850490'>one</span> <span m='4850700'>link</span> <span m='4850880'>list</span>
  <span m='4851090'>per</span> <span m='4851240'>level.</span> <span m='4852510'>But</span>
  <span m='4852620'>that's</span> <span m='4852830'>easy</span> <span m='4853040'>to</span>
  <span m='4853130'>do.</span> </p><p><span m='4853850'>So</span> <span m='4854000'>then</span>
  <span m='4854180'>from</span> <span m='4854390'>this,</span> <span m='4854510'>vertex</span>
  <span m='4854930'>we</span> <span m='4855020'>can</span> <span m='4855170'>find</span>
  <span m='4855530'>all</span> <span m='4855680'>the</span> <span m='4855830'>outgoing</span>
  <span m='4856220'>level</span> <span m='4856450'>i</span> <span m='4856610'>edges.</span>
  <span m='4857870'>And</span> <span m='4858260'>we</span> <span m='4859070'>can</span>
  <span m='4859220'>do</span> <span m='4859370'>this</span> <span m='4859550'>4</span>
  <span m='4859760'>loop</span> <span m='4860300'>efficiently.</span> <span m='4861650'>And</span>
  <span m='4861950'>whenever</span> <span m='4862220'>it's</span> <span m='4862310'>low,</span>
  <span m='4862880'>we</span> <span m='4863000'>get</span> <span m='4863120'>to</span>
  <span m='4863240'>charge.</span> </p><p><span m='4865705'>In</span> <span m='4866010'>the</span>
  <span m='4866120'>remaining</span> <span m='4866690'>negative</span> <span m='4867170'>two</span>
  <span m='4867380'>minutes,</span> <span m='4868220'>let</span> <span m='4868310'>me</span>
  <span m='4868430'>tell</span> <span m='4868640'>you</span> <span m='4869150'>briefly</span>
  <span m='4869690'>about</span> <span m='4870770'>other</span> <span m='4870950'>problems</span>
  <span m='4871300'>that</span> <span m='4871390'>have been</span> <span m='4871580'>solved.</span>
  <span m='4871850'>So</span> <span m='4871940'>this</span> <span m='4872150'>finishes</span>
  <span m='4873150'>log</span> <span m='4873410'>squared</span> <span m='4873680'>n</span>
  <span m='4873920'>fully</span> <span m='4874160'>dynamic</span> <span m='4874415'>connectivity.</span>
  <span m='4875240'>I</span> <span m='4875640'>wasn't</span> <span m='4875900'>planning</span>
  <span m='4876170'>to</span> <span m='4876230'>spend</span> <span m='4876440'>much</span>
  <span m='4876590'>time</span> <span m='4876770'>on</span> <span m='4876860'>this</span>
  <span m='4877010'>anyway.</span> </p><p><span m='4877550'>There</span> <span m='4877700'>are</span>
  <span m='4877730'>notes.</span> <span m='4878060'>If</span> <span m='4878180'>you're</span>
  <span m='4878300'>interested</span> <span m='4878600'>in the</span> <span m='4878690'>specific</span>
  <span m='4879140'>problems,</span> <span m='4879470'>I'll</span> <span m='4879530'>just</span>
  <span m='4879680'>tell</span> <span m='4879830'>you</span> <span m='4879920'>what</span>
  <span m='4880010'>the</span> <span m='4880100'>problems</span> <span m='4880460'>are.</span>
  <span m='4881390'>Generalization</span> <span m='4881960'>of</span> <span m='4882050'>connectivity</span>
  <span m='4882680'>is</span> <span m='4882800'>k</span> <span m='4883100'>connectivity.</span>
  <span m='4883820'>I</span> <span m='4883880'>don't</span> <span m='4884060'>just</span>
  <span m='4884210'>want</span> <span m='4884390'>to</span> <span m='4884450'>know,</span>
  <span m='4884660'>is</span> <span m='4884840'>there</span> <span m='4885020'>one</span>
  <span m='4885290'>path</span> <span m='4885560'>from</span> <span m='4885740'>v</span>
  <span m='4885860'>to</span> <span m='4885950'>w?</span> <span m='4886730'>I</span>
  <span m='4886820'>want</span> <span m='4886970'>to</span> <span m='4887030'>know</span>
  <span m='4887120'>are</span> <span m='4887270'>there</span> <span m='4887390'>k</span>
  <span m='4887780'>disjoint</span> <span m='4888230'>paths</span> <span m='4888560'>from</span>
  <span m='4888710'>v</span> <span m='4888800'>to</span> <span m='4888920'>w?</span>
  </p><p><span m='4890450'>So</span> <span m='4891410'>they</span> <span m='4891530'>could</span>
  <span m='4891710'>be</span> <span m='4892070'>edge-disjoint</span> <span m='4892880'>or</span>
  <span m='4893000'>vertex-disjoint</span> <span m='4893750'>paths,</span> <span m='4894380'>might</span>
  <span m='4894530'>be</span> <span m='4894650'>your</span> <span m='4894770'>goal.</span>
  <span m='4896600'>In</span> <span m='4896780'>that</span> <span m='4896930'>case,</span>
  <span m='4899030'>poly</span> <span m='4899345'>log</span> <span m='4900410'>solutions</span>
  <span m='4900770'>are</span> <span m='4900860'>known</span> <span m='4901220'>for</span>
  <span m='4902210'>2</span> <span m='4902420'>connectivity</span> <span m='4903290'>edge</span>
  <span m='4903520'>or</span> <span m='4903620'>vertex.</span> <span m='4903935'>This</span>
  <span m='4904250'>is</span> <span m='4904400'>the</span> <span m='4904460'>result,</span>
  <span m='4904790'>actually,</span> <span m='4905050'>I used</span> <span m='4905260'>in</span>
  <span m='4905330'>my</span> <span m='4905450'>very</span> <span m='4905660'>first</span>
  <span m='4905930'>graph</span> <span m='4906210'>algorithms</span> <span m='4906570'>papers,</span>
  <span m='4907160'>where</span> <span m='4907370'>I</span> <span m='4907730'>first</span>
  <span m='4907940'>learned</span> <span m='4908120'>about</span> <span m='4908300'>dynamic</span>
  <span m='4908630'>graphs.</span> </p><p><span m='4909380'>In</span> <span m='4909500'>log</span>
  <span m='4909710'>to</span> <span m='4909800'>the</span> <span m='4909920'>fourth</span>
  <span m='4910180'>n</span> <span m='4910340'>time,</span> <span m='4910580'>you</span>
  <span m='4910670'>can</span> <span m='4910790'>maintain</span> <span m='4911630'>2</span>
  <span m='4911930'>edge</span> <span m='4912200'>connectivity.</span> <span m='4914480'>It's</span>
  <span m='4914660'>open</span> <span m='4915300'>for</span> <span m='4916000'>k</span>
  <span m='4916260'>equals</span> <span m='4918580'>3,</span> <span m='4919370'>even,</span>
  <span m='4920240'>whether</span> <span m='4920450'>you</span> <span m='4920570'>can</span>
  <span m='4920870'>achieve</span> <span m='4921140'>that</span> <span m='4921290'>bound.</span>
  <span m='4922130'>So</span> <span m='4922590'>kind of</span> <span m='4922710'>lame.</span>
  </p><p><span m='4924560'>Another</span> <span m='4924830'>problem</span> <span m='4925130'>is</span>
  <span m='4925220'>minimum</span> <span m='4925610'>spanning</span> <span m='4926060'>forest.</span>
  <span m='4927140'>So</span> <span m='4927350'>you</span> <span m='4927440'>don't</span>
  <span m='4927620'>just</span> <span m='4927740'>want</span> <span m='4927920'>to</span>
  <span m='4927980'>maintain</span> <span m='4928340'>some</span> <span m='4928610'>spanning</span>
  <span m='4928910'>forest.</span> <span m='4929180'>Maybe</span> <span m='4929330'>you</span>
  <span m='4929450'>actually</span> <span m='4929840'>have</span> <span m='4930020'>weights</span>
  <span m='4930260'>on</span> <span m='4930350'>the</span> <span m='4930440'>edges</span>
  <span m='4930680'>and</span> <span m='4930770'>you</span> <span m='4930830'>want</span>
  <span m='4931040'>the</span> <span m='4931130'>minimum</span> <span m='4931430'>spanning</span>
  <span m='4931760'>for</span> <span m='4931940'>us.</span> <span m='4932650'>That</span>
  <span m='4932840'>it</span> <span m='4932930'>turns</span> <span m='4933170'>out,</span>
  <span m='4933290'>you</span> <span m='4933410'>can</span> <span m='4933530'>solve</span>
  <span m='4933860'>with</span> <span m='4934040'>a</span> <span m='4934100'>couple</span>
  <span m='4934400'>extra</span> <span m='4934620'>log</span> <span m='4934850'>factors.</span>
  <span m='4935370'>So</span> <span m='4935470'>in</span> <span m='4935480'>log</span>
  <span m='4935660'>to</span> <span m='4935750'>the</span> <span m='4935840'>fourth</span>
  <span m='4936230'>n</span> <span m='4936650'>time,</span> <span m='4939340'>with</span>
  <span m='4939560'>an</span> <span m='4939650'>extra</span> <span m='4939890'>log</span>
  <span m='4940100'>squared</span> <span m='4940400'>factor,</span> <span m='4940790'>you</span>
  <span m='4940910'>can</span> <span m='4941030'>reduce</span> <span m='4941390'>to</span>
  <span m='4941510'>the</span> <span m='4941600'>problem</span> <span m='4941870'>of</span>
  <span m='4941930'>dynamic</span> <span m='4942195'>connectivity.</span> <span m='4942860'>And</span>
  <span m='4942950'>so</span> <span m='4943070'>log to the</span> <span m='4943460'>forth</span>
  <span m='4943710'>overall,</span> <span m='4944090'>you</span> <span m='4944210'>can</span>
  <span m='4944330'>maintain</span> <span m='4945045'>minimum</span> <span m='4945310'>spanning</span>
  <span m='4945770'>forest.</span> </p><p><span m='4947420'>Another</span> <span m='4947600'>problem</span>
  <span m='4947840'>is</span> <span m='4947960'>planarity</span> <span m='4948390'>testing.</span>
  <span m='4948950'>You</span> <span m='4949070'>want</span> <span m='4949190'>to</span>
  <span m='4949820'>insert</span> <span m='4950270'>or</span> <span m='4950420'>delete</span>
  <span m='4950810'>edges</span> <span m='4951230'>and,</span> <span m='4951500'>at</span>
  <span m='4951650'>all</span> <span m='4951800'>points,</span> <span m='4952150'>know</span>
  <span m='4952280'>whether</span> <span m='4952430'>your</span> <span m='4952550'>graph</span>
  <span m='4952820'>is</span> <span m='4952930'>planar.</span> <span m='4954980'>And</span>
  <span m='4955250'>that,</span> <span m='4956790'>there's</span> <span m='4957020'>no</span>
  <span m='4957650'>great</span> <span m='4957890'>results</span> <span m='4958220'>known</span>
  <span m='4958430'>for</span> <span m='4958550'>that.</span> <span m='4958850'>It's</span>
  <span m='4959020'>like n</span> <span m='4959170'>to</span> <span m='4959270'>the</span>
  <span m='4959390'>2/3.</span> </p><p><span m='4960810'>Directed</span> <span m='4961290'>graphs,</span>
  <span m='4961760'>things</span> <span m='4962030'>get</span> <span m='4962300'>really</span>
  <span m='4962870'>hard.</span> <span m='4964430'>There</span> <span m='4964610'>are</span>
  <span m='4965630'>two</span> <span m='4965870'>problems</span> <span m='4966260'>I've</span>
  <span m='4966340'>surveyed</span> <span m='4966710'>here.</span> <span m='4966890'>There's</span>
  <span m='4967010'>probably</span> <span m='4967460'>more.</span> <span m='4967760'>But</span>
  <span m='4968170'>the</span> <span m='4968270'>most</span> <span m='4968480'>fundamental</span>
  <span m='4968960'>questions</span> <span m='4969410'>are</span> <span m='4970280'>the</span>
  <span m='4970760'>analog</span> <span m='4971420'>of</span> <span m='4971510'>connectivity</span>
  <span m='4972140'>is</span> <span m='4972260'>what I</span> <span m='4972470'>call</span>
  <span m='4973070'>dynamic</span> <span m='4973550'>transitive</span> <span m='4973970'>closure,</span>
  <span m='4975000'>which</span> <span m='4975080'>means</span> <span m='4976220'>given</span>
  <span m='4976520'>two</span> <span m='4976730'>vertices,</span> <span m='4977180'>v
  and</span> <span m='4977630'>w,</span> <span m='4978110'>I</span> <span m='4978230'>want</span>
  <span m='4978410'>to</span> <span m='4978470'>know,</span> <span m='4978680'>is</span>
  <span m='4978890'>there</span> <span m='4979040'>a</span> <span m='4979130'>directed</span>
  <span m='4979610'>path</span> <span m='4979910'>from</span> <span m='4980060'>v</span>
  <span m='4980180'>to</span> <span m='4980280'>w</span> <span m='4980570'>instead</span>
  <span m='4980900'>of</span> <span m='4981050'>undirected?</span> </p><p><span m='4983180'>At</span>
  <span m='4983330'>the</span> <span m='4983450'>moment,</span> <span m='4984620'>a</span>
  <span m='4984680'>bunch</span> <span m='4985010'>of</span> <span m='4985130'>results</span>
  <span m='4985520'>match</span> <span m='4987200'>a</span> <span m='4987260'>trade-off</span>
  <span m='4987710'>curve</span> <span m='4988070'>which</span> <span m='4988250'>should</span>
  <span m='4988430'>be</span> <span m='4989120'>update</span> <span m='4990510'>times</span>
  <span m='4990890'>query</span> <span m='4992570'>is</span> <span m='4992810'>roughly</span>
  <span m='4993590'>m</span> <span m='4994060'>times</span> <span m='4994335'>n,</span>
  <span m='4994610'>a</span> <span m='4994820'>number</span> <span m='4995120'>of</span>
  <span m='4995210'>edges</span> <span m='4995480'>times</span> <span m='4995750'>number
  of</span> <span m='4995970'>vertices.</span> <span m='4996830'>This</span> <span
  m='4997010'>is</span> <span m='4997460'>big.</span> <span m='4999820'>But</span>
  <span m='5000250'>there</span> <span m='5000340'>are</span> <span m='5000370'>a</span>
  <span m='5000400'>bunch</span> <span m='5000580'>of</span> <span m='5000640'>results</span>
  <span m='5000970'>that</span> <span m='5001120'>achieve</span> <span m='5001810'>this</span>
  <span m='5002920'>trade-off.</span> <span m='5003550'>I</span> <span m='5003580'>don't</span>
  <span m='5003730'>think</span> <span m='5003910'>I'm</span> <span m='5004020'>matching</span>
  <span m='5004300'>lower</span> <span m='5004540'>bound.</span> </p><p><span m='5005290'>But</span>
  <span m='5006640'>it's</span> <span m='5006820'>also</span> <span m='5007060'>open,</span>
  <span m='5007420'>whether</span> <span m='5007660'>this</span> <span m='5008110'>entire</span>
  <span m='5008530'>trade-off</span> <span m='5008920'>curve</span> <span m='5009190'>could</span>
  <span m='5009370'>be</span> <span m='5009490'>achieved.</span> <span m='5010330'>There's</span>
  <span m='5010510'>various</span> <span m='5010810'>points</span> <span m='5011140'>on</span>
  <span m='5011260'>the</span> <span m='5011350'>curve</span> <span m='5011740'>where</span>
  <span m='5011890'>you</span> <span m='5012010'>pay</span> <span m='5012700'>square</span>
  <span m='5013150'>root of</span> <span m='5013270'>n</span> <span m='5013450'>for</span>
  <span m='5013540'>an</span> <span m='5013600'>update.</span> <span m='5014050'>Then</span>
  <span m='5014200'>you</span> <span m='5014290'>pay</span> <span m='5014710'>like,</span>
  <span m='5015350'>m</span> <span m='5015620'>times</span> <span m='5015870'>square</span>
  <span m='5016180'>root of</span> <span m='5016300'>n</span> <span m='5016480'>for</span>
  <span m='5016600'>the</span> <span m='5016720'>query</span> <span m='5017410'>or</span>
  <span m='5017530'>vice</span> <span m='5017840'>versa,</span> <span m='5018760'>stuff</span>
  <span m='5018970'>like</span> <span m='5019090'>that.</span> </p><p><span m='5020330'>And</span>
  <span m='5020440'>then</span> <span m='5020920'>a</span> <span m='5020980'>harder</span>
  <span m='5021280'>version</span> <span m='5021520'>of</span> <span m='5021610'>this</span>
  <span m='5021760'>is</span> <span m='5021870'>you</span> <span m='5021940'>have</span>
  <span m='5022060'>weights</span> <span m='5022330'>on</span> <span m='5022420'>the</span>
  <span m='5022540'>edges.</span> <span m='5022970'>And</span> <span m='5023070'>now</span>
  <span m='5023670'>the</span> <span m='5023740'>query</span> <span m='5024130'>is</span>
  <span m='5024250'>not</span> <span m='5024460'>just</span> <span m='5024610'>find</span>
  <span m='5024790'>a</span> <span m='5024940'>path,</span> <span m='5025300'>find</span>
  <span m='5025510'>the</span> <span m='5025570'>shortest</span> <span m='5025930'>path.</span>
  <span m='5027460'>This</span> <span m='5027610'>is</span> <span m='5027700'>what</span>
  <span m='5027850'>I</span> <span m='5027910'>call</span> <span m='5028120'>dynamic</span>
  <span m='5028430'>all</span> <span m='5028740'>pairs</span> <span m='5028990'>shortest</span>
  <span m='5029290'>paths.</span> <span m='5030470'>This</span> <span m='5030580'>is</span>
  <span m='5030700'>even</span> <span m='5030940'>harder.</span> </p><p><span m='5031960'>There</span>
  <span m='5032080'>are</span> <span m='5032110'>some</span> <span m='5032320'>results</span>
  <span m='5032710'>where</span> <span m='5032830'>you</span> <span m='5032950'>can</span>
  <span m='5033100'>do</span> <span m='5033250'>like,</span> <span m='5034330'>roughly,</span>
  <span m='5034780'>n</span> <span m='5035260'>squared</span> <span m='5036040'>time</span>
  <span m='5036490'>updates</span> <span m='5036940'>constant</span> <span m='5037450'>query.</span>
  <span m='5038110'>So</span> <span m='5038320'>it's</span> <span m='5038470'>maybe</span>
  <span m='5038800'>similar</span> <span m='5039850'>type</span> <span m='5040150'>of</span>
  <span m='5040240'>trade-off</span> <span m='5040570'>curves,</span> <span m='5040840'>not</span>
  <span m='5041020'>really</span> <span m='5041320'>known.</span> <span m='5043630'>When</span>
  <span m='5043780'>all</span> <span m='5043900'>the</span> <span m='5044020'>weights</span>
  <span m='5044320'>of</span> <span m='5044380'>the</span> <span m='5044500'>edges</span>
  <span m='5044770'>are</span> <span m='5044920'>1,</span> <span m='5045410'>you</span>
  <span m='5045490'>just</span> <span m='5045640'>want</span> <span m='5045790'>to</span>
  <span m='5045850'>find</span> <span m='5046000'>the</span> <span m='5046060'>shortest</span>
  <span m='5046570'>path</span> <span m='5046870'>in</span> <span m='5046960'>terms</span>
  <span m='5047140'>of</span> <span m='5047200'>the</span> <span m='5047260'>number</span>
  <span m='5047470'>of</span> <span m='5047530'>edges,</span> <span m='5048460'>you</span>
  <span m='5048610'>can</span> <span m='5048730'>do</span> <span m='5050350'>not</span>
  <span m='5050560'>really</span> <span m='5050800'>that</span> <span m='5050950'>much</span>
  <span m='5051160'>better.</span> <span m='5051910'>Still,</span> <span m='5052390'>this</span>
  <span m='5052600'>is</span> <span m='5052690'>the</span> <span m='5052810'>product.</span>
  <span m='5053740'>But</span> <span m='5053920'>at</span> <span m='5053980'>least</span>
  <span m='5054190'>more</span> <span m='5054430'>of</span> <span m='5054520'>the</span>
  <span m='5054610'>trade</span> <span m='5054970'>curve</span> <span m='5055660'>has</span>
  <span m='5055840'>been</span> <span m='5055990'>solved.</span> </p><p><span m='5057160'>So</span>
  <span m='5057310'>that's</span> <span m='5057490'>a</span> <span m='5057520'>quick</span>
  <span m='5057790'>overview</span> <span m='5058270'>of</span> <span m='5058360'>dynamic</span>
  <span m='5058720'>graphs,</span> <span m='5059590'>more</span> <span m='5059800'>generally.</span>
  <span m='5061690'>Dynamic</span> <span m='5061960'>graphs</span> <span m='5062230'>come</span>
  <span m='5062440'>up</span> <span m='5062590'>all</span> <span m='5062710'>over</span>
  <span m='5062860'>the</span> <span m='5062980'>place,</span> <span m='5063250'>obviously.</span>
  <span m='5063720'>You have</span> <span m='5063940'>network</span> <span m='5064330'>where</span>
  <span m='5065080'>the</span> <span m='5065170'>links</span> <span m='5065380'>are</span>
  <span m='5065470'>changing,</span> <span m='5066130'>or</span> <span m='5067000'>Facebook,</span>
  <span m='5067570'>you</span> <span m='5067630'>want</span> <span m='5067750'>to</span>
  <span m='5067810'>maintain</span> <span m='5068110'>connections</span> <span m='5068660'>but</span>
  <span m='5068860'>people</span> <span m='5069190'>friend and</span> <span m='5069580'>de-friend</span>
  <span m='5069940'>all</span> <span m='5070030'>the</span> <span m='5070120'>time.</span>
  <span m='5070900'>So</span> <span m='5071230'>you</span> <span m='5071380'>want</span>
  <span m='5071500'>to</span> <span m='5071560'>maintain</span> <span m='5071950'>whatever</span>
  <span m='5072280'>structure</span> <span m='5072640'>you</span> <span m='5072760'>care</span>
  <span m='5072940'>about.</span> <span m='5075000'>Anyway,</span> <span m='5075300'>that's</span>
  <span m='5075900'>dynamic</span> <span m='5076230'>graphs</span> <span m='5076560'>upper</span>
  <span m='5076770'>bounds.</span> <span m='5077310'>Next</span> <span m='5077580'>class</span>
  <span m='5077970'>will</span> <span m='5078090'>be</span> <span m='5078480'>lower</span>
  <span m='5078750'>bounds,</span> <span m='5079350'>the</span> <span m='5079650'>log</span>
  <span m='5079950'>n.</span> </p>
type: course
uid: d213cd2d4ebd4a0536a545835a062f45

---
None