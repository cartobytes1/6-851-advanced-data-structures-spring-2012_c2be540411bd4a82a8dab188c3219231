---
about_this_resource_text: '<p><strong>Description:</strong> Dictionaries: Universal,
  k-wise independent, simple tabulation hashing; chaining, dynamic perfect hashing,
  linear probing, cuckoo hashing.</p> <p><strong>Speaker:</strong> Prof. Erik Demaine</p>'
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: Mf9Nn9PbGsE
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Video-YouTube-Stream
  type: Video
  uid: 71451cfc52391d51cd35aaeb3afb6cf4
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-10-dictionaries/id735348884?i=169609944
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Video-iTunes U-MP4
  type: Video
  uid: 423371b07ac019e98a03808f0c4c2858
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec10_300k.mp4
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Video-Internet Archive-MP4
  type: Video
  uid: dd117ad5d948de8112f177c4b05724e3
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/Mf9Nn9PbGsE/default.jpg
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: e8b86b3cb39cb13a2209c3440cf20c32
- id: 3Play-3PlayYouTubeid-MP4
  media_location: Mf9Nn9PbGsE
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: d878d3b5b56ec9dc63da8d4daecf370c
- id: Mf9Nn9PbGsE.srt
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-10-dictionaries/Mf9Nn9PbGsE.srt
  title: 3play caption file
  type: null
  uid: 285d846ea310be4c74857b23e8087d70
- id: Mf9Nn9PbGsE.pdf
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-10-dictionaries/Mf9Nn9PbGsE.pdf
  title: 3play pdf file
  type: null
  uid: 2b8132c36e5460841754a3cf8c0d5397
- id: Caption-3Play YouTube id-SRT
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: c105cfbdb08f868ef308c3d70c4a73a6
- id: Transcript-3Play YouTube id-PDF
  parent_uid: d439e96a5afb91c0246b2b069ea5ed22
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: cdcc1820cbf970cc2cccca6bbd6bf79c
inline_embed_id: 10055538session10:dictionaries44780326
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-10-dictionaries
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-10-dictionaries
template_type: Tabbed
title: 'Session 10: Dictionaries'
transcript: <p><span m='90'>The</span> <span m='180'>following</span> <span m='630'>content</span>
  <span m='1200'>is</span> <span m='1320'>provided</span> <span m='1770'>under</span>
  <span m='2009'>a</span> <span m='2070'>Creative</span> <span m='2490'>Commons</span>
  <span m='2910'>license.</span> <span m='4030'>Your</span> <span m='4200'>support</span>
  <span m='4710'>will</span> <span m='4860'>help</span> <span m='5100'>MIT</span>
  <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span> <span m='6870'>to</span>
  <span m='6960'>offer</span> <span m='7380'>high</span> <span m='7620'>quality</span>
  <span m='8100'>educational</span> <span m='8730'>resources</span> <span m='9330'>for</span>
  <span m='9510'>free.</span> <span m='10720'>To</span> <span m='10740'>make</span>
  <span m='10920'>a</span> <span m='10980'>donation</span> <span m='11730'>or</span>
  <span m='11940'>view</span> <span m='12390'>additional</span> <span m='12810'>materials</span>
  <span m='13320'>from</span> <span m='13500'>hundreds</span> <span m='13920'>of</span>
  <span m='14040'>MIT</span> <span m='14460'>courses,</span> <span m='15550'>visit</span>
  <span m='15780'>MIT</span> <span m='16200'>OpenCourseWare</span> <span m='17280'>at</span>
  <span m='17430'>ocw.mit.edu.</span> </p><p><span m='21720'>ERIK DEMAINE:</span>
  <span m='21750'>All</span> <span m='21780'>right,</span> <span m='21990'>today</span>
  <span m='22320'>we're</span> <span m='22440'>going</span> <span m='22550'>to</span>
  <span m='22620'>do</span> <span m='23250'>an</span> <span m='23640'>exciting</span>
  <span m='24060'>topic,</span> <span m='24450'>which</span> <span m='24600'>is</span>
  <span m='24750'>hashing.</span> <span m='26550'>Do</span> <span m='26760'>it</span>
  <span m='26820'>all</span> <span m='27060'>in</span> <span m='27180'>one</span>
  <span m='27390'>lecture,</span> <span m='27645'>that's</span> <span m='27900'>the</span>
  <span m='28150'>plan.</span> <span m='28490'>See</span> <span m='28870'>if</span>
  <span m='29280'>we</span> <span m='29340'>make</span> <span m='29550'>it.</span>
  </p><p><span m='31740'>You've</span> <span m='31950'>probably</span> <span m='32490'>heard</span>
  <span m='32640'>about</span> <span m='32850'>hashing.</span> <span m='33450'>It's</span>
  <span m='33630'>probably</span> <span m='34050'>the</span> <span m='34290'>most</span>
  <span m='34740'>common</span> <span m='35430'>data</span> <span m='35610'>structure</span>
  <span m='35970'>in</span> <span m='36060'>computer</span> <span m='36330'>science.</span>
  <span m='37050'>It's</span> <span m='37280'>covered</span> <span m='37610'>in</span>
  <span m='37680'>pretty</span> <span m='37860'>much</span> <span m='38040'>every</span>
  <span m='38310'>algorithms</span> <span m='38730'>class.</span> <span m='39820'>But</span>
  <span m='39930'>there's</span> <span m='40080'>a</span> <span m='40140'>lot</span>
  <span m='40380'>to</span> <span m='40440'>say</span> <span m='40650'>about</span>
  <span m='40950'>it.</span> </p><p><span m='41220'>And</span> <span m='41490'>I</span>
  <span m='41580'>want</span> <span m='41700'>to</span> <span m='41880'>quickly</span>
  <span m='42240'>review</span> <span m='42570'>things</span> <span m='42810'>you</span>
  <span m='42900'>might</span> <span m='43110'>know</span> <span m='43710'>and</span>
  <span m='44250'>then</span> <span m='44430'>quickly</span> <span m='44790'>get</span>
  <span m='44970'>to</span> <span m='45090'>things</span> <span m='45360'>you</span>
  <span m='45570'>shouldn't</span> <span m='45870'>know.</span> <span m='47460'>And</span>
  <span m='47820'>we're</span> <span m='47970'>going</span> <span m='48080'>to</span>
  <span m='48150'>talk</span> <span m='48420'>on</span> <span m='48510'>the</span>
  <span m='48600'>one</span> <span m='48780'>hand</span> <span m='48960'>about</span>
  <span m='49680'>different</span> <span m='49920'>kinds</span> <span m='50100'>of</span>
  <span m='50190'>hash</span> <span m='50430'>functions,</span> <span m='51930'>fancy</span>
  <span m='52320'>stuff</span> <span m='52590'>like</span> <span m='52830'>k-wise</span>
  <span m='53220'>independence,</span> <span m='53790'>and</span> <span m='53880'>a</span>
  <span m='53970'>new</span> <span m='54300'>technique</span> <span m='54720'>that's</span>
  <span m='54900'>been</span> <span m='55050'>analyzed</span> <span m='55410'>a</span>
  <span m='55470'>lot</span> <span m='55650'>lately,</span> <span m='56040'>simple</span>
  <span m='56400'>tabulation</span> <span m='56970'>hashing,</span> <span m='57360'>just</span>
  <span m='57770'>in</span> <span m='57870'>the</span> <span m='57930'>last</span>
  <span m='58200'>year.</span> <span m='59310'>And</span> <span m='59430'>then</span>
  <span m='59550'>we'll</span> <span m='59640'>look</span> <span m='59850'>at</span>
  <span m='59910'>different</span> <span m='60180'>ways</span> <span m='60360'>to</span>
  <span m='60450'>use</span> <span m='60630'>this</span> <span m='60780'>hash</span>
  <span m='60990'>function</span> <span m='61210'>that</span> <span m='61370'>actually</span>
  <span m='61710'>build</span> <span m='61920'>data</span> <span m='62130'>structures,</span>
  <span m='63240'>chaining</span> <span m='63630'>is</span> <span m='63750'>the</span>
  <span m='63900'>obvious</span> <span m='64260'>one;</span> <span m='64950'>perfect</span>
  <span m='65250'>hashing</span> <span m='65700'>you</span> <span m='65760'>may</span>
  <span m='65890'>have</span> <span m='65970'>seen;</span> <span m='66810'>linear</span>
  <span m='67140'>probing</span> <span m='68160'>is</span> <span m='68310'>another</span>
  <span m='68610'>obvious</span> <span m='68940'>one,</span> <span m='69150'>but</span>
  <span m='69300'>has</span> <span m='69450'>only</span> <span m='69690'>been</span>
  <span m='69810'>analyzed</span> <span m='70170'>recently;</span> <span m='71100'>and</span>
  <span m='71370'>cuckoo</span> <span m='71670'>hashing</span> <span m='72120'>is</span>
  <span m='72270'>a</span> <span m='72330'>new</span> <span m='72540'>one</span> <span
  m='73600'>that</span> <span m='73980'>has</span> <span m='74190'>its</span> <span
  m='74340'>own</span> <span m='75000'>fun</span> <span m='75300'>feature.</span>
  <span m='75690'>So</span> <span m='75930'>that's</span> <span m='76110'>where</span>
  <span m='76830'>we're</span> <span m='76900'>going</span> <span m='77020'>to</span>
  <span m='77130'>go</span> <span m='77250'>today</span> </p><p><span m='78810'>Remember,</span>
  <span m='79590'>the</span> <span m='80130'>basic</span> <span m='80430'>idea</span>
  <span m='80640'>of</span> <span m='80730'>hashing</span> <span m='82440'>is</span>
  <span m='82590'>you</span> <span m='82710'>want</span> <span m='82860'>to</span>
  <span m='82920'>reduce</span> <span m='83460'>a</span> <span m='83730'>giant</span>
  <span m='84180'>universe</span> <span m='85350'>to</span> <span m='86160'>a</span>
  <span m='86250'>reasonably</span> <span m='86730'>small</span> <span m='87030'>table.</span>
  <span m='88090'>So</span> <span m='89100'>I'm going</span> <span m='89160'>to call</span>
  <span m='89400'>our hash</span> <span m='89610'>function</span> <span m='89940'>h.</span>
  <span m='90640'>I'm</span> <span m='91050'>going</span> <span m='91170'>to</span>
  <span m='91230'>call</span> <span m='91440'>the</span> <span m='91560'>universe</span>
  <span m='92060'>integer</span> <span m='92530'>0</span> <span m='92970'>up</span>
  <span m='93150'>to</span> <span m='93270'>u</span> <span m='93390'>minus</span>
  <span m='93750'>1.</span> <span m='95438'>So</span> <span m='95860'>this is</span>
  <span m='96040'>the</span> <span m='97050'>universe.</span> <span m='98610'>And</span>
  <span m='98760'>I'm</span> <span m='98820'>going</span> <span m='98940'>to</span>
  <span m='99010'>denote</span> <span m='99300'>the</span> <span m='99390'>universe</span>
  <span m='99780'>by</span> <span m='99960'>a</span> <span m='99990'>capital</span>
  <span m='100440'>U.</span> </p><p><span m='102600'>And</span> <span m='103380'>we</span>
  <span m='103560'>have</span> <span m='104160'>a</span> <span m='104250'>table</span>
  <span m='104760'>that</span> <span m='104880'>we'd</span> <span m='105060'>like</span>
  <span m='105480'>to</span> <span m='106200'>store.</span> <span m='107100'>I'm</span>
  <span m='107160'>not</span> <span m='107280'>going</span> <span m='107400'>to</span>
  <span m='107460'>draw</span> <span m='107700'>it</span> <span m='107750'>yet</span>
  <span m='107970'>because</span> <span m='108300'>that's</span> <span m='108630'>the</span>
  <span m='108900'>second</span> <span m='109290'>half</span> <span m='109620'>of</span>
  <span m='109710'>the</span> <span m='109830'>lecture,</span> <span m='110670'>what</span>
  <span m='110850'>is</span> <span m='111000'>the</span> <span m='111090'>table</span>
  <span m='111450'>actually.</span> <span m='112290'>But</span> <span m='112410'>we'll</span>
  <span m='112470'>just</span> <span m='112620'>think</span> <span m='112830'>of</span>
  <span m='112920'>it</span> <span m='113040'>as</span> <span m='113610'>indices</span>
  <span m='114270'>0</span> <span m='114690'>through</span> <span m='114945'>m</span>
  <span m='115200'>minus</span> <span m='115560'>1.</span> <span m='116080'>So</span>
  <span m='116160'>this</span> <span m='116400'>is</span> <span m='116580'>the</span>
  <span m='117690'>table</span> <span m='118020'>size.</span> </p><p><span m='121000'>And</span>
  <span m='121140'>probably,</span> <span m='121650'>we</span> <span m='121800'>want</span>
  <span m='122020'>m</span> <span m='122250'>to</span> <span m='122400'>be</span>
  <span m='122550'>about</span> <span m='122940'>n.</span> <span m='123420'>n</span>
  <span m='123780'>is</span> <span m='124080'>the</span> <span m='124380'>number</span>
  <span m='124740'>of</span> <span m='124890'>keys</span> <span m='125280'>we're</span>
  <span m='125370'>actually</span> <span m='125670'>storing</span> <span m='125970'>in</span>
  <span m='126060'>the</span> <span m='126150'>table.</span> <span m='126660'>But</span>
  <span m='126840'>that's</span> <span m='127050'>not</span> <span m='127230'>necessarily</span>
  <span m='127650'>seen</span> <span m='128520'>at</span> <span m='128669'>this</span>
  <span m='128850'>level.</span> <span m='130289'>So</span> <span m='130410'>that's</span>
  <span m='130590'>a</span> <span m='130650'>hash</span> <span m='130830'>function.</span>
  <span m='133110'>m</span> <span m='133500'>is</span> <span m='133620'>going</span>
  <span m='133770'>to</span> <span m='133830'>be</span> <span m='133890'>much</span>
  <span m='134130'>smaller</span> <span m='134460'>than</span> <span m='134640'>u.</span>
  <span m='135780'>We're</span> <span m='135870'>just</span> <span m='136050'>hashing</span>
  <span m='136380'>integers</span> <span m='136770'>here,</span> <span m='136930'>so</span>
  <span m='137080'>if</span> <span m='137160'>you</span> <span m='137220'>don't</span>
  <span m='137400'>have</span> <span m='137520'>integers</span> <span m='138030'>you</span>
  <span m='138150'>map</span> <span m='138640'>your</span> <span m='139050'>whatever</span>
  <span m='139440'>space</span> <span m='139830'>of</span> <span m='139920'>things</span>
  <span m='140160'>you</span> <span m='140280'>have</span> <span m='140580'>to</span>
  <span m='140700'>integers.</span> <span m='141690'>That's</span> <span m='141990'>pretty</span>
  <span m='142200'>much</span> <span m='142470'>always</span> <span m='142740'>possible.</span>
  </p><p><span m='143790'>Now,</span> <span m='144510'>best</span> <span m='144780'>case</span>
  <span m='144960'>scenario</span> <span m='145890'>would</span> <span m='146100'>be</span>
  <span m='146310'>to</span> <span m='146490'>use</span> <span m='146790'>a</span>
  <span m='146910'>totally</span> <span m='147450'>random</span> <span m='147810'>hash</span>
  <span m='148080'>function.</span> <span m='151590'>What</span> <span m='151760'>does</span>
  <span m='151890'>totally</span> <span m='152220'>random</span> <span m='152550'>mean?</span>
  <span m='153730'>The</span> <span m='154140'>probability,</span> <span m='155100'>if</span>
  <span m='155250'>you</span> <span m='155400'>choose</span> <span m='155970'>your</span>
  <span m='156120'>hash</span> <span m='156420'>function,</span> <span m='157800'>that</span>
  <span m='158580'>any</span> <span m='158880'>key</span> <span m='159270'>x</span>
  <span m='159780'>maps</span> <span m='160080'>to</span> <span m='160200'>any</span>
  <span m='160380'>particular</span> <span m='160950'>slot--</span> <span m='161850'>these</span>
  <span m='162090'>table</span> <span m='162480'>things</span> <span m='162840'>are</span>
  <span m='162930'>called</span> <span m='163140'>slots--</span> <span m='164700'>is</span>
  <span m='165030'>1</span> <span m='165270'>over</span> <span m='165460'>m.</span>
  <span m='167640'>And</span> <span m='167790'>this</span> <span m='168030'>is</span>
  <span m='168690'>independent</span> <span m='169560'>for</span> <span m='169800'>all</span>
  <span m='171640'>x.</span> </p><p><span m='188290'>So</span> <span m='188470'>this</span>
  <span m='188680'>would</span> <span m='188770'>be</span> <span m='188920'>ideal.</span>
  <span m='189740'>You</span> <span m='189820'>choose</span> <span m='190090'>each</span>
  <span m='190360'>h of</span> <span m='190720'>x</span> <span m='191020'>for</span>
  <span m='191170'>every</span> <span m='191500'>possible</span> <span m='192040'>key</span>
  <span m='193180'>randomly,</span> <span m='194900'>independently.</span> <span m='196120'>Then</span>
  <span m='196300'>that</span> <span m='196450'>gives</span> <span m='196660'>you</span>
  <span m='196750'>perfect</span> <span m='197200'>hashing.</span> <span m='198450'>Not</span>
  <span m='198640'>perfect</span> <span m='199000'>in</span> <span m='199090'>this</span>
  <span m='199240'>sense,</span> <span m='200020'>sorry.</span> <span m='200380'>It
  gives</span> <span m='200530'>you</span> <span m='200650'>ideal</span> <span m='201070'>hashing.</span>
  </p><p><span m='202600'>Perfect</span> <span m='203050'>means</span> <span m='203320'>no</span>
  <span m='203470'>collisions.</span> <span m='204940'>This</span> <span m='205150'>actually</span>
  <span m='205450'>might</span> <span m='205630'>have</span> <span m='205810'>collisions,</span>
  <span m='206410'>there's</span> <span m='206560'>some</span> <span m='206740'>chance</span>
  <span m='207190'>that</span> <span m='207790'>two</span> <span m='208000'>keys</span>
  <span m='208450'>hash</span> <span m='208780'>to</span> <span m='208870'>the</span>
  <span m='208960'>same</span> <span m='209170'>value.</span> <span m='209980'>We</span>
  <span m='210070'>call</span> <span m='210220'>this</span> <span m='210340'>totally</span>
  <span m='210640'>random.</span> <span m='211000'>This</span> <span m='211180'>is</span>
  <span m='211270'>sort</span> <span m='211420'>of</span> <span m='211480'>the</span>
  <span m='211600'>ideal</span> <span m='212020'>thing</span> <span m='212170'>that</span>
  <span m='212290'>we're</span> <span m='212410'>trying</span> <span m='212710'>to</span>
  <span m='212800'>approximate</span> <span m='213340'>with</span> <span m='213490'>reasonable</span>
  <span m='213850'>hash</span> <span m='214090'>functions.</span> </p><p><span m='214840'>Why</span>
  <span m='215020'>is</span> <span m='215110'>this</span> <span m='215230'>bad?</span>
  <span m='216040'>Because</span> <span m='216280'>it's</span> <span m='216400'>big.</span>
  <span m='217990'>The</span> <span m='218440'>number</span> <span m='218860'>of</span>
  <span m='218920'>bits</span> <span m='219160'>of</span> <span m='219220'>information</span>
  <span m='219820'>you'd</span> <span m='219960'>need</span> <span m='220510'>if</span>
  <span m='220720'>you</span> <span m='220900'>actually</span> <span m='221500'>could</span>
  <span m='221710'>flip</span> <span m='222130'>all</span> <span m='222280'>these</span>
  <span m='222430'>coins,</span> <span m='223480'>you'd</span> <span m='223600'>need</span>
  <span m='223780'>to</span> <span m='223900'>write</span> <span m='224170'>down,</span>
  <span m='226030'>I</span> <span m='226090'>guess</span> <span m='226360'>U</span>
  <span m='227320'>times</span> <span m='227840'>log</span> <span m='228380'>m</span>
  <span m='229360'>bits</span> <span m='229600'>of</span> <span m='229720'>information.</span>
  </p><p><span m='235800'>Which</span> <span m='235980'>is</span> <span m='236100'>generally</span>
  <span m='236610'>way</span> <span m='236880'>too</span> <span m='237060'>big.</span>
  <span m='237330'>We</span> <span m='237390'>can't</span> <span m='237630'>afford</span>
  <span m='238200'>U.</span> <span m='238590'>The</span> <span m='238710'>whole</span>
  <span m='238860'>point</span> <span m='239100'>is</span> <span m='239220'>we</span>
  <span m='239310'>want</span> <span m='239490'>to</span> <span m='239550'>store</span>
  <span m='240210'>n</span> <span m='240420'>items</span> <span m='240840'>much</span>
  <span m='241020'>smaller</span> <span m='241320'>than</span> <span m='241440'>U.</span>
  <span m='243270'>Surprisingly,</span> <span m='243880'>this</span> <span m='244080'>concept</span>
  <span m='244470'>will</span> <span m='244620'>still</span> <span m='244830'>be</span>
  <span m='244950'>useful.</span> <span m='245430'>So</span> <span m='245700'>we'll</span>
  <span m='245820'>get</span> <span m='245970'>there.</span> </p><p><span m='251920'>Another</span>
  <span m='252920'>system</span> <span m='253320'>you've</span> <span m='253410'>probably</span>
  <span m='253740'>seen</span> <span m='255480'>is</span> <span m='255690'>universal</span>
  <span m='256260'>hashing.</span> <span m='258870'>This</span> <span m='259079'>is</span>
  <span m='259260'>a</span> <span m='259470'>constraint</span> <span m='266270'>on</span>
  <span m='266660'>hash</span> <span m='267020'>function.</span> <span m='267380'>So</span>
  <span m='267530'>this</span> <span m='267740'>would</span> <span m='267860'>be</span>
  <span m='268520'>ideally</span> <span m='268880'>you'd</span> <span m='269060'>choose</span>
  <span m='269330'>h</span> <span m='269690'>uniformly</span> <span m='270170'>at</span>
  <span m='270230'>random</span> <span m='270500'>from</span> <span m='270680'>all</span>
  <span m='270950'>hash</span> <span m='271220'>functions.</span> <span m='271700'>That</span>
  <span m='271880'>would</span> <span m='272000'>give</span> <span m='272180'>you</span>
  <span m='272300'>this</span> <span m='273080'>probability.</span> <span m='274090'>We're</span>
  <span m='274220'>going</span> <span m='274330'>to</span> <span m='274850'>make</span>
  <span m='275060'>a</span> <span m='275120'>smaller</span> <span m='275540'>set</span>
  <span m='275690'>of</span> <span m='275780'>hash</span> <span m='276020'>functions</span>
  <span m='276440'>whose</span> <span m='276560'>size</span> <span m='276980'>is</span>
  <span m='277280'>much</span> <span m='277580'>smaller.</span> <span m='278100'>And</span>
  <span m='278200'>so</span> <span m='278240'>you</span> <span m='278360'>can</span>
  <span m='278510'>encode</span> <span m='278900'>the</span> <span m='279020'>hash</span>
  <span m='279260'>function</span> <span m='279630'>in</span> <span m='279830'>many</span>
  <span m='280100'>fewer</span> <span m='280400'>bits.</span> </p><p><span m='285050'>And</span>
  <span m='285200'>the</span> <span m='285290'>property</span> <span m='285800'>we</span>
  <span m='285950'>want</span> <span m='286280'>from</span> <span m='286520'>that</span>
  <span m='286670'>hash</span> <span m='286970'>family</span> <span m='287960'>is</span>
  <span m='288200'>that</span> <span m='288590'>if</span> <span m='288800'>you</span>
  <span m='288950'>look</span> <span m='289190'>at</span> <span m='291230'>the</span>
  <span m='291350'>probability</span> <span m='292160'>that</span> <span m='292490'>two</span>
  <span m='292970'>keys</span> <span m='293420'>collide,</span> <span m='295310'>you</span>
  <span m='295460'>get</span> <span m='295670'>roughly</span> <span m='296150'>what</span>
  <span m='296300'>you</span> <span m='296450'>expect</span> <span m='296930'>from</span>
  <span m='297350'>totally</span> <span m='297740'>random.</span> <span m='300200'>You</span>
  <span m='300290'>would</span> <span m='300410'>hope</span> <span m='300590'>for</span>
  <span m='300830'>1</span> <span m='301010'>over</span> <span m='301190'>m.</span>
  <span m='303080'>Once</span> <span m='303260'>you</span> <span m='303350'>pick</span>
  <span m='303590'>one</span> <span m='303800'>key,</span> <span m='304160'>the probability</span>
  <span m='304415'>the</span> <span m='304670'>other</span> <span m='304820'>key</span>
  <span m='305030'>would</span> <span m='305180'>hit</span> <span m='305330'>it</span>
  <span m='305840'>would</span> <span m='305960'>be</span> <span m='306050'>1</span>
  <span m='306200'>over</span> <span m='306410'>m.</span> </p><p><span m='308110'>But</span>
  <span m='308330'>we'll</span> <span m='309020'>allow</span> <span m='309410'>constant</span>
  <span m='309800'>factor.</span> <span m='311030'>And</span> <span m='311180'>also</span>
  <span m='311420'>allow it</span> <span m='311630'>to</span> <span m='311750'>be</span>
  <span m='311870'>smaller.</span> <span m='313390'>It</span> <span m='313490'>gives</span>
  <span m='313550'>us</span> <span m='313640'>some</span> <span m='313860'>slop.</span>
  <span m='315200'>You</span> <span m='315320'>don't</span> <span m='315470'>have</span>
  <span m='315710'>to</span> <span m='315800'>do</span> <span m='315920'>this.</span>
  <span m='316160'>If</span> <span m='316280'>you</span> <span m='316370'>don't</span>
  <span m='316550'>do</span> <span m='316670'>this</span> <span m='316890'>you</span>
  <span m='317120'>it's</span> <span m='317300'>called</span> <span m='317480'>strongly</span>
  <span m='317870'>universal.</span> </p><p><span m='321445'>That's</span> <span m='321830'>universal.</span>
  <span m='323420'>And</span> <span m='323570'>universal</span> <span m='324080'>is</span>
  <span m='324200'>enough</span> <span m='324500'>for</span> <span m='324800'>a</span>
  <span m='324830'>lot</span> <span m='325070'>of</span> <span m='325160'>things</span>
  <span m='325460'>that</span> <span m='325580'>you've</span> <span m='325820'>probably</span>
  <span m='326150'>seen,</span> <span m='327770'>but</span> <span m='327920'>not</span>
  <span m='328100'>enough</span> <span m='328280'>for</span> <span m='328400'>other</span>
  <span m='328580'>things.</span> <span m='329130'>So</span> <span m='329360'>here</span>
  <span m='329540'>are</span> <span m='329600'>some</span> <span m='329780'>examples</span>
  <span m='330230'>of</span> <span m='330320'>hash</span> <span m='330530'>functions</span>
  <span m='331040'>that</span> <span m='331850'>are</span> <span m='331970'>universal,</span>
  <span m='333452'>which</span> <span m='333850'>again,</span> <span m='334010'>you</span>
  <span m='334100'>may</span> <span m='334280'>have</span> <span m='334400'>seen.</span>
  </p><p><span m='349880'>You</span> <span m='350060'>can</span> <span m='350180'>take</span>
  <span m='350360'>a</span> <span m='350390'>random</span> <span m='350840'>integer</span>
  <span m='351220'>a,</span> <span m='352400'>multiply</span> <span m='352970'>it</span>
  <span m='353030'>by</span> <span m='353240'>x</span> <span m='353690'>integer</span>
  <span m='354050'>multiplication.</span> <span m='354680'>You</span> <span m='354740'>could</span>
  <span m='354890'>also</span> <span m='355100'>do</span> <span m='355220'>this</span>
  <span m='355460'>as</span> <span m='355640'>a</span> <span m='355820'>vector</span>
  <span m='356210'>wise</span> <span m='356420'>dot</span> <span m='356600'>product.</span>
  <span m='357140'>But</span> <span m='358100'>here</span> <span m='358340'>I'm</span>
  <span m='358430'>doing</span> <span m='358700'>it</span> <span m='358880'>as</span>
  <span m='359150'>multiplication.</span> <span m='359840'>Modulo</span> <span m='360300'>a</span>
  <span m='360350'>prime.</span> <span m='361460'>Prime</span> <span m='361880'>has</span>
  <span m='362120'>to</span> <span m='362240'>be</span> <span m='364250'>bigger</span>
  <span m='364670'>than</span> <span m='365060'>U,</span> <span m='366130'>maybe</span>
  <span m='366290'>bigger</span> <span m='366710'>or</span> <span m='366995'>equal
  is</span> <span m='367280'>fine.</span> <span m='373220'>Universe.</span> <span
  m='374690'>And</span> <span m='374840'>then</span> <span m='375020'>you</span> <span
  m='375110'>take</span> <span m='375290'>the</span> <span m='375380'>whole</span>
  <span m='375560'>thing</span> <span m='375770'>modulo</span> <span m='376130'>em,</span>
  </p><p><span m='377270'>Now,</span> <span m='377390'>this</span> <span m='378200'>is</span>
  <span m='378350'>universal</span> <span m='378800'>but</span> <span m='378980'>it</span>
  <span m='379040'>loses</span> <span m='379460'>a</span> <span m='379520'>factor</span>
  <span m='379880'>of</span> <span m='380150'>2</span> <span m='380420'>here,</span>
  <span m='380690'>I</span> <span m='380750'>believe,</span> <span m='381550'>in</span>
  <span m='381620'>general.</span> <span m='381950'>Because</span> <span m='383360'>you</span>
  <span m='383510'>take</span> <span m='383750'>things</span> <span m='383990'>modulo</span>
  <span m='384380'>prime</span> <span m='385760'>and</span> <span m='385880'>then</span>
  <span m='386060'>you</span> <span m='386150'>take</span> <span m='386360'>things</span>
  <span m='386540'>modulo</span> <span m='387020'>whatever</span> <span m='387320'>your</span>
  <span m='387440'>table</span> <span m='387740'>size</span> <span m='388110'>is.</span>
  <span m='388310'>If</span> <span m='388460'>you</span> <span m='388520'>set</span>
  <span m='388700'>your</span> <span m='388820'>table</span> <span m='389120'>size</span>
  <span m='389360'>to</span> <span m='389470'>p</span> <span m='389690'>that's</span>
  <span m='390020'>great.</span> <span m='390970'>I</span> <span m='391100'>think</span>
  <span m='391360'>you</span> <span m='391450'>get</span> <span m='391580'>a</span>
  <span m='391700'>factor</span> <span m='392030'>of</span> <span m='392120'>1.</span>
  </p><p><span m='392750'>If</span> <span m='392900'>you</span> <span m='392990'>don't,</span>
  <span m='394750'>you're</span> <span m='395000'>essentially</span> <span m='395660'>losing</span>
  <span m='396350'>possibly</span> <span m='396800'>half</span> <span m='397070'>the</span>
  <span m='397190'>slots,</span> <span m='399170'>depending</span> <span m='399560'>on</span>
  <span m='399650'>how</span> <span m='399960'>m</span> <span m='399980'>and</span>
  <span m='400200'>p</span> <span m='400820'>are</span> <span m='401780'>related</span>
  <span m='402050'>to</span> <span m='402170'>each</span> <span m='402320'>other.</span>
  <span m='403040'>So</span> <span m='403870'>it's</span> <span m='404000'>OK,</span>
  <span m='405560'>but</span> <span m='405740'>not</span> <span m='405920'>great.</span>
  <span m='408890'>It's</span> <span m='409010'>also</span> <span m='409250'>considered</span>
  <span m='409640'>expensive</span> <span m='410150'>because</span> <span m='410300'>you</span>
  <span m='410360'>have</span> <span m='410570'>do all</span> <span m='410690'>this</span>
  <span m='410810'>division,</span> <span m='412150'>which</span> <span m='412550'>people</span>
  <span m='412760'>don't</span> <span m='412940'>like</span> <span m='413090'>to</span>
  <span m='413210'>do.</span> </p><p><span m='414290'>So</span> <span m='414560'>there's</span>
  <span m='414770'>a</span> <span m='414830'>fancier</span> <span m='415280'>method</span>
  <span m='416570'>which</span> <span m='416900'>is</span> <span m='418490'>a</span>
  <span m='418970'>times</span> <span m='419640'>x</span> <span m='420920'>shifted</span>
  <span m='421460'>right</span> <span m='422390'>by</span> <span m='424070'>log</span>
  <span m='424790'>u</span> <span m='427400'>minus</span> <span m='428180'>log</span>
  <span m='428550'>m.</span> <span m='432180'>This</span> <span m='432420'>is</span>
  <span m='432570'>when</span> <span m='433680'>m</span> <span m='434670'>and</span>
  <span m='434940'>u</span> <span m='436200'>are</span> <span m='436320'>powers</span>
  <span m='436770'>of</span> <span m='436890'>2,</span> <span m='438450'>which</span>
  <span m='438660'>is</span> <span m='438820'>the</span> <span m='438900'>case</span>
  <span m='439230'>we</span> <span m='439350'>kind</span> <span m='439530'>of</span>
  <span m='439590'>care</span> <span m='439830'>about.</span> <span m='440100'>Usually</span>
  <span m='440460'>your</span> <span m='440830'>universe</span> <span m='441185'>is</span>
  <span m='443640'>of</span> <span m='443760'>size</span> <span m='444150'>2</span>
  <span m='444380'>to</span> <span m='444540'>the</span> <span m='444870'>word</span>
  <span m='445170'>size</span> <span m='445500'>of</span> <span m='445620'>your</span>
  <span m='445710'>machine,</span> <span m='446220'>2</span> <span m='446400'>to</span>
  <span m='446540'>the</span> <span m='446610'>32,</span> <span m='446910'>2</span>
  <span m='447210'>to</span> <span m='447420'>the</span> <span m='447510'>64,</span>
  <span m='448180'>however</span> <span m='448430'>bigger</span> <span m='448710'>integers</span>
  <span m='449130'>are.</span> </p><p><span m='450300'>So</span> <span m='450480'>it's</span>
  <span m='450600'>usually</span> <span m='450840'>a</span> <span m='450870'>power</span>
  <span m='451080'>of</span> <span m='451170'>2.</span> <span m='451410'>It's</span>
  <span m='451650'>fine</span> <span m='451920'>to</span> <span m='452040'>make</span>
  <span m='452190'>your</span> <span m='452310'>table</span> <span m='452610'>a</span>
  <span m='452670'>power</span> <span m='452940'>of</span> <span m='453030'>2.</span>
  <span m='453180'>We're</span> <span m='453300'>probably</span> <span m='453570'>going</span>
  <span m='453690'>to</span> <span m='453960'>use</span> <span m='454140'>table</span>
  <span m='454440'>doubling.</span> <span m='456000'>So</span> <span m='457710'>you</span>
  <span m='457950'>just</span> <span m='458160'>multiply</span> <span m='459090'>and</span>
  <span m='459210'>then</span> <span m='459390'>take</span> <span m='459600'>the</span>
  <span m='459690'>high</span> <span m='459870'>order</span> <span m='460110'>bits,</span>
  <span m='460680'>that's</span> <span m='460830'>what</span> <span m='460950'>this</span>
  <span m='461130'>is</span> <span m='461190'>saying.</span> </p><p><span m='462760'>So</span>
  <span m='462780'>this</span> <span m='462960'>is</span> <span m='463110'>a</span>
  <span m='463170'>method</span> <span m='464080'>more</span> <span m='464220'>recent,</span>
  <span m='464550'>1997.</span> <span m='466200'>Whereas</span> <span m='466380'>this</span>
  <span m='466500'>one</span> <span m='466620'>goes</span> <span m='466800'>back</span>
  <span m='467100'>to</span> <span m='467280'>1979.</span> <span m='469500'>So</span>
  <span m='470280'>'79,</span> <span m='471090'>'97.</span> <span m='473580'>And</span>
  <span m='473820'>it's</span> <span m='473970'>also</span> <span m='475140'>universal.</span>
  </p><p><span m='477210'>There's</span> <span m='477390'>a</span> <span m='477450'>lot</span>
  <span m='477630'>of</span> <span m='477720'>universal</span> <span m='478140'>hash</span>
  <span m='478320'>functions.</span> <span m='478820'>I'm not</span> <span m='478920'>going</span>
  <span m='479040'>to</span> <span m='479670'>list</span> <span m='479850'>them</span>
  <span m='480000'>all.</span> <span m='480540'>I'd</span> <span m='480720'>rather</span>
  <span m='480960'>get</span> <span m='481170'>to</span> <span m='482010'>stronger</span>
  <span m='482760'>properties</span> <span m='483330'>than</span> <span m='483480'>universality.</span>
  </p><p><span m='485460'>So</span> <span m='485630'>the</span> <span m='485670'>next</span>
  <span m='485940'>one</span> <span m='486120'>is</span> <span m='486240'>called</span>
  <span m='486540'>k-wise</span> <span m='487390'>independence.</span> <span m='494400'>This</span>
  <span m='494550'>is</span> <span m='494730'>harder</span> <span m='495090'>to</span>
  <span m='495360'>obtain.</span> <span m='497780'>And</span> <span m='497910'>it</span>
  <span m='498000'>implies</span> <span m='498510'>universality.</span> <span m='501600'>So</span>
  <span m='501840'>we</span> <span m='501960'>want</span> <span m='502290'>a</span>
  <span m='502350'>family</span> <span m='502710'>of</span> <span m='502800'>hash</span>
  <span m='503070'>functions</span> <span m='506520'>such</span> <span m='506910'>that--</span>
  </p><p><span m='534600'>Maybe</span> <span m='534810'>let's</span> <span m='535010'>start</span>
  <span m='535250'>with</span> <span m='535340'>just</span> <span m='535760'>pairwise</span>
  <span m='536210'>independence,</span> <span m='536720'>k</span> <span m='537110'>equals</span>
  <span m='537470'>2.</span> <span m='538480'>Then</span> <span m='538700'>what</span>
  <span m='538820'>this</span> <span m='538970'>is</span> <span m='539060'>saying</span>
  <span m='539300'>is</span> <span m='539420'>the</span> <span m='539510'>probability</span>
  <span m='540140'>of</span> <span m='540440'>your</span> <span m='540620'>choice</span>
  <span m='540890'>of</span> <span m='540980'>hash</span> <span m='541220'>function,</span>
  <span m='542240'>that</span> <span m='542780'>the</span> <span m='542900'>first</span>
  <span m='543230'>key</span> <span m='543440'>maps</span> <span m='543740'>to</span>
  <span m='544310'>this</span> <span m='544560'>slot,</span> <span m='545000'>t1,</span>
  <span m='545960'>and</span> <span m='546260'>the</span> <span m='546350'>second</span>
  <span m='546680'>key</span> <span m='546920'>maps</span> <span m='547250'>to</span>
  <span m='547730'>some</span> <span m='547970'>other</span> <span m='548150'>slot,</span>
  <span m='548450'>t2.</span> <span m='549920'>For</span> <span m='550100'>any</span>
  <span m='550310'>two</span> <span m='550520'>keys</span> <span m='551380'>x1</span>
  <span m='552360'>and</span> <span m='552900'>xk.</span> <span m='556070'>If</span>
  <span m='556220'>your</span> <span m='556430'>function</span> <span m='557060'>was</span>
  <span m='557270'>random</span> <span m='559100'>each</span> <span m='559310'>of</span>
  <span m='559370'>those</span> <span m='559580'>happens</span> <span m='559940'>with</span>
  <span m='560030'>probability</span> <span m='560510'>1 over</span> <span m='560840'>m,</span>
  <span m='561080'>they're</span> <span m='561200'>independent.</span> <span m='562070'>So</span>
  <span m='562190'>you</span> <span m='562250'>get</span> <span m='562400'>1</span>
  <span m='562550'>over</span> <span m='562690'>m</span> <span m='562840'>to</span>
  <span m='562950'>the</span> <span m='563030'>k,</span> <span m='564500'>or</span>
  <span m='564650'>1</span> <span m='564800'>over</span> <span m='564860'>m</span>
  <span m='565040'>squared</span> <span m='565430'>for</span> <span m='565860'>k equals</span>
  <span m='566190'>2.</span> </p><p><span m='568340'>Even</span> <span m='568670'>in</span>
  <span m='568790'>that</span> <span m='568940'>situation</span> <span m='569510'>that's</span>
  <span m='569750'>different</span> <span m='570170'>from</span> <span m='570350'>saying</span>
  <span m='570590'>the</span> <span m='570680'>probability</span> <span m='571160'>of</span>
  <span m='571280'>2</span> <span m='571520'>keys</span> <span m='571850'>being</span>
  <span m='572150'>equal</span> <span m='573200'>is</span> <span m='573470'>1</span>
  <span m='573650'>over</span> <span m='573840'>m.</span> <span m='574460'>This</span>
  <span m='574820'>would</span> <span m='575030'>imply</span> <span m='576020'>that.</span>
  <span m='576380'>But</span> <span m='577070'>here</span> <span m='577340'>there</span>
  <span m='577490'>could</span> <span m='577700'>still</span> <span m='577910'>be</span>
  <span m='578030'>some</span> <span m='578210'>co-dependence</span> <span m='578810'>between</span>
  <span m='579110'>x</span> <span m='579320'>and</span> <span m='579410'>y.</span>
  <span m='580320'>Here</span> <span m='581230'>there</span> <span m='581450'>essentially</span>
  <span m='581840'>can't</span> <span m='582170'>be.</span> <span m='582590'>I</span>
  <span m='582710'>mean,</span> <span m='582860'>other</span> <span m='583040'>than</span>
  <span m='583190'>this</span> <span m='583460'>constant</span> <span m='583790'>factor.</span>
  </p><p><span m='586160'>Pairwise</span> <span m='586580'>independence</span> <span
  m='587120'>means</span> <span m='587690'>every</span> <span m='587990'>two</span>
  <span m='588290'>guys</span> <span m='588650'>are</span> <span m='588710'>independent,</span>
  <span m='589130'>k-wise</span> <span m='589670'>means</span> <span m='589880'>every</span>
  <span m='590090'>k</span> <span m='590300'>guys</span> <span m='590540'>are</span>
  <span m='590600'>independent</span> <span m='591640'>up</span> <span m='591830'>to</span>
  <span m='591980'>the</span> <span m='592100'>constant</span> <span m='592400'>factor.</span>
  <span m='595010'>So</span> <span m='595220'>this</span> <span m='595430'>is</span>
  <span m='595670'>for</span> <span m='596840'>distinct</span> <span m='600380'>xi's.</span>
  <span m='603770'>Obviously</span> <span m='604280'>if</span> <span m='604400'>two</span>
  <span m='604580'>of</span> <span m='604640'>them</span> <span m='604760'>are</span>
  <span m='604820'>equal</span> <span m='605260'>they're</span> <span m='605720'>very</span>
  <span m='605930'>likely</span> <span m='606260'>to</span> <span m='606350'>hash</span>
  <span m='606740'>to the</span> <span m='606800'>same</span> <span m='608210'>slot.</span>
  <span m='608690'>So</span> <span m='608960'>you've</span> <span m='609020'>got</span>
  <span m='609130'>to</span> <span m='609260'>forbid</span> <span m='609590'>that.</span>
  </p><p><span m='611830'>OK,</span> <span m='612440'>so</span> <span m='612950'>an</span>
  <span m='613070'>example</span> <span m='613550'>of</span> <span m='613700'>such</span>
  <span m='613940'>a</span> <span m='614000'>hash</span> <span m='614210'>function.</span>
  <span m='619130'>Here</span> <span m='619430'>we</span> <span m='619580'>just</span>
  <span m='619820'>took</span> <span m='620960'>a</span> <span m='621470'>product.</span>
  <span m='622820'>In</span> <span m='622910'>general</span> <span m='623300'>you</span>
  <span m='623540'>can</span> <span m='623750'>take</span> <span m='624290'>a</span>
  <span m='624470'>polynomial</span> <span m='632610'>of</span> <span m='632810'>degree</span>
  <span m='633170'>k</span> <span m='633410'>minus</span> <span m='633710'>1.</span>
  <span m='635180'>Evaluate</span> <span m='635720'>that</span> <span m='635930'>mod</span>
  <span m='636220'>p.</span> <span m='639200'>And</span> <span m='640010'>then</span>
  <span m='640400'>if</span> <span m='640520'>you</span> <span m='640640'>want</span>
  <span m='641210'>some,</span> <span m='643470'>modulo</span> <span m='643670'>that</span>
  <span m='643850'>to</span> <span m='644000'>your</span> <span m='644240'>table</span>
  <span m='644570'>size.</span> </p><p><span m='647300'>So</span> <span m='647510'>in</span>
  <span m='647600'>particular</span> <span m='648010'>if k</span> <span m='648170'>equals</span>
  <span m='648440'>2,</span> <span m='648680'>we</span> <span m='648800'>actually</span>
  <span m='649070'>have</span> <span m='649190'>to</span> <span m='649280'>do</span>
  <span m='649430'>some</span> <span m='649640'>work.</span> <span m='649910'>This</span>
  <span m='650300'>function</span> <span m='650780'>is</span> <span m='650990'>not</span>
  <span m='653420'>pairwise</span> <span m='653810'>independent,</span> <span m='654410'>it</span>
  <span m='654530'>is</span> <span m='654650'>universal.</span> <span m='655740'>If</span>
  <span m='655840'>you</span> <span m='655940'>make it</span> <span m='656090'>ax</span>
  <span m='656390'>plus</span> <span m='656660'>b</span> <span m='657050'>for</span>
  <span m='657230'>random</span> <span m='657590'>a</span> <span m='657800'>and</span>
  <span m='658010'>b,</span> <span m='658790'>then</span> <span m='659030'>this</span>
  <span m='659210'>becomes</span> <span m='659870'>pairwise</span> <span m='660320'>independent.</span>
  <span m='660890'>In</span> <span m='660980'>general,</span> <span m='662090'>you</span>
  <span m='662190'>want</span> <span m='663050'>three</span> <span m='663380'>wise</span>
  <span m='663710'>independent,</span> <span m='664340'>triple</span> <span m='664680'>wise</span>
  <span m='665030'>independent,</span> <span m='665510'>you</span> <span m='665630'>need</span>
  <span m='667130'>ax</span> <span m='667610'>squared</span> <span m='668000'>plus</span>
  <span m='668330'>bx</span> <span m='669140'>plus</span> <span m='669380'>c</span>
  <span m='670040'>for</span> <span m='670250'>random</span> <span m='670610'>a,</span>
  <span m='670730'>b's,</span> <span m='670970'>and</span> <span m='671060'>c's.</span>
  <span m='673250'>So</span> <span m='673460'>these</span> <span m='673700'>are</span>
  <span m='673880'>arbitrary</span> <span m='674390'>numbers</span> <span m='677540'>between</span>
  <span m='678080'>0</span> <span m='678410'>and</span> <span m='678500'>p,</span>
  <span m='678860'>I</span> <span m='679220'>guess.</span> </p><p><span m='685140'>OK.</span>
  <span m='686350'>This</span> <span m='686610'>is</span> <span m='686730'>also</span>
  <span m='687000'>old,</span> <span m='688320'>1981.</span> <span m='689870'>Wegman</span>
  <span m='690490'>and</span> <span m='690660'>Carter</span> <span m='692040'>introduced</span>
  <span m='692460'>these</span> <span m='692610'>two</span> <span m='692790'>notions</span>
  <span m='693300'>in</span> <span m='693440'>a</span> <span m='693490'>couple</span>
  <span m='693700'>of</span> <span m='693740'>different</span> <span m='693960'>papers.</span>
  <span m='694830'>This</span> <span m='695130'>is an</span> <span m='695280'>old</span>
  <span m='695490'>idea.</span> <span m='697620'>This</span> <span m='697830'>is,</span>
  <span m='697920'>of</span> <span m='698040'>course,</span> <span m='698490'>expensive</span>
  <span m='699180'>in</span> <span m='699270'>that</span> <span m='699480'>we</span>
  <span m='699660'>pay</span> <span m='700050'>order</span> <span m='700290'>k</span>
  <span m='701340'>time</span> <span m='701670'>to</span> <span m='701790'>evaluate</span>
  <span m='702270'>it.</span> </p><p><span m='703500'>Also,</span> <span m='704550'>there's</span>
  <span m='704700'>a</span> <span m='704760'>lot</span> <span m='704970'>of</span>
  <span m='705090'>multiplications</span> <span m='706050'>and</span> <span m='706170'>you</span>
  <span m='706230'>have</span> <span m='706320'>to</span> <span m='706410'>do</span>
  <span m='706500'>everything</span> <span m='706930'>modulo</span> <span m='707050'>p.</span>
  <span m='707820'>So</span> <span m='707910'>a</span> <span m='707940'>lot</span>
  <span m='708030'>of</span> <span m='708090'>people</span> <span m='708300'>have</span>
  <span m='708420'>worked</span> <span m='708660'>on</span> <span m='708900'>more</span>
  <span m='709080'>efficient</span> <span m='709470'>ways</span> <span m='709740'>to</span>
  <span m='709860'>do</span> <span m='710010'>k-wise</span> <span m='710430'>independence.</span>
  <span m='711780'>And</span> <span m='711930'>there</span> <span m='712080'>two</span>
  <span m='712530'>main</span> <span m='712770'>results</span> <span m='713160'>on</span>
  <span m='713280'>this.</span> <span m='714780'>Both</span> <span m='715050'>of</span>
  <span m='715110'>them</span> <span m='715290'>achieve</span> <span m='716105'>m</span>
  <span m='716370'>to</span> <span m='716640'>the</span> <span m='716760'>epsilon</span>
  <span m='717210'>space,</span> <span m='719000'>is</span> <span m='719130'>not</span>
  <span m='719400'>great.</span> </p><p><span m='731840'>One</span> <span m='732020'>of</span>
  <span m='732110'>them</span> <span m='732260'>the</span> <span m='732350'>query</span>
  <span m='733520'>time</span> <span m='733760'>depends</span> <span m='734180'>on</span>
  <span m='734330'>k,</span> <span m='736580'>and</span> <span m='736850'>it's</span>
  <span m='737060'>uniform,</span> <span m='740210'>and</span> <span m='740570'>reasonably</span>
  <span m='741080'>practical</span> <span m='744255'>[? with ?]</span> <span m='744740'>experiments.</span>
  <span m='746450'>The</span> <span m='746600'>other</span> <span m='746780'>one</span>
  <span m='748130'>is</span> <span m='748610'>constant</span> <span m='749190'>query</span>
  <span m='756100'>for</span> <span m='756350'>a</span> <span m='756460'>logarithmic</span>
  <span m='757020'>independence.</span> </p><p><span m='767860'>So</span> <span m='768070'>this</span>
  <span m='768190'>one</span> <span m='768820'>is</span> <span m='769060'>actually</span>
  <span m='769480'>later.</span> <span m='769840'>It's</span> <span m='769990'>by</span>
  <span m='770440'>Thorpe</span> <span m='770890'>and</span> <span m='771430'>[? Tsang.
  ?]</span> <span m='772210'>And</span> <span m='772440'>this</span> <span m='772570'>is</span>
  <span m='772630'>by</span> <span m='772780'>Siegel.</span> <span m='774610'>Both</span>
  <span m='774850'>2004,</span> <span m='776750'>so</span> <span m='776950'>fairly</span>
  <span m='777250'>recent.</span> </p><p><span m='779800'>It</span> <span m='779950'>takes</span>
  <span m='780190'>a</span> <span m='780220'>fair</span> <span m='780370'>amount</span>
  <span m='780550'>of</span> <span m='780610'>space.</span> <span m='781960'>This</span>
  <span m='782140'>paper</span> <span m='782530'>proves</span> <span m='782980'>that</span>
  <span m='783640'>to</span> <span m='783730'>get</span> <span m='783910'>constant</span>
  <span m='784270'>query</span> <span m='784630'>time</span> <span m='784930'>for</span>
  <span m='785050'>logarithmic</span> <span m='785560'>independence</span> <span m='786100'>you'd</span>
  <span m='786240'>need</span> <span m='787030'>quite</span> <span m='787300'>a</span>
  <span m='787360'>bit</span> <span m='787450'>of</span> <span m='787510'>space</span>
  <span m='787930'>to</span> <span m='788080'>store</span> <span m='788590'>your</span>
  <span m='788710'>hash</span> <span m='788950'>function.</span> <span m='789640'>Keep</span>
  <span m='789820'>in</span> <span m='789910'>mind,</span> <span m='790120'>these</span>
  <span m='790330'>hash</span> <span m='790570'>functions</span> <span m='790960'>only</span>
  <span m='791170'>take--</span> <span m='793330'>well</span> <span m='793420'>this</span>
  <span m='793570'>is</span> <span m='793660'>like</span> <span m='793840'>k</span>
  <span m='794105'>log</span> <span m='794370'>in</span> <span m='794800'>bits</span>
  <span m='795160'>to</span> <span m='795310'>store.</span> <span m='796660'>So</span>
  <span m='797310'>this</span> <span m='797510'>is</span> <span m='797830'>words</span>
  <span m='798190'>of</span> <span m='798250'>space.</span> </p><p><span m='798920'>So</span>
  <span m='799900'>here</span> <span m='800050'>we're</span> <span m='800110'>only</span>
  <span m='800560'>spending</span> <span m='800920'>k</span> <span m='801760'>words</span>
  <span m='802720'>to</span> <span m='802870'>store</span> <span m='803080'>this</span>
  <span m='803230'>hash</span> <span m='803470'>function.</span> <span m='803740'>It's</span>
  <span m='803830'>very</span> <span m='803980'>small.</span> <span m='804360'>Here</span>
  <span m='804550'>you</span> <span m='804610'>need</span> <span m='804760'>something</span>
  <span m='805090'>depending</span> <span m='805420'>on</span> <span m='805540'>n,</span>
  <span m='805750'>which</span> <span m='805900'>is</span> <span m='805990'>kind</span>
  <span m='806170'>of</span> <span m='806230'>annoying,</span> <span m='806720'>especially</span>
  <span m='807010'>if you want</span> <span m='807160'>to</span> <span m='807220'>be</span>
  <span m='807340'>dynamic.</span> <span m='809290'>But</span> <span m='809860'>statically</span>
  <span m='811000'>you</span> <span m='811120'>can</span> <span m='811210'>get</span>
  <span m='811360'>constant</span> <span m='811840'>query</span> <span m='812860'>logarithmic</span>
  <span m='813630'>wise</span> <span m='813920'>independence,</span> <span m='814720'>but</span>
  <span m='814870'>you</span> <span m='815020'>have</span> <span m='815140'>to</span>
  <span m='815230'>pay</span> <span m='815440'>a</span> <span m='815470'>lot</span>
  <span m='815770'>in</span> <span m='815920'>space.</span> </p><p><span m='820270'>There's</span>
  <span m='820450'>more</span> <span m='820600'>practical</span> <span m='820990'>methods.</span>
  <span m='821290'>This</span> <span m='821440'>is</span> <span m='821560'>especially</span>
  <span m='822040'>practical</span> <span m='822580'>for</span> <span m='822730'>k</span>
  <span m='823010'>equals</span> <span m='823570'>5,</span> <span m='824930'>which</span>
  <span m='825010'>is</span> <span m='825150'>a</span> <span m='825220'>case</span>
  <span m='826090'>that</span> <span m='826240'>we'll</span> <span m='826330'>see</span>
  <span m='826510'>is</span> <span m='826690'>of</span> <span m='826840'>interest.</span>
  <span m='830010'>Cool.</span> <span m='832030'>So</span> <span m='832210'>this</span>
  <span m='832420'>much</span> <span m='832660'>space</span> <span m='832960'>is</span>
  <span m='833050'>necessary</span> <span m='834070'>if</span> <span m='834160'>you</span>
  <span m='834280'>want.</span> <span m='835000'>We'll</span> <span m='835210'>see</span>
  <span m='835640'>log</span> <span m='836020'>wise</span> <span m='836230'>independence</span>
  <span m='836710'>is</span> <span m='836800'>the</span> <span m='836920'>most</span>
  <span m='837160'>we'll</span> <span m='837340'>ever</span> <span m='837940'>require</span>
  <span m='838690'>in</span> <span m='838840'>this</span> <span m='840610'>class.</span>
  <span m='845040'>And</span> <span m='845280'>as</span> <span m='845340'>far</span>
  <span m='845520'>as</span> <span m='845610'>I</span> <span m='845700'>know,</span>
  <span m='845880'>in</span> <span m='846000'>hashing</span> <span m='846360'>in</span>
  <span m='846450'>general.</span> <span m='846820'>So</span> <span m='847050'>you</span>
  <span m='847110'>don't</span> <span m='847260'>need</span> <span m='847380'>to</span>
  <span m='847530'>worry</span> <span m='847710'>about</span> <span m='847950'>more</span>
  <span m='848190'>than</span> <span m='848370'>log</span> <span m='848580'>wise</span>
  <span m='849400'>independence.</span> </p><p><span m='851982'>All</span> <span m='852440'>right,</span>
  <span m='854160'>one</span> <span m='854430'>more</span> <span m='854580'>hashing</span>
  <span m='854910'>scheme.</span> <span m='857555'>It's</span> <span m='857990'>called</span>
  <span m='858540'>simple</span> <span m='860190'>tabulation</span> <span m='860820'>hashing.</span>
  <span m='872730'>This</span> <span m='873020'>is</span> <span m='874780'>a</span>
  <span m='874890'>simple</span> <span m='875400'>idea.</span> <span m='875790'>It</span>
  <span m='875850'>goes</span> <span m='876300'>also</span> <span m='876570'>back</span>
  <span m='876750'>to</span> <span m='876840'>'81</span> <span m='879210'>but</span>
  <span m='879390'>it's</span> <span m='879480'>just</span> <span m='879660'>been</span>
  <span m='879780'>analyzed</span> <span m='880200'>last</span> <span m='880470'>year.</span>
  <span m='882740'>So</span> <span m='882760'>there's</span> <span m='882900'>a</span>
  <span m='882930'>lot</span> <span m='883110'>of</span> <span m='883230'>results</span>
  <span m='883590'>to</span> <span m='883680'>report</span> <span m='884100'>on</span>
  <span m='884340'>it.</span> </p><p><span m='887000'>The</span> <span m='887040'>idea</span>
  <span m='887220'>is</span> <span m='887370'>just</span> <span m='887520'>take</span>
  <span m='887820'>your</span> <span m='888440'>integer,</span> <span m='889500'>split</span>
  <span m='889950'>it</span> <span m='890070'>up</span> <span m='890310'>into</span>
  <span m='890910'>some</span> <span m='891150'>base</span> <span m='894330'>so</span>
  <span m='894510'>that</span> <span m='894660'>there's</span> <span m='894840'>exactly</span>
  <span m='895720'>c</span> <span m='897510'>characters.</span> <span m='898720'>c</span>
  <span m='898830'>is</span> <span m='899010'>going</span> <span m='899190'>to</span>
  <span m='899250'>be</span> <span m='899340'>a</span> <span m='899370'>constant.</span>
  <span m='901050'>Then</span> <span m='901290'>build</span> <span m='901920'>a</span>
  <span m='902100'>totally</span> <span m='902640'>random</span> <span m='906840'>hash</span>
  <span m='907140'>table.</span> <span m='908070'>This</span> <span m='908220'>is</span>
  <span m='908400'>the</span> <span m='908520'>thing</span> <span m='908760'>that</span>
  <span m='908910'>we</span> <span m='909060'>couldn't</span> <span m='909330'>afford.</span>
  <span m='911070'>But</span> <span m='911250'>we're</span> <span m='911370'>just</span>
  <span m='911520'>going</span> <span m='911660'>to</span> <span m='911730'>do</span>
  <span m='911850'>it</span> <span m='911970'>on</span> <span m='912150'>each</span>
  <span m='912360'>character.</span> </p><p><span m='921460'>So</span> <span m='921660'>there's</span>
  <span m='921760'>going</span> <span m='921880'>to</span> <span m='921980'>be</span>
  <span m='922090'>c</span> <span m='922360'>of</span> <span m='922450'>these</span>
  <span m='922630'>hash</span> <span m='922900'>tables.</span> <span m='926290'>And</span>
  <span m='926440'>each</span> <span m='926680'>of</span> <span m='926740'>them</span>
  <span m='926920'>is</span> <span m='927040'>going</span> <span m='927180'>to</span>
  <span m='927250'>have</span> <span m='927520'>size</span> <span m='929190'>u</span>
  <span m='929750'>to</span> <span m='930010'>the</span> <span m='930130'>1</span>
  <span m='930370'>over</span> <span m='930630'>c.</span> <span m='933130'>So</span>
  <span m='933250'>essentially</span> <span m='933640'>we're</span> <span m='933790'>getting</span>
  <span m='935020'>u</span> <span m='935260'>to</span> <span m='935380'>the</span>
  <span m='935470'>epsilon</span> <span m='936030'>space,</span> <span m='937630'>which</span>
  <span m='937870'>is</span> <span m='937960'>similar</span> <span m='938380'>to</span>
  <span m='938530'>these</span> <span m='938710'>space</span> <span m='939070'>bounds.</span>
  <span m='940030'>So</span> <span m='940270'>again,</span> <span m='940510'>not</span>
  <span m='940720'>great,</span> <span m='941650'>but</span> <span m='943240'>it's</span>
  <span m='943510'>a</span> <span m='943600'>really</span> <span m='944050'>simple</span>
  <span m='944440'>hash</span> <span m='944680'>function.</span> <span m='947920'>Hash</span>
  <span m='948160'>function</span> <span m='948630'>is</span> <span m='948820'>just</span>
  <span m='948970'>going</span> <span m='949120'>to</span> <span m='949210'>be</span>
  <span m='950860'>you</span> <span m='951730'>take</span> <span m='951940'>your</span>
  <span m='952060'>first</span> <span m='952330'>table,</span> <span m='952780'>apply</span>
  <span m='953170'>it</span> <span m='953260'>to</span> <span m='953380'>the</span>
  <span m='953470'>first</span> <span m='953740'>character,</span> <span m='954790'>x</span>
  <span m='955090'>over</span> <span m='955300'>that,</span> <span m='956110'>with</span>
  <span m='956740'>the</span> <span m='956860'>second</span> <span m='958000'>table</span>
  <span m='958390'>applied</span> <span m='958690'>to</span> <span m='958780'>the</span>
  <span m='958840'>second</span> <span m='959140'>character,</span> <span m='960220'>and</span>
  <span m='960370'>so</span> <span m='960610'>on</span> <span m='961870'>through</span>
  <span m='962080'>all</span> <span m='962200'>the</span> <span m='962290'>characters.</span>
  </p><p><span m='966260'>So</span> <span m='966360'>the</span> <span m='966460'>nice</span>
  <span m='966520'>thing</span> <span m='966670'>about</span> <span m='966850'>this</span>
  <span m='967060'>is</span> <span m='967210'>it's</span> <span m='967330'>super</span>
  <span m='967900'>simple.</span> <span m='969020'>You</span> <span m='969120'>can</span>
  <span m='969130'>imagine</span> <span m='969460'>this</span> <span m='969610'>being</span>
  <span m='969970'>done</span> <span m='970330'>probably</span> <span m='970660'>in</span>
  <span m='970750'>one</span> <span m='971560'>instruction</span> <span m='972160'>on</span>
  <span m='972280'>a</span> <span m='972340'>fancy</span> <span m='972770'>CPU.</span>
  <span m='974800'>if</span> <span m='974890'>you</span> <span m='975850'>convince</span>
  <span m='976180'>people</span> <span m='976420'>this</span> <span m='976630'>is</span>
  <span m='976750'>a</span> <span m='976810'>cool</span> <span m='977000'>enough</span>
  <span m='977240'>instruction</span> <span m='977470'>to</span> <span m='977670'>have.</span>
  <span m='977970'>It's</span> <span m='978100'>very</span> <span m='978370'>simple</span>
  <span m='978640'>to</span> <span m='978730'>implement</span> <span m='979140'>circuit</span>
  <span m='979580'>wide.</span> <span m='981940'>But</span> <span m='982150'>in</span>
  <span m='982300'>our</span> <span m='982420'>model</span> <span m='984130'>you</span>
  <span m='984220'>have</span> <span m='984340'>to</span> <span m='984430'>do</span>
  <span m='984550'>all</span> <span m='984640'>these</span> <span m='984790'>operations</span>
  <span m='985270'>separately.</span> <span m='986100'>You're</span> <span m='986380'>going</span>
  <span m='986490'>to</span> <span m='986560'>take</span> <span m='986770'>orders</span>
  <span m='987010'>c</span> <span m='987370'>time</span> <span m='987850'>to</span>
  <span m='988000'>compute.</span> </p><p><span m='990700'>And</span> <span m='991480'>one</span>
  <span m='991690'>thing</span> <span m='991870'>that's</span> <span m='992080'>known</span>
  <span m='992320'>about</span> <span m='992650'>it</span> <span m='992770'>is</span>
  <span m='993010'>that</span> <span m='993160'>it's</span> <span m='993340'>three</span>
  <span m='993580'>independent,</span> <span m='997900'>three</span> <span m='998110'>wise</span>
  <span m='998350'>independent.</span> <span m='999340'>So</span> <span m='999490'>it</span>
  <span m='999550'>does</span> <span m='999730'>kind</span> <span m='999940'>of</span>
  <span m='1000000'>fit</span> <span m='1000210'>in</span> <span m='1000300'>this</span>
  <span m='1000450'>model.</span> <span m='1001310'>But</span> <span m='1001410'>three</span>
  <span m='1001620'>wise</span> <span m='1001830'>independence</span> <span m='1002310'>is</span>
  <span m='1002430'>not</span> <span m='1002580'>very</span> <span m='1002730'>impressive.</span>
  <span m='1004140'>A</span> <span m='1004170'>lot</span> <span m='1004380'>of</span>
  <span m='1004440'>the</span> <span m='1004500'>results</span> <span m='1004830'>we'll</span>
  <span m='1004920'>see</span> <span m='1005100'>require</span> <span m='1005550'>log</span>
  <span m='1005890'>n</span> <span m='1006480'>independence.</span> <span m='1007740'>But</span>
  <span m='1008490'>the</span> <span m='1008610'>cool</span> <span m='1008820'>thing</span>
  <span m='1009120'>is,</span> <span m='1009490'>roughly</span> <span m='1009900'>speaking</span>
  <span m='1011040'>simple</span> <span m='1011430'>tabulation</span> <span m='1011970'>hashing</span>
  <span m='1012390'>is</span> <span m='1012540'>almost</span> <span m='1012990'>as</span>
  <span m='1013140'>good</span> <span m='1013380'>as</span> <span m='1013530'>log</span>
  <span m='1013830'>n</span> <span m='1014000'>wise</span> <span m='1014250'>independence</span>
  <span m='1014830'>in</span> <span m='1014940'>all</span> <span m='1015060'>the</span>
  <span m='1015180'>hashing</span> <span m='1015510'>schemes</span> <span m='1015960'>that</span>
  <span m='1016170'>we</span> <span m='1017040'>care</span> <span m='1017370'>about.</span>
  <span m='1018280'>And</span> <span m='1018300'>so</span> <span m='1019500'>we'll</span>
  <span m='1019800'>get</span> <span m='1019980'>there,</span> <span m='1020970'>exactly</span>
  <span m='1021330'>what</span> <span m='1021480'>that</span> <span m='1021630'>means.</span>
  </p><p><span m='1024950'>So</span> <span m='1025510'>that</span> <span m='1025750'>was</span>
  <span m='1025930'>my</span> <span m='1026470'>overview</span> <span m='1026950'>of</span>
  <span m='1027010'>some</span> <span m='1027220'>hash</span> <span m='1027460'>functions,</span>
  <span m='1027970'>these</span> <span m='1028150'>two</span> <span m='1028300'>guys.</span>
  <span m='1029810'>Next</span> <span m='1030099'>we're</span> <span m='1030190'>going</span>
  <span m='1030349'>to</span> <span m='1030400'>look</span> <span m='1030670'>at</span>
  <span m='1032890'>basic</span> <span m='1033220'>chaining.</span> <span m='1036800'>Perfect</span>
  <span m='1037140'>hashing.</span> <span m='1040437'>How</span> <span m='1040920'>many</span>
  <span m='1041099'>people</span> <span m='1041310'>have</span> <span m='1041400'>seen</span>
  <span m='1041579'>perfect</span> <span m='1041910'>hashing</span> <span m='1042300'>just</span>
  <span m='1042540'>to</span> <span m='1042630'>get</span> <span m='1042780'>a</span>
  <span m='1042810'>sense?</span> <span m='1045000'>More</span> <span m='1045300'>than</span>
  <span m='1045540'>half.</span> <span m='1046980'>Maybe</span> <span m='1047400'>2/3.</span>
  <span m='1049020'>All</span> <span m='1049080'>right,</span> <span m='1049250'>I</span>
  <span m='1049330'>should</span> <span m='1049470'>do</span> <span m='1049560'>this</span>
  <span m='1049710'>really</span> <span m='1049920'>fast.</span> </p><p><span m='1052440'>Chaining,</span>
  <span m='1054450'>this</span> <span m='1054690'>is</span> <span m='1055050'>the</span>
  <span m='1055170'>first</span> <span m='1055590'>kind</span> <span m='1055830'>of</span>
  <span m='1055920'>hashing</span> <span m='1056350'>you</span> <span m='1056400'>usually</span>
  <span m='1056700'>see.</span> <span m='1058380'>You</span> <span m='1058590'>have</span>
  <span m='1058830'>your</span> <span m='1058950'>hash</span> <span m='1059190'>function,</span>
  <span m='1059550'>which</span> <span m='1059730'>is</span> <span m='1059850'>mapping</span>
  <span m='1061020'>keys</span> <span m='1061560'>into</span> <span m='1062040'>slots.</span>
  <span m='1062700'>If</span> <span m='1062880'>you</span> <span m='1062970'>have</span>
  <span m='1063150'>two</span> <span m='1063330'>keys</span> <span m='1063570'>that</span>
  <span m='1063660'>go</span> <span m='1063780'>to</span> <span m='1063840'>the</span>
  <span m='1063960'>same</span> <span m='1064230'>slot</span> <span m='1065010'>you</span>
  <span m='1065130'>store</span> <span m='1065370'>them</span> <span m='1065520'>as</span>
  <span m='1065670'>a</span> <span m='1065730'>linked</span> <span m='1065940'>list.</span>
  <span m='1067960'>OK,</span> <span m='1068675'>if</span> <span m='1069030'>you</span>
  <span m='1069090'>don't have</span> <span m='1069180'>anything</span> <span m='1069600'>in
  this</span> <span m='1069710'>slot,</span> <span m='1070160'>it's</span> <span m='1070260'>blank.</span>
  <span m='1071290'>This is</span> <span m='1071340'>very</span> <span m='1071520'>easy.</span>
  </p><p><span m='1073410'>If</span> <span m='1073650'>you</span> <span m='1074970'>look</span>
  <span m='1075180'>at</span> <span m='1075240'>a</span> <span m='1075300'>particular</span>
  <span m='1075840'>slot</span> <span m='1076200'>t</span> <span m='1077340'>and</span>
  <span m='1077520'>call</span> <span m='1078120'>the</span> <span m='1078240'>length</span>
  <span m='1078600'>of</span> <span m='1078720'>the</span> <span m='1078840'>chain</span>
  <span m='1079830'>that</span> <span m='1079950'>you</span> <span m='1080040'>get</span>
  <span m='1080250'>there</span> <span m='1080430'>Ct.</span> <span m='1082200'>You</span>
  <span m='1082440'>can</span> <span m='1082590'>look</span> <span m='1082800'>at</span>
  <span m='1082920'>the</span> <span m='1083160'>expected</span> <span m='1084360'>length</span>
  <span m='1084630'>of</span> <span m='1084720'>that</span> <span m='1084900'>chain.</span>
  <span m='1085860'>In</span> <span m='1085980'>general,</span> <span m='1086820'>it's</span>
  <span m='1086970'>just</span> <span m='1087150'>going</span> <span m='1087270'>to</span>
  <span m='1087360'>be</span> <span m='1088170'>sum</span> <span m='1089350'>of</span>
  <span m='1089810'>the</span> <span m='1090270'>probability</span> <span m='1091260'>that</span>
  <span m='1096830'>the</span> <span m='1096950'>keys</span> <span m='1098190'>map</span>
  <span m='1098540'>to</span> <span m='1098690'>that</span> <span m='1098900'>slot.</span>
  <span m='1099410'>And</span> <span m='1099560'>then</span> <span m='1099680'>you</span>
  <span m='1099740'>sum</span> <span m='1100040'>over</span> <span m='1100280'>all</span>
  <span m='1100430'>keys.</span> <span m='1101780'>This</span> <span m='1101990'>is</span>
  <span m='1102050'>just</span> <span m='1102320'>writing</span> <span m='1102650'>this</span>
  <span m='1102860'>as</span> <span m='1103010'>a</span> <span m='1103070'>sum</span>
  <span m='1103480'>of</span> <span m='1103590'>indicator</span> <span m='1103900'>random</span>
  <span m='1104210'>variables,</span> <span m='1104750'>and</span> <span m='1104840'>then</span>
  <span m='1105560'>each</span> <span m='1106640'>linearity</span> <span m='1107000'>of</span>
  <span m='1107060'>expectation,</span> <span m='1107660'>expectation</span> <span
  m='1108260'>of</span> <span m='1108350'>each</span> <span m='1108960'>of</span>
  <span m='1109190'>the</span> <span m='1109370'>indicator</span> <span m='1109820'>variables</span>
  <span m='1110300'>is</span> <span m='1110450'>probability.</span> <span m='1111770'>So</span>
  <span m='1111920'>that</span> <span m='1112160'>is</span> <span m='1112310'>the</span>
  <span m='1112370'>expected</span> <span m='1112760'>number.</span> </p><p><span
  m='1119770'>Here</span> <span m='1119960'>we</span> <span m='1120050'>just</span>
  <span m='1120260'>need</span> <span m='1120500'>to</span> <span m='1120620'>compute</span>
  <span m='1120920'>the</span> <span m='1121010'>probability</span> <span m='1121610'>each</span>
  <span m='1121820'>guy</span> <span m='1122030'>goes</span> <span m='1122270'>to</span>
  <span m='1122330'>each</span> <span m='1122540'>slot.</span> <span m='1123290'>As</span>
  <span m='1123440'>long</span> <span m='1123680'>as</span> <span m='1123770'>your</span>
  <span m='1123890'>hash</span> <span m='1124160'>function</span> <span m='1125060'>is</span>
  <span m='1125330'>uniform,</span> <span m='1126810'>meaning</span> <span m='1127040'>that</span>
  <span m='1127520'>each</span> <span m='1127850'>of</span> <span m='1127940'>these</span>
  <span m='1128180'>guys</span> <span m='1128530'>is</span> <span m='1129260'>equally</span>
  <span m='1129650'>likely</span> <span m='1130070'>to</span> <span m='1130280'>be</span>
  <span m='1131080'>hashed</span> <span m='1131450'>to.</span> <span m='1132140'>Well</span>
  <span m='1132230'>actually,</span> <span m='1133140'>we're</span> <span m='1133240'>looking</span>
  <span m='1133340'>at a</span> <span m='1133430'>particular</span> <span m='1133850'>slot.</span>
  <span m='1134180'>So</span> <span m='1134230'>we're</span> <span m='1134300'>essentially</span>
  <span m='1134720'>using</span> <span m='1135410'>universality</span> <span m='1136250'>here.</span>
  </p><p><span m='1137990'>Once</span> <span m='1138200'>we</span> <span m='1138290'>fix</span>
  <span m='1138620'>one</span> <span m='1138860'>slot</span> <span m='1139160'>that</span>
  <span m='1139280'>we</span> <span m='1139400'>care</span> <span m='1139610'>about,</span>
  <span m='1140490'>so</span> <span m='1140570'>let</span> <span m='1140780'>t</span>
  <span m='1141140'>be</span> <span m='1141500'>some</span> <span m='1142060'>h</span>
  <span m='1142395'>of y</span> <span m='1142730'>that</span> <span m='1142880'>we</span>
  <span m='1142970'>care</span> <span m='1143180'>about,</span> <span m='1144520'>then</span>
  <span m='1144680'>this</span> <span m='1144860'>is</span> <span m='1144950'>universality.</span>
  <span m='1147230'>By</span> <span m='1147470'>universality</span> <span m='1148070'>we</span>
  <span m='1148190'>know</span> <span m='1148340'>this</span> <span m='1148460'>is</span>
  <span m='1148550'>1</span> <span m='1148700'>over</span> <span m='1148860'>m.</span>
  <span m='1150160'>And</span> <span m='1150290'>so</span> <span m='1151640'>this</span>
  <span m='1151910'>is</span> <span m='1152900'>1</span> <span m='1153020'>over</span>
  <span m='1153200'>n</span> <span m='1153380'>over</span> <span m='1153670'>m,</span>
  <span m='1155090'>usually</span> <span m='1155300'>called</span> <span m='1155480'>the</span>
  <span m='1155570'>load</span> <span m='1155810'>factor.</span> <span m='1156890'>And</span>
  <span m='1157250'>what</span> <span m='1157340'>we</span> <span m='1157430'>care</span>
  <span m='1157610'>about</span> <span m='1157850'>is</span> <span m='1157970'>this</span>
  <span m='1158120'>is</span> <span m='1158210'>constant</span> <span m='1159800'>for</span>
  <span m='1160280'>m</span> <span m='1162170'>equal</span> <span m='1162430'>theta</span>
  <span m='1162620'>n.</span> <span m='1163220'>And</span> <span m='1163480'>so</span>
  <span m='1163580'>you</span> <span m='1163630'>use</span> <span m='1163790'>table</span>
  <span m='1164060'>doubling</span> <span m='1164480'>to</span> <span m='1164570'>keep</span>
  <span m='1164810'>m</span> <span m='1165050'>theta</span> <span m='1165260'>n.</span>
  <span m='1166010'>Boom,</span> <span m='1166670'>you've</span> <span m='1166760'>got</span>
  <span m='1167000'>expected</span> <span m='1167900'>chain</span> <span m='1168200'>length</span>
  <span m='1168920'>constant.</span> </p><p><span m='1170580'>But</span> <span m='1170930'>in</span>
  <span m='1172860'>the</span> <span m='1173190'>theory</span> <span m='1173480'>world</span>
  <span m='1174260'>expected</span> <span m='1174830'>is</span> <span m='1174950'>a</span>
  <span m='1175010'>very</span> <span m='1175190'>weak</span> <span m='1175460'>bound.</span>
  <span m='1176090'>What</span> <span m='1176210'>we</span> <span m='1176390'>want</span>
  <span m='1176660'>are</span> <span m='1176750'>high</span> <span m='1176930'>probability</span>
  <span m='1177530'>bounds.</span> <span m='1178350'>So</span> <span m='1178400'>let</span>
  <span m='1178490'>me</span> <span m='1178580'>tell</span> <span m='1178730'>you</span>
  <span m='1178820'>a</span> <span m='1178850'>little</span> <span m='1179060'>bit</span>
  <span m='1179180'>about</span> <span m='1179420'>high</span> <span m='1179570'>probability</span>
  <span m='1180140'>bounds.</span> <span m='1180590'>This,</span> <span m='1180680'>you
  may</span> <span m='1180860'>not</span> <span m='1181040'>have</span> <span m='1181160'>seen</span>
  <span m='1181820'>as</span> <span m='1181940'>much.</span> </p><p><span m='1190520'>Let's</span>
  <span m='1190730'>start</span> <span m='1191030'>with</span> <span m='1191870'>if</span>
  <span m='1192020'>your</span> <span m='1192140'>hash</span> <span m='1192470'>function</span>
  <span m='1192920'>is</span> <span m='1193040'>totally</span> <span m='1193490'>random,</span>
  <span m='1195390'>then</span> <span m='1196670'>your</span> <span m='1196820'>chain</span>
  <span m='1197210'>lengths</span> <span m='1197600'>will</span> <span m='1197780'>be</span>
  <span m='1198110'>order</span> <span m='1199180'>log</span> <span m='1199455'>m</span>
  <span m='1199930'>over</span> <span m='1200210'>a</span> <span m='1200330'>log</span>
  <span m='1200630'>log</span> <span m='1200870'>n,</span> <span m='1202070'>with</span>
  <span m='1202190'>high</span> <span m='1202340'>probability.</span> <span m='1202830'>They</span>
  <span m='1203000'>are</span> <span m='1203090'>not</span> <span m='1203390'>constant.</span>
  <span m='1205050'>In</span> <span m='1205150'>fact,</span> <span m='1205360'>you</span>
  <span m='1205460'>expect</span> <span m='1206120'>the</span> <span m='1206270'>maximum</span>
  <span m='1206990'>chain</span> <span m='1207680'>to</span> <span m='1207860'>be</span>
  <span m='1208220'>at</span> <span m='1208340'>least</span> <span m='1208670'>log</span>
  <span m='1208930'>n</span> <span m='1209030'>over</span> <span m='1209240'>log</span>
  <span m='1209450'>log</span> <span m='1209660'>n.</span> <span m='1209920'>I</span>
  <span m='1209960'>won't</span> <span m='1210170'>prove</span> <span m='1210320'>that</span>
  <span m='1210470'>here.</span> <span m='1211370'>Instead,</span> <span m='1211670'>I'll</span>
  <span m='1211760'>prove</span> <span m='1212030'>the</span> <span m='1212150'>upper</span>
  <span m='1212360'>bound.</span> </p><p><span m='1213670'>So</span> <span m='1217760'>the</span>
  <span m='1217900'>claim</span> <span m='1218230'>is</span> <span m='1218410'>that</span>
  <span m='1218830'>while</span> <span m='1219140'>in</span> <span m='1219280'>expectation</span>
  <span m='1219940'>each</span> <span m='1220060'>of</span> <span m='1220120'>them</span>
  <span m='1220240'>is</span> <span m='1220330'>constant,</span> <span m='1221840'>variance</span>
  <span m='1222390'>is</span> <span m='1222490'>essentially</span> <span m='1222940'>high.</span>
  <span m='1232610'>Actually</span> <span m='1232740'>let's</span> <span m='1233060'>talk</span>
  <span m='1233280'>about</span> <span m='1233460'>variance</span> <span m='1233820'>a</span>
  <span m='1233880'>little</span> <span m='1234060'>bit.</span> <span m='1234700'>Sorry,</span>
  <span m='1235225'>I'm</span> <span m='1235560'>getting</span> <span m='1235770'>distracted.</span>
  <span m='1241470'>So</span> <span m='1241670'>you</span> <span m='1241740'>might</span>
  <span m='1241860'>say,</span> <span m='1242140'>oh</span> <span m='1242640'>OK,</span>
  <span m='1242880'>expectation</span> <span m='1243480'>is</span> <span m='1243570'>nice.</span>
  </p><p><span m='1244390'>Let's</span> <span m='1244440'>look</span> <span m='1244590'>at</span>
  <span m='1244680'>variance.</span> <span m='1245010'>Turns</span> <span m='1245250'>out</span>
  <span m='1245340'>variance</span> <span m='1245690'>is</span> <span m='1245850'>constant</span>
  <span m='1247140'>for</span> <span m='1247530'>these</span> <span m='1247770'>chains.</span>
  <span m='1250110'>There</span> <span m='1250320'>are</span> <span m='1250380'>various</span>
  <span m='1250710'>definitions</span> <span m='1251250'>of</span> <span m='1251310'>variance.</span>
  <span m='1255010'>But</span> <span m='1255480'>in</span> <span m='1255600'>particular</span>
  <span m='1256060'>the</span> <span m='1256290'>formula</span> <span m='1256750'>I</span>
  <span m='1256860'>want</span> <span m='1256980'>to</span> <span m='1257070'>use</span>
  <span m='1257370'>is</span> <span m='1257670'>this</span> <span m='1257940'>one.</span>
  <span m='1261472'>It</span> <span m='1261940'>writes</span> <span m='1262290'>it</span>
  <span m='1262450'>as</span> <span m='1263850'>some</span> <span m='1264150'>expectations.</span>
  </p><p><span m='1265140'>Now,</span> <span m='1265350'>this</span> <span m='1266680'>expected</span>
  <span m='1267000'>chain</span> <span m='1267090'>length</span> <span m='1267490'>we</span>
  <span m='1267590'>know</span> <span m='1267740'>is</span> <span m='1267840'>constant.</span>
  <span m='1268135'>So you</span> <span m='1268430'>square</span> <span m='1268860'>it,
  it's</span> <span m='1268980'>still</span> <span m='1269160'>constant.</span> <span
  m='1269640'>So</span> <span m='1269940'>that's</span> <span m='1270120'>sort</span>
  <span m='1270270'>of</span> <span m='1270360'>irrelevant.</span> <span m='1271520'>The</span>
  <span m='1271650'>interesting</span> <span m='1272010'>part</span> <span m='1272280'>is</span>
  <span m='1272430'>what</span> <span m='1272640'>is</span> <span m='1272820'>the</span>
  <span m='1273660'>expected</span> <span m='1274860'>squared</span> <span m='1275640'>chain</span>
  <span m='1275995'>length.</span> </p><p><span m='1277230'>Now</span> <span m='1277380'>this</span>
  <span m='1277560'>is</span> <span m='1277650'>going</span> <span m='1277800'>to</span>
  <span m='1277860'>depend</span> <span m='1278220'>exactly</span> <span m='1278610'>on</span>
  <span m='1278700'>your</span> <span m='1278820'>hash</span> <span m='1279060'>function.</span>
  <span m='1280320'>Let's</span> <span m='1280710'>analyze</span> <span m='1281160'>it</span>
  <span m='1281250'>for</span> <span m='1281400'>totally</span> <span m='1281820'>random.</span>
  <span m='1282570'>In</span> <span m='1282720'>general,</span> <span m='1283180'>we</span>
  <span m='1283200'>just</span> <span m='1283350'>need</span> <span m='1283500'>a</span>
  <span m='1283560'>certain</span> <span m='1284160'>kind</span> <span m='1284400'>of</span>
  <span m='1284490'>symmetry</span> <span m='1284940'>here.</span> <span m='1285900'>You</span>
  <span m='1286050'>can</span> <span m='1286230'>write</span> <span m='1292980'>I</span>
  <span m='1293080'>will</span> <span m='1293200'>look</span> <span m='1293880'>at</span>
  <span m='1293940'>the</span> <span m='1294030'>expected</span> <span m='1294600'>squared</span>
  <span m='1295110'>chain</span> <span m='1295450'>lengths.</span> </p><p><span m='1300000'>And</span>
  <span m='1300120'>instead,</span> <span m='1301080'>what</span> <span m='1301200'>I'd</span>
  <span m='1301290'>like</span> <span m='1301470'>to</span> <span m='1301590'>do</span>
  <span m='1302790'>is</span> <span m='1302940'>just</span> <span m='1303150'>sum</span>
  <span m='1304620'>over</span> <span m='1304860'>all</span> <span m='1305160'>of</span>
  <span m='1305280'>them.</span> <span m='1305770'>This</span> <span m='1305880'>is</span>
  <span m='1305970'>going</span> <span m='1306120'>to</span> <span m='1306210'>be</span>
  <span m='1306330'>easier</span> <span m='1306690'>to</span> <span m='1306750'>analyze.</span>
  <span m='1308540'>So</span> <span m='1308610'>this</span> <span m='1308790'>is</span>
  <span m='1308980'>expected</span> <span m='1309450'>squared</span> <span m='1309960'>chain</span>
  <span m='1310260'>lengths.</span> <span m='1310620'>If</span> <span m='1310790'>I</span>
  <span m='1310890'>sum</span> <span m='1311250'>over</span> <span m='1311490'>all</span>
  <span m='1312360'>chains</span> <span m='1313140'>and</span> <span m='1313230'>then</span>
  <span m='1313380'>divide,</span> <span m='1313800'>take</span> <span m='1313980'>the</span>
  <span m='1314130'>average,</span> <span m='1315520'>then</span> <span m='1315570'>I'll</span>
  <span m='1315660'>probably</span> <span m='1316290'>get</span> <span m='1316440'>the</span>
  <span m='1316530'>expected</span> <span m='1317100'>chain</span> <span m='1317340'>length</span>
  <span m='1317550'>of</span> <span m='1317640'>any</span> <span m='1317820'>individual.</span>
  </p><p><span m='1318300'>As</span> <span m='1318390'>long</span> <span m='1318570'>as</span>
  <span m='1318660'>your</span> <span m='1318780'>hash</span> <span m='1318990'>function</span>
  <span m='1319230'>is</span> <span m='1319320'>symmetric</span> <span m='1319860'>all</span>
  <span m='1320010'>the</span> <span m='1320100'>keys</span> <span m='1320430'>are</span>
  <span m='1320520'>sort</span> <span m='1320700'>of</span> <span m='1320760'>equally</span>
  <span m='1321120'>likely.</span> <span m='1322030'>This</span> <span m='1322140'>will</span>
  <span m='1322230'>be</span> <span m='1322470'>true.</span> <span m='1326220'>And</span>
  <span m='1326370'>then</span> <span m='1326580'>you</span> <span m='1326670'>could</span>
  <span m='1326790'>just</span> <span m='1327000'>basically</span> <span m='1327300'>apply</span>
  <span m='1327570'>a</span> <span m='1327600'>random</span> <span m='1327870'>permutation</span>
  <span m='1328470'>to</span> <span m='1328560'>your</span> <span m='1328650'>keys</span>
  <span m='1328860'>to</span> <span m='1328950'>make</span> <span m='1329100'>this</span>
  <span m='1329250'>true</span> <span m='1329400'>if</span> <span m='1329490'>it</span>
  <span m='1329580'>isn't</span> <span m='1329800'>already.</span> </p><p><span m='1333360'>Now</span>
  <span m='1333540'>this</span> <span m='1333870'>thing</span> <span m='1335250'>is</span>
  <span m='1335400'>just</span> <span m='1336240'>the</span> <span m='1336360'>number</span>
  <span m='1336750'>of</span> <span m='1336870'>pairs</span> <span m='1337260'>of</span>
  <span m='1337350'>keys</span> <span m='1337680'>that</span> <span m='1337800'>collide.</span>
  <span m='1340240'>So</span> <span m='1340660'>you</span> <span m='1340840'>can</span>
  <span m='1341050'>forget</span> <span m='1341350'>about</span> <span m='1341590'>slots,</span>
  <span m='1342820'>this</span> <span m='1343030'>is</span> <span m='1343150'>just</span>
  <span m='1344270'>the</span> <span m='1344530'>sum</span> <span m='1345850'>overall</span>
  <span m='1346300'>pairs</span> <span m='1347740'>of</span> <span m='1347860'>keys</span>
  <span m='1348240'>ij</span> <span m='1349570'>of</span> <span m='1350200'>the</span>
  <span m='1350290'>probability</span> <span m='1352390'>that</span> <span m='1352730'>xi</span>
  <span m='1353560'>hashes</span> <span m='1354160'>to</span> <span m='1354280'>the</span>
  <span m='1354400'>same</span> <span m='1354700'>spot</span> <span m='1355150'>as</span>
  <span m='1355360'>xj.</span> <span m='1357400'>And</span> <span m='1357520'>that's</span>
  <span m='1357670'>something</span> <span m='1357970'>we</span> <span m='1358090'>know</span>
  <span m='1358930'>by</span> <span m='1359260'>universality.</span> <span m='1361330'>This</span>
  <span m='1361540'>is</span> <span m='1361660'>1</span> <span m='1361850'>over</span>
  <span m='1362060'>m.</span> <span m='1363790'>Big</span> <span m='1364270'>O.</span>
  </p><p><span m='1366940'>The</span> <span m='1367060'>number</span> <span m='1367390'>of</span>
  <span m='1367450'>pairs</span> <span m='1368080'>is</span> <span m='1368200'>m</span>
  <span m='1368410'>squared.</span> <span m='1369940'>So</span> <span m='1370090'>we</span>
  <span m='1370150'>get</span> <span m='1370300'>m</span> <span m='1370480'>squared</span>
  <span m='1371110'>times</span> <span m='1371320'>1</span> <span m='1371470'>over</span>
  <span m='1371610'>m,</span> <span m='1371810'>times</span> <span m='1372070'>1</span>
  <span m='1372240'>over</span> <span m='1372450'>m.</span> <span m='1373110'>This</span>
  <span m='1373270'>is</span> <span m='1373360'>constant.</span> </p><p><span m='1378620'>So
  the</span> <span m='1378670'>variance</span> <span m='1379030'>is</span> <span m='1379150'>actually</span>
  <span m='1379450'>small.</span> <span m='1380230'>It's</span> <span m='1380410'>not</span>
  <span m='1380650'>a</span> <span m='1380710'>good</span> <span m='1380920'>indicator</span>
  <span m='1381490'>of</span> <span m='1381640'>how</span> <span m='1381880'>big</span>
  <span m='1382090'>our</span> <span m='1382210'>chains</span> <span m='1382570'>can</span>
  <span m='1382720'>get.</span> <span m='1383240'>Because</span> <span m='1383550'>still,</span>
  <span m='1384100'>with</span> <span m='1384340'>time</span> <span m='1384580'>probability</span>
  <span m='1385180'>one</span> <span m='1385420'>of</span> <span m='1385510'>the</span>
  <span m='1385600'>chains</span> <span m='1385960'>will</span> <span m='1386050'>be</span>
  <span m='1386170'>log</span> <span m='1386440'>n</span> <span m='1386530'>over</span>
  <span m='1386710'>log</span> <span m='1386880'>log</span> <span m='1387050'>n.</span>
  <span m='1387340'>It's</span> <span m='1387490'>just</span> <span m='1387790'>typical</span>
  <span m='1388210'>one</span> <span m='1388450'>won't</span> <span m='1388660'>be.</span>
  </p><p><span m='1390900'>Let's</span> <span m='1391150'>prove</span> <span m='1391420'>the</span>
  <span m='1391600'>upper</span> <span m='1391870'>bound.</span> <span m='1392740'>This</span>
  <span m='1393010'>uses</span> <span m='1393980'>Chernoff</span> <span m='1394390'>bounds.</span>
  <span m='1398090'>This</span> <span m='1398140'>is</span> <span m='1398320'>a</span>
  <span m='1398590'>tail</span> <span m='1398920'>bound,</span> <span m='1399220'>essentially.</span>
  <span m='1401410'>I</span> <span m='1401500'>haven't</span> <span m='1401800'>probably</span>
  <span m='1402220'>defined</span> <span m='1402580'>with</span> <span m='1402700'>high</span>
  <span m='1402820'>probability.</span> </p><p><span m='1403330'>It's</span> <span
  m='1403420'>probably</span> <span m='1403690'>good</span> <span m='1403810'>to</span>
  <span m='1403930'>remember,</span> <span m='1404780'>review</span> <span m='1405060'>this.</span>
  <span m='1405365'>This</span> <span m='1405670'>means</span> <span m='1405970'>probability</span>
  <span m='1406720'>at</span> <span m='1406870'>least</span> <span m='1407620'>1</span>
  <span m='1407890'>minus</span> <span m='1408310'>1</span> <span m='1408640'>over</span>
  <span m='1408970'>n</span> <span m='1409180'>to</span> <span m='1409420'>c</span>
  <span m='1410170'>where</span> <span m='1410290'>I</span> <span m='1410440'>get</span>
  <span m='1410590'>to</span> <span m='1410710'>choose</span> <span m='1412030'>any</span>
  <span m='1412330'>constant</span> <span m='1412675'>c.</span> <span m='1414370'>So</span>
  <span m='1415000'>high</span> <span m='1415210'>probability</span> <span m='1415780'>means</span>
  <span m='1416860'>polynomially</span> <span m='1418060'>small</span> <span m='1418630'>failure</span>
  <span m='1418990'>probability.</span> <span m='1420250'>This</span> <span m='1420430'>is</span>
  <span m='1420520'>good</span> <span m='1420760'>because</span> <span m='1420970'>if</span>
  <span m='1421090'>you</span> <span m='1421210'>do</span> <span m='1421420'>this</span>
  <span m='1421630'>polynomially</span> <span m='1422230'>many</span> <span m='1422470'>times</span>
  <span m='1423310'>this</span> <span m='1423460'>property</span> <span m='1424300'>remains</span>
  <span m='1424690'>true.</span> <span m='1426280'>You</span> <span m='1426400'>just</span>
  <span m='1426790'>up your</span> <span m='1427150'>constant</span> <span m='1428320'>by</span>
  <span m='1428560'>however</span> <span m='1428890'>many</span> <span m='1429040'>times</span>
  <span m='1429280'>you're</span> <span m='1429370'>going</span> <span m='1429520'>to</span>
  <span m='1429580'>use</span> <span m='1429760'>it.</span> </p><p><span m='1431840'>So</span>
  <span m='1432550'>we</span> <span m='1432730'>prove</span> <span m='1432940'>these</span>
  <span m='1433090'>kinds</span> <span m='1433330'>of</span> <span m='1433390'>bounds</span>
  <span m='1433780'>using</span> <span m='1434080'>Chernov,</span> <span m='1436120'>which</span>
  <span m='1436330'>looks</span> <span m='1436480'>something</span> <span m='1436780'>like</span>
  <span m='1436960'>this.</span> <span m='1438460'>e</span> <span m='1438710'>to</span>
  <span m='1438970'>the</span> <span m='1439100'>c</span> <span m='1439535'>minus</span>
  <span m='1439970'>1</span> <span m='1440730'>mu</span> <span m='1441430'>over</span>
  <span m='1443176'>c</span> <span m='1443560'>mu</span> <span m='1445232'>c</span>
  <span m='1445680'>mu.</span> <span m='1447608'>So</span> <span m='1448090'>mu</span>
  <span m='1448510'>here</span> <span m='1448810'>is</span> <span m='1449020'>the</span>
  <span m='1449140'>mean.</span> <span m='1450240'>The</span> <span m='1450320'>mean</span>
  <span m='1450580'>we've</span> <span m='1450730'>already</span> <span m='1450970'>computed</span>
  <span m='1451450'>is</span> <span m='1451630'>constant.</span> <span m='1452820'>The</span>
  <span m='1452950'>expectation</span> <span m='1453730'>of</span> <span m='1454090'>the</span>
  <span m='1454270'>ct</span> <span m='1454960'>variable is</span> <span m='1455440'>constant.</span>
  </p><p><span m='1456830'>So</span> <span m='1457000'>we</span> <span m='1457180'>want</span>
  <span m='1457420'>it</span> <span m='1458590'>to</span> <span m='1458770'>be</span>
  <span m='1458980'>not</span> <span m='1459160'>much</span> <span m='1459430'>larger</span>
  <span m='1459850'>than</span> <span m='1460000'>that.</span> <span m='1460340'>So</span>
  <span m='1460690'>say</span> <span m='1460900'>the</span> <span m='1460990'>probability</span>
  <span m='1461620'>that</span> <span m='1461770'>it's</span> <span m='1462280'>some</span>
  <span m='1462790'>factor</span> <span m='1463330'>larger--</span> <span m='1463980'>c</span>
  <span m='1464260'>doesn't</span> <span m='1464470'>have</span> <span m='1464650'>to</span>
  <span m='1464770'>be</span> <span m='1464890'>constant</span> <span m='1465250'>here,</span>
  <span m='1465700'>sorry,</span> <span m='1465970'>maybe</span> <span m='1466270'>not</span>
  <span m='1466480'>great</span> <span m='1466690'>terminology.</span> <span m='1469900'>So</span>
  <span m='1470825'>the</span> <span m='1471240'>probability</span> <span m='1471660'>of</span>
  <span m='1471930'>ct</span> <span m='1472150'>is at</span> <span m='1472240'>least</span>
  <span m='1473080'>some</span> <span m='1473350'>c</span> <span m='1473620'>times</span>
  <span m='1473980'>the</span> <span m='1474100'>mean,</span> <span m='1474920'>is</span>
  <span m='1475090'>going</span> <span m='1475240'>to</span> <span m='1475330'>be</span>
  <span m='1475450'>at</span> <span m='1475510'>most</span> <span m='1475780'>this</span>
  <span m='1476110'>exponential.</span> <span m='1476505'>Which</span> <span m='1476900'>is</span>
  <span m='1477060'>a</span> <span m='1477130'>bit</span> <span m='1477850'>annoying,</span>
  <span m='1478780'>or</span> <span m='1478870'>a</span> <span m='1478900'>bit</span>
  <span m='1479080'>ugly.</span> </p><p><span m='1479980'>But</span> <span m='1480490'>in</span>
  <span m='1480640'>particular,</span> <span m='1481790'>if</span> <span m='1481810'>we</span>
  <span m='1481900'>plug in</span> <span m='1482380'>c</span> <span m='1482680'>equals</span>
  <span m='1483070'>log</span> <span m='1483350'>n</span> <span m='1483490'>over</span>
  <span m='1483670'>log</span> <span m='1483910'>log</span> <span m='1484120'>n,</span>
  <span m='1485626'>use</span> <span m='1486070'>that</span> <span m='1486250'>as</span>
  <span m='1486370'>our</span> <span m='1486490'>factor,</span> <span m='1487600'>which</span>
  <span m='1487810'>is</span> <span m='1487930'>what</span> <span m='1488080'>we're</span>
  <span m='1489250'>concerned</span> <span m='1489640'>about</span> <span m='1489850'>here</span>
  <span m='1490840'>then.</span> <span m='1491860'>We</span> <span m='1492040'>get</span>
  <span m='1492280'>that</span> <span m='1492420'>this</span> <span m='1492820'>probability</span>
  <span m='1494470'>is</span> <span m='1497170'>essentially</span> <span m='1497620'>dominated</span>
  <span m='1498070'>by</span> <span m='1498250'>the</span> <span m='1498370'>bottom</span>
  <span m='1498820'>term</span> <span m='1499120'>here.</span> <span m='1500170'>And</span>
  <span m='1500290'>this</span> <span m='1500470'>becomes</span> <span m='1502450'>log</span>
  <span m='1502880'>n</span> <span m='1503140'>over</span> <span m='1503330'>log</span>
  <span m='1503590'>log</span> <span m='1503800'>n</span> <span m='1507100'>to</span>
  <span m='1507550'>the</span> <span m='1507670'>power</span> <span m='1508480'>log</span>
  <span m='1508810'>n</span> <span m='1508990'>over</span> <span m='1509170'>log</span>
  <span m='1509410'>log</span> <span m='1509620'>n.</span> <span m='1512620'>So</span>
  <span m='1512830'>essentially,</span> <span m='1513310'>get</span> <span m='1514010'>1</span>
  <span m='1514480'>over</span> <span m='1514780'>that.</span> </p><p><span m='1516720'>And</span>
  <span m='1516980'>if</span> <span m='1517120'>you</span> <span m='1517180'>take</span>
  <span m='1517450'>this</span> <span m='1518290'>bottom</span> <span m='1518620'>part</span>
  <span m='1518950'>and</span> <span m='1519400'>put</span> <span m='1519610'>it</span>
  <span m='1519700'>into</span> <span m='1520180'>the</span> <span m='1520840'>exponent,</span>
  <span m='1521470'>you</span> <span m='1521620'>get</span> <span m='1521830'>essentially</span>
  <span m='1522250'>log</span> <span m='1522490'>log</span> <span m='1522810'>n.</span>
  <span m='1523560'>So</span> <span m='1524020'>this</span> <span m='1524230'>is</span>
  <span m='1524440'>something</span> <span m='1524830'>like</span> <span m='1525040'>1</span>
  <span m='1525310'>over</span> <span m='1526160'>2</span> <span m='1527035'>to</span>
  <span m='1527370'>the</span> <span m='1528370'>log</span> <span m='1528730'>n</span>
  <span m='1528900'>over</span> <span m='1529150'>log</span> <span m='1529450'>log</span>
  <span m='1529660'>n</span> <span m='1531310'>times</span> <span m='1531850'>log</span>
  <span m='1532090'>log</span> <span m='1532310'>n.</span> <span m='1533780'>And</span>
  <span m='1533880'>the</span> <span m='1533940'>log</span> <span m='1534210'>log</span>
  <span m='1534280'>n's</span> <span m='1534580'>cancel.</span> <span m='1535210'>And</span>
  <span m='1535300'>so</span> <span m='1535450'>this</span> <span m='1535690'>is</span>
  <span m='1535930'>basically</span> <span m='1537040'>1</span> <span m='1537280'>over</span>
  <span m='1537490'>n.</span> </p><p><span m='1538300'>And</span> <span m='1538570'>if</span>
  <span m='1538720'>you</span> <span m='1539320'>put</span> <span m='1539470'>a</span>
  <span m='1539530'>constant</span> <span m='1539980'>in</span> <span m='1540040'>here</span>
  <span m='1540850'>you</span> <span m='1541030'>can</span> <span m='1541180'>get</span>
  <span m='1541300'>a</span> <span m='1541360'>constant</span> <span m='1541820'>in</span>
  <span m='1542020'>the</span> <span m='1542110'>exponent</span> <span m='1542650'>here.</span>
  <span m='1543920'>So</span> <span m='1544030'>you</span> <span m='1544180'>can</span>
  <span m='1544270'>get</span> <span m='1545130'>failure</span> <span m='1545470'>probability</span>
  <span m='1546010'>1</span> <span m='1546190'>over</span> <span m='1546360'>n</span>
  <span m='1546580'>to the</span> <span m='1546670'>c.</span> <span m='1547420'>So</span>
  <span m='1547570'>get</span> <span m='1547780'>this</span> <span m='1547960'>with</span>
  <span m='1548110'>high</span> <span m='1548260'>probability</span> <span m='1548740'>bound</span>
  <span m='1549160'>as</span> <span m='1549310'>long</span> <span m='1549670'>as</span>
  <span m='1552010'>you</span> <span m='1552190'>go</span> <span m='1552430'>up</span>
  <span m='1552640'>to</span> <span m='1553360'>a</span> <span m='1553420'>chain</span>
  <span m='1553690'>length</span> <span m='1553900'>of</span> <span m='1553990'>log</span>
  <span m='1554200'>n</span> <span m='1554290'>over</span> <span m='1554440'>log</span>
  <span m='1554790'>log</span> <span m='1555040'>n.</span> <span m='1555310'>It's</span>
  <span m='1555460'>not</span> <span m='1555700'>true</span> <span m='1556150'>otherwise.</span>
  </p><p><span m='1556960'>So</span> <span m='1557110'>this</span> <span m='1557290'>is</span>
  <span m='1557380'>kind</span> <span m='1557560'>of</span> <span m='1557620'>depressing.</span>
  <span m='1558370'>It's</span> <span m='1558400'>one</span> <span m='1558580'>reason</span>
  <span m='1558970'>we</span> <span m='1559240'>will</span> <span m='1559390'>turn</span>
  <span m='1559630'>to</span> <span m='1559750'>perfect</span> <span m='1560090'>hashing,</span>
  <span m='1561070'>some</span> <span m='1561280'>of</span> <span m='1561340'>the</span>
  <span m='1561430'>chains</span> <span m='1561760'>are</span> <span m='1561850'>long.</span>
  <span m='1562780'>But</span> <span m='1562930'>there</span> <span m='1563080'>is</span>
  <span m='1563230'>a</span> <span m='1563320'>sense</span> <span m='1563620'>in</span>
  <span m='1563710'>which</span> <span m='1563920'>this</span> <span m='1564130'>is</span>
  <span m='1564250'>not</span> <span m='1564700'>so</span> <span m='1565060'>bad.</span>
  <span m='1568910'>So</span> <span m='1569290'>let</span> <span m='1569440'>me</span>
  <span m='1570970'>go</span> <span m='1571330'>to</span> <span m='1571870'>that.</span>
  <span m='1581020'>I kind</span> <span m='1581510'>of want</span> <span m='1582010'>all
  these.</span> </p><p><span m='1589432'>AUDIENCE:</span> <span m='1589675'>[INAUDIBLE]</span>
  </p><p></p><p><span m='1593820'>ERIK DEMAINE:</span> <span m='1594038'>What's</span>
  <span m='1594257'>that?</span> </p><p><span m='1594694'>AUDIENCE:</span> <span m='1594912'>[INAUDIBLE]</span>
  </p><p><span m='1596880'>ERIK DEMAINE:</span> <span m='1597015'>Since</span> <span
  m='1597150'>when</span> <span m='1597330'>is</span> <span m='1597450'>log</span>
  <span m='1597720'>n</span> <span m='1597900'>long.</span> <span m='1598590'>Well--</span>
  </p><p><span m='1599345'>AUDIENCE:</span> <span m='1599557'>[INAUDIBLE]</span> </p><p><span
  m='1600960'>ERIK DEMAINE:</span> <span m='1601095'>Right,</span> <span m='1601230'>so</span>
  <span m='1601410'>I</span> <span m='1601890'>mean,</span> <span m='1602430'>in</span>
  <span m='1602550'>some</span> <span m='1602850'>sense</span> <span m='1603100'>the</span>
  <span m='1603180'>name</span> <span m='1603360'>of</span> <span m='1603420'>the</span>
  <span m='1603510'>game</span> <span m='1603690'>here</span> <span m='1603760'>is</span>
  <span m='1603870'>we</span> <span m='1603940'>want</span> <span m='1604140'>to</span>
  <span m='1604290'>beat</span> <span m='1604560'>binary</span> <span m='1604980'>search</span>
  <span m='1605310'>trees.</span> <span m='1606300'>I</span> <span m='1606360'>didn't</span>
  <span m='1606510'>even</span> <span m='1606690'>mention</span> <span m='1607080'>what</span>
  <span m='1607470'>problem we're</span> <span m='1607940'>solving.</span> <span m='1608550'>We're</span>
  <span m='1608650'>solving</span> <span m='1608850'>the</span> <span m='1608970'>dictionary</span>
  <span m='1609450'>problem,</span> <span m='1610030'>which</span> <span m='1610140'>is</span>
  <span m='1610770'>sort</span> <span m='1610980'>of</span> <span m='1611040'>bunch</span>
  <span m='1611220'>of</span> <span m='1611280'>keys,</span> <span m='1611670'>insert</span>
  <span m='1612190'>delete,</span> <span m='1612840'>and</span> <span m='1613020'>search</span>
  <span m='1613300'>is</span> <span m='1613440'>now</span> <span m='1613620'>just</span>
  <span m='1613830'>exact</span> <span m='1614250'>search.</span> <span m='1614640'>I</span>
  <span m='1614730'>want</span> <span m='1614880'>to</span> <span m='1614940'>know</span>
  <span m='1615060'>is</span> <span m='1615270'>this</span> <span m='1615420'>key</span>
  <span m='1615630'>in</span> <span m='1615750'>there?</span> <span m='1616020'>If</span>
  <span m='1616170'>so,</span> <span m='1616530'>find</span> <span m='1616800'>some</span>
  <span m='1616950'>data</span> <span m='1617250'>associated</span> <span m='1617760'>with</span>
  <span m='1617970'>it.</span> </p><p><span m='1619660'>Which</span> <span m='1619740'>is</span>
  <span m='1619830'>something</span> <span m='1620130'>binary</span> <span m='1620400'>search</span>
  <span m='1620640'>trees</span> <span m='1620850'>could</span> <span m='1621000'>do,</span>
  <span m='1621360'>n</span> <span m='1621540'>log</span> <span m='1621810'>n</span>
  <span m='1621960'>time.</span> <span m='1622920'>And</span> <span m='1623160'>we've</span>
  <span m='1623280'>seen</span> <span m='1623670'>various</span> <span m='1624150'>fancy</span>
  <span m='1624480'>ways</span> <span m='1624750'>to</span> <span m='1625170'>try</span>
  <span m='1625320'>to</span> <span m='1625410'>make</span> <span m='1625560'>that</span>
  <span m='1625740'>better.</span> <span m='1626490'>But</span> <span m='1626700'>in</span>
  <span m='1626790'>the</span> <span m='1626880'>worst</span> <span m='1627060'>case,</span>
  <span m='1627400'>you</span> <span m='1627500'>need</span> <span m='1627570'>log</span>
  <span m='1627780'>n</span> <span m='1627930'>time</span> <span m='1628170'>to</span>
  <span m='1628260'>do</span> <span m='1628380'>binary</span> <span m='1628650'>search</span>
  <span m='1628860'>trees.</span> </p><p><span m='1629100'>We</span> <span m='1629280'>want</span>
  <span m='1629460'>to</span> <span m='1629550'>get</span> <span m='1629740'>to</span>
  <span m='1629840'>constant</span> <span m='1630360'>as</span> <span m='1630870'>much</span>
  <span m='1631080'>as</span> <span m='1631170'>possible.</span> <span m='1632940'>We</span>
  <span m='1633340'>want</span> <span m='1634500'>the</span> <span m='1634620'>hash</span>
  <span m='1634860'>function</span> <span m='1635220'>to</span> <span m='1635340'>be</span>
  <span m='1635430'>evaluatable</span> <span m='1636130'>in</span> <span m='1636210'>constant</span>
  <span m='1636570'>time.</span> <span m='1637470'>We</span> <span m='1637620'>want</span>
  <span m='1639840'>the</span> <span m='1639960'>queries</span> <span m='1640350'>to</span>
  <span m='1640470'>be</span> <span m='1640560'>done</span> <span m='1640680'>in</span>
  <span m='1640770'>constant</span> <span m='1641100'>time.</span> <span m='1641280'>If</span>
  <span m='1641370'>you</span> <span m='1641460'>have</span> <span m='1641580'>a</span>
  <span m='1641610'>long</span> <span m='1641880'>chain,</span> <span m='1642280'>you've</span>
  <span m='1642300'>got</span> <span m='1642420'>to</span> <span m='1642480'>search</span>
  <span m='1642750'>the</span> <span m='1642810'>whole</span> <span m='1642960'>chain</span>
  <span m='1644550'>and</span> <span m='1644790'>I</span> <span m='1644880'>don't</span>
  <span m='1645120'>want</span> <span m='1645240'>to</span> <span m='1645330'>spend</span>
  <span m='1645640'>log</span> <span m='1645900'>n</span> <span m='1645990'>over</span>
  <span m='1646180'>log</span> <span m='1646410'>log</span> <span m='1646760'>n.</span>
  </p><p><span m='1649290'>Because</span> <span m='1649510'>I</span> <span m='1649570'>said</span>
  <span m='1649780'>so.</span> <span m='1651250'>Admittedly,</span> <span m='1651790'>log</span>
  <span m='1652060'>n</span> <span m='1652360'>over</span> <span m='1652540'>log</span>
  <span m='1652750'>log</span> <span m='1652830'>n</span> <span m='1652910'>is</span>
  <span m='1653050'>not</span> <span m='1653230'>that</span> <span m='1653410'>big.</span>
  <span m='1654220'>And</span> <span m='1654370'>furthermore,</span> <span m='1655060'>the</span>
  <span m='1655180'>following</span> <span m='1655600'>holds.</span> <span m='1656470'>This</span>
  <span m='1656650'>is</span> <span m='1656830'>a</span> <span m='1657370'>sense</span>
  <span m='1657700'>in</span> <span m='1657820'>which</span> <span m='1658270'>it's</span>
  <span m='1658420'>not</span> <span m='1658690'>really</span> <span m='1659230'>log</span>
  <span m='1659500'>n</span> <span m='1659610'>over</span> <span m='1659880'>log</span>
  <span m='1660070'>log</span> <span m='1660310'>n.</span> </p><p><span m='1661450'>If</span>
  <span m='1661570'>we</span> <span m='1661690'>change</span> <span m='1662080'>the</span>
  <span m='1662170'>model</span> <span m='1662560'>briefly</span> <span m='1665620'>and</span>
  <span m='1665740'>say,</span> <span m='1666230'>well,</span> <span m='1666440'>suppose</span>
  <span m='1666790'>I</span> <span m='1666880'>have</span> <span m='1667330'>a</span>
  <span m='1667390'>cache</span> <span m='1668050'>of</span> <span m='1668110'>the</span>
  <span m='1668230'>last</span> <span m='1668590'>log</span> <span m='1668930'>n</span>
  <span m='1669880'>items</span> <span m='1670300'>that</span> <span m='1670420'>I</span>
  <span m='1670510'>searched</span> <span m='1670900'>for</span> <span m='1671200'>in</span>
  <span m='1671740'>the</span> <span m='1672820'>hash</span> <span m='1673090'>table.</span>
  <span m='1676630'>Then</span> <span m='1676960'>if</span> <span m='1677170'>you're</span>
  <span m='1677290'>totally</span> <span m='1677710'>random,</span> <span m='1679560'>which</span>
  <span m='1680240'>is</span> <span m='1680320'>something</span> <span m='1680650'>we</span>
  <span m='1680740'>assumed</span> <span m='1681120'>here</span> <span m='1681340'>in</span>
  <span m='1681460'>order</span> <span m='1681580'>to</span> <span m='1681820'>apply</span>
  <span m='1682060'>the</span> <span m='1682170'>Chernoff</span> <span m='1682520'>bound,</span>
  <span m='1682840'>we</span> <span m='1682960'>needed</span> <span m='1683260'>that</span>
  <span m='1683920'>everything</span> <span m='1684320'>was</span> <span m='1684430'>completely</span>
  <span m='1684820'>random.</span> <span m='1686750'>Then</span> <span m='1686860'>you</span>
  <span m='1687010'>get</span> <span m='1687340'>a</span> <span m='1687670'>constant</span>
  <span m='1688240'>amortized</span> <span m='1688870'>bound</span> <span m='1691210'>per</span>
  <span m='1691450'>operation.</span> </p><p><span m='1695110'>So</span> <span m='1695290'>this</span>
  <span m='1695500'>is</span> <span m='1695740'>kind</span> <span m='1696040'>of</span>
  <span m='1696100'>funny.</span> <span m='1696610'>In</span> <span m='1696730'>fact,</span>
  <span m='1697000'>all</span> <span m='1697270'>it's</span> <span m='1697390'>saying</span>
  <span m='1698160'>this</span> <span m='1698370'>is</span> <span m='1698560'>easy</span>
  <span m='1698830'>to</span> <span m='1698950'>prove.</span> <span m='1700550'>And</span>
  <span m='1700810'>it's</span> <span m='1701020'>not</span> <span m='1701200'>yet</span>
  <span m='1701440'>in</span> <span m='1701620'>any</span> <span m='1701770'>paper.</span>
  <span m='1702260'>It's</span> <span m='1702370'>on</span> <span m='1703090'>Mihai</span>
  <span m='1703590'>Petrescu's</span> <span m='1704050'>blog</span> <span m='1704980'>from</span>
  <span m='1705250'>2011.</span> <span m='1710440'>All</span> <span m='1710500'>right,</span>
  <span m='1710900'>we're</span> <span m='1711400'>here.</span> </p><p><span m='1711730'>We're</span>
  <span m='1711820'>looking</span> <span m='1712090'>at</span> <span m='1712150'>different</span>
  <span m='1712420'>chains.</span> <span m='1712930'>So</span> <span m='1713110'>you</span>
  <span m='1713230'>access</span> <span m='1713560'>some</span> <span m='1713770'>chain,</span>
  <span m='1714190'>then</span> <span m='1714340'>you</span> <span m='1714430'>access</span>
  <span m='1714760'>another</span> <span m='1715000'>chain,</span> <span m='1715420'>then</span>
  <span m='1715510'>you</span> <span m='1715600'>access</span> <span m='1715900'>another</span>
  <span m='1716170'>chain.</span> <span m='1717640'>If</span> <span m='1717820'>you're</span>
  <span m='1717940'>unlucky,</span> <span m='1718750'>you'll</span> <span m='1718870'>hit</span>
  <span m='1719050'>the</span> <span m='1719140'>big</span> <span m='1719350'>chain</span>
  <span m='1719740'>which</span> <span m='1720370'>cost</span> <span m='1720670'>log</span>
  <span m='1720970'>n</span> <span m='1721060'>over</span> <span m='1721250'>over</span>
  <span m='1721270'>log</span> <span m='1721480'>log</span> <span m='1721710'>n</span>
  <span m='1721930'>to</span> <span m='1722190'>touch,</span> <span m='1724570'>which</span>
  <span m='1724810'>is</span> <span m='1724930'>expensive.</span> <span m='1726190'>But</span>
  <span m='1726550'>you</span> <span m='1726700'>could</span> <span m='1726850'>then</span>
  <span m='1727030'>put</span> <span m='1727240'>all</span> <span m='1727360'>those</span>
  <span m='1727540'>guys</span> <span m='1727780'>into</span> <span m='1727960'>cache,</span>
  <span m='1728410'>and</span> <span m='1728500'>if</span> <span m='1728620'>you</span>
  <span m='1728770'>happen</span> <span m='1729070'>to</span> <span m='1729190'>keep</span>
  <span m='1729520'>probing</span> <span m='1729880'>there</span> <span m='1732320'>you</span>
  <span m='1732380'>know</span> <span m='1732550'>it</span> <span m='1732610'>should</span>
  <span m='1732730'>be</span> <span m='1732850'>faster.</span> </p><p><span m='1735070'>In</span>
  <span m='1735190'>general,</span> <span m='1735910'>you</span> <span m='1736000'>do</span>
  <span m='1736150'>a</span> <span m='1736210'>bunch</span> <span m='1736480'>of</span>
  <span m='1736570'>searches.</span> <span m='1738370'>OK,</span> <span m='1740080'>first</span>
  <span m='1740440'>I search</span> <span m='1740740'>for</span> <span m='1740980'>x1,</span>
  <span m='1741530'>then</span> <span m='1741810'>I</span> <span m='1741960'>search</span>
  <span m='1742180'>for</span> <span m='1742330'>x2,</span> <span m='1742980'>x3,</span>
  <span m='1744730'>so</span> <span m='1744940'>on.</span> <span m='1746020'>Cluster</span>
  <span m='1746500'>those</span> <span m='1747780'>into</span> <span m='1747980'>groups</span>
  <span m='1748830'>theta</span> <span m='1749170'>log</span> <span m='1749470'>n.</span>
  <span m='1750770'>OK,</span> <span m='1750950'>let's</span> <span m='1751120'>look</span>
  <span m='1751270'>at</span> <span m='1751330'>the</span> <span m='1751420'>first</span>
  <span m='1751720'>log</span> <span m='1751930'>n</span> <span m='1752080'>searches,</span>
  <span m='1752530'>then</span> <span m='1752680'>the</span> <span m='1752770'>next</span>
  <span m='1753010'>log</span> <span m='1753250'>n</span> <span m='1753340'>searches,</span>
  <span m='1753700'>and</span> <span m='1753790'>analyze</span> <span m='1754300'>those</span>
  <span m='1755160'>separately.</span> <span m='1756140'>We're</span> <span m='1756240'>going</span>
  <span m='1756250'>to</span> <span m='1756310'>amortize</span> <span m='1757060'>over</span>
  <span m='1757390'>that</span> <span m='1758080'>period</span> <span m='1758470'>of</span>
  <span m='1758570'>log</span> <span m='1759010'>n.</span> </p><p><span m='1760130'>So</span>
  <span m='1760300'>if</span> <span m='1760390'>we</span> <span m='1760480'>look</span>
  <span m='1760750'>at</span> <span m='1762310'>theta</span> <span m='1762580'>log</span>
  <span m='1762960'>n--</span> <span m='1765290'>actually,</span> <span m='1765770'>this</span>
  <span m='1766000'>is</span> <span m='1766240'>written</span> <span m='1766510'>in</span>
  <span m='1766630'>a</span> <span m='1766690'>funny</span> <span m='1766930'>way.</span>
  <span m='1774342'>You've</span> <span m='1774790'>got the</span> <span m='1774940'>data,</span>
  <span m='1775390'>just</span> <span m='1775570'>log</span> <span m='1775900'>n.</span>
  <span m='1782590'>So</span> <span m='1782800'>I'm</span> <span m='1782890'>going</span>
  <span m='1783010'>to</span> <span m='1783070'>look</span> <span m='1783220'>at</span>
  <span m='1783280'>a</span> <span m='1783340'>batch</span> <span m='1783730'>of</span>
  <span m='1783820'>log</span> <span m='1784000'>n</span> <span m='1784150'>operations.</span>
  <span m='1785500'>And</span> <span m='1785650'>I</span> <span m='1785710'>claim</span>
  <span m='1786670'>that</span> <span m='1786970'>the</span> <span m='1787810'>number</span>
  <span m='1788110'>of</span> <span m='1788230'>keys</span> <span m='1788590'>that</span>
  <span m='1788740'>collide</span> <span m='1789250'>with</span> <span m='1789400'>them</span>
  <span m='1792520'>is</span> <span m='1792870'>theta</span> <span m='1793090'>log</span>
  <span m='1793370'>n,</span> <span m='1794620'>with</span> <span m='1794800'>high</span>
  <span m='1794950'>probability.</span> <span m='1799530'>If</span> <span m='1799620'>this</span>
  <span m='1799800'>is</span> <span m='1799890'>true,</span> <span m='1804750'>then</span>
  <span m='1804900'>it's</span> <span m='1805110'>constant</span> <span m='1805560'>each.</span>
  </p><p><span m='1806460'>If</span> <span m='1806550'>I</span> <span m='1806640'>can</span>
  <span m='1806760'>do</span> <span m='1806850'>log</span> <span m='1807220'>n</span>
  <span m='1807300'>operations</span> <span m='1808530'>by</span> <span m='1808680'>visiting</span>
  <span m='1809220'>order</span> <span m='1809490'>log</span> <span m='1809910'>n</span>
  <span m='1810240'>total</span> <span m='1811380'>chain</span> <span m='1811710'>items</span>
  <span m='1812670'>with</span> <span m='1812790'>high</span> <span m='1812940'>probability,</span>
  <span m='1813810'>then</span> <span m='1813990'>I</span> <span m='1814050'>just</span>
  <span m='1814230'>charge</span> <span m='1815160'>one</span> <span m='1815370'>each.</span>
  <span m='1815550'>And</span> <span m='1815640'>so</span> <span m='1815790'>amortized</span>
  <span m='1816360'>over</span> <span m='1816540'>this</span> <span m='1816690'>little</span>
  <span m='1816930'>log</span> <span m='1817270'>n</span> <span m='1817820'>window</span>
  <span m='1818075'>of</span> <span m='1818330'>sort of</span> <span m='1818460'>smoothing</span>
  <span m='1819000'>the</span> <span m='1819090'>cost.</span> <span m='1820470'>With</span>
  <span m='1820620'>high</span> <span m='1820860'>probability</span> <span m='1821580'>now,</span>
  <span m='1821940'>not</span> <span m='1822150'>just</span> <span m='1822330'>expectation,</span>
  <span m='1823410'>I</span> <span m='1823530'>get</span> <span m='1823710'>constant</span>
  <span m='1824220'>amortized</span> <span m='1824790'>per</span> <span m='1824970'>operation.</span>
  <span m='1826560'>So</span> <span m='1826780'>I</span> <span m='1827010'>should</span>
  <span m='1827370'>have</span> <span m='1827655'>said,</span> <span m='1827940'>with</span>
  <span m='1828120'>high</span> <span m='1828300'>probability.</span> </p><p><span
  m='1833040'>Why</span> <span m='1833250'>is</span> <span m='1833400'>this</span>
  <span m='1833550'>true?</span> <span m='1835050'>It's</span> <span m='1835380'>essentially</span>
  <span m='1835770'>the</span> <span m='1835860'>same</span> <span m='1836160'>argument.</span>
  <span m='1836580'>Here</span> <span m='1837830'>this is</span> <span m='1837960'>normally</span>
  <span m='1838260'>called</span> <span m='1838440'>a</span> <span m='1838500'>balls</span>
  <span m='1838860'>and</span> <span m='1838980'>bin</span> <span m='1839480'>argument.</span>
  <span m='1840000'>So</span> <span m='1840180'>you're</span> <span m='1840720'>throwing</span>
  <span m='1841050'>balls,</span> <span m='1841590'>which</span> <span m='1841770'>are</span>
  <span m='1841830'>your</span> <span m='1841980'>keys,</span> <span m='1842310'>randomly</span>
  <span m='1842910'>into</span> <span m='1843150'>your</span> <span m='1843300'>bins,</span>
  <span m='1843900'>which</span> <span m='1844140'>are</span> <span m='1844690'>your</span>
  <span m='1844830'>slots.</span> <span m='1846600'>And</span> <span m='1847320'>the</span>
  <span m='1847500'>expectation</span> <span m='1848190'>is</span> <span m='1848340'>constant</span>
  <span m='1849450'>probability</span> <span m='1849735'>to</span> <span m='1850020'>any</span>
  <span m='1850230'>one</span> <span m='1850380'>of</span> <span m='1850470'>them,</span>
  <span m='1851860'>I</span> <span m='1851960'>mean</span> <span m='1851970'>any</span>
  <span m='1852180'>one</span> <span m='1852300'>of</span> <span m='1852360'>them</span>
  <span m='1852540'>could</span> <span m='1852660'>go</span> <span m='1852870'>up</span>
  <span m='1852990'>to</span> <span m='1853110'>log</span> <span m='1853350'>n</span>
  <span m='1853470'>over</span> <span m='1853650'>log log</span> <span m='1853950'>n,</span>
  <span m='1854780'>high</span> <span m='1855120'>probability.</span> </p><p><span
  m='1856590'>Over</span> <span m='1856830'>here,</span> <span m='1857760'>we're</span>
  <span m='1857910'>looking</span> <span m='1858210'>at</span> <span m='1858360'>log</span>
  <span m='1858860'>n</span> <span m='1859110'>different</span> <span m='1859410'>slots</span>
  <span m='1859950'>and</span> <span m='1860070'>taking</span> <span m='1860550'>the</span>
  <span m='1860925'>sum</span> <span m='1861540'>of</span> <span m='1861900'>balls</span>
  <span m='1862380'>that</span> <span m='1862530'>fall</span> <span m='1862770'>into</span>
  <span m='1862920'>each</span> <span m='1863130'>of</span> <span m='1863190'>the</span>
  <span m='1863310'>slots.</span> <span m='1864990'>And</span> <span m='1865290'>in</span>
  <span m='1865470'>expectation</span> <span m='1866490'>that's</span> <span m='1866790'>log</span>
  <span m='1867170'>n,</span> <span m='1867450'>because</span> <span m='1867690'>it's</span>
  <span m='1867840'>constant</span> <span m='1868260'>each.</span> <span m='1868470'>An</span>
  <span m='1868560'>expectation</span> <span m='1869100'>is</span> <span m='1869190'>linear</span>
  <span m='1869650'>if</span> <span m='1869710'>you're</span> <span m='1869790'>taking</span>
  <span m='1870120'>the</span> <span m='1870210'>sum</span> <span m='1870900'>over</span>
  <span m='1871140'>these</span> <span m='1871380'>log</span> <span m='1871680'>n</span>
  <span m='1871830'>bins.</span> <span m='1872760'>So</span> <span m='1872880'>the</span>
  <span m='1873000'>expectation</span> <span m='1873660'>is</span> <span m='1873780'>log</span>
  <span m='1874070'>n.</span> </p><p><span m='1874620'>So</span> <span m='1874710'>you</span>
  <span m='1874770'>apply</span> <span m='1875070'>Chernoff</span> <span m='1875550'>again.</span>
  <span m='1876390'>Except</span> <span m='1876660'>now</span> <span m='1876990'>the</span>
  <span m='1877110'>mean</span> <span m='1877770'>is</span> <span m='1877960'>log</span>
  <span m='1878170'>n.</span> <span m='1879210'>And</span> <span m='1879360'>then</span>
  <span m='1879570'>it</span> <span m='1879690'>suffices</span> <span m='1880230'>to</span>
  <span m='1880320'>put c</span> <span m='1880500'>equals</span> <span m='1880960'>2.</span>
  <span m='1882080'>We</span> <span m='1882150'>can</span> <span m='1882300'>run</span>
  <span m='1882480'>through</span> <span m='1882660'>this.</span> </p><p><span m='1883410'>So</span>
  <span m='1883530'>here</span> <span m='1883710'>we</span> <span m='1883800'>get</span>
  <span m='1884100'>the</span> <span m='1884220'>mean</span> <span m='1884770'>is</span>
  <span m='1886300'>theta</span> <span m='1886770'>log n.</span> <span m='1887130'>We</span>
  <span m='1887220'>expect</span> <span m='1887760'>there</span> <span m='1887910'>to</span>
  <span m='1888030'>be</span> <span m='1888650'>log</span> <span m='1889010'>n</span>
  <span m='1889260'>items</span> <span m='1890400'>that</span> <span m='1890550'>fall</span>
  <span m='1890790'>into</span> <span m='1890970'>these</span> <span m='1891150'>log</span>
  <span m='1891360'>n</span> <span m='1891570'>bins.</span> <span m='1893190'>And</span>
  <span m='1893310'>so</span> <span m='1893670'>you</span> <span m='1893790'>just</span>
  <span m='1893970'>plug in</span> <span m='1894360'>c</span> <span m='1894675'>equals</span>
  <span m='1894990'>2</span> <span m='1895100'>to the</span> <span m='1895230'>Chernoff</span>
  <span m='1895590'>bound</span> <span m='1896460'>and</span> <span m='1896640'>you</span>
  <span m='1896730'>get</span> <span m='1898130'>e</span> <span m='1898980'>to</span>
  <span m='1899130'>the</span> <span m='1899310'>log</span> <span m='1899700'>n--</span>
  <span m='1900170'>which is</span> <span m='1900360'>kind</span> <span m='1900540'>of</span>
  <span m='1900630'>weird--</span> <span m='1901860'>over</span> <span m='1903450'>2</span>
  <span m='1904020'>log</span> <span m='1904410'>n</span> <span m='1905636'>to</span>
  <span m='1906040'>the</span> <span m='1906350'>2</span> <span m='1906660'>log</span>
  <span m='1906930'>n.</span> <span m='1909420'>So</span> <span m='1909600'>this</span>
  <span m='1909810'>thing</span> <span m='1913190'>is</span> <span m='1913350'>like</span>
  <span m='1913500'>n</span> <span m='1913720'>to</span> <span m='1913830'>the</span>
  <span m='1913950'>log</span> <span m='1914220'>log</span> <span m='1914430'>n</span>
  <span m='1916560'>2.</span> <span m='1918060'>So</span> <span m='1918210'>this</span>
  <span m='1918420'>is</span> <span m='1918540'>big,</span> <span m='1919320'>way</span>
  <span m='1919500'>bigger</span> <span m='1919770'>than</span> <span m='1919950'>this.</span>
  <span m='1920250'>So this</span> <span m='1920550'>essentially</span> <span m='1920970'>disappears.</span>
  </p><p><span m='1922850'>And</span> <span m='1922940'>in</span> <span m='1923010'>particular,</span>
  <span m='1923460'>this</span> <span m='1923670'>is</span> <span m='1923760'>bigger</span>
  <span m='1924170'>than</span> <span m='1925500'>1</span> <span m='1925710'>over</span>
  <span m='1925880'>n</span> <span m='1926000'>to the</span> <span m='1926130'>c,</span>
  <span m='1926880'>for</span> <span m='1927030'>any</span> <span m='1927210'>c.</span>
  <span m='1927945'>So</span> <span m='1928290'>log log</span> <span m='1928640'>n</span>
  <span m='1928860'>is</span> <span m='1928980'>bigger</span> <span m='1929220'>than</span>
  <span m='1929370'>any</span> <span m='1929520'>constant.</span> <span m='1931900'>So</span>
  <span m='1932010'>you're</span> <span m='1932130'>done.</span> <span m='1933250'>So</span>
  <span m='1933300'>that's</span> <span m='1933510'>just</span> <span m='1933570'>saying</span>
  <span m='1933780'>the</span> <span m='1933870'>probability</span> <span m='1934470'>that</span>
  <span m='1934620'>you're</span> <span m='1934740'>more</span> <span m='1934920'>than</span>
  <span m='1935100'>twice</span> <span m='1935580'>the</span> <span m='1935700'>mean</span>
  <span m='1936610'>is</span> <span m='1937770'>very,</span> <span m='1938200'>very</span>
  <span m='1938280'>small.</span> <span m='1938700'>So</span> <span m='1939060'>with</span>
  <span m='1939210'>high</span> <span m='1939360'>probability</span> <span m='1940350'>there's</span>
  <span m='1940450'>only</span> <span m='1940620'>log</span> <span m='1940860'>n</span>
  <span m='1941730'>items</span> <span m='1942090'>that</span> <span m='1942170'>fall</span>
  <span m='1942360'>in</span> <span m='1942450'>these</span> <span m='1942600'>log</span>
  <span m='1942840'>n</span> <span m='1942960'>bins.</span> <span m='1943200'>So</span>
  <span m='1943380'>you</span> <span m='1943440'>just</span> <span m='1943590'>amortize,</span>
  <span m='1944040'>boom,</span> <span m='1944340'>constant.</span> </p><p><span m='1945510'>This</span>
  <span m='1945690'>is</span> <span m='1945780'>kind</span> <span m='1945960'>of</span>
  <span m='1946050'>a</span> <span m='1946110'>weird</span> <span m='1946710'>notion.</span>
  <span m='1947010'>I've</span> <span m='1947130'>never</span> <span m='1947370'>actually</span>
  <span m='1947670'>seen</span> <span m='1947910'>amortized</span> <span m='1948420'>with</span>
  <span m='1948540'>high</span> <span m='1948660'>probability</span> <span m='1949410'>ever</span>
  <span m='1949770'>in</span> <span m='1949890'>a</span> <span m='1949950'>paper.</span>
  <span m='1951070'>This</span> <span m='1951420'>is</span> <span m='1951600'>the</span>
  <span m='1951690'>first</span> <span m='1951960'>time</span> <span m='1952200'>it</span>
  <span m='1952260'>seems</span> <span m='1952500'>like</span> <span m='1952680'>a</span>
  <span m='1952740'>useful</span> <span m='1953640'>concept.</span> <span m='1955330'>So</span>
  <span m='1957210'>if</span> <span m='1957360'>you</span> <span m='1957480'>think</span>
  <span m='1957750'>log</span> <span m='1958020'>n</span> <span m='1958110'>over</span>
  <span m='1958650'>log</span> <span m='1959010'>log</span> <span m='1959370'>n</span>
  <span m='1959550'>is</span> <span m='1959670'>bad,</span> <span m='1960160'>this</span>
  <span m='1960270'>is</span> <span m='1960420'>a</span> <span m='1960510'>sense</span>
  <span m='1960810'>in</span> <span m='1960900'>which</span> <span m='1961410'>it's</span>
  <span m='1961670'>OK.</span> <span m='1962880'>Don't</span> <span m='1963030'>worry</span>
  <span m='1963150'>about</span> <span m='1963420'>it.</span> </p><p><span m='1965820'>All</span>
  <span m='1965910'>right,</span> <span m='1967130'>but</span> <span m='1967470'>if</span>
  <span m='1967620'>you</span> <span m='1967680'>did</span> <span m='1967830'>worry</span>
  <span m='1968010'>about</span> <span m='1968250'>it,</span> <span m='1968490'>next</span>
  <span m='1968700'>thing</span> <span m='1968850'>you</span> <span m='1968940'>do</span>
  <span m='1969390'>is</span> <span m='1973130'>perfect</span> <span m='1973460'>hashing.</span>
  <span m='1992266'>So,</span> <span m='1992710'>perfect</span> <span m='1993040'>hashing</span>
  <span m='1993430'>is</span> <span m='1993550'>really</span> <span m='1993790'>just</span>
  <span m='1994750'>an</span> <span m='1994900'>embellishment.</span> <span m='1997260'>This</span>
  <span m='1997720'>is</span> <span m='1997900'>also</span> <span m='1998140'>called</span>
  <span m='1998570'>FKS</span> <span m='1998950'>hashing.</span> <span m='2001000'>From</span>
  <span m='2001350'>the</span> <span m='2001470'>authors,</span> <span m='2002130'>Friedman,</span>
  <span m='2002700'>Komlosh,</span> <span m='2003510'>and</span> <span m='2004280'>[?
  Samaretti. ?]</span> <span m='2007800'>This</span> <span m='2007980'>is</span> <span
  m='2008130'>from</span> <span m='2008460'>1984,</span> <span m='2009390'>so</span>
  <span m='2009790'>old</span> <span m='2009990'>idea.</span> </p><p><span m='2010350'>You</span>
  <span m='2010680'>just</span> <span m='2010980'>take</span> <span m='2011820'>chaining,</span>
  <span m='2012690'>but</span> <span m='2012870'>instead</span> <span m='2013170'>of</span>
  <span m='2013260'>storing</span> <span m='2013590'>your</span> <span m='2013680'>chains</span>
  <span m='2014010'>in</span> <span m='2014090'>a</span> <span m='2014150'>linked</span>
  <span m='2014370'>list,</span> <span m='2014880'>store</span> <span m='2015150'>them</span>
  <span m='2015300'>in</span> <span m='2015390'>a</span> <span m='2015450'>hash</span>
  <span m='2015690'>table.</span> <span m='2016590'>Simple</span> <span m='2016890'>idea.</span>
  <span m='2018550'>There's</span> <span m='2018870'>one</span> <span m='2019140'>clever</span>
  <span m='2019470'>trick.</span> <span m='2024090'>You</span> <span m='2024180'>store</span>
  <span m='2024390'>it</span> <span m='2024450'>in</span> <span m='2024570'>a</span>
  <span m='2024630'>big</span> <span m='2024840'>hash</span> <span m='2025080'>table.</span>
  <span m='2028410'>Hash</span> <span m='2028710'>table</span> <span m='2029220'>of</span>
  <span m='2029430'>size</span> <span m='2031160'>theta</span> <span m='2031790'>ct</span>
  <span m='2032840'>squared.</span> </p><p><span m='2035960'>Now</span> <span m='2036100'>this</span>
  <span m='2036250'>looks</span> <span m='2036430'>like</span> <span m='2037300'>a</span>
  <span m='2037360'>problem</span> <span m='2038020'>because</span> <span m='2038590'>that's</span>
  <span m='2038770'>going</span> <span m='2038920'>to</span> <span m='2039010'>be</span>
  <span m='2039160'>quadratic</span> <span m='2039730'>space,</span> <span m='2040120'>in</span>
  <span m='2040210'>the</span> <span m='2040300'>worst</span> <span m='2040510'>case,</span>
  <span m='2040720'>if</span> <span m='2040840'>everybody</span> <span m='2041260'>hashes</span>
  <span m='2041650'>to</span> <span m='2041770'>the</span> <span m='2041890'>same</span>
  <span m='2042190'>chain.</span> <span m='2043060'>But</span> <span m='2043210'>we</span>
  <span m='2043300'>know</span> <span m='2043480'>that</span> <span m='2043630'>chains</span>
  <span m='2043960'>are</span> <span m='2044020'>pretty</span> <span m='2044260'>small</span>
  <span m='2044590'>with</span> <span m='2044740'>high</span> <span m='2044860'>probability.</span>
  <span m='2047030'>So</span> <span m='2048130'>turns</span> <span m='2048340'>out</span>
  <span m='2048429'>this</span> <span m='2048580'>is</span> <span m='2048699'>OK.</span>
  <span m='2049989'>The</span> <span m='2050080'>space</span> <span m='2052960'>is</span>
  <span m='2053139'>sum</span> <span m='2054340'>of</span> <span m='2054820'>ct</span>
  <span m='2055159'>squared.</span> </p><p><span m='2059250'>And</span> <span m='2059489'>that's</span>
  <span m='2059639'>something</span> <span m='2059940'>we</span> <span m='2060030'>actually</span>
  <span m='2060360'>computed</span> <span m='2060810'>already,</span> <span m='2061760'>except</span>
  <span m='2062100'>I</span> <span m='2062429'>erased</span> <span m='2063060'>it.</span>
  <span m='2063330'>How</span> <span m='2063449'>convenient</span> <span m='2063779'>of
  me.</span> <span m='2064110'>It</span> <span m='2064199'>was</span> <span m='2064380'>right</span>
  <span m='2064620'>here.</span> <span m='2065179'>I can</span> <span m='2065380'>still</span>
  <span m='2065670'>barely</span> <span m='2066000'>read</span> <span m='2066179'>it.</span>
  <span m='2066780'>When</span> <span m='2066960'>we</span> <span m='2067050'>computed</span>
  <span m='2067409'>the</span> <span m='2067500'>variance.</span> <span m='2069330'>We</span>
  <span m='2069449'>can</span> <span m='2069570'>do</span> <span m='2069690'>it</span>
  <span m='2069750'>again</span> <span m='2070050'>it's</span> <span m='2070170'>not</span>
  <span m='2070290'>really</span> <span m='2070469'>that</span> <span m='2070620'>hard.</span>
  </p><p><span m='2071219'>This</span> <span m='2071460'>is</span> <span m='2071699'>the</span>
  <span m='2071969'>number</span> <span m='2072389'>of</span> <span m='2072540'>pairs</span>
  <span m='2072989'>of</span> <span m='2073080'>keys</span> <span m='2073380'>that</span>
  <span m='2073500'>collide.</span> <span m='2074770'>And</span> <span m='2074880'>so</span>
  <span m='2076190'>there's</span> <span m='2076389'>n</span> <span m='2076650'>squared</span>
  <span m='2077340'>pairs</span> <span m='2078690'>and</span> <span m='2079440'>each</span>
  <span m='2079679'>of</span> <span m='2079739'>them</span> <span m='2079980'>has</span>
  <span m='2080239'>a</span> <span m='2080280'>probability</span> <span m='2081150'>1</span>
  <span m='2081644'>over me</span> <span m='2082139'>of</span> <span m='2082260'>colliding</span>
  <span m='2082830'>if</span> <span m='2082980'>you</span> <span m='2083070'>have</span>
  <span m='2083219'>a</span> <span m='2083280'>universal</span> <span m='2083790'>hash</span>
  <span m='2084000'>function.</span> <span m='2085300'>So</span> <span m='2085560'>this</span>
  <span m='2085770'>is</span> <span m='2085980'>n</span> <span m='2086190'>squared</span>
  <span m='2086460'>over</span> <span m='2086650'>m,</span> <span m='2089250'>which</span>
  <span m='2089550'>if</span> <span m='2089760'>m</span> <span m='2090030'>is</span>
  <span m='2090210'>within</span> <span m='2090449'>a</span> <span m='2090510'>constant</span>
  <span m='2090840'>factor</span> <span m='2091139'>of</span> <span m='2091230'>n,</span>
  <span m='2092040'>is</span> <span m='2092250'>linear.</span> </p><p><span m='2099890'>So</span>
  <span m='2100340'>linear</span> <span m='2100610'>space</span> <span m='2101260'>in</span>
  <span m='2101390'>expectation.</span> <span m='2104990'>Expected</span> <span m='2106040'>amount</span>
  <span m='2106220'>of</span> <span m='2106280'>space</span> <span m='2106700'>is</span>
  <span m='2106850'>linear.</span> <span m='2107210'>I</span> <span m='2107270'>won't</span>
  <span m='2107480'>try</span> <span m='2107630'>to</span> <span m='2107750'>do</span>
  <span m='2107900'>with</span> <span m='2108020'>high</span> <span m='2108170'>probability</span>
  <span m='2108700'>bound</span> <span m='2108950'>here.</span> <span m='2110580'>What</span>
  <span m='2110720'>else</span> <span m='2110960'>can</span> <span m='2111140'>I</span>
  <span m='2111230'>say?</span> </p><p><span m='2116190'>You</span> <span m='2116310'>have</span>
  <span m='2116430'>to</span> <span m='2116520'>play</span> <span m='2116700'>a</span>
  <span m='2116760'>similar</span> <span m='2117180'>trick</span> <span m='2117840'>when</span>
  <span m='2118020'>you're</span> <span m='2118110'>actually</span> <span m='2118470'>building</span>
  <span m='2118830'>these</span> <span m='2119010'>hash</span> <span m='2119310'>tables.</span>
  <span m='2119700'>All</span> <span m='2119790'>right,</span> <span m='2120000'>so</span>
  <span m='2120660'>why</span> <span m='2120900'>do</span> <span m='2120990'>we</span>
  <span m='2121110'>use</span> <span m='2121320'>n</span> <span m='2121470'>squared?</span>
  <span m='2122850'>Because</span> <span m='2123300'>of the</span> <span m='2123420'>birthday</span>
  <span m='2123720'>paradox.</span> <span m='2124980'>So</span> <span m='2125960'>if</span>
  <span m='2126100'>you</span> <span m='2126300'>have</span> <span m='2126540'>a</span>
  <span m='2126570'>hash</span> <span m='2126840'>table</span> <span m='2127100'>of</span>
  <span m='2128760'>size</span> <span m='2129030'>n</span> <span m='2129150'>squared,</span>
  <span m='2129530'>essentially,</span> <span m='2129870'>or</span> <span m='2129940'>ct</span>
  <span m='2130290'>squared</span> <span m='2133530'>with</span> <span m='2133710'>high</span>
  <span m='2133830'>probability</span> <span m='2134610'>or</span> <span m='2134760'>constant</span>
  <span m='2135210'>probability</span> <span m='2135770'>you</span> <span m='2135870'>don't</span>
  <span m='2136020'>get</span> <span m='2136170'>any</span> <span m='2136410'>collisions.</span>
  <span m='2137560'>Why?</span> </p><p><span m='2138150'>Because</span> <span m='2139230'>then</span>
  <span m='2139490'>they</span> <span m='2139580'>expected</span> <span m='2140070'>number</span>
  <span m='2140310'>of</span> <span m='2140400'>collisions</span> <span m='2145014'>in</span>
  <span m='2145490'>ct.</span> <span m='2147200'>Well,</span> <span m='2147370'>there's</span>
  <span m='2147710'>ct</span> <span m='2147900'>pairs</span> <span m='2148740'>or</span>
  <span m='2148830'>ct</span> <span m='2149130'>squared</span> <span m='2149550'>pairs.</span>
  <span m='2150570'>Each</span> <span m='2150780'>of</span> <span m='2150840'>them,</span>
  <span m='2151450'>if</span> <span m='2151630'>you're</span> <span m='2151720'>using</span>
  <span m='2152040'>universal</span> <span m='2152490'>hashing,</span> <span m='2152970'>had</span>
  <span m='2153300'>a</span> <span m='2153510'>probability</span> <span m='2154320'>of</span>
  <span m='2154590'>1</span> <span m='2154860'>over</span> <span m='2155220'>ct</span>
  <span m='2155460'>squared</span> <span m='2156560'>of</span> <span m='2157530'>happening.</span>
  <span m='2158190'>Because</span> <span m='2158370'>that's</span> <span m='2158610'>the</span>
  <span m='2158730'>table</span> <span m='2159030'>size,</span> <span m='2159470'>1</span>
  <span m='2159630'>over</span> <span m='2159710'>m.</span> <span m='2160752'>So</span>
  <span m='2161250'>this</span> <span m='2161430'>is</span> <span m='2161550'>constant.</span>
  </p><p><span m='2164050'>And</span> <span m='2164130'>if</span> <span m='2164220'>we</span>
  <span m='2164310'>set</span> <span m='2164520'>the</span> <span m='2164610'>constants</span>
  <span m='2165120'>right,</span> <span m='2165420'>I</span> <span m='2165540'>get</span>
  <span m='2165690'>to</span> <span m='2165780'>set</span> <span m='2166020'>this</span>
  <span m='2166270'>theta</span> <span m='2166590'>to</span> <span m='2166710'>be</span>
  <span m='2166860'>whatever</span> <span m='2167190'>I</span> <span m='2167280'>want.</span>
  <span m='2168610'>I</span> <span m='2168810'>get</span> <span m='2169050'>this</span>
  <span m='2169200'>to</span> <span m='2169350'>be</span> <span m='2169620'>less</span>
  <span m='2170070'>than</span> <span m='2170580'>1/2.</span> <span m='2172960'>If</span>
  <span m='2173220'>the</span> <span m='2173400'>expected</span> <span m='2174000'>number</span>
  <span m='2174210'>of</span> <span m='2174270'>collisions</span> <span m='2174750'>is</span>
  <span m='2174900'>less</span> <span m='2175110'>than</span> <span m='2175260'>1/2,</span>
  <span m='2175740'>then</span> <span m='2176520'>the</span> <span m='2176640'>probability</span>
  <span m='2177990'>that</span> <span m='2178230'>the</span> <span m='2178350'>number</span>
  <span m='2178650'>of</span> <span m='2178740'>collisions</span> <span m='2182580'>is</span>
  <span m='2182820'>0</span> <span m='2185100'>is</span> <span m='2185280'>at</span>
  <span m='2185370'>least</span> <span m='2185670'>a</span> <span m='2185730'>1/2.</span>
  <span m='2186960'>This</span> <span m='2187170'>is</span> <span m='2187350'>Markov's</span>
  <span m='2187800'>inequality,</span> <span m='2188730'>in</span> <span m='2189060'>particular.</span>
  <span m='2191960'>The</span> <span m='2192060'>probability</span> <span m='2192510'>number
  of</span> <span m='2192750'>collisions</span> <span m='2193140'>is</span> <span
  m='2193260'>at</span> <span m='2193320'>least</span> <span m='2193650'>1</span>
  <span m='2194100'>is</span> <span m='2194240'>at</span> <span m='2194370'>most</span>
  <span m='2198500'>the</span> <span m='2198620'>expectation</span> <span m='2199340'>over</span>
  <span m='2200100'>1,</span> <span m='2200830'>so</span> <span m='2200930'>which</span>
  <span m='2201110'>is</span> <span m='2201260'>1/2.</span> </p><p><span m='2203990'>So</span>
  <span m='2204950'>you</span> <span m='2205250'>try</span> <span m='2205550'>to</span>
  <span m='2205640'>build</span> <span m='2205820'>this</span> <span m='2205970'>table.</span>
  <span m='2206510'>If</span> <span m='2206630'>you</span> <span m='2206690'>have</span>
  <span m='2206780'>0</span> <span m='2207020'>collisions</span> <span m='2208520'>you're</span>
  <span m='2208760'>happy.</span> <span m='2209060'>You</span> <span m='2209120'>go</span>
  <span m='2209230'>on</span> <span m='2209350'>to</span> <span m='2209450'>the</span>
  <span m='2209510'>next</span> <span m='2209750'>one.</span> <span m='2209990'>If</span>
  <span m='2210140'>you</span> <span m='2210200'>don't</span> <span m='2210440'>have</span>
  <span m='2210560'>0</span> <span m='2210740'>collisions,</span> <span m='2211160'>just</span>
  <span m='2211340'>try</span> <span m='2211550'>again.</span> <span m='2212090'>So</span>
  <span m='2212280'>in</span> <span m='2212300'>an</span> <span m='2212480'>expected</span>
  <span m='2212960'>constant</span> <span m='2213350'>number</span> <span m='2213560'>of</span>
  <span m='2213650'>trials</span> <span m='2214190'>you're</span> <span m='2214310'>flipping</span>
  <span m='2214640'>a</span> <span m='2214700'>coin</span> <span m='2215000'>each</span>
  <span m='2215150'>time.</span> <span m='2215440'>Eventually</span> <span m='2215810'>you'll</span>
  <span m='2215900'>get</span> <span m='2216050'>heads.</span> </p><p><span m='2216920'>Then</span>
  <span m='2217070'>you</span> <span m='2217160'>can</span> <span m='2217250'>build</span>
  <span m='2217430'>this</span> <span m='2217550'>table.</span> <span m='2218880'>And</span>
  <span m='2218960'>then</span> <span m='2219080'>you</span> <span m='2219170'>have</span>
  <span m='2219290'>0</span> <span m='2219560'>collisions.</span> <span m='2220430'>So</span>
  <span m='2220600'>we</span> <span m='2221300'>always</span> <span m='2221600'>want</span>
  <span m='2221840'>them</span> <span m='2221990'>to</span> <span m='2222110'>be</span>
  <span m='2222290'>collision</span> <span m='2222710'>free.</span> </p><p><span m='2227930'>So</span>
  <span m='2228380'>in</span> <span m='2229270'>an</span> <span m='2229400'>expected</span>
  <span m='2229880'>linear</span> <span m='2230180'>time</span> <span m='2230630'>you</span>
  <span m='2230750'>can</span> <span m='2230900'>build</span> <span m='2231110'>this</span>
  <span m='2231260'>table</span> <span m='2232680'>and</span> <span m='2232790'>it</span>
  <span m='2232850'>will</span> <span m='2232940'>have</span> <span m='2233090'>expected</span>
  <span m='2233510'>linear</span> <span m='2233810'>space.</span> <span m='2234540'>In</span>
  <span m='2234640'>fact,</span> <span m='2234740'>if</span> <span m='2234830'>it</span>
  <span m='2234890'>doesn't</span> <span m='2235130'>have</span> <span m='2235240'>linear</span>
  <span m='2235470'>space</span> <span m='2235820'>you</span> <span m='2235910'>can</span>
  <span m='2236000'>just</span> <span m='2236270'>try</span> <span m='2236510'>the</span>
  <span m='2236570'>whole</span> <span m='2236750'>thing</span> <span m='2236960'>over</span>
  <span m='2237170'>again.</span> <span m='2237470'>So</span> <span m='2237840'>in</span>
  <span m='2238130'>expected</span> <span m='2238610'>linear</span> <span m='2238880'>time</span>
  <span m='2239180'>you'll</span> <span m='2239300'>build</span> <span m='2239540'>a</span>
  <span m='2239600'>guaranteed</span> <span m='2240170'>linear</span> <span m='2240440'>space</span>
  <span m='2240740'>structure.</span> </p><p><span m='2241280'>The</span> <span m='2241640'>nice</span>
  <span m='2241850'>thing</span> <span m='2242000'>about</span> <span m='2242180'>perfect</span>
  <span m='2242490'>hashing</span> <span m='2242870'>is</span> <span m='2242990'>you're</span>
  <span m='2243080'>doing</span> <span m='2243350'>two</span> <span m='2243710'>hash</span>
  <span m='2244520'>de-references</span> <span m='2245690'>and</span> <span m='2245810'>that's</span>
  <span m='2246020'>it.</span> <span m='2246650'>So</span> <span m='2247910'>the</span>
  <span m='2248480'>query</span> <span m='2252500'>is</span> <span m='2252680'>constant</span>
  <span m='2253250'>deterministic.</span> <span m='2254050'>Queries</span> <span m='2254540'>are</span>
  <span m='2254630'>now</span> <span m='2254810'>deterministic,</span> <span m='2255740'>only</span>
  <span m='2256190'>updates</span> <span m='2257090'>are</span> <span m='2257180'>randomized.</span>
  <span m='2258350'>I</span> <span m='2258500'>didn't</span> <span m='2258650'>talk</span>
  <span m='2258830'>about</span> <span m='2259220'>updates.</span> <span m='2259760'>I</span>
  <span m='2259890'>talked</span> <span m='2260150'>about</span> <span m='2260360'>building.</span>
  <span m='2261760'>The</span> <span m='2261950'>construction</span> <span m='2262550'>here</span>
  <span m='2262790'>is</span> <span m='2262910'>randomized,</span> <span m='2263900'>queries</span>
  <span m='2264350'>are</span> <span m='2264470'>constant</span> <span m='2264980'>deterministic.</span>
  </p><p><span m='2265820'>Now,</span> <span m='2266210'>you</span> <span m='2266330'>can</span>
  <span m='2266450'>make</span> <span m='2266630'>this</span> <span m='2266780'>dynamic</span>
  <span m='2268070'>in</span> <span m='2268220'>pretty</span> <span m='2268550'>much</span>
  <span m='2268760'>the</span> <span m='2268910'>obvious</span> <span m='2269270'>way</span>
  <span m='2270020'>you</span> <span m='2270140'>say,</span> <span m='2271080'>OK,</span>
  <span m='2271410'>I</span> <span m='2271510'>want</span> <span m='2271520'>to</span>
  <span m='2271580'>insert.</span> <span m='2272700'>So</span> <span m='2272810'>I</span>
  <span m='2275210'>compute</span> <span m='2275720'>which</span> <span m='2276200'>of</span>
  <span m='2276350'>the,</span> <span m='2277820'>it's</span> <span m='2277970'>essentially</span>
  <span m='2278360'>two</span> <span m='2278570'>level</span> <span m='2278840'>hashing.</span>
  <span m='2279410'>So</span> <span m='2279590'>first</span> <span m='2279890'>you</span>
  <span m='2279950'>figure</span> <span m='2280160'>out</span> <span m='2280280'>where</span>
  <span m='2280490'>it</span> <span m='2280550'>fits</span> <span m='2281270'>in</span>
  <span m='2281360'>the</span> <span m='2281420'>big</span> <span m='2281600'>hash</span>
  <span m='2281870'>table,</span> <span m='2282710'>then</span> <span m='2282980'>you</span>
  <span m='2283070'>find</span> <span m='2283310'>the</span> <span m='2283400'>corresponding</span>
  <span m='2283910'>chain,</span> <span m='2284210'>which</span> <span m='2284360'>is</span>
  <span m='2284450'>now</span> <span m='2284640'>hash</span> <span m='2284960'>table,</span>
  <span m='2285920'>and</span> <span m='2286070'>you</span> <span m='2286190'>insert</span>
  <span m='2286490'>into</span> <span m='2286640'>that</span> <span m='2286790'>hash</span>
  <span m='2287030'>table.</span> <span m='2287900'>So</span> <span m='2288200'>it's
  the</span> <span m='2288290'>obvious</span> <span m='2288560'>thing.</span> </p><p><span
  m='2289160'>The</span> <span m='2289250'>trouble</span> <span m='2289580'>is</span>
  <span m='2289760'>you</span> <span m='2289880'>might</span> <span m='2290090'>get</span>
  <span m='2290240'>a</span> <span m='2290300'>collision</span> <span m='2290750'>in</span>
  <span m='2290840'>that</span> <span m='2290990'>hash</span> <span m='2291230'>table.</span>
  <span m='2292190'>If</span> <span m='2292310'>you</span> <span m='2292400'>get</span>
  <span m='2292550'>a</span> <span m='2292610'>collision,</span> <span m='2294050'>you</span>
  <span m='2294170'>rebuild</span> <span m='2294590'>that</span> <span m='2294740'>hash</span>
  <span m='2294980'>table.</span> <span m='2296180'>Probability</span> <span m='2296780'>of</span>
  <span m='2296840'>the</span> <span m='2296930'>collision</span> <span m='2297290'>happening</span>
  <span m='2298940'>is</span> <span m='2299690'>essentially</span> <span m='2300230'>small.</span>
  <span m='2300740'>It's</span> <span m='2300860'>going</span> <span m='2300980'>to</span>
  <span m='2301070'>remain</span> <span m='2303620'>small</span> <span m='2305120'>because</span>
  <span m='2305330'>of</span> <span m='2305420'>this</span> <span m='2305660'>argument.</span>
  <span m='2306300'>Because</span> <span m='2306470'>we</span> <span m='2306560'>know</span>
  <span m='2306740'>the</span> <span m='2306800'>expected</span> <span m='2307130'>number</span>
  <span m='2307280'>of</span> <span m='2307340'>collisions</span> <span m='2307700'>remains</span>
  <span m='2307940'>small</span> <span m='2308600'>unless</span> <span m='2309080'>that</span>
  <span m='2309260'>chain</span> <span m='2309560'>gets</span> <span m='2309740'>really</span>
  <span m='2310010'>big.</span> </p><p><span m='2310820'>So</span> <span m='2310910'>if</span>
  <span m='2311000'>the</span> <span m='2311090'>chain</span> <span m='2311450'>grows</span>
  <span m='2311840'>by</span> <span m='2312170'>a</span> <span m='2312230'>factor</span>
  <span m='2312620'>of</span> <span m='2312710'>2,</span> <span m='2313760'>then</span>
  <span m='2315110'>generally</span> <span m='2315390'>you</span> <span m='2315470'>have</span>
  <span m='2315620'>to</span> <span m='2315710'>rebuild</span> <span m='2316100'>the</span>
  <span m='2316190'>table.</span> <span m='2317710'>But</span> <span m='2317870'>if</span>
  <span m='2318110'>your</span> <span m='2320900'>chain</span> <span m='2321260'>length</span>
  <span m='2321560'>grows</span> <span m='2321800'>by</span> <span m='2321920'>a</span>
  <span m='2321950'>factor</span> <span m='2322250'>of</span> <span m='2322380'>2,</span>
  <span m='2323120'>then</span> <span m='2323390'>you</span> <span m='2323480'>rebuild</span>
  <span m='2323900'>your</span> <span m='2323990'>table</span> <span m='2324380'>to</span>
  <span m='2324470'>have</span> <span m='2324800'>factor</span> <span m='2325400'>4</span>
  <span m='2325880'>size</span> <span m='2326270'>larger</span> <span m='2326720'>because</span>
  <span m='2327620'>it's</span> <span m='2327770'>ct</span> <span m='2328070'>squared.</span>
  <span m='2330410'>And</span> <span m='2330530'>in</span> <span m='2330620'>general,</span>
  <span m='2330950'>you</span> <span m='2331100'>maintain</span> <span m='2331640'>that</span>
  <span m='2331790'>the</span> <span m='2331880'>table</span> <span m='2332300'>is</span>
  <span m='2332390'>sized</span> <span m='2332960'>for</span> <span m='2333170'>a</span>
  <span m='2333200'>chain</span> <span m='2333740'>of</span> <span m='2334640'>roughly</span>
  <span m='2335240'>the</span> <span m='2335360'>correct</span> <span m='2335810'>chain</span>
  <span m='2336140'>length</span> <span m='2336590'>within</span> <span m='2336830'>a</span>
  <span m='2336890'>constant</span> <span m='2337220'>factor.</span> <span m='2338090'>And</span>
  <span m='2338210'>you</span> <span m='2338300'>do</span> <span m='2338430'>doubling</span>
  <span m='2338900'>and</span> <span m='2338990'>halving</span> <span m='2339800'>in</span>
  <span m='2339920'>the</span> <span m='2340010'>usual</span> <span m='2340250'>way,</span>
  <span m='2340700'>like</span> <span m='2341090'>b-tree.</span> <span m='2341510'>Or,</span>
  <span m='2341780'>I</span> <span m='2341870'>guess</span> <span m='2342080'>it's</span>
  <span m='2342260'>table</span> <span m='2342620'>doubling</span> <span m='2343010'>really.</span>
  <span m='2344840'>And</span> <span m='2345020'>it</span> <span m='2345080'>will</span>
  <span m='2345230'>be</span> <span m='2345560'>constant</span> <span m='2346680'>amortized</span>
  <span m='2347420'>expected</span> <span m='2348740'>per</span> <span m='2349280'>operation.</span>
  </p><p><span m='2351320'>And</span> <span m='2351500'>there's</span> <span m='2351650'>a</span>
  <span m='2351710'>fancy</span> <span m='2352130'>way</span> <span m='2352220'>to</span>
  <span m='2352340'>make</span> <span m='2352520'>this</span> <span m='2352700'>constant</span>
  <span m='2354650'>with</span> <span m='2354830'>high</span> <span m='2355010'>probability</span>
  <span m='2355880'>per</span> <span m='2356060'>insert</span> <span m='2356390'>and</span>
  <span m='2356480'>delete,</span> <span m='2357410'>which</span> <span m='2357890'>I</span>
  <span m='2359090'>have</span> <span m='2359270'>not</span> <span m='2359450'>read.</span>
  <span m='2359990'>But</span> <span m='2360140'>it's</span> <span m='2360350'>by</span>
  <span m='2360650'>[? Desfil ?]</span> <span m='2360990'>Binger</span> <span m='2361260'>and</span>
  <span m='2361380'>[? Meyer ?]</span> <span m='2361580'>[? Ofterheight, ?]</span>
  <span m='2362120'>1990.</span> <span m='2363890'>So,</span> <span m='2364730'>easy</span>
  <span m='2365000'>to</span> <span m='2365120'>make</span> <span m='2365330'>this</span>
  <span m='2366110'>expected</span> <span m='2366590'>amortized.</span> <span m='2368180'>With</span>
  <span m='2368510'>more</span> <span m='2368810'>effort</span> <span m='2369170'>you</span>
  <span m='2369350'>could</span> <span m='2369500'>make</span> <span m='2369680'>it</span>
  <span m='2369770'>with</span> <span m='2369950'>high</span> <span m='2370295'>probability</span>
  <span m='2370640'>per</span> <span m='2370790'>operation.</span> <span m='2372630'>That</span>
  <span m='2373050'>is</span> <span m='2373190'>trickier.</span> <span m='2375980'>Cool.</span>
  </p><p><span m='2377966'>I</span> <span m='2378350'>actually</span> <span m='2378650'>skipped</span>
  <span m='2379070'>one</span> <span m='2379310'>thing</span> <span m='2381650'>with</span>
  <span m='2381920'>chaining,</span> <span m='2382560'>which</span> <span m='2382640'>I</span>
  <span m='2382700'>wanted</span> <span m='2382860'>to</span> <span m='2383060'>talk</span>
  <span m='2383360'>about.</span> <span m='2383780'>So</span> <span m='2385550'>this</span>
  <span m='2385820'>analysis</span> <span m='2386330'>was</span> <span m='2386480'>fine,</span>
  <span m='2386810'>it</span> <span m='2386930'>just</span> <span m='2387420'>used</span>
  <span m='2387800'>universality.</span> <span m='2389180'>This</span> <span m='2389390'>cache</span>
  <span m='2389750'>analysis,</span> <span m='2390960'>I</span> <span m='2391050'>said</span>
  <span m='2391190'>totally</span> <span m='2391610'>random.</span> <span m='2392060'>This</span>
  <span m='2392330'>analysis,</span> <span m='2392960'>I</span> <span m='2393020'>said</span>
  <span m='2393230'>totally</span> <span m='2393590'>random.</span> <span m='2393920'>What</span>
  <span m='2394130'>about</span> <span m='2394430'>real</span> <span m='2394730'>hash</span>
  <span m='2395000'>functions?</span> <span m='2395580'>We</span> <span m='2395600'>can't</span>
  <span m='2395810'>use</span> <span m='2396020'>totally</span> <span m='2396350'>random.</span>
  </p><p><span m='2397070'>What</span> <span m='2397250'>about</span> <span m='2397550'>universal</span>
  <span m='2398450'>k-wise</span> <span m='2398900'>independent</span> <span m='2399800'>simple</span>
  <span m='2400130'>tabulation</span> <span m='2400760'>hashing,</span> <span m='2401600'>just</span>
  <span m='2401780'>for</span> <span m='2401900'>chaining?</span> <span m='2404600'>OK,
  and</span> <span m='2404780'>similar</span> <span m='2405200'>things</span> <span
  m='2405560'>hold</span> <span m='2405860'>for</span> <span m='2407000'>perfect</span>
  <span m='2407310'>hashing,</span> <span m='2407690'>I</span> <span m='2407810'>think.</span>
  <span m='2408380'>I'm</span> <span m='2408470'>not</span> <span m='2408620'>sure</span>
  <span m='2408770'>if</span> <span m='2408840'>they're</span> <span m='2408950'>all</span>
  <span m='2409070'>known.</span> <span m='2411610'>Oh,</span> <span m='2412100'>sorry,</span>
  <span m='2412370'>perfect</span> <span m='2412700'>hashing.</span> </p><p><span
  m='2413410'>In</span> <span m='2413540'>expectation</span> <span m='2414110'>everything's</span>
  <span m='2414530'>fine,</span> <span m='2415570'>just</span> <span m='2415760'>with</span>
  <span m='2415880'>universal.</span> <span m='2416540'>So</span> <span m='2416660'>we've</span>
  <span m='2416780'>already</span> <span m='2416960'>done</span> <span m='2417140'>that</span>
  <span m='2417290'>with</span> <span m='2417380'>universal.</span> </p><p><span m='2418370'>What</span>
  <span m='2418580'>about</span> <span m='2418970'>chaining?</span> <span m='2420310'>How</span>
  <span m='2420410'>big</span> <span m='2420620'>can</span> <span m='2420800'>the</span>
  <span m='2420890'>chains</span> <span m='2421310'>get?</span> <span m='2421670'>I
  said</span> <span m='2421940'>log</span> <span m='2422240'>n</span> <span m='2422330'>over</span>
  <span m='2422490'>log</span> <span m='2422690'>log</span> <span m='2422870'>with</span>
  <span m='2423090'>a</span> <span m='2423140'>high</span> <span m='2423350'>probability,</span>
  <span m='2423890'>but</span> <span m='2424040'>our</span> <span m='2424100'>analysis</span>
  <span m='2424620'>used</span> <span m='2424830'>Chernoff</span> <span m='2425210'>bound.</span>
  <span m='2425390'>That's</span> <span m='2425570'>only</span> <span m='2425870'>true</span>
  <span m='2426050'>for</span> <span m='2426200'>Bernoulli</span> <span m='2426620'>trials.</span>
  <span m='2427450'>It</span> <span m='2427550'>was</span> <span m='2427670'>only</span>
  <span m='2427880'>true</span> <span m='2428060'>for</span> <span m='2428240'>totally</span>
  <span m='2428600'>random</span> <span m='2428900'>hash</span> <span m='2429140'>functions.</span>
  </p><p><span m='2429980'>It</span> <span m='2430280'>turns</span> <span m='2430580'>out</span>
  <span m='2431240'>same</span> <span m='2431570'>is</span> <span m='2431720'>true</span>
  <span m='2432530'>if</span> <span m='2432740'>you</span> <span m='2432920'>have</span>
  <span m='2434030'>a</span> <span m='2434180'>log</span> <span m='2434600'>n</span>
  <span m='2434870'>over</span> <span m='2435150'>log</span> <span m='2435470'>log</span>
  <span m='2435710'>n</span> <span m='2436580'>wise</span> <span m='2437210'>independent</span>
  <span m='2442370'>hash</span> <span m='2442730'>function.</span> <span m='2444890'>So</span>
  <span m='2445100'>this</span> <span m='2445310'>is</span> <span m='2445550'>kind</span>
  <span m='2445790'>of</span> <span m='2445850'>annoying.</span> <span m='2446240'>If</span>
  <span m='2446360'>you</span> <span m='2446480'>want</span> <span m='2446720'>this</span>
  <span m='2446870'>to</span> <span m='2446990'>be</span> <span m='2447110'>true</span>
  <span m='2447440'>you</span> <span m='2447560'>need</span> <span m='2447710'>a</span>
  <span m='2447770'>lot</span> <span m='2448010'>of</span> <span m='2448140'>independence.</span>
  <span m='2449270'>And</span> <span m='2449390'>it's</span> <span m='2449510'>hard</span>
  <span m='2449780'>to</span> <span m='2449870'>get</span> <span m='2450030'>log n</span>
  <span m='2450420'>independence.</span> <span m='2451340'>There</span> <span m='2451520'>is</span>
  <span m='2451700'>a</span> <span m='2451760'>way</span> <span m='2451970'>to</span>
  <span m='2452090'>get</span> <span m='2452270'>constant,</span> <span m='2453200'>but</span>
  <span m='2453350'>it</span> <span m='2453440'>needed</span> <span m='2453680'>a</span>
  <span m='2453710'>lot</span> <span m='2453920'>of</span> <span m='2453980'>space.</span>
  </p><p><span m='2455060'>That was</span> <span m='2455540'>this</span> <span m='2455720'>one,</span>
  <span m='2457784'>which</span> <span m='2458240'>is</span> <span m='2458360'>not</span>
  <span m='2460250'>so</span> <span m='2460430'>thrilling.</span> <span m='2462800'>It's</span>
  <span m='2462980'>also</span> <span m='2463220'>kind</span> <span m='2463400'>of</span>
  <span m='2463490'>complicated.</span> <span m='2465320'>So</span> <span m='2465500'>if</span>
  <span m='2466220'>you</span> <span m='2466310'>don't</span> <span m='2466460'>mind</span>
  <span m='2466640'>the</span> <span m='2466760'>space</span> <span m='2470690'>but</span>
  <span m='2470810'>you</span> <span m='2470930'>just</span> <span m='2471050'>want</span>
  <span m='2471230'>it</span> <span m='2471290'>to</span> <span m='2471380'>be</span>
  <span m='2471500'>simpler,</span> <span m='2473030'>you</span> <span m='2473180'>can</span>
  <span m='2473300'>use</span> <span m='2473480'>simple</span> <span m='2473780'>tabulation</span>
  <span m='2474350'>hashing.</span> <span m='2478520'>Both</span> <span m='2478820'>of</span>
  <span m='2478880'>these,</span> <span m='2480730'>the</span> <span m='2480860'>same</span>
  <span m='2481340'>chain</span> <span m='2481670'>analysis</span> <span m='2482210'>turns</span>
  <span m='2482510'>out</span> <span m='2482630'>to</span> <span m='2482750'>work.</span>
  </p><p><span m='2483980'>So</span> <span m='2484100'>this</span> <span m='2484340'>is</span>
  <span m='2484970'>fairly</span> <span m='2485360'>old.</span> <span m='2485710'>This</span>
  <span m='2485870'>is</span> <span m='2486020'>from</span> <span m='2487220'>1995.</span>
  <span m='2488670'>This</span> <span m='2488750'>is</span> <span m='2488870'>from</span>
  <span m='2489800'>last</span> <span m='2490100'>year.</span> <span m='2491370'>So</span>
  <span m='2491460'>if you</span> <span m='2491820'>just</span> <span m='2492070'>use</span>
  <span m='2492260'>this</span> <span m='2492380'>simple</span> <span m='2492710'>tabulation</span>
  <span m='2493280'>hashing,</span> <span m='2493670'>still</span> <span m='2493880'>has</span>
  <span m='2494060'>a</span> <span m='2494090'>lot</span> <span m='2494210'>of</span>
  <span m='2494270'>space,</span> <span m='2495100'>e</span> <span m='2495260'>to</span>
  <span m='2495410'>the</span> <span m='2495800'>epsilon.</span> <span m='2497540'>But</span>
  <span m='2497810'>very</span> <span m='2498200'>simple</span> <span m='2498590'>to</span>
  <span m='2498860'>implement.</span> </p><p><span m='2500210'>Then</span> <span m='2501380'>still,</span>
  <span m='2501650'>the</span> <span m='2501740'>chain</span> <span m='2501980'>lengths</span>
  <span m='2502250'>are</span> <span m='2502610'>as</span> <span m='2502820'>you</span>
  <span m='2502940'>expect</span> <span m='2503270'>them</span> <span m='2503420'>to</span>
  <span m='2503540'>be.</span> <span m='2503780'>And</span> <span m='2503900'>I</span>
  <span m='2503990'>believe</span> <span m='2504410'>that</span> <span m='2504560'>carries</span>
  <span m='2504890'>over</span> <span m='2505130'>to</span> <span m='2505250'>this</span>
  <span m='2505940'>caching</span> <span m='2506330'>argument,</span> <span m='2506780'>but</span>
  <span m='2506960'>I</span> <span m='2507020'>haven't</span> <span m='2507260'>checked</span>
  <span m='2507530'>it.</span> <span m='2510210'>All</span> <span m='2510390'>right.</span>
  <span m='2513290'>Great,</span> <span m='2513620'>I</span> <span m='2513710'>think</span>
  <span m='2513980'>we're</span> <span m='2514130'>now</span> <span m='2516150'>happy.</span>
  <span m='2516490'>We've</span> <span m='2516830'>talked</span> <span m='2517070'>about</span>
  <span m='2517250'>real</span> <span m='2517460'>hash</span> <span m='2517700'>functions</span>
  <span m='2518150'>for</span> <span m='2518960'>chaining</span> <span m='2519380'>and</span>
  <span m='2519510'>perfect</span> <span m='2519820'>hashing.</span> </p><p><span
  m='2522200'>Next</span> <span m='2522470'>thing</span> <span m='2523265'>we're</span>
  <span m='2523700'>going</span> <span m='2523820'>to</span> <span m='2523880'>talk</span>
  <span m='2524120'>about</span> <span m='2524330'>is</span> <span m='2524450'>linear</span>
  <span m='2524780'>probing.</span> <span m='2525530'>I</span> <span m='2525560'>mean,</span>
  <span m='2525650'>in</span> <span m='2525710'>some</span> <span m='2525890'>sense</span>
  <span m='2526100'>we</span> <span m='2526190'>have</span> <span m='2526400'>good</span>
  <span m='2526580'>theoretical</span> <span m='2527030'>answers</span> <span m='2527430'>now.</span>
  <span m='2527660'>We</span> <span m='2527810'>can</span> <span m='2527900'>do</span>
  <span m='2527990'>constant</span> <span m='2528470'>expected</span> <span m='2528950'>amortized</span>
  <span m='2530150'>even</span> <span m='2530510'>with</span> <span m='2532400'>constant</span>
  <span m='2532880'>deterministic</span> <span m='2533600'>queries.</span> <span m='2535070'>But</span>
  <span m='2537570'>we're</span> <span m='2537690'>greedy,</span> <span m='2538170'>or</span>
  <span m='2539310'>people</span> <span m='2539640'>like</span> <span m='2539910'>to</span>
  <span m='2540480'>implement</span> <span m='2540900'>all</span> <span m='2541020'>sorts</span>
  <span m='2541260'>of</span> <span m='2541320'>different</span> <span m='2542280'>hashing</span>
  <span m='2542640'>schemes.</span> </p><p><span m='2543000'>Perfect</span> <span
  m='2543330'>hashing</span> <span m='2543560'>is</span> <span m='2543720'>pretty</span>
  <span m='2544020'>rare</span> <span m='2544350'>in</span> <span m='2544470'>practice.</span>
  <span m='2545070'>Why?</span> <span m='2546240'>I</span> <span m='2546300'>guess,</span>
  <span m='2546450'>because</span> <span m='2546630'>you</span> <span m='2546690'>have</span>
  <span m='2546780'>to</span> <span m='2546870'>hash</span> <span m='2547080'>twice</span>
  <span m='2547500'>instead</span> <span m='2547770'>of</span> <span m='2547860'>once</span>
  <span m='2548160'>and</span> <span m='2548250'>that's</span> <span m='2548400'>just</span>
  <span m='2548580'>more</span> <span m='2548760'>expensive.</span> </p><p><span m='2549730'>So</span>
  <span m='2549780'>what</span> <span m='2549930'>about</span> <span m='2550140'>the</span>
  <span m='2550230'>simpler</span> <span m='2550590'>hashing</span> <span m='2550920'>schemes?</span>
  <span m='2551220'>Simple</span> <span m='2551610'>tabulation</span> <span m='2552180'>hashing</span>
  <span m='2552500'>is</span> <span m='2552600'>nice</span> <span m='2552810'>and</span>
  <span m='2552900'>simple,</span> <span m='2554130'>but</span> <span m='2558300'>what</span>
  <span m='2558420'>about</span> <span m='2558690'>linear</span> <span m='2559080'>probing?</span>
  <span m='2562590'>That's</span> <span m='2562830'>really</span> <span m='2563400'>simple.</span>
  </p><p><span m='2579130'>Linear</span> <span m='2579670'>probing</span> <span m='2580090'>is</span>
  <span m='2580210'>either</span> <span m='2580450'>the</span> <span m='2580570'>first</span>
  <span m='2580870'>or</span> <span m='2580960'>the</span> <span m='2581080'>second</span>
  <span m='2581500'>hashing</span> <span m='2582010'>scheme</span> <span m='2582550'>you</span>
  <span m='2582670'>learned.</span> <span m='2584530'>You</span> <span m='2584680'>store</span>
  <span m='2584950'>things</span> <span m='2585220'>in</span> <span m='2585340'>a</span>
  <span m='2585400'>table.</span> <span m='2589630'>The</span> <span m='2589780'>hash</span>
  <span m='2589990'>function</span> <span m='2590320'>tells</span> <span m='2590530'>you</span>
  <span m='2590680'>where</span> <span m='2590770'>to</span> <span m='2590860'>go.</span>
  <span m='2591220'>If</span> <span m='2591370'>that's</span> <span m='2591610'>full,</span>
  <span m='2591910'>you</span> <span m='2592000'>just</span> <span m='2592120'>go</span>
  <span m='2592270'>to</span> <span m='2592330'>the</span> <span m='2592420'>next</span>
  <span m='2592600'>spot.</span> <span m='2593050'>If</span> <span m='2593170'>that's</span>
  <span m='2593380'>full,</span> <span m='2593590'>you</span> <span m='2593650'>go</span>
  <span m='2593770'>to</span> <span m='2593830'>the</span> <span m='2593920'>next</span>
  <span m='2594100'>spot</span> <span m='2594910'>till</span> <span m='2595060'>you</span>
  <span m='2595150'>find</span> <span m='2595360'>an</span> <span m='2595450'>empty</span>
  <span m='2595720'>slot</span> <span m='2596020'>and</span> <span m='2596110'>then</span>
  <span m='2596270'>you</span> <span m='2596320'>put</span> <span m='2596500'>x</span>
  <span m='2596740'>there.</span> <span m='2598000'>So</span> <span m='2598180'>if</span>
  <span m='2598270'>there's</span> <span m='2598420'>some</span> <span m='2599370'>y</span>
  <span m='2599650'>and</span> <span m='2599790'>z</span> <span m='2600040'>here,</span>
  <span m='2600910'>that</span> <span m='2601390'>that's</span> <span m='2601600'>where</span>
  <span m='2601720'>you</span> <span m='2601840'>end</span> <span m='2601990'>up</span>
  <span m='2602080'>putting</span> <span m='2602350'>it.</span> </p><p><span m='2604840'>Everyone</span>
  <span m='2605320'>knows</span> <span m='2605740'>linear</span> <span m='2605980'>probing</span>
  <span m='2606370'>is</span> <span m='2606460'>bad</span> <span m='2607450'>because</span>
  <span m='2607960'>the</span> <span m='2608050'>rich</span> <span m='2608230'>get</span>
  <span m='2608380'>richer.</span> <span m='2609070'>It's</span> <span m='2609160'>like</span>
  <span m='2609340'>the</span> <span m='2609460'>parking</span> <span m='2609790'>lot</span>
  <span m='2609940'>problem.</span> <span m='2610700'>If</span> <span m='2610810'>you</span>
  <span m='2610900'>get</span> <span m='2613000'>big</span> <span m='2613240'>runs</span>
  <span m='2613930'>of</span> <span m='2614110'>elements</span> <span m='2614500'>they're</span>
  <span m='2614620'>more</span> <span m='2614860'>likely</span> <span m='2615160'>to</span>
  <span m='2615250'>get</span> <span m='2615400'>hit,</span> <span m='2615940'>so</span>
  <span m='2616090'>they're</span> <span m='2616180'>going</span> <span m='2616300'>to</span>
  <span m='2616390'>grow</span> <span m='2616630'>even</span> <span m='2616900'>faster</span>
  <span m='2618050'>and</span> <span m='2618150'>get</span> <span m='2618190'>worse.</span>
  <span m='2619840'>So</span> <span m='2620590'>you</span> <span m='2620680'>should</span>
  <span m='2620890'>never</span> <span m='2621130'>use</span> <span m='2621340'>linear</span>
  <span m='2621580'>probing.</span> <span m='2623070'>Has</span> <span m='2623480'>everyone</span>
  <span m='2623770'>learned</span> <span m='2623950'>that?</span> </p><p><span m='2626290'>It's</span>
  <span m='2626470'>all</span> <span m='2626830'>false,</span> <span m='2628100'>however.</span>
  <span m='2629500'>Linear</span> <span m='2629770'>probing</span> <span m='2630100'>is</span>
  <span m='2630160'>actually</span> <span m='2630460'>really</span> <span m='2630790'>good.</span>
  <span m='2631900'>And</span> <span m='2632530'>first</span> <span m='2633040'>indication</span>
  <span m='2633320'>is</span> <span m='2633600'>it's</span> <span m='2633820'>really</span>
  <span m='2634060'>good</span> <span m='2634180'>in</span> <span m='2634270'>practice.</span>
  <span m='2634780'>There's</span> <span m='2635020'>this</span> <span m='2636340'>small</span>
  <span m='2636730'>experiment</span> <span m='2637200'>by</span> <span m='2637810'>Mihai</span>
  <span m='2638210'>Petrescu,</span> <span m='2639200'>who</span> <span m='2639390'>was</span>
  <span m='2639940'>an</span> <span m='2640300'>undergrad and</span> <span m='2640760'>PhD</span>
  <span m='2641110'>student</span> <span m='2641410'>here.</span> <span m='2642370'>He's</span>
  <span m='2642760'>working</span> <span m='2643030'>on</span> <span m='2643120'>AT&amp;T</span>
  <span m='2643630'>now.</span> </p><p><span m='2644110'>And</span> <span m='2644290'>he</span>
  <span m='2644440'>was</span> <span m='2644710'>doing</span> <span m='2644920'>some</span>
  <span m='2645100'>experiments</span> <span m='2645670'>and</span> <span m='2645760'>he</span>
  <span m='2645850'>found</span> <span m='2646150'>that</span> <span m='2646870'>in</span>
  <span m='2646990'>practice</span> <span m='2647440'>on</span> <span m='2647560'>a</span>
  <span m='2647620'>network</span> <span m='2647890'>router</span> <span m='2648540'>linear</span>
  <span m='2648820'>probing</span> <span m='2649810'>costs</span> <span m='2650260'>10%</span>
  <span m='2651040'>more</span> <span m='2651490'>time</span> <span m='2652150'>than</span>
  <span m='2652360'>a</span> <span m='2652420'>memory</span> <span m='2652840'>access.</span>
  <span m='2654250'>So,</span> <span m='2655900'>basically</span> <span m='2656530'>free.</span>
  <span m='2658180'>Why?</span> <span m='2660820'>You</span> <span m='2661030'>just</span>
  <span m='2661180'>set</span> <span m='2661450'>m</span> <span m='2662620'>to</span>
  <span m='2662950'>be</span> <span m='2663280'>2</span> <span m='2663520'>times</span>
  <span m='2663870'>n,</span> <span m='2664210'>or</span> <span m='2664360'>1</span>
  <span m='2664510'>plus</span> <span m='2664750'>epsilon</span> <span m='2665110'>times</span>
  <span m='2665370'>n,</span> <span m='2666420'>whatever.</span> <span m='2667570'>It</span>
  <span m='2667660'>actually</span> <span m='2667930'>works</span> <span m='2668140'>really</span>
  <span m='2668350'>well.</span> <span m='2668880'>And</span> <span m='2669020'>I'd</span>
  <span m='2669100'>like</span> <span m='2669250'>to</span> <span m='2669370'>convince</span>
  <span m='2669790'>you</span> <span m='2670360'>that</span> <span m='2670450'>it</span>
  <span m='2670510'>works</span> <span m='2670750'>really</span> <span m='2670990'>well.</span>
  </p><p><span m='2671920'>Now,</span> <span m='2672220'>first</span> <span m='2672460'>let</span>
  <span m='2672580'>me</span> <span m='2672730'>tell</span> <span m='2672940'>you</span>
  <span m='2674500'>some</span> <span m='2674950'>things.</span> <span m='2677680'>The</span>
  <span m='2677800'>idea</span> <span m='2679360'>that</span> <span m='2679480'>it</span>
  <span m='2679570'>works</span> <span m='2679780'>really</span> <span m='2679960'>well</span>
  <span m='2680230'>is</span> <span m='2680800'>old.</span> <span m='2682120'>For</span>
  <span m='2682390'>a</span> <span m='2682510'>totally</span> <span m='2682930'>random</span>
  <span m='2685540'>hash</span> <span m='2685870'>function</span> <span m='2696420'>you</span>
  <span m='2696570'>require</span> <span m='2697020'>constant</span> <span m='2697530'>time</span>
  <span m='2697800'>per</span> <span m='2697950'>operation.</span> <span m='2698790'>And</span>
  <span m='2699000'>Knuth</span> <span m='2699450'>actually</span> <span m='2699810'>showed</span>
  <span m='2700050'>this</span> <span m='2700200'>first</span> <span m='2700500'>in</span>
  <span m='2700590'>1962</span> <span m='2701490'>in</span> <span m='2701580'>a</span>
  <span m='2701640'>technical</span> <span m='2702060'>report.</span> <span m='2703020'>The</span>
  <span m='2703320'>answer</span> <span m='2703650'>ends</span> <span m='2703800'>up</span>
  <span m='2703890'>being</span> <span m='2704100'>1</span> <span m='2704250'>over</span>
  <span m='2704430'>epsilon</span> <span m='2704790'>squared.</span> </p><p><span
  m='2705940'>Now</span> <span m='2705960'>you</span> <span m='2706050'>might</span>
  <span m='2706200'>say,</span> <span m='2706320'>1</span> <span m='2706410'>over</span>
  <span m='2706490'>epsilon</span> <span m='2706870'>squared,</span> <span m='2707340'>oh</span>
  <span m='2707550'>that's</span> <span m='2707790'>really</span> <span m='2708030'>bad.</span>
  <span m='2708630'>And</span> <span m='2708750'>there</span> <span m='2708900'>are</span>
  <span m='2708930'>other</span> <span m='2709110'>schemes</span> <span m='2709380'>that</span>
  <span m='2709470'>achieve</span> <span m='2709710'>1</span> <span m='2709860'>over</span>
  <span m='2709980'>epsilon,</span> <span m='2710530'>which</span> <span m='2710610'>is</span>
  <span m='2710790'>better.</span> <span m='2711780'>But</span> <span m='2712710'>what's</span>
  <span m='2712860'>a</span> <span m='2712920'>little</span> <span m='2713190'>bit</span>
  <span m='2713280'>of</span> <span m='2713340'>space,</span> <span m='2713820'>right?</span>
  <span m='2714180'>I</span> <span m='2714240'>mean,</span> <span m='2714480'>just</span>
  <span m='2714630'>set</span> <span m='2714810'>epsilon</span> <span m='2715140'>to</span>
  <span m='2715350'>1,</span> <span m='2716130'>you're</span> <span m='2716250'>done.</span>
  </p><p><span m='2719320'>So</span> <span m='2719400'>I</span> <span m='2719490'>think</span>
  <span m='2720000'>linear</span> <span m='2720330'>probing</span> <span m='2720660'>was</span>
  <span m='2720810'>bad</span> <span m='2721200'>when</span> <span m='2721350'>we</span>
  <span m='2721770'>really</span> <span m='2722460'>were</span> <span m='2722640'>tight</span>
  <span m='2722880'>on</span> <span m='2723030'>space.</span> <span m='2723390'>But</span>
  <span m='2723540'>when</span> <span m='2723660'>you</span> <span m='2723720'>can</span>
  <span m='2723870'>afford</span> <span m='2724110'>a</span> <span m='2724200'>factor</span>
  <span m='2724500'>of</span> <span m='2724590'>2,</span> <span m='2724950'>linear</span>
  <span m='2725160'>probing is</span> <span m='2725580'>great.</span> <span m='2726330'>That's</span>
  <span m='2726510'>the</span> <span m='2726660'>bottom</span> <span m='2726960'>line.</span>
  </p><p><span m='2729760'>Now,</span> <span m='2730020'>this</span> <span m='2730200'>is</span>
  <span m='2730320'>totally</span> <span m='2730740'>random,</span> <span m='2731220'>not</span>
  <span m='2731400'>so</span> <span m='2731550'>useful.</span> <span m='2732450'>What</span>
  <span m='2732660'>about</span> <span m='2732930'>all</span> <span m='2733080'>these</span>
  <span m='2733230'>other</span> <span m='2733410'>hash</span> <span m='2733620'>functions?</span>
  <span m='2734580'>Like</span> <span m='2734730'>universal,</span> <span m='2735480'>turns</span>
  <span m='2735720'>out</span> <span m='2736050'>universal</span> <span m='2736620'>with</span>
  <span m='2736770'>the</span> <span m='2736860'>universal</span> <span m='2737280'>hash</span>
  <span m='2737460'>function,</span> <span m='2738330'>linear</span> <span m='2738540'>probing</span>
  <span m='2739230'>is</span> <span m='2739380'>really,</span> <span m='2739930'>really</span>
  <span m='2740160'>bad.</span> <span m='2740580'>And</span> <span m='2740700'>that's</span>
  <span m='2740880'>why</span> <span m='2741030'>it</span> <span m='2741090'>gets</span>
  <span m='2741300'>a</span> <span m='2741330'>bad</span> <span m='2741600'>rap.</span>
  </p><p><span m='2742350'>But</span> <span m='2743370'>some</span> <span m='2743550'>good</span>
  <span m='2743700'>news.</span> <span m='2744720'>OK,</span> <span m='2745230'>first</span>
  <span m='2745500'>result</span> <span m='2745890'>was</span> <span m='2746700'>log</span>
  <span m='2747120'>n</span> <span m='2747270'>wise</span> <span m='2747570'>independence.</span>
  <span m='2749580'>This</span> <span m='2749760'>is</span> <span m='2749910'>extremely</span>
  <span m='2750420'>strong</span> <span m='2750900'>but</span> <span m='2751110'>it</span>
  <span m='2751800'>also</span> <span m='2752220'>implies</span> <span m='2752820'>constant</span>
  <span m='2753810'>expected</span> <span m='2754320'>per</span> <span m='2754500'>operation.</span>
  <span m='2756780'>Not</span> <span m='2756990'>very</span> <span m='2757170'>exciting.</span>
  </p><p><span m='2759390'>The</span> <span m='2759480'>big</span> <span m='2759660'>breakthrough</span>
  <span m='2760380'>was</span> <span m='2760740'>in</span> <span m='2760830'>2007</span>
  <span m='2763230'>that</span> <span m='2763440'>five-wise</span> <span m='2764190'>independence</span>
  <span m='2764790'>is</span> <span m='2764940'>enough.</span> <span m='2766260'>And</span>
  <span m='2766410'>this</span> <span m='2766620'>is</span> <span m='2766770'>why</span>
  <span m='2770320'>this</span> <span m='2770620'>paper,</span> <span m='2772630'>Thorpe</span>
  <span m='2774310'>was</span> <span m='2774550'>focusing</span> <span m='2775030'>in</span>
  <span m='2775120'>particular</span> <span m='2775670'>on</span> <span m='2775770'>the</span>
  <span m='2775870'>case</span> <span m='2775950'>of</span> <span m='2776030'>k</span>
  <span m='2776380'>equals</span> <span m='2776650'>4.</span> <span m='2777190'>Actually,</span>
  <span m='2777460'>they</span> <span m='2777580'>were</span> <span m='2777880'>doing</span>
  <span m='2778120'>k equals</span> <span m='2778480'>4,</span> <span m='2778720'>but</span>
  <span m='2778870'>they</span> <span m='2779650'>solved</span> <span m='2779860'>5</span>
  <span m='2780160'>at</span> <span m='2780220'>the</span> <span m='2780340'>same</span>
  <span m='2780550'>time.</span> <span m='2782340'>And</span> <span m='2782380'>so</span>
  <span m='2783310'>this</span> <span m='2783470'>was</span> <span m='2783610'>a</span>
  <span m='2783700'>very</span> <span m='2784260'>highly</span> <span m='2784660'>optimized,</span>
  <span m='2785290'>practical,</span> <span m='2786080'>all</span> <span m='2786250'>that</span>
  <span m='2786370'>good</span> <span m='2786520'>stuff.</span> <span m='2787180'>Get</span>
  <span m='2787360'>five-wise</span> <span m='2787870'>independence,</span> <span
  m='2789160'>admittedly</span> <span m='2789700'>with</span> <span m='2789820'>some</span>
  <span m='2790000'>space.</span> <span m='2790750'>But</span> <span m='2792520'>it's</span>
  <span m='2792610'>pretty</span> <span m='2792820'>cool.</span> </p><p><span m='2793610'>So</span>
  <span m='2793630'>this</span> <span m='2793840'>is</span> <span m='2793960'>enough</span>
  <span m='2794230'>to</span> <span m='2794350'>get</span> <span m='2795390'>constant</span>
  <span m='2798070'>expected.</span> <span m='2800490'>I</span> <span m='2800620'>shouldn't</span>
  <span m='2800920'>write</span> <span m='2801670'>order</span> <span m='2802030'>1,</span>
  <span m='2802300'>because</span> <span m='2802750'>I'm</span> <span m='2802870'>not</span>
  <span m='2803020'>writing</span> <span m='2803900'>the</span> <span m='2804250'>dependence</span>
  <span m='2804670'>on</span> <span m='2804790'>epsilon</span> <span m='2805240'>here.</span>
  <span m='2806190'>I</span> <span m='2806230'>don't</span> <span m='2806470'>know</span>
  <span m='2806560'>exactly</span> <span m='2807040'>what</span> <span m='2807190'>it</span>
  <span m='2807280'>is.</span> <span m='2807950'>But</span> <span m='2808050'>it's</span>
  <span m='2808150'>some</span> <span m='2808240'>constant</span> <span m='2808690'>depending</span>
  <span m='2809050'>on</span> <span m='2809140'>epsilon.</span> </p><p><span m='2811870'>And</span>
  <span m='2812020'>then</span> <span m='2813580'>this</span> <span m='2813790'>turns</span>
  <span m='2814030'>out</span> <span m='2814120'>to</span> <span m='2814240'>be</span>
  <span m='2814360'>tight.</span> <span m='2816280'>There</span> <span m='2816520'>are</span>
  <span m='2816610'>four-wise</span> <span m='2817270'>independent</span> <span m='2819490'>hash</span>
  <span m='2819760'>functions,</span> <span m='2821200'>including</span> <span m='2823030'>I</span>
  <span m='2823090'>think</span> <span m='2823330'>the</span> <span m='2823450'>polynomial</span>
  <span m='2823990'>ones</span> <span m='2824230'>that</span> <span m='2824350'>we</span>
  <span m='2824440'>did.</span> <span m='2826120'>These</span> <span m='2826300'>guys</span>
  <span m='2827650'>that</span> <span m='2827860'>are</span> <span m='2827920'>really</span>
  <span m='2828130'>bad.</span> <span m='2829090'>You</span> <span m='2829240'>can</span>
  <span m='2829360'>get</span> <span m='2830510'>really</span> <span m='2830860'>bad.</span>
  <span m='2831380'>They're</span> <span m='2831550'>as</span> <span m='2831670'>bad</span>
  <span m='2831940'>as</span> <span m='2832060'>binary</span> <span m='2832330'>search</span>
  <span m='2832570'>trees.</span> <span m='2833275'>You can</span> <span m='2833620'>get</span>
  <span m='2833800'>constant</span> <span m='2834220'>expected.</span> </p><p><span
  m='2837220'>So</span> <span m='2837370'>you</span> <span m='2837430'>really</span>
  <span m='2837760'>need</span> <span m='2837970'>five-wise</span> <span m='2838820'>independence.</span>
  <span m='2839320'>It's</span> <span m='2839530'>kind</span> <span m='2839710'>of</span>
  <span m='2839770'>weird,</span> <span m='2840910'>but</span> <span m='2841060'>it's</span>
  <span m='2841180'>true.</span> </p><p><span m='2842540'>And</span> <span m='2842680'>the</span>
  <span m='2842800'>other</span> <span m='2842950'>fun</span> <span m='2843190'>fact</span>
  <span m='2844780'>is</span> <span m='2845020'>that</span> <span m='2845140'>simple</span>
  <span m='2845440'>tabulation</span> <span m='2846040'>hashing</span> <span m='2849010'>also</span>
  <span m='2849460'>achieves</span> <span m='2849940'>constant.</span> <span m='2850940'>And</span>
  <span m='2851070'>here</span> <span m='2851260'>it's</span> <span m='2851410'>known</span>
  <span m='2851680'>that</span> <span m='2851800'>it's</span> <span m='2851980'>also</span>
  <span m='2852280'>1</span> <span m='2852460'>over</span> <span m='2852570'>epsilon</span>
  <span m='2852980'>squared.</span> <span m='2854200'>So</span> <span m='2854320'>it's</span>
  <span m='2854500'>just</span> <span m='2854860'>as</span> <span m='2854980'>good</span>
  <span m='2855280'>as</span> <span m='2855460'>totally</span> <span m='2855820'>random</span>
  <span m='2856450'>simple</span> <span m='2856840'>tabulation</span> <span m='2857380'>hashing.</span>
  <span m='2857680'>Which</span> <span m='2857890'>is</span> <span m='2857980'>nice</span>
  <span m='2858250'>because</span> <span m='2858430'>again,</span> <span m='2858670'>this</span>
  <span m='2858850'>is</span> <span m='2858910'>simple.</span> <span m='2859930'>Takes</span>
  <span m='2860170'>a</span> <span m='2860200'>bit</span> <span m='2860320'>of</span>
  <span m='2860380'>space</span> <span m='2860830'>but</span> <span m='2863410'>both</span>
  <span m='2863710'>of</span> <span m='2863770'>these</span> <span m='2865000'>have</span>
  <span m='2865120'>that</span> <span m='2865270'>property.</span> <span m='2866350'>And</span>
  <span m='2866440'>so</span> <span m='2866560'>these</span> <span m='2866800'>are</span>
  <span m='2866920'>good</span> <span m='2867130'>ways</span> <span m='2867520'>to</span>
  <span m='2867700'>use</span> <span m='2868600'>linear</span> <span m='2868840'>probing</span>
  <span m='2869440'>in</span> <span m='2869530'>particular.</span> </p><p><span m='2870070'>So</span>
  <span m='2870220'>you</span> <span m='2870280'>really</span> <span m='2870580'>need</span>
  <span m='2870760'>a</span> <span m='2870820'>good</span> <span m='2871000'>hash</span>
  <span m='2871240'>function</span> <span m='2871650'>for</span> <span m='2871790'>linear</span>
  <span m='2871900'>probing</span> <span m='2872260'>to</span> <span m='2872350'>work</span>
  <span m='2872590'>out.</span> <span m='2873100'>If</span> <span m='2873280'>you</span>
  <span m='2873370'>use</span> <span m='2873610'>the</span> <span m='2873670'>universal</span>
  <span m='2874180'>hash</span> <span m='2874450'>function</span> <span m='2874870'>like</span>
  <span m='2875560'>a</span> <span m='2875750'>times</span> <span m='2876100'>x</span>
  <span m='2876610'>mod</span> <span m='2876970'>p</span> <span m='2877330'>mod</span>
  <span m='2877810'>m</span> <span m='2878650'>it</span> <span m='2878830'>will</span>
  <span m='2879010'>fail.</span> <span m='2880270'>But</span> <span m='2880590'>if</span>
  <span m='2880670'>you</span> <span m='2880810'>use</span> <span m='2880930'>a</span>
  <span m='2880990'>good</span> <span m='2881230'>hash</span> <span m='2881530'>function,</span>
  <span m='2882500'>which</span> <span m='2882580'>we're</span> <span m='2882700'>now</span>
  <span m='2883030'>getting</span> <span m='2883360'>to</span> <span m='2883450'>the</span>
  <span m='2883540'>point--</span> <span m='2883930'>I</span> <span m='2883960'>mean,</span>
  <span m='2884080'>this</span> <span m='2884350'>is</span> <span m='2884470'>super</span>
  <span m='2884830'>simple</span> <span m='2885100'>to</span> <span m='2885160'>implement.</span>
  </p><p><span m='2887101'>It</span> <span m='2887590'>should</span> <span m='2887770'>work</span>
  <span m='2887920'>fine.</span> <span m='2888130'>I</span> <span m='2888190'>think</span>
  <span m='2888340'>would</span> <span m='2888430'>be</span> <span m='2888500'>a</span>
  <span m='2888520'>neat</span> <span m='2888670'>project</span> <span m='2889060'>to</span>
  <span m='2889120'>take</span> <span m='2889540'>a</span> <span m='2889660'>Python</span>
  <span m='2890170'>or</span> <span m='2890260'>something</span> <span m='2890650'>that
  had</span> <span m='2890860'>hash</span> <span m='2891130'>tables</span> <span m='2891550'>deep</span>
  <span m='2891820'>inside</span> <span m='2892220'>it,</span> <span m='2892930'>replace--</span>
  <span m='2893580'>I</span> <span m='2893650'>think</span> <span m='2893830'>they</span>
  <span m='2893920'>use</span> <span m='2894130'>quadratic</span> <span m='2894670'>probing</span>
  <span m='2895420'>and</span> <span m='2896350'>universal</span> <span m='2896890'>hash</span>
  <span m='2897250'>functions.</span> <span m='2898750'>If</span> <span m='2898900'>you</span>
  <span m='2898990'>instead</span> <span m='2899410'>use</span> <span m='2899620'>linear</span>
  <span m='2899950'>probing</span> <span m='2900550'>and</span> <span m='2900970'>simple</span>
  <span m='2901270'>tabulation</span> <span m='2901810'>hashing,</span> <span m='2903970'>might</span>
  <span m='2904180'>do</span> <span m='2904300'>the</span> <span m='2904420'>same,</span>
  <span m='2904780'>might</span> <span m='2904960'>do</span> <span m='2905050'>better,</span>
  <span m='2905370'>I</span> <span m='2905440'>don't</span> <span m='2905530'>know.</span>
  <span m='2905870'>It's</span> <span m='2905890'>interesting.</span> <span m='2906520'>It</span>
  <span m='2906580'>would</span> <span m='2906670'>be</span> <span m='2906790'>a</span>
  <span m='2906850'>project</span> <span m='2907450'>to</span> <span m='2907570'>try</span>
  <span m='2907790'>out.</span> <span m='2911690'>Cool.</span> </p><p><span m='2913930'>Well,</span>
  <span m='2914060'>I</span> <span m='2914150'>just</span> <span m='2914300'>quoted</span>
  <span m='2914660'>results.</span> <span m='2915110'>What</span> <span m='2915260'>I'd</span>
  <span m='2915350'>like</span> <span m='2915530'>to</span> <span m='2915680'>do</span>
  <span m='2915860'>is</span> <span m='2915980'>prove</span> <span m='2917390'>something</span>
  <span m='2918020'>like</span> <span m='2918260'>this</span> <span m='2918560'>to</span>
  <span m='2918710'>you.</span> <span m='2919790'>Totally</span> <span m='2920210'>random</span>
  <span m='2920510'>hash</span> <span m='2920750'>functions</span> <span m='2921110'>imply</span>
  <span m='2921680'>some</span> <span m='2922040'>constant</span> <span m='2922510'>expected.</span>
  <span m='2923000'>I</span> <span m='2923060'>won't</span> <span m='2923230'>try</span>
  <span m='2923360'>to</span> <span m='2923480'>work</span> <span m='2923690'>out</span>
  <span m='2923810'>the</span> <span m='2923900'>dependence</span> <span m='2924320'>on</span>
  <span m='2924440'>epsilon</span> <span m='2925800'>because</span> <span m='2926030'>it's</span>
  <span m='2926120'>actually</span> <span m='2926420'>a</span> <span m='2926480'>pretty</span>
  <span m='2926750'>clean</span> <span m='2927080'>proof,</span> <span m='2927830'>it</span>
  <span m='2928100'>looks</span> <span m='2928310'>nice.</span> <span m='2931750'>Very</span>
  <span m='2931880'>data</span> <span m='2932150'>structures-y.</span> </p><p><span
  m='2939810'>I'm</span> <span m='2940190'>not</span> <span m='2940330'>going</span>
  <span m='2940480'>to</span> <span m='2940540'>cover</span> <span m='2940840'>Knut's</span>
  <span m='2941140'>proof.</span> <span m='2941440'>I'm</span> <span m='2941560'>essentially</span>
  <span m='2942100'>covering</span> <span m='2945520'>this</span> <span m='2945850'>proof.</span>
  <span m='2947650'>In</span> <span m='2947830'>this</span> <span m='2947980'>paper</span>
  <span m='2948370'>five-wise</span> <span m='2948850'>independence</span> <span m='2949360'>implies</span>
  <span m='2949660'>constant</span> <span m='2949990'>expected.</span> <span m='2950830'>They</span>
  <span m='2951040'>re-prove</span> <span m='2951550'>the</span> <span m='2951670'>totally</span>
  <span m='2952000'>random</span> <span m='2952360'>case</span> <span m='2953320'>and</span>
  <span m='2953830'>strengthen</span> <span m='2954310'>it,</span> <span m='2954560'>analyze</span>
  <span m='2954880'>the</span> <span m='2955090'>independence</span> <span m='2955540'>they</span>
  <span m='2955660'>need.</span> </p><p><span m='2958690'>Let's</span> <span m='2958850'>just</span>
  <span m='2959040'>do</span> <span m='2959260'>totally</span> <span m='2959710'>random</span>
  <span m='2965370'>unbiased</span> <span m='2966180'>constant</span> <span m='2966400'>expected</span>
  <span m='2967570'>for</span> <span m='2967720'>linear</span> <span m='2968080'>probing.</span>
  <span m='2969940'>We</span> <span m='2970030'>obviously</span> <span m='2970420'>know</span>
  <span m='2970630'>how</span> <span m='2970750'>to</span> <span m='2970870'>do</span>
  <span m='2971230'>constant</span> <span m='2971535'>expected</span> <span m='2972100'>already</span>
  <span m='2972520'>with</span> <span m='2972700'>other</span> <span m='2972940'>fancy</span>
  <span m='2973330'>techniques.</span> <span m='2973840'>But</span> <span m='2974770'>linear</span>
  <span m='2974950'>probing</span> <span m='2975580'>seems</span> <span m='2976060'>really</span>
  <span m='2976300'>bad.</span> <span m='2977230'>Yet</span> <span m='2977500'>I</span>
  <span m='2977560'>claim,</span> <span m='2978160'>not</span> <span m='2978430'>so</span>
  <span m='2978670'>much.</span> </p><p><span m='2981580'>And</span> <span m='2981670'>we're</span>
  <span m='2981790'>going</span> <span m='2981910'>to</span> <span m='2982030'>assume</span>
  <span m='2986040'>m</span> <span m='2986390'>is</span> <span m='2986740'>at</span>
  <span m='2986830'>least</span> <span m='2987040'>3</span> <span m='2987310'>times</span>
  <span m='2987700'>n.</span> <span m='2987910'>That</span> <span m='2988070'>will</span>
  <span m='2988180'>just</span> <span m='2988390'>make</span> <span m='2988600'>the</span>
  <span m='2988720'>analysis</span> <span m='2989140'>cleaner.</span> <span m='2989530'>But</span>
  <span m='2989680'>it</span> <span m='2989770'>does</span> <span m='2989980'>hold</span>
  <span m='2990190'>for</span> <span m='2990310'>1</span> <span m='2990490'>plus</span>
  <span m='2990700'>epsilon.</span> </p><p><span m='2992440'>OK,</span> <span m='2992590'>so</span>
  <span m='2992740'>here's</span> <span m='2992950'>the</span> <span m='2993010'>idea.</span>
  <span m='2993760'>We're</span> <span m='2993890'>going</span> <span m='2994010'>to</span>
  <span m='2994090'>take</span> <span m='2995590'>our</span> <span m='2995980'>array,</span>
  <span m='2996970'>our</span> <span m='2997150'>hash</span> <span m='2997480'>table,</span>
  <span m='2998165'>it's</span> <span m='2998430'>an</span> <span m='2998560'>array.</span>
  <span m='3002700'>And</span> <span m='3003150'>build</span> <span m='3003410'>a</span>
  <span m='3003450'>binary</span> <span m='3003750'>tree</span> <span m='3003990'>on</span>
  <span m='3004110'>it</span> <span m='3004350'>because</span> <span m='3004560'>that's</span>
  <span m='3004740'>what</span> <span m='3004830'>we</span> <span m='3004930'>like</span>
  <span m='3005100'>to</span> <span m='3005220'>do.</span> <span m='3006390'>We</span>
  <span m='3006750'>do</span> <span m='3007110'>this</span> <span m='3007400'>every</span>
  <span m='3007620'>lecture</span> <span m='3008010'>pretty</span> <span m='3008250'>much.</span>
  <span m='3009900'>This</span> <span m='3010110'>is</span> <span m='3010200'>kind</span>
  <span m='3010440'>of</span> <span m='3010500'>like</span> <span m='3010740'>ordered</span>
  <span m='3011050'>file</span> <span m='3011310'>maintenance,</span> <span m='3011780'>I</span>
  <span m='3011850'>guess.</span> </p><p><span m='3012300'>This</span> <span m='3012480'>is</span>
  <span m='3012570'>just</span> <span m='3012780'>a</span> <span m='3012840'>conceptual</span>
  <span m='3013380'>tree.</span> <span m='3014400'>I</span> <span m='3014460'>mean,</span>
  <span m='3014850'>you're</span> <span m='3015210'>not</span> <span m='3015390'>even</span>
  <span m='3015570'>defining</span> <span m='3015900'>an</span> <span m='3015990'>algorithm</span>
  <span m='3016380'>based</span> <span m='3016590'>on</span> <span m='3016680'>this</span>
  <span m='3016800'>because</span> <span m='3016950'>the</span> <span m='3017070'>algorithm</span>
  <span m='3017460'>is</span> <span m='3017580'>linear</span> <span m='3017820'>probing.</span>
  <span m='3018510'>You</span> <span m='3018600'>go</span> <span m='3018780'>into</span>
  <span m='3018960'>somewhere.</span> <span m='3019850'>You</span> <span m='3020060'>hop,</span>
  <span m='3020220'>hop,</span> <span m='3020530'>hop,</span> <span m='3020770'>hop</span>
  <span m='3020970'>until</span> <span m='3021180'>you</span> <span m='3021270'>find</span>
  <span m='3021540'>a</span> <span m='3021570'>blank</span> <span m='3021810'>space.</span>
  <span m='3022140'>You</span> <span m='3022260'>put</span> <span m='3022410'>your</span>
  <span m='3022560'>item</span> <span m='3022770'>there.</span> </p><p><span m='3023710'>OK,</span>
  <span m='3023910'>but</span> <span m='3024060'>each</span> <span m='3024240'>of</span>
  <span m='3024300'>these</span> <span m='3024480'>nodes</span> <span m='3024840'>defines</span>
  <span m='3025230'>an</span> <span m='3025320'>interval</span> <span m='3025770'>in</span>
  <span m='3025860'>the</span> <span m='3025980'>array,</span> <span m='3026340'>as</span>
  <span m='3026610'>we</span> <span m='3026730'>know.</span> <span m='3028320'>So</span>
  <span m='3028650'>I'm</span> <span m='3028740'>going</span> <span m='3028860'>to</span>
  <span m='3028920'>call</span> <span m='3029850'>a</span> <span m='3029910'>node</span>
  <span m='3031380'>dangerous,</span> <span m='3038880'>essentially</span> <span m='3039360'>if</span>
  <span m='3039480'>its</span> <span m='3039630'>density</span> <span m='3040140'>is</span>
  <span m='3040230'>at</span> <span m='3040320'>least</span> <span m='3040740'>2/3.</span>
  <span m='3043350'>But</span> <span m='3043500'>not</span> <span m='3044100'>in</span>
  <span m='3044190'>the</span> <span m='3044280'>literal</span> <span m='3044550'>sense</span>
  <span m='3046020'>because</span> <span m='3046320'>there's</span> <span m='3046530'>a</span>
  <span m='3046590'>little</span> <span m='3046830'>bit</span> <span m='3046920'>of</span>
  <span m='3047010'>a</span> <span m='3047040'>subtlety</span> <span m='3047460'>here.</span>
  </p><p><span m='3048240'>There's</span> <span m='3048390'>the</span> <span m='3048600'>location</span>
  <span m='3049290'>where</span> <span m='3049470'>a</span> <span m='3049560'>key</span>
  <span m='3049890'>wants</span> <span m='3050340'>to</span> <span m='3050460'>live,</span>
  <span m='3050970'>which</span> <span m='3051150'>is</span> <span m='3051330'>h</span>
  <span m='3051600'>of</span> <span m='3051690'>that</span> <span m='3051870'>key.</span>
  <span m='3052740'>And</span> <span m='3052860'>there's</span> <span m='3053140'>the</span>
  <span m='3053210'>location</span> <span m='3053670'>that</span> <span m='3053790'>it</span>
  <span m='3053910'>ended</span> <span m='3054210'>up</span> <span m='3054390'>living.</span>
  <span m='3056790'>I</span> <span m='3056880'>care</span> <span m='3057120'>more</span>
  <span m='3057330'>about</span> <span m='3057690'>the</span> <span m='3057810'>first</span>
  <span m='3058200'>one</span> <span m='3058860'>because</span> <span m='3059160'>that's</span>
  <span m='3059400'>what</span> <span m='3059580'>I</span> <span m='3059670'>understand.</span>
  <span m='3060690'>h</span> <span m='3060990'>of</span> <span m='3061140'>x,</span>
  <span m='3062010'>that's</span> <span m='3062910'>going</span> <span m='3063060'>to</span>
  <span m='3063120'>be</span> <span m='3063240'>nice.</span> <span m='3063820'>It's</span>
  <span m='3063930'>totally</span> <span m='3064230'>random.</span> <span m='3064770'>So</span>
  <span m='3065010'>h</span> <span m='3065250'>of</span> <span m='3065340'>x</span>
  <span m='3065540'>is</span> <span m='3065670'>random</span> <span m='3066090'>independent</span>
  <span m='3066600'>of</span> <span m='3066690'>everything</span> <span m='3067020'>else.</span>
  <span m='3067860'>Great.</span> </p><p><span m='3069210'>Where</span> <span m='3069600'>x</span>
  <span m='3069930'>ends</span> <span m='3070230'>up</span> <span m='3070320'>being,</span>
  <span m='3070740'>that</span> <span m='3070920'>depends</span> <span m='3071280'>on</span>
  <span m='3071370'>other</span> <span m='3071580'>keys</span> <span m='3072190'>and</span>
  <span m='3072210'>it</span> <span m='3072300'>depends</span> <span m='3072750'>on</span>
  <span m='3072870'>this</span> <span m='3073020'>linear</span> <span m='3073560'>thing</span>
  <span m='3073830'>which</span> <span m='3074010'>I'm</span> <span m='3074100'>trying</span>
  <span m='3074340'>to</span> <span m='3074400'>understand.</span> <span m='3075510'>So</span>
  <span m='3075840'>I</span> <span m='3076230'>just</span> <span m='3076410'>want</span>
  <span m='3076560'>to</span> <span m='3076620'>talk</span> <span m='3076890'>about</span>
  <span m='3078270'>the</span> <span m='3078450'>number</span> <span m='3078840'>of</span>
  <span m='3078990'>keys</span> <span m='3082140'>that</span> <span m='3082350'>hash</span>
  <span m='3083510'>via</span> <span m='3083940'>h</span> <span m='3086400'>to</span>
  <span m='3086670'>the</span> <span m='3086820'>interval</span> <span m='3090020'>if</span>
  <span m='3090360'>that</span> <span m='3090810'>is</span> <span m='3091110'>at</span>
  <span m='3091200'>least</span> <span m='3092250'>2/3</span> <span m='3094110'>times</span>
  <span m='3095190'>the</span> <span m='3095310'>length</span> <span m='3095550'>of</span>
  <span m='3095610'>the</span> <span m='3095760'>interval.</span> <span m='3098800'>This</span>
  <span m='3098880'>is</span> <span m='3099030'>the</span> <span m='3099150'>number</span>
  <span m='3099420'>of</span> <span m='3099480'>slots</span> <span m='3099900'>that</span>
  <span m='3100020'>are</span> <span m='3100110'>actually</span> <span m='3100440'>there.</span>
  </p><p><span m='3104520'>We</span> <span m='3104640'>expect</span> <span m='3105060'>the</span>
  <span m='3105150'>number</span> <span m='3105390'>of</span> <span m='3105480'>keys</span>
  <span m='3105780'>that</span> <span m='3105900'>hash</span> <span m='3106150'>via</span>
  <span m='3106370'>h</span> <span m='3106650'>to</span> <span m='3106740'>the</span>
  <span m='3106830'>interval</span> <span m='3107100'>to</span> <span m='3107220'>be</span>
  <span m='3107370'>1/2.</span> <span m='3108090'>So</span> <span m='3108420'>the</span>
  <span m='3108510'>expectation</span> <span m='3109260'>would</span> <span m='3109350'>be</span>
  <span m='3109470'>1/3</span> <span m='3109980'>the</span> <span m='3110070'>length</span>
  <span m='3110280'>the</span> <span m='3110370'>interval.</span> <span m='3111240'>If</span>
  <span m='3111390'>it</span> <span m='3111480'>happens</span> <span m='3111720'>to</span>
  <span m='3111810'>be</span> <span m='3111900'>2/3</span> <span m='3113160'>it</span>
  <span m='3113220'>could</span> <span m='3113370'>happen</span> <span m='3113850'>because</span>
  <span m='3114090'>of</span> <span m='3114330'>high</span> <span m='3114480'>probability,</span>
  <span m='3114990'>whatever.</span> </p><p><span m='3115770'>That's</span> <span
  m='3115980'>a</span> <span m='3116040'>dangerous</span> <span m='3116490'>node.</span>
  <span m='3116770'>That's</span> <span m='3117155'>the</span> <span m='3117540'>definition.</span>
  <span m='3119100'>Those</span> <span m='3119280'>ones</span> <span m='3119520'>we</span>
  <span m='3119640'>worry</span> <span m='3120090'>will</span> <span m='3120240'>be</span>
  <span m='3120390'>very</span> <span m='3120570'>expensive.</span> <span m='3121890'>And</span>
  <span m='3121980'>we</span> <span m='3122100'>worry</span> <span m='3122340'>that</span>
  <span m='3122490'>we're</span> <span m='3122580'>going</span> <span m='3122690'>to</span>
  <span m='3122790'>get</span> <span m='3122940'>super</span> <span m='3123270'>clustering</span>
  <span m='3123960'>and</span> <span m='3124080'>then</span> <span m='3124650'>get</span>
  <span m='3124740'>these</span> <span m='3124920'>giant</span> <span m='3125610'>runs,</span>
  <span m='3126120'>and</span> <span m='3126200'>so</span> <span m='3126330'>on.</span>
  </p><p><span m='3150100'>So,</span> <span m='3151950'>one</span> <span m='3152030'>thing</span>
  <span m='3152180'>I</span> <span m='3152270'>want</span> <span m='3152450'>to</span>
  <span m='3152540'>compute</span> <span m='3152870'>was</span> <span m='3153050'>what's</span>
  <span m='3153260'>the</span> <span m='3153380'>probability</span> <span m='3153980'>of</span>
  <span m='3154070'>this</span> <span m='3154220'>happening.</span> <span m='3157010'>Probability</span>
  <span m='3157670'>of</span> <span m='3157730'>a</span> <span m='3157790'>node</span>
  <span m='3158090'>being</span> <span m='3158390'>dangerous.</span> <span m='3160550'>Well,</span>
  <span m='3161300'>we</span> <span m='3161450'>can</span> <span m='3161600'>again</span>
  <span m='3161810'>use</span> <span m='3161990'>Chernoff</span> <span m='3162410'>bounds</span>
  <span m='3162710'>here</span> <span m='3162800'>because</span> <span m='3162950'>we're</span>
  <span m='3163040'>in</span> <span m='3163120'>a</span> <span m='3163190'>totally</span>
  <span m='3163550'>random</span> <span m='3163910'>situation.</span> </p><p><span
  m='3165170'>So</span> <span m='3165440'>this</span> <span m='3165680'>is</span>
  <span m='3165830'>the</span> <span m='3165950'>probability</span> <span m='3166700'>that</span>
  <span m='3166910'>the</span> <span m='3167060'>number</span> <span m='3167420'>of</span>
  <span m='3167540'>things</span> <span m='3167780'>that</span> <span m='3168140'>went</span>
  <span m='3168350'>there</span> <span m='3168650'>was</span> <span m='3168890'>bigger</span>
  <span m='3169220'>than</span> <span m='3169430'>twice</span> <span m='3170150'>the</span>
  <span m='3170660'>expectation.</span> <span m='3171520'>The</span> <span m='3171730'>expectation</span>
  <span m='3172300'>is</span> <span m='3172400'>1/2,</span> <span m='3173420'>2/3</span>
  <span m='3173810'>is twice</span> <span m='3174140'>of</span> <span m='3174250'>1/3.</span>
  <span m='3175370'>So</span> <span m='3175550'>this</span> <span m='3175790'>is</span>
  <span m='3176000'>the</span> <span m='3176090'>probability</span> <span m='3176660'>that</span>
  <span m='3176870'>you're</span> <span m='3177050'>at</span> <span m='3177140'>least</span>
  <span m='3177470'>twice</span> <span m='3177980'>the</span> <span m='3178100'>mean,</span>
  <span m='3179580'>which</span> <span m='3179720'>by</span> <span m='3179870'>Chernoff</span>
  <span m='3181160'>is</span> <span m='3182090'>small.</span> <span m='3183830'>It</span>
  <span m='3183950'>comes</span> <span m='3184310'>out</span> <span m='3184460'>to</span>
  <span m='3185770'>e</span> <span m='3186170'>to</span> <span m='3186410'>the</span>
  <span m='3186530'>mu</span> <span m='3188150'>over</span> <span m='3189610'>2</span>
  <span m='3190050'>to</span> <span m='3190220'>2</span> <span m='3190370'>mu.</span>
  </p><p><span m='3196460'>So</span> <span m='3196670'>this</span> <span m='3196850'>is</span>
  <span m='3196970'>e</span> <span m='3197390'>over</span> <span m='3197690'>4</span>
  <span m='3198620'>to</span> <span m='3199040'>the</span> <span m='3199250'>mu.</span>
  <span m='3199550'>You</span> <span m='3200000'>can</span> <span m='3200160'>check</span>
  <span m='3200380'>e.</span> <span m='3200820'>It's</span> <span m='3201260'>2.71828.</span>
  <span m='3204230'>So</span> <span m='3204500'>this</span> <span m='3204710'>is</span>
  <span m='3205070'>less</span> <span m='3206180'>than</span> <span m='3207500'>1,</span>
  <span m='3209000'>kind</span> <span m='3209180'>of</span> <span m='3209240'>roughly</span>
  <span m='3209660'>a</span> <span m='3209690'>half-ish.</span> <span m='3211580'>So</span>
  <span m='3211760'>this</span> <span m='3211970'>is</span> <span m='3212390'>good.</span>
  <span m='3213350'>This</span> <span m='3213530'>is</span> <span m='3213710'>something</span>
  <span m='3214340'>like</span> <span m='3214490'>1</span> <span m='3214670'>over</span>
  <span m='3214950'>2</span> <span m='3215050'>to</span> <span m='3215840'>the</span>
  <span m='3215960'>mu.</span> <span m='3216635'>What's</span> <span m='3216920'>mu?</span>
  </p><p><span m='3225260'>mu</span> <span m='3226010'>is</span> <span m='3227310'>1/3</span>
  <span m='3228780'>2</span> <span m='3228960'>to</span> <span m='3229050'>the</span>
  <span m='3229230'>h</span> <span m='3230350'>for</span> <span m='3230570'>a</span>
  <span m='3230700'>height</span> <span m='3231090'>h</span> <span m='3231380'>node.</span>
  <span m='3233340'>It</span> <span m='3233430'>depends</span> <span m='3233760'>on
  how</span> <span m='3233880'>high</span> <span m='3234120'>you</span> <span m='3234240'>are.</span>
  <span m='3235130'>If</span> <span m='3235240'>you're</span> <span m='3235410'>at</span>
  <span m='3235510'>a</span> <span m='3235710'>leaf</span> <span m='3236040'>h is</span>
  <span m='3236340'>0,</span> <span m='3237510'>so</span> <span m='3237630'>you</span>
  <span m='3237690'>expect</span> <span m='3238140'>1/3</span> <span m='3238470'>of</span>
  <span m='3238560'>an</span> <span m='3238650'>element</span> <span m='3238980'>there.</span>
  <span m='3240300'>As</span> <span m='3240450'>you</span> <span m='3240540'>go</span>
  <span m='3240720'>up</span> <span m='3240930'>you</span> <span m='3240990'>expect</span>
  <span m='3241290'>more</span> <span m='3241500'>elements</span> <span m='3241860'>to</span>
  <span m='3242160'>hash</span> <span m='3242490'>there,</span> <span m='3242850'>of</span>
  <span m='3242910'>course.</span> </p><p><span m='3244380'>OK,</span> <span m='3244590'>so</span>
  <span m='3244800'>this</span> <span m='3245070'>gives</span> <span m='3245310'>us</span>
  <span m='3245430'>some</span> <span m='3245760'>measure</span> <span m='3246450'>in</span>
  <span m='3246600'>terms</span> <span m='3246870'>of</span> <span m='3246960'>this</span>
  <span m='3247200'>h</span> <span m='3248250'>of</span> <span m='3248430'>what's</span>
  <span m='3248640'>going</span> <span m='3248940'>on.</span> <span m='3249180'>But</span>
  <span m='3249330'>it's</span> <span m='3249480'>actually</span> <span m='3249870'>doubly</span>
  <span m='3250350'>exponential</span> <span m='3250980'>in</span> <span m='3251070'>h.</span>
  <span m='3251550'>So</span> <span m='3251700'>this</span> <span m='3251880'>is</span>
  <span m='3252000'>a</span> <span m='3252060'>very</span> <span m='3252300'>small</span>
  <span m='3252690'>probability.</span> <span m='3253340'>You</span> <span m='3253470'>go</span>
  <span m='3253620'>up</span> <span m='3253800'>a</span> <span m='3253830'>few</span>
  <span m='3254070'>levels.</span> </p><p><span m='3255030'>Like,</span> <span m='3255330'>after</span>
  <span m='3255570'>log</span> <span m='3255840'>log</span> <span m='3256030'>n</span>
  <span m='3256140'>levels</span> <span m='3256510'>it's a</span> <span m='3256830'>polynomially</span>
  <span m='3257430'>small</span> <span m='3257700'>probability</span> <span m='3258240'>of</span>
  <span m='3258330'>happening.</span> <span m='3260040'>Because</span> <span m='3260240'>then</span>
  <span m='3260915'>2</span> <span m='3261200'>to the</span> <span m='3261450'>log</span>
  <span m='3261900'>log n</span> <span m='3262070'>is</span> <span m='3262190'>log</span>
  <span m='3262450'>n.</span> <span m='3262700'>And</span> <span m='3262790'>then</span>
  <span m='3263160'>e over</span> <span m='3263270'>4</span> <span m='3263580'>to</span>
  <span m='3263750'>the</span> <span m='3263840'>log</span> <span m='3264140'>n</span>
  <span m='3264395'>is</span> <span m='3264650'>about</span> <span m='3264890'>n.</span>
  <span m='3266970'>OK.</span> <span m='3269930'>But</span> <span m='3270260'>at</span>
  <span m='3270660'>small</span> <span m='3270990'>levels</span> <span m='3271350'>this</span>
  <span m='3271500'>may</span> <span m='3271680'>happen,</span> <span m='3273450'>near</span>
  <span m='3273600'>the</span> <span m='3273690'>leaves.</span> </p><p><span m='3275100'>All</span>
  <span m='3275180'>right,</span> <span m='3275400'>so</span> <span m='3275580'>now</span>
  <span m='3275820'>I</span> <span m='3275910'>want</span> <span m='3276090'>to</span>
  <span m='3276150'>look</span> <span m='3276420'>at</span> <span m='3276630'>a</span>
  <span m='3276750'>run</span> <span m='3279480'>in</span> <span m='3279660'>the</span>
  <span m='3279780'>table.</span> <span m='3281260'>These</span> <span m='3281400'>are</span>
  <span m='3281460'>the</span> <span m='3281580'>things</span> <span m='3282900'>I</span>
  <span m='3283050'>have</span> <span m='3283500'>trouble</span> <span m='3284550'>thinking</span>
  <span m='3284970'>about</span> <span m='3285270'>because</span> <span m='3286200'>runs</span>
  <span m='3286560'>tend</span> <span m='3286800'>to</span> <span m='3286890'>get</span>
  <span m='3287010'>bigger,</span> <span m='3287610'>and</span> <span m='3287880'>we</span>
  <span m='3288180'>worry</span> <span m='3288390'>about</span> <span m='3288660'>them.</span>
  <span m='3289500'>This</span> <span m='3289680'>is</span> <span m='3289770'>now</span>
  <span m='3290100'>as</span> <span m='3290430'>items</span> <span m='3290790'>are</span>
  <span m='3290910'>actually</span> <span m='3291360'>stored</span> <span m='3291630'>at</span>
  <span m='3291720'>the</span> <span m='3291840'>table,</span> <span m='3292620'>when</span>
  <span m='3292800'>do</span> <span m='3292890'>I</span> <span m='3292950'>have</span>
  <span m='3293130'>a</span> <span m='3293190'>bunch</span> <span m='3293490'>of</span>
  <span m='3293580'>consecutive</span> <span m='3294150'>items</span> <span m='3294480'>in</span>
  <span m='3294570'>there</span> <span m='3295950'>that</span> <span m='3296100'>happen</span>
  <span m='3296460'>to</span> <span m='3297060'>end</span> <span m='3297360'>up</span>
  <span m='3297690'>in</span> <span m='3298380'>consecutive</span> <span m='3299460'>slots?</span>
  <span m='3302280'>So</span> <span m='3302880'>I'm</span> <span m='3303030'>worried</span>
  <span m='3303240'>about</span> <span m='3303420'>how</span> <span m='3303570'>long</span>
  <span m='3303840'>that</span> <span m='3304410'>run</span> <span m='3304680'>is.</span>
  </p><p><span m='3305640'>So</span> <span m='3305880'>let's</span> <span m='3306090'>look</span>
  <span m='3306360'>at</span> <span m='3307750'>its</span> <span m='3307980'>logarithm</span>
  <span m='3311820'>and</span> <span m='3312000'>round</span> <span m='3312300'>to
  the</span> <span m='3312550'>nearest</span> <span m='3312810'>power</span> <span
  m='3313120'>of</span> <span m='3313200'>2.</span> <span m='3313530'>So</span> <span
  m='3313620'>let's</span> <span m='3313800'>say</span> <span m='3313950'>it</span>
  <span m='3314010'>has</span> <span m='3314190'>length</span> <span m='3314550'>about</span>
  <span m='3314830'>2</span> <span m='3315100'>to the</span> <span m='3315480'>l.</span>
  <span m='3315860'>Sorry,</span> <span m='3317190'>plus</span> <span m='3317520'>1.</span>
  <span m='3320270'>All</span> <span m='3320575'>right,</span> <span m='3320880'>between</span>
  <span m='3321240'>2</span> <span m='3321420'>to the</span> <span m='3321570'>l</span>
  <span m='3321690'>and</span> <span m='3321780'>2 to</span> <span m='3321930'>the</span>
  <span m='3322050'>l</span> <span m='3322170'>plus</span> <span m='3322440'>1.</span>
  <span m='3323890'>OK,</span> <span m='3326540'>look</span> <span m='3326730'>at</span>
  <span m='3326840'>that.</span> </p><p><span m='3328830'>And</span> <span m='3329310'>it's</span>
  <span m='3329880'>spanned</span> <span m='3333270'>by</span> <span m='3336675'>some</span>
  <span m='3336810'>number</span> <span m='3337050'>of</span> <span m='3337140'>nodes</span>
  <span m='3342240'>of</span> <span m='3342740'>height</span> <span m='3343740'>h</span>
  <span m='3344160'>equals</span> <span m='3344640'>l</span> <span m='3344970'>minus</span>
  <span m='3345690'>3.</span> <span m='3348100'>OK,</span> <span m='3348480'>so</span>
  <span m='3348600'>there's</span> <span m='3348750'>some</span> <span m='3348990'>interval</span>
  <span m='3350310'>that</span> <span m='3350430'>happens</span> <span m='3350730'>to</span>
  <span m='3350850'>be</span> <span m='3350940'>a</span> <span m='3350990'>run,</span>
  <span m='3351240'>meaning</span> <span m='3351540'>all</span> <span m='3351840'>of</span>
  <span m='3351930'>these</span> <span m='3352080'>slots</span> <span m='3353160'>are</span>
  <span m='3353340'>occupied.</span> <span m='3354810'>And</span> <span m='3355680'>that's</span>
  <span m='3356190'>2</span> <span m='3356400'>to</span> <span m='3356860'>the</span>
  <span m='3357310'>2,</span> <span m='3357810'>I</span> <span m='3357960'>guess,</span>
  <span m='3358320'>since</span> <span m='3358780'>I</span> <span m='3358830'>got</span>
  <span m='3358950'>to</span> <span m='3359250'>level</span> <span m='3359800'>negative</span>
  <span m='3360210'>1.</span> <span m='3360550'>A</span> <span m='3360890'>little</span>
  <span m='3361050'>hard</span> <span m='3361230'>to</span> <span m='3361320'>do</span>
  <span m='3361470'>in</span> <span m='3361550'>a</span> <span m='3361620'>small</span>
  <span m='3361890'>picture.</span> <span m='3362910'>But</span> <span m='3363420'>we're</span>
  <span m='3363660'>worried</span> <span m='3363870'>about</span> <span m='3364110'>when</span>
  <span m='3364260'>this</span> <span m='3364410'>is</span> <span m='3364500'>really</span>
  <span m='3364800'>big</span> <span m='3365280'>more</span> <span m='3365580'>than</span>
  <span m='3365850'>some</span> <span m='3366090'>constant.</span> </p><p><span m='3368020'>OK,</span>
  <span m='3368280'>so</span> <span m='3368430'>let's</span> <span m='3368610'>suppose</span>
  <span m='3368940'>I</span> <span m='3369030'>was</span> <span m='3369180'>looking</span>
  <span m='3369540'>at</span> <span m='3369840'>this</span> <span m='3370170'>level.</span>
  <span m='3371460'>Then</span> <span m='3372150'>this</span> <span m='3372390'>interval</span>
  <span m='3372930'>is</span> <span m='3373040'>spanned,</span> <span m='3373830'>in</span>
  <span m='3373980'>particular,</span> <span m='3374520'>by</span> <span m='3374880'>these</span>
  <span m='3375150'>two</span> <span m='3375390'>nodes.</span> <span m='3375870'>Now</span>
  <span m='3376080'>it's</span> <span m='3376200'>a</span> <span m='3376230'>little</span>
  <span m='3376440'>sloppy</span> <span m='3376950'>because</span> <span m='3377310'>this</span>
  <span m='3377400'>node</span> <span m='3378210'>contains</span> <span m='3378570'>some</span>
  <span m='3378870'>non-interval,</span> <span m='3379800'>non-run</span> <span m='3380310'>stuff,</span>
  <span m='3380700'>and</span> <span m='3380820'>so</span> <span m='3380970'>does</span>
  <span m='3381120'>this</span> <span m='3381270'>one.</span> </p><p><span m='3382860'>At</span>
  <span m='3383040'>the</span> <span m='3383130'>next</span> <span m='3383340'>level</span>
  <span m='3383580'>down</span> <span m='3383970'>it</span> <span m='3384060'>would</span>
  <span m='3384150'>be</span> <span m='3384480'>this</span> <span m='3384720'>way</span>
  <span m='3384880'>one,</span> <span m='3385980'>this</span> <span m='3386190'>one,</span>
  <span m='3386750'>and</span> <span m='3386940'>this</span> <span m='3387120'>one,</span>
  <span m='3387430'>which</span> <span m='3387480'>is</span> <span m='3387600'>a</span>
  <span m='3387630'>little</span> <span m='3387840'>more</span> <span m='3388020'>precise.</span>
  <span m='3388730'>But</span> <span m='3389180'>it's</span> <span m='3389280'>never</span>
  <span m='3389490'>going</span> <span m='3389630'>to</span> <span m='3389700'>be</span>
  <span m='3389820'>quite</span> <span m='3390060'>perfect.</span> <span m='3391680'>But</span>
  <span m='3392340'>just</span> <span m='3392670'>take</span> <span m='3393360'>all</span>
  <span m='3393630'>the</span> <span m='3393720'>nodes</span> <span m='3393960'>you</span>
  <span m='3394050'>need</span> <span m='3394350'>to</span> <span m='3394500'>completely</span>
  <span m='3394980'>cover</span> <span m='3395280'>the</span> <span m='3395370'>run.</span>
  </p><p><span m='3397050'>Then</span> <span m='3397500'>this</span> <span m='3397740'>will</span>
  <span m='3397860'>be</span> <span m='3399030'>at</span> <span m='3399150'>least</span>
  <span m='3399990'>eight</span> <span m='3400290'>nodes</span> <span m='3402210'>because</span>
  <span m='3403170'>the</span> <span m='3403260'>length</span> <span m='3403500'>is</span>
  <span m='3403630'>1</span> <span m='3403840'>to the</span> <span m='3404010'>l.</span>
  <span m='3404190'>We</span> <span m='3404310'>went</span> <span m='3404550'>three</span>
  <span m='3404850'>levels</span> <span m='3405180'>down,</span> <span m='3405420'>2
  to the</span> <span m='3405720'>3</span> <span m='3405930'>is</span> <span m='3406080'>8.</span>
  <span m='3407640'>So</span> <span m='3408000'>if</span> <span m='3408160'>it's</span>
  <span m='3408300'>perfectly</span> <span m='3408780'>aligned</span> <span m='3409140'>it</span>
  <span m='3409230'>will</span> <span m='3409320'>be</span> <span m='3409440'>exactly</span>
  <span m='3410040'>8</span> <span m='3410970'>nodes.</span> <span m='3411840'>In</span>
  <span m='3411960'>the</span> <span m='3412050'>worst</span> <span m='3412290'>case,</span>
  <span m='3413250'>it</span> <span m='3413340'>could</span> <span m='3413520'>be</span>
  <span m='3413670'>as</span> <span m='3413790'>much</span> <span m='3414060'>as</span>
  <span m='3414930'>17.</span> <span m='3416700'>Because</span> <span m='3418410'>potentially,</span>
  <span m='3418980'>we're</span> <span m='3419130'>2</span> <span m='3419280'>to</span>
  <span m='3419400'>the l</span> <span m='3419700'>plus 1,</span> <span m='3420750'>which</span>
  <span m='3420930'>means</span> <span m='3421200'>we</span> <span m='3421260'>have</span>
  <span m='3421380'>16</span> <span m='3421800'>nodes</span> <span m='3422130'>if</span>
  <span m='3422280'>we're</span> <span m='3422370'>perfectly</span> <span m='3422820'>aligned.</span>
  </p><p><span m='3423170'>But</span> <span m='3423270'>then</span> <span m='3423420'>if</span>
  <span m='3423510'>you</span> <span m='3423630'>shift</span> <span m='3423890'>if</span>
  <span m='3423990'>over</span> <span m='3424410'>it</span> <span m='3424830'>might</span>
  <span m='3424950'>be</span> <span m='3425100'>one</span> <span m='3425280'>more</span>
  <span m='3425580'>because</span> <span m='3425880'>of</span> <span m='3426330'>the</span>
  <span m='3426420'>slot.</span> <span m='3427750'>OK,</span> <span m='3427950'>but</span>
  <span m='3428100'>some</span> <span m='3428300'>constant</span> <span m='3428600'>number</span>
  <span m='3428790'>of</span> <span m='3428880'>nodes.</span> <span m='3430630'>It's</span>
  <span m='3431310'>important</span> <span m='3431700'>that</span> <span m='3431910'>it's
  at</span> <span m='3432000'>least</span> <span m='3432240'>eight.</span> <span m='3433780'>That's</span>
  <span m='3433890'>what</span> <span m='3434020'>we</span> <span m='3434130'>need.</span>
  </p><p><span m='3435780'>Actually,</span> <span m='3436050'>we</span> <span m='3436170'>just</span>
  <span m='3436290'>need</span> <span m='3436480'>that's</span> <span m='3436570'>it</span>
  <span m='3436720'>at</span> <span m='3436800'>least</span> <span m='3437060'>five,</span>
  <span m='3437550'>but</span> <span m='3438510'>eight</span> <span m='3438720'>is</span>
  <span m='3438990'>the</span> <span m='3439280'>nearest</span> <span m='3439590'>power</span>
  <span m='3439860'>of</span> <span m='3439950'>two</span> <span m='3441120'>rounding</span>
  <span m='3441450'>up.</span> <span m='3442860'>Cool.</span> <span m='3443700'>So,</span>
  <span m='3444600'>there</span> <span m='3444750'>they</span> <span m='3444900'>are.</span>
  </p><p><span m='3445500'>Now,</span> <span m='3445890'>I</span> <span m='3445980'>want</span>
  <span m='3446130'>to</span> <span m='3446190'>look</span> <span m='3446460'>at</span>
  <span m='3447210'>the</span> <span m='3447330'>first</span> <span m='3448440'>four</span>
  <span m='3448860'>nodes</span> <span m='3450750'>of</span> <span m='3450930'>these</span>
  <span m='3451230'>eight to</span> <span m='3451530'>12</span> <span m='3452100'>nodes.</span>
  <span m='3452850'>So</span> <span m='3453000'>first</span> <span m='3453300'>meaning</span>
  <span m='3453600'>leftmost.</span> <span m='3455220'>Earliest</span> <span m='3455790'>in</span>
  <span m='3456090'>the</span> <span m='3456750'>run.</span> </p><p><span m='3458590'>So</span>
  <span m='3458690'>if</span> <span m='3458790'>you</span> <span m='3458890'>think</span>
  <span m='3458970'>about</span> <span m='3459270'>them,</span> <span m='3459560'>so</span>
  <span m='3459650'>there's</span> <span m='3459690'>some</span> <span m='3459930'>four</span>
  <span m='3460200'>nodes</span> <span m='3461790'>each</span> <span m='3462030'>of</span>
  <span m='3462090'>them</span> <span m='3462300'>spans</span> <span m='3462920'>some--</span>
  <span m='3463325'>I should</span> <span m='3463730'>draw</span> <span m='3464290'>these</span>
  <span m='3465360'>properly.</span> <span m='3471090'>What</span> <span m='3471240'>we</span>
  <span m='3471360'>know</span> <span m='3471570'>is</span> <span m='3471690'>that</span>
  <span m='3471780'>these</span> <span m='3472080'>guys</span> <span m='3472320'>are</span>
  <span m='3472410'>entirely</span> <span m='3473190'>filled</span> <span m='3474540'>with</span>
  <span m='3475110'>items.</span> <span m='3476630'>The</span> <span m='3476970'>run</span>
  <span m='3477750'>occupies</span> <span m='3478230'>here.</span> <span m='3478410'>It's</span>
  <span m='3478560'>got</span> <span m='3478710'>to</span> <span m='3479040'>be</span>
  <span m='3479250'>at</span> <span m='3479310'>least</span> <span m='3479700'>one</span>
  <span m='3479880'>item</span> <span m='3480130'>into</span> <span m='3480350'>here,</span>
  <span m='3480560'>but</span> <span m='3481200'>the</span> <span m='3481290'>rest</span>
  <span m='3481500'>of</span> <span m='3481560'>this</span> <span m='3481740'>could</span>
  <span m='3481890'>be</span> <span m='3482010'>empty.</span> <span m='3482720'>And</span>
  <span m='3482850'>the</span> <span m='3482910'>interval</span> <span m='3483180'>keeps</span>
  <span m='3483420'>going</span> <span m='3483750'>to</span> <span m='3483870'>the</span>
  <span m='3483990'>right</span> <span m='3484390'>so</span> <span m='3484500'>we</span>
  <span m='3484590'>know</span> <span m='3484770'>that</span> <span m='3485370'>all</span>
  <span m='3485610'>of</span> <span m='3485670'>these</span> <span m='3485820'>are</span>
  <span m='3485880'>completely</span> <span m='3486600'>filled</span> <span m='3486990'>with</span>
  <span m='3487110'>items</span> <span m='3487420'>somehow.</span> </p><p><span m='3489360'>So</span>
  <span m='3489660'>let's</span> <span m='3489810'>start</span> <span m='3490080'>with</span>
  <span m='3490290'>how</span> <span m='3490440'>many</span> <span m='3490680'>there</span>
  <span m='3490860'>are,</span> <span m='3491140'>I</span> <span m='3491230'>guess.</span>
  <span m='3493500'>They</span> <span m='3493710'>span</span> <span m='3498870'>more</span>
  <span m='3499260'>than</span> <span m='3499530'>three</span> <span m='3500010'>times</span>
  <span m='3500640'>2</span> <span m='3500910'>to</span> <span m='3501060'>the</span>
  <span m='3501390'>h</span> <span m='3502980'>slots</span> <span m='3505080'>of</span>
  <span m='3505380'>the</span> <span m='3505470'>run.</span> <span m='3506940'>So</span>
  <span m='3507090'>somehow</span> <span m='3508200'>3</span> <span m='3508440'>times</span>
  <span m='3508800'>2</span> <span m='3508920'>to</span> <span m='3509040'>the</span>
  <span m='3509220'>h--</span> <span m='3510060'>because</span> <span m='3510480'>there's</span>
  <span m='3510720'>three</span> <span m='3510990'>of</span> <span m='3511050'>them</span>
  <span m='3511200'>that</span> <span m='3511320'>are</span> <span m='3511380'>completely</span>
  <span m='3511770'>filled,</span> <span m='3512190'>otherwise</span> <span m='3512550'>it
  would</span> <span m='3512770'>be</span> <span m='3513170'>four.</span> <span m='3515490'>Somehow</span>
  <span m='3515850'>three</span> <span m='3516060'>times</span> <span m='3516300'>two</span>
  <span m='3516450'>to the h</span> <span m='3516750'>items</span> <span m='3517140'>ended</span>
  <span m='3517740'>here.</span> </p><p><span m='3518490'>Now,</span> <span m='3518640'>how</span>
  <span m='3518970'>did</span> <span m='3519090'>they</span> <span m='3519300'>end</span>
  <span m='3519540'>up</span> <span m='3519720'>here?</span> <span m='3520030'>Notice</span>
  <span m='3521910'>there's</span> <span m='3522120'>a</span> <span m='3522240'>blank</span>
  <span m='3522600'>space</span> <span m='3523590'>right</span> <span m='3523860'>here.</span>
  <span m='3524910'>By</span> <span m='3525090'>definition</span> <span m='3525570'>this</span>
  <span m='3525720'>was</span> <span m='3525840'>the</span> <span m='3525930'>beginning</span>
  <span m='3526410'>of</span> <span m='3526530'>a</span> <span m='3526590'>run.</span>
  <span m='3526860'>Meaning</span> <span m='3527580'>the</span> <span m='3527670'>previous</span>
  <span m='3528180'>slot</span> <span m='3528900'>is</span> <span m='3529050'>empty.</span>
  <span m='3530380'>Which</span> <span m='3530460'>means</span> <span m='3531570'>all</span>
  <span m='3531870'>of</span> <span m='3531990'>the</span> <span m='3532080'>keys</span>
  <span m='3532440'>that</span> <span m='3532590'>wanted</span> <span m='3533070'>to</span>
  <span m='3533250'>live</span> <span m='3533580'>from</span> <span m='3533760'>here</span>
  <span m='3533940'>to</span> <span m='3534090'>the</span> <span m='3534210'>left</span>
  <span m='3536100'>got</span> <span m='3536370'>to.</span> </p><p><span m='3537810'>So</span>
  <span m='3538050'>if we're</span> <span m='3538200'>just</span> <span m='3538380'>thinking</span>
  <span m='3538620'>about</span> <span m='3538800'>the</span> <span m='3538890'>keys</span>
  <span m='3539130'>that</span> <span m='3539250'>ended</span> <span m='3539550'>up</span>
  <span m='3539730'>in</span> <span m='3539850'>this</span> <span m='3540030'>interval,</span>
  <span m='3540900'>they</span> <span m='3541080'>had</span> <span m='3541380'>to</span>
  <span m='3541560'>initially</span> <span m='3542190'>hash</span> <span m='3543110'>to</span>
  <span m='3543270'>somewhere</span> <span m='3543840'>in</span> <span m='3544020'>here.</span>
  <span m='3545160'>h</span> <span m='3545970'>put</span> <span m='3546300'>them</span>
  <span m='3546510'>somewhere</span> <span m='3546870'>in</span> <span m='3546960'>this</span>
  <span m='3547110'>interval</span> <span m='3548010'>and</span> <span m='3548100'>then</span>
  <span m='3548280'>they</span> <span m='3548400'>may</span> <span m='3548550'>have</span>
  <span m='3548670'>moved</span> <span m='3548850'>to</span> <span m='3548970'>the</span>
  <span m='3549060'>right,</span> <span m='3550290'>but</span> <span m='3550740'>they</span>
  <span m='3550920'>never</span> <span m='3551160'>move</span> <span m='3551310'>to</span>
  <span m='3551400'>the</span> <span m='3551490'>left</span> <span m='3551850'>in</span>
  <span m='3552180'>linear</span> <span m='3552470'>hashing</span> <span m='3552820'>if</span>
  <span m='3552880'>you're</span> <span m='3553050'>not</span> <span m='3553140'>completely</span>
  <span m='3553590'>full.</span> <span m='3554490'>So</span> <span m='3554640'>because</span>
  <span m='3554940'>there</span> <span m='3555040'>was</span> <span m='3555180'>a</span>
  <span m='3555300'>blank</span> <span m='3555630'>spot</span> <span m='3555930'>here</span>
  <span m='3556600'>none</span> <span m='3556710'>of</span> <span m='3556800'>these</span>
  <span m='3557040'>keys</span> <span m='3557370'>could</span> <span m='3557550'>have</span>
  <span m='3557670'>fallen</span> <span m='3558180'>over</span> <span m='3558950'>to</span>
  <span m='3559080'>here,</span> <span m='3560130'>no</span> <span m='3560310'>deletions.</span>
  <span m='3563310'>So</span> <span m='3563820'>you're</span> <span m='3564000'>doing</span>
  <span m='3564270'>insertions.</span> <span m='3566070'>They</span> <span m='3566250'>may</span>
  <span m='3566480'>have just</span> <span m='3566560'>spread</span> <span m='3566910'>it</span>
  <span m='3567030'>out,</span> <span m='3567300'>and</span> <span m='3567390'>they</span>
  <span m='3567480'>made</span> <span m='3567720'>sconces</span> <span m='3568170'>have
  gone</span> <span m='3568500'>farther</span> <span m='3568590'>to the</span> <span
  m='3568680'>right,</span> <span m='3568950'>or</span> <span m='3569040'>they</span>
  <span m='3569160'>may</span> <span m='3569310'>filled</span> <span m='3569540'>in</span>
  <span m='3569640'>gaps,</span> <span m='3569970'>whatever,</span> <span m='3570780'>but</span>
  <span m='3570930'>h</span> <span m='3571170'>put</span> <span m='3571380'>them</span>
  <span m='3571560'>in</span> <span m='3571710'>this</span> <span m='3571860'>interval.</span>
  </p><p><span m='3573780'>Now,</span> <span m='3575400'>I</span> <span m='3575550'>claim</span>
  <span m='3577020'>that</span> <span m='3577150'>in</span> <span m='3577260'>fact,</span>
  <span m='3578580'>at</span> <span m='3578700'>least</span> <span m='3578940'>one</span>
  <span m='3579150'>of</span> <span m='3579240'>these</span> <span m='3579450'>nodes</span>
  <span m='3580350'>must</span> <span m='3580710'>be</span> <span m='3580980'>dangerous.</span>
  <span m='3582470'>Now</span> <span m='3583200'>dangerous</span> <span m='3583680'>is</span>
  <span m='3583800'>tricky,</span> <span m='3584160'>because</span> <span m='3584460'>dangerous</span>
  <span m='3584910'>is</span> <span m='3585000'>talking</span> <span m='3585360'>about</span>
  <span m='3585780'>where</span> <span m='3586080'>h</span> <span m='3586320'>puts</span>
  <span m='3586620'>nodes.</span> <span m='3586980'>But</span> <span m='3587100'>we</span>
  <span m='3587220'>just</span> <span m='3587400'>said,</span> <span m='3588370'>got</span>
  <span m='3588620'>to</span> <span m='3588750'>be</span> <span m='3588930'>at</span>
  <span m='3589020'>least</span> <span m='3589290'>three</span> <span m='3589620'>times</span>
  <span m='3589980'>two</span> <span m='3590220'>to the</span> <span m='3590430'>h</span>
  <span m='3591180'>keys,</span> <span m='3592650'>where</span> <span m='3592980'>h</span>
  <span m='3593280'>put</span> <span m='3593550'>them</span> <span m='3593790'>within</span>
  <span m='3594240'>these</span> <span m='3594450'>four</span> <span m='3594690'>nodes,</span>
  <span m='3595620'>otherwise</span> <span m='3595980'>they</span> <span m='3596130'>wouldn't</span>
  <span m='3596370'>have</span> <span m='3596490'>filled</span> <span m='3596790'>in</span>
  <span m='3596910'>here.</span> </p><p><span m='3598170'>Now,</span> <span m='3598620'>if</span>
  <span m='3598980'>none</span> <span m='3599190'>of</span> <span m='3599280'>those</span>
  <span m='3599460'>nodes</span> <span m='3600820'>were</span> <span m='3601290'>dangerous,</span>
  <span m='3611520'>then</span> <span m='3612600'>we'll</span> <span m='3612930'>get</span>
  <span m='3613080'>a</span> <span m='3613140'>contradiction.</span> <span m='3615120'>Because</span>
  <span m='3616230'>none</span> <span m='3616410'>of</span> <span m='3616470'>them</span>
  <span m='3616560'>were</span> <span m='3616650'>dangerous</span> <span m='3617610'>this</span>
  <span m='3617790'>means</span> <span m='3618300'>at</span> <span m='3618420'>most</span>
  <span m='3621800'>4</span> <span m='3622440'>times</span> <span m='3623100'>2/3</span>
  <span m='3624510'>times</span> <span m='3625170'>2</span> <span m='3625460'>to</span>
  <span m='3625560'>the</span> <span m='3625800'>h</span> <span m='3628310'>keys</span>
  <span m='3630636'>hash</span> <span m='3631118'>via</span> <span m='3631600'>h</span>
  <span m='3632070'>to</span> <span m='3632190'>them.</span> <span m='3638220'>Why?</span>
  <span m='3638490'>Because</span> <span m='3638850'>there's</span> <span m='3639030'>four</span>
  <span m='3639330'>of</span> <span m='3639450'>the</span> <span m='3639540'>nodes.</span>
  <span m='3640350'>Each</span> <span m='3640590'>of</span> <span m='3640650'>them,</span>
  <span m='3642240'>if</span> <span m='3642390'>it's</span> <span m='3642480'>not</span>
  <span m='3642660'>dangerous,</span> <span m='3643470'>has</span> <span m='3643680'>at</span>
  <span m='3643740'>most</span> <span m='3643980'>2/3</span> <span m='3645210'>of</span>
  <span m='3645420'>its</span> <span m='3645510'>size</span> <span m='3646820'>keys</span>
  <span m='3647100'>hashing</span> <span m='3647520'>there.</span> <span m='3650130'>4</span>
  <span m='3650400'>times</span> <span m='3650730'>2/3</span> <span m='3651870'>is</span>
  <span m='3652380'>8/3,</span> <span m='3654700'>which</span> <span m='3654840'>is</span>
  <span m='3654960'>less</span> <span m='3655410'>than</span> <span m='3655920'>9/3,</span>
  <span m='3656760'>which</span> <span m='3656940'>is</span> <span m='3657090'>3.</span>
  </p><p><span m='3658670'>OK,</span> <span m='3658920'>so</span> <span m='3659130'>this</span>
  <span m='3659670'>would</span> <span m='3659780'>be</span> <span m='3659940'>a</span>
  <span m='3660000'>contradiction</span> <span m='3661620'>because</span> <span m='3662010'>we</span>
  <span m='3662370'>just</span> <span m='3662580'>argued</span> <span m='3662910'>that</span>
  <span m='3663030'>at</span> <span m='3663120'>least</span> <span m='3663330'>3</span>
  <span m='3663660'>times</span> <span m='3664140'>2</span> <span m='3664340'>to</span>
  <span m='3664410'>the</span> <span m='3664530'>h</span> <span m='3664770'>nodes</span>
  <span m='3665070'>have</span> <span m='3665430'>to</span> <span m='3665910'>hash</span>
  <span m='3666240'>via</span> <span m='3666630'>h</span> <span m='3667500'>to</span>
  <span m='3667620'>somewhere</span> <span m='3668010'>in</span> <span m='3668070'>these</span>
  <span m='3668250'>nodes.</span> <span m='3670350'>They</span> <span m='3670440'>might</span>
  <span m='3670620'>hash</span> <span m='3670860'>here</span> <span m='3671130'>and</span>
  <span m='3671220'>then</span> <span m='3671390'>fallen</span> <span m='3671640'>over</span>
  <span m='3671850'>to</span> <span m='3671940'>here.</span> <span m='3672790'>So</span>
  <span m='3672890'>there</span> <span m='3672990'>is</span> <span m='3673020'>this</span>
  <span m='3673170'>kind</span> <span m='3673380'>of,</span> <span m='3673620'>things</span>
  <span m='3673920'>can</span> <span m='3674010'>move</span> <span m='3674190'>to</span>
  <span m='3674280'>the</span> <span m='3674370'>right,</span> <span m='3674610'>we've</span>
  <span m='3674730'>got</span> <span m='3674820'>to</span> <span m='3674910'>worry</span>
  <span m='3675060'>about</span> <span m='3675330'>it.</span> <span m='3675900'>But</span>
  <span m='3676530'>just</span> <span m='3676740'>look</span> <span m='3677430'>three</span>
  <span m='3677670'>levels</span> <span m='3678000'>up</span> <span m='3678830'>and</span>
  <span m='3679240'>it's</span> <span m='3679410'>OK.</span> <span m='3682230'>So</span>
  <span m='3682410'>one</span> <span m='3682650'>of</span> <span m='3682710'>these</span>
  <span m='3682910'>nodes,</span> <span m='3683160'>not</span> <span m='3683280'>necessarily</span>
  <span m='3683670'>all</span> <span m='3683820'>of</span> <span m='3683880'>them,</span>
  <span m='3684270'>are</span> <span m='3684330'>dangerous.</span> <span m='3693380'>And</span>
  <span m='3693540'>we</span> <span m='3693660'>can</span> <span m='3693810'>use</span>
  <span m='3694020'>that</span> <span m='3694470'>to</span> <span m='3695040'>finish</span>
  <span m='3695610'>our</span> <span m='3695820'>analysis.</span> </p><p><span m='3714690'>This</span>
  <span m='3714960'>is</span> <span m='3715040'>good</span> <span m='3715220'>news</span>
  <span m='3715550'>because</span> <span m='3717950'>it</span> <span m='3718040'>says</span>
  <span m='3718310'>that</span> <span m='3718460'>if</span> <span m='3718700'>we</span>
  <span m='3718820'>have</span> <span m='3719030'>a</span> <span m='3719120'>run,</span>
  <span m='3719570'>which</span> <span m='3719750'>is</span> <span m='3719810'>something</span>
  <span m='3720140'>that's</span> <span m='3720230'>hard</span> <span m='3720500'>to</span>
  <span m='3720590'>think</span> <span m='3720830'>about</span> <span m='3721110'>because</span>
  <span m='3721310'>nodes</span> <span m='3721550'>are</span> <span m='3721640'>moving</span>
  <span m='3721940'>around</span> <span m='3722500'>to</span> <span m='3722640'>form</span>
  <span m='3722860'>a</span> <span m='3722990'>run,</span> <span m='3723560'>so</span>
  <span m='3723740'>keys</span> <span m='3724070'>are</span> <span m='3724160'>moving</span>
  <span m='3724430'>around</span> <span m='3724640'>to form</span> <span m='3724830'>a
  run,</span> <span m='3725540'>we</span> <span m='3725690'>can</span> <span m='3725870'>charge</span>
  <span m='3726320'>it</span> <span m='3726740'>to</span> <span m='3726890'>a</span>
  <span m='3726950'>dangerous</span> <span m='3727520'>node.</span> <span m='3728270'>Which</span>
  <span m='3728420'>is</span> <span m='3728540'>easy</span> <span m='3728780'>to</span>
  <span m='3728900'>think</span> <span m='3729080'>about</span> <span m='3729380'>because</span>
  <span m='3729680'>that's</span> <span m='3729890'>just</span> <span m='3730100'>talking</span>
  <span m='3730460'>about</span> <span m='3731670'>where</span> <span m='3732050'>keys</span>
  <span m='3732290'>hash</span> <span m='3732590'>via</span> <span m='3732830'>h,</span>
  <span m='3733290'>and</span> <span m='3733400'>h</span> <span m='3733600'>is</span>
  <span m='3733700'>totally</span> <span m='3734030'>random.</span> <span m='3736190'>There's</span>
  <span m='3736490'>a</span> <span m='3736550'>loss</span> <span m='3737180'>of</span>
  <span m='3737390'>a</span> <span m='3737450'>factor</span> <span m='3737930'>of</span>
  <span m='3738020'>17,</span> <span m='3738770'>potentially.</span> <span m='3739760'>But</span>
  <span m='3740210'>it's</span> <span m='3740330'>a</span> <span m='3740360'>constant</span>
  <span m='3740720'>factor,</span> <span m='3741590'>no</span> <span m='3741680'>big</span>
  <span m='3741830'>deal.</span> </p><p><span m='3743350'>If</span> <span m='3743510'>we</span>
  <span m='3743600'>look</span> <span m='3743840'>at</span> <span m='3744050'>the</span>
  <span m='3744170'>probability</span> <span m='3745370'>that</span> <span m='3745640'>the</span>
  <span m='3745790'>length</span> <span m='3747020'>of</span> <span m='3747260'>a</span>
  <span m='3747310'>run,</span> <span m='3748520'>say</span> <span m='3748820'>containing</span>
  <span m='3749420'>some</span> <span m='3749860'>key</span> <span m='3750190'>x,</span>
  <span m='3751820'>has</span> <span m='3753190'>length</span> <span m='3755000'>between</span>
  <span m='3755660'>2</span> <span m='3755820'>to</span> <span m='3755960'>the</span>
  <span m='3756110'>l</span> <span m='3757130'>and</span> <span m='3757280'>to</span>
  <span m='3757550'>the</span> <span m='3757700'>l</span> <span m='3757910'>plus</span>
  <span m='3758240'>1,</span> <span m='3760790'>this</span> <span m='3761000'>is</span>
  <span m='3761150'>going</span> <span m='3761420'>to</span> <span m='3761540'>be</span>
  <span m='3761810'>at</span> <span m='3761960'>most</span> <span m='3762860'>17</span>
  <span m='3764150'>times</span> <span m='3764600'>the</span> <span m='3764690'>probability</span>
  <span m='3766160'>of</span> <span m='3766460'>a</span> <span m='3766490'>node</span>
  <span m='3768230'>at</span> <span m='3768620'>height</span> <span m='3771335'>l</span>
  <span m='3771770'>minus</span> <span m='3772220'>3</span> <span m='3773660'>is</span>
  <span m='3774020'>dangerous.</span> <span m='3778970'>Because</span> <span m='3779600'>we</span>
  <span m='3779690'>know</span> <span m='3779840'>one</span> <span m='3780050'>of</span>
  <span m='3780110'>them</span> <span m='3780290'>is,</span> <span m='3780730'>and</span>
  <span m='3780830'>so</span> <span m='3782060'>just</span> <span m='3782240'>to</span>
  <span m='3782360'>be</span> <span m='3782480'>sloppy</span> <span m='3782790'>it's</span>
  <span m='3783100'>at</span> <span m='3783230'>most</span> <span m='3784080'>the</span>
  <span m='3784100'>sum</span> <span m='3784430'>of</span> <span m='3784520'>the</span>
  <span m='3784640'>probabilities</span> <span m='3785360'>that</span> <span m='3785480'>any</span>
  <span m='3785750'>of</span> <span m='3785840'>them</span> <span m='3785990'>is.</span>
  <span m='3786380'>Then</span> <span m='3786650'>potentially</span> <span m='3787910'>there's</span>
  <span m='3788060'>a</span> <span m='3788120'>run</span> <span m='3788300'>of</span>
  <span m='3788390'>that</span> <span m='3788540'>length.</span> <span m='3788930'>And</span>
  <span m='3789020'>so</span> <span m='3789200'>union</span> <span m='3789530'>bound</span>
  <span m='3789830'>it's</span> <span m='3789970'>at most</span> <span m='3790180'>17</span>
  <span m='3790760'>times</span> <span m='3791510'>probability</span> <span m='3792020'>of</span>
  <span m='3792110'>this</span> <span m='3792230'>happening.</span> </p><p><span m='3792830'>Now</span>
  <span m='3793280'>all</span> <span m='3793500'>nodes</span> <span m='3793790'>look</span>
  <span m='3793950'>the</span> <span m='3794030'>same</span> <span m='3794330'>because</span>
  <span m='3794510'>we</span> <span m='3794600'>have</span> <span m='3794750'>a</span>
  <span m='3794810'>totally</span> <span m='3795560'>random</span> <span m='3795860'>hash</span>
  <span m='3796100'>function.</span> <span m='3796940'>So</span> <span m='3797050'>we</span>
  <span m='3797090'>just</span> <span m='3797240'>say</span> <span m='3797450'>any</span>
  <span m='3797690'>node</span> <span m='3797990'>at height</span> <span m='3798260'>l</span>
  <span m='3798410'>minus</span> <span m='3798740'>3.</span> <span m='3800260'>We</span>
  <span m='3800390'>already</span> <span m='3800540'>computed</span> <span m='3800930'>that</span>
  <span m='3801110'>probability.</span> <span m='3802820'>That</span> <span m='3803000'>was</span>
  <span m='3803180'>this.</span> <span m='3803630'>Probability</span> <span m='3804170'>of</span>
  <span m='3804270'>being</span> <span m='3804350'>dangerous</span> <span m='3804830'>was</span>
  <span m='3805370'>e</span> <span m='3805640'>over</span> <span m='3805890'>4</span>
  <span m='3806805'>to</span> <span m='3807060'>the</span> <span m='3807210'>1/3</span>
  <span m='3807770'>2</span> <span m='3807980'>to</span> <span m='3808070'>the</span>
  <span m='3808250'>h.</span> <span m='3809810'>So</span> <span m='3810080'>this</span>
  <span m='3810320'>is</span> <span m='3810440'>going</span> <span m='3810590'>to</span>
  <span m='3810680'>be</span> <span m='3812690'>at</span> <span m='3813000'>most</span>
  <span m='3813890'>17</span> <span m='3814640'>times</span> <span m='3815180'>e</span>
  <span m='3815660'>over</span> <span m='3816040'>4</span> <span m='3817955'>to</span>
  <span m='3818320'>the</span> <span m='3818600'>2</span> <span m='3819250'>to</span>
  <span m='3819470'>the</span> <span m='3819610'>l</span> <span m='3819945'>minus</span>
  <span m='3820280'>3</span> <span m='3820520'>power.</span> <span m='3822150'>Again,</span>
  <span m='3822850'>doubly</span> <span m='3823400'>exponential</span> <span m='3824180'>in</span>
  <span m='3825520'>l.</span> </p><p><span m='3828410'>So</span> <span m='3828740'>if</span>
  <span m='3828920'>we</span> <span m='3829160'>want</span> <span m='3829340'>to</span>
  <span m='3829400'>compute</span> <span m='3829760'>the</span> <span m='3829910'>expected</span>
  <span m='3830390'>run</span> <span m='3830570'>length</span> <span m='3837890'>we</span>
  <span m='3838070'>can</span> <span m='3838250'>just</span> <span m='3838460'>expand</span>
  <span m='3838910'>out</span> <span m='3839380'>the</span> <span m='3840140'>definition.</span>
  <span m='3841280'>Well,</span> <span m='3842220'>let's</span> <span m='3842630'>round</span>
  <span m='3843020'>it</span> <span m='3843500'>to</span> <span m='3843650'>powers</span>
  <span m='3844010'>of</span> <span m='3844100'>2.</span> <span m='3845765'>It</span>
  <span m='3846200'>could</span> <span m='3846560'>be</span> <span m='3846710'>the</span>
  <span m='3846800'>run</span> <span m='3847010'>length</span> <span m='3847250'>is</span>
  <span m='3847370'>about</span> <span m='3847700'>2</span> <span m='3847850'>to</span>
  <span m='3847940'>the</span> <span m='3848060'>l</span> <span m='3848210'>within</span>
  <span m='3848450'>a</span> <span m='3848510'>constant</span> <span m='3848870'>factor</span>
  <span m='3849230'>of</span> <span m='3849320'>2</span> <span m='3849500'>to the</span>
  <span m='3849630'>l.</span> <span m='3851360'>So</span> <span m='3851630'>it's</span>
  <span m='3851780'>going</span> <span m='3851900'>to</span> <span m='3851990'>be</span>
  <span m='3852080'>that</span> <span m='3852500'>times</span> <span m='3855080'>this</span>
  <span m='3855260'>probability.</span> </p><p><span m='3861420'>But</span> <span
  m='3861470'>this</span> <span m='3861710'>thing</span> <span m='3862520'>is</span>
  <span m='3862760'>basically</span> <span m='3863150'>1</span> <span m='3863420'>over</span>
  <span m='3863660'>2</span> <span m='3864005'>to the</span> <span m='3864350'>2</span>
  <span m='3864470'>to the</span> <span m='3864620'>l.</span> <span m='3865640'>And</span>
  <span m='3865730'>so</span> <span m='3865880'>the</span> <span m='3866000'>whole</span>
  <span m='3866150'>thing</span> <span m='3866390'>is</span> <span m='3867170'>constant.</span>
  <span m='3871640'>This</span> <span m='3871800'>is</span> <span m='3872010'>l.</span>
  <span m='3872580'>I</span> <span m='3872640'>mean,</span> <span m='3872820'>l</span>
  <span m='3873000'>could</span> <span m='3873150'>go</span> <span m='3873270'>to</span>
  <span m='3873360'>infinity.</span> <span m='3873870'>I</span> <span m='3873930'>don't</span>
  <span m='3874080'>really</span> <span m='3874320'>care.</span> <span m='3877320'>I</span>
  <span m='3877380'>mean,</span> <span m='3877660'>this</span> <span m='3877740'>gets</span>
  <span m='3877980'>dwarfed</span> <span m='3878460'>by</span> <span m='3878640'>the</span>
  <span m='3878730'>double</span> <span m='3879000'>exponential.</span> </p><p><span
  m='3880210'>This</span> <span m='3880380'>is</span> <span m='3880470'>super</span>
  <span m='3880800'>geometric.</span> <span m='3882090'>So</span> <span m='3882310'>a</span>
  <span m='3883050'>very</span> <span m='3883440'>low</span> <span m='3883590'>probability</span>
  <span m='3884220'>of</span> <span m='3884310'>getting</span> <span m='3884580'>long</span>
  <span m='3884820'>runs.</span> <span m='3886470'>As</span> <span m='3886650'>we</span>
  <span m='3886710'>said,</span> <span m='3886950'>after</span> <span m='3887260'>a</span>
  <span m='3887280'>log</span> <span m='3887580'>log</span> <span m='3887850'>n</span>
  <span m='3888480'>size--</span> <span m='3891210'>yeah,</span> <span m='3891390'>it's</span>
  <span m='3891710'>very</span> <span m='3892020'>unlikely</span> <span m='3892500'>to</span>
  <span m='3892590'>run</span> <span m='3892800'>longer</span> <span m='3893100'>than</span>
  <span m='3893270'>log</span> <span m='3893550'>n.</span> <span m='3894690'>We</span>
  <span m='3894810'>proved</span> <span m='3895050'>that</span> <span m='3895260'>in</span>
  <span m='3895380'>particular.</span> <span m='3897720'>But</span> <span m='3897900'>in</span>
  <span m='3897960'>particular,</span> <span m='3898510'>you</span> <span m='3898680'>compute</span>
  <span m='3898980'>the</span> <span m='3899040'>expected</span> <span m='3899490'>run</span>
  <span m='3899670'>length,</span> <span m='3899910'>it's</span> <span m='3900060'>constant.</span>
  </p><p><span m='3902800'>OK,</span> <span m='3903000'>now</span> <span m='3903150'>this</span>
  <span m='3903330'>of</span> <span m='3903420'>course</span> <span m='3903660'>assumed</span>
  <span m='3905160'>totally</span> <span m='3905580'>random.</span> <span m='3907010'>It's</span>
  <span m='3907410'>harder</span> <span m='3907890'>to</span> <span m='3908040'>prove--</span>
  <span m='3909300'>where</span> <span m='3909675'>were</span> <span m='3910050'>we.</span>
  <span m='3911790'>Somewhere.</span> <span m='3912660'>Linear</span> <span m='3913080'>probing.</span>
  </p><p><span m='3914420'>It's</span> <span m='3914550'>harder</span> <span m='3914790'>to</span>
  <span m='3914910'>prove</span> <span m='3915090'>five-wise</span> <span m='3915660'>independence</span>
  <span m='3916140'>is</span> <span m='3916290'>enough,</span> <span m='3916680'>but</span>
  <span m='3916890'>it's</span> <span m='3917040'>true.</span> <span m='3917810'>And</span>
  <span m='3918060'>it's</span> <span m='3918600'>much</span> <span m='3918840'>harder</span>
  <span m='3919050'>to</span> <span m='3919140'>prove</span> <span m='3919380'>simple</span>
  <span m='3920550'>tabulation</span> <span m='3921090'>hashing</span> <span m='3921390'>works,</span>
  <span m='3921690'>but</span> <span m='3921900'>it's</span> <span m='3921990'>true.</span>
  <span m='3922840'>So</span> <span m='3923040'>we</span> <span m='3923130'>can</span>
  <span m='3923250'>use</span> <span m='3923430'>them.</span> <span m='3924210'>This</span>
  <span m='3924360'>gives</span> <span m='3924510'>you</span> <span m='3924600'>some</span>
  <span m='3924840'>intuition</span> <span m='3925290'>for</span> <span m='3925470'>why</span>
  <span m='3926100'>it's</span> <span m='3926190'>really</span> <span m='3926400'>not</span>
  <span m='3926610'>that</span> <span m='3926820'>bad.</span> <span m='3928240'>And</span>
  <span m='3928410'>similar</span> <span m='3928790'>proof</span> <span m='3929010'>techniques</span>
  <span m='3929370'>are</span> <span m='3929460'>used</span> <span m='3929670'>for</span>
  <span m='3929820'>the</span> <span m='3929970'>five-wise</span> <span m='3930510'>independence.</span>
  </p><p><span m='3933570'>Other</span> <span m='3933870'>fun</span> <span m='3934140'>facts.</span>
  <span m='3934680'>You</span> <span m='3934890'>can</span> <span m='3936330'>do</span>
  <span m='3936730'>similar</span> <span m='3937560'>caching</span> <span m='3938130'>trick</span>
  <span m='3938350'>that</span> <span m='3938490'>we</span> <span m='3938640'>did</span>
  <span m='3938850'>before.</span> <span m='3940540'>Again,</span> <span m='3941610'>the</span>
  <span m='3941730'>worst</span> <span m='3942150'>run</span> <span m='3942510'>is</span>
  <span m='3942660'>going</span> <span m='3942840'>to</span> <span m='3942930'>be</span>
  <span m='3943720'>log,</span> <span m='3943860'>or</span> <span m='3944310'>log</span>
  <span m='3944550'>over</span> <span m='3944700'>log</span> <span m='3944940'>log.</span>
  <span m='3945510'>I don't</span> <span m='3945660'>have</span> <span m='3945810'>it</span>
  <span m='3945870'>written</span> <span m='3946080'>here.</span> <span m='3948030'>But</span>
  <span m='3948570'>if</span> <span m='3948930'>you</span> <span m='3949860'>cache</span>
  <span m='3950490'>the</span> <span m='3950610'>last--</span> <span m='3952680'>it's</span>
  <span m='3952860'>not</span> <span m='3953250'>quite</span> <span m='3953610'>enough</span>
  <span m='3953850'>to</span> <span m='3953910'>do</span> <span m='3954000'>the</span>
  <span m='3954090'>last</span> <span m='3954360'>log</span> <span m='3954660'>n.</span>
  </p><p><span m='3955320'>But</span> <span m='3955500'>if</span> <span m='3955620'>you</span>
  <span m='3955770'>cache</span> <span m='3957300'>the</span> <span m='3958320'>last</span>
  <span m='3961350'>log</span> <span m='3961980'>to</span> <span m='3962130'>the</span>
  <span m='3962280'>1</span> <span m='3962520'>plus</span> <span m='3962790'>epsilon</span>
  <span m='3963660'>n</span> <span m='3965220'>queries.</span> <span m='3966852'>It's</span>
  <span m='3967340'>a</span> <span m='3967380'>little</span> <span m='3967680'>bit</span>
  <span m='3967830'>more.</span> <span m='3969390'>Then</span> <span m='3969690'>you</span>
  <span m='3969840'>can</span> <span m='3970110'>generalize</span> <span m='3970710'>this</span>
  <span m='3970890'>argument.</span> <span m='3971440'>And</span> <span m='3971520'>so</span>
  <span m='3971670'>at</span> <span m='3971730'>least</span> <span m='3971910'>for</span>
  <span m='3972060'>totally</span> <span m='3973140'>random</span> <span m='3973530'>hash</span>
  <span m='3973800'>functions</span> <span m='3976230'>you</span> <span m='3976410'>get</span>
  <span m='3977190'>constant</span> <span m='3978030'>amortize</span> <span m='3978750'>with</span>
  <span m='3978930'>high</span> <span m='3979110'>probability.</span> </p><p><span
  m='3986120'>This</span> <span m='3986330'>weird</span> <span m='3986630'>thing</span>
  <span m='3986960'>that</span> <span m='3987110'>I've</span> <span m='3987710'>never</span>
  <span m='3987920'>seen</span> <span m='3988160'>before.</span> <span m='3989690'>But</span>
  <span m='3989960'>it's</span> <span m='3990140'>comforting</span> <span m='3990650'>because</span>
  <span m='3991790'>it's</span> <span m='3993350'>expected</span> <span m='3993830'>bounds</span>
  <span m='3994070'>are</span> <span m='3994160'>not</span> <span m='3994280'>so</span>
  <span m='3994460'>great,</span> <span m='3995170'>but</span> <span m='3995330'>you</span>
  <span m='3995440'>get</span> <span m='3995530'>it</span> <span m='3995600'>with</span>
  <span m='3995720'>high</span> <span m='3995870'>probability</span> <span m='3996360'>bound</span>
  <span m='3996590'>as</span> <span m='3996710'>long</span> <span m='3996920'>as</span>
  <span m='3996980'>you're</span> <span m='3997100'>willing</span> <span m='3997370'>to</span>
  <span m='3997460'>average</span> <span m='3997910'>over</span> <span m='3999290'>log</span>
  <span m='3999750'>to the</span> <span m='3999860'>1</span> <span m='4000040'>plus</span>
  <span m='4000220'>epsilon</span> <span m='4000610'>different</span> <span m='4000850'>queries.</span>
  <span m='4001960'>As</span> <span m='4002110'>long</span> <span m='4002260'>as</span>
  <span m='4002320'>you</span> <span m='4002410'>can</span> <span m='4002560'>remember</span>
  <span m='4002950'>them.</span> </p><p><span m='4006880'>And</span> <span m='4007210'>the</span>
  <span m='4007300'>proof</span> <span m='4007570'>is</span> <span m='4007660'>basically</span>
  <span m='4008200'>the</span> <span m='4008320'>same.</span> <span m='4009730'>Except</span>
  <span m='4010060'>now</span> <span m='4010750'>instead</span> <span m='4011050'>of</span>
  <span m='4011140'>looking</span> <span m='4011380'>at</span> <span m='4011440'>the</span>
  <span m='4011530'>length</span> <span m='4011770'>of</span> <span m='4011860'>a</span>
  <span m='4011920'>run</span> <span m='4012610'>containing</span> <span m='4013120'>x,</span>
  <span m='4014050'>you're</span> <span m='4014170'>looking</span> <span m='4014410'>at</span>
  <span m='4014530'>the</span> <span m='4014590'>length</span> <span m='4014860'>of
  the</span> <span m='4014980'>run</span> <span m='4015220'>containing</span> <span
  m='4015970'>one</span> <span m='4016330'>of</span> <span m='4016480'>these</span>
  <span m='4016690'>log</span> <span m='4017020'>to the</span> <span m='4017140'>1</span>
  <span m='4017290'>plus</span> <span m='4017530'>epsilon</span> <span m='4018730'>n</span>
  <span m='4019180'>nodes.</span> <span m='4019810'>That's</span> <span m='4020020'>your</span>
  <span m='4020140'>batch.</span> <span m='4021520'>And</span> <span m='4021850'>you</span>
  <span m='4021940'>do</span> <span m='4022090'>the</span> <span m='4022210'>same</span>
  <span m='4022540'>thing.</span> <span m='4023890'>But</span> <span m='4024040'>now</span>
  <span m='4024400'>do</span> <span m='4024610'>it with</span> <span m='4024790'>high</span>
  <span m='4024910'>probability</span> <span m='4025540'>analysis.</span> </p><p><span
  m='4027140'>But</span> <span m='4027190'>again,</span> <span m='4027430'>because</span>
  <span m='4027670'>the</span> <span m='4027850'>expectation</span> <span m='4028630'>is</span>
  <span m='4029590'>now</span> <span m='4029860'>bigger</span> <span m='4030130'>than</span>
  <span m='4030420'>log,</span> <span m='4031370'>expect</span> <span m='4031750'>there</span>
  <span m='4031930'>to</span> <span m='4032080'>be</span> <span m='4033250'>a</span>
  <span m='4033340'>lot</span> <span m='4033520'>of</span> <span m='4034180'>fairly</span>
  <span m='4034510'>long</span> <span m='4034750'>runs</span> <span m='4035050'>here.</span>
  <span m='4035470'>But</span> <span m='4036460'>that's</span> <span m='4036660'>OK,</span>
  <span m='4037120'>because</span> <span m='4037570'>on</span> <span m='4037720'>average</span>
  <span m='4038050'>is</span> <span m='4038170'>good.</span> <span m='4041700'>You</span>
  <span m='4041830'>expect</span> <span m='4042130'>to</span> <span m='4042220'>pay</span>
  <span m='4042370'>log</span> <span m='4042620'>to the</span> <span m='4042720'>1</span>
  <span m='4042880'>plus</span> <span m='4043090'>epsilon</span> <span m='4043480'>for</span>
  <span m='4043630'>log</span> <span m='4043820'>to the</span> <span m='4043960'>1</span>
  <span m='4044140'>plus</span> <span m='4044350'>epsilon</span> <span m='4044680'>queries.</span>
  <span m='4045790'>And</span> <span m='4046030'>so</span> <span m='4046210'>then</span>
  <span m='4046390'>you</span> <span m='4046900'>divide</span> <span m='4047380'>and</span>
  <span m='4047530'>amortize</span> <span m='4048040'>and</span> <span m='4048130'>you're</span>
  <span m='4048220'>done.</span> <span m='4050860'>It's</span> <span m='4051470'>a</span>
  <span m='4051530'>little</span> <span m='4051760'>bit</span> <span m='4051910'>more</span>
  <span m='4052060'>details</span> <span m='4052420'>in</span> <span m='4052510'>the</span>
  <span m='4052600'>notes</span> <span m='4053300'>about</span> <span m='4053490'>that</span>
  <span m='4053680'>if</span> <span m='4053800'>you</span> <span m='4053920'>want</span>
  <span m='4054040'>to</span> <span m='4054100'>read.</span> </p><p><span m='4056020'>I
  want</span> <span m='4056160'>to do</span> <span m='4056350'>one</span> <span m='4056710'>more</span>
  <span m='4057790'>topic,</span> <span m='4059300'>unless</span> <span m='4059640'>there</span>
  <span m='4059980'>are</span> <span m='4060390'>questions</span> <span m='4060850'>about</span>
  <span m='4062290'>linear</span> <span m='4062710'>probing.</span> <span m='4063700'>So,</span>
  <span m='4064270'>yeah?</span> </p><p><span m='4064957'>AUDIENCE:</span> <span m='4065195'>So,</span>
  <span m='4065434'>could</span> <span m='4065911'>you</span> <span m='4066388'>motivate</span>
  <span m='4066865'>why</span> <span m='4067819'>the</span> <span m='4068296'>[INAUDIBLE]</span>
  <span m='4068773'>value of</span> <span m='4069250'>mu</span> <span m='4069727'>is
  the</span> <span m='4070204'>mean</span> <span m='4070681'>for whatever</span> <span
  m='4071635'>quantity?</span> </p><p><span m='4072600'>ERIK DEMAINE:</span> <span
  m='4072730'>So</span> <span m='4072860'>mu</span> <span m='4073320'>is</span> <span
  m='4073570'>defined</span> <span m='4074050'>to</span> <span m='4074200'>be</span>
  <span m='4074380'>the</span> <span m='4074470'>mean</span> <span m='4074770'>of</span>
  <span m='4074920'>whatever</span> <span m='4075250'>quantity</span> <span m='4075700'>we're</span>
  <span m='4076030'>analyzing.</span> <span m='4076780'>And</span> <span m='4076920'>the</span>
  <span m='4077020'>Chernoff</span> <span m='4077410'>bounds</span> <span m='4077770'>says,</span>
  <span m='4079870'>probability</span> <span m='4080410'>that</span> <span m='4080530'>you're</span>
  <span m='4080650'>at</span> <span m='4080710'>least</span> <span m='4080890'>something</span>
  <span m='4081280'>times</span> <span m='4081670'>the</span> <span m='4081790'>mean</span>
  <span m='4082750'>is</span> <span m='4083320'>the</span> <span m='4083470'>formula</span>
  <span m='4083860'>we</span> <span m='4084010'>wrote</span> <span m='4084220'>last</span>
  <span m='4084460'>time.</span> <span m='4085250'>Now</span> <span m='4085930'>here,</span>
  <span m='4087100'>we're</span> <span m='4087370'>measuring--</span> <span m='4089270'>I</span>
  <span m='4089470'>didn't</span> <span m='4089710'>write</span> <span m='4090010'>what</span>
  <span m='4090310'>the</span> <span m='4090490'>left-hand</span> <span m='4090880'>side</span>
  <span m='4091240'>was.</span> <span m='4091870'>But</span> <span m='4091990'>here</span>
  <span m='4092270'>we're</span> <span m='4092320'>measuring</span> <span m='4092680'>what's</span>
  <span m='4092890'>the</span> <span m='4092980'>probability</span> <span m='4093610'>that</span>
  <span m='4093760'>the</span> <span m='4093880'>number</span> <span m='4094120'>of</span>
  <span m='4094240'>keys</span> <span m='4094510'>that</span> <span m='4094600'>hash</span>
  <span m='4094870'>via h</span> <span m='4095350'>to</span> <span m='4095440'>the</span>
  <span m='4095590'>interval</span> <span m='4096370'>is</span> <span m='4096550'>at</span>
  <span m='4096609'>least</span> <span m='4096880'>2/3</span> <span m='4097569'>the</span>
  <span m='4097660'>length</span> <span m='4097899'>of</span> <span m='4097960'>the</span>
  <span m='4098080'>interval.</span> </p><p><span m='4099050'>Now,</span> <span m='4101720'>let's</span>
  <span m='4101920'>say</span> <span m='4102040'>m</span> <span m='4102250'>equals</span>
  <span m='4102710'>3m</span> <span m='4104170'>then</span> <span m='4104380'>the</span>
  <span m='4104470'>expected</span> <span m='4105130'>number</span> <span m='4105370'>of</span>
  <span m='4105460'>keys</span> <span m='4105760'>that</span> <span m='4105850'>hash</span>
  <span m='4106270'>via</span> <span m='4106550'>h to</span> <span m='4106689'>interval</span>
  <span m='4107080'>is</span> <span m='4107260'>1/3</span> <span m='4108010'>times</span>
  <span m='4108310'>the</span> <span m='4108370'>length</span> <span m='4108590'>of</span>
  <span m='4108630'>the</span> <span m='4108729'>interval.</span> <span m='4109899'>Because</span>
  <span m='4110109'>we</span> <span m='4110200'>have</span> <span m='4110319'>a</span>
  <span m='4110380'>totally</span> <span m='4110740'>random</span> <span m='4111069'>thing,</span>
  <span m='4112149'>and</span> <span m='4112510'>we</span> <span m='4112660'>have</span>
  <span m='4112930'>a</span> <span m='4112990'>density</span> <span m='4113470'>of</span>
  <span m='4113560'>1/3</span> <span m='4114130'>overall.</span> <span m='4115420'>So</span>
  <span m='4115540'>you</span> <span m='4115600'>expect</span> <span m='4115960'>there</span>
  <span m='4116050'>to</span> <span m='4116170'>be</span> <span m='4116290'>1/3</span>
  <span m='4116950'>and</span> <span m='4117069'>so</span> <span m='4118270'>dangerous</span>
  <span m='4118960'>is</span> <span m='4119529'>when</span> <span m='4119740'>you're</span>
  <span m='4120160'>more</span> <span m='4120370'>than</span> <span m='4120520'>twice</span>
  <span m='4120850'>that.</span> <span m='4122380'>And</span> <span m='4122500'>so</span>
  <span m='4122620'>it's</span> <span m='4122770'>twice</span> <span m='4123200'>mu.</span>
  <span m='4124000'>Mu</span> <span m='4124300'>is,</span> <span m='4124779'>in</span>
  <span m='4124899'>this</span> <span m='4125050'>case,</span> <span m='4125260'>1/3</span>
  <span m='4125670'>the</span> <span m='4125760'>length</span> <span m='4125939'>the</span>
  <span m='4126100'>interval.</span> <span m='4126470'>And</span> <span m='4126550'>that's</span>
  <span m='4126790'>why</span> <span m='4127520'>I</span> <span m='4127590'>wrote</span>
  <span m='4127779'>that.</span> </p><p><span m='4128482'>AUDIENCE:</span> <span m='4128708'>So</span>
  <span m='4128935'>this comes</span> <span m='4129388'>from the</span> <span m='4129841'>m
  squared.</span> <span m='4130294'>[INAUDIBLE].</span> </p><p><span m='4130750'>ERIK
  DEMAINE:</span> <span m='4130804'>Yeah,</span> <span m='4131229'>it</span> <span
  m='4131319'>comes</span> <span m='4131590'>from</span> <span m='4131855'>m</span>
  <span m='4132120'>equals</span> <span m='4132550'>3m</span> <span m='4133029'>and</span>
  <span m='4133330'>totally</span> <span m='4133660'>random.</span> </p><p><span m='4134482'>AUDIENCE:</span>
  <span m='4134713'>[INAUDIBLE]</span> </p><p><span m='4138180'>ERIK DEMAINE:</span>
  <span m='4138339'>Yeah,</span> <span m='4138819'>OK</span> <span m='4139010'>let's</span>
  <span m='4139250'>make</span> <span m='4139460'>this</span> <span m='4139700'>equal.</span>
  <span m='4140720'>Make</span> <span m='4140899'>this</span> <span m='4141050'>more</span>
  <span m='4141229'>formal.</span> <span m='4143600'>It's</span> <span m='4143720'>an</span>
  <span m='4143810'>assumption,</span> <span m='4144290'>anyway,</span> <span m='4145670'>to</span>
  <span m='4145790'>simplify</span> <span m='4146270'>the</span> <span m='4146359'>proof.</span>
  <span m='4147359'>Good.</span> <span m='4148740'>Change</span> <span m='4149090'>that
  in the</span> <span m='4149180'>notes</span> <span m='4149490'>too.</span> <span
  m='4156170'>Cool.</span> </p><p><span m='4156590'>So</span> <span m='4156740'>then</span>
  <span m='4156890'>the</span> <span m='4156950'>expectation</span> <span m='4157580'>is</span>
  <span m='4157670'>exactly</span> <span m='4158300'>1/3</span> <span m='4158750'>instead</span>
  <span m='4159020'>of</span> <span m='4159140'>at</span> <span m='4159200'>most</span>
  <span m='4159470'>1/3.</span> <span m='4159979'>So</span> <span m='4160149'>it's</span>
  <span m='4160300'>all</span> <span m='4160760'>a</span> <span m='4160790'>little</span>
  <span m='4161000'>cleaner.</span> <span m='4161330'>Of</span> <span m='4161450'>course,</span>
  <span m='4161760'>this</span> <span m='4161810'>all</span> <span m='4161960'>works</span>
  <span m='4162290'>when</span> <span m='4162529'>m</span> <span m='4162660'>is</span>
  <span m='4163520'>at</span> <span m='4163640'>least</span> <span m='4164029'>1</span>
  <span m='4164420'>plus</span> <span m='4164689'>epsilon</span> <span m='4165140'>times</span>
  <span m='4165600'>n,</span> <span m='4166075'>but</span> <span m='4166340'>then</span>
  <span m='4166490'>you</span> <span m='4166580'>get</span> <span m='4166700'>a</span>
  <span m='4166760'>dependence</span> <span m='4167120'>on</span> <span m='4167210'>epsilon.</span>
  <span m='4168590'>Other</span> <span m='4169250'>questions?</span> </p><p><span
  m='4172189'>So</span> <span m='4172310'>bottom</span> <span m='4172609'>line</span>
  <span m='4172880'>is</span> <span m='4173229'>linear</span> <span m='4173450'>probing</span>
  <span m='4173930'>is</span> <span m='4174080'>actually</span> <span m='4175310'>good.</span>
  <span m='4176810'>Quadratic</span> <span m='4177290'>probing,</span> <span m='4177680'>double</span>
  <span m='4177920'>hashing,</span> <span m='4178370'>all</span> <span m='4178460'>those</span>
  <span m='4178609'>fancy</span> <span m='4178910'>things</span> <span m='4179180'>are</span>
  <span m='4179390'>also</span> <span m='4179660'>good.</span> <span m='4180859'>But</span>
  <span m='4181069'>they're</span> <span m='4181250'>really</span> <span m='4181970'>tuned</span>
  <span m='4182450'>for</span> <span m='4182660'>the</span> <span m='4182750'>case</span>
  <span m='4182990'>when</span> <span m='4183109'>your</span> <span m='4183200'>table</span>
  <span m='4183450'>is</span> <span m='4183620'>almost</span> <span m='4184069'>full.</span>
  <span m='4184399'>They</span> <span m='4184520'>get</span> <span m='4184670'>a</span>
  <span m='4184729'>better</span> <span m='4184970'>dependence</span> <span m='4185420'>on</span>
  <span m='4185540'>epsilon,</span> <span m='4186210'>which</span> <span m='4186260'>is</span>
  <span m='4186380'>how</span> <span m='4186590'>close</span> <span m='4186979'>to</span>
  <span m='4187189'>the</span> <span m='4187310'>bound</span> <span m='4187580'>you</span>
  <span m='4187700'>are.</span> </p><p><span m='4189800'>And</span> <span m='4189899'>so</span>
  <span m='4190609'>if</span> <span m='4190720'>you're</span> <span m='4191120'>constant</span>
  <span m='4191450'>factor</span> <span m='4191720'>away</span> <span m='4191960'>from</span>
  <span m='4192500'>space</span> <span m='4192800'>bound,</span> <span m='4193040'>linear</span>
  <span m='4193350'>probing</span> <span m='4193590'>is just</span> <span m='4193790'>fine.</span>
  <span m='4194660'>As</span> <span m='4194930'>long</span> <span m='4195200'>as</span>
  <span m='4195290'>you</span> <span m='4195380'>have</span> <span m='4195500'>enough</span>
  <span m='4195710'>independence,</span> <span m='4196430'>admittedly.</span> <span
  m='4197600'>Double</span> <span m='4197900'>hashing,</span> <span m='4199040'>I</span>
  <span m='4199190'>believe,</span> <span m='4200030'>gets</span> <span m='4200210'>around</span>
  <span m='4200510'>that.</span> <span m='4201080'>It</span> <span m='4201410'>does</span>
  <span m='4201560'>not</span> <span m='4201800'>need</span> <span m='4203120'>so</span>
  <span m='4203330'>much</span> <span m='4203540'>independence.</span> </p><p><span
  m='4207030'>OK.</span> <span m='4208640'>Instead</span> <span m='4209010'>of</span>
  <span m='4209140'>going</span> <span m='4209340'>to</span> <span m='4209460'>double</span>
  <span m='4209730'>hashing,</span> <span m='4210570'>I'm</span> <span m='4210870'>going</span>
  <span m='4210950'>to</span> <span m='4211060'>go</span> <span m='4211170'>to</span>
  <span m='4211260'>something</span> <span m='4211590'>kind</span> <span m='4211800'>of</span>
  <span m='4211860'>related</span> <span m='4212250'>double</span> <span m='4212520'>hashing,</span>
  <span m='4212980'>which</span> <span m='4213060'>is</span> <span m='4213180'>cuckoo</span>
  <span m='4213610'>hashing.</span> <span m='4225340'>Cuckoo</span> <span m='4225640'>hashing</span>
  <span m='4226030'>is</span> <span m='4226820'>a</span> <span m='4226900'>weird</span>
  <span m='4227260'>idea.</span> <span m='4229070'>It's</span> <span m='4229300'>kind</span>
  <span m='4229720'>of</span> <span m='4230410'>a</span> <span m='4230800'>more</span>
  <span m='4231100'>extreme</span> <span m='4231490'>form</span> <span m='4231910'>of</span>
  <span m='4232120'>perfect</span> <span m='4232450'>hashing.</span> <span m='4232870'>It</span>
  <span m='4233140'>says,</span> <span m='4233410'>look,</span> <span m='4237160'>perfect</span>
  <span m='4237480'>hashing</span> <span m='4238190'>did</span> <span m='4238450'>two</span>
  <span m='4238780'>hash</span> <span m='4239080'>queries.</span> <span m='4241420'>So</span>
  <span m='4241600'>I</span> <span m='4241720'>did</span> <span m='4241930'>one</span>
  <span m='4242170'>hash</span> <span m='4243040'>evaluation</span> <span m='4243700'>and</span>
  <span m='4243760'>another</span> <span m='4244030'>hash</span> <span m='4244300'>evaluation</span>
  <span m='4245620'>followed</span> <span m='4245980'>it,</span> <span m='4248080'>which</span>
  <span m='4248260'>is</span> <span m='4248410'>OK.</span> </p><p><span m='4251770'>But</span>
  <span m='4251950'>again,</span> <span m='4252190'>I</span> <span m='4252490'>want</span>
  <span m='4252700'>my</span> <span m='4252850'>queries</span> <span m='4253180'>to</span>
  <span m='4253270'>only</span> <span m='4253570'>do</span> <span m='4253720'>two</span>
  <span m='4254080'>things,</span> <span m='4254760'>two</span> <span m='4254990'>probes.</span>
  <span m='4257560'>So</span> <span m='4258000'>it's</span> <span m='4258100'>going</span>
  <span m='4258210'>to</span> <span m='4258520'>take</span> <span m='4258730'>that</span>
  <span m='4259000'>concept</span> <span m='4259600'>of</span> <span m='4259810'>just</span>
  <span m='4260080'>two</span> <span m='4267090'>and</span> <span m='4267300'>actually</span>
  <span m='4267570'>use</span> <span m='4267720'>two</span> <span m='4268380'>hash</span>
  <span m='4268620'>tables.</span> <span m='4269460'>So</span> <span m='4269610'>you've</span>
  <span m='4269680'>got</span> <span m='4270270'>B</span> <span m='4270540'>over</span>
  <span m='4270750'>here,</span> <span m='4272940'>I've</span> <span m='4273090'>got</span>
  <span m='4273330'>A</span> <span m='4273570'>over</span> <span m='4273780'>here.</span>
  <span m='4279270'>And</span> <span m='4280500'>if</span> <span m='4280680'>you</span>
  <span m='4280770'>have</span> <span m='4280920'>a</span> <span m='4280980'>key</span>
  <span m='4281250'>x,</span> <span m='4282840'>you</span> <span m='4283050'>hash</span>
  <span m='4283470'>it</span> <span m='4283740'>to</span> <span m='4284070'>a</span>
  <span m='4284100'>particular</span> <span m='4284580'>spot</span> <span m='4284910'>in</span>
  <span m='4285060'>A</span> <span m='4285420'>via</span> <span m='4285780'>g,</span>
  <span m='4286180'>and</span> <span m='4286580'>you</span> <span m='4286980'>hash</span>
  <span m='4287230'>it to a</span> <span m='4287440'>particular</span> <span m='4287850'>spot</span>
  <span m='4288250'>in</span> <span m='4288270'>B</span> <span m='4288610'>via</span>
  <span m='4288910'>H.</span> <span m='4290160'>So</span> <span m='4290260'>you</span>
  <span m='4290290'>have</span> <span m='4290370'>two</span> <span m='4290940'>hash</span>
  <span m='4291150'>tables,</span> <span m='4291630'>two</span> <span m='4291840'>hash</span>
  <span m='4292080'>functions.</span> </p><p><span m='4302990'>To</span> <span m='4303110'>do</span>
  <span m='4303260'>a</span> <span m='4303320'>query</span> <span m='4306500'>you</span>
  <span m='4306740'>look</span> <span m='4307040'>at</span> <span m='4307400'>A</span>
  <span m='4307790'>of g</span> <span m='4308240'>of</span> <span m='4308630'>x,</span>
  <span m='4310880'>and</span> <span m='4311240'>you</span> <span m='4311390'>look</span>
  <span m='4311630'>at</span> <span m='4311850'>B</span> <span m='4312260'>of</span>
  <span m='4312705'>h</span> <span m='4313150'>of x.</span> </p><p><span m='4315890'>Oh</span>
  <span m='4315980'>sorry,</span> <span m='4316280'>I</span> <span m='4316400'>forgot</span>
  <span m='4316670'>to</span> <span m='4316760'>mention.</span> <span m='4317900'>The</span>
  <span m='4317960'>other</span> <span m='4318110'>great</span> <span m='4318260'>thing</span>
  <span m='4318410'>about</span> <span m='4318590'>linear</span> <span m='4318860'>probing</span>
  <span m='4319610'>is</span> <span m='4319830'>that it's</span> <span m='4320030'>cache</span>
  <span m='4320390'>performance</span> <span m='4320840'>is</span> <span m='4320930'>so</span>
  <span m='4321140'>great.</span> <span m='4321740'>This</span> <span m='4321920'>is</span>
  <span m='4322040'>why</span> <span m='4322310'>it</span> <span m='4322370'>runs</span>
  <span m='4322580'>so</span> <span m='4322730'>fast</span> <span m='4323840'>in</span>
  <span m='4323990'>practice.</span> <span m='4324440'>Why</span> <span m='4324590'>it's</span>
  <span m='4324680'>only</span> <span m='4324890'>10%</span> <span m='4325370'>slower</span>
  <span m='4325640'>than</span> <span m='4325790'>a</span> <span m='4325850'>memory</span>
  <span m='4326120'>access.</span> <span m='4326510'>Because</span> <span m='4326660'>once</span>
  <span m='4326840'>you</span> <span m='4326960'>access</span> <span m='4327290'>a</span>
  <span m='4328310'>single</span> <span m='4328640'>slot,</span> <span m='4329810'>whole</span>
  <span m='4330230'>you</span> <span m='4330320'>get</span> <span m='4330470'>B</span>
  <span m='4330670'>slots</span> <span m='4331220'>in</span> <span m='4331340'>a</span>
  <span m='4331400'>cache</span> <span m='4331830'>with</span> <span m='4332030'>block</span>
  <span m='4332270'>size</span> <span m='4332500'>B.</span> </p><p><span m='4333230'>So</span>
  <span m='4334250'>most</span> <span m='4334460'>of</span> <span m='4334520'>the</span>
  <span m='4334580'>time,</span> <span m='4335300'>because</span> <span m='4335600'>your</span>
  <span m='4335870'>runs</span> <span m='4336200'>are</span> <span m='4336260'>very</span>
  <span m='4336470'>short,</span> <span m='4337990'>you</span> <span m='4338180'>will</span>
  <span m='4338990'>find</span> <span m='4339260'>your</span> <span m='4339350'>answer</span>
  <span m='4339620'>immediately.</span> <span m='4340310'>So</span> <span m='4340410'>that's</span>
  <span m='4340490'>why</span> <span m='4341330'>we</span> <span m='4341420'>kind</span>
  <span m='4341570'>of</span> <span m='4341630'>prefer</span> <span m='4341990'>linear</span>
  <span m='4342260'>probing</span> <span m='4342590'>in</span> <span m='4342680'>practice</span>
  <span m='4343070'>over</span> <span m='4343280'>all</span> <span m='4343470'>the</span>
  <span m='4343560'>other</span> <span m='4343730'>schemes</span> <span m='4343990'>I'm</span>
  <span m='4344050'>going</span> <span m='4344170'>to</span> <span m='4344240'>talk</span>
  <span m='4344450'>about.</span> <span m='4346010'>Well,</span> <span m='4346130'>cuckoo</span>
  <span m='4346430'>hashing</span> <span m='4346760'>is</span> <span m='4346950'>all</span>
  <span m='4347140'>right</span> <span m='4348230'>because</span> <span m='4348470'>it's</span>
  <span m='4348710'>only</span> <span m='4348980'>going</span> <span m='4349100'>to</span>
  <span m='4349160'>look</span> <span m='4349310'>at</span> <span m='4349400'>two</span>
  <span m='4349640'>places</span> <span m='4350660'>and</span> <span m='4350810'>that's</span>
  <span m='4351020'>it.</span> <span m='4351740'>Doesn't</span> <span m='4351980'>go</span>
  <span m='4352640'>anywhere</span> <span m='4352940'>else.</span> </p><p><span m='4356980'>I</span>
  <span m='4357100'>guess</span> <span m='4357280'>with</span> <span m='4357460'>perfect</span>
  <span m='4357820'>hashing</span> <span m='4359110'>the</span> <span m='4359260'>thing</span>
  <span m='4359500'>is</span> <span m='4360970'>you</span> <span m='4361180'>have</span>
  <span m='4361270'>more</span> <span m='4361480'>than</span> <span m='4361630'>two</span>
  <span m='4361750'>hash</span> <span m='4361990'>functions.</span> <span m='4362380'>You</span>
  <span m='4362440'>have</span> <span m='4362530'>the</span> <span m='4362620'>first</span>
  <span m='4362860'>hash</span> <span m='4363100'>function</span> <span m='4363430'>which</span>
  <span m='4363730'>sends</span> <span m='4363950'>you</span> <span m='4364130'>to</span>
  <span m='4364240'>the</span> <span m='4364330'>first</span> <span m='4364540'>table.</span>
  <span m='4364900'>Then</span> <span m='4365230'>you</span> <span m='4365350'>look</span>
  <span m='4365680'>up</span> <span m='4365860'>a</span> <span m='4365920'>second</span>
  <span m='4366280'>hash</span> <span m='4366520'>function.</span> <span m='4366940'>Using</span>
  <span m='4367240'>that</span> <span m='4367420'>hash</span> <span m='4367660'>function</span>
  <span m='4367990'>you</span> <span m='4368110'>rehash</span> <span m='4369190'>your</span>
  <span m='4369340'>value</span> <span m='4369700'>x.</span> </p><p><span m='4371290'>Downside</span>
  <span m='4371860'>of</span> <span m='4371920'>that</span> <span m='4372070'>is</span>
  <span m='4372160'>you</span> <span m='4372250'>can't</span> <span m='4372460'>compare</span>
  <span m='4372720'>those</span> <span m='4372880'>two</span> <span m='4372970'>hash</span>
  <span m='4373180'>functions</span> <span m='4373510'>in</span> <span m='4373600'>parallel.</span>
  <span m='4374810'>So</span> <span m='4375100'>if</span> <span m='4375220'>you're</span>
  <span m='4375430'>like</span> <span m='4375790'>two</span> <span m='4375940'>cores,</span>
  <span m='4376480'>you</span> <span m='4376780'>could</span> <span m='4377020'>compute</span>
  <span m='4377320'>these</span> <span m='4377530'>two</span> <span m='4377770'>in</span>
  <span m='4377920'>parallel,</span> <span m='4378700'>look</span> <span m='4378880'>them</span>
  <span m='4379030'>both</span> <span m='4379240'>up</span> <span m='4379390'>simultaneously.</span>
  <span m='4380500'>So</span> <span m='4380680'>in</span> <span m='4380800'>that</span>
  <span m='4380920'>sense</span> <span m='4381160'>you</span> <span m='4381280'>save</span>
  <span m='4381550'>a</span> <span m='4381610'>factor</span> <span m='4381910'>of</span>
  <span m='4382000'>2</span> <span m='4382720'>with</span> <span m='4382810'>some</span>
  <span m='4382960'>parallelism.</span> </p><p><span m='4387160'>Now,</span> <span
  m='4388450'>the</span> <span m='4388570'>weird</span> <span m='4388780'>thing</span>
  <span m='4389020'>is</span> <span m='4389230'>the</span> <span m='4389350'>way</span>
  <span m='4389650'>we</span> <span m='4389830'>do</span> <span m='4390010'>an</span>
  <span m='4390100'>insertion.</span> <span m='4392380'>You</span> <span m='4392560'>try</span>
  <span m='4392890'>to</span> <span m='4392980'>put</span> <span m='4396850'>it</span>
  <span m='4396970'>in</span> <span m='4397290'>the</span> <span m='4397620'>A</span>
  <span m='4398020'>slot,</span> <span m='4400300'>or</span> <span m='4400600'>the</span>
  <span m='4400720'>B</span> <span m='4400910'>slot.</span> <span m='4402950'>If</span>
  <span m='4403480'>either</span> <span m='4403690'>of</span> <span m='4403750'>them</span>
  <span m='4403930'>is</span> <span m='4404110'>empty</span> <span m='4405230'>you're</span>
  <span m='4405250'>golden.</span> <span m='4406750'>If</span> <span m='4406870'>neither</span>
  <span m='4407140'>of</span> <span m='4407200'>them</span> <span m='4407380'>are</span>
  <span m='4407440'>empty,</span> <span m='4407860'>you've</span> <span m='4408010'>got</span>
  <span m='4408160'>to</span> <span m='4408220'>kick</span> <span m='4408490'>out</span>
  <span m='4408850'>whoever's</span> <span m='4409240'>there.</span> </p><p><span
  m='4411400'>So</span> <span m='4415930'>let's</span> <span m='4416050'>say</span>
  <span m='4416350'>if</span> <span m='4416620'>you</span> <span m='4416740'>kicked</span>
  <span m='4417070'>out</span> <span m='4417880'>y</span> <span m='4419170'>from</span>
  <span m='4420130'>it's</span> <span m='4420400'>A</span> <span m='4420580'>slot.</span>
  <span m='4424360'>So</span> <span m='4424540'>we</span> <span m='4424600'>ended</span>
  <span m='4424810'>up</span> <span m='4424930'>putting</span> <span m='4425500'>x</span>
  <span m='4425920'>in</span> <span m='4426310'>this</span> <span m='4426550'>one,</span>
  <span m='4427660'>so</span> <span m='4427840'>we</span> <span m='4427960'>end</span>
  <span m='4428050'>up</span> <span m='4428140'>kicking</span> <span m='4428500'>y</span>
  <span m='4428920'>from</span> <span m='4430300'>wherever</span> <span m='4430630'>it</span>
  <span m='4430750'>belonged.</span> <span m='4432160'>Then</span> <span m='4434920'>you</span>
  <span m='4435070'>move</span> <span m='4435340'>it</span> <span m='4435460'>to</span>
  <span m='4436880'>B</span> <span m='4437358'>of</span> <span m='4437836'>h</span>
  <span m='4438314'>of</span> <span m='4438792'>y.</span> <span m='4439750'>There's</span>
  <span m='4439900'>only</span> <span m='4440140'>one</span> <span m='4440410'>other</span>
  <span m='4440590'>place</span> <span m='4440890'>that</span> <span m='4441010'>that</span>
  <span m='4441190'>item</span> <span m='4441460'>can</span> <span m='4441610'>go,</span>
  <span m='4442210'>so</span> <span m='4442330'>you</span> <span m='4442420'>put</span>
  <span m='4442600'>it</span> <span m='4442690'>there</span> <span m='4443080'>instead.</span>
  </p><p><span m='4445060'>In</span> <span m='4445450'>general,</span> <span m='4446580'>I</span>
  <span m='4446830'>think</span> <span m='4447010'>about</span> <span m='4448330'>A</span>
  <span m='4448690'>key</span> <span m='4450040'>it</span> <span m='4450160'>has</span>
  <span m='4450520'>two</span> <span m='4450850'>places</span> <span m='4451390'>it</span>
  <span m='4451450'>can</span> <span m='4451600'>go.</span> <span m='4451900'>There's</span>
  <span m='4452050'>some</span> <span m='4452320'>slot</span> <span m='4452680'>in</span>
  <span m='4452800'>A,</span> <span m='4453070'>some</span> <span m='4453370'>slot</span>
  <span m='4453490'>in B.</span> <span m='4453670'>You</span> <span m='4453760'>can</span>
  <span m='4453880'>think</span> <span m='4454060'>of</span> <span m='4454120'>this</span>
  <span m='4454300'>as</span> <span m='4454390'>an</span> <span m='4454510'>edge</span>
  <span m='4455410'>in</span> <span m='4455560'>a</span> <span m='4455620'>bipartite</span>
  <span m='4456220'>graph.</span> <span m='4457040'>So</span> <span m='4457240'>make</span>
  <span m='4458200'>vertices</span> <span m='4458830'>for</span> <span m='4458950'>the</span>
  <span m='4459070'>A</span> <span m='4459340'>slots,</span> <span m='4459760'>vertices</span>
  <span m='4460180'>for</span> <span m='4460300'>the</span> <span m='4460390'>B</span>
  <span m='4460600'>slots.</span> <span m='4462190'>Each</span> <span m='4462700'>edge</span>
  <span m='4463570'>is</span> <span m='4463810'>an</span> <span m='4463930'>item</span>
  <span m='4464560'>on</span> <span m='4464980'>a</span> <span m='4465040'>key.</span>
  <span m='4465732'>Key</span> <span m='4466080'>Can</span> <span m='4466240'>only</span>
  <span m='4466570'>live</span> <span m='4466960'>one</span> <span m='4467170'>spot</span>
  <span m='4467470'>in</span> <span m='4467560'>A,</span> <span m='4468190'>one</span>
  <span m='4468370'>spot</span> <span m='4468610'>in</span> <span m='4468700'>B</span>
  <span m='4468880'>for</span> <span m='4469030'>this</span> <span m='4469210'>query</span>
  <span m='4469540'>to</span> <span m='4469660'>work.</span> </p><p><span m='4471890'>So</span>
  <span m='4472750'>what's</span> <span m='4472990'>happening</span> <span m='4473500'>is</span>
  <span m='4474130'>if</span> <span m='4474280'>both</span> <span m='4474550'>of</span>
  <span m='4474610'>these</span> <span m='4474820'>are</span> <span m='4474940'>full</span>
  <span m='4476140'>you</span> <span m='4476260'>take</span> <span m='4476560'>whoever</span>
  <span m='4477040'>is</span> <span m='4477160'>currently</span> <span m='4477550'>here</span>
  <span m='4477880'>and</span> <span m='4479290'>put</span> <span m='4479500'>them</span>
  <span m='4479830'>over</span> <span m='4480190'>in</span> <span m='4480280'>their</span>
  <span m='4480430'>corresponding</span> <span m='4481060'>slot</span> <span m='4481510'>over</span>
  <span m='4481780'>in B.</span> <span m='4482080'>Now,</span> <span m='4482230'>that</span>
  <span m='4482380'>one</span> <span m='4482560'>might</span> <span m='4482710'>be</span>
  <span m='4482830'>full,</span> <span m='4483360'>which</span> <span m='4483520'>means</span>
  <span m='4483640'>you've</span> <span m='4483730'>got</span> <span m='4483820'>to</span>
  <span m='4483910'>kick</span> <span m='4484060'>that</span> <span m='4484270'>guy</span>
  <span m='4484630'>to</span> <span m='4484840'>wherever</span> <span m='4485200'>he</span>
  <span m='4485320'>belongs</span> <span m='4485740'>in</span> <span m='4486130'>A,</span>
  <span m='4486520'>and</span> <span m='4486640'>so</span> <span m='4486880'>on.</span>
  <span m='4487930'>If</span> <span m='4488110'>eventually</span> <span m='4488560'>you</span>
  <span m='4488650'>find</span> <span m='4488890'>an</span> <span m='4488980'>empty</span>
  <span m='4489250'>slot,</span> <span m='4490150'>great,</span> <span m='4490720'>you're</span>
  <span m='4490900'>done.</span> <span m='4491380'>Just</span> <span m='4491560'>chain</span>
  <span m='4491830'>reaction</span> <span m='4493570'>of</span> <span m='4493900'>cuckoo</span>
  <span m='4494380'>steps</span> <span m='4495040'>where</span> <span m='4495190'>the</span>
  <span m='4495370'>bird's</span> <span m='4495730'>going</span> <span m='4496000'>from</span>
  <span m='4496330'>in</span> <span m='4496480'>and</span> <span m='4496600'>out,</span>
  <span m='4497200'>or</span> <span m='4497320'>from</span> <span m='4497560'>A</span>
  <span m='4497680'>to</span> <span m='4497800'>B,</span> <span m='4498720'>vice</span>
  <span m='4498940'>a</span> <span m='4498990'>versa.</span> </p><p><span m='4501010'>If</span>
  <span m='4501190'>it</span> <span m='4501250'>terminates,</span> <span m='4502180'>you're</span>
  <span m='4502330'>happy.</span> <span m='4503020'>It</span> <span m='4503080'>doesn't</span>
  <span m='4503350'>terminate,</span> <span m='4504760'>you're</span> <span m='4504910'>in</span>
  <span m='4505000'>trouble</span> <span m='4505570'>because</span> <span m='4506560'>you</span>
  <span m='4506620'>might</span> <span m='4506800'>get</span> <span m='4506920'>a</span>
  <span m='4506950'>cycle,</span> <span m='4507820'>or</span> <span m='4508140'>a</span>
  <span m='4508180'>few</span> <span m='4508960'>failure</span> <span m='4509290'>situations.</span>
  <span m='4509890'>In</span> <span m='4510010'>that</span> <span m='4510130'>case</span>
  <span m='4510790'>you're</span> <span m='4510940'>screwed.</span> <span m='4511240'>There</span>
  <span m='4511360'>is</span> <span m='4511570'>no</span> <span m='4512200'>cuckoo</span>
  <span m='4512470'>hash</span> <span m='4512680'>table</span> <span m='4512950'>that</span>
  <span m='4513100'>works</span> <span m='4513370'>for</span> <span m='4513490'>your</span>
  <span m='4513640'>set</span> <span m='4513820'>of</span> <span m='4513940'>keys.</span>
  </p><p><span m='4514690'>In</span> <span m='4514750'>that</span> <span m='4514840'>case,</span>
  <span m='4515170'>you</span> <span m='4515920'>pick</span> <span m='4516100'>another</span>
  <span m='4516310'>hash</span> <span m='4516490'>function,</span> <span m='4516820'>rebuild</span>
  <span m='4517150'>from</span> <span m='4517300'>scratch.</span> <span m='4519160'>So</span>
  <span m='4519260'>it's</span> <span m='4519360'>kind</span> <span m='4519460'>of</span>
  <span m='4519580'>a</span> <span m='4519670'>weird</span> <span m='4520210'>hashing</span>
  <span m='4520600'>scheme</span> <span m='4520840'>because</span> <span m='4521140'>it</span>
  <span m='4521710'>can</span> <span m='4522100'>fail</span> <span m='4522790'>catastrophic.</span>
  <span m='4524470'>Fortunately,</span> <span m='4525230'>it</span> <span m='4525340'>doesn't</span>
  <span m='4525640'>happen</span> <span m='4525940'>too</span> <span m='4526150'>often.</span>
  <span m='4533640'>It</span> <span m='4534040'>still</span> <span m='4534280'>rubs</span>
  <span m='4534650'>me</span> <span m='4534820'>a</span> <span m='4534970'>funny</span>
  <span m='4535300'>way.</span> <span m='4535810'>I</span> <span m='4535840'>don't</span>
  <span m='4535960'>know</span> <span m='4537130'>what</span> <span m='4537250'>to</span>
  <span m='4537340'>say</span> <span m='4537520'>about</span> <span m='4537790'>it.</span>
  </p><p><span m='4541450'>OK,</span> <span m='4541840'>so</span> <span m='4542020'>you</span>
  <span m='4542710'>lose</span> <span m='4543360'>a</span> <span m='4543400'>factor</span>
  <span m='4543710'>of</span> <span m='4543780'>2</span> <span m='4543940'>in</span>
  <span m='4544030'>space.</span> <span m='4547910'>2</span> <span m='4548230'>deterministic</span>
  <span m='4548890'>probes</span> <span m='4549580'>for</span> <span m='4549760'>a</span>
  <span m='4549790'>query.</span> <span m='4550360'>That's</span> <span m='4552790'>good</span>
  <span m='4552970'>news.</span> </p><p><span m='4558850'>All</span> <span m='4558910'>right,</span>
  <span m='4559090'>now</span> <span m='4559330'>we</span> <span m='4559450'>get</span>
  <span m='4559600'>to,</span> <span m='4559930'>what</span> <span m='4560080'>about</span>
  <span m='4560320'>updates?</span> <span m='4561760'>So</span> <span m='4561970'>if</span>
  <span m='4562120'>it's</span> <span m='4562270'>fully</span> <span m='4562570'>random</span>
  <span m='4566320'>or</span> <span m='4567700'>log</span> <span m='4567995'>n-wise</span>
  <span m='4568570'>independent,</span> <span m='4575510'>then</span> <span m='4575810'>you</span>
  <span m='4575990'>get</span> <span m='4576350'>a</span> <span m='4576800'>constant</span>
  <span m='4578030'>expected</span> <span m='4578660'>update,</span> <span m='4580910'>which
  is</span> <span m='4581060'>what</span> <span m='4581180'>we</span> <span m='4581270'>want.</span>
  <span m='4582110'>Even</span> <span m='4582350'>with</span> <span m='4582500'>the</span>
  <span m='4582590'>rebuilding</span> <span m='4583100'>cost.</span> <span m='4583520'>So</span>
  <span m='4584420'>you'll</span> <span m='4584630'>have</span> <span m='4584810'>to</span>
  <span m='4584900'>rebuild</span> <span m='4585350'>about</span> <span m='4585650'>every</span>
  <span m='4586460'>n</span> <span m='4586820'>squared</span> <span m='4587750'>insertions</span>
  <span m='4588290'>you</span> <span m='4588380'>do.</span> </p><p><span m='4590150'>The</span>
  <span m='4590300'>way</span> <span m='4590480'>they</span> <span m='4590630'>say</span>
  <span m='4590900'>this</span> <span m='4591200'>is</span> <span m='4592460'>there's</span>
  <span m='4592790'>a</span> <span m='4593810'>1</span> <span m='4594140'>over</span>
  <span m='4594410'>n</span> <span m='4595670'>build</span> <span m='4596300'>failure</span>
  <span m='4596840'>probability.</span> <span m='4602050'>There's</span> <span m='4602440'>a
  1</span> <span m='4602510'>over</span> <span m='4602710'>n</span> <span m='4603010'>chance</span>
  <span m='4603330'>that</span> <span m='4603450'>your</span> <span m='4603720'>key
  set</span> <span m='4604320'>will</span> <span m='4604530'>be</span> <span m='4604830'>completely</span>
  <span m='4605700'>unsustainable.</span> <span m='4607860'>If</span> <span m='4607980'>you</span>
  <span m='4608040'>want</span> <span m='4608160'>to</span> <span m='4608220'>put</span>
  <span m='4608460'>all</span> <span m='4608700'>n</span> <span m='4608850'>keys</span>
  <span m='4609180'>into</span> <span m='4609360'>this</span> <span m='4609510'>table</span>
  <span m='4609870'>there's</span> <span m='4610020'>a</span> <span m='4610080'>1</span>
  <span m='4610230'>over</span> <span m='4610430'>n</span> <span m='4610560'>chance</span>
  <span m='4611640'>that</span> <span m='4611820'>it</span> <span m='4611940'>will</span>
  <span m='4612090'>be</span> <span m='4612180'>impossible</span> <span m='4612750'>and</span>
  <span m='4612840'>then</span> <span m='4612930'>you have to</span> <span m='4613100'>start</span>
  <span m='4613410'>over.</span> </p><p><span m='4614430'>So</span> <span m='4615240'>amortize</span>
  <span m='4615690'>per</span> <span m='4615810'>insertion,</span> <span m='4616290'>that's</span>
  <span m='4616440'>about</span> <span m='4616650'>1</span> <span m='4616800'>over</span>
  <span m='4616980'>n</span> <span m='4617100'>squared.</span> <span m='4618360'>Insertions</span>
  <span m='4618840'>you</span> <span m='4618960'>can</span> <span m='4619080'>do</span>
  <span m='4619230'>before</span> <span m='4619590'>the</span> <span m='4619680'>whole</span>
  <span m='4619860'>thing</span> <span m='4620070'>falls</span> <span m='4620340'>apart</span>
  <span m='4620960'>and</span> <span m='4621250'>you</span> <span m='4621350'>have</span>
  <span m='4621450'>to</span> <span m='4621550'>rebuild.</span> <span m='4623130'>So</span>
  <span m='4623250'>it's</span> <span m='4623340'>definitely</span> <span m='4623640'>going</span>
  <span m='4623790'>to</span> <span m='4623850'>be</span> <span m='4624690'>this</span>
  <span m='4624810'>should</span> <span m='4624990'>be</span> <span m='4625140'>amortize</span>
  <span m='4625660'>expected,</span> <span m='4626180'>I</span> <span m='4626280'>guess.</span>
  <span m='4628120'>However</span> <span m='4628560'>you</span> <span m='4628680'>want</span>
  <span m='4628800'>to</span> <span m='4628860'>think</span> <span m='4629010'>about</span>
  <span m='4629250'>it.</span> <span m='4630780'>But</span> <span m='4631410'>it's</span>
  <span m='4631560'>another</span> <span m='4631950'>way</span> <span m='4632130'>to</span>
  <span m='4632250'>do</span> <span m='4632430'>constant</span> <span m='4633900'>amortized</span>
  <span m='4634260'>expected.</span> <span m='4634920'>Cool.</span> </p><p><span m='4635940'>The</span>
  <span m='4636060'>other</span> <span m='4636240'>thing</span> <span m='4636450'>that's</span>
  <span m='4636600'>known</span> <span m='4636990'>is</span> <span m='4637320'>that</span>
  <span m='4638070'>six-wise</span> <span m='4638790'>independence</span> <span m='4642000'>is</span>
  <span m='4642420'>not</span> <span m='4642720'>enough.</span> <span m='4644190'>This</span>
  <span m='4644340'>was</span> <span m='4644460'>actually</span> <span m='4644850'>a</span>
  <span m='4645480'>project</span> <span m='4645930'>in</span> <span m='4646020'>this</span>
  <span m='4646200'>class,</span> <span m='4646650'>I</span> <span m='4646740'>believe</span>
  <span m='4647220'>the</span> <span m='4647340'>first</span> <span m='4647700'>time</span>
  <span m='4647910'>it</span> <span m='4647970'>was</span> <span m='4648090'>offered</span>
  <span m='4648390'>in</span> <span m='4648480'>2003.</span> <span m='4650270'>Six-wise</span>
  <span m='4650820'>independence</span> <span m='4651390'>is</span> <span m='4651570'>not</span>
  <span m='4652740'>sufficient</span> <span m='4653370'>to</span> <span m='4653520'>get</span>
  <span m='4653850'>constant</span> <span m='4654270'>expected</span> <span m='4655170'>bound.</span>
  <span m='4658110'>It</span> <span m='4658980'>will</span> <span m='4659130'>actually</span>
  <span m='4659460'>fail</span> <span m='4660270'>with</span> <span m='4660420'>high</span>
  <span m='4660540'>probability</span> <span m='4661770'>if</span> <span m='4661890'>you</span>
  <span m='4662010'>only</span> <span m='4662310'>have</span> <span m='4662550'>six-wise</span>
  <span m='4663030'>independence.</span> </p><p><span m='4663510'>What's</span> <span
  m='4663690'>not</span> <span m='4663900'>known</span> <span m='4664200'>is,</span>
  <span m='4664320'>do</span> <span m='4664410'>you</span> <span m='4664500'>need</span>
  <span m='4665040'>constant</span> <span m='4665610'>Independence?</span> <span m='4666780'>Or</span>
  <span m='4666960'>log n</span> <span m='4667350'>independence?</span> <span m='4667850'>With</span>
  <span m='4668100'>log</span> <span m='4668550'>n,</span> <span m='4669000'>very</span>
  <span m='4669270'>low</span> <span m='4669450'>failure</span> <span m='4669780'>probability.</span>
  <span m='4670830'>With</span> <span m='4670980'>six-wise,</span> <span m='4672000'>high</span>
  <span m='4672240'>probability</span> <span m='4672840'>you</span> <span m='4672990'>fail.</span>
  <span m='4674250'>Like,</span> <span m='4674400'>you</span> <span m='4674490'>fail
  with</span> <span m='4674850'>probability</span> <span m='4675240'>1</span> <span
  m='4675480'>minus</span> <span m='4675780'>1</span> <span m='4675930'>over</span>
  <span m='4676140'>n.</span> <span m='4678760'>Not</span> <span m='4678910'>so</span>
  <span m='4679030'>good.</span> </p><p><span m='4684530'>Some</span> <span m='4684750'>good</span>
  <span m='4684900'>news</span> <span m='4685610'>is</span> <span m='4686160'>simple</span>
  <span m='4686550'>tabulation</span> <span m='4687180'>hashing.</span> <span m='4693230'>Means</span>
  <span m='4693800'>you</span> <span m='4694040'>will</span> <span m='4694280'>fail</span>
  <span m='4697240'>to</span> <span m='4697690'>build</span> <span m='4699280'>with</span>
  <span m='4699640'>probability</span> <span m='4701740'>not</span> <span m='4702020'>1</span>
  <span m='4702190'>over</span> <span m='4702400'>n,</span> <span m='4703060'>but</span>
  <span m='4703330'>1</span> <span m='4703660'>over</span> <span m='4704150'>n</span>
  <span m='4704570'>to the</span> <span m='4704740'>1/3</span> <span m='4705520'>power.</span>
  </p><p><span m='4710340'>And</span> <span m='4710510'>this</span> <span m='4710710'>is</span>
  <span m='4710830'>theta.</span> <span m='4711190'>This</span> <span m='4711370'>is</span>
  <span m='4711460'>tight.</span> <span m='4713470'>It's</span> <span m='4713800'>almost</span>
  <span m='4714280'>as</span> <span m='4714400'>good</span> <span m='4714580'>as</span>
  <span m='4714700'>this.</span> <span m='4714850'>We</span> <span m='4714970'>really</span>
  <span m='4715240'>only</span> <span m='4715420'>need</span> <span m='4715840'>constant</span>
  <span m='4716320'>here.</span> <span m='4716470'>This</span> <span m='4716620'>is</span>
  <span m='4716710'>to</span> <span m='4716800'>build</span> <span m='4716980'>the</span>
  <span m='4717070'>entire</span> <span m='4717430'>table.</span> </p><p><span m='4718940'>So</span>
  <span m='4719200'>in</span> <span m='4719440'>this</span> <span m='4719650'>case</span>
  <span m='4719890'>you</span> <span m='4720010'>can</span> <span m='4720160'>insert</span>
  <span m='4720490'>like</span> <span m='4720670'>n to</span> <span m='4720910'>the</span>
  <span m='4721060'>4</span> <span m='4721400'>those</span> <span m='4721600'>items</span>
  <span m='4721930'>before</span> <span m='4722200'>your</span> <span m='4722320'>table</span>
  <span m='4722620'>self-destructs.</span> <span m='4723910'>So</span> <span m='4724060'>simple</span>
  <span m='4725110'>tabulation</span> <span m='4725650'>hashing</span> <span m='4726010'>is,</span>
  <span m='4726640'>again,</span> <span m='4727180'>pretty</span> <span m='4727420'>good.</span>
  <span m='4727940'>That's</span> <span m='4728950'>I</span> <span m='4729010'>think</span>
  <span m='4729730'>the</span> <span m='4729850'>hardest</span> <span m='4730240'>result</span>
  <span m='4731310'>in</span> <span m='4731680'>this</span> <span m='4731950'>paper</span>
  <span m='4732310'>from</span> <span m='4732490'>last</span> <span m='4732760'>year.</span>
  </p><p><span m='4739930'>So</span> <span m='4740320'>I</span> <span m='4740470'>do</span>
  <span m='4740830'>have</span> <span m='4741100'>a</span> <span m='4741490'>proof</span>
  <span m='4742300'>of</span> <span m='4742630'>this</span> <span m='4742900'>one.</span>
  <span m='4747150'>Something</span> <span m='4747520'>like</span> <span m='4747730'>that.</span>
  <span m='4747940'>Or</span> <span m='4748420'>part</span> <span m='4748630'>of</span>
  <span m='4748750'>a</span> <span m='4748810'>proof.</span> <span m='4749710'>So</span>
  <span m='4749830'>me</span> <span m='4749950'>give</span> <span m='4750100'>you</span>
  <span m='4750310'>a</span> <span m='4750760'>rough</span> <span m='4751090'>idea</span>
  <span m='4751360'>how</span> <span m='4751540'>this</span> <span m='4751720'>works.</span>
  <span m='4753130'>So</span> <span m='4753430'>if</span> <span m='4753670'>you're</span>
  <span m='4755220'>a</span> <span m='4755290'>fully</span> <span m='4755620'>random</span>
  <span m='4755920'>hash</span> <span m='4756160'>function.</span> </p><p><span m='4758620'>The</span>
  <span m='4758740'>main</span> <span m='4758920'>concern</span> <span m='4759340'>is</span>
  <span m='4759490'>that</span> <span m='4759670'>what</span> <span m='4761350'>if</span>
  <span m='4761440'>this</span> <span m='4761620'>path</span> <span m='4761980'>is</span>
  <span m='4762100'>really</span> <span m='4762370'>long.</span> <span m='4763630'>I</span>
  <span m='4763690'>claim</span> <span m='4764080'>that</span> <span m='4765670'>if</span>
  <span m='4767410'>an</span> <span m='4767500'>insert</span> <span m='4769540'>follows</span>
  <span m='4769930'>a</span> <span m='4769990'>path</span> <span m='4770380'>of</span>
  <span m='4770470'>length</span> <span m='4770740'>k,</span> <span m='4776760'>or</span>
  <span m='4778710'>the</span> <span m='4778830'>probability</span> <span m='4779550'>of</span>
  <span m='4779640'>this</span> <span m='4779820'>happening,</span> <span m='4781840'>is</span>
  <span m='4782220'>actually</span> <span m='4782520'>at</span> <span m='4782580'>most</span>
  <span m='4782790'>1</span> <span m='4783060'>over</span> <span m='4783360'>2</span>
  <span m='4783590'>to</span> <span m='4783720'>the</span> <span m='4783840'>k.</span>
  <span m='4784320'>It's very</span> <span m='4784770'>small.</span> <span m='4785400'>Exponentially</span>
  <span m='4786090'>small</span> <span m='4786370'>in</span> <span m='4786680'>k.</span>
  <span m='4790590'>I</span> <span m='4790680'>just</span> <span m='4790830'>want</span>
  <span m='4790950'>to</span> <span m='4791310'>sketch</span> <span m='4791970'>how</span>
  <span m='4792390'>this</span> <span m='4792600'>works</span> <span m='4792840'>because</span>
  <span m='4793020'>it's</span> <span m='4793170'>a</span> <span m='4793230'>cool</span>
  <span m='4793500'>argument</span> <span m='4795670'>that's</span> <span m='4796080'>actually</span>
  <span m='4796380'>in</span> <span m='4796620'>this</span> <span m='4796890'>simple</span>
  <span m='4797220'>tabulation</span> <span m='4798630'>paper.</span> </p><p><span
  m='4800040'>So</span> <span m='4800190'>the</span> <span m='4800280'>idea</span>
  <span m='4800430'>is</span> <span m='4800520'>the</span> <span m='4800580'>following.</span>
  <span m='4801010'>You</span> <span m='4801110'>have</span> <span m='4801180'>some</span>
  <span m='4801390'>really</span> <span m='4801630'>long</span> <span m='4801900'>path.</span>
  <span m='4804760'>What</span> <span m='4805470'>I'm</span> <span m='4805560'>going</span>
  <span m='4805800'>to</span> <span m='4805980'>give</span> <span m='4806250'>you</span>
  <span m='4807260'>is</span> <span m='4807450'>a</span> <span m='4807570'>way</span>
  <span m='4807870'>to</span> <span m='4808140'>encode</span> <span m='4810450'>the</span>
  <span m='4810540'>hash</span> <span m='4810810'>functions.</span> <span m='4813450'>There's</span>
  <span m='4813870'>hash</span> <span m='4814170'>functions</span> <span m='4814500'>g</span>
  <span m='4814770'>and</span> <span m='4814860'>h.</span> <span m='4816300'>Each</span>
  <span m='4816510'>of</span> <span m='4816570'>them</span> <span m='4816780'>has</span>
  <span m='4817770'>n</span> <span m='4818130'>values.</span> <span m='4820380'>Each</span>
  <span m='4820590'>of</span> <span m='4820650'>those</span> <span m='4820830'>values</span>
  <span m='4821280'>is</span> <span m='4821400'>log</span> <span m='4821710'>m</span>
  <span m='4821940'>bits.</span> </p><p><span m='4824730'>So</span> <span m='4824850'>if</span>
  <span m='4824940'>I</span> <span m='4825030'>just</span> <span m='4825180'>wrote</span>
  <span m='4825360'>them</span> <span m='4825480'>down</span> <span m='4825660'>the</span>
  <span m='4825780'>obvious</span> <span m='4826110'>way,</span> <span m='4827300'>it's</span>
  <span m='4827960'>2</span> <span m='4828680'>n</span> <span m='4828950'>log</span>
  <span m='4829330'>m</span> <span m='4829800'>bits</span> <span m='4830100'>to</span>
  <span m='4830220'>write</span> <span m='4830430'>down</span> <span m='4830640'>those</span>
  <span m='4830820'>hash</span> <span m='4831060'>functions.</span> <span m='4831840'>Now</span>
  <span m='4832230'>we're</span> <span m='4832410'>assuming</span> <span m='4833130'>these</span>
  <span m='4833310'>are</span> <span m='4833400'>totally</span> <span m='4833790'>random</span>
  <span m='4834090'>hash</span> <span m='4834300'>functions,</span> <span m='4834730'>which</span>
  <span m='4834810'>means</span> <span m='4835020'>you</span> <span m='4835170'>need</span>
  <span m='4835530'>this</span> <span m='4835710'>many</span> <span m='4835980'>bits.</span>
  <span m='4836955'>But</span> <span m='4837450'>I</span> <span m='4837570'>claim</span>
  <span m='4838650'>that</span> <span m='4838920'>if</span> <span m='4839160'>you</span>
  <span m='4839640'>follow</span> <span m='4840030'>a</span> <span m='4840090'>path</span>
  <span m='4840360'>of</span> <span m='4840450'>length</span> <span m='4840690'>k,</span>
  <span m='4841020'>I</span> <span m='4841170'>can</span> <span m='4841320'>find</span>
  <span m='4841530'>a</span> <span m='4841590'>new</span> <span m='4841830'>encoding</span>
  <span m='4842340'>scheme,</span> <span m='4843310'>a</span> <span m='4843440'>way</span>
  <span m='4843690'>to</span> <span m='4843810'>write</span> <span m='4844110'>down</span>
  <span m='4844590'>g</span> <span m='4844800'>and</span> <span m='4844890'>h</span>
  <span m='4846160'>that</span> <span m='4846330'>is</span> <span m='4846420'>basically</span>
  <span m='4846810'>minus</span> <span m='4847410'>k.</span> <span m='4848950'>This</span>
  <span m='4849210'>many</span> <span m='4849480'>bits</span> <span m='4849900'>minus</span>
  <span m='4850340'>k.</span> <span m='4850920'>I</span> <span m='4850950'>get</span>
  <span m='4851100'>to</span> <span m='4851220'>save</span> <span m='4851650'>k</span>
  <span m='4852070'>bits.</span> </p><p><span m='4852750'>Now,</span> <span m='4852920'>it</span>
  <span m='4853050'>turns</span> <span m='4853290'>out</span> <span m='4853410'>that</span>
  <span m='4853590'>can</span> <span m='4853800'>happen</span> <span m='4854730'>but</span>
  <span m='4854910'>it</span> <span m='4854970'>happens</span> <span m='4855360'>only</span>
  <span m='4855690'>with</span> <span m='4855810'>probability</span> <span m='4856410'>1</span>
  <span m='4856590'>over</span> <span m='4856770'>2</span> <span m='4856940'>to</span>
  <span m='4857050'>the</span> <span m='4857160'>k.</span> <span m='4857480'>This</span>
  <span m='4857640'>is</span> <span m='4857760'>an</span> <span m='4857850'>information</span>
  <span m='4858360'>theoretic</span> <span m='4858810'>argument.</span> <span m='4859920'>You</span>
  <span m='4860190'>might</span> <span m='4860430'>get</span> <span m='4860610'>lucky.</span>
  <span m='4861480'>And</span> <span m='4862970'>the</span> <span m='4863290'>g's</span>
  <span m='4863590'>and</span> <span m='4863700'>h's</span> <span m='4864000'>you're</span>
  <span m='4864090'>trying</span> <span m='4864330'>to</span> <span m='4864390'>encode</span>
  <span m='4864690'>can</span> <span m='4864870'>be</span> <span m='4864960'>done</span>
  <span m='4865140'>with</span> <span m='4865320'>fewer</span> <span m='4866280'>bits,</span>
  <span m='4866780'>k</span> <span m='4867060'>fewer</span> <span m='4867330'>bits.</span>
  <span m='4868020'>But</span> <span m='4868110'>that</span> <span m='4868260'>will</span>
  <span m='4868350'>only</span> <span m='4868620'>happen</span> <span m='4868950'>with</span>
  <span m='4869100'>probability</span> <span m='4869580'>1</span> <span m='4869730'>over</span>
  <span m='4869880'>2</span> <span m='4869980'>to</span> <span m='4870060'>the</span>
  <span m='4870150'>k</span> <span m='4870350'>if</span> <span m='4870450'>g and h</span>
  <span m='4870840'>are</span> <span m='4870930'>totally</span> <span m='4871290'>random.</span>
  </p><p><span m='4872580'>So</span> <span m='4873030'>how</span> <span m='4873240'>do</span>
  <span m='4873330'>you</span> <span m='4873450'>do</span> <span m='4873630'>it?</span>
  <span m='4874040'>Basically,</span> <span m='4875620'>I</span> <span m='4876000'>want</span>
  <span m='4876270'>to</span> <span m='4876450'>encode</span> <span m='4877200'>the</span>
  <span m='4877320'>things</span> <span m='4877740'>on</span> <span m='4878040'>the</span>
  <span m='4878130'>path</span> <span m='4879030'>slightly</span> <span m='4879660'>cheaper.</span>
  <span m='4880200'>I'm</span> <span m='4880310'>going</span> <span m='4880440'>to</span>
  <span m='4880500'>save</span> <span m='4880830'>one</span> <span m='4881340'>bit</span>
  <span m='4881970'>per</span> <span m='4882480'>node</span> <span m='4882840'>on</span>
  <span m='4882960'>the</span> <span m='4883050'>path.</span> <span m='4884350'>So</span>
  <span m='4884430'>what</span> <span m='4884820'>do</span> <span m='4884940'>I</span>
  <span m='4885000'>need</span> <span m='4885150'>to</span> <span m='4885300'>do?</span>
  </p><p><span m='4886450'>Well,</span> <span m='4887610'>the</span> <span m='4888030'>idea</span>
  <span m='4888380'>is</span> <span m='4888590'>OK,</span> <span m='4889440'>I</span>
  <span m='4889630'>will</span> <span m='4891450'>start</span> <span m='4891780'>by</span>
  <span m='4892200'>writing</span> <span m='4892590'>down</span> <span m='4893220'>this</span>
  <span m='4893400'>hash</span> <span m='4893670'>value.</span> <span m='4894730'>This</span>
  <span m='4894900'>takes</span> <span m='4895740'>log</span> <span m='4896710'>m</span>
  <span m='4898120'>bits</span> <span m='4898500'>to</span> <span m='4898620'>write</span>
  <span m='4898800'>down</span> <span m='4898950'>that</span> <span m='4899100'>hash</span>
  <span m='4899340'>value.</span> <span m='4899850'>Then</span> <span m='4900030'>I'll</span>
  <span m='4900090'>write</span> <span m='4900270'>down</span> <span m='4900450'>this</span>
  <span m='4900630'>hash</span> <span m='4900870'>value.</span> <span m='4901090'>That</span>
  <span m='4901230'>takes</span> <span m='4901440'>a</span> <span m='4901470'>log</span>
  <span m='4901690'>m bit,</span> <span m='4901980'>log</span> <span m='4902220'>m</span>
  <span m='4902430'>bits.</span> <span m='4902690'>Generally</span> <span m='4903060'>there's</span>
  <span m='4903250'>going</span> <span m='4903370'>to</span> <span m='4903450'>be</span>
  <span m='4903600'>roughly</span> <span m='4903960'>k</span> <span m='4904360'>log</span>
  <span m='4904670'>n</span> <span m='4905370'>to</span> <span m='4905490'>write</span>
  <span m='4905700'>down</span> <span m='4906150'>all</span> <span m='4906420'>of</span>
  <span m='4906570'>the</span> <span m='4906780'>node</span> <span m='4907200'>hash</span>
  <span m='4907500'>values.</span> </p><p><span m='4908520'>Then</span> <span m='4908700'>I</span>
  <span m='4908790'>need</span> <span m='4908940'>to</span> <span m='4909090'>say</span>
  <span m='4909420'>that</span> <span m='4909630'>it's</span> <span m='4909810'>actually</span>
  <span m='4910490'>x,</span> <span m='4912390'>this</span> <span m='4912600'>particular</span>
  <span m='4913170'>key</span> <span m='4913440'>that</span> <span m='4913560'>corresponds</span>
  <span m='4914100'>to</span> <span m='4914190'>this</span> <span m='4914370'>edge.</span>
  <span m='4914940'>So</span> <span m='4915090'>I've</span> <span m='4915180'>got</span>
  <span m='4915300'>to</span> <span m='4915360'>write</span> <span m='4915600'>that</span>
  <span m='4915840'>down.</span> <span m='4916680'>That's</span> <span m='4916890'>going</span>
  <span m='4917030'>to</span> <span m='4917100'>take</span> <span m='4917350'>a</span>
  <span m='4917370'>log</span> <span m='4918420'>n</span> <span m='4918750'>bits</span>
  <span m='4919170'>to</span> <span m='4919290'>say</span> <span m='4919530'>that</span>
  <span m='4919800'>x</span> <span m='4920130'>is</span> <span m='4920250'>the</span>
  <span m='4920370'>guy</span> <span m='4920580'>for</span> <span m='4920700'>the</span>
  <span m='4920790'>first</span> <span m='4921070'>edge,</span> <span m='4921390'>then</span>
  <span m='4921660'>y</span> <span m='4922110'>is</span> <span m='4922350'>the</span>
  <span m='4922920'>key</span> <span m='4923160'>that</span> <span m='4923280'>corresponds</span>
  <span m='4923690'>to</span> <span m='4923750'>the</span> <span m='4923820'>second</span>
  <span m='4924120'>edge of</span> <span m='4924310'>the</span> <span m='4924420'>path,</span>
  <span m='4924720'>then</span> <span m='4924960'>z,</span> <span m='4925610'>then</span>
  <span m='4925830'>w.</span> </p><p><span m='4926190'>But</span> <span m='4926340'>nicely,</span>
  <span m='4926730'>things</span> <span m='4927000'>are</span> <span m='4927120'>ordered</span>
  <span m='4927630'>here.</span> <span m='4928680'>So</span> <span m='4928800'>it</span>
  <span m='4928920'>only</span> <span m='4929250'>takes</span> <span m='4929520'>me</span>
  <span m='4929650'>to</span> <span m='4929690'>log</span> <span m='4930330'>n,</span>
  <span m='4931080'>k</span> <span m='4931440'>log</span> <span m='4931800'>n</span>
  <span m='4932490'>to</span> <span m='4932580'>write</span> <span m='4932760'>down</span>
  <span m='4933270'>all</span> <span m='4933450'>these</span> <span m='4933660'>guys.</span>
  <span m='4934420'>So</span> <span m='4934470'>I</span> <span m='4934560'>get</span>
  <span m='4934740'>k</span> <span m='4936030'>times</span> <span m='4936300'>log</span>
  <span m='4936750'>m</span> <span m='4937230'>plus</span> <span m='4937680'>log</span>
  <span m='4938640'>n.</span> </p><p><span m='4939540'>Now</span> <span m='4939750'>if</span>
  <span m='4939990'>m</span> <span m='4940890'>is</span> <span m='4941070'>2</span>
  <span m='4941370'>times</span> <span m='4941790'>n,</span> <span m='4944830'>this</span>
  <span m='4945100'>is</span> <span m='4945610'>k</span> <span m='4946150'>times</span>
  <span m='4951670'>2</span> <span m='4952600'>log</span> <span m='4953770'>m</span>
  <span m='4954490'>minus</span> <span m='4955150'>1.</span> <span m='4957525'>So</span>
  <span m='4958000'>I</span> <span m='4958060'>get</span> <span m='4958240'>one</span>
  <span m='4958540'>bit</span> <span m='4958720'>of</span> <span m='4958840'>savings</span>
  <span m='4960160'>per</span> <span m='4960460'>k,</span> <span m='4961210'>per</span>
  <span m='4961360'>thing</span> <span m='4961570'>in</span> <span m='4961640'>the</span>
  <span m='4961720'>path.</span> <span m='4963130'>Essentially</span> <span m='4963610'>because</span>
  <span m='4965310'>it's</span> <span m='4965770'>easier</span> <span m='4966220'>for</span>
  <span m='4966340'>me</span> <span m='4966460'>to</span> <span m='4966580'>write</span>
  <span m='4966760'>down</span> <span m='4967000'>these</span> <span m='4967330'>labels</span>
  <span m='4967690'>to</span> <span m='4967780'>say,</span> <span m='4968090'>oh,</span>
  <span m='4968870'>it's</span> <span m='4969040'>the</span> <span m='4969160'>key</span>
  <span m='4969580'>x</span> <span m='4969970'>that's</span> <span m='4970180'>going</span>
  <span m='4970510'>here.</span> <span m='4971200'>Instead</span> <span m='4971500'>of</span>
  <span m='4971590'>having</span> <span m='4971830'>to</span> <span m='4971890'>write</span>
  <span m='4972040'>down</span> <span m='4972220'>slot</span> <span m='4972550'>names</span>
  <span m='4972820'>all</span> <span m='4972910'>the</span> <span m='4973000'>time,</span>
  <span m='4973210'>which</span> <span m='4973360'>cost</span> <span m='4973570'>log</span>
  <span m='4973840'>m</span> <span m='4974030'>bits,</span> <span m='4974640'>writing</span>
  <span m='4974780'>down</span> <span m='4975460'>key</span> <span m='4975760'>names</span>
  <span m='4976120'>only</span> <span m='4976360'>takes</span> <span m='4976620'>log</span>
  <span m='4976990'>n</span> <span m='4977260'>bits,</span> <span m='4977660'>which</span>
  <span m='4977770'>is</span> <span m='4977860'>a</span> <span m='4977920'>savings</span>
  <span m='4978310'>of</span> <span m='4978430'>1</span> <span m='4979300'>bit</span>
  <span m='4979630'>per</span> <span m='4980470'>thing</span> <span m='4980680'>on</span>
  <span m='4980800'>the</span> <span m='4980890'>path.</span> </p><p><span m='4982000'>And</span>
  <span m='4982120'>so</span> <span m='4982450'>that</span> <span m='4982810'>was</span>
  <span m='4983080'>a</span> <span m='4983110'>quick</span> <span m='4983320'>sketch</span>
  <span m='4983650'>of</span> <span m='4983770'>how</span> <span m='4983890'>this</span>
  <span m='4984490'>proof</span> <span m='4984730'>goes.</span> <span m='4985120'>It's</span>
  <span m='4985210'>kind</span> <span m='4985360'>of</span> <span m='4985420'>neat,</span>
  <span m='4985750'>information</span> <span m='4986290'>theoretic</span> <span m='4986680'>argument</span>
  <span m='4987600'>why</span> <span m='4987850'>the</span> <span m='4987940'>paths</span>
  <span m='4988300'>can't</span> <span m='4988510'>get</span> <span m='4988660'>long.</span>
  <span m='4988960'>You</span> <span m='4989310'>then</span> <span m='4989590'>have</span>
  <span m='4989680'>to</span> <span m='4989770'>worry</span> <span m='4989920'>about</span>
  <span m='4990070'>cycles</span> <span m='4990820'>and</span> <span m='4991390'>things</span>
  <span m='4991660'>that</span> <span m='4992350'>look</span> <span m='4992500'>like</span>
  <span m='4992710'>this.</span> <span m='4994170'>That's</span> <span m='4994630'>kind</span>
  <span m='4994810'>of</span> <span m='4994870'>messy.</span> <span m='4995500'>But</span>
  <span m='4995770'>same</span> <span m='4996010'>kind</span> <span m='4996160'>of</span>
  <span m='4996280'>argument</span> <span m='4996610'>generalizes.</span> </p><p><span
  m='4998170'>So</span> <span m='4998290'>that</span> <span m='4998410'>was</span>
  <span m='4998530'>your</span> <span m='4998650'>quick</span> <span m='4998920'>overview</span>
  <span m='5000060'>of</span> <span m='5000660'>lots</span> <span m='5000960'>of</span>
  <span m='5001260'>hashing</span> <span m='5001560'>stuff.</span> </p>
type: course
uid: d439e96a5afb91c0246b2b069ea5ed22

---
None