---
about_this_resource_text: <p><strong>Description:</strong> Cache-efficient structures.
  B-trees are good at data transferred in blocks between cache and main memory, main
  memory and disk, and so on, achieving O(logB N) insert/delete/predecessor/successor
  for N items and memory block transfers of size B.</p><p><strong>Speaker:</strong>
  Prof. Erik Demaine</p>
course_id: 6-851-advanced-data-structures-spring-2012
embedded_media:
- id: Video-YouTube-Stream
  media_location: V3omVLzI0WE
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Video-YouTube-Stream
  type: Video
  uid: 1203fd8a03de852646f477f0934f0bd7
- id: Video-iTunesU-MP4
  media_location: https://itunes.apple.com/us/itunes-u/session-7-memory-hierarchy/id735348884?i=169609912
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Video-iTunes U-MP4
  type: Video
  uid: 682fd0fff1f8b4438b2dae0659510b3f
- id: Video-InternetArchive-MP4
  media_location: http://www.archive.org/download/MIT6.851S12/MIT6_851S12_lec07_300k.mp4
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Video-Internet Archive-MP4
  type: Video
  uid: 70dbceef23ae36eeeca965b3b6941945
- id: Thumbnail-YouTube-JPG
  media_location: https://img.youtube.com/vi/V3omVLzI0WE/default.jpg
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Thumbnail-YouTube-JPG
  type: Thumbnail
  uid: ea0e5962b8319ef71d7b221a247cb45a
- id: 3Play-3PlayYouTubeid-MP4
  media_location: V3omVLzI0WE
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: 3Play-3Play YouTube id
  type: 3Play
  uid: 9b5c2d683780eac6b68be4b3f9344e65
- id: V3omVLzI0WE.srt
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-7-memory-hierarchy-models/V3omVLzI0WE.srt
  title: 3play caption file
  type: null
  uid: be498237fa61bc027be6d792b25a4514
- id: V3omVLzI0WE.pdf
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-7-memory-hierarchy-models/V3omVLzI0WE.pdf
  title: 3play pdf file
  type: null
  uid: 873cbf4f0a9750f3e338e9aeed2686d7
- id: Caption-3Play YouTube id-SRT
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Caption-3Play YouTube id-SRT-English - US
  type: Caption
  uid: 912e898a54bf23301ca8fa725fd9ea0b
- id: Transcript-3Play YouTube id-PDF
  parent_uid: 8cc04b532bef43e124d2ae28b4bdcb3e
  title: Transcript-3Play YouTube id-PDF-English - US
  type: Transcript
  uid: 2aabfe59321e95b9756435da1d28c274
inline_embed_id: 36074312session7:memoryhierarchymodels56013098
layout: video
order_index: null
parent_uid: b66cbbb7b35e74ff17cdbf44e5fb6b1d
related_resources_text: ''
short_url: session-7-memory-hierarchy-models
technical_location: https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-851-advanced-data-structures-spring-2012/lecture-videos/session-7-memory-hierarchy-models
template_type: Tabbed
title: 'Session 7: Memory Hierarchy Models'
transcript: <p><span m='90'>The</span> <span m='180'>following</span> <span m='630'>content</span>
  <span m='1200'>is</span> <span m='1320'>provided</span> <span m='1770'>under</span>
  <span m='2009'>a</span> <span m='2070'>Creative</span> <span m='2490'>Commons</span>
  <span m='2910'>license.</span> <span m='4030'>Your</span> <span m='4200'>support</span>
  <span m='4710'>will</span> <span m='4860'>help</span> <span m='5100'>MIT</span>
  <span m='5550'>OpenCourseWare</span> <span m='6360'>continue</span> <span m='6870'>to</span>
  <span m='6960'>offer</span> <span m='7380'>high</span> <span m='7620'>quality</span>
  <span m='8100'>educational</span> <span m='8730'>resources</span> <span m='9330'>for</span>
  <span m='9510'>free.</span> <span m='10720'>To</span> <span m='10740'>make</span>
  <span m='10920'>a</span> <span m='10980'>donation</span> <span m='11730'>or</span>
  <span m='11940'>view</span> <span m='12390'>additional</span> <span m='12810'>materials</span>
  <span m='13320'>from</span> <span m='13500'>hundreds</span> <span m='13920'>of</span>
  <span m='14040'>MIT</span> <span m='14460'>courses,</span> <span m='15550'>visit</span>
  <span m='15780'>MIT</span> <span m='16200'>OpenCourseWare</span> <span m='17280'>at</span>
  <span m='17430'>ocw.mit.edu.</span> </p><p></p><p><span m='21690'>ERIK DEMAINE:</span>
  <span m='21720'>All</span> <span m='21750'>right.</span> <span m='21930'>Today</span>
  <span m='22290'>we</span> <span m='22440'>start</span> <span m='22720'>a</span>
  <span m='22770'>new</span> <span m='22950'>section</span> <span m='23750'>in</span>
  <span m='24150'>advanced</span> <span m='24540'>data</span> <span m='24750'>structures,</span>
  <span m='25530'>and</span> <span m='25830'>it's</span> <span m='26010'>data</span>
  <span m='26250'>structures</span> <span m='26610'>for</span> <span m='26800'>memory</span>
  <span m='27240'>hierarchy.</span> <span m='28480'>So</span> <span m='28830'>the</span>
  <span m='28980'>idea</span> <span m='29280'>here</span> <span m='29820'>is</span>
  <span m='30420'>while</span> <span m='31230'>almost</span> <span m='31560'>all</span>
  <span m='31680'>data</span> <span m='31860'>structures</span> <span m='32560'>think</span>
  <span m='32820'>about</span> <span m='34020'>memory</span> <span m='34500'>as</span>
  <span m='34650'>a</span> <span m='34710'>flat</span> <span m='35100'>thing.</span>
  <span m='36000'>And</span> <span m='36330'>in</span> <span m='36420'>the</span>
  <span m='36510'>RAM</span> <span m='36810'>model,</span> <span m='37660'>you've</span>
  <span m='37860'>got</span> <span m='37980'>a</span> <span m='38040'>giant</span>
  <span m='38340'>array.</span> <span m='39180'>You</span> <span m='39360'>can</span>
  <span m='39570'>access</span> <span m='40080'>the</span> <span m='40230'>i-th</span>
  <span m='40470'>element</span> <span m='40830'>in</span> <span m='41030'>your</span>
  <span m='41150'>giant</span> <span m='41430'>array</span> <span m='41970'>in</span>
  <span m='42090'>constant</span> <span m='42510'>time.</span> </p><p><span m='43730'>The</span>
  <span m='43830'>memory</span> <span m='44160'>hierarchy,</span> <span m='45300'>you</span>
  <span m='46170'>admit</span> <span m='46680'>the</span> <span m='46800'>reality</span>
  <span m='47430'>of</span> <span m='48270'>almost</span> <span m='48660'>all</span>
  <span m='48840'>computers</span> <span m='49350'>since,</span> <span m='50180'>I</span>
  <span m='50260'>don't</span> <span m='50370'>know,</span> <span m='50610'>'80s,</span>
  <span m='53080'>which</span> <span m='53430'>have</span> <span m='53640'>caches.</span>
  <span m='54760'>The</span> <span m='55020'>idea is</span> <span m='55410'>you</span>
  <span m='55530'>have</span> <span m='55920'>your</span> <span m='57200'>CPU</span>
  <span m='60930'>connected</span> <span m='61410'>with</span> <span m='61560'>a</span>
  <span m='61620'>very</span> <span m='61860'>high</span> <span m='62160'>bandwidth</span>
  <span m='62580'>channel</span> <span m='63570'>to</span> <span m='63990'>a</span>
  <span m='64170'>relatively</span> <span m='64769'>small</span> <span m='65610'>cache,</span>
  <span m='67180'>which</span> <span m='67260'>is</span> <span m='67350'>connected</span>
  <span m='67860'>via a</span> <span m='68160'>relatively</span> <span m='68730'>narrow</span>
  <span m='69120'>bandwidth</span> <span m='69570'>channel</span> <span m='70710'>to</span>
  <span m='70980'>a</span> <span m='71130'>really</span> <span m='71550'>big</span>
  <span m='72660'>memory.</span> <span m='74610'>And</span> <span m='74920'>in</span>
  <span m='75360'>real</span> <span m='75570'>computers,</span> <span m='75960'>this</span>
  <span m='76110'>keeps</span> <span m='76350'>going.</span> <span m='76680'>You've</span>
  <span m='76830'>got</span> <span m='77040'>level</span> <span m='77280'>1</span>
  <span m='77490'>cache,</span> <span m='77910'>then</span> <span m='78090'>level</span>
  <span m='78330'>2</span> <span m='78540'>cache,</span> <span m='79050'>then</span>
  <span m='79350'>level 3</span> <span m='79620'>cache</span> <span m='80160'>maybe,</span>
  <span m='80610'>then</span> <span m='80820'>main</span> <span m='81030'>memory,</span>
  <span m='81640'>then</span> <span m='81810'>disk,</span> <span m='82410'>then</span>
  <span m='82740'>network,</span> <span m='83940'>whatever.</span> <span m='84480'>Usually</span>
  <span m='84750'>the</span> <span m='84900'>disk</span> <span m='85200'>has</span>
  <span m='85380'>a</span> <span m='85440'>cache.</span> </p><p><span m='86460'>So</span>
  <span m='86580'>you</span> <span m='86640'>have</span> <span m='86730'>this</span>
  <span m='86880'>very</span> <span m='87150'>deep</span> <span m='87780'>hierarchy,</span>
  <span m='88420'>which</span> <span m='88530'>is</span> <span m='89130'>typically</span>
  <span m='89490'>growing</span> <span m='89880'>exponentially</span> <span m='90600'>in</span>
  <span m='90720'>size,</span> <span m='91830'>and</span> <span m='92010'>also</span>
  <span m='92250'>growing</span> <span m='92490'>exponentially</span> <span m='93090'>in</span>
  <span m='93960'>slowness,</span> <span m='95280'>in</span> <span m='95490'>latency.</span>
  <span m='96850'>So</span> <span m='98040'>you'd</span> <span m='98880'>like</span>
  <span m='99300'>to</span> <span m='100650'>design</span> <span m='101010'>data</span>
  <span m='101220'>structures</span> <span m='101640'>that</span> <span m='101790'>most</span>
  <span m='102090'>of</span> <span m='102150'>the</span> <span m='102240'>time</span>
  <span m='102480'>are</span> <span m='102540'>working</span> <span m='103620'>at</span>
  <span m='103860'>the</span> <span m='103950'>cache</span> <span m='104280'>level,</span>
  <span m='105180'>because</span> <span m='105390'>that's</span> <span m='105600'>really</span>
  <span m='105810'>fast.</span> <span m='107100'>And</span> <span m='107340'>as</span>
  <span m='107550'>little</span> <span m='107850'>as</span> <span m='107970'>possible,</span>
  <span m='108520'>you'd</span> <span m='108540'>like</span> <span m='108720'>to</span>
  <span m='108810'>go</span> <span m='109020'>to</span> <span m='109210'>the</span>
  <span m='109380'>deeper</span> <span m='109650'>levels.</span> </p><p><span m='111250'>So</span>
  <span m='113250'>we're</span> <span m='113400'>going</span> <span m='113520'>to</span>
  <span m='113590'>define</span> <span m='113940'>two</span> <span m='114180'>models</span>
  <span m='114690'>for</span> <span m='114990'>working</span> <span m='115350'>with</span>
  <span m='115470'>memory</span> <span m='115830'>hierarchies.</span> <span m='116925'>The</span>
  <span m='117300'>first</span> <span m='117570'>model</span> <span m='118830'>is</span>
  <span m='118950'>called</span> <span m='119140'>the</span> <span m='119180'>external</span>
  <span m='119550'>memory</span> <span m='119850'>model.</span> <span m='124620'>It's</span>
  <span m='124740'>also</span> <span m='125040'>called</span> <span m='125580'>the</span>
  <span m='125940'>I/O</span> <span m='126270'>model.</span> <span m='128940'>It's</span>
  <span m='129090'>also</span> <span m='129389'>called</span> <span m='129870'>the</span>
  <span m='130590'>Disk</span> <span m='131100'>Access</span> <span m='131910'>Model,</span>
  <span m='133110'>I</span> <span m='133170'>think</span> <span m='133440'>just</span>
  <span m='133740'>so</span> <span m='133950'>that</span> <span m='134100'>it</span>
  <span m='134160'>could</span> <span m='134290'>be</span> <span m='134400'>called</span>
  <span m='134640'>the</span> <span m='134730'>DAM</span> <span m='135030'>model.</span>
  </p><p><span m='137760'>I</span> <span m='137880'>usually</span> <span m='138210'>call</span>
  <span m='138360'>it</span> <span m='138450'>the</span> <span m='138510'>external</span>
  <span m='138900'>memory</span> <span m='139200'>model.</span> <span m='140130'>And</span>
  <span m='141060'>this</span> <span m='141360'>is</span> <span m='141480'>sort</span>
  <span m='141690'>of</span> <span m='141780'>the</span> <span m='141870'>simplest</span>
  <span m='142290'>model.</span> <span m='142650'>It's</span> <span m='142770'>also</span>
  <span m='143130'>the</span> <span m='143490'>most</span> <span m='143880'>well</span>
  <span m='144070'>studied,</span> <span m='144480'>I</span> <span m='144570'>would</span>
  <span m='144720'>say.</span> <span m='146160'>And</span> <span m='146310'>it's</span>
  <span m='146430'>going</span> <span m='146550'>to</span> <span m='146670'>relate</span>
  <span m='147030'>closely</span> <span m='147420'>to</span> <span m='147570'>the</span>
  <span m='147720'>other</span> <span m='147990'>models</span> <span m='148320'>that</span>
  <span m='148440'>we're</span> <span m='148860'>going</span> <span m='148980'>to</span>
  <span m='149040'>look</span> <span m='149280'>at.</span> </p><p><span m='149910'>And</span>
  <span m='150120'>the idea</span> <span m='150330'>with</span> <span m='150510'>the</span>
  <span m='150600'>external</span> <span m='150930'>memory</span> <span m='151190'>model
  is,</span> <span m='151620'>yeah,</span> <span m='152180'>OK,</span> <span m='153130'>a</span>
  <span m='153180'>real</span> <span m='153450'>computer</span> <span m='153810'>has</span>
  <span m='154380'>many</span> <span m='154980'>levels</span> <span m='156030'>in</span>
  <span m='156150'>this</span> <span m='156300'>hierarchy.</span> <span m='157320'>But</span>
  <span m='157500'>let's</span> <span m='157710'>just</span> <span m='157860'>focus</span>
  <span m='158250'>on</span> <span m='158430'>the</span> <span m='158550'>last</span>
  <span m='158940'>one</span> <span m='159180'>and</span> <span m='159270'>the</span>
  <span m='159390'>next</span> <span m='159660'>to</span> <span m='159780'>last</span>
  <span m='160080'>one,</span> <span m='160500'>because</span> <span m='160830'>typically</span>
  <span m='162540'>that</span> <span m='162750'>last</span> <span m='163080'>one</span>
  <span m='163260'>is</span> <span m='163440'>going</span> <span m='163590'>to</span>
  <span m='163680'>be</span> <span m='163830'>way,</span> <span m='164230'>way</span>
  <span m='164310'>slower</span> <span m='164670'>than</span> <span m='164790'>all</span>
  <span m='164940'>the</span> <span m='165060'>others.</span> <span m='165930'>And</span>
  <span m='166030'>so</span> <span m='166130'>you</span> <span m='166230'>really</span>
  <span m='166320'>want</span> <span m='166470'>to</span> <span m='166530'>minimize</span>
  <span m='167100'>how</span> <span m='167340'>many</span> <span m='167580'>memory</span>
  <span m='167910'>transfers</span> <span m='168750'>happen</span> <span m='169140'>here.</span>
  </p><p><span m='170560'>So</span> <span m='170580'>I</span> <span m='170640'>want</span>
  <span m='170790'>to</span> <span m='170850'>count</span> <span m='172320'>the</span>
  <span m='172770'>number</span> <span m='173880'>of</span> <span m='174210'>memory</span>
  <span m='174690'>transfers</span> <span m='176250'>between</span> <span m='178110'>two</span>
  <span m='178410'>levels.</span> <span m='179550'>And</span> <span m='179670'>so</span>
  <span m='179820'>this</span> <span m='179970'>model</span> <span m='180360'>just</span>
  <span m='180660'>thinks</span> <span m='180900'>about</span> <span m='181140'>two</span>
  <span m='181320'>levels.</span> <span m='182010'>I'll</span> <span m='182160'>call</span>
  <span m='182430'>them</span> <span m='182650'>cache</span> <span m='183660'>and</span>
  <span m='183870'>disk.</span> <span m='185730'>We</span> <span m='185880'>think</span>
  <span m='186090'>of</span> <span m='186180'>disk</span> <span m='186540'>as</span>
  <span m='186870'>infinite</span> <span m='187950'>and</span> <span m='188240'>slow.</span>
  <span m='189240'>We</span> <span m='189360'>think</span> <span m='189570'>of</span>
  <span m='189660'>cache</span> <span m='190110'>as</span> <span m='191220'>not</span>
  <span m='191460'>only</span> <span m='191700'>fast,</span> <span m='192310'>but</span>
  <span m='192420'>infinitely</span> <span m='192960'>fast.</span> <span m='193500'>It</span>
  <span m='193590'>takes</span> <span m='193770'>zero</span> <span m='194190'>time</span>
  <span m='194490'>to</span> <span m='195170'>access</span> <span m='195570'>something</span>
  <span m='195900'>in</span> <span m='195980'>cache.</span> </p><p><span m='196950'>All</span>
  <span m='197130'>we're</span> <span m='197280'>thinking</span> <span m='197640'>about</span>
  <span m='197940'>is</span> <span m='198180'>how</span> <span m='198450'>many</span>
  <span m='199200'>transfers</span> <span m='199830'>between</span> <span m='200670'>the</span>
  <span m='200760'>left</span> <span m='201000'>and</span> <span m='201090'>right</span>
  <span m='201330'>have</span> <span m='201540'>to</span> <span m='201630'>happen.</span>
  <span m='202350'>So</span> <span m='202470'>computation</span> <span m='203190'>here</span>
  <span m='203580'>is</span> <span m='203910'>free.</span> <span m='204870'>Access</span>
  <span m='205410'>over</span> <span m='205620'>here</span> <span m='205800'>is</span>
  <span m='205920'>free.</span> <span m='206730'>And</span> <span m='206850'>we</span>
  <span m='206980'>just</span> <span m='207420'>pay</span> <span m='207630'>for</span>
  <span m='207750'>this.</span> <span m='208440'>That's the</span> <span m='208590'>external</span>
  <span m='208950'>memory</span> <span m='209250'>model.</span> </p><p><span m='209820'>You</span>
  <span m='209910'>can</span> <span m='210060'>also</span> <span m='210330'>think</span>
  <span m='210540'>about</span> <span m='210750'>running</span> <span m='211020'>time,</span>
  <span m='211320'>make</span> <span m='211470'>sure</span> <span m='211590'>running</span>
  <span m='211830'>time</span> <span m='212040'>is</span> <span m='212100'>still</span>
  <span m='212340'>optimal</span> <span m='212760'>and</span> <span m='212850'>that</span>
  <span m='213000'>will</span> <span m='213090'>guarantee</span> <span m='213570'>this</span>
  <span m='213740'>part's</span> <span m='214020'>good.</span> <span m='214950'>But</span>
  <span m='215760'>usually</span> <span m='216180'>the</span> <span m='216330'>hard</span>
  <span m='216540'>part</span> <span m='216780'>is</span> <span m='216930'>to</span>
  <span m='217050'>minimize</span> <span m='217470'>this</span> <span m='217590'>part,</span>
  <span m='218250'>minimize</span> <span m='218950'>number</span> <span m='219270'>of</span>
  <span m='219330'>memory</span> <span m='219570'>transfers.</span> </p><p><span m='220530'>Now,</span>
  <span m='220770'>to</span> <span m='220890'>make</span> <span m='221040'>this</span>
  <span m='221190'>problem</span> <span m='221730'>really</span> <span m='222030'>interesting,</span>
  <span m='224380'>we</span> <span m='224430'>need</span> <span m='224610'>to</span>
  <span m='226290'>add</span> <span m='226500'>one</span> <span m='226710'>more</span>
  <span m='226830'>assumption.</span> <span m='227340'>And</span> <span m='227490'>this</span>
  <span m='227670'>is</span> <span m='228180'>also</span> <span m='228720'>the</span>
  <span m='228870'>case</span> <span m='229110'>in</span> <span m='229230'>practice,</span>
  <span m='230190'>that</span> <span m='230310'>when</span> <span m='230520'>you</span>
  <span m='231150'>request--</span> <span m='231900'>when</span> <span m='232080'>you</span>
  <span m='232170'>transfer</span> <span m='233340'>an</span> <span m='233490'>item</span>
  <span m='234420'>from</span> <span m='234720'>disk</span> <span m='235110'>to</span>
  <span m='235710'>cache,</span> <span m='236760'>you</span> <span m='236910'>get</span>
  <span m='237180'>not</span> <span m='237450'>just</span> <span m='237630'>that</span>
  <span m='237810'>item,</span> <span m='238140'>but</span> <span m='238260'>entire</span>
  <span m='238650'>block</span> <span m='239010'>of</span> <span m='239100'>items</span>
  <span m='239520'>at</span> <span m='239640'>the</span> <span m='239760'>same</span>
  <span m='240510'>speed.</span> <span m='241830'>So</span> <span m='242010'>in</span>
  <span m='242100'>fact,</span> <span m='242400'>disk</span> <span m='243500'>we're</span>
  <span m='243570'>going</span> <span m='243690'>to</span> <span m='243750'>think</span>
  <span m='243960'>of</span> <span m='244140'>as</span> <span m='244260'>divided</span>
  <span m='244710'>into</span> <span m='245010'>blocks.</span> <span m='247830'>Block</span>
  <span m='248130'>size</span> <span m='248640'>here</span> <span m='250170'>is</span>
  <span m='250950'>B,</span> <span m='252420'>capital</span> <span m='252990'>B.</span>
  </p><p><span m='255810'>Also</span> <span m='256230'>over</span> <span m='256480'>here,</span>
  <span m='257110'>caches</span> <span m='257550'>are</span> <span m='257640'>divided</span>
  <span m='258060'>into</span> <span m='258300'>blocks</span> <span m='258720'>of</span>
  <span m='258779'>size</span> <span m='259079'>B.</span> <span m='260430'>And</span>
  <span m='261570'>we</span> <span m='261720'>have</span> <span m='261990'>a</span>
  <span m='262050'>limited</span> <span m='262380'>number</span> <span m='262710'>of</span>
  <span m='262830'>them.</span> <span m='264930'>We're</span> <span m='265050'>going</span>
  <span m='265170'>to</span> <span m='265230'>suppose</span> <span m='265950'>we</span>
  <span m='266100'>have</span> <span m='266460'>M</span> <span m='266930'>over</span>
  <span m='267250'>B</span> <span m='270030'>cache</span> <span m='270420'>lines</span>
  <span m='270900'>they're</span> <span m='270990'>usually</span> <span m='271290'>called</span>
  <span m='271590'>at</span> <span m='271680'>the</span> <span m='271770'>cache</span>
  <span m='272070'>level.</span> <span m='273000'>And</span> <span m='273100'>so</span>
  <span m='273210'>the</span> <span m='273330'>total</span> <span m='273690'>size</span>
  <span m='273990'>of</span> <span m='274080'>the</span> <span m='274170'>cache</span>
  <span m='274510'>is</span> <span m='274850'>M.</span> <span m='275685'>M</span>
  <span m='276180'>stands</span> <span m='276480'>for</span> <span m='276630'>memory.</span>
  <span m='277900'>Sorry.</span> <span m='279120'>This</span> <span m='279640'>notation</span>
  <span m='280080'>is</span> <span m='280140'>slightly</span> <span m='281160'>confusing</span>
  <span m='281700'>for</span> <span m='281850'>historical</span> <span m='282330'>reasons,</span>
  <span m='282750'>but</span> <span m='282930'>that's</span> <span m='283260'>the</span>
  <span m='283380'>way</span> <span m='283500'>it</span> <span m='283590'>is.</span>
  </p><p><span m='284130'>So</span> <span m='284390'>B is</span> <span m='284550'>block</span>
  <span m='284850'>size.</span> <span m='285210'>M</span> <span m='285430'>is</span>
  <span m='285660'>cache</span> <span m='285990'>size,</span> <span m='287070'>total</span>
  <span m='287370'>cache</span> <span m='287640'>size.</span> <span m='287920'>There's</span>
  <span m='288090'>M</span> <span m='288270'>over</span> <span m='288500'>B</span>
  <span m='288630'>blocks of</span> <span m='289020'>size</span> <span m='289350'>B.</span>
  <span m='290400'>Disk</span> <span m='290670'>has</span> <span m='290850'>infinitely</span>
  <span m='291330'>many</span> <span m='291570'>blocks</span> <span m='291900'>of</span>
  <span m='291960'>size</span> <span m='292490'>B.</span> </p><p><span m='293850'>There's</span>
  <span m='294030'>lots</span> <span m='294240'>of</span> <span m='294330'>motivations</span>
  <span m='294870'>for</span> <span m='294990'>this.</span> <span m='295310'>But</span>
  <span m='295710'>basically,</span> <span m='296910'>the</span> <span m='297420'>main</span>
  <span m='297630'>cost</span> <span m='298020'>you're</span> <span m='298110'>paying</span>
  <span m='298500'>here</span> <span m='298740'>is</span> <span m='298890'>latency.</span>
  <span m='299850'>You</span> <span m='299940'>have</span> <span m='300060'>to</span>
  <span m='300240'>send</span> <span m='300540'>a</span> <span m='300600'>request</span>
  <span m='301470'>and</span> <span m='301590'>then</span> <span m='302400'>the</span>
  <span m='302610'>answer</span> <span m='302940'>has</span> <span m='303060'>to</span>
  <span m='303150'>come</span> <span m='303360'>back.</span> <span m='303720'>Think</span>
  <span m='303900'>of</span> <span m='303990'>that</span> <span m='304260'>as</span>
  <span m='305040'>the</span> <span m='305160'>disk</span> <span m='305400'>is</span>
  <span m='305490'>far</span> <span m='305820'>away</span> <span m='306060'>from</span>
  <span m='306240'>the</span> <span m='306310'>CPU.</span> <span m='307170'>And</span>
  <span m='307290'>so</span> <span m='307410'>it</span> <span m='307470'>takes</span>
  <span m='307680'>a</span> <span m='307710'>long</span> <span m='308010'>time</span>
  <span m='308990'>for</span> <span m='309120'>the request</span> <span m='309450'>to</span>
  <span m='309540'>get</span> <span m='309690'>there and</span> <span m='309940'>for</span>
  <span m='310080'>the</span> <span m='310230'>data</span> <span m='310470'>to</span>
  <span m='310560'>get</span> <span m='310710'>back.</span> <span m='311110'>So</span>
  <span m='311220'>if</span> <span m='311340'>you're</span> <span m='311430'>sending</span>
  <span m='311730'>data</span> <span m='311940'>back,</span> <span m='312240'>you</span>
  <span m='312300'>might</span> <span m='312540'>as</span> <span m='312630'>well</span>
  <span m='312810'>send--</span> <span m='313230'>it's</span> <span m='313320'>just</span>
  <span m='313530'>as</span> <span m='313650'>fast</span> <span m='313930'>to</span>
  <span m='313990'>send</span> <span m='314190'>a</span> <span m='314220'>lot</span>
  <span m='314430'>of</span> <span m='314490'>data</span> <span m='314850'>as</span>
  <span m='315030'>a</span> <span m='315060'>little</span> <span m='315300'>bit</span>
  <span m='315420'>of</span> <span m='315480'>data.</span> <span m='316450'>In</span>
  <span m='316550'>fact,</span> <span m='316750'>typically</span> <span m='317130'>you</span>
  <span m='317430'>set</span> <span m='317730'>this</span> <span m='317880'>block</span>
  <span m='318180'>size</span> <span m='318680'>that</span> <span m='319220'>the</span>
  <span m='319380'>amount</span> <span m='319590'>of</span> <span m='319950'>time</span>
  <span m='320250'>it</span> <span m='320340'>takes</span> <span m='320610'>for</span>
  <span m='320840'>data</span> <span m='321860'>to</span> <span m='322040'>arrive</span>
  <span m='322550'>equals</span> <span m='322970'>the</span> <span m='323090'>latency</span>
  <span m='324470'>to</span> <span m='324590'>balance</span> <span m='324980'>those</span>
  <span m='325160'>two</span> <span m='325310'>costs.</span> </p><p><span m='326270'>With</span>
  <span m='326430'>disk it's</span> <span m='326900'>especially</span> <span m='327380'>the</span>
  <span m='327470'>case,</span> <span m='327740'>because</span> <span m='328010'>you</span>
  <span m='328070'>have</span> <span m='328160'>this</span> <span m='328280'>latency</span>
  <span m='328670'>of</span> <span m='328730'>moving</span> <span m='329090'>the</span>
  <span m='329210'>disk</span> <span m='329450'>head.</span> <span m='330020'>Once</span>
  <span m='330260'>you</span> <span m='330320'>move</span> <span m='330530'>the</span>
  <span m='330620'>disk head,</span> <span m='331010'>you</span> <span m='331130'>might</span>
  <span m='331310'>as</span> <span m='331370'>well</span> <span m='331490'>read</span>
  <span m='331700'>the</span> <span m='331790'>entire</span> <span m='332210'>track,</span>
  <span m='332660'>the</span> <span m='332750'>entire</span> <span m='333080'>circle</span>
  <span m='333470'>of</span> <span m='333560'>that</span> <span m='334310'>if</span>
  <span m='334520'>you're</span> <span m='334820'>dealing</span> <span m='335090'>with</span>
  <span m='335180'>hard</span> <span m='335360'>drives.</span> <span m='338300'>It's</span>
  <span m='338450'>just</span> <span m='338690'>as</span> <span m='338810'>fast</span>
  <span m='339230'>once</span> <span m='340010'>the</span> <span m='340100'>head</span>
  <span m='340280'>gets</span> <span m='340460'>there.</span> </p><p><span m='342220'>OK.</span>
  <span m='342710'>So</span> <span m='342920'>that's</span> <span m='343130'>the</span>
  <span m='343220'>model.</span> <span m='344000'>And</span> <span m='344180'>so</span>
  <span m='344300'>now</span> <span m='344480'>we</span> <span m='344600'>want</span>
  <span m='344780'>to</span> <span m='344840'>minimize</span> <span m='345290'>the</span>
  <span m='345380'>number</span> <span m='345770'>of</span> <span m='345920'>block</span>
  <span m='346760'>memory</span> <span m='347000'>transfers</span> <span m='348230'>this</span>
  <span m='348350'>happens.</span> <span m='348800'>And</span> <span m='349130'>the</span>
  <span m='349280'>blocks</span> <span m='349610'>make</span> <span m='349790'>things</span>
  <span m='350000'>a</span> <span m='350060'>lot</span> <span m='350180'>more</span>
  <span m='350330'>interesting,</span> <span m='350840'>because</span> <span m='351020'>that</span>
  <span m='351170'>means</span> <span m='351830'>when</span> <span m='351950'>you</span>
  <span m='352010'>read</span> <span m='352160'>an</span> <span m='352250'>item,</span>
  <span m='352610'>you</span> <span m='352700'>really</span> <span m='352910'>want</span>
  <span m='353030'>to</span> <span m='353090'>use</span> <span m='353270'>all</span>
  <span m='353420'>the</span> <span m='353510'>items</span> <span m='353810'>right</span>
  <span m='353960'>around</span> <span m='354320'>it</span> <span m='355310'>soon,</span>
  <span m='356000'>before</span> <span m='356390'>it</span> <span m='356450'>gets</span>
  <span m='356630'>kicked</span> <span m='356900'>out</span> <span m='357020'>of</span>
  <span m='357110'>cache.</span> <span m='357560'>Obviously,</span> <span m='357860'>cache</span>
  <span m='358180'>is</span> <span m='358280'>limited</span> <span m='358550'>size,
  so</span> <span m='358980'>when</span> <span m='359090'>you</span> <span m='359180'>bring</span>
  <span m='359360'>something,</span> <span m='359840'>you've</span> <span m='359960'>got</span>
  <span m='360050'>to</span> <span m='360140'>kick</span> <span m='360320'>something</span>
  <span m='360710'>out.</span> <span m='361430'>That's</span> <span m='361610'>the</span>
  <span m='361700'>block</span> <span m='361950'>replacement</span> <span m='362360'>strategy.</span>
  </p><p><span m='363770'>In</span> <span m='364040'>the</span> <span m='364190'>external</span>
  <span m='364550'>memory</span> <span m='364820'>model,</span> <span m='365180'>you</span>
  <span m='365330'>can</span> <span m='365480'>do</span> <span m='365720'>whatever</span>
  <span m='366020'>you</span> <span m='366110'>want.</span> <span m='366510'>You</span>
  <span m='366610'>have</span> <span m='366710'>full</span> <span m='366830'>control</span>
  <span m='367850'>over</span> <span m='368090'>this</span> <span m='368270'>cache.</span>
  </p><p><span m='370970'>So</span> <span m='373100'>let's</span> <span m='373250'>see.</span>
  <span m='373460'>Let</span> <span m='373610'>me</span> <span m='373760'>write</span>
  <span m='373940'>some</span> <span m='374180'>obvious</span> <span m='374540'>bounds.</span>
  <span m='376880'>And</span> <span m='377030'>then</span> <span m='377240'>I'll</span>
  <span m='377690'>tell</span> <span m='377870'>you</span> <span m='378020'>some</span>
  <span m='379030'>of</span> <span m='379210'>the</span> <span m='379310'>main</span>
  <span m='379520'>results</span> <span m='379880'>in</span> <span m='379970'>this</span>
  <span m='380090'>model.</span> </p><p><span m='382900'>So</span> <span m='383330'>number</span>
  <span m='383660'>of</span> <span m='383720'>memory</span> <span m='384020'>transfers</span>
  <span m='384335'>is</span> <span m='384650'>what</span> <span m='384770'>we</span>
  <span m='384890'>care</span> <span m='385130'>about.</span> <span m='390180'>And</span>
  <span m='391490'>it's</span> <span m='391670'>going</span> <span m='391910'>to</span>
  <span m='392030'>be</span> <span m='392270'>at</span> <span m='392450'>most</span>
  <span m='393740'>the</span> <span m='393860'>running</span> <span m='394130'>time</span>
  <span m='394460'>on</span> <span m='394550'>a</span> <span m='394630'>RAM,</span>
  <span m='397070'>so</span> <span m='397250'>this is a</span> <span m='397400'>comparison</span>
  <span m='397970'>between</span> <span m='399080'>two</span> <span m='399230'>models.</span>
  <span m='400610'>At</span> <span m='400760'>most,</span> <span m='401330'>every</span>
  <span m='401690'>operation</span> <span m='402170'>you</span> <span m='402260'>do</span>
  <span m='402650'>on</span> <span m='402750'>a</span> <span m='402980'>RAM</span>
  <span m='403310'>data</span> <span m='403550'>structure</span> <span m='404810'>incurs</span>
  <span m='405260'>one</span> <span m='405470'>memory</span> <span m='405800'>transfer.</span>
  <span m='406220'>That</span> <span m='406340'>would</span> <span m='406460'>be</span>
  <span m='406550'>the</span> <span m='406670'>worst</span> <span m='406880'>case.</span>
  <span m='407840'>So</span> <span m='408080'>that's</span> <span m='408260'>what</span>
  <span m='408350'>we</span> <span m='408410'>want</span> <span m='408620'>to</span>
  <span m='408680'>beat.</span> </p><p><span m='409820'>There's</span> <span m='409970'>also</span>
  <span m='410240'>a</span> <span m='410270'>lower</span> <span m='410540'>bound.</span>
  <span m='412400'>So</span> <span m='412860'>this</span> <span m='413150'>is</span>
  <span m='414200'>also</span> <span m='414620'>at</span> <span m='414770'>least</span>
  <span m='417950'>the</span> <span m='418040'>number</span> <span m='418370'>of</span>
  <span m='418580'>cell</span> <span m='419000'>probes</span> <span m='422660'>divided</span>
  <span m='423110'>by</span> <span m='423420'>B.</span> <span m='423895'>I</span>
  <span m='424370'>think</span> <span m='424580'>we've</span> <span m='424670'>talked</span>
  <span m='424940'>briefly</span> <span m='425450'>about</span> <span m='425660'>the</span>
  <span m='425750'>cell</span> <span m='425960'>probe</span> <span m='426170'>model,</span>
  <span m='427130'>I</span> <span m='427190'>think</span> <span m='427340'>in</span>
  <span m='427460'>retroactive</span> <span m='428300'>data</span> <span m='428510'>structures.</span>
  </p><p><span m='429360'>Cell</span> <span m='429580'>probe</span> <span m='429650'>model</span>
  <span m='430010'>is</span> <span m='431120'>this</span> <span m='431300'>model</span>
  <span m='431570'>where</span> <span m='431780'>all</span> <span m='431990'>you</span>
  <span m='432140'>count</span> <span m='432410'>is--</span> <span m='433210'>you</span>
  <span m='433460'>just</span> <span m='433610'>count</span> <span m='433850'>how</span>
  <span m='434090'>many</span> <span m='434360'>words</span> <span m='434720'>did</span>
  <span m='434870'>I</span> <span m='434930'>have</span> <span m='435170'>to</span>
  <span m='435260'>read</span> <span m='435590'>in</span> <span m='435710'>order</span>
  <span m='435950'>to</span> <span m='436760'>do</span> <span m='436940'>this</span>
  <span m='437120'>data</span> <span m='437360'>structure</span> <span m='437690'>operation?</span>
  <span m='438710'>So</span> <span m='438920'>computation</span> <span m='439550'>is</span>
  <span m='439670'>free.</span> <span m='440390'>We</span> <span m='440510'>just</span>
  <span m='440690'>count</span> <span m='441080'>number</span> <span m='441410'>of</span>
  <span m='441560'>word</span> <span m='442100'>reads</span> <span m='442610'>from</span>
  <span m='442820'>memory.</span> <span m='444620'>So</span> <span m='445290'>it's</span>
  <span m='445580'>a</span> <span m='445640'>lower</span> <span m='445910'>bound</span>
  <span m='446210'>on</span> <span m='446360'>RAM</span> <span m='446670'>data</span>
  <span m='446900'>structures.</span> </p><p><span m='448140'>And</span> <span m='448700'>in</span>
  <span m='448850'>this</span> <span m='449030'>model,</span> <span m='449630'>we're</span>
  <span m='449750'>only</span> <span m='449960'>counting</span> <span m='450740'>memory</span>
  <span m='451070'>accesses,</span> <span m='452480'>but</span> <span m='452720'>where</span>
  <span m='452910'>cell</span> <span m='453170'>probes</span> <span m='453470'>you</span>
  <span m='453560'>count</span> <span m='454790'>word</span> <span m='455030'>numbers,</span>
  <span m='455480'>here</span> <span m='455690'>we're</span> <span m='455810'>counting</span>
  <span m='456200'>blocks.</span> <span m='457300'>And</span> <span m='457430'>so</span>
  <span m='458330'>at</span> <span m='458480'>best,</span> <span m='458870'>we</span>
  <span m='458990'>can</span> <span m='459140'>improve</span> <span m='459560'>by</span>
  <span m='459710'>a</span> <span m='459740'>factor</span> <span m='460110'>of</span>
  <span m='460220'>B.</span> </p><p><span m='461180'>So</span> <span m='461300'>this</span>
  <span m='461510'>is</span> <span m='461600'>a</span> <span m='461660'>lower</span>
  <span m='461930'>bound.</span> <span m='462860'>This</span> <span m='463010'>is</span>
  <span m='463100'>an</span> <span m='463190'>upper</span> <span m='463430'>bound,</span>
  <span m='463780'>so</span> <span m='463830'>there's</span> <span m='464180'>roughly</span>
  <span m='464690'>a</span> <span m='464750'>slop</span> <span m='465170'>of</span>
  <span m='465290'>a</span> <span m='465350'>factor</span> <span m='465750'>of</span>
  <span m='465800'>B</span> <span m='466040'>here.</span> <span m='466730'>We</span>
  <span m='466880'>want</span> <span m='467060'>to</span> <span m='467150'>do</span>
  <span m='467300'>closer</span> <span m='467720'>to</span> <span m='467870'>this</span>
  <span m='468050'>bound</span> <span m='469220'>than</span> <span m='469430'>this</span>
  <span m='469580'>bound.</span> <span m='470030'>This</span> <span m='470180'>is</span>
  <span m='470270'>the</span> <span m='470390'>obvious</span> <span m='470750'>thing.</span>
  <span m='471460'>Want</span> <span m='471650'>to</span> <span m='471710'>get</span>
  <span m='471860'>down</span> <span m='472010'>to</span> <span m='472100'>here</span>
  <span m='472280'>whenever</span> <span m='472640'>we</span> <span m='472760'>can.</span>
  </p><p><span m='474120'>So</span> <span m='474230'>let</span> <span m='474380'>me</span>
  <span m='474470'>give</span> <span m='474650'>you</span> <span m='474710'>some</span>
  <span m='474890'>examples</span> <span m='475370'>of</span> <span m='475460'>that,</span>
  <span m='479980'>so</span> <span m='480400'>sort</span> <span m='480780'>of</span>
  <span m='481263'>a</span> <span m='481616'>bunch of</span> <span m='481970'>basic</span>
  <span m='482390'>results</span> <span m='483590'>in</span> <span m='483740'>this</span>
  <span m='483920'>model.</span> <span m='492070'>Result</span> <span m='493400'>0</span>
  <span m='494780'>is</span> <span m='495420'>scanning,</span> <span m='499490'>so</span>
  <span m='499790'>if</span> <span m='500000'>I</span> <span m='500060'>have</span>
  <span m='500330'>an</span> <span m='500420'>array</span> <span m='500810'>of</span>
  <span m='500930'>items</span> <span m='502670'>and</span> <span m='502820'>I</span>
  <span m='502910'>just</span> <span m='503180'>want</span> <span m='503480'>to,</span>
  <span m='505340'>say,</span> <span m='505580'>add</span> <span m='505850'>them</span>
  <span m='506030'>all</span> <span m='506240'>up</span> <span m='507290'>or</span>
  <span m='507470'>do</span> <span m='507680'>a</span> <span m='507740'>linear</span>
  <span m='508190'>scan</span> <span m='508700'>to</span> <span m='508820'>search</span>
  <span m='509090'>for</span> <span m='509240'>something,</span> <span m='510260'>anything</span>
  <span m='510620'>that</span> <span m='510740'>involves</span> <span m='511430'>accessing</span>
  <span m='511910'>them</span> <span m='512150'>in</span> <span m='512299'>order,</span>
  <span m='513440'>this</span> <span m='513620'>will</span> <span m='513740'>cost</span>
  <span m='516830'>I</span> <span m='516890'>guess</span> <span m='518210'>ceiling</span>
  <span m='519360'>of</span> <span m='519559'>N</span> <span m='519770'>over</span>
  <span m='520049'>B.</span> <span m='522179'>If</span> <span m='522500'>the</span>
  <span m='522890'>array</span> <span m='523250'>has</span> <span m='523460'>size</span>
  <span m='523789'>N,</span> <span m='525710'>number</span> <span m='525950'>of</span>
  <span m='526010'>blocks</span> <span m='526370'>in</span> <span m='526460'>that</span>
  <span m='526580'>array</span> <span m='526880'>is</span> <span m='527030'>ceiling</span>
  <span m='527420'>of</span> <span m='527560'>N</span> <span m='527630'>over</span>
  <span m='527790'>B.</span> <span m='528830'>And</span> <span m='528980'>so</span>
  <span m='531680'>that's</span> <span m='531920'>how</span> <span m='532010'>many</span>
  <span m='532730'>block</span> <span m='533000'>accesses</span> <span m='533340'>it</span>
  <span m='533480'>costs.</span> </p><p><span m='533810'>So</span> <span m='534140'>the</span>
  <span m='534530'>annoying</span> <span m='535730'>part</span> <span m='535970'>here</span>
  <span m='536180'>is</span> <span m='536690'>the</span> <span m='536810'>ceiling.</span>
  <span m='539110'>If</span> <span m='539510'>N</span> <span m='539720'>is</span>
  <span m='539810'>smaller</span> <span m='540200'>than</span> <span m='540320'>B,</span>
  <span m='540500'>then</span> <span m='540650'>this</span> <span m='540800'>is</span>
  <span m='540890'>not</span> <span m='541490'>great.</span> <span m='542520'>I</span>
  <span m='542620'>mean,</span> <span m='542660'>you</span> <span m='542750'>have</span>
  <span m='542840'>to</span> <span m='542930'>pay</span> <span m='543140'>one</span>
  <span m='543380'>memory</span> <span m='543830'>read,</span> <span m='544790'>so</span>
  <span m='545090'>it's</span> <span m='545390'>optimal.</span> <span m='546110'>But</span>
  <span m='547430'>anyway,</span> <span m='547760'>that's</span> <span m='548020'>scanning.</span>
  <span m='548540'>Pretty</span> <span m='548720'>boring.</span> </p><p><span m='550310'>Slightly</span>
  <span m='550610'>more</span> <span m='550790'>interesting,</span> <span m='551075'>although</span>
  <span m='551510'>not</span> <span m='551690'>that</span> <span m='551840'>much</span>
  <span m='551990'>more</span> <span m='552110'>interesting,</span> <span m='552620'>is</span>
  <span m='552800'>search</span> <span m='553130'>trees.</span> <span m='559160'>If</span>
  <span m='559340'>you</span> <span m='559490'>want</span> <span m='559670'>to</span>
  <span m='559730'>be</span> <span m='559850'>able</span> <span m='560720'>to</span>
  <span m='560900'>search</span> <span m='561260'>for</span> <span m='561410'>an</span>
  <span m='561500'>item</span> <span m='561920'>in</span> <span m='562040'>this</span>
  <span m='562190'>external</span> <span m='562580'>memory</span> <span m='562880'>model--</span>
  <span m='564170'>in</span> <span m='564380'>this</span> <span m='564560'>external</span>
  <span m='564890'>memory</span> <span m='565160'>model,</span> <span m='565430'>what</span>
  <span m='565580'>do</span> <span m='565640'>you</span> <span m='565730'>do?</span>
  </p><p></p><p><span m='575420'>B-trees,</span> <span m='578810'>conveniently</span>
  <span m='579380'>named</span> <span m='579620'>B-trees.</span> <span m='581240'>We</span>
  <span m='581480'>want</span> <span m='581900'>the</span> <span m='582890'>branching</span>
  <span m='583370'>factor</span> <span m='583850'>of</span> <span m='583970'>a</span>
  <span m='584050'>B-tree</span> <span m='587060'>to</span> <span m='587210'>be</span>
  <span m='587510'>B.</span> <span m='589190'>Anything</span> <span m='589580'>that's</span>
  <span m='589960'>theta</span> <span m='590030'>B</span> <span m='590270'>will</span>
  <span m='590420'>do,</span> <span m='590860'>but</span> <span m='591110'>exactly</span>
  <span m='591560'>B</span> <span m='591800'>is</span> <span m='591920'>great.</span>
  <span m='592530'>If</span> <span m='592610'>you</span> <span m='592700'>can</span>
  <span m='592850'>read</span> <span m='593180'>all</span> <span m='593420'>of</span>
  <span m='593510'>these</span> <span m='593660'>pointers</span> <span m='594320'>and</span>
  <span m='594590'>read</span> <span m='594830'>all</span> <span m='595070'>of</span>
  <span m='595160'>these</span> <span m='595460'>key</span> <span m='595670'>values,</span>
  <span m='596660'>if</span> <span m='596750'>that</span> <span m='596930'>fits</span>
  <span m='597200'>in</span> <span m='597350'>B,</span> <span m='598400'>then</span>
  <span m='598760'>we're</span> <span m='598910'>happy.</span> </p><p><span m='601990'>So</span>
  <span m='604280'>yeah,</span> <span m='605130'>typically</span> <span m='605520'>we</span>
  <span m='605640'>assume</span> <span m='605910'>the</span> <span m='606000'>branching</span>
  <span m='606420'>factor</span> <span m='606750'>here</span> <span m='606990'>is</span>
  <span m='607110'>like</span> <span m='607310'>B</span> <span m='607470'>plus</span>
  <span m='607810'>1.</span> <span m='611690'>So</span> <span m='611930'>in</span>
  <span m='611990'>particular,</span> <span m='612260'>if</span> <span m='612530'>B</span>
  <span m='612730'>is</span> <span m='613040'>1,</span> <span m='613580'>you</span>
  <span m='613730'>still</span> <span m='613970'>have</span> <span m='614120'>a</span>
  <span m='614150'>branching</span> <span m='614480'>factor</span> <span m='614880'>of</span>
  <span m='615210'>2,</span> <span m='615490'>just to</span> <span m='615770'>make</span>
  <span m='616010'>it</span> <span m='616870'>a</span> <span m='616970'>reasonable</span>
  <span m='617840'>tree.</span> <span m='618680'>And</span> <span m='618770'>so</span>
  <span m='618890'>now</span> <span m='619100'>in</span> <span m='619190'>a</span>
  <span m='619250'>constant</span> <span m='619700'>number</span> <span m='620090'>of</span>
  <span m='620420'>block</span> <span m='620750'>reads</span> <span m='621110'>you</span>
  <span m='621710'>can</span> <span m='622520'>read</span> <span m='622790'>all</span>
  <span m='622910'>the</span> <span m='623000'>data</span> <span m='623240'>you</span>
  <span m='623330'>need</span> <span m='623540'>to</span> <span m='623630'>decide</span>
  <span m='624020'>which</span> <span m='624320'>child</span> <span m='624680'>pointer</span>
  <span m='624950'>you</span> <span m='625070'>follow.</span> <span m='625850'>You</span>
  <span m='625940'>follow</span> <span m='626210'>that</span> <span m='626360'>child</span>
  <span m='626660'>pointer,</span> <span m='627380'>and</span> <span m='627560'>so</span>
  <span m='628160'>it</span> <span m='628340'>takes</span> <span m='629310'>log</span>
  <span m='630650'>base</span> <span m='631010'>B</span> <span m='631220'>plus</span>
  <span m='631520'>1</span> <span m='632870'>of N</span> <span m='634940'>to</span>
  <span m='635930'>do</span> <span m='636080'>a</span> <span m='636140'>search.</span>
  </p><p><span m='640850'>This</span> <span m='641000'>is</span> <span m='641420'>counting</span>
  <span m='641840'>memory</span> <span m='642230'>transfers.</span> <span m='643700'>So</span>
  <span m='644120'>this</span> <span m='644300'>is</span> <span m='644390'>not</span>
  <span m='644630'>as</span> <span m='644720'>big</span> <span m='644900'>an</span>
  <span m='644990'>improvement.</span> <span m='645350'>Here,</span> <span m='645580'>we've</span>
  <span m='645890'>improved</span> <span m='646280'>by</span> <span m='646400'>a</span>
  <span m='646430'>factor</span> <span m='646790'>of</span> <span m='646850'>B</span>
  <span m='647090'>roughly.</span> <span m='647870'>Here</span> <span m='648020'>we're</span>
  <span m='648470'>improving</span> <span m='648890'>by</span> <span m='649010'>a</span>
  <span m='649040'>factor</span> <span m='649400'>of</span> <span m='649460'>basically</span>
  <span m='649820'>log</span> <span m='650180'>B.</span> <span m='652640'>So</span>
  <span m='653000'>not</span> <span m='653300'>as</span> <span m='653450'>good</span>
  <span m='653720'>as</span> <span m='653840'>you</span> <span m='653960'>might</span>
  <span m='654200'>hope</span> <span m='654410'>to</span> <span m='654530'>do,</span>
  <span m='655730'>dividing</span> <span m='656060'>by</span> <span m='656220'>B,</span>
  <span m='656630'>but</span> <span m='656870'>it</span> <span m='656930'>turns</span>
  <span m='657200'>out</span> <span m='657320'>this</span> <span m='657470'>is</span>
  <span m='657590'>optimal.</span> <span m='658370'>You</span> <span m='658490'>need</span>
  <span m='660290'>log</span> <span m='661850'>base</span> <span m='662120'>B</span>
  <span m='662300'>plus</span> <span m='662600'>1</span> <span m='663360'>of</span>
  <span m='663780'>N</span> <span m='664460'>to</span> <span m='664580'>do</span>
  <span m='664730'>a</span> <span m='664790'>search</span> <span m='669350'>in</span>
  <span m='671360'>comparison</span> <span m='671960'>model.</span> </p><p><span m='682370'>In</span>
  <span m='682520'>the</span> <span m='682580'>same</span> <span m='682820'>way,</span>
  <span m='682910'>you</span> <span m='683030'>need</span> <span m='683210'>log</span>
  <span m='683390'>base</span> <span m='683600'>2</span> <span m='683860'>of N</span>
  <span m='684300'>time</span> <span m='684740'>to</span> <span m='684860'>do</span>
  <span m='684980'>a</span> <span m='685010'>search</span> <span m='685310'>in</span>
  <span m='685400'>the</span> <span m='685490'>comparison</span> <span m='685940'>model,</span>
  <span m='686830'>in</span> <span m='686900'>this</span> <span m='687050'>model</span>
  <span m='687530'>you</span> <span m='687650'>need</span> <span m='687860'>log</span>
  <span m='688070'>base</span> <span m='688310'>B</span> <span m='688520'>of N.</span>
  <span m='689210'>Let</span> <span m='689300'>me</span> <span m='689450'>talk</span>
  <span m='689810'>a</span> <span m='689840'>little</span> <span m='690050'>bit</span>
  <span m='690200'>about</span> <span m='690400'>the proof of</span> <span m='690770'>that.</span>
  <span m='694470'>It's</span> <span m='694710'>a</span> <span m='695020'>pretty</span>
  <span m='695260'>simple</span> <span m='695890'>information</span> <span m='696430'>theoretic</span>
  <span m='696850'>argument.</span> </p><p><span m='698810'>So</span> <span m='702907'>we</span>
  <span m='703400'>prove</span> <span m='703750'>this</span> <span m='703960'>lower</span>
  <span m='704230'>bound.</span> <span m='706300'>The</span> <span m='706390'>idea</span>
  <span m='706600'>is</span> <span m='706690'>the</span> <span m='706780'>following.</span>
  <span m='707450'>You</span> <span m='707530'>want</span> <span m='707800'>to</span>
  <span m='707890'>figure</span> <span m='708280'>out</span> <span m='709330'>among</span>
  <span m='710335'>N</span> <span m='710740'>items</span> <span m='711220'>here</span>
  <span m='713620'>where</span> <span m='714580'>your</span> <span m='714940'>item</span>
  <span m='715270'>fits.</span> <span m='715780'>Let's</span> <span m='715960'>say</span>
  <span m='716150'>it</span> <span m='716200'>fits</span> <span m='716920'>right</span>
  <span m='717130'>here.</span> <span m='718040'>So</span> <span m='718100'>you</span>
  <span m='718180'>want</span> <span m='718360'>to</span> <span m='718420'>know</span>
  <span m='718690'>it's</span> <span m='718840'>between</span> <span m='719350'>this</span>
  <span m='719560'>element</span> <span m='719980'>and</span> <span m='720250'>this</span>
  <span m='720460'>element.</span> </p><p><span m='722380'>How</span> <span m='722500'>many</span>
  <span m='722710'>bits</span> <span m='722980'>of</span> <span m='723100'>information</span>
  <span m='723700'>is</span> <span m='723910'>that?</span> <span m='724450'>Well,</span>
  <span m='724930'>there's</span> <span m='725710'>I</span> <span m='725800'>guess</span>
  <span m='726130'>N</span> <span m='726370'>plus</span> <span m='726670'>1</span>
  <span m='727060'>different</span> <span m='727420'>outcomes</span> <span m='727960'>of</span>
  <span m='728080'>where</span> <span m='728380'>your</span> <span m='728590'>item</span>
  <span m='728950'>could</span> <span m='729100'>fit.</span> <span m='730540'>If</span>
  <span m='730690'>you</span> <span m='730870'>allow</span> <span m='731170'>it</span>
  <span m='731230'>to</span> <span m='731380'>exactly</span> <span m='731800'>match,</span>
  <span m='732100'>it's</span> <span m='732220'>maybe</span> <span m='732460'>twice</span>
  <span m='732820'>that.</span> <span m='733280'>But</span> <span m='733660'>there's</span>
  <span m='733940'>theta</span> <span m='734290'>N</span> <span m='736420'>options</span>
  <span m='737890'>for</span> <span m='738130'>your</span> <span m='738280'>answer.</span>
  <span m='740770'>And</span> <span m='740830'>so</span> <span m='741220'>if</span>
  <span m='741340'>you</span> <span m='741430'>take</span> <span m='741670'>logs,</span>
  <span m='742240'>that</span> <span m='742510'>is</span> <span m='745010'>log</span>
  <span m='745360'>N</span> <span m='747340'>bits</span> <span m='747610'>of</span>
  <span m='747730'>information.</span> </p><p><span m='752380'>And</span> <span m='752500'>this</span>
  <span m='752650'>is</span> <span m='752770'>how</span> <span m='752890'>you</span>
  <span m='753010'>normally</span> <span m='753430'>show</span> <span m='753730'>that</span>
  <span m='753850'>you</span> <span m='753970'>need</span> <span m='754210'>log</span>
  <span m='754540'>N</span> <span m='754690'>comparison.</span> <span m='755380'>You</span>
  <span m='755470'>need</span> <span m='755650'>log</span> <span m='755910'>N</span>
  <span m='756010'>comparisons</span> <span m='756550'>because</span> <span m='756700'>each</span>
  <span m='756880'>comparison</span> <span m='757420'>could</span> <span m='757540'>at</span>
  <span m='757630'>most</span> <span m='757960'>give</span> <span m='758170'>you</span>
  <span m='758290'>one</span> <span m='758500'>bit</span> <span m='758650'>of</span>
  <span m='758740'>information,</span> <span m='759820'>yes</span> <span m='760000'>or</span>
  <span m='760090'>no.</span> <span m='761230'>And</span> <span m='761380'>there's</span>
  <span m='761500'>log</span> <span m='761700'>N</span> <span m='761830'>bits</span>
  <span m='761980'>to</span> <span m='762100'>get,</span> <span m='762940'>so</span>
  <span m='763120'>that's</span> <span m='763330'>the</span> <span m='763370'>lower</span>
  <span m='763540'>bound</span> <span m='763750'>in</span> <span m='763840'>binary</span>
  <span m='764170'>search.</span> </p><p><span m='765310'>But</span> <span m='765490'>now</span>
  <span m='765820'>we're</span> <span m='766030'>in</span> <span m='766090'>this</span>
  <span m='766240'>model</span> <span m='766660'>where</span> <span m='766990'>we're</span>
  <span m='767110'>not</span> <span m='767260'>counting</span> <span m='767530'>comparisons,</span>
  <span m='768550'>even</span> <span m='768760'>though</span> <span m='768850'>we're</span>
  <span m='768910'>in</span> <span m='769000'>the</span> <span m='769090'>comparison</span>
  <span m='769510'>model.</span> <span m='770140'>We're</span> <span m='770290'>counting</span>
  <span m='770650'>number of</span> <span m='770890'>block</span> <span m='771160'>transfers.</span>
  <span m='772570'>So</span> <span m='772720'>when</span> <span m='772870'>I</span>
  <span m='772930'>read</span> <span m='773170'>in</span> <span m='774340'>some</span>
  <span m='774580'>data,</span> <span m='774940'>I</span> <span m='775090'>get</span>
  <span m='775450'>B</span> <span m='775780'>items</span> <span m='776710'>from</span>
  <span m='776920'>my</span> <span m='777370'>array,</span> <span m='779560'>or</span>
  <span m='780100'>from</span> <span m='780280'>something.</span> </p><p><span m='782050'>So</span>
  <span m='782260'>when</span> <span m='782410'>I</span> <span m='782500'>do</span>
  <span m='783820'>a</span> <span m='783880'>block</span> <span m='784240'>read,</span>
  <span m='788950'>all</span> <span m='789190'>I</span> <span m='789250'>can</span>
  <span m='789430'>do</span> <span m='789610'>in</span> <span m='789700'>the</span>
  <span m='789760'>comparison</span> <span m='790240'>model is</span> <span m='790870'>compare</span>
  <span m='791440'>my</span> <span m='791740'>item</span> <span m='792490'>to</span>
  <span m='792610'>everything</span> <span m='793060'>that</span> <span m='793180'>I</span>
  <span m='793300'>read,</span> <span m='794710'>so</span> <span m='794800'>you</span>
  <span m='794860'>might</span> <span m='795100'>as</span> <span m='795220'>well</span>
  <span m='795400'>compare</span> <span m='795700'>all</span> <span m='795940'>of</span>
  <span m='796030'>them.</span> <span m='796810'>But</span> <span m='797590'>the</span>
  <span m='797710'>information</span> <span m='798340'>you</span> <span m='798460'>learn</span>
  <span m='801190'>is</span> <span m='801400'>only</span> <span m='803060'>log</span>
  <span m='804750'>B</span> <span m='804970'>plus</span> <span m='805240'>1</span>
  <span m='807070'>bits,</span> <span m='809080'>because</span> <span m='809290'>what</span>
  <span m='809410'>you</span> <span m='809590'>learn</span> <span m='810010'>is</span>
  <span m='810280'>among</span> <span m='810610'>these</span> <span m='811030'>B</span>
  <span m='811300'>items,</span> <span m='812230'>where</span> <span m='812410'>do</span>
  <span m='812560'>I</span> <span m='812680'>fit?</span> <span m='816920'>And</span>
  <span m='817730'>in</span> <span m='818000'>the</span> <span m='818120'>best</span>
  <span m='818480'>case,</span> <span m='818870'>that</span> <span m='819080'>is</span>
  <span m='819200'>log</span> <span m='819560'>of</span> <span m='819620'>B</span>
  <span m='819870'>plus</span> <span m='820120'>1</span> <span m='821690'>bits</span>
  <span m='821960'>of</span> <span m='822050'>information.</span> <span m='822530'>It</span>
  <span m='822590'>could</span> <span m='822740'>be</span> <span m='822890'>worse,</span>
  <span m='824300'>if</span> <span m='824450'>these</span> <span m='824630'>guys</span>
  <span m='824930'>are</span> <span m='825140'>not</span> <span m='825410'>well</span>
  <span m='825620'>distributed</span> <span m='826160'>among</span> <span m='826370'>your
  N</span> <span m='826650'>items.</span> </p><p><span m='827840'>It's at</span> <span
  m='827990'>most</span> <span m='828230'>that.</span> <span m='828530'>And</span>
  <span m='828620'>so</span> <span m='828770'>you</span> <span m='828860'>take</span>
  <span m='829070'>the</span> <span m='829160'>ratio</span> <span m='830760'>and</span>
  <span m='830930'>you</span> <span m='831050'>need</span> <span m='832610'>log</span>
  <span m='834560'>N</span> <span m='834920'>over</span> <span m='835370'>log</span>
  <span m='836600'>B</span> <span m='836750'>plus</span> <span m='837020'>1</span>
  <span m='839720'>block</span> <span m='840170'>reads.</span> <span m='844730'>And</span>
  <span m='844940'>that's</span> <span m='845150'>log</span> <span m='845390'>base</span>
  <span m='845600'>B</span> <span m='846020'>plus</span> <span m='846250'>1</span>
  <span m='846430'>of N.</span> </p><p><span m='848134'>AUDIENCE:</span> <span m='848347'>[INAUDIBLE]</span>
  </p><p><span m='848990'>ERIK DEMAINE:</span> <span m='849155'>Yeah.</span> <span
  m='849320'>Question?</span> </p><p><span m='850263'>AUDIENCE:</span> <span m='850344'>Why</span>
  <span m='850426'>is</span> <span m='850590'>that</span> <span m='851080'>you</span>
  <span m='851570'>learn</span> <span m='852060'>log B</span> <span m='852550'>plus</span>
  <span m='853040'>1 bits when</span> <span m='853530'>you</span> <span m='854020'>[INAUDIBLE]?</span>
  </p><p><span m='855000'>ERIK DEMAINE:</span> <span m='855030'>All</span> <span m='855290'>right.</span>
  <span m='855410'>So</span> <span m='855560'>the</span> <span m='855680'>claim</span>
  <span m='855950'>is,</span> <span m='856130'>in</span> <span m='856280'>the</span>
  <span m='856370'>comparison</span> <span m='856760'>model,</span> <span m='857180'>you</span>
  <span m='857390'>compare</span> <span m='858470'>your</span> <span m='858710'>item</span>
  <span m='859100'>to</span> <span m='859280'>everyone</span> <span m='859670'>in</span>
  <span m='859790'>here.</span> <span m='861500'>But</span> <span m='862970'>if</span>
  <span m='863150'>your</span> <span m='863300'>array</span> <span m='863540'>is</span>
  <span m='863660'>presorted,</span> <span m='865250'>then</span> <span m='865460'>all</span>
  <span m='865610'>you're</span> <span m='865790'>learning</span> <span m='866270'>is--</span>
  <span m='866840'>I</span> <span m='866900'>mean,</span> <span m='867710'>information</span>
  <span m='868160'>theoretically,</span> <span m='868730'>all</span> <span m='868910'>your</span>
  <span m='869030'>learning</span> <span m='869330'>is</span> <span m='869420'>where</span>
  <span m='869840'>your</span> <span m='870080'>item</span> <span m='870380'>fits</span>
  <span m='870650'>among</span> <span m='871070'>these</span> <span m='871240'>B</span>
  <span m='871490'>items.</span> <span m='873420'>So</span> <span m='875330'>there's</span>
  <span m='876050'>order</span> <span m='876290'>B</span> <span m='876620'>options</span>
  <span m='877100'>of</span> <span m='877160'>where</span> <span m='877340'>you</span>
  <span m='877460'>fit,</span> <span m='877820'>and</span> <span m='877940'>so</span>
  <span m='878120'>only</span> <span m='878330'>log</span> <span m='879680'>B</span>
  <span m='881150'>bits</span> <span m='881390'>of</span> <span m='881450'>information</span>
  <span m='881960'>there.</span> </p><p><span m='884570'>You</span> <span m='884720'>might</span>
  <span m='884900'>consider</span> <span m='885260'>this</span> <span m='885440'>a</span>
  <span m='885500'>vague</span> <span m='885800'>argument.</span> <span m='887750'>You</span>
  <span m='887870'>can</span> <span m='888020'>do</span> <span m='888170'>a</span>
  <span m='888230'>more</span> <span m='888530'>formal</span> <span m='888890'>version</span>
  <span m='889220'>of</span> <span m='889340'>it.</span> <span m='889460'>But</span>
  <span m='889700'>I</span> <span m='889790'>like</span> <span m='890000'>the</span>
  <span m='890360'>information</span> <span m='890900'>theoretic</span> <span m='891770'>perspective.</span>
  </p><p><span m='895380'>Cool.</span> <span m='895890'>So</span> <span m='896070'>that's</span>
  <span m='897960'>the</span> <span m='898110'>best</span> <span m='898350'>thing</span>
  <span m='898530'>you</span> <span m='898650'>can</span> <span m='898770'>do</span>
  <span m='898920'>for</span> <span m='899070'>search</span> <span m='899580'>in</span>
  <span m='899700'>this</span> <span m='899850'>model.</span> <span m='901170'>Now,</span>
  <span m='901350'>you</span> <span m='901470'>might</span> <span m='901620'>also</span>
  <span m='901860'>wonder</span> <span m='902070'>about</span> <span m='902310'>insertions</span>
  <span m='902790'>and</span> <span m='902880'>deletions.</span> <span m='903720'>B-trees</span>
  <span m='904110'>support</span> <span m='904500'>insertions</span> <span m='904950'>and</span>
  <span m='905040'>deletions</span> <span m='905550'>in</span> <span m='905670'>log</span>
  <span m='905910'>base</span> <span m='906180'>B plus</span> <span m='906560'>1</span>
  <span m='906760'>of N</span> <span m='906950'>time,</span> <span m='907980'>but</span>
  <span m='908130'>that</span> <span m='908460'>is</span> <span m='908670'>not</span>
  <span m='908940'>optimal.</span> <span m='909730'>We</span> <span m='909750'>can</span>
  <span m='909870'>do</span> <span m='909960'>better.</span> </p><p><span m='912180'>So</span>
  <span m='912450'>for</span> <span m='912630'>example,</span> <span m='915070'>if</span>
  <span m='915240'>you</span> <span m='915360'>want</span> <span m='915660'>to</span>
  <span m='920050'>sort,</span> <span m='922976'>the</span> <span m='923460'>right</span>
  <span m='923670'>answer</span> <span m='923970'>for</span> <span m='924120'>sorting</span>
  <span m='926070'>is this</span> <span m='926250'>crazy</span> <span m='926700'>bound.</span>
  <span m='933900'>N</span> <span m='934080'>over</span> <span m='934290'>B,</span>
  <span m='934800'>which</span> <span m='934950'>is</span> <span m='935070'>really</span>
  <span m='935340'>good,</span> <span m='935640'>that's</span> <span m='935970'>linear</span>
  <span m='936300'>time</span> <span m='936555'>in</span> <span m='936810'>this</span>
  <span m='937080'>model,</span> <span m='937910'>times</span> <span m='938220'>log</span>
  <span m='938520'>base</span> <span m='938760'>M</span> <span m='938940'>over</span>
  <span m='939170'>B</span> <span m='939390'>of</span> <span m='939510'>N</span> <span
  m='939690'>over</span> <span m='939900'>B.</span> <span m='940920'>This</span> <span
  m='941100'>is</span> <span m='941220'>a</span> <span m='941280'>slight--</span>
  <span m='941610'>this</span> <span m='941820'>is</span> <span m='941940'>roughly</span>
  <span m='942390'>log</span> <span m='942690'>base</span> <span m='942930'>M</span>
  <span m='943300'>of</span> <span m='943350'>N.</span> <span m='944492'>The</span>
  <span m='944870'>over</span> <span m='945100'>B's</span> <span m='945450'>don't</span>
  <span m='945630'>make</span> <span m='945810'>too</span> <span m='945990'>big</span>
  <span m='946170'>a</span> <span m='946230'>difference.</span> </p><p><span m='948730'>So</span>
  <span m='949290'>this</span> <span m='949590'>is</span> <span m='949680'>an</span>
  <span m='949770'>improvement.</span> <span m='950910'>Normally</span> <span m='951270'>sorting</span>
  <span m='951570'>takes</span> <span m='951750'>N</span> <span m='951870'>log</span>
  <span m='952080'>N</span> <span m='952820'>with</span> <span m='952950'>a</span>
  <span m='953040'>base</span> <span m='953290'>2.</span> <span m='953870'>We're</span>
  <span m='954000'>improving</span> <span m='954330'>the</span> <span m='954420'>base</span>
  <span m='954720'>of</span> <span m='954780'>the</span> <span m='954870'>log</span>
  <span m='955230'>to</span> <span m='955430'>M</span> <span m='955610'>over</span>
  <span m='955850'>B</span> <span m='956070'>instead</span> <span m='956400'>of</span>
  <span m='956490'>2.</span> <span m='957540'>And</span> <span m='957720'>we're</span>
  <span m='957810'>improving</span> <span m='959520'>the</span> <span m='959670'>overall</span>
  <span m='960030'>running</span> <span m='960270'>time</span> <span m='960450'>by</span>
  <span m='960560'>a</span> <span m='960600'>factor</span> <span m='961020'>of</span>
  <span m='961080'>B.</span> <span m='961770'>So</span> <span m='961860'>this</span>
  <span m='962010'>is</span> <span m='962100'>actually</span> <span m='962370'>a</span>
  <span m='962430'>really</span> <span m='962820'>big</span> <span m='963060'>improvement.</span>
  </p><p><span m='964930'>We're</span> <span m='965730'>going</span> <span m='966000'>faster</span>
  <span m='966570'>than</span> <span m='966990'>the</span> <span m='967140'>RAM</span>
  <span m='967620'>time</span> <span m='968040'>divided</span> <span m='968400'>by</span>
  <span m='968560'>a</span> <span m='968650'>B,</span> <span m='970050'>because</span>
  <span m='970800'>to</span> <span m='970950'>sort</span> <span m='971270'>in</span>
  <span m='971400'>the</span> <span m='971530'>cell probe</span> <span m='971825'>model</span>
  <span m='972120'>just</span> <span m='972270'>takes</span> <span m='972480'>linear</span>
  <span m='972780'>time.</span> <span m='973060'>You</span> <span m='973170'>read</span>
  <span m='973350'>all</span> <span m='973470'>the</span> <span m='973560'>data.</span>
  <span m='974010'>You</span> <span m='974100'>sort</span> <span m='974400'>it.</span>
  <span m='974580'>You</span> <span m='975000'>put</span> <span m='975180'>it</span>
  <span m='975240'>back.</span> <span m='976980'>So</span> <span m='977280'>we</span>
  <span m='977340'>can't</span> <span m='977550'>quite</span> <span m='977790'>get</span>
  <span m='978090'>N</span> <span m='978390'>over</span> <span m='978570'>B,</span>
  <span m='978870'>but</span> <span m='979020'>we</span> <span m='979170'>get</span>
  <span m='979350'>this</span> <span m='979500'>log</span> <span m='979740'>factor.</span>
  </p><p><span m='982050'>So</span> <span m='982170'>this</span> <span m='982350'>is</span>
  <span m='982440'>really</span> <span m='982650'>good.</span> <span m='983250'>And</span>
  <span m='983370'>it's</span> <span m='983460'>something</span> <span m='983820'>that</span>
  <span m='983940'>would</span> <span m='984120'>not</span> <span m='984450'>result</span>
  <span m='984930'>from</span> <span m='985200'>using</span> <span m='985500'>B-trees.</span>
  <span m='987210'>This</span> <span m='987390'>is</span> <span m='987510'>a</span>
  <span m='987570'>little</span> <span m='987810'>funny,</span> <span m='988110'>because</span>
  <span m='988320'>in</span> <span m='988710'>regular</span> <span m='989670'>RAM</span>
  <span m='989940'>model,</span> <span m='990590'>if</span> <span m='990720'>you</span>
  <span m='992760'>insert</span> <span m='993150'>everything</span> <span m='993480'>into
  a</span> <span m='993930'>balanced</span> <span m='994330'>binary</span> <span m='994410'>search</span>
  <span m='994520'>tree,</span> <span m='995370'>then</span> <span m='995520'>do</span>
  <span m='995640'>an</span> <span m='995720'>in</span> <span m='995790'>order</span>
  <span m='995940'>traversal,</span> <span m='996420'>that's</span> <span m='996600'>an</span>
  <span m='996690'>optimal</span> <span m='997080'>sorting</span> <span m='997980'>algorithm.</span>
  <span m='998820'>It</span> <span m='998970'>gives</span> <span m='999180'>you</span>
  <span m='999270'>N</span> <span m='999420'>log</span> <span m='999630'>N.</span>
  </p><p><span m='1000320'>Here,</span> <span m='1000560'>it's</span> <span m='1000710'>not</span>
  <span m='1000890'>optimal.</span> <span m='1002240'>You</span> <span m='1002510'>throw</span>
  <span m='1002780'>everything</span> <span m='1003140'>into</span> <span m='1003290'>a</span>
  <span m='1003350'>B-tree,</span> <span m='1003650'>you</span> <span m='1003740'>get</span>
  <span m='1004010'>N</span> <span m='1004430'>times</span> <span m='1004760'>log</span>
  <span m='1005060'>base</span> <span m='1005290'>B</span> <span m='1005500'>of</span>
  <span m='1005580'>N.</span> <span m='1006840'>So</span> <span m='1006890'>there's</span>
  <span m='1007040'>two</span> <span m='1007250'>things</span> <span m='1007490'>that</span>
  <span m='1007610'>are</span> <span m='1007670'>bad.</span> <span m='1007970'>One</span>
  <span m='1008210'>is</span> <span m='1008360'>that</span> <span m='1008480'>the</span>
  <span m='1008570'>base</span> <span m='1008840'>of</span> <span m='1008900'>the</span>
  <span m='1008990'>log</span> <span m='1009320'>is</span> <span m='1009410'>slightly</span>
  <span m='1009890'>off.</span> <span m='1010840'>It's</span> <span m='1011310'>B</span>
  <span m='1011600'>versus</span> <span m='1011960'>M</span> <span m='1012140'>over</span>
  <span m='1012320'>B.</span> <span m='1013180'>That's</span> <span m='1013310'>not</span>
  <span m='1013490'>so</span> <span m='1013640'>big</span> <span m='1013820'>a</span>
  <span m='1013880'>deal.</span> </p><p><span m='1014810'>The</span> <span m='1014930'>big</span>
  <span m='1015110'>thing</span> <span m='1015350'>is</span> <span m='1015500'>it's</span>
  <span m='1015650'>N</span> <span m='1015800'>over</span> <span m='1016040'>B</span>
  <span m='1016700'>versus</span> <span m='1017230'>N.</span> <span m='1019400'>We</span>
  <span m='1019520'>don't</span> <span m='1019670'>want</span> <span m='1019820'>to</span>
  <span m='1019880'>pay</span> <span m='1020030'>N.</span> <span m='1020300'>We</span>
  <span m='1020420'>want</span> <span m='1020570'>to</span> <span m='1020630'>pay</span>
  <span m='1021500'>N</span> <span m='1021650'>over</span> <span m='1021830'>B.</span>
  <span m='1024630'>There's</span> <span m='1024829'>also</span> <span m='1025099'>a</span>
  <span m='1025130'>matching</span> <span m='1025490'>lower</span> <span m='1025700'>bound</span>
  <span m='1025970'>in</span> <span m='1026089'>the</span> <span m='1026180'>comparison</span>
  <span m='1026630'>model,</span> <span m='1027079'>which</span> <span m='1027260'>we</span>
  <span m='1027380'>will</span> <span m='1027500'>not</span> <span m='1027710'>cover</span>
  <span m='1028490'>here.</span> <span m='1031710'>By</span> <span m='1032480'>next</span>
  <span m='1032780'>lecture,</span> <span m='1033170'>we'll</span> <span m='1033319'>know</span>
  <span m='1033500'>how</span> <span m='1033619'>to</span> <span m='1033770'>do</span>
  <span m='1033920'>sorting</span> <span m='1034910'>optimally.</span> </p><p><span
  m='1037280'>First,</span> <span m='1037550'>I</span> <span m='1037609'>want</span>
  <span m='1037730'>to</span> <span m='1037819'>tell</span> <span m='1038000'>you</span>
  <span m='1038430'>about</span> <span m='1038849'>a</span> <span m='1038930'>bunch</span>
  <span m='1039260'>of</span> <span m='1040220'>different</span> <span m='1042349'>ways</span>
  <span m='1043250'>or</span> <span m='1043530'>different</span> <span m='1044060'>problems</span>
  <span m='1044630'>and</span> <span m='1044720'>results.</span> <span m='1048890'>So</span>
  <span m='1049100'>a</span> <span m='1049190'>funny</span> <span m='1049490'>problem,</span>
  <span m='1053120'>which</span> <span m='1053330'>actually</span> <span m='1053600'>does</span>
  <span m='1053930'>arise</span> <span m='1054320'>in</span> <span m='1054410'>practice,</span>
  <span m='1055170'>but</span> <span m='1056690'>it's</span> <span m='1056810'>interesting</span>
  <span m='1057170'>just</span> <span m='1057350'>to</span> <span m='1057530'>think</span>
  <span m='1057770'>about,</span> <span m='1059120'>instead</span> <span m='1059390'>of</span>
  <span m='1059510'>sorting--</span> <span m='1060350'>sorting</span> <span m='1060770'>is</span>
  <span m='1060980'>I</span> <span m='1061070'>give</span> <span m='1061310'>you</span>
  <span m='1061490'>an</span> <span m='1061580'>array.</span> <span m='1061880'>I</span>
  <span m='1061970'>don't</span> <span m='1062150'>know</span> <span m='1062270'>what</span>
  <span m='1062390'>order</span> <span m='1062630'>it's</span> <span m='1062780'>in.</span>
  <span m='1063290'>You</span> <span m='1063350'>have</span> <span m='1063440'>to</span>
  <span m='1063530'>find</span> <span m='1063770'>the</span> <span m='1063860'>right</span>
  <span m='1064070'>order</span> <span m='1064440'>and</span> <span m='1064460'>then</span>
  <span m='1064610'>put</span> <span m='1064820'>it</span> <span m='1064910'>into</span>
  <span m='1065120'>the</span> <span m='1065240'>right</span> <span m='1065420'>order.</span>
  </p><p><span m='1066380'>There's</span> <span m='1066620'>an</span> <span m='1066770'>easier</span>
  <span m='1067190'>problem,</span> <span m='1067680'>which</span> <span m='1067730'>is</span>
  <span m='1067820'>called</span> <span m='1068000'>permuting.</span> <span m='1069110'>I</span>
  <span m='1069170'>give</span> <span m='1069380'>you</span> <span m='1069500'>an</span>
  <span m='1069590'>array.</span> <span m='1070070'>I</span> <span m='1070160'>give</span>
  <span m='1070370'>you</span> <span m='1070460'>a</span> <span m='1070490'>permutation</span>
  <span m='1071240'>that</span> <span m='1071390'>I'd</span> <span m='1071480'>like</span>
  <span m='1071690'>to</span> <span m='1071840'>do.</span> <span m='1072890'>I</span>
  <span m='1073010'>just</span> <span m='1073220'>want</span> <span m='1073430'>you</span>
  <span m='1073490'>to</span> <span m='1073610'>move</span> <span m='1073880'>the</span>
  <span m='1074030'>items</span> <span m='1074390'>around.</span> </p><p><span m='1075980'>So</span>
  <span m='1077210'>you</span> <span m='1077330'>don't</span> <span m='1077480'>need</span>
  <span m='1077600'>to</span> <span m='1077720'>do</span> <span m='1077840'>any</span>
  <span m='1077990'>comparisons</span> <span m='1078710'>to</span> <span m='1078830'>get</span>
  <span m='1078980'>here.</span> <span m='1079940'>I</span> <span m='1080150'>tell</span>
  <span m='1080360'>you</span> <span m='1080510'>what</span> <span m='1080630'>the</span>
  <span m='1080720'>order</span> <span m='1080960'>is.</span> <span m='1081080'>You</span>
  <span m='1081170'>just</span> <span m='1081350'>have</span> <span m='1081470'>to</span>
  <span m='1081560'>physically</span> <span m='1082040'>move</span> <span m='1082280'>the</span>
  <span m='1082370'>items.</span> <span m='1083420'>This</span> <span m='1083570'>is</span>
  <span m='1083690'>harder</span> <span m='1083990'>than</span> <span m='1084140'>it</span>
  <span m='1084230'>sounds,</span> <span m='1085220'>because</span> <span m='1085910'>when</span>
  <span m='1086060'>you</span> <span m='1086150'>read,</span> <span m='1086690'>you</span>
  <span m='1086810'>read</span> <span m='1087020'>blocks</span> <span m='1087380'>of</span>
  <span m='1087500'>items</span> <span m='1087920'>in</span> <span m='1088070'>the</span>
  <span m='1088160'>original</span> <span m='1088520'>order.</span> <span m='1089510'>And</span>
  <span m='1089660'>so</span> <span m='1089750'>it's</span> <span m='1089900'>hard</span>
  <span m='1090200'>to</span> <span m='1090500'>just</span> <span m='1090680'>do</span>
  <span m='1090800'>an</span> <span m='1090890'>arbitrary</span> <span m='1091310'>permutation.</span>
  </p><p><span m='1092720'>And</span> <span m='1093020'>there's</span> <span m='1093170'>two</span>
  <span m='1093410'>obvious</span> <span m='1093680'>algorithms.</span> <span m='1094190'>One</span>
  <span m='1094460'>is</span> <span m='1094820'>you</span> <span m='1095000'>could</span>
  <span m='1095180'>sort</span> <span m='1097210'>your</span> <span m='1097370'>items.
  So</span> <span m='1097780'>you</span> <span m='1097850'>could</span> <span m='1097970'>go</span>
  <span m='1098180'>to</span> <span m='1098390'>every</span> <span m='1098720'>item</span>
  <span m='1098990'>in</span> <span m='1099110'>order</span> <span m='1099440'>and</span>
  <span m='1099530'>just</span> <span m='1099650'>write</span> <span m='1099920'>down</span>
  <span m='1100910'>its</span> <span m='1102410'>desired</span> <span m='1102920'>number</span>
  <span m='1103910'>in</span> <span m='1104090'>the</span> <span m='1104240'>new</span>
  <span m='1104420'>permutation,</span> <span m='1105140'>write</span> <span m='1105320'>down</span>
  <span m='1105530'>the</span> <span m='1105770'>permutation.</span> <span m='1106880'>Then</span>
  <span m='1107060'>run</span> <span m='1107240'>a</span> <span m='1107300'>sorting</span>
  <span m='1107630'>algorithm.</span> <span m='1108110'>That</span> <span m='1108320'>will</span>
  <span m='1108440'>take</span> <span m='1108650'>N</span> <span m='1108770'>over</span>
  <span m='1108950'>B</span> <span m='1109130'>log</span> <span m='1109550'>base</span>
  <span m='1109910'>M</span> <span m='1110330'>over B</span> <span m='1110750'>of
  N</span> <span m='1110930'>over B.</span> </p><p><span m='1111890'>Or</span> <span
  m='1113150'>the</span> <span m='1113300'>other</span> <span m='1113540'>obvious</span>
  <span m='1113810'>algorithm</span> <span m='1114320'>is</span> <span m='1114560'>to</span>
  <span m='1115430'>take</span> <span m='1116120'>the</span> <span m='1116210'>first</span>
  <span m='1116510'>item,</span> <span m='1116910'>put</span> <span m='1117020'>it</span>
  <span m='1117110'>where</span> <span m='1117260'>it</span> <span m='1117320'>belongs</span>
  <span m='1117680'>in</span> <span m='1117740'>the</span> <span m='1117830'>array,</span>
  <span m='1118070'>take</span> <span m='1118310'>the</span> <span m='1118400'>second</span>
  <span m='1118820'>item,</span> <span m='1118910'>put</span> <span m='1119150'>it</span>
  <span m='1119270'>where</span> <span m='1119420'>it</span> <span m='1119510'>belongs</span>
  <span m='1119870'>in</span> <span m='1119960'>the</span> <span m='1120050'>array,</span>
  <span m='1121260'>in</span> <span m='1121360'>a</span> <span m='1121400'>new</span>
  <span m='1121550'>copy</span> <span m='1121910'>of</span> <span m='1122000'>the</span>
  <span m='1122090'>array.</span> <span m='1122740'>And</span> <span m='1122840'>that</span>
  <span m='1123020'>will</span> <span m='1123110'>take</span> <span m='1123320'>at</span>
  <span m='1123410'>most</span> <span m='1123860'>N</span> <span m='1124100'>memory</span>
  <span m='1124430'>transfers,</span> <span m='1126020'>each</span> <span m='1126260'>one</span>
  <span m='1126940'>a</span> <span m='1127010'>completely</span> <span m='1127490'>separate</span>
  <span m='1127850'>memory</span> <span m='1128150'>transfer.</span> </p><p><span
  m='1128720'>And</span> <span m='1128810'>the</span> <span m='1128900'>claim</span>
  <span m='1129170'>is</span> <span m='1129290'>the</span> <span m='1129410'>optimal</span>
  <span m='1129770'>thing</span> <span m='1129950'>to</span> <span m='1130040'>do</span>
  <span m='1130170'>is</span> <span m='1130270'>the</span> <span m='1130370'>min</span>
  <span m='1130550'>of</span> <span m='1130670'>those</span> <span m='1130910'>two.</span>
  <span m='1132150'>So</span> <span m='1132320'>you</span> <span m='1132410'>just</span>
  <span m='1133100'>check</span> <span m='1133400'>how</span> <span m='1133550'>does</span>
  <span m='1133790'>N</span> <span m='1134190'>and</span> <span m='1134450'>B</span>
  <span m='1134780'>and</span> <span m='1134860'>M</span> <span m='1135170'>compare,</span>
  <span m='1136190'>do</span> <span m='1136400'>the</span> <span m='1136490'>better</span>
  <span m='1136790'>of</span> <span m='1136880'>the</span> <span m='1137000'>two</span>
  <span m='1137150'>algorithms.</span> <span m='1140460'>Again,</span> <span m='1140810'>there's</span>
  <span m='1140990'>a</span> <span m='1141020'>lower</span> <span m='1141260'>bound.</span>
  </p><p><span m='1142940'>In</span> <span m='1143120'>a</span> <span m='1143180'>model</span>
  <span m='1143510'>called</span> <span m='1143810'>the</span> <span m='1144050'>indivisible</span>
  <span m='1144620'>model,</span> <span m='1145340'>which</span> <span m='1145580'>is</span>
  <span m='1146390'>assuming</span> <span m='1146990'>that</span> <span m='1148490'>each</span>
  <span m='1148790'>word</span> <span m='1149270'>of</span> <span m='1150170'>your</span>
  <span m='1150320'>data</span> <span m='1150710'>doesn't</span> <span m='1151040'>get</span>
  <span m='1151220'>cut</span> <span m='1151490'>into</span> <span m='1151730'>subwords.</span>
  <span m='1153000'>So</span> <span m='1153140'>this</span> <span m='1153350'>is</span>
  <span m='1153470'>assuming--</span> <span m='1154580'>the</span> <span m='1154700'>lower</span>
  <span m='1154940'>bound</span> <span m='1156260'>assuming</span> <span m='1158630'>your</span>
  <span m='1158810'>words</span> <span m='1159110'>do</span> <span m='1159230'>not</span>
  <span m='1159500'>get</span> <span m='1159710'>cut</span> <span m='1159980'>up.</span>
  <span m='1164390'>I</span> <span m='1164480'>believe</span> <span m='1164720'>it's</span>
  <span m='1164840'>still</span> <span m='1165140'>unsolved</span> <span m='1165710'>whether</span>
  <span m='1165890'>you</span> <span m='1166010'>could</span> <span m='1166160'>do</span>
  <span m='1166280'>better</span> <span m='1166930'>otherwise.</span> </p><p><span
  m='1168332'>The</span> <span m='1168790'>last</span> <span m='1169790'>result</span>
  <span m='1171410'>in</span> <span m='1171500'>this</span> <span m='1171620'>model</span>
  <span m='1171900'>I</span> <span m='1171980'>wanted</span> <span m='1172130'>to</span>
  <span m='1172190'>talk</span> <span m='1172490'>about</span> <span m='1172790'>is</span>
  <span m='1172940'>called</span> <span m='1173150'>buffer</span> <span m='1173450'>trees.</span>
  <span m='1174470'>Buffer</span> <span m='1174680'>trees</span> <span m='1174990'>are</span>
  <span m='1176030'>pretty</span> <span m='1176180'>cool.</span> <span m='1179750'>They're</span>
  <span m='1179900'>essentially</span> <span m='1180350'>a</span> <span m='1180410'>dynamic</span>
  <span m='1180860'>version</span> <span m='1181160'>of</span> <span m='1181250'>sorting,</span>
  <span m='1183510'>which</span> <span m='1183530'>is</span> <span m='1183650'>what</span>
  <span m='1183770'>we</span> <span m='1183890'>lack--</span> <span m='1184640'>what</span>
  <span m='1184810'>B-trees</span> <span m='1185570'>do</span> <span m='1185690'>not</span>
  <span m='1185930'>give</span> <span m='1186170'>you.</span> </p><p><span m='1210300'>So</span>
  <span m='1210510'>they</span> <span m='1210690'>achieve</span> <span m='1211050'>the</span>
  <span m='1211150'>sorting</span> <span m='1211480'>bound</span> <span m='1211680'>divided</span>
  <span m='1212070'>by</span> <span m='1212340'>N</span> <span m='1212820'>per</span>
  <span m='1213060'>operation,</span> <span m='1214920'>so</span> <span m='1215100'>this</span>
  <span m='1215310'>is</span> <span m='1215490'>optimal.</span> <span m='1216840'>I</span>
  <span m='1216870'>haven't</span> <span m='1217050'>told</span> <span m='1217200'>you</span>
  <span m='1217290'>what</span> <span m='1217410'>the</span> <span m='1217500'>operations</span>
  <span m='1218040'>are.</span> <span m='1218550'>The</span> <span m='1218640'>amount</span>
  <span m='1218850'>is</span> <span m='1218970'>amortized.</span> </p><p><span m='1219285'>It</span>
  <span m='1219600'>has</span> <span m='1219900'>to</span> <span m='1219990'>be</span>
  <span m='1220140'>amortized,</span> <span m='1220620'>because</span> <span m='1220920'>this</span>
  <span m='1221160'>bound</span> <span m='1221550'>is</span> <span m='1221640'>typically</span>
  <span m='1222720'>little</span> <span m='1223020'>o</span> <span m='1223260'>of</span>
  <span m='1223380'>1.</span> <span m='1224610'>Think</span> <span m='1224760'>of</span>
  <span m='1224850'>this</span> <span m='1225060'>as</span> <span m='1225180'>1</span>
  <span m='1225420'>over</span> <span m='1225620'>B.</span> <span m='1225870'>There's</span>
  <span m='1226080'>a</span> <span m='1226140'>log</span> <span m='1226440'>factor.</span>
  <span m='1226920'>But</span> <span m='1227040'>assuming</span> <span m='1227370'>that</span>
  <span m='1227520'>log</span> <span m='1227730'>factor</span> <span m='1228150'>is</span>
  <span m='1228360'>smaller</span> <span m='1228810'>than</span> <span m='1228960'>B,</span>
  <span m='1229830'>which</span> <span m='1230190'>is</span> <span m='1230280'>often</span>
  <span m='1230550'>the</span> <span m='1230640'>case,</span> <span m='1231460'>this
  is</span> <span m='1231600'>in</span> <span m='1231690'>order</span> <span m='1231990'>1</span>
  <span m='1232230'>over</span> <span m='1232440'>B.</span> <span m='1232690'>It's</span>
  <span m='1232940'>a</span> <span m='1233010'>little</span> <span m='1233370'>o</span>
  <span m='1233520'>of 1</span> <span m='1233700'>cost,</span> <span m='1234120'>which</span>
  <span m='1234220'>is</span> <span m='1234260'>a</span> <span m='1234290'>little</span>
  <span m='1234510'>fun.</span> </p><p><span m='1235560'>But</span> <span m='1235770'>of</span>
  <span m='1235890'>course,</span> <span m='1236130'>every</span> <span m='1236430'>real</span>
  <span m='1236700'>cost</span> <span m='1237090'>is</span> <span m='1237240'>an</span>
  <span m='1237360'>integer.</span> <span m='1237675'>It's</span> <span m='1237990'>an</span>
  <span m='1238110'>integer</span> <span m='1238440'>number</span> <span m='1238710'>of</span>
  <span m='1238760'>block</span> <span m='1239010'>transfers.</span> <span m='1240540'>But</span>
  <span m='1240750'>amortized,</span> <span m='1241380'>you</span> <span m='1241470'>can</span>
  <span m='1241620'>get</span> <span m='1241770'>a</span> <span m='1242340'>little</span>
  <span m='1242610'>o</span> <span m='1242730'>of 1</span> <span m='1242920'>bound.</span>
  </p><p><span m='1245510'>And</span> <span m='1245880'>what</span> <span m='1246030'>it</span>
  <span m='1246120'>lets</span> <span m='1246330'>you</span> <span m='1246450'>do</span>
  <span m='1247860'>is</span> <span m='1248790'>delayed</span> <span m='1249450'>queries</span>
  <span m='1250650'>and</span> <span m='1250890'>batch</span> <span m='1251310'>updates.</span>
  <span m='1264170'>So</span> <span m='1264380'>I</span> <span m='1264440'>can</span>
  <span m='1264590'>do</span> <span m='1264680'>an</span> <span m='1264770'>insert</span>
  <span m='1265230'>and</span> <span m='1265330'>I</span> <span m='1265430'>can</span>
  <span m='1265530'>a</span> <span m='1265550'>delete.</span> <span m='1266030'>I</span>
  <span m='1266090'>can</span> <span m='1266240'>do</span> <span m='1266360'>many</span>
  <span m='1266630'>of</span> <span m='1266720'>them.</span> </p><p><span m='1267720'>And</span>
  <span m='1267740'>then</span> <span m='1267860'>I</span> <span m='1267920'>can</span>
  <span m='1268040'>do</span> <span m='1268160'>a</span> <span m='1268220'>query</span>
  <span m='1268670'>against</span> <span m='1268970'>the</span> <span m='1269090'>current</span>
  <span m='1269600'>data</span> <span m='1269870'>structure.</span> <span m='1271160'>I</span>
  <span m='1271340'>want</span> <span m='1271580'>to</span> <span m='1271670'>know,</span>
  <span m='1272120'>I</span> <span m='1272180'>don't</span> <span m='1272300'>know,</span>
  <span m='1272510'>the</span> <span m='1272630'>successor</span> <span m='1273290'>of</span>
  <span m='1273380'>an</span> <span m='1273470'>item.</span> <span m='1274160'>But</span>
  <span m='1274310'>I</span> <span m='1274400'>don't</span> <span m='1274640'>get</span>
  <span m='1274790'>the</span> <span m='1274940'>answer</span> <span m='1275270'>right</span>
  <span m='1275520'>then.</span> <span m='1275690'>It's</span> <span m='1275840'>delayed.</span>
  </p><p><span m='1277880'>The</span> <span m='1278000'>query</span> <span m='1278270'>will</span>
  <span m='1278430'>sit</span> <span m='1278660'>there.</span> <span m='1278930'>Eventually</span>
  <span m='1279530'>the</span> <span m='1279650'>data</span> <span m='1279830'>structure</span>
  <span m='1280160'>will</span> <span m='1280250'>decide</span> <span m='1280580'>to</span>
  <span m='1280670'>give</span> <span m='1280850'>me</span> <span m='1280940'>an</span>
  <span m='1281030'>answer.</span> <span m='1282590'>Or</span> <span m='1282960'>it</span>
  <span m='1283255'>may just</span> <span m='1283550'>never</span> <span m='1283790'>give</span>
  <span m='1283940'>me</span> <span m='1284030'>an</span> <span m='1284120'>answer.</span>
  <span m='1284960'>But</span> <span m='1285110'>then</span> <span m='1285290'>there's</span>
  <span m='1285440'>a</span> <span m='1285500'>new</span> <span m='1285650'>operation</span>
  <span m='1286190'>at</span> <span m='1286280'>the</span> <span m='1286430'>end,</span>
  <span m='1286680'>which</span> <span m='1286760'>is</span> <span m='1286940'>flush,</span>
  <span m='1287940'>which is</span> <span m='1288140'>give</span> <span m='1288380'>me</span>
  <span m='1288530'>all</span> <span m='1288710'>the</span> <span m='1288830'>answers</span>
  <span m='1289160'>to</span> <span m='1289220'>all</span> <span m='1289340'>the</span>
  <span m='1289430'>questions</span> <span m='1289820'>that</span> <span m='1289940'>I</span>
  <span m='1290030'>asked.</span> <span m='1291080'>And</span> <span m='1291320'>the</span>
  <span m='1291410'>flush</span> <span m='1291740'>takes</span> <span m='1292070'>this</span>
  <span m='1292250'>much</span> <span m='1292490'>time.</span> </p><p><span m='1293820'>So</span>
  <span m='1294050'>if</span> <span m='1294150'>you</span> <span m='1294620'>do</span>
  <span m='1294800'>N</span> <span m='1295010'>operations</span> <span m='1295700'>and</span>
  <span m='1295790'>then</span> <span m='1295910'>say</span> <span m='1296090'>flush,</span>
  <span m='1296720'>then</span> <span m='1297330'>it</span> <span m='1297410'>doesn't</span>
  <span m='1297620'>take</span> <span m='1297800'>any</span> <span m='1297980'>extra</span>
  <span m='1298220'>time.</span> <span m='1299240'>It's</span> <span m='1299420'>going</span>
  <span m='1299570'>to</span> <span m='1299630'>cost</span> <span m='1299960'>one</span>
  <span m='1300350'>sort</span> <span m='1300560'>of</span> <span m='1300650'>pass</span>
  <span m='1301070'>through</span> <span m='1301190'>the</span> <span m='1301280'>entire</span>
  <span m='1301580'>data</span> <span m='1301760'>structure,</span> <span m='1302120'>one</span>
  <span m='1302360'>sorting</span> <span m='1302690'>step.</span> <span m='1305880'>Yeah.</span>
  <span m='1306790'>The</span> <span m='1306920'>one</span> <span m='1307160'>thing</span>
  <span m='1307930'>you</span> <span m='1308090'>can</span> <span m='1308210'>get</span>
  <span m='1308870'>for</span> <span m='1309020'>free</span> <span m='1309890'>is</span>
  <span m='1310160'>a</span> <span m='1310400'>zero-cost</span> <span m='1312860'>find</span>
  <span m='1313370'>min.</span> </p><p><span m='1318300'>All</span> <span m='1318360'>right.</span>
  <span m='1319020'>So</span> <span m='1319410'>buffer</span> <span m='1319740'>tree,</span>
  <span m='1320640'>you</span> <span m='1320790'>can</span> <span m='1320910'>do</span>
  <span m='1321030'>find min</span> <span m='1321480'>instantaneously.</span> <span
  m='1322350'>It</span> <span m='1322410'>maintains</span> <span m='1322800'>the</span>
  <span m='1322920'>min</span> <span m='1323070'>all</span> <span m='1323190'>the</span>
  <span m='1323280'>time.</span> <span m='1323490'>So</span> <span m='1323610'>this</span>
  <span m='1323790'>lets</span> <span m='1323940'>you</span> <span m='1324030'>do</span>
  <span m='1324150'>a</span> <span m='1324210'>priority</span> <span m='1324720'>queue.</span>
  <span m='1325470'>You</span> <span m='1325560'>can</span> <span m='1325680'>do</span>
  <span m='1325800'>insert</span> <span m='1326340'>and</span> <span m='1326490'>delete</span>
  <span m='1326800'>min</span> <span m='1327440'>in</span> <span m='1327630'>this</span>
  <span m='1327780'>much</span> <span m='1327990'>time</span> <span m='1329100'>online.</span>
  </p><p><span m='1333980'>But</span> <span m='1334170'>if</span> <span m='1334260'>you</span>
  <span m='1334350'>want</span> <span m='1334470'>to</span> <span m='1334530'>do</span>
  <span m='1334680'>other</span> <span m='1334890'>kinds</span> <span m='1335130'>of</span>
  <span m='1335190'>queries,</span> <span m='1335760'>then</span> <span m='1336690'>they're</span>
  <span m='1337230'>slow</span> <span m='1337920'>to</span> <span m='1338100'>answer.</span>
  <span m='1339000'>You</span> <span m='1339270'>get</span> <span m='1339420'>the</span>
  <span m='1339510'>answer</span> <span m='1339750'>much</span> <span m='1339990'>later.</span>
  </p><p><span m='1341046'>So</span> <span m='1341410'>this</span> <span m='1341590'>is</span>
  <span m='1341820'>a</span> <span m='1341880'>dynamic</span> <span m='1342300'>version</span>
  <span m='1342540'>of</span> <span m='1342600'>sorting.</span> <span m='1342960'>It</span>
  <span m='1343050'>lets</span> <span m='1343260'>you</span> <span m='1343320'>do</span>
  <span m='1343440'>sorting</span> <span m='1343830'>in</span> <span m='1343890'>particular.</span>
  <span m='1344150'>It</span> <span m='1344410'>let's you</span> <span m='1344510'>do</span>
  <span m='1344670'>priority</span> <span m='1345090'>queues,</span> <span m='1345930'>other</span>
  <span m='1346110'>great</span> <span m='1346290'>things.</span> <span m='1346530'>We</span>
  <span m='1346650'>will</span> <span m='1346770'>see</span> <span m='1347920'>not</span>
  <span m='1348090'>quite</span> <span m='1348270'>a</span> <span m='1348330'>buffer</span>
  <span m='1348650'>tree</span> <span m='1348860'>but</span> <span m='1348960'>another</span>
  <span m='1349920'>data</span> <span m='1350160'>structure</span> <span m='1350500'>achieving</span>
  <span m='1350880'>similar</span> <span m='1351300'>bounds</span> <span m='1351960'>in</span>
  <span m='1352200'>the</span> <span m='1352290'>next</span> <span m='1352860'>lecture.</span>
  </p><p><span m='1355050'>Today's</span> <span m='1355350'>lecture</span> <span m='1355620'>is</span>
  <span m='1355710'>actually</span> <span m='1355950'>going</span> <span m='1356070'>to</span>
  <span m='1356130'>be</span> <span m='1356250'>about</span> <span m='1356490'>B-trees,</span>
  <span m='1357060'>which</span> <span m='1357270'>seems</span> <span m='1357570'>kind</span>
  <span m='1357870'>of</span> <span m='1358500'>boring,</span> <span m='1358980'>because</span>
  <span m='1359160'>we</span> <span m='1359280'>already</span> <span m='1359460'>know</span>
  <span m='1359640'>how</span> <span m='1359760'>to</span> <span m='1359850'>do</span>
  <span m='1360000'>B-trees.</span> <span m='1360810'>But</span> <span m='1360930'>we're</span>
  <span m='1361050'>going</span> <span m='1361120'>to</span> <span m='1361210'>do</span>
  <span m='1361380'>them</span> <span m='1361650'>in</span> <span m='1361860'>another</span>
  <span m='1362160'>model,</span> <span m='1363370'>which</span> <span m='1363480'>is</span>
  <span m='1363630'>the</span> <span m='1363750'>cache-oblivious</span> <span m='1365910'>model.</span>
  <span m='1367280'>So</span> <span m='1367380'>let</span> <span m='1367470'>me</span>
  <span m='1367590'>tell</span> <span m='1367770'>you</span> <span m='1367830'>about</span>
  <span m='1368010'>that</span> <span m='1368160'>model.</span> </p><p></p><p><span
  m='1386376'>All</span> <span m='1386900'>right.</span> <span m='1387090'>So</span>
  <span m='1387180'>the</span> <span m='1387270'>cache-oblivious</span> <span m='1387810'>model</span>
  <span m='1388170'>is</span> <span m='1388380'>much</span> <span m='1388920'>newer.</span>
  <span m='1389925'>It's</span> <span m='1390300'>from</span> <span m='1391680'>1999.</span>
  <span m='1394050'>And</span> <span m='1395100'>it's</span> <span m='1396000'>from</span>
  <span m='1396420'>MIT</span> <span m='1397170'>originally,</span> <span m='1397980'>Charles</span>
  <span m='1398310'>Leiserson</span> <span m='1398910'>and</span> <span m='1399060'>his</span>
  <span m='1399180'>students</span> <span m='1399570'>invented</span> <span m='1399960'>it</span>
  <span m='1401130'>back</span> <span m='1401400'>then,</span> <span m='1401820'>in</span>
  <span m='1401940'>the</span> <span m='1402030'>context</span> <span m='1402420'>of</span>
  <span m='1402510'>6406,</span> <span m='1403260'>I</span> <span m='1403350'>believe.</span>
  </p><p><span m='1404970'>And</span> <span m='1405240'>it's</span> <span m='1405540'>almost</span>
  <span m='1406020'>the</span> <span m='1406140'>same</span> <span m='1406530'>as</span>
  <span m='1406660'>this</span> <span m='1406800'>external</span> <span m='1407220'>memory</span>
  <span m='1407520'>model.</span> <span m='1409650'>There's</span> <span m='1409830'>one</span>
  <span m='1410160'>change,</span> <span m='1411450'>which</span> <span m='1411660'>is</span>
  <span m='1411810'>that</span> <span m='1411990'>the</span> <span m='1412170'>algorithm</span>
  <span m='1413190'>doesn't</span> <span m='1413520'>know</span> <span m='1413910'>what</span>
  <span m='1414120'>B</span> <span m='1414450'>or</span> <span m='1414750'>M is.</span>
  <span m='1424600'>Now,</span> <span m='1424750'>this</span> <span m='1424960'>is</span>
  <span m='1425440'>both</span> <span m='1425710'>awkward</span> <span m='1426250'>and</span>
  <span m='1426670'>cool</span> <span m='1427690'>at</span> <span m='1427930'>the</span>
  <span m='1428050'>same</span> <span m='1428350'>time.</span> </p><p><span m='1429290'>So</span>
  <span m='1430990'>the</span> <span m='1431140'>assumption</span> <span m='1431560'>is</span>
  <span m='1431710'>that</span> <span m='1431830'>the</span> <span m='1431950'>computer</span>
  <span m='1432460'>looks</span> <span m='1432700'>like</span> <span m='1432910'>this.</span>
  <span m='1434230'>The</span> <span m='1434380'>algorithm</span> <span m='1434800'>has</span>
  <span m='1435010'>no--</span> <span m='1435490'>and</span> <span m='1435670'>the</span>
  <span m='1435940'>algorithm</span> <span m='1436330'>knows</span> <span m='1436600'>that</span>
  <span m='1436870'>fact,</span> <span m='1437320'>but</span> <span m='1437440'>it</span>
  <span m='1437500'>doesn't</span> <span m='1437860'>know</span> <span m='1439030'>what</span>
  <span m='1439240'>the</span> <span m='1439330'>parameters</span> <span m='1439900'>of</span>
  <span m='1439990'>the</span> <span m='1440080'>cache</span> <span m='1440470'>are.</span>
  <span m='1441340'>Doesn't</span> <span m='1441730'>know how</span> <span m='1442000'>the</span>
  <span m='1442120'>memory</span> <span m='1442480'>is</span> <span m='1442600'>blocked.</span>
  </p><p><span m='1443590'>Now,</span> <span m='1443710'>as</span> <span m='1443890'>a</span>
  <span m='1443950'>consequence,</span> <span m='1444650'>it</span> <span m='1444750'>cannot</span>
  <span m='1445000'>manually</span> <span m='1445510'>say,</span> <span m='1446230'>read</span>
  <span m='1446500'>this</span> <span m='1446710'>block,</span> <span m='1447250'>write</span>
  <span m='1447520'>this</span> <span m='1447700'>block.</span> <span m='1448480'>It</span>
  <span m='1448570'>can't</span> <span m='1448840'>decide</span> <span m='1449290'>which</span>
  <span m='1449470'>block</span> <span m='1449770'>to</span> <span m='1449890'>kick</span>
  <span m='1450130'>out.</span> <span m='1451090'>This</span> <span m='1451270'>is</span>
  <span m='1451360'>going</span> <span m='1451510'>to</span> <span m='1451570'>be</span>
  <span m='1451720'>more</span> <span m='1451990'>like</span> <span m='1452320'>a</span>
  <span m='1452410'>typical</span> <span m='1453670'>algorithm.</span> <span m='1454270'>I</span>
  <span m='1454330'>mean,</span> <span m='1454870'>the</span> <span m='1454990'>algorithm</span>
  <span m='1455380'>will</span> <span m='1455500'>look</span> <span m='1455710'>like</span>
  <span m='1455890'>a</span> <span m='1455950'>regular</span> <span m='1456490'>RAM</span>
  <span m='1456880'>algorithm.</span> </p><p><span m='1457810'>It's</span> <span m='1457910'>going</span>
  <span m='1458050'>to</span> <span m='1458110'>say</span> <span m='1458290'>read</span>
  <span m='1458500'>this</span> <span m='1458710'>word,</span> <span m='1459780'>write</span>
  <span m='1460090'>this</span> <span m='1460270'>word</span> <span m='1460870'>to</span>
  <span m='1461020'>memory,</span> <span m='1462120'>do</span> <span m='1462710'>an</span>
  <span m='1462820'>addition,</span> <span m='1463340'>whatever.</span> <span m='1465550'>So</span>
  <span m='1467340'>algorithm</span> <span m='1470470'>looks</span> <span m='1470860'>like</span>
  <span m='1472080'>a</span> <span m='1472390'>RAM</span> <span m='1472720'>algorithm.</span>
  <span m='1474580'>But</span> <span m='1474760'>the</span> <span m='1474880'>analysis</span>
  <span m='1475420'>is</span> <span m='1475480'>going</span> <span m='1475660'>to</span>
  <span m='1475720'>be</span> <span m='1475840'>different.</span> </p><p><span m='1481610'>So</span>
  <span m='1481690'>this</span> <span m='1481900'>is</span> <span m='1483190'>convenient,</span>
  <span m='1483820'>because</span> <span m='1484210'>algorithms--</span> <span m='1485010'>I</span>
  <span m='1485110'>mean,</span> <span m='1485350'>how</span> <span m='1485560'>you</span>
  <span m='1485710'>implement</span> <span m='1486070'>an</span> <span m='1486160'>algorithm</span>
  <span m='1486520'>becomes</span> <span m='1486880'>much</span> <span m='1487090'>clearer</span>
  <span m='1487450'>in</span> <span m='1487540'>this</span> <span m='1487690'>model.</span>
  <span m='1488200'>And</span> <span m='1488290'>this</span> <span m='1488500'>is--</span>
  <span m='1489550'>now</span> <span m='1489730'>we're</span> <span m='1489820'>going</span>
  <span m='1490030'>to</span> <span m='1490150'>assume</span> <span m='1490420'>that</span>
  <span m='1490510'>the</span> <span m='1490600'>cache</span> <span m='1491050'>is</span>
  <span m='1491170'>maintained</span> <span m='1491590'>automatically.</span> <span
  m='1497980'>In</span> <span m='1498100'>particular,</span> <span m='1498610'>the</span>
  <span m='1498760'>way</span> <span m='1499090'>that</span> <span m='1499450'>blocks</span>
  <span m='1499960'>are</span> <span m='1500080'>replaced</span> <span m='1502150'>becomes</span>
  <span m='1502600'>automatic.</span> </p><p><span m='1507490'>So</span> <span m='1507700'>the</span>
  <span m='1507790'>assumption</span> <span m='1508150'>is</span> <span m='1508330'>when</span>
  <span m='1508510'>you</span> <span m='1508630'>read</span> <span m='1508840'>a</span>
  <span m='1508900'>word</span> <span m='1509110'>from</span> <span m='1509290'>memory,</span>
  <span m='1510010'>the</span> <span m='1510130'>entire</span> <span m='1510520'>block</span>
  <span m='1510820'>comes</span> <span m='1511120'>over.</span> <span m='1511330'>You</span>
  <span m='1511450'>just</span> <span m='1511600'>don't</span> <span m='1511810'>know</span>
  <span m='1511960'>how</span> <span m='1512140'>much</span> <span m='1512410'>data</span>
  <span m='1512680'>that</span> <span m='1512890'>is.</span> <span m='1513880'>And</span>
  <span m='1514300'>when</span> <span m='1514480'>something</span> <span m='1514870'>gets</span>
  <span m='1515110'>kicked</span> <span m='1515350'>out,</span> <span m='1515500'>the</span>
  <span m='1515590'>entire</span> <span m='1515890'>block</span> <span m='1516160'>gets</span>
  <span m='1516370'>kicked</span> <span m='1516640'>out</span> <span m='1516820'>and</span>
  <span m='1516970'>written</span> <span m='1517210'>to</span> <span m='1517330'>memory.</span>
  <span m='1518410'>But</span> <span m='1518800'>you</span> <span m='1518980'>don't</span>
  <span m='1519190'>get</span> <span m='1519370'>to</span> <span m='1519490'>see</span>
  <span m='1519760'>how</span> <span m='1519910'>that's</span> <span m='1520120'>happening,</span>
  <span m='1520570'>because</span> <span m='1520720'>you</span> <span m='1520840'>don't</span>
  <span m='1521020'>know</span> <span m='1521170'>anything</span> <span m='1522190'>about</span>
  <span m='1522400'>B or</span> <span m='1522680'>M.</span> </p><p><span m='1524800'>We</span>
  <span m='1524980'>need</span> <span m='1525100'>to</span> <span m='1525220'>assume</span>
  <span m='1525610'>something</span> <span m='1526060'>about</span> <span m='1526360'>this</span>
  <span m='1526510'>replacement</span> <span m='1526990'>strategy.</span> <span m='1527950'>And</span>
  <span m='1528450'>in</span> <span m='1528580'>the</span> <span m='1528670'>cache-oblivious</span>
  <span m='1529240'>model,</span> <span m='1529990'>we</span> <span m='1530110'>assume</span>
  <span m='1530950'>that</span> <span m='1531310'>it</span> <span m='1531490'>is</span>
  <span m='1531850'>optimal.</span> <span m='1535240'>This</span> <span m='1535450'>is</span>
  <span m='1535570'>an</span> <span m='1535690'>offline</span> <span m='1536140'>notion,</span>
  <span m='1536850'>saying</span> <span m='1538570'>what</span> <span m='1538810'>block</span>
  <span m='1539080'>we're</span> <span m='1539140'>going</span> <span m='1539260'>to</span>
  <span m='1539350'>kick</span> <span m='1539590'>out</span> <span m='1540100'>is</span>
  <span m='1540250'>the</span> <span m='1540340'>one</span> <span m='1540520'>that</span>
  <span m='1540640'>will</span> <span m='1540790'>be</span> <span m='1540910'>used</span>
  <span m='1541180'>farthest</span> <span m='1541630'>in</span> <span m='1541750'>the</span>
  <span m='1541840'>future,</span> <span m='1543140'>so</span> <span m='1543160'>this</span>
  <span m='1543340'>is</span> <span m='1543430'>very</span> <span m='1543610'>hard</span>
  <span m='1543790'>to</span> <span m='1543850'>implement</span> <span m='1544270'>in</span>
  <span m='1544390'>practice,</span> <span m='1545500'>because</span> <span m='1545680'>you</span>
  <span m='1545770'>need</span> <span m='1546010'>a</span> <span m='1546100'>crystal</span>
  <span m='1546460'>ball.</span> </p><p><span m='1547170'>But</span> <span m='1548370'>good</span>
  <span m='1548590'>news</span> <span m='1548830'>is,</span> <span m='1550030'>you</span>
  <span m='1550240'>could</span> <span m='1550390'>use</span> <span m='1550600'>something</span>
  <span m='1550900'>like</span> <span m='1551100'>LRU,</span> <span m='1551710'>Least</span>
  <span m='1551980'>Recently</span> <span m='1552370'>Used,</span> <span m='1552850'>kick</span>
  <span m='1553260'>that guy</span> <span m='1553500'>out,</span> <span m='1553870'>or</span>
  <span m='1554020'>even</span> <span m='1554820'>a</span> <span m='1554860'>very</span>
  <span m='1555070'>simple</span> <span m='1555370'>algorithm,</span> <span m='1556240'>first</span>
  <span m='1556570'>in,</span> <span m='1556790'>first</span> <span m='1556990'>out.</span>
  <span m='1558010'>The</span> <span m='1558100'>most</span> <span m='1558340'>recent--</span>
  <span m='1558910'>the</span> <span m='1559240'>oldest</span> <span m='1559580'>block</span>
  <span m='1559870'>that</span> <span m='1559960'>you</span> <span m='1560050'>brought</span>
  <span m='1560320'>in</span> <span m='1560500'>is</span> <span m='1560620'>the</span>
  <span m='1560740'>one</span> <span m='1560890'>that</span> <span m='1560980'>you</span>
  <span m='1561100'>kick</span> <span m='1561340'>out.</span> <span m='1562960'>These</span>
  <span m='1563260'>are</span> <span m='1564340'>actually</span> <span m='1564640'>very</span>
  <span m='1564820'>close</span> <span m='1565150'>to</span> <span m='1565330'>optimal.</span>
  </p><p><span m='1569030'>They're</span> <span m='1569320'>constant</span> <span
  m='1569530'>competitive</span> <span m='1572170'>against</span> <span m='1573790'>or</span>
  <span m='1575260'>given</span> <span m='1576160'>a</span> <span m='1576220'>cache</span>
  <span m='1576640'>of</span> <span m='1576760'>twice</span> <span m='1577060'>the</span>
  <span m='1577150'>size.</span> <span m='1581030'>So</span> <span m='1581240'>this</span>
  <span m='1581420'>is</span> <span m='1581510'>from</span> <span m='1581660'>the</span>
  <span m='1581780'>early</span> <span m='1582050'>days</span> <span m='1582380'>of</span>
  <span m='1582500'>competitive</span> <span m='1582980'>analysis.</span> <span m='1585910'>It</span>
  <span m='1586370'>says</span> <span m='1586610'>if</span> <span m='1586760'>I</span>
  <span m='1586850'>compare</span> <span m='1587240'>offline</span> <span m='1587660'>optimal</span>
  <span m='1588110'>with</span> <span m='1588210'>a</span> <span m='1588290'>cache</span>
  <span m='1588620'>size</span> <span m='1588920'>M</span> <span m='1589460'>versus--</span>
  <span m='1590660'>or</span> <span m='1590800'>let's</span> <span m='1591040'>say</span>
  <span m='1591380'>offline</span> <span m='1591800'>optimal</span> <span m='1592130'>with</span>
  <span m='1592220'>a</span> <span m='1592310'>cache</span> <span m='1592640'>size</span>
  <span m='1592890'>M</span> <span m='1593110'>over</span> <span m='1593330'>2,</span>
  <span m='1594260'>versus</span> <span m='1594710'>LRU</span> <span m='1595210'>or</span>
  <span m='1595310'>FIFO,</span> <span m='1595760'>which</span> <span m='1595940'>are</span>
  <span m='1596000'>online</span> <span m='1596390'>algorithms</span> <span m='1596930'>on</span>
  <span m='1597050'>a</span> <span m='1597110'>cache of</span> <span m='1597440'>size</span>
  <span m='1597710'>M,</span> <span m='1598700'>then</span> <span m='1598940'>this</span>
  <span m='1599120'>cost</span> <span m='1599450'>will</span> <span m='1599570'>be</span>
  <span m='1599750'>at</span> <span m='1599840'>most</span> <span m='1600230'>I</span>
  <span m='1600290'>think</span> <span m='1600440'>twice</span> <span m='1601020'>this</span>
  <span m='1601190'>cost.</span> </p><p><span m='1603140'>Now,</span> <span m='1603290'>the</span>
  <span m='1603410'>good</span> <span m='1603560'>news</span> <span m='1603800'>is,</span>
  <span m='1603980'>you</span> <span m='1604070'>look</span> <span m='1604250'>at</span>
  <span m='1604340'>all</span> <span m='1604550'>these</span> <span m='1604730'>bounds,</span>
  <span m='1605320'>you</span> <span m='1605450'>change</span> <span m='1605770'>M</span>
  <span m='1606050'>by</span> <span m='1606200'>a</span> <span m='1606260'>factor</span>
  <span m='1606620'>of</span> <span m='1606740'>2,</span> <span m='1607700'>nothing</span>
  <span m='1608030'>changes.</span> <span m='1608870'>Assuming</span> <span m='1609590'>everything</span>
  <span m='1609950'>is</span> <span m='1610040'>at</span> <span m='1610130'>least</span>
  <span m='1610310'>some</span> <span m='1610490'>constant,</span> <span m='1611600'>and</span>
  <span m='1611960'>M</span> <span m='1612140'>and</span> <span m='1612230'>B</span>
  <span m='1612410'>are</span> <span m='1612500'>not</span> <span m='1612680'>super</span>
  <span m='1613170'>super</span> <span m='1613340'>close,</span> <span m='1614570'>then</span>
  <span m='1615620'>changing</span> <span m='1615980'>M</span> <span m='1616130'>by</span>
  <span m='1616250'>a</span> <span m='1616280'>factor</span> <span m='1616580'>of</span>
  <span m='1616670'>2</span> <span m='1617120'>doesn't</span> <span m='1617360'>affect</span>
  <span m='1617630'>these</span> <span m='1617780'>bounds.</span> <span m='1618650'>These</span>
  <span m='1618800'>ones</span> <span m='1619010'>don't</span> <span m='1619130'>even</span>
  <span m='1619280'>have</span> <span m='1619460'>M</span> <span m='1619640'>in</span>
  <span m='1619760'>them,</span> <span m='1620340'>so</span> <span m='1620450'>it's</span>
  <span m='1620570'>not</span> <span m='1620780'>a</span> <span m='1620840'>big</span>
  <span m='1620990'>deal.</span> </p><p><span m='1622550'>So</span> <span m='1622760'>we're</span>
  <span m='1622820'>going</span> <span m='1622940'>to</span> <span m='1623000'>assume</span>
  <span m='1623660'>this</span> <span m='1624500'>basically</span> <span m='1624860'>for</span>
  <span m='1625010'>analysis.</span> <span m='1626400'>It's</span> <span m='1626420'>not</span>
  <span m='1626600'>really</span> <span m='1626840'>that</span> <span m='1626990'>big</span>
  <span m='1627170'>a</span> <span m='1627230'>deal.</span> <span m='1627440'>You</span>
  <span m='1627560'>could</span> <span m='1627710'>also</span> <span m='1627950'>analyze</span>
  <span m='1629060'>with</span> <span m='1629210'>these</span> <span m='1629360'>models.</span>
  <span m='1629720'>The point</span> <span m='1629960'>is</span> <span m='1630080'>they're</span>
  <span m='1630200'>all</span> <span m='1630440'>the</span> <span m='1630530'>same</span>
  <span m='1630740'>within</span> <span m='1630980'>a</span> <span m='1631040'>constant</span>
  <span m='1631370'>factor</span> <span m='1633470'>for</span> <span m='1633680'>the</span>
  <span m='1633890'>algorithms</span> <span m='1634310'>we</span> <span m='1634430'>care</span>
  <span m='1634640'>about.</span> </p><p><span m='1637040'>What</span> <span m='1637340'>other</span>
  <span m='1637580'>fun</span> <span m='1637940'>things?</span> <span m='1641840'>If</span>
  <span m='1642020'>you</span> <span m='1642140'>have</span> <span m='1642350'>a</span>
  <span m='1642410'>good,</span> <span m='1643310'>cache-oblivious</span> <span m='1643910'>algorithm,</span>
  <span m='1645320'>it's</span> <span m='1645530'>good</span> <span m='1645800'>simultaneously</span>
  <span m='1646730'>for</span> <span m='1646940'>all</span> <span m='1647300'>B</span>
  <span m='1647690'>and</span> <span m='1647840'>M.</span> <span m='1648800'>That's</span>
  <span m='1649190'>the</span> <span m='1649280'>consequence.</span> <span m='1649890'>So</span>
  <span m='1650000'>whereas</span> <span m='1650330'>B-trees</span> <span m='1650840'>for</span>
  <span m='1650930'>example,</span> <span m='1652200'>need</span> <span m='1652250'>to</span>
  <span m='1652370'>know</span> <span m='1652610'>B,</span> <span m='1652970'>they</span>
  <span m='1653120'>need</span> <span m='1653270'>to</span> <span m='1653390'>have</span>
  <span m='1653600'>the</span> <span m='1653720'>right</span> <span m='1654020'>branching</span>
  <span m='1654440'>factor</span> <span m='1654800'>for</span> <span m='1654980'>your</span>
  <span m='1655340'>value</span> <span m='1655700'>of</span> <span m='1655790'>B,</span>
  <span m='1656510'>the</span> <span m='1656600'>cache-oblivious</span> <span m='1657200'>model,</span>
  <span m='1657860'>you</span> <span m='1658010'>have</span> <span m='1658250'>to</span>
  <span m='1658340'>have--</span> <span m='1659600'>your</span> <span m='1659810'>data</span>
  <span m='1660050'>structure</span> <span m='1660380'>has</span> <span m='1660560'>to</span>
  <span m='1660680'>be</span> <span m='1660800'>correct,</span> <span m='1661790'>has</span>
  <span m='1661970'>to</span> <span m='1662090'>be</span> <span m='1662540'>optimized</span>
  <span m='1663170'>for</span> <span m='1663440'>all</span> <span m='1663770'>values</span>
  <span m='1664160'>of</span> <span m='1664250'>B</span> <span m='1664940'>and</span>
  <span m='1665090'>all</span> <span m='1665330'>values</span> <span m='1665720'>of</span>
  <span m='1665840'>M</span> <span m='1666140'>simultaneously.</span> </p><p><span
  m='1667940'>So</span> <span m='1668060'>this</span> <span m='1668240'>has</span>
  <span m='1668360'>some</span> <span m='1668510'>nice</span> <span m='1668690'>side</span>
  <span m='1668960'>effects.</span> <span m='1670280'>In</span> <span m='1670400'>particular,</span>
  <span m='1671710'>you</span> <span m='1671810'>essentially</span> <span m='1672200'>adapt</span>
  <span m='1673820'>to</span> <span m='1674840'>different</span> <span m='1675140'>values</span>
  <span m='1675830'>of</span> <span m='1676700'>B</span> <span m='1676940'>and</span>
  <span m='1677090'>M.</span> <span m='1678380'>So</span> <span m='1678560'>two</span>
  <span m='1678740'>nice</span> <span m='1678920'>side</span> <span m='1679160'>effects</span>
  <span m='1679460'>of</span> <span m='1679550'>that</span> <span m='1679910'>are</span>
  <span m='1680270'>that</span> <span m='1680540'>if</span> <span m='1680690'>you</span>
  <span m='1680810'>have</span> <span m='1681110'>a</span> <span m='1681200'>multi-level</span>
  <span m='1681920'>memory</span> <span m='1682250'>hierarchy,</span> <span m='1683090'>each</span>
  <span m='1683300'>level</span> <span m='1683600'>has</span> <span m='1683810'>its</span>
  <span m='1683930'>own</span> <span m='1684200'>B</span> <span m='1684410'>and</span>
  <span m='1684500'>its</span> <span m='1684680'>own</span> <span m='1684920'>M.</span>
  <span m='1686450'>If</span> <span m='1686600'>you</span> <span m='1686660'>use</span>
  <span m='1687080'>a</span> <span m='1687140'>cache-oblivious</span> <span m='1687830'>algorithm</span>
  <span m='1688220'>and</span> <span m='1688310'>all</span> <span m='1688460'>of</span>
  <span m='1688550'>those</span> <span m='1688730'>caches</span> <span m='1689150'>are</span>
  <span m='1689240'>maintained</span> <span m='1689630'>automatically</span> <span
  m='1690200'>using</span> <span m='1690470'>one</span> <span m='1690620'>of</span>
  <span m='1690680'>these</span> <span m='1690800'>strategies,</span> <span m='1692030'>then</span>
  <span m='1692840'>you</span> <span m='1693170'>optimize</span> <span m='1694370'>the</span>
  <span m='1694490'>number</span> <span m='1694970'>of--</span> <span m='1695170'>maybe
  I should</span> <span m='1695410'>draw</span> <span m='1695610'>a</span> <span m='1695720'>picture.</span>
  </p><p><span m='1699420'>Here's</span> <span m='1699560'>a</span> <span m='1699620'>multi-level</span>
  <span m='1700250'>memory</span> <span m='1700550'>hierarchy.</span> <span m='1702770'>You</span>
  <span m='1702980'>optimize</span> <span m='1704300'>the</span> <span m='1704570'>number</span>
  <span m='1704870'>of</span> <span m='1704930'>memory</span> <span m='1705170'>transfers</span>
  <span m='1705590'>between</span> <span m='1705920'>these</span> <span m='1706100'>two</span>
  <span m='1706190'>levels.</span> <span m='1706550'>You</span> <span m='1706700'>optimize</span>
  <span m='1707190'>the</span> <span m='1707250'>number</span> <span m='1707480'>of</span>
  <span m='1707540'>memory</span> <span m='1707750'>transfers</span> <span m='1708200'>between</span>
  <span m='1708500'>these</span> <span m='1708650'>two</span> <span m='1708740'>levels,</span>
  <span m='1709490'>between</span> <span m='1709700'>these</span> <span m='1709850'>two</span>
  <span m='1709940'>levels,</span> <span m='1710390'>and</span> <span m='1710480'>between</span>
  <span m='1710780'>these</span> <span m='1710930'>two</span> <span m='1711050'>levels.</span>
  <span m='1712460'>So</span> <span m='1712610'>you</span> <span m='1712760'>optimize</span>
  <span m='1713090'>everything.</span> </p><p><span m='1714530'>Each</span> <span
  m='1714740'>of</span> <span m='1714800'>them</span> <span m='1715010'>has</span>
  <span m='1715280'>some--</span> <span m='1715790'>if</span> <span m='1715850'>you</span>
  <span m='1715940'>just</span> <span m='1716330'>think</span> <span m='1716570'>of</span>
  <span m='1716660'>this</span> <span m='1716870'>as</span> <span m='1716990'>one</span>
  <span m='1717230'>big</span> <span m='1717440'>level</span> <span m='1718400'>versus</span>
  <span m='1718850'>this</span> <span m='1719060'>level</span> <span m='1719875'>or</span>
  <span m='1720150'>versus</span> <span m='1720770'>all</span> <span m='1720950'>the</span>
  <span m='1721040'>levels</span> <span m='1721370'>to</span> <span m='1721490'>the</span>
  <span m='1721580'>right,</span> <span m='1723350'>then</span> <span m='1724640'>that</span>
  <span m='1724850'>has</span> <span m='1725000'>some</span> <span m='1725210'>B</span>
  <span m='1725420'>and</span> <span m='1725510'>some</span> <span m='1725750'>M.</span>
  <span m='1726920'>And</span> <span m='1727070'>you're</span> <span m='1727190'>minimizing</span>
  <span m='1727730'>the</span> <span m='1727790'>number</span> <span m='1728000'>of</span>
  <span m='1728060'>memory</span> <span m='1728330'>transfers</span> <span m='1728810'>here.</span>
  </p><p><span m='1730520'>Also,</span> <span m='1730850'>if</span> <span m='1730940'>B</span>
  <span m='1731050'>and</span> <span m='1731190'>M are</span> <span m='1731390'>changing,</span>
  <span m='1733640'>lots</span> <span m='1733910'>of</span> <span m='1734000'>situations</span>
  <span m='1734600'>for</span> <span m='1734690'>that.</span> <span m='1734930'>If</span>
  <span m='1735080'>you</span> <span m='1735290'>have</span> <span m='1735500'>multiple</span>
  <span m='1735980'>programs</span> <span m='1736400'>running</span> <span m='1736640'>at</span>
  <span m='1736730'>the</span> <span m='1736820'>same</span> <span m='1737060'>time,</span>
  <span m='1737780'>then</span> <span m='1737960'>your</span> <span m='1738170'>cache</span>
  <span m='1738500'>size</span> <span m='1738800'>might</span> <span m='1738980'>effectively</span>
  <span m='1739490'>go</span> <span m='1739670'>down</span> <span m='1740150'>if</span>
  <span m='1740240'>they're</span> <span m='1740360'>really</span> <span m='1740570'>running</span>
  <span m='1740840'>in</span> <span m='1740930'>parallel</span> <span m='1741320'>on</span>
  <span m='1741410'>the</span> <span m='1741500'>same</span> <span m='1741710'>computer,</span>
  <span m='1742690'>or</span> <span m='1742820'>pseudo-parallel.</span> </p><p><span
  m='1745610'>Block</span> <span m='1745940'>size</span> <span m='1746270'>could</span>
  <span m='1746450'>change.</span> <span m='1746950'>If</span> <span m='1747160'>you</span>
  <span m='1747470'>think</span> <span m='1747650'>of</span> <span m='1747740'>a</span>
  <span m='1747800'>disk</span> <span m='1748630'>and</span> <span m='1748700'>your</span>
  <span m='1748850'>block</span> <span m='1749120'>size</span> <span m='1749480'>is</span>
  <span m='1749570'>the</span> <span m='1749660'>size</span> <span m='1749960'>of</span>
  <span m='1750020'>your</span> <span m='1750140'>track,</span> <span m='1750680'>then</span>
  <span m='1751400'>closer</span> <span m='1751730'>to</span> <span m='1751820'>the</span>
  <span m='1751940'>center,</span> <span m='1752300'>the</span> <span m='1752390'>tracks</span>
  <span m='1752690'>are</span> <span m='1752780'>smaller.</span> <span m='1753200'>Closer</span>
  <span m='1753500'>to</span> <span m='1753680'>the</span> <span m='1753920'>rim</span>
  <span m='1754310'>of</span> <span m='1754460'>the</span> <span m='1754610'>disk</span>
  <span m='1754970'>then</span> <span m='1755900'>blocks</span> <span m='1756200'>are</span>
  <span m='1756260'>bigger.</span> <span m='1757130'>All</span> <span m='1757310'>these</span>
  <span m='1757460'>things</span> <span m='1757760'>basically</span> <span m='1758140'>in</span>
  <span m='1758210'>the</span> <span m='1758300'>cache-oblivious</span> <span m='1758810'>model,</span>
  <span m='1759020'>you</span> <span m='1759170'>don't</span> <span m='1759350'>care,</span>
  <span m='1759710'>because</span> <span m='1760100'>it</span> <span m='1760220'>will</span>
  <span m='1760370'>just</span> <span m='1760580'>work.</span> </p><p><span m='1761450'>Now,</span>
  <span m='1761600'>there's</span> <span m='1761750'>no</span> <span m='1761930'>nice</span>
  <span m='1762200'>formalization</span> <span m='1763010'>of</span> <span m='1763100'>adapting</span>
  <span m='1763670'>to</span> <span m='1763790'>changing</span> <span m='1764150'>values</span>
  <span m='1764480'>of</span> <span m='1764560'>B and M.</span> <span m='1764930'>That's</span>
  <span m='1765110'>kind</span> <span m='1765290'>of</span> <span m='1765410'>an</span>
  <span m='1765500'>open</span> <span m='1765800'>problem</span> <span m='1766210'>to</span>
  <span m='1766970'>make</span> <span m='1767150'>explicit</span> <span m='1767600'>what</span>
  <span m='1767780'>that</span> <span m='1767960'>means.</span> <span m='1768890'>But</span>
  <span m='1768980'>we're</span> <span m='1769100'>going</span> <span m='1769220'>to</span>
  <span m='1769790'>assume</span> <span m='1770120'>in</span> <span m='1770180'>the</span>
  <span m='1770270'>cache-oblivious</span> <span m='1770810'>models</span> <span m='1771110'>you</span>
  <span m='1771170'>have</span> <span m='1771290'>one</span> <span m='1771500'>fixed</span>
  <span m='1771740'>B,</span> <span m='1772010'>one</span> <span m='1772200'>fixed</span>
  <span m='1772520'>M,</span> <span m='1773090'>analyze</span> <span m='1773570'>relative</span>
  <span m='1773960'>to</span> <span m='1774050'>that.</span> <span m='1774710'>But</span>
  <span m='1774920'>of</span> <span m='1775010'>course,</span> <span m='1775190'>that</span>
  <span m='1775370'>analysis</span> <span m='1775760'>applies</span> <span m='1776000'>simultaneously</span>
  <span m='1776810'>to</span> <span m='1776900'>all</span> <span m='1777080'>B's</span>
  <span m='1777350'>and</span> <span m='1777440'>all</span> <span m='1777600'>M's.</span>
  <span m='1778750'>And</span> <span m='1778850'>so</span> <span m='1779090'>it</span>
  <span m='1780440'>feels</span> <span m='1780830'>like</span> <span m='1781500'>you</span>
  <span m='1781790'>adapt</span> <span m='1782510'>optimally,</span> <span m='1783080'>whatever</span>
  <span m='1783380'>that</span> <span m='1783530'>means.</span> </p><p><span m='1787110'>In</span>
  <span m='1787260'>some</span> <span m='1787440'>sense,</span> <span m='1787780'>the</span>
  <span m='1787800'>most</span> <span m='1788040'>surprising</span> <span m='1788550'>thing</span>
  <span m='1788730'>about</span> <span m='1788970'>the</span> <span m='1789090'>cache-oblivious</span>
  <span m='1790170'>world</span> <span m='1790470'>is</span> <span m='1790590'>that</span>
  <span m='1790710'>it's</span> <span m='1790950'>possible.</span> <span m='1792600'>You</span>
  <span m='1792780'>can</span> <span m='1793650'>work</span> <span m='1793920'>in</span>
  <span m='1794010'>this</span> <span m='1794160'>model</span> <span m='1795060'>and</span>
  <span m='1795240'>get</span> <span m='1795480'>basically</span> <span m='1796200'>all</span>
  <span m='1796470'>of</span> <span m='1796590'>these</span> <span m='1796770'>results.</span>
  <span m='1798520'>So</span> <span m='1798630'>let</span> <span m='1798810'>me</span>
  <span m='1801240'>go</span> <span m='1801420'>over</span> <span m='1801630'>these</span>
  <span m='1801780'>results.</span> </p><p></p><p><span m='1824280'>So</span> <span
  m='1824360'>in</span> <span m='1824420'>the</span> <span m='1824480'>cache-oblivious</span>
  <span m='1825020'>model,</span> <span m='1825380'>of</span> <span m='1825470'>course</span>
  <span m='1825710'>scans</span> <span m='1826190'>are</span> <span m='1826280'>still</span>
  <span m='1826550'>good.</span> <span m='1826850'>Scans</span> <span m='1827660'>didn't</span>
  <span m='1828290'>assume</span> <span m='1828620'>anything</span> <span m='1829070'>about</span>
  <span m='1831620'>block</span> <span m='1831920'>size</span> <span m='1832310'>here,</span>
  <span m='1832520'>except</span> <span m='1832850'>in</span> <span m='1832940'>the</span>
  <span m='1833030'>analysis.</span> <span m='1834170'>Scanning</span> <span m='1834560'>was</span>
  <span m='1834680'>just</span> <span m='1834920'>a</span> <span m='1834980'>sequential</span>
  <span m='1835520'>read.</span> </p><p><span m='1836450'>In</span> <span m='1836600'>general,</span>
  <span m='1837170'>we</span> <span m='1837320'>can</span> <span m='1837470'>do</span>
  <span m='1837770'>constant</span> <span m='1838280'>number</span> <span m='1838610'>of</span>
  <span m='1838700'>scans.</span> <span m='1840770'>Some</span> <span m='1841010'>of</span>
  <span m='1841070'>them</span> <span m='1841160'>can</span> <span m='1841250'>go</span>
  <span m='1841370'>to</span> <span m='1841460'>left.</span> <span m='1841760'>Some</span>
  <span m='1841940'>of</span> <span m='1842000'>them</span> <span m='1842120'>could</span>
  <span m='1842240'>go</span> <span m='1842390'>to</span> <span m='1842450'>the</span>
  <span m='1842570'>right.</span> <span m='1843200'>Some</span> <span m='1843290'>of
  them</span> <span m='1843530'>could</span> <span m='1843650'>be</span> <span m='1843770'>reading.</span>
  <span m='1844070'>Some</span> <span m='1844220'>of</span> <span m='1844280'>them</span>
  <span m='1844400'>could</span> <span m='1844550'>be</span> <span m='1844670'>writing.</span>
  </p><p><span m='1845530'>That's</span> <span m='1845690'>the</span> <span m='1845730'>general</span>
  <span m='1846440'>form</span> <span m='1846670'>of</span> <span m='1846750'>scan.</span>
  <span m='1847070'>But</span> <span m='1847190'>all</span> <span m='1847400'>of</span>
  <span m='1847460'>that</span> <span m='1847640'>will</span> <span m='1847760'>take</span>
  <span m='1850550'>order</span> <span m='1850760'>N</span> <span m='1850910'>over
  B</span> <span m='1851150'>ceiling.</span> </p><p><span m='1859670'>OK.</span> <span
  m='1860350'>Search.</span> <span m='1865010'>This</span> <span m='1865250'>is</span>
  <span m='1865610'>what</span> <span m='1865820'>we're</span> <span m='1865920'>going</span>
  <span m='1866060'>to</span> <span m='1866120'>be</span> <span m='1866240'>focused</span>
  <span m='1866660'>on</span> <span m='1866840'>today.</span> <span m='1869840'>You</span>
  <span m='1869990'>can</span> <span m='1870140'>achieve</span> <span m='1871790'>order</span>
  <span m='1872330'>log</span> <span m='1873700'>base</span> <span m='1874020'>B</span>
  <span m='1874275'>plus</span> <span m='1874530'>1</span> <span m='1874910'>of</span>
  <span m='1875120'>N</span> <span m='1878090'>search,</span> <span m='1879890'>insert,</span>
  <span m='1880310'>and</span> <span m='1880460'>delete.</span> <span m='1887990'>Just</span>
  <span m='1888260'>like</span> <span m='1888440'>B-trees,</span> <span m='1889460'>but</span>
  <span m='1889610'>without</span> <span m='1889970'>knowing</span> <span m='1890270'>what</span>
  <span m='1890420'>B</span> <span m='1890630'>is.</span> <span m='1892990'>We're</span>
  <span m='1893140'>going</span> <span m='1893240'>to</span> <span m='1893360'>do</span>
  <span m='1893570'>most</span> <span m='1893900'>of</span> <span m='1893960'>that</span>
  <span m='1894140'>today.</span> </p><p><span m='1897560'>What's</span> <span m='1897770'>next?</span>
  <span m='1897950'>Sorting.</span> <span m='1899060'>Sorting,</span> <span m='1899510'>you</span>
  <span m='1899600'>can</span> <span m='1899720'>do</span> <span m='1899840'>the</span>
  <span m='1899900'>same</span> <span m='1900140'>bound.</span> <span m='1903050'>That</span>
  <span m='1903230'>we'll</span> <span m='1903320'>see</span> <span m='1903560'>next</span>
  <span m='1903800'>lecture.</span> </p><p><span m='1915430'>OK.</span> <span m='1916830'>Next</span>
  <span m='1917370'>is</span> <span m='1918480'>permuting.</span> <span m='1927690'>Here</span>
  <span m='1928240'>there's</span> <span m='1928450'>actually</span> <span m='1928690'>a</span>
  <span m='1928720'>negative</span> <span m='1929060'>result,</span> <span m='1930310'>which</span>
  <span m='1930380'>is</span> <span m='1930470'>that</span> <span m='1930590'>you</span>
  <span m='1930710'>can't</span> <span m='1931040'>do</span> <span m='1931220'>the</span>
  <span m='1931400'>min.</span> <span m='1934080'>It</span> <span m='1934540'>doesn't</span>
  <span m='1934730'>say</span> <span m='1935090'>exactly</span> <span m='1935600'>what</span>
  <span m='1935720'>you</span> <span m='1935900'>can</span> <span m='1936230'>do.</span>
  </p><p><span m='1937970'>In</span> <span m='1938120'>particular,</span> <span m='1938540'>we</span>
  <span m='1938660'>can</span> <span m='1938780'>certainly</span> <span m='1939240'>permute</span>
  <span m='1939440'>as</span> <span m='1939560'>quickly</span> <span m='1939830'>as</span>
  <span m='1939920'>we</span> <span m='1940010'>can</span> <span m='1940170'>sort.</span>
  <span m='1941030'>And</span> <span m='1941630'>we</span> <span m='1941780'>can</span>
  <span m='1941960'>permute--</span> <span m='1943100'>we</span> <span m='1943250'>can</span>
  <span m='1943430'>achieve</span> <span m='1943760'>this</span> <span m='1943940'>min</span>
  <span m='1944210'>in</span> <span m='1944330'>a</span> <span m='1944600'>weird</span>
  <span m='1944900'>sense,</span> <span m='1945260'>in</span> <span m='1945350'>that</span>
  <span m='1945470'>we</span> <span m='1945590'>can</span> <span m='1945710'>achieve
  N</span> <span m='1946730'>and</span> <span m='1947000'>we</span> <span m='1947120'>can</span>
  <span m='1947240'>achieve</span> <span m='1947690'>the</span> <span m='1947810'>sorting</span>
  <span m='1948130'>bound</span> <span m='1948490'>for</span> <span m='1948710'>permutation</span>
  <span m='1949800'>in</span> <span m='1949880'>the</span> <span m='1949970'>cache-oblivious</span>
  <span m='1950420'>model,</span> <span m='1950720'>either</span> <span m='1951020'>one,</span>
  <span m='1951320'>but</span> <span m='1951470'>not</span> <span m='1951740'>both</span>
  <span m='1952160'>with</span> <span m='1952340'>min</span> <span m='1952580'>around</span>
  <span m='1952880'>them,</span> <span m='1953860'>because</span> <span m='1954320'>to</span>
  <span m='1954500'>know</span> <span m='1954710'>which</span> <span m='1954890'>one</span>
  <span m='1955040'>to</span> <span m='1955100'>apply,</span> <span m='1955430'>you</span>
  <span m='1955550'>need</span> <span m='1955730'>to</span> <span m='1955820'>know</span>
  <span m='1956000'>how</span> <span m='1956300'>B and M</span> <span m='1956660'>relate</span>
  <span m='1956930'>to</span> <span m='1957080'>N,</span> <span m='1957660'>and</span>
  <span m='1957950'>you</span> <span m='1958130'>don't</span> <span m='1958400'>here.</span>
  </p><p><span m='1959540'>And</span> <span m='1959660'>so</span> <span m='1959750'>there's</span>
  <span m='1959960'>a</span> <span m='1960020'>lower</span> <span m='1960170'>bound</span>
  <span m='1960380'>saying</span> <span m='1960680'>you</span> <span m='1960770'>really</span>
  <span m='1961070'>can't</span> <span m='1961430'>achieve</span> <span m='1961790'>this</span>
  <span m='1961970'>bound,</span> <span m='1962360'>even</span> <span m='1962600'>up</span>
  <span m='1962720'>to</span> <span m='1962810'>constant</span> <span m='1963140'>factors.</span>
  <span m='1964640'>But</span> <span m='1964790'>it</span> <span m='1964880'>doesn't</span>
  <span m='1965120'>explicitly</span> <span m='1965630'>say</span> <span m='1965870'>anything</span>
  <span m='1966230'>more</span> <span m='1966440'>than</span> <span m='1966590'>that.</span>
  <span m='1968460'>So</span> <span m='1968720'>a</span> <span m='1968750'>little</span>
  <span m='1969020'>awkward.</span> </p><p><span m='1969770'>Fortunately,</span> <span
  m='1970190'>permuting</span> <span m='1970670'>isn't</span> <span m='1970940'>that</span>
  <span m='1971150'>big</span> <span m='1971330'>a</span> <span m='1971360'>deal.</span>
  <span m='1972650'>And</span> <span m='1973040'>most</span> <span m='1973430'>of</span>
  <span m='1973490'>the</span> <span m='1973670'>time</span> <span m='1974570'>the</span>
  <span m='1974690'>sorting</span> <span m='1974990'>bound</span> <span m='1975200'>is</span>
  <span m='1975320'>much</span> <span m='1975500'>faster</span> <span m='1975890'>than</span>
  <span m='1976100'>the</span> <span m='1976250'>end</span> <span m='1976450'>bound,</span>
  <span m='1976970'>so</span> <span m='1978080'>not</span> <span m='1978230'>so</span>
  <span m='1978350'>bad.</span> <span m='1978770'>But</span> <span m='1980180'>slightly</span>
  <span m='1980540'>awkward.</span> <span m='1980900'>So</span> <span m='1981020'>there's</span>
  <span m='1981170'>some</span> <span m='1981350'>things</span> <span m='1981560'>you</span>
  <span m='1981620'>can't</span> <span m='1981890'>do.</span> <span m='1982310'>This</span>
  <span m='1982460'>was</span> <span m='1982550'>the</span> <span m='1982670'>first</span>
  <span m='1982880'>negative</span> <span m='1983210'>result</span> <span m='1983640'>in</span>
  <span m='1983740'>cache-oblivious.</span> </p><p><span m='1984800'>Another</span>
  <span m='1985100'>fun</span> <span m='1985370'>negative</span> <span m='1985760'>result</span>
  <span m='1986120'>is</span> <span m='1986270'>actually</span> <span m='1986600'>in</span>
  <span m='1986670'>search</span> <span m='1987020'>trees.</span> <span m='1988460'>You</span>
  <span m='1988610'>might</span> <span m='1988820'>ask,</span> <span m='1989930'>what</span>
  <span m='1990260'>is</span> <span m='1990410'>this</span> <span m='1990590'>constant</span>
  <span m='1991010'>factor</span> <span m='1991400'>here</span> <span m='1992690'>in</span>
  <span m='1992810'>front</span> <span m='1993050'>of</span> <span m='1993140'>the</span>
  <span m='1993230'>log</span> <span m='1993480'>base</span> <span m='1993700'>B</span>
  <span m='1993860'>plus</span> <span m='1994100'>1</span> <span m='1994280'>of</span>
  <span m='1994420'>N?</span> <span m='1995570'>And</span> <span m='1995780'>for</span>
  <span m='1995960'>B-trees,</span> <span m='1998060'>the</span> <span m='1998330'>constant</span>
  <span m='1998670'>factor</span> <span m='1999060'>is</span> <span m='1999200'>essentially</span>
  <span m='1999620'>1.</span> <span m='2003760'>You</span> <span m='2003880'>get</span>
  <span m='2004090'>1</span> <span m='2004450'>times</span> <span m='2004810'>log</span>
  <span m='2005050'>base</span> <span m='2005260'>B</span> <span m='2005410'>plus</span>
  <span m='2005620'>1</span> <span m='2005800'>of N.</span> </p><p><span m='2008360'>In</span>
  <span m='2008590'>cache-oblivious</span> <span m='2009370'>world,</span> <span m='2009670'>you</span>
  <span m='2009790'>can</span> <span m='2009910'>prove</span> <span m='2010240'>that</span>
  <span m='2010390'>1</span> <span m='2010750'>is</span> <span m='2010960'>unattainable</span>
  <span m='2012520'>and</span> <span m='2012700'>the</span> <span m='2012820'>best</span>
  <span m='2013150'>possible</span> <span m='2013870'>constant</span> <span m='2014260'>factor</span>
  <span m='2014710'>is</span> <span m='2015070'>log</span> <span m='2015790'>base</span>
  <span m='2016090'>2</span> <span m='2016640'>of</span> <span m='2016940'>e,</span>
  <span m='2017600'>which</span> <span m='2017910'>was</span> <span m='2018010'>like</span>
  <span m='2018190'>1.44.</span> <span m='2020450'>So</span> <span m='2020560'>that</span>
  <span m='2020770'>is</span> <span m='2020920'>the</span> <span m='2021040'>right</span>
  <span m='2021280'>answer</span> <span m='2021640'>for</span> <span m='2021790'>the</span>
  <span m='2021910'>constant.</span> <span m='2022780'>Today</span> <span m='2023080'>we'll</span>
  <span m='2023230'>get</span> <span m='2023380'>a</span> <span m='2023410'>constant</span>
  <span m='2023800'>here</span> <span m='2023950'>of</span> <span m='2024010'>4.</span>
  <span m='2026140'>This</span> <span m='2026290'>is</span> <span m='2026410'>for</span>
  <span m='2026570'>search.</span> <span m='2029560'>But</span> <span m='2030010'>4</span>
  <span m='2030340'>has</span> <span m='2030490'>since</span> <span m='2030700'>been</span>
  <span m='2030820'>improved</span> <span m='2031180'>to</span> <span m='2031390'>1.44,</span>
  <span m='2032320'>so</span> <span m='2032500'>a</span> <span m='2032560'>tiny</span>
  <span m='2032950'>separation</span> <span m='2033490'>there</span> <span m='2033640'>between</span>
  <span m='2034420'>cache-oblivious</span> <span m='2035620'>and</span> <span m='2035860'>external</span>
  <span m='2036220'>memory.</span> </p><p><span m='2039470'>Let's</span> <span m='2039520'>see.</span>
  <span m='2041500'>One</span> <span m='2041740'>more</span> <span m='2041980'>thing.</span>
  <span m='2059620'>Continuing</span> <span m='2060370'>over</span> <span m='2060699'>here</span>
  <span m='2062590'>is</span> <span m='2063370'>priority</span> <span m='2063790'>queue.</span>
  <span m='2066810'>Cache-oblivious</span> <span m='2068710'>we</span> <span m='2068889'>can</span>
  <span m='2069070'>do</span> <span m='2070150'>in</span> <span m='2070420'>the</span>
  <span m='2070540'>optimal</span> <span m='2071020'>time</span> <span m='2071469'>1</span>
  <span m='2071650'>over</span> <span m='2071880'>B</span> <span m='2072699'>log</span>
  <span m='2073090'>base</span> <span m='2073540'>M</span> <span m='2073719'>over</span>
  <span m='2074150'>B</span> <span m='2076630'>of</span> <span m='2077126'>N</span>
  <span m='2077622'>over B.</span> </p><p><span m='2088050'>Only</span> <span m='2088350'>catch</span>
  <span m='2088650'>with</span> <span m='2088739'>that</span> <span m='2088889'>result</span>
  <span m='2090659'>is</span> <span m='2090960'>it</span> <span m='2091080'>assumes</span>
  <span m='2091530'>something</span> <span m='2091830'>called</span> <span m='2092040'>the</span>
  <span m='2092520'>tall</span> <span m='2092820'>cache</span> <span m='2093179'>assumption.</span>
  <span m='2105640'>Let's</span> <span m='2105880'>see</span> <span m='2106060'>what
  I</span> <span m='2106660'>want</span> <span m='2106810'>to</span> <span m='2106870'>say</span>
  <span m='2107110'>here.</span> <span m='2112740'>We'll</span> <span m='2112880'>say</span>
  <span m='2113130'>M</span> <span m='2113430'>is</span> <span m='2114020'>omega</span>
  <span m='2116580'>B</span> <span m='2117090'>to</span> <span m='2117270'>the</span>
  <span m='2117420'>1</span> <span m='2117750'>plus</span> <span m='2118230'>epsilon.</span>
  <span m='2119270'>That's</span> <span m='2119740'>an</span> <span m='2120210'>ugly-looking</span>
  <span m='2121210'>omega.</span> </p><p><span m='2126690'>Certainly</span> <span
  m='2127080'>M is</span> <span m='2127350'>at</span> <span m='2127440'>least</span>
  <span m='2127650'>B.</span> <span m='2127980'>If</span> <span m='2128100'>you</span>
  <span m='2128190'>have</span> <span m='2128400'>one</span> <span m='2128800'>cache</span>
  <span m='2129095'>line,</span> <span m='2129870'>you</span> <span m='2130140'>have</span>
  <span m='2130410'>M</span> <span m='2130620'>equal</span> <span m='2130890'>B.</span>
  <span m='2131850'>But</span> <span m='2131970'>we'd</span> <span m='2132120'>like</span>
  <span m='2132330'>M</span> <span m='2132480'>to</span> <span m='2132600'>be</span>
  <span m='2132720'>a</span> <span m='2132750'>little</span> <span m='2133020'>bit</span>
  <span m='2133170'>bigger</span> <span m='2133440'>than</span> <span m='2133620'>B.</span>
  <span m='2133860'>We'd</span> <span m='2134010'>like</span> <span m='2134280'>the</span>
  <span m='2134580'>cache</span> <span m='2135030'>to</span> <span m='2135150'>be--</span>
  <span m='2136350'>if</span> <span m='2136530'>M</span> <span m='2136740'>was</span>
  <span m='2136920'>at</span> <span m='2136980'>least</span> <span m='2137160'>B</span>
  <span m='2137340'>squared,</span> <span m='2138090'>then</span> <span m='2138630'>the</span>
  <span m='2138750'>height</span> <span m='2139080'>of</span> <span m='2139230'>the</span>
  <span m='2139320'>cache</span> <span m='2139620'>would</span> <span m='2139710'>be</span>
  <span m='2139890'>at</span> <span m='2139980'>least</span> <span m='2140340'>as</span>
  <span m='2140460'>big</span> <span m='2140700'>as</span> <span m='2140850'>the</span>
  <span m='2140970'>width</span> <span m='2141210'>of</span> <span m='2141270'>the</span>
  <span m='2141390'>cache,</span> <span m='2141780'>hence</span> <span m='2142080'>tall</span>
  <span m='2142440'>cache.</span> </p><p><span m='2143400'>But</span> <span m='2143520'>we</span>
  <span m='2143640'>don't</span> <span m='2143790'>even</span> <span m='2144000'>need</span>
  <span m='2144150'>M</span> <span m='2144360'>equal</span> <span m='2144600'>to</span>
  <span m='2144690'>B</span> <span m='2144840'>squared.</span> <span m='2145200'>Just</span>
  <span m='2145650'>M to</span> <span m='2145920'>the--</span> <span m='2147210'>M</span>
  <span m='2147480'>equaling</span> <span m='2147870'>B</span> <span m='2148170'>to</span>
  <span m='2148230'>the</span> <span m='2148320'>1.001</span> <span m='2149610'>would</span>
  <span m='2149760'>be</span> <span m='2149910'>enough.</span> <span m='2151510'>Then</span>
  <span m='2151650'>you</span> <span m='2151770'>can</span> <span m='2151920'>get</span>
  <span m='2152370'>this</span> <span m='2152730'>result.</span> </p><p><span m='2152985'>And</span>
  <span m='2153240'>there's</span> <span m='2153510'>a</span> <span m='2153570'>theorem</span>
  <span m='2153840'>that</span> <span m='2154440'>shows</span> <span m='2155460'>for</span>
  <span m='2155610'>cache-oblivious</span> <span m='2156240'>you</span> <span m='2156420'>need</span>
  <span m='2156720'>to</span> <span m='2156900'>assume</span> <span m='2157170'>this</span>
  <span m='2157320'>tall</span> <span m='2157530'>cache</span> <span m='2157830'>assumption.</span>
  <span m='2158730'>You</span> <span m='2158850'>cannot</span> <span m='2159270'>achieve</span>
  <span m='2159690'>this</span> <span m='2159870'>bound</span> <span m='2160290'>without</span>
  <span m='2160620'>it.</span> <span m='2163010'>But</span> <span m='2163200'>this</span>
  <span m='2163380'>is</span> <span m='2163500'>usually</span> <span m='2163830'>true</span>
  <span m='2164130'>for</span> <span m='2164400'>real</span> <span m='2164640'>caches,</span>
  <span m='2165630'>so</span> <span m='2166620'>life</span> <span m='2166800'>is</span>
  <span m='2166920'>good.</span> </p><p><span m='2169020'>All</span> <span m='2169080'>right.</span>
  <span m='2169260'>So</span> <span m='2169380'>that's</span> <span m='2169650'>a</span>
  <span m='2169740'>quick</span> <span m='2169950'>summary</span> <span m='2170460'>of</span>
  <span m='2170700'>cache-oblivious</span> <span m='2172530'>results.</span> <span
  m='2173060'>Any</span> <span m='2173220'>questions</span> <span m='2173610'>about</span>
  <span m='2173850'>those?</span> </p><p><span m='2177090'>Then</span> <span m='2177420'>we</span>
  <span m='2177630'>proceed</span> <span m='2179250'>into</span> <span m='2179640'>achieving</span>
  <span m='2181350'>search</span> <span m='2181680'>trees</span> <span m='2183990'>log</span>
  <span m='2184300'>base B</span> <span m='2184680'>of N</span> <span m='2184950'>performance</span>
  <span m='2186310'>cache-obliviously.</span> <span m='2187760'>Make</span> <span
  m='2187950'>it</span> <span m='2188010'>interesting,</span> <span m='2188940'>because</span>
  <span m='2189120'>external</span> <span m='2189480'>memory,</span> <span m='2189840'>we</span>
  <span m='2189960'>already</span> <span m='2190200'>know</span> <span m='2190380'>how</span>
  <span m='2190470'>to</span> <span m='2190560'>do</span> <span m='2190740'>it</span>
  <span m='2190860'>with</span> <span m='2191040'>a</span> <span m='2191100'>B-tree.</span>
  </p><p><span m='2200020'>So</span> <span m='2200290'>we</span> <span m='2200440'>did</span>
  <span m='2200680'>both</span> <span m='2200980'>models,</span> <span m='2202420'>cache-oblivious</span>
  <span m='2203080'>B-tree</span> <span m='2204166'>is</span> <span m='2204592'>what</span>
  <span m='2205020'>remain.</span> <span m='2211890'>This</span> <span m='2212100'>was</span>
  <span m='2212340'>the</span> <span m='2212460'>first</span> <span m='2212790'>result</span>
  <span m='2213180'>in</span> <span m='2213420'>cache-oblivious</span> <span m='2214080'>data</span>
  <span m='2214290'>structures.</span> <span m='2215490'>I'm</span> <span m='2215580'>going</span>
  <span m='2215670'>to</span> <span m='2215710'>start</span> <span m='2216060'>with</span>
  <span m='2217410'>the</span> <span m='2217530'>static</span> <span m='2218100'>problem.</span>
  </p><p><span m='2221700'>Cache-oblivious</span> <span m='2227460'>static</span>
  <span m='2230190'>search</span> <span m='2230550'>trees.</span> <span m='2233900'>This</span>
  <span m='2234090'>was</span> <span m='2234240'>actually</span> <span m='2234680'>in
  a</span> <span m='2235170'>MEng</span> <span m='2235530'>thesis</span> <span m='2236100'>here</span>
  <span m='2237000'>by</span> <span m='2237150'>Harold</span> <span m='2237420'>Prokop.</span>
  <span m='2240420'>So</span> <span m='2241080'>the</span> <span m='2241260'>idea</span>
  <span m='2241440'>is</span> <span m='2241560'>very</span> <span m='2241680'>simple.</span>
  <span m='2243690'>We</span> <span m='2243780'>can't</span> <span m='2243990'>use</span>
  <span m='2244110'>B-trees</span> <span m='2244590'>because</span> <span m='2244770'>we</span>
  <span m='2244860'>don't</span> <span m='2245010'>know</span> <span m='2245100'>what</span>
  <span m='2245190'>B</span> <span m='2245370'>is,</span> <span m='2246060'>so</span>
  <span m='2246270'>we'll</span> <span m='2246390'>use</span> <span m='2247050'>binary</span>
  <span m='2247380'>search</span> <span m='2247620'>trees.</span> <span m='2248640'>Those</span>
  <span m='2249360'>have</span> <span m='2249480'>served</span> <span m='2249750'>us</span>
  <span m='2249870'>well</span> <span m='2250890'>so</span> <span m='2251100'>far.</span>
  </p><p><span m='2251490'>So</span> <span m='2252270'>let's</span> <span m='2252450'>use</span>
  <span m='2253440'>a</span> <span m='2253620'>balanced</span> <span m='2255030'>binary</span>
  <span m='2255330'>search</span> <span m='2255620'>tree.</span> <span m='2256085'>And</span>
  <span m='2256350'>because</span> <span m='2256530'>it's</span> <span m='2256630'>static,</span>
  <span m='2257480'>might</span> <span m='2257670'>as</span> <span m='2257760'>well</span>
  <span m='2257850'>assume</span> <span m='2258090'>it's</span> <span m='2258180'>a</span>
  <span m='2258240'>perfect</span> <span m='2259500'>balanced</span> <span m='2260040'>binary</span>
  <span m='2260340'>search</span> <span m='2260610'>tree.</span> <span m='2261760'>Let</span>
  <span m='2261780'>me</span> <span m='2261900'>draw</span> <span m='2262140'>one</span>
  <span m='2262320'>over</span> <span m='2262500'>here.</span> <span m='2278610'>I'll</span>
  <span m='2278875'>draw my</span> <span m='2279140'>favorite one.</span> </p><p><span
  m='2292390'>So</span> <span m='2292630'>how</span> <span m='2292750'>do</span> <span
  m='2292840'>you</span> <span m='2292960'>search</span> <span m='2293260'>in</span>
  <span m='2293380'>a</span> <span m='2293920'>binary</span> <span m='2294220'>search</span>
  <span m='2294490'>tree?</span> <span m='2295960'>Binary</span> <span m='2296290'>search.</span>
  <span m='2298150'>Our</span> <span m='2298270'>algorithm</span> <span m='2298690'>is</span>
  <span m='2298810'>fixed.</span> <span m='2299950'>So</span> <span m='2300220'>the</span>
  <span m='2300460'>only</span> <span m='2300820'>flexibility</span> <span m='2301540'>we</span>
  <span m='2301690'>have</span> <span m='2302950'>is</span> <span m='2303130'>how</span>
  <span m='2303400'>we</span> <span m='2303580'>map</span> <span m='2303970'>this</span>
  <span m='2304270'>tree</span> <span m='2305380'>into</span> <span m='2306780'>the</span>
  <span m='2306880'>sequential</span> <span m='2307540'>order</span> <span m='2307930'>in</span>
  <span m='2308110'>memory.</span> <span m='2309070'>Memory</span> <span m='2309460'>is</span>
  <span m='2310180'>an</span> <span m='2310300'>array.</span> </p><p><span m='2311800'>So</span>
  <span m='2311890'>for</span> <span m='2312010'>each</span> <span m='2312250'>of</span>
  <span m='2312310'>these</span> <span m='2312520'>nodes,</span> <span m='2313450'>we</span>
  <span m='2313570'>get</span> <span m='2313750'>to</span> <span m='2313930'>assign</span>
  <span m='2314620'>some</span> <span m='2315070'>order,</span> <span m='2315910'>some</span>
  <span m='2316120'>position</span> <span m='2317320'>in</span> <span m='2317590'>the</span>
  <span m='2318820'>array</span> <span m='2319090'>of</span> <span m='2319180'>memory.</span>
  <span m='2320080'>And</span> <span m='2320230'>then</span> <span m='2320500'>each</span>
  <span m='2320740'>of</span> <span m='2320830'>these</span> <span m='2321100'>child</span>
  <span m='2321460'>pointers,</span> <span m='2323800'>that</span> <span m='2323950'>changes</span>
  <span m='2324310'>where</span> <span m='2324430'>they</span> <span m='2324550'>point</span>
  <span m='2324790'>to.</span> <span m='2326610'>And</span> <span m='2326740'>now</span>
  <span m='2326890'>cache-obliviously,</span> <span m='2327940'>you're</span> <span
  m='2328180'>going</span> <span m='2328330'>to</span> <span m='2328420'>follow</span>
  <span m='2329200'>some</span> <span m='2329540'>root</span> <span m='2329710'>to</span>
  <span m='2329830'>leaf</span> <span m='2330070'>path.</span> <span m='2330730'>You</span>
  <span m='2330820'>don't</span> <span m='2330970'>know</span> <span m='2331120'>which</span>
  <span m='2331360'>one.</span> <span m='2332320'>All</span> <span m='2332620'>of</span>
  <span m='2332740'>them</span> <span m='2335050'>are</span> <span m='2335170'>visiting</span>
  <span m='2335560'>nodes</span> <span m='2335800'>in</span> <span m='2335890'>some</span>
  <span m='2336130'>order,</span> <span m='2336460'>which</span> <span m='2336640'>looks</span>
  <span m='2336910'>pretty</span> <span m='2337180'>random.</span> <span m='2338260'>In</span>
  <span m='2338410'>the</span> <span m='2338680'>array</span> <span m='2338980'>of</span>
  <span m='2339070'>memory,</span> <span m='2339460'>it's</span> <span m='2339610'>going</span>
  <span m='2339760'>to</span> <span m='2339850'>be</span> <span m='2340870'>some</span>
  <span m='2341200'>sequence</span> <span m='2343000'>like</span> <span m='2343210'>this.</span>
  </p><p><span m='2345040'>We</span> <span m='2345220'>would</span> <span m='2345370'>like</span>
  <span m='2345610'>the</span> <span m='2345700'>number</span> <span m='2346090'>of</span>
  <span m='2346180'>blocks</span> <span m='2347380'>that</span> <span m='2347500'>contain</span>
  <span m='2347950'>those</span> <span m='2348190'>nodes</span> <span m='2348640'>to</span>
  <span m='2348790'>be</span> <span m='2348940'>relatively</span> <span m='2349540'>small</span>
  <span m='2351670'>somehow.</span> <span m='2356510'>So</span> <span m='2356560'>that's</span>
  <span m='2356800'>the</span> <span m='2357250'>hard</span> <span m='2357430'>part.</span>
  <span m='2357820'>Now,</span> <span m='2357940'>you</span> <span m='2358090'>could</span>
  <span m='2358210'>try</span> <span m='2359020'>level</span> <span m='2359350'>order.</span>
  <span m='2359680'>You</span> <span m='2359830'>could</span> <span m='2359920'>try</span>
  <span m='2361060'>in</span> <span m='2361240'>order,</span> <span m='2361770'>pre</span>
  <span m='2362120'>order, post</span> <span m='2362380'>order.</span> <span m='2362950'>All</span>
  <span m='2363220'>of</span> <span m='2363340'>them</span> <span m='2363580'>fail.</span>
  </p><p><span m='2365560'>The</span> <span m='2365650'>right</span> <span m='2365920'>order</span>
  <span m='2366850'>is</span> <span m='2367060'>something</span> <span m='2367390'>called</span>
  <span m='2368410'>van</span> <span m='2368740'>Emde</span> <span m='2368820'>Boas</span>
  <span m='2369160'>order.</span> <span m='2384980'>So</span> <span m='2385000'>let's</span>
  <span m='2385150'>say</span> <span m='2385300'>there</span> <span m='2385480'>are
  N</span> <span m='2385900'>nodes.</span> <span m='2387730'>What</span> <span m='2387910'>we're</span>
  <span m='2388030'>going</span> <span m='2388130'>to</span> <span m='2388240'>do</span>
  <span m='2389350'>is</span> <span m='2390560'>carve</span> <span m='2391900'>the</span>
  <span m='2392020'>tree</span> <span m='2393910'>at</span> <span m='2394230'>the</span>
  <span m='2394390'>middle</span> <span m='2394630'>level</span> <span m='2395770'>of</span>
  <span m='2395920'>edges.</span> </p><p><span m='2405110'>So</span> <span m='2406880'>we</span>
  <span m='2406940'>have</span> <span m='2407080'>a</span> <span m='2407140'>tree</span>
  <span m='2407320'>like</span> <span m='2407560'>this.</span> <span m='2408720'>We</span>
  <span m='2408820'>divide</span> <span m='2409180'>in</span> <span m='2409270'>the</span>
  <span m='2409390'>middle.</span> <span m='2410470'>Leaves</span> <span m='2410740'>us</span>
  <span m='2410890'>with</span> <span m='2411070'>the</span> <span m='2411160'>top</span>
  <span m='2411460'>part</span> <span m='2412460'>and</span> <span m='2412720'>many</span>
  <span m='2413050'>bottom</span> <span m='2413380'>parts.</span> </p><p><span m='2415750'>There's</span>
  <span m='2415900'>going</span> <span m='2416050'>to</span> <span m='2416140'>be</span>
  <span m='2416590'>about</span> <span m='2417040'>square</span> <span m='2417480'>root</span>
  <span m='2417610'>of</span> <span m='2417730'>N</span> <span m='2418660'>nodes</span>
  <span m='2419290'>in</span> <span m='2419500'>each</span> <span m='2419740'>of</span>
  <span m='2419800'>these</span> <span m='2420040'>little</span> <span m='2420250'>triangles,</span>
  <span m='2422110'>roughly</span> <span m='2422410'>speaking.</span> <span m='2423560'>The</span>
  <span m='2423660'>number</span> <span m='2423820'>of</span> <span m='2423910'>triangles</span>
  <span m='2424360'>down</span> <span m='2424600'>here</span> <span m='2425410'>is</span>
  <span m='2425530'>going</span> <span m='2425680'>to</span> <span m='2425770'>be</span>
  <span m='2426040'>roughly</span> <span m='2426520'>square</span> <span m='2426980'>root</span>
  <span m='2427150'>of</span> <span m='2427360'>N--</span> <span m='2428150'>I</span>
  <span m='2428530'>think</span> <span m='2429100'>I</span> <span m='2429220'>have</span>
  <span m='2429460'>written</span> <span m='2429670'>here</span> <span m='2430020'>square
  root of N</span> <span m='2430480'>plus</span> <span m='2430860'>1.</span> <span
  m='2431605'>It's a</span> <span m='2431950'>little</span> <span m='2432760'>overestimate,</span>
  <span m='2433510'>because</span> <span m='2433780'>I</span> <span m='2433990'>multiply</span>
  <span m='2434440'>those</span> <span m='2434620'>two</span> <span m='2434740'>numbers,</span>
  <span m='2435080'>it's</span> <span m='2435160'>bigger</span> <span m='2435430'>than</span>
  <span m='2435560'>N.</span> </p><p><span m='2435910'>But</span> <span m='2436180'>it's</span>
  <span m='2436390'>roughly</span> <span m='2436750'>that.</span> <span m='2437500'>If</span>
  <span m='2437590'>there</span> <span m='2437710'>were</span> <span m='2437800'>root</span>
  <span m='2438040'>N</span> <span m='2438320'>nodes up</span> <span m='2438480'>here,</span>
  <span m='2438670'>then</span> <span m='2438790'>there</span> <span m='2438880'>would</span>
  <span m='2439060'>be</span> <span m='2439210'>square</span> <span m='2439420'>root
  of</span> <span m='2439720'>N</span> <span m='2439870'>plus</span> <span m='2440170'>1</span>
  <span m='2440950'>children,</span> <span m='2441670'>and</span> <span m='2442000'>square
  root of</span> <span m='2442320'>N</span> <span m='2442480'>plus</span> <span m='2442720'>1</span>
  <span m='2442870'>things</span> <span m='2443110'>down</span> <span m='2443290'>there.</span>
  <span m='2444220'>So</span> <span m='2444340'>roughly,</span> <span m='2444780'>root
  N</span> <span m='2446050'>different</span> <span m='2446320'>things,</span> <span
  m='2447090'>each</span> <span m='2447280'>of</span> <span m='2447370'>size</span>
  <span m='2447640'>root</span> <span m='2447880'>N.</span> </p><p><span m='2449140'>Then</span>
  <span m='2449320'>what</span> <span m='2449440'>we</span> <span m='2449560'>do</span>
  <span m='2450730'>is</span> <span m='2451060'>recursively</span> <span m='2455770'>lay</span>
  <span m='2456040'>out</span> <span m='2456630'>all</span> <span m='2457720'>those</span>
  <span m='2457930'>triangles</span> <span m='2461670'>of</span> <span m='2461770'>size</span>
  <span m='2462200'>roughly</span> <span m='2462370'>squared</span> <span m='2462670'>of</span>
  <span m='2462790'>N,</span> <span m='2465280'>and</span> <span m='2465400'>then</span>
  <span m='2465550'>concatenate.</span> <span m='2469160'>It's</span> <span m='2469300'>a</span>
  <span m='2469360'>very</span> <span m='2469630'>simple</span> <span m='2469960'>idea.</span>
  <span m='2472690'>Let's</span> <span m='2472840'>apply</span> <span m='2473170'>it</span>
  <span m='2473230'>to</span> <span m='2473350'>this</span> <span m='2473530'>tree.</span>
  </p><p><span m='2475700'>So</span> <span m='2476650'>I</span> <span m='2476740'>split</span>
  <span m='2477070'>in</span> <span m='2477160'>the</span> <span m='2477220'>middle</span>
  <span m='2477430'>level</span> <span m='2480730'>and</span> <span m='2480970'>I</span>
  <span m='2481060'>recursively</span> <span m='2481690'>lay</span> <span m='2481870'>out</span>
  <span m='2482500'>this</span> <span m='2482920'>triangle</span> <span m='2483430'>up</span>
  <span m='2483570'>here--</span> <span m='2485530'>draw it</span> <span m='2485720'>as
  a</span> <span m='2485920'>box.</span> <span m='2487090'>Then</span> <span m='2487270'>I</span>
  <span m='2487360'>recursively</span> <span m='2487840'>lay</span> <span m='2487990'>out</span>
  <span m='2488110'>this.</span> <span m='2488770'>Then</span> <span m='2488890'>I</span>
  <span m='2488980'>recursively</span> <span m='2489490'>lay</span> <span m='2489640'>out</span>
  <span m='2489820'>this</span> <span m='2490700'>and</span> <span m='2490830'>this</span>
  <span m='2492160'>and</span> <span m='2492340'>this.</span> </p><p><span m='2493630'>So</span>
  <span m='2493840'>up</span> <span m='2493990'>here,</span> <span m='2495490'>I</span>
  <span m='2495550'>mean,</span> <span m='2495970'>to</span> <span m='2496090'>lay</span>
  <span m='2496240'>this</span> <span m='2496390'>out,</span> <span m='2496550'>I</span>
  <span m='2496630'>would</span> <span m='2496960'>again</span> <span m='2497200'>split</span>
  <span m='2497530'>in</span> <span m='2497680'>the</span> <span m='2497740'>middle</span>
  <span m='2497950'>level,</span> <span m='2499410'>lay</span> <span m='2499690'>out</span>
  <span m='2500200'>this</span> <span m='2500350'>piece,</span> <span m='2500860'>so</span>
  <span m='2501070'>this</span> <span m='2501250'>guy</span> <span m='2501430'>will</span>
  <span m='2501580'>go</span> <span m='2501760'>first,</span> <span m='2502750'>then</span>
  <span m='2503050'>this</span> <span m='2503230'>one,</span> <span m='2503590'>then</span>
  <span m='2504250'>this</span> <span m='2504430'>one.</span> <span m='2505180'>Now
  I'll</span> <span m='2505510'>go</span> <span m='2505630'>over</span> <span m='2505840'>and</span>
  <span m='2505930'>recursively</span> <span m='2506440'>do</span> <span m='2506560'>this,
  so</span> <span m='2506960'>it's</span> <span m='2507140'>4,</span> <span m='2507550'>5,</span>
  <span m='2508020'>6.</span> <span m='2508960'>Then</span> <span m='2509110'>this</span>
  <span m='2509290'>one,</span> <span m='2509610'>7,</span> <span m='2510710'>8,</span>
  <span m='2511270'>9,</span> <span m='2512910'>10,</span> <span m='2513340'>11,</span>
  <span m='2514010'>12,</span> <span m='2515540'>13,</span> <span m='2516290'>14,</span>
  <span m='2517760'>15.</span> </p><p><span m='2518350'>That</span> <span m='2518590'>is</span>
  <span m='2518710'>the</span> <span m='2518800'>order</span> <span m='2519070'>in</span>
  <span m='2519130'>which</span> <span m='2519340'>I</span> <span m='2519430'>store</span>
  <span m='2519700'>the</span> <span m='2519820'>nodes.</span> <span m='2520220'>And</span>
  <span m='2520650'>I</span> <span m='2520730'>claim</span> <span m='2521620'>that's</span>
  <span m='2521800'>a</span> <span m='2521860'>good</span> <span m='2522040'>order.</span>
  <span m='2523700'>For</span> <span m='2523750'>example,</span> <span m='2524420'>if</span>
  <span m='2524620'>B</span> <span m='2524890'>equals</span> <span m='2525240'>3,</span>
  <span m='2526060'>this</span> <span m='2526240'>looks</span> <span m='2526450'>really</span>
  <span m='2526690'>good,</span> <span m='2527650'>because</span> <span m='2527860'>then</span>
  <span m='2528250'>all</span> <span m='2528550'>of</span> <span m='2528640'>these</span>
  <span m='2528880'>nodes</span> <span m='2529450'>are</span> <span m='2529660'>in</span>
  <span m='2529900'>the</span> <span m='2530020'>first</span> <span m='2530350'>block.</span>
  <span m='2531750'>And</span> <span m='2531910'>so</span> <span m='2532300'>I</span>
  <span m='2532420'>get</span> <span m='2532600'>to</span> <span m='2532720'>choose</span>
  <span m='2533110'>which</span> <span m='2533470'>of</span> <span m='2533560'>these</span>
  <span m='2533800'>four</span> <span m='2534370'>children</span> <span m='2534880'>trees</span>
  <span m='2535300'>I</span> <span m='2535420'>should</span> <span m='2535570'>look</span>
  <span m='2535810'>at.</span> <span m='2536290'>I</span> <span m='2536350'>mean,</span>
  <span m='2536530'>I</span> <span m='2536620'>happen</span> <span m='2536980'>to</span>
  <span m='2537100'>go</span> <span m='2537310'>here</span> <span m='2538060'>and</span>
  <span m='2538180'>then</span> <span m='2538270'>maybe</span> <span m='2538510'>here.</span>
  <span m='2539490'>I</span> <span m='2539560'>look</span> <span m='2539770'>at</span>
  <span m='2539830'>those</span> <span m='2540100'>two</span> <span m='2540280'>nodes,</span>
  <span m='2540580'>look</span> <span m='2540760'>at</span> <span m='2540820'>their</span>
  <span m='2540970'>keys</span> <span m='2542800'>to</span> <span m='2542920'>decide,</span>
  <span m='2543340'>oh,</span> <span m='2543720'>I should</span> <span m='2543820'>go</span>
  <span m='2543970'>into</span> <span m='2544150'>this</span> <span m='2544300'>branch.</span>
  </p><p><span m='2546070'>But</span> <span m='2547330'>I</span> <span m='2547420'>only</span>
  <span m='2547630'>pay</span> <span m='2547840'>one</span> <span m='2548350'>memory</span>
  <span m='2548620'>transfer</span> <span m='2549460'>to</span> <span m='2549850'>look</span>
  <span m='2550060'>at</span> <span m='2550150'>all</span> <span m='2550270'>those</span>
  <span m='2550480'>nodes.</span> <span m='2551390'>So</span> <span m='2551530'>this</span>
  <span m='2551920'>looks</span> <span m='2552160'>like</span> <span m='2552370'>a</span>
  <span m='2552430'>tree</span> <span m='2552820'>tuned</span> <span m='2553240'>for</span>
  <span m='2553420'>B equals</span> <span m='2553780'>3.</span> <span m='2554110'>But</span>
  <span m='2554230'>it</span> <span m='2554290'>turns</span> <span m='2554560'>out</span>
  <span m='2554680'>it's</span> <span m='2554770'>tuned</span> <span m='2554980'>for</span>
  <span m='2555160'>all</span> <span m='2555400'>B's</span> <span m='2555700'>simultaneously,</span>
  <span m='2557090'>if</span> <span m='2557170'>we</span> <span m='2557260'>do</span>
  <span m='2557410'>this</span> <span m='2557590'>recursively.</span> <span m='2558130'>It's</span>
  <span m='2558220'>hard</span> <span m='2558400'>to</span> <span m='2558490'>draw</span>
  <span m='2559860'>a</span> <span m='2559900'>small</span> <span m='2560230'>example</span>
  <span m='2560710'>where</span> <span m='2560800'>you</span> <span m='2560920'>see</span>
  <span m='2561130'>all</span> <span m='2561280'>the</span> <span m='2561370'>B's</span>
  <span m='2561610'>at</span> <span m='2561700'>once,</span> <span m='2562100'>but</span>
  <span m='2563240'>that's</span> <span m='2563650'>the</span> <span m='2563710'>best</span>
  <span m='2563980'>I</span> <span m='2564070'>can</span> <span m='2564220'>do.</span>
  </p><p><span m='2566120'>OK.</span> <span m='2578030'>Let's</span> <span m='2578240'>analyze</span>
  <span m='2578660'>this</span> <span m='2578840'>thing.</span> <span m='2581250'>So</span>
  <span m='2581360'>the</span> <span m='2581780'>order</span> <span m='2582080'>of</span>
  <span m='2582170'>the</span> <span m='2582260'>nodes</span> <span m='2582590'>is</span>
  <span m='2582680'>clear.</span> <span m='2584310'>If you</span> <span m='2584660'>know</span>
  <span m='2584840'>what</span> <span m='2585020'>the</span> <span m='2585110'>van
  Emde Boas</span> <span m='2585800'>data</span> <span m='2586100'>structure</span>
  <span m='2586550'>is,</span> <span m='2587480'>then</span> <span m='2587660'>you</span>
  <span m='2587750'>know</span> <span m='2587960'>why</span> <span m='2588110'>it's</span>
  <span m='2588230'>called</span> <span m='2588470'>this.</span> <span m='2589040'>Otherwise,</span>
  <span m='2589760'>see</span> <span m='2590240'>lecture</span> <span m='2591680'>10</span>
  <span m='2591920'>or</span> <span m='2592010'>so</span> <span m='2592340'>in</span>
  <span m='2592430'>the</span> <span m='2592520'>future.</span> <span m='2593360'>Forget</span>
  <span m='2593600'>exactly</span> <span m='2593960'>where</span> <span m='2594090'>we're</span>
  <span m='2594230'>covering</span> <span m='2594620'>it.</span> </p><p><span m='2596490'>So</span>
  <span m='2596660'>this</span> <span m='2596930'>order</span> <span m='2597170'>was</span>
  <span m='2597290'>not</span> <span m='2597470'>invented</span> <span m='2597800'>by</span>
  <span m='2598010'>van Emde Boas,</span> <span m='2598550'>but</span> <span m='2598640'>it</span>
  <span m='2598730'>looks</span> <span m='2599030'>very</span> <span m='2599330'>similar</span>
  <span m='2599780'>to</span> <span m='2600110'>something</span> <span m='2600500'>else</span>
  <span m='2600710'>that</span> <span m='2600830'>was</span> <span m='2600950'>invented</span>
  <span m='2601310'>by</span> <span m='2601610'>van Emde Boas,</span> <span m='2602160'>so</span>
  <span m='2602360'>we</span> <span m='2602450'>call</span> <span m='2602690'>it</span>
  <span m='2602780'>that.</span> <span m='2603650'>But</span> <span m='2604030'>that's</span>
  <span m='2604190'>the</span> <span m='2604250'>name</span> <span m='2604460'>of</span>
  <span m='2604550'>a</span> <span m='2604610'>guy,</span> <span m='2606200'>Peter.</span>
  </p><p><span m='2609170'>Analysis.</span> <span m='2610820'>Order's</span> <span
  m='2611180'>clear.</span> <span m='2611900'>The</span> <span m='2612020'>algorithm</span>
  <span m='2612440'>is</span> <span m='2612530'>clear.</span> <span m='2612830'>We</span>
  <span m='2612950'>follow</span> <span m='2613310'>our</span> <span m='2613370'>root</span>
  <span m='2613520'>to</span> <span m='2613670'>leaf</span> <span m='2613850'>path.</span>
  </p><p><span m='2615840'>What</span> <span m='2616010'>we</span> <span m='2616130'>claim</span>
  <span m='2616490'>is</span> <span m='2616760'>any</span> <span m='2617030'>root</span>
  <span m='2617240'>to</span> <span m='2617360'>leaf</span> <span m='2617570'>path</span>
  <span m='2619710'>and</span> <span m='2619880'>any</span> <span m='2620210'>value</span>
  <span m='2620570'>of</span> <span m='2620690'>B,</span> <span m='2621860'>the</span>
  <span m='2621980'>number</span> <span m='2622400'>of</span> <span m='2622670'>blocks</span>
  <span m='2623300'>visited</span> <span m='2623750'>is</span> <span m='2623900'>order</span>
  <span m='2624320'>log</span> <span m='2624620'>base</span> <span m='2624870'>B</span>
  <span m='2625040'>of</span> <span m='2625190'>N.</span> <span m='2627170'>So</span>
  <span m='2628130'>to</span> <span m='2628250'>do</span> <span m='2628370'>that,</span>
  <span m='2631160'>in</span> <span m='2631280'>the</span> <span m='2631400'>analysis</span>
  <span m='2631970'>we</span> <span m='2632120'>get</span> <span m='2632300'>to</span>
  <span m='2632450'>know</span> <span m='2632690'>what</span> <span m='2632900'>B</span>
  <span m='2633190'>is.</span> <span m='2634190'>The</span> <span m='2634280'>algorithm</span>
  <span m='2634880'>didn't</span> <span m='2635180'>know.</span> <span m='2636140'>Algorithm</span>
  <span m='2636590'>here</span> <span m='2637340'>doesn't</span> <span m='2637580'>know</span>
  <span m='2637760'>B</span> <span m='2638600'>and</span> <span m='2639860'>doesn't</span>
  <span m='2640070'>need</span> <span m='2640220'>to</span> <span m='2640340'>know</span>
  <span m='2640520'>B.</span> </p><p><span m='2641420'>But</span> <span m='2641690'>to</span>
  <span m='2641840'>analyze</span> <span m='2642260'>it,</span> <span m='2642350'>to</span>
  <span m='2642470'>prove</span> <span m='2642770'>an</span> <span m='2642860'>order</span>
  <span m='2643100'>log</span> <span m='2643340'>base</span> <span m='2643950'>B</span>
  <span m='2644170'>of</span> <span m='2644310'>N,</span> <span m='2645070'>we</span>
  <span m='2645170'>need</span> <span m='2645290'>to</span> <span m='2645410'>know</span>
  <span m='2648980'>what</span> <span m='2649180'>B</span> <span m='2649320'>is.</span>
  <span m='2650240'>So</span> <span m='2651020'>while</span> <span m='2651200'>the</span>
  <span m='2651350'>algorithm</span> <span m='2651950'>recurses</span> <span m='2652700'>all</span>
  <span m='2652970'>the</span> <span m='2653090'>way</span> <span m='2653210'>down,</span>
  <span m='2655640'>keeps</span> <span m='2656180'>dividing</span> <span m='2656780'>these</span>
  <span m='2656960'>blocks</span> <span m='2657350'>into</span> <span m='2657530'>smaller</span>
  <span m='2657890'>and</span> <span m='2657980'>smaller</span> <span m='2658340'>pieces,</span>
  <span m='2659540'>we're</span> <span m='2659720'>going</span> <span m='2659870'>to</span>
  <span m='2659930'>look</span> <span m='2660110'>at</span> <span m='2660170'>a</span>
  <span m='2660230'>particular</span> <span m='2660950'>level</span> <span m='2661320'>of</span>
  <span m='2661370'>that</span> <span m='2661550'>recursion.</span> <span m='2663170'>I'm</span>
  <span m='2663230'>going</span> <span m='2663350'>to</span> <span m='2663410'>call</span>
  <span m='2663590'>that</span> <span m='2663975'>a</span> <span m='2664240'>level</span>
  <span m='2664670'>of</span> <span m='2664790'>detail.</span> <span m='2672160'>Say</span>
  <span m='2672690'>I</span> <span m='2672940'>call</span> <span m='2673210'>it</span>
  <span m='2673360'>straddling</span> <span m='2677290'>B.</span> </p><p><span m='2679240'>So</span>
  <span m='2679480'>my</span> <span m='2679630'>picture</span> <span m='2679990'>is</span>
  <span m='2680080'>going</span> <span m='2680320'>to</span> <span m='2680410'>be
  the</span> <span m='2680710'>following.</span> <span m='2687220'>These</span> <span
  m='2687490'>little</span> <span m='2687790'>triangles</span> <span m='2688420'>are</span>
  <span m='2688540'>going</span> <span m='2688660'>to</span> <span m='2688750'>be</span>
  <span m='2688870'>size</span> <span m='2689170'>less</span> <span m='2689530'>than</span>
  <span m='2689710'>B.</span> <span m='2693100'>But</span> <span m='2693250'>these</span>
  <span m='2693460'>big</span> <span m='2693700'>triangles</span> <span m='2694270'>are</span>
  <span m='2694360'>size</span> <span m='2694660'>greater</span> <span m='2695020'>than</span>
  <span m='2695170'>or</span> <span m='2695260'>equal</span> <span m='2695500'>to</span>
  <span m='2695620'>B.</span> </p><p><span m='2698490'>OK.</span> <span m='2700000'>At</span>
  <span m='2700150'>some</span> <span m='2700420'>level</span> <span m='2700660'>of</span>
  <span m='2700780'>recursion</span> <span m='2701200'>that</span> <span m='2701380'>happens,</span>
  <span m='2710860'>by</span> <span m='2711220'>monotonicity,</span> <span m='2711860'>I</span>
  <span m='2711950'>guess.</span> <span m='2722720'>I</span> <span m='2722780'>could</span>
  <span m='2722930'>keep</span> <span m='2723110'>going.</span> <span m='2723540'>I</span>
  <span m='2723640'>mean,</span> <span m='2723870'>this</span> <span m='2724100'>tree</span>
  <span m='2724340'>is</span> <span m='2724460'>going</span> <span m='2724610'>to</span>
  <span m='2724670'>have</span> <span m='2725900'>substantial</span> <span m='2726530'>height.</span>
  <span m='2726800'>I</span> <span m='2726860'>don't</span> <span m='2727010'>really</span>
  <span m='2727220'>know</span> <span m='2727460'>how</span> <span m='2727640'>tall</span>
  <span m='2727940'>it</span> <span m='2728030'>is,</span> <span m='2728120'>or</span>
  <span m='2728210'>that's</span> <span m='2728440'>sort</span> <span m='2728560'>of</span>
  <span m='2728870'>the</span> <span m='2728990'>central</span> <span m='2729290'>question.</span>
  <span m='2731620'>Draw in some</span> <span m='2731870'>pointers</span> <span m='2732260'>here.</span>
  </p><p><span m='2735110'>But</span> <span m='2735650'>just</span> <span m='2735860'>look</span>
  <span m='2736160'>at--</span> <span m='2736630'>if</span> <span m='2736790'>you</span>
  <span m='2736910'>subdivide</span> <span m='2738110'>all</span> <span m='2738350'>the</span>
  <span m='2738440'>big</span> <span m='2738590'>triangles</span> <span m='2739430'>until</span>
  <span m='2739640'>you</span> <span m='2739730'>get</span> <span m='2739910'>to</span>
  <span m='2740060'>these</span> <span m='2740210'>small</span> <span m='2740540'>triangles</span>
  <span m='2741020'>that</span> <span m='2741110'>are</span> <span m='2741170'>size</span>
  <span m='2741440'>less</span> <span m='2741590'>than</span> <span m='2741710'>B,</span>
  <span m='2741830'>then</span> <span m='2742040'>you</span> <span m='2742160'>stop</span>
  <span m='2742610'>recursing.</span> <span m='2743840'>Now,</span> <span m='2743960'>the</span>
  <span m='2744080'>algorithm,</span> <span m='2744440'>of</span> <span m='2744530'>course,</span>
  <span m='2744770'>will</span> <span m='2745430'>recursively</span> <span m='2745970'>lay</span>
  <span m='2746120'>that</span> <span m='2746330'>out.</span> <span m='2746810'>But</span>
  <span m='2746960'>what</span> <span m='2747110'>we</span> <span m='2747260'>know,</span>
  <span m='2748100'>we</span> <span m='2748220'>recursively</span> <span m='2748730'>lay</span>
  <span m='2748880'>things</span> <span m='2749120'>out</span> <span m='2749210'>and</span>
  <span m='2749300'>then</span> <span m='2749420'>we</span> <span m='2749510'>concatenate,</span>
  <span m='2750170'>meaning</span> <span m='2750560'>the</span> <span m='2750650'>recursive</span>
  <span m='2751100'>layouts</span> <span m='2752090'>remain</span> <span m='2752540'>consecutive.</span>
  <span m='2754130'>We</span> <span m='2754220'>never</span> <span m='2754550'>like</span>
  <span m='2754910'>interleave</span> <span m='2755270'>two</span> <span m='2755630'>layouts.</span>
  </p><p><span m='2756740'>So</span> <span m='2757310'>however</span> <span m='2757790'>this</span>
  <span m='2757940'>thing</span> <span m='2758120'>is</span> <span m='2758180'>laid</span>
  <span m='2758390'>out,</span> <span m='2758540'>we</span> <span m='2758660'>don't</span>
  <span m='2758810'>really</span> <span m='2759050'>care,</span> <span m='2759410'>because</span>
  <span m='2759740'>at</span> <span m='2759830'>that</span> <span m='2760010'>point</span>
  <span m='2760670'>it's</span> <span m='2760820'>going</span> <span m='2760940'>to</span>
  <span m='2761720'>be</span> <span m='2761840'>stored</span> <span m='2762440'>in</span>
  <span m='2763250'>memory,</span> <span m='2763770'>which</span> <span m='2763850'>is</span>
  <span m='2763940'>this</span> <span m='2764060'>giant</span> <span m='2764390'>array.</span>
  <span m='2765080'>It's</span> <span m='2765230'>going</span> <span m='2765370'>to</span>
  <span m='2765440'>be</span> <span m='2765500'>stored</span> <span m='2765800'>in</span>
  <span m='2766040'>interval</span> <span m='2766490'>of</span> <span m='2766550'>size</span>
  <span m='2766850'>less</span> <span m='2767120'>than</span> <span m='2767270'>B.</span>
  <span m='2769010'>So</span> <span m='2769340'>at</span> <span m='2769730'>worst,</span>
  <span m='2771310'>where</span> <span m='2771580'>are</span> <span m='2771620'>the</span>
  <span m='2771740'>block</span> <span m='2772130'>boundaries?</span> <span m='2773190'>Maybe</span>
  <span m='2773420'>draw</span> <span m='2773630'>that</span> <span m='2773870'>in</span>
  <span m='2774860'>red.</span> </p><p><span m='2776960'>Block</span> <span m='2777260'>boundaries</span>
  <span m='2777650'>are</span> <span m='2777890'>size</span> <span m='2778220'>B.</span>
  <span m='2778490'>We</span> <span m='2778610'>don't</span> <span m='2778760'>know</span>
  <span m='2778940'>exactly</span> <span m='2779480'>how</span> <span m='2779710'>they're</span>
  <span m='2780440'>interspersed.</span> <span m='2781220'>Let's</span> <span m='2781330'>say</span>
  <span m='2781550'>these</span> <span m='2781790'>are</span> <span m='2781850'>the</span>
  <span m='2781970'>block</span> <span m='2782240'>boundaries.</span> </p><p><span
  m='2785040'>So</span> <span m='2785060'>it</span> <span m='2785120'>could</span>
  <span m='2785390'>be</span> <span m='2785600'>that</span> <span m='2786260'>this</span>
  <span m='2786560'>little</span> <span m='2786860'>subarray</span> <span m='2787940'>falls</span>
  <span m='2788210'>into</span> <span m='2788420'>two</span> <span m='2788600'>blocks,</span>
  <span m='2788990'>but</span> <span m='2789200'>at</span> <span m='2789320'>most</span>
  <span m='2789980'>two</span> <span m='2790160'>blocks.</span> <span m='2792440'>So</span>
  <span m='2792740'>the</span> <span m='2792860'>little</span> <span m='2793130'>triangles</span>
  <span m='2793850'>of</span> <span m='2793970'>size</span> <span m='2794420'>less</span>
  <span m='2794720'>than</span> <span m='2794880'>B</span> <span m='2798710'>live</span>
  <span m='2800600'>in</span> <span m='2801490'>at</span> <span m='2801620'>most</span>
  <span m='2802130'>two</span> <span m='2803120'>memory</span> <span m='2803420'>blocks.</span>
  <span m='2809960'>So</span> <span m='2810430'>to</span> <span m='2810500'>visit</span>
  <span m='2810830'>each</span> <span m='2811070'>of</span> <span m='2811130'>these</span>
  <span m='2811310'>little</span> <span m='2811520'>triangles,</span> <span m='2812660'>we</span>
  <span m='2812840'>only</span> <span m='2813140'>spend</span> <span m='2813530'>two</span>
  <span m='2813890'>memory</span> <span m='2814280'>reads</span> <span m='2814730'>at</span>
  <span m='2814850'>most.</span> </p><p><span m='2820660'>So</span> <span m='2821140'>all</span>
  <span m='2821350'>that's</span> <span m='2821500'>left</span> <span m='2821860'>is</span>
  <span m='2821950'>to</span> <span m='2822070'>count</span> <span m='2822490'>how</span>
  <span m='2822760'>many</span> <span m='2823030'>of</span> <span m='2823120'>those</span>
  <span m='2823270'>little</span> <span m='2823450'>triangles</span> <span m='2823930'>do</span>
  <span m='2824050'>we</span> <span m='2824140'>need</span> <span m='2824260'>to</span>
  <span m='2824380'>visit</span> <span m='2830550'>on</span> <span m='2830710'>a</span>
  <span m='2830750'>root</span> <span m='2830860'>to</span> <span m='2831050'>leaf</span>
  <span m='2831280'>path?</span> <span m='2834390'>I</span> <span m='2834550'>claim</span>
  <span m='2835310'>that's</span> <span m='2835510'>going</span> <span m='2835660'>to</span>
  <span m='2835720'>be</span> <span m='2835780'>log</span> <span m='2836010'>base</span>
  <span m='2836220'>B</span> <span m='2836400'>of N.</span> <span m='2838150'>So</span>
  <span m='2838510'>I</span> <span m='2838600'>guess</span> <span m='2838780'>the</span>
  <span m='2838870'>first</span> <span m='2839080'>question</span> <span m='2839440'>is,</span>
  <span m='2840520'>what</span> <span m='2840760'>is</span> <span m='2840910'>the</span>
  <span m='2841120'>height</span> <span m='2844210'>of</span> <span m='2844480'>one</span>
  <span m='2844660'>of</span> <span m='2844720'>these</span> <span m='2844900'>little</span>
  <span m='2845080'>triangles?</span> </p><p><span m='2849280'>Well,</span> <span
  m='2850120'>we</span> <span m='2850240'>start</span> <span m='2850480'>with</span>
  <span m='2850620'>a</span> <span m='2850690'>tree</span> <span m='2850930'>of</span>
  <span m='2851020'>height</span> <span m='2851230'>log</span> <span m='2851560'>N.</span>
  <span m='2852490'>Then</span> <span m='2852610'>we</span> <span m='2852700'>divide</span>
  <span m='2852970'>it</span> <span m='2853060'>in</span> <span m='2853120'>half</span>
  <span m='2853720'>and</span> <span m='2853810'>we</span> <span m='2853870'>divide</span>
  <span m='2854140'>it</span> <span m='2854230'>in</span> <span m='2854320'>half</span>
  <span m='2854620'>and</span> <span m='2854740'>divide</span> <span m='2854980'>it</span>
  <span m='2855080'>in</span> <span m='2855130'>half.</span> <span m='2855510'>And
  we</span> <span m='2855520'>take</span> <span m='2855730'>floors</span> <span m='2856030'>and</span>
  <span m='2856120'>ceilings,</span> <span m='2856690'>whatever.</span> </p><p><span
  m='2858430'>But</span> <span m='2858940'>we</span> <span m='2859120'>repeatedly</span>
  <span m='2860110'>divide</span> <span m='2860500'>the</span> <span m='2860590'>height</span>
  <span m='2860800'>in</span> <span m='2860950'>half.</span> <span m='2861940'>And</span>
  <span m='2862030'>we</span> <span m='2862150'>stop</span> <span m='2862660'>whenever</span>
  <span m='2863050'>the</span> <span m='2863140'>number</span> <span m='2863350'>of</span>
  <span m='2863440'>nodes</span> <span m='2863770'>in</span> <span m='2863890'>there</span>
  <span m='2864580'>is</span> <span m='2864790'>less</span> <span m='2865030'>than</span>
  <span m='2865180'>B.</span> <span m='2866350'>So</span> <span m='2866470'>that</span>
  <span m='2866590'>means</span> <span m='2866800'>the</span> <span m='2866890'>height</span>
  <span m='2867310'>is</span> <span m='2867490'>going</span> <span m='2867730'>to</span>
  <span m='2867880'>be</span> <span m='2868540'>theta</span> <span m='2870590'>log</span>
  <span m='2871210'>B.</span> <span m='2872290'>In</span> <span m='2872380'>fact,</span>
  <span m='2872750'>it's</span> <span m='2872800'>going</span> <span m='2872950'>to</span>
  <span m='2873040'>be</span> <span m='2873220'>in</span> <span m='2873430'>the</span>
  <span m='2873520'>range</span> <span m='2874780'>1/2</span> <span m='2875080'>log</span>
  <span m='2875390'>B</span> <span m='2876880'>to</span> <span m='2877000'>log</span>
  <span m='2877360'>B,</span> <span m='2879460'>probably</span> <span m='2879730'>with</span>
  <span m='2879890'>a</span> <span m='2880130'>paren</span> <span m='2880510'>that</span>
  <span m='2880690'>way.</span> <span m='2881200'>Doesn't</span> <span m='2881410'>really</span>
  <span m='2881590'>matter,</span> <span m='2883610'>because</span> <span m='2883840'>you</span>
  <span m='2883960'>stop</span> <span m='2884350'>as</span> <span m='2884410'>soon</span>
  <span m='2884560'>as</span> <span m='2884680'>you</span> <span m='2884770'>hit</span>
  <span m='2884920'>B.</span> </p><p><span m='2885820'>You're</span> <span m='2885970'>dividing</span>
  <span m='2886390'>the</span> <span m='2886480'>height</span> <span m='2886690'>in</span>
  <span m='2886840'>half</span> <span m='2887140'>repeatedly.</span> <span m='2887660'>You</span>
  <span m='2887740'>might</span> <span m='2888010'>overshoot</span> <span m='2888520'>by</span>
  <span m='2888700'>at</span> <span m='2888760'>most</span> <span m='2889030'>a</span>
  <span m='2889090'>half.</span> <span m='2891700'>That's</span> <span m='2891910'>it.</span>
  <span m='2892930'>So</span> <span m='2893080'>height</span> <span m='2893290'>is</span>
  <span m='2893380'>log B.</span> </p><p><span m='2894970'>So</span> <span m='2895090'>if</span>
  <span m='2895150'>we</span> <span m='2895270'>look</span> <span m='2895870'>along</span>
  <span m='2896200'>a</span> <span m='2896260'>root to</span> <span m='2896530'>leaf</span>
  <span m='2896740'>path,</span> <span m='2897730'>each</span> <span m='2897970'>of</span>
  <span m='2898060'>these</span> <span m='2898240'>things</span> <span m='2898450'>we</span>
  <span m='2898600'>visit,</span> <span m='2899260'>we</span> <span m='2899410'>make</span>
  <span m='2899680'>vertical</span> <span m='2900190'>progress</span> <span m='2900910'>log</span>
  <span m='2901210'>B,</span> <span m='2901570'>theta</span> <span m='2901900'>log</span>
  <span m='2902170'>B.</span> <span m='2904470'>And</span> <span m='2905270'>the</span>
  <span m='2905390'>total</span> <span m='2905630'>vertical</span> <span m='2905990'>progress</span>
  <span m='2906380'>we</span> <span m='2906470'>need</span> <span m='2906590'>to</span>
  <span m='2906710'>make</span> <span m='2906890'>is</span> <span m='2906980'>log</span>
  <span m='2907160'>N,</span> <span m='2908270'>and</span> <span m='2908360'>so</span>
  <span m='2908510'>it's</span> <span m='2908660'>log N</span> <span m='2909110'>divided</span>
  <span m='2909410'>by</span> <span m='2909530'>log</span> <span m='2909730'>B.</span>
  <span m='2912535'>So</span> <span m='2916530'>I</span> <span m='2917040'>guess</span>
  <span m='2917280'>4</span> <span m='2917910'>times</span> <span m='2918530'>log</span>
  <span m='2918880'>N,</span> <span m='2920930'>2</span> <span m='2921890'>log</span>
  <span m='2922110'>N</span> <span m='2922200'>over</span> <span m='2922450'>log B.</span>
  </p><p><span m='2928690'>Triangles,</span> <span m='2930390'>we</span> <span m='2930630'>reach</span>
  <span m='2930870'>a</span> <span m='2930930'>leaf.</span> <span m='2934074'>It's</span>
  <span m='2934530'>total</span> <span m='2934830'>progress</span> <span m='2935190'>we</span>
  <span m='2935250'>need</span> <span m='2935370'>to</span> <span m='2935460'>make</span>
  <span m='2936230'>divided</span> <span m='2936510'>by</span> <span m='2936630'>1/2</span>
  <span m='2936920'>log</span> <span m='2937170'>B</span> <span m='2938010'>here,</span>
  <span m='2939210'>progress</span> <span m='2939660'>per</span> <span m='2939870'>triangle.</span>
  <span m='2941200'>So</span> <span m='2941250'>we</span> <span m='2941310'>get</span>
  <span m='2941460'>2</span> <span m='2941880'>times</span> <span m='2942210'>log</span>
  <span m='2942390'>base</span> <span m='2942750'>B</span> <span m='2943100'>of N.</span>
  <span m='2943780'>And</span> <span m='2943800'>then</span> <span m='2943980'>for</span>
  <span m='2944160'>each</span> <span m='2944370'>triangle,</span> <span m='2944820'>we</span>
  <span m='2944910'>have</span> <span m='2945030'>to</span> <span m='2945120'>pay</span>
  <span m='2945330'>2</span> <span m='2945660'>memory</span> <span m='2945990'>reads,</span>
  <span m='2946950'>so</span> <span m='2947100'>this</span> <span m='2947310'>implies</span>
  <span m='2949960'>at</span> <span m='2950130'>most</span> <span m='2950430'>4</span>
  <span m='2951960'>log</span> <span m='2953410'>base</span> <span m='2953740'>B</span>
  <span m='2954005'>of</span> <span m='2954270'>N</span> <span m='2955470'>memory</span>
  <span m='2955770'>transfers.</span> </p><p><span m='2960760'>And</span> <span m='2960960'>I</span>
  <span m='2961170'>implicitly</span> <span m='2961740'>assumed</span> <span m='2962100'>here</span>
  <span m='2962310'>that</span> <span m='2962700'>B</span> <span m='2963000'>is</span>
  <span m='2963120'>not</span> <span m='2963430'>1.</span> <span m='2964020'>Otherwise,</span>
  <span m='2964500'>need a</span> <span m='2964710'>B</span> <span m='2964890'>plus</span>
  <span m='2965260'>1</span> <span m='2966100'>here</span> <span m='2968150'>to</span>
  <span m='2968310'>be</span> <span m='2968460'>interesting.</span> <span m='2969710'>So</span>
  <span m='2969870'>long</span> <span m='2970020'>as</span> <span m='2970110'>B</span>
  <span m='2970260'>isn't</span> <span m='2970470'>1,</span> <span m='2970740'>then</span>
  <span m='2970920'>it</span> <span m='2970980'>doesn't</span> <span m='2971190'>matter.</span>
  </p><p><span m='2973930'>OK.</span> <span m='2974310'>So</span> <span m='2974580'>that's</span>
  <span m='2974850'>the</span> <span m='2974940'>log</span> <span m='2975180'>base</span>
  <span m='2975470'>B of N</span> <span m='2975630'>analysis,</span> <span m='2976170'>actually</span>
  <span m='2976440'>really</span> <span m='2976680'>simple.</span> <span m='2977460'>Essentially</span>
  <span m='2977820'>what</span> <span m='2977970'>we're</span> <span m='2978090'>doing</span>
  <span m='2978360'>here</span> <span m='2978570'>is</span> <span m='2978720'>binary</span>
  <span m='2979170'>searching</span> <span m='2979680'>on</span> <span m='2979980'>B</span>
  <span m='2981810'>in</span> <span m='2981960'>a</span> <span m='2982170'>kind</span>
  <span m='2982380'>of</span> <span m='2982560'>weird</span> <span m='2982860'>way,</span>
  <span m='2984030'>using</span> <span m='2984420'>divide</span> <span m='2984720'>and</span>
  <span m='2984810'>conquer</span> <span m='2985260'>and</span> <span m='2985350'>recursion.</span>
  <span m='2986210'>So we say,</span> <span m='2986520'>well,</span> <span m='2987150'>maybe</span>
  <span m='2987510'>B is</span> <span m='2987810'>the</span> <span m='2987900'>whole</span>
  <span m='2988050'>thing,</span> <span m='2988320'>then</span> <span m='2988920'>B</span>
  <span m='2989400'>equals N.</span> <span m='2989670'>Then</span> <span m='2989850'>we</span>
  <span m='2989970'>don't</span> <span m='2990090'>have</span> <span m='2990180'>to</span>
  <span m='2990240'>do</span> <span m='2990390'>anything.</span> <span m='2991090'>Everything</span>
  <span m='2991350'>fits</span> <span m='2991560'>in</span> <span m='2991650'>a</span>
  <span m='2991680'>block.</span> </p><p><span m='2992500'>Otherwise,</span> <span
  m='2992990'>let's</span> <span m='2993810'>imagine</span> <span m='2994200'>dividing</span>
  <span m='2994680'>here</span> <span m='2994830'>and</span> <span m='2994920'>supposing</span>
  <span m='2995460'>B</span> <span m='2995670'>is</span> <span m='2995790'>root</span>
  <span m='2996030'>N,</span> <span m='2997140'>and</span> <span m='2997950'>then</span>
  <span m='2998250'>we</span> <span m='2998400'>need</span> <span m='2998580'>two</span>
  <span m='2998890'>accesses.</span> <span m='3001240'>But</span> <span m='3002270'>B</span>
  <span m='3002400'>might</span> <span m='3002540'>be</span> <span m='3002630'>smaller</span>
  <span m='3002990'>than</span> <span m='3003110'>that,</span> <span m='3003320'>so</span>
  <span m='3003460'>we</span> <span m='3003560'>keep</span> <span m='3003740'>recursing,</span>
  <span m='3004640'>keep</span> <span m='3004820'>going</span> <span m='3005060'>down.</span>
  <span m='3005480'>And</span> <span m='3005570'>because</span> <span m='3005930'>we're</span>
  <span m='3006080'>dividing</span> <span m='3006560'>in</span> <span m='3006650'>half</span>
  <span m='3006980'>each</span> <span m='3007130'>time--</span> <span m='3010100'>sorry.</span>
  <span m='3010280'>We're</span> <span m='3010400'>not</span> <span m='3010520'>binary</span>
  <span m='3010780'>searching</span> <span m='3011010'>on</span> <span m='3011090'>B.</span>
  <span m='3011570'>We're</span> <span m='3011720'>binary</span> <span m='3011990'>searching</span>
  <span m='3012350'>on</span> <span m='3012470'>log</span> <span m='3012870'>B,</span>
  <span m='3013880'>which</span> <span m='3014060'>is</span> <span m='3014710'>the</span>
  <span m='3015170'>height</span> <span m='3015830'>of</span> <span m='3016130'>a</span>
  <span m='3016730'>tree</span> <span m='3017210'>with</span> <span m='3017390'>B</span>
  <span m='3017570'>nodes</span> <span m='3017840'>in</span> <span m='3017960'>it.</span>
  </p><p><span m='3019250'>And</span> <span m='3019490'>that's</span> <span m='3019700'>exactly</span>
  <span m='3020090'>what</span> <span m='3020180'>we</span> <span m='3020240'>can</span>
  <span m='3020390'>afford</span> <span m='3020660'>to</span> <span m='3020720'>do.</span>
  <span m='3020870'>And</span> <span m='3020960'>conveniently,</span> <span m='3021370'>it's</span>
  <span m='3021500'>all</span> <span m='3021650'>we</span> <span m='3021770'>need</span>
  <span m='3021920'>to</span> <span m='3022010'>do,</span> <span m='3022190'>because</span>
  <span m='3022520'>to</span> <span m='3022610'>get</span> <span m='3022760'>log</span>
  <span m='3022970'>base</span> <span m='3023330'>B of N</span> <span m='3023560'>correct,</span>
  <span m='3024080'>you</span> <span m='3024200'>only</span> <span m='3024380'>need</span>
  <span m='3024500'>to</span> <span m='3024620'>get</span> <span m='3024740'>log</span>
  <span m='3025010'>B</span> <span m='3025370'>correct</span> <span m='3025790'>up</span>
  <span m='3025910'>to</span> <span m='3025970'>a</span> <span m='3026030'>constant</span>
  <span m='3026360'>factor.</span> </p><p><span m='3029510'>All</span> <span m='3030140'>right.</span>
  <span m='3032210'>Now,</span> <span m='3032810'>that</span> <span m='3032930'>was</span>
  <span m='3033080'>the</span> <span m='3033140'>easy</span> <span m='3033350'>part.</span>
  <span m='3034080'>Now</span> <span m='3034130'>the</span> <span m='3034250'>hard</span>
  <span m='3034460'>part</span> <span m='3034700'>is</span> <span m='3034880'>to</span>
  <span m='3035000'>make</span> <span m='3035240'>this</span> <span m='3035390'>dynamic.</span>
  <span m='3036540'>This</span> <span m='3036640'>is</span> <span m='3036650'>where</span>
  <span m='3036800'>things</span> <span m='3037040'>get</span> <span m='3037190'>exciting.</span>
  </p><p><span m='3038270'>This</span> <span m='3038450'>works</span> <span m='3038720'>fine</span>
  <span m='3039140'>for</span> <span m='3039650'>a</span> <span m='3039680'>static</span>
  <span m='3040040'>tree.</span> <span m='3041280'>And</span> <span m='3041380'>this</span>
  <span m='3041390'>is</span> <span m='3041480'>how</span> <span m='3041630'>we</span>
  <span m='3041720'>do</span> <span m='3041840'>search.</span> <span m='3042230'>But</span>
  <span m='3042350'>we</span> <span m='3042440'>can't</span> <span m='3042650'>do</span>
  <span m='3042770'>inserts</span> <span m='3043100'>and</span> <span m='3043190'>deletes</span>
  <span m='3043550'>in</span> <span m='3043640'>this</span> <span m='3043790'>world</span>
  <span m='3044780'>easily.</span> <span m='3047660'>But</span> <span m='3047750'>I'll</span>
  <span m='3047870'>show</span> <span m='3048050'>you</span> <span m='3048140'>how</span>
  <span m='3048320'>to</span> <span m='3048440'>do</span> <span m='3048620'>it</span>
  <span m='3049260'>nonetheless.</span> </p><p></p><p><span m='3065450'>So</span>
  <span m='3065670'>this</span> <span m='3065910'>is</span> <span m='3066060'>what's</span>
  <span m='3066420'>called</span> <span m='3066870'>a</span> <span m='3067020'>cache-oblivious</span>
  <span m='3067740'>B-tree.</span> <span m='3075350'>We're</span> <span m='3075470'>going</span>
  <span m='3075580'>to</span> <span m='3075650'>do</span> <span m='3075830'>it</span>
  <span m='3075950'>in</span> <span m='3076700'>five</span> <span m='3077510'>steps.</span>
  <span m='3080350'>And</span> <span m='3080390'>the</span> <span m='3080480'>first</span>
  <span m='3080720'>step,</span> <span m='3081410'>unfortunately,</span> <span m='3081950'>is</span>
  <span m='3082070'>delayed</span> <span m='3082370'>until</span> <span m='3082550'>next</span>
  <span m='3082790'>lecture,</span> <span m='3083560'>so</span> <span m='3083930'>I</span>
  <span m='3084050'>need</span> <span m='3084230'>a</span> <span m='3084290'>black</span>
  <span m='3084590'>box.</span> </p><p><span m='3085800'>It's</span> <span m='3087220'>a</span>
  <span m='3087290'>very</span> <span m='3087440'>useful</span> <span m='3087830'>black</span>
  <span m='3088050'>box.</span> <span m='3089310'>It's</span> <span m='3089330'>actually</span>
  <span m='3089630'>one</span> <span m='3089810'>that</span> <span m='3089930'>we've</span>
  <span m='3090410'>briefly</span> <span m='3090740'>talked</span> <span m='3091010'>about</span>
  <span m='3091220'>before,</span> <span m='3092930'>I</span> <span m='3092960'>think</span>
  <span m='3093200'>in</span> <span m='3093290'>the</span> <span m='3093380'>time</span>
  <span m='3093650'>travel.</span> <span m='3101290'>If</span> <span m='3101380'>you</span>
  <span m='3101440'>remember,</span> <span m='3101710'>in</span> <span m='3101830'>time</span>
  <span m='3102070'>travel</span> <span m='3102370'>there</span> <span m='3102480'>was</span>
  <span m='3102610'>one</span> <span m='3102790'>black</span> <span m='3103030'>box,</span>
  <span m='3103270'>which</span> <span m='3103390'>we</span> <span m='3103480'>still</span>
  <span m='3103690'>haven't</span> <span m='3103870'>seen</span> <span m='3104110'>but</span>
  <span m='3104230'>we</span> <span m='3104380'>will</span> <span m='3104530'>do</span>
  <span m='3104920'>finally</span> <span m='3105310'>next</span> <span m='3105520'>lecture,</span>
  <span m='3106940'>which</span> <span m='3107080'>was</span> <span m='3107530'>you</span>
  <span m='3107650'>can</span> <span m='3107770'>insert</span> <span m='3108160'>into</span>
  <span m='3108370'>a</span> <span m='3108400'>linked</span> <span m='3108640'>list</span>
  <span m='3109030'>and</span> <span m='3109120'>then</span> <span m='3109270'>given</span>
  <span m='3109570'>two</span> <span m='3109750'>items</span> <span m='3110020'>in</span>
  <span m='3110080'>the</span> <span m='3110140'>linked</span> <span m='3110350'>list</span>
  <span m='3110530'>know</span> <span m='3110710'>which</span> <span m='3110920'>one</span>
  <span m='3111100'>comes</span> <span m='3111340'>before</span> <span m='3111610'>which</span>
  <span m='3111820'>other</span> <span m='3112000'>one</span> <span m='3112240'>in</span>
  <span m='3112360'>constant</span> <span m='3112810'>time per</span> <span m='3113170'>operation.</span>
  </p><p><span m='3114850'>Closely</span> <span m='3115270'>related</span> <span m='3115600'>to</span>
  <span m='3115690'>that</span> <span m='3115990'>is</span> <span m='3116200'>a</span>
  <span m='3116260'>slightly</span> <span m='3116650'>different</span> <span m='3116890'>problem</span>
  <span m='3117220'>called</span> <span m='3117610'>order</span> <span m='3117820'>file</span>
  <span m='3118090'>maintenance.</span> <span m='3118900'>Here's</span> <span m='3119170'>what</span>
  <span m='3119320'>it</span> <span m='3119380'>lets</span> <span m='3119590'>you</span>
  <span m='3119680'>do.</span> <span m='3121840'>You</span> <span m='3122020'>can</span>
  <span m='3122170'>store</span> <span m='3122530'>N</span> <span m='3122920'>elements,</span>
  <span m='3123460'>N</span> <span m='3123790'>words</span> <span m='3126640'>in</span>
  <span m='3126880'>specified</span> <span m='3127510'>order,</span> <span m='3128320'>so</span>
  <span m='3128510'>just</span> <span m='3128830'>like</span> <span m='3129040'>it's</span>
  <span m='3129190'>a</span> <span m='3129250'>linked</span> <span m='3129490'>list.</span>
  <span m='3132310'>But</span> <span m='3132520'>we</span> <span m='3132640'>don't</span>
  <span m='3132760'>store it</span> <span m='3133000'>as</span> <span m='3133120'>a</span>
  <span m='3133150'>linked</span> <span m='3133360'>list.</span> <span m='3133650'>We</span>
  <span m='3133720'>want</span> <span m='3133840'>to</span> <span m='3133900'>store</span>
  <span m='3134080'>it</span> <span m='3134170'>in</span> <span m='3134410'>an</span>
  <span m='3134530'>array</span> <span m='3137530'>of</span> <span m='3137830'>linear</span>
  <span m='3138370'>size.</span> </p><p><span m='3145510'>So</span> <span m='3145690'>there's</span>
  <span m='3145840'>going</span> <span m='3145930'>to</span> <span m='3146020'>be</span>
  <span m='3146110'>some</span> <span m='3146260'>blank</span> <span m='3146560'>spots</span>
  <span m='3147010'>in</span> <span m='3147100'>this</span> <span m='3147250'>array.</span>
  <span m='3147890'>We've got N</span> <span m='3148230'>items,</span> <span m='3149530'>an</span>
  <span m='3149650'>array</span> <span m='3149890'>of</span> <span m='3149980'>size,</span>
  <span m='3150280'>say</span> <span m='3150490'>2N</span> <span m='3151210'>or</span>
  <span m='3151450'>1.1</span> <span m='3152110'>times</span> <span m='3152410'>N,</span>
  <span m='3153040'>anything</span> <span m='3153370'>like</span> <span m='3153520'>that</span>
  <span m='3153700'>will</span> <span m='3153880'>suffice.</span> <span m='3155590'>The</span>
  <span m='3155710'>rest,</span> <span m='3156220'>we</span> <span m='3156340'>call</span>
  <span m='3156520'>them</span> <span m='3156700'>gaps,</span> <span m='3158380'>gaps</span>
  <span m='3158710'>in</span> <span m='3158890'>the</span> <span m='3159240'>array.</span>
  </p><p><span m='3161860'>And</span> <span m='3164050'>the</span> <span m='3164200'>updates--</span>
  <span m='3165170'>so</span> <span m='3165270'>this</span> <span m='3165310'>is</span>
  <span m='3165400'>physically</span> <span m='3165820'>what</span> <span m='3165940'>you</span>
  <span m='3166060'>have</span> <span m='3166240'>to</span> <span m='3166300'>do.</span>
  <span m='3167250'>You</span> <span m='3167410'>can</span> <span m='3167560'>change</span>
  <span m='3169360'>this</span> <span m='3169510'>set</span> <span m='3169750'>of</span>
  <span m='3169870'>elements</span> <span m='3170320'>by</span> <span m='3170590'>either</span>
  <span m='3170860'>deleting an</span> <span m='3171310'>element</span> <span m='3174040'>or</span>
  <span m='3174310'>inserting</span> <span m='3174790'>an</span> <span m='3174880'>element</span>
  <span m='3175300'>between</span> <span m='3176500'>two</span> <span m='3176860'>given</span>
  <span m='3177160'>elements.</span> </p><p></p><p><span m='3189850'>So</span> <span
  m='3190060'>this</span> <span m='3190240'>is</span> <span m='3190300'>just</span>
  <span m='3190540'>like</span> <span m='3190720'>the</span> <span m='3190810'>linked</span>
  <span m='3191050'>list</span> <span m='3191310'>updates.</span> <span m='3191650'>I</span>
  <span m='3191710'>can</span> <span m='3191860'>delete</span> <span m='3192160'>somebody</span>
  <span m='3192550'>from</span> <span m='3192700'>a</span> <span m='3192730'>linked</span>
  <span m='3192940'>list.</span> <span m='3193150'>I</span> <span m='3193210'>can</span>
  <span m='3193330'>insert</span> <span m='3193690'>a</span> <span m='3193750'>new</span>
  <span m='3193990'>item</span> <span m='3194290'>in</span> <span m='3194410'>between</span>
  <span m='3194740'>two</span> <span m='3195400'>given</span> <span m='3195640'>items</span>
  <span m='3195910'>in</span> <span m='3196000'>the</span> <span m='3196090'>linked</span>
  <span m='3196270'>list.</span> </p><p><span m='3196930'>But</span> <span m='3197080'>now</span>
  <span m='3197260'>it</span> <span m='3197320'>has</span> <span m='3197470'>to</span>
  <span m='3197560'>be</span> <span m='3197650'>stored</span> <span m='3198010'>in</span>
  <span m='3198220'>a</span> <span m='3198310'>physical</span> <span m='3198880'>array</span>
  <span m='3199480'>of</span> <span m='3199630'>linear</span> <span m='3199990'>size.</span>
  <span m='3201430'>Now,</span> <span m='3201580'>we</span> <span m='3201700'>can't</span>
  <span m='3201940'>do</span> <span m='3202060'>this</span> <span m='3202210'>in</span>
  <span m='3202300'>constant</span> <span m='3202660'>time.</span> <span m='3204370'>But</span>
  <span m='3204610'>what</span> <span m='3204730'>we</span> <span m='3204880'>can</span>
  <span m='3205150'>do</span> <span m='3206650'>is</span> <span m='3208180'>move</span>
  <span m='3224680'>elements</span> <span m='3225040'>around.</span> </p><p></p><p><span
  m='3244280'>OK.</span> <span m='3244730'>So</span> <span m='3245690'>let</span>
  <span m='3245720'>me</span> <span m='3245900'>draw</span> <span m='3246110'>a</span>
  <span m='3246150'>picture.</span> <span m='3268980'>So</span> <span m='3269310'>maybe</span>
  <span m='3269610'>we</span> <span m='3269730'>have</span> <span m='3269940'>some</span>
  <span m='3270240'>elements</span> <span m='3270660'>here.</span> <span m='3275940'>They</span>
  <span m='3276070'>could</span> <span m='3276270'>be</span> <span m='3276360'>in</span>
  <span m='3276480'>sorted</span> <span m='3276840'>order,</span> <span m='3278190'>maybe</span>
  <span m='3278490'>not.</span> </p><p><span m='3282590'>There</span> <span m='3282870'>are</span>
  <span m='3282940'>some</span> <span m='3283110'>gaps</span> <span m='3283910'>in</span>
  <span m='3284010'>between.</span> <span m='3285720'>I</span> <span m='3285840'>didn't</span>
  <span m='3286020'>mention</span> <span m='3286350'>it,</span> <span m='3286500'>but</span>
  <span m='3287370'>all</span> <span m='3287730'>gaps</span> <span m='3289080'>will</span>
  <span m='3289230'>have</span> <span m='3289500'>constant</span> <span m='3289920'>size.</span>
  <span m='3294460'>So</span> <span m='3295140'>this</span> <span m='3295410'>will</span>
  <span m='3295530'>be</span> <span m='3295790'>constant-sized</span> <span m='3296340'>gaps.</span>
  </p><p><span m='3298710'>And</span> <span m='3298860'>we're</span> <span m='3298980'>able</span>
  <span m='3299220'>to</span> <span m='3299310'>do</span> <span m='3299460'>things</span>
  <span m='3299760'>like</span> <span m='3300420'>insert</span> <span m='3301610'>a</span>
  <span m='3301680'>new</span> <span m='3301890'>item</span> <span m='3302250'>right</span>
  <span m='3302460'>after</span> <span m='3302820'>42.</span> <span m='3304140'>Let's</span>
  <span m='3304290'>say</span> <span m='3304470'>we</span> <span m='3304620'>insert</span>
  <span m='3305520'>12.</span> <span m='3306590'>So</span> <span m='3306810'>12,</span>
  <span m='3307410'>we</span> <span m='3307530'>could</span> <span m='3307650'>put</span>
  <span m='3307800'>it</span> <span m='3307890'>right</span> <span m='3308040'>here,</span>
  <span m='3308850'>no</span> <span m='3308970'>problem.</span> </p><p><span m='3309930'>Now</span>
  <span m='3310200'>maybe</span> <span m='3310500'>we</span> <span m='3310680'>say</span>
  <span m='3310950'>insert</span> <span m='3311400'>right</span> <span m='3311610'>after</span>
  <span m='3311880'>42</span> <span m='3312510'>the</span> <span m='3312630'>number</span>
  <span m='3313120'>6.</span> <span m='3314470'>And we're like,</span> <span m='3314850'>oh,</span>
  <span m='3315420'>there's</span> <span m='3315570'>no</span> <span m='3315690'>room</span>
  <span m='3315840'>to</span> <span m='3315930'>put</span> <span m='3316110'>6.</span>
  <span m='3317130'>So</span> <span m='3317280'>I've</span> <span m='3317340'>got</span>
  <span m='3317490'>to</span> <span m='3317580'>move</span> <span m='3317790'>some</span>
  <span m='3317940'>stuff.</span> <span m='3318300'>Maybe</span> <span m='3318600'>I</span>
  <span m='3318690'>move</span> <span m='3318930'>12</span> <span m='3319530'>over</span>
  <span m='3319800'>here</span> <span m='3320940'>and</span> <span m='3321090'>then</span>
  <span m='3321210'>I</span> <span m='3321300'>put</span> <span m='3321450'>6</span>
  <span m='3321750'>here.</span> </p><p><span m='3323100'>And</span> <span m='3323220'>then</span>
  <span m='3323340'>I</span> <span m='3323370'>say,</span> <span m='3323520'>OK,</span>
  <span m='3323820'>now</span> <span m='3324120'>insert</span> <span m='3325320'>right</span>
  <span m='3325500'>after</span> <span m='3325740'>42</span> <span m='3326190'>the</span>
  <span m='3326310'>number</span> <span m='3326960'>7.</span> <span m='3327966'>And
  you're</span> <span m='3328462'>like,</span> <span m='3328960'>uh-oh.</span> <span
  m='3330960'>I</span> <span m='3331110'>could</span> <span m='3332430'>move</span>
  <span m='3332640'>these</span> <span m='3332820'>guys</span> <span m='3333090'>over</span>
  <span m='3333330'>one</span> <span m='3333930'>and</span> <span m='3334050'>then</span>
  <span m='3334200'>put</span> <span m='3334380'>7</span> <span m='3334710'>here,</span>
  <span m='3335490'>and</span> <span m='3335610'>so</span> <span m='3335760'>on.</span>
  <span m='3337920'>Obvious</span> <span m='3338550'>algorithm</span> <span m='3338940'>to</span>
  <span m='3339030'>do</span> <span m='3339150'>this.</span> <span m='3339300'>Takes</span>
  <span m='3339510'>linear</span> <span m='3339900'>time,</span> <span m='3340740'>linear</span>
  <span m='3341050'>number</span> <span m='3341370'>of</span> <span m='3341760'>shifts</span>
  <span m='3342750'>in</span> <span m='3342840'>order</span> <span m='3343020'>to</span>
  <span m='3343080'>do</span> <span m='3343200'>one</span> <span m='3343350'>insertion.</span>
  </p><p><span m='3344400'>Claim</span> <span m='3344690'>is</span> <span m='3344910'>you</span>
  <span m='3345060'>can</span> <span m='3345150'>do</span> <span m='3345250'>an</span>
  <span m='3345330'>insertion</span> <span m='3345870'>in</span> <span m='3346090'>log</span>
  <span m='3346440'>squared</span> <span m='3347040'>amortized.</span> <span m='3348970'>It's</span>
  <span m='3349370'>pretty</span> <span m='3349560'>cool.</span> <span m='3350040'>So</span>
  <span m='3350220'>worst</span> <span m='3350430'>case,</span> <span m='3350830'>you'll
  still</span> <span m='3351000'>going</span> <span m='3351150'>to</span> <span m='3351210'>need</span>
  <span m='3351390'>to</span> <span m='3351480'>shift</span> <span m='3351720'>everybody.</span>
  <span m='3352740'>But</span> <span m='3353070'>just</span> <span m='3353310'>leaving</span>
  <span m='3353610'>constant-sized</span> <span m='3354300'>gaps</span> <span m='3354600'>will</span>
  <span m='3354690'>be</span> <span m='3354840'>enough</span> <span m='3355110'>to</span>
  <span m='3355230'>reduce</span> <span m='3355590'>amortized</span> <span m='3356070'>costs</span>
  <span m='3356320'>to</span> <span m='3356400'>log</span> <span m='3356640'>squared.</span>
  <span m='3357000'>And</span> <span m='3357090'>this</span> <span m='3357210'>is</span>
  <span m='3357330'>conjectured</span> <span m='3357840'>optimal,</span> <span m='3358310'>though</span>
  <span m='3358440'>no</span> <span m='3358590'>one</span> <span m='3358740'>knows</span>
  <span m='3358950'>how</span> <span m='3359040'>to</span> <span m='3359130'>prove</span>
  <span m='3359370'>that.</span> </p><p><span m='3360850'>And</span> <span m='3361080'>that's</span>
  <span m='3361260'>order</span> <span m='3361470'>file</span> <span m='3361710'>maintenance.</span>
  <span m='3362370'>Now,</span> <span m='3363060'>we're</span> <span m='3363180'>going</span>
  <span m='3363240'>to</span> <span m='3363300'>assume</span> <span m='3363510'>this</span>
  <span m='3363660'>is</span> <span m='3363750'>a</span> <span m='3363810'>black</span>
  <span m='3364050'>box.</span> <span m='3364380'>Next</span> <span m='3364590'>lecture,</span>
  <span m='3364920'>we'll</span> <span m='3365070'>actually</span> <span m='3365850'>do</span>
  <span m='3365970'>it.</span> </p><p><span m='3368430'>But</span> <span m='3368610'>I</span>
  <span m='3368700'>want</span> <span m='3368880'>to</span> <span m='3369750'>first</span>
  <span m='3370530'>show</span> <span m='3370770'>you</span> <span m='3370950'>how</span>
  <span m='3372330'>it</span> <span m='3372450'>lets</span> <span m='3372640'>us</span>
  <span m='3372780'>get</span> <span m='3372960'>cache-oblivious</span> <span m='3373860'>dynamic</span>
  <span m='3375150'>B-trees.</span> <span m='3381270'>Log</span> <span m='3381560'>base</span>
  <span m='3381800'>B</span> <span m='3381950'>of</span> <span m='3382050'>N,</span>
  <span m='3382550'>insert,</span> <span m='3383040'>delete,</span> <span m='3383270'>search.</span>
  </p><p></p><p><span m='3392520'>OK.</span> <span m='3394170'>We're</span> <span
  m='3394290'>going</span> <span m='3394410'>to</span> <span m='3394470'>use</span>
  <span m='3394650'>an</span> <span m='3394770'>ordered</span> <span m='3395100'>file</span>
  <span m='3395400'>maintenance</span> <span m='3396000'>data</span> <span m='3396240'>structure</span>
  <span m='3397680'>to</span> <span m='3397830'>store</span> <span m='3398490'>our</span>
  <span m='3398640'>keys,</span> <span m='3399900'>just</span> <span m='3400080'>stick</span>
  <span m='3400340'>them</span> <span m='3400470'>in</span> <span m='3400590'>there.</span>
  <span m='3401910'>Now,</span> <span m='3402120'>this</span> <span m='3402330'>is</span>
  <span m='3402510'>good--</span> <span m='3404100'>well,</span> <span m='3404730'>it's</span>
  <span m='3404850'>really</span> <span m='3405090'>not</span> <span m='3405240'>good</span>
  <span m='3405390'>for</span> <span m='3405510'>anything,</span> <span m='3406726'>although</span>
  <span m='3407140'>it's</span> <span m='3407280'>a</span> <span m='3407370'>starting</span>
  <span m='3407670'>point.</span> </p><p><span m='3408330'>It</span> <span m='3408420'>can</span>
  <span m='3408570'>do</span> <span m='3408720'>updates</span> <span m='3409170'>in</span>
  <span m='3409290'>log</span> <span m='3409920'>squared</span> <span m='3410370'>of
  N--</span> <span m='3411000'>I</span> <span m='3411210'>didn't</span> <span m='3411390'>mention</span>
  <span m='3411660'>this</span> <span m='3411810'>part--</span> <span m='3412710'>in</span>
  <span m='3412890'>a</span> <span m='3412920'>constant</span> <span m='3413460'>number</span>
  <span m='3413730'>of</span> <span m='3413790'>scans.</span> <span m='3415110'>So</span>
  <span m='3415800'>think</span> <span m='3415980'>of</span> <span m='3416070'>these</span>
  <span m='3416340'>as</span> <span m='3417000'>this</span> <span m='3417150'>kind</span>
  <span m='3417300'>of</span> <span m='3417420'>shift.</span> <span m='3418230'>I</span>
  <span m='3418290'>have</span> <span m='3418470'>to</span> <span m='3418830'>scan</span>
  <span m='3419280'>left</span> <span m='3419550'>to</span> <span m='3419670'>right,</span>
  <span m='3420590'>copy</span> <span m='3420960'>23</span> <span m='3421380'>to</span>
  <span m='3421500'>the left,</span> <span m='3421980'>42</span> <span m='3422400'>to</span>
  <span m='3422520'>the</span> <span m='3422580'>left,</span> <span m='3422910'>and</span>
  <span m='3423000'>so</span> <span m='3423180'>on.</span> <span m='3424560'>Scans</span>
  <span m='3425670'>are</span> <span m='3425760'>things</span> <span m='3426030'>we</span>
  <span m='3426150'>know</span> <span m='3426330'>how</span> <span m='3426480'>to</span>
  <span m='3426570'>do</span> <span m='3426750'>fast</span> <span m='3427360'>in N</span>
  <span m='3427510'>over B</span> <span m='3427670'>memory</span> <span m='3428820'>transfers.</span>
  </p><p><span m='3429990'>So</span> <span m='3430230'>if</span> <span m='3430380'>you're</span>
  <span m='3430470'>going</span> <span m='3430590'>to</span> <span m='3430980'>do</span>
  <span m='3431400'>log</span> <span m='3431760'>squared--</span> <span m='3432075'>if</span>
  <span m='3432390'>you're</span> <span m='3432510'>going</span> <span m='3432630'>to</span>
  <span m='3432690'>update</span> <span m='3432990'>an</span> <span m='3433110'>interval</span>
  <span m='3433500'>log</span> <span m='3433770'>squared</span> <span m='3434070'>guys</span>
  <span m='3434880'>using</span> <span m='3435180'>constant</span> <span m='3435510'>number</span>
  <span m='3435720'>of</span> <span m='3435780'>scans,</span> <span m='3436710'>this</span>
  <span m='3436890'>will</span> <span m='3437010'>take</span> <span m='3438320'>log</span>
  <span m='3438820'>squared</span> <span m='3439560'>N</span> <span m='3440420'>over</span>
  <span m='3440720'>B</span> <span m='3441900'>memory</span> <span m='3442230'>transfers.</span>
  <span m='3450370'>Not</span> <span m='3450550'>quite</span> <span m='3450820'>the</span>
  <span m='3450940'>bound</span> <span m='3451150'>we</span> <span m='3451270'>want.</span>
  <span m='3451570'>We</span> <span m='3451690'>want</span> <span m='3451870'>log</span>
  <span m='3452110'>base</span> <span m='3452340'>B</span> <span m='3452500'>of N.</span>
  </p><p><span m='3453440'>This</span> <span m='3453550'>could</span> <span m='3453730'>be</span>
  <span m='3453880'>larger</span> <span m='3454300'>or</span> <span m='3454510'>smaller</span>
  <span m='3455200'>than</span> <span m='3455380'>log</span> <span m='3455580'>base
  B</span> <span m='3455840'>of N.</span> <span m='3456220'>It</span> <span m='3456310'>depends</span>
  <span m='3457120'>how big</span> <span m='3457270'>B</span> <span m='3457750'>is.</span>
  <span m='3459160'>But</span> <span m='3459340'>don't</span> <span m='3459520'>worry</span>
  <span m='3459700'>about</span> <span m='3459910'>it</span> <span m='3459970'>for</span>
  <span m='3460120'>now.</span> <span m='3460930'>This</span> <span m='3461110'>is</span>
  <span m='3461170'>still--</span> <span m='3461710'>at</span> <span m='3461800'>least</span>
  <span m='3461980'>it's</span> <span m='3462190'>poly log.</span> <span m='3463210'>Updates</span>
  <span m='3463570'>are</span> <span m='3463660'>kind</span> <span m='3463900'>of</span>
  <span m='3463990'>vaguely</span> <span m='3464650'>decent.</span> <span m='3465300'>We'll</span>
  <span m='3465490'>improve</span> <span m='3465820'>them</span> <span m='3465970'>later.</span>
  </p><p><span m='3467410'>On</span> <span m='3467530'>the</span> <span m='3467620'>other</span>
  <span m='3467740'>hand,</span> <span m='3467920'>search</span> <span m='3468850'>is</span>
  <span m='3469060'>really</span> <span m='3469420'>bad</span> <span m='3470110'>here.</span>
  <span m='3470830'>I</span> <span m='3470890'>mean,</span> <span m='3471070'>we're</span>
  <span m='3471160'>maintaining</span> <span m='3471700'>the</span> <span m='3471850'>items--</span>
  <span m='3472650'>I</span> <span m='3472720'>didn't</span> <span m='3472870'>mention</span>
  <span m='3473170'>it,</span> <span m='3473330'>but</span> <span m='3473350'>we</span>
  <span m='3473450'>will</span> <span m='3473530'>actually</span> <span m='3473770'>maintain</span>
  <span m='3474070'>the</span> <span m='3474160'>items</span> <span m='3474430'>in</span>
  <span m='3474580'>sorted</span> <span m='3474940'>order.</span> <span m='3476060'>So</span>
  <span m='3476200'>yeah,</span> <span m='3476440'>you</span> <span m='3476590'>could</span>
  <span m='3476710'>do</span> <span m='3476830'>a</span> <span m='3476860'>binary</span>
  <span m='3477250'>search.</span> <span m='3477580'>But</span> <span m='3477700'>binary</span>
  <span m='3478030'>search</span> <span m='3478240'>is</span> <span m='3478360'>really</span>
  <span m='3478630'>bad</span> <span m='3478930'>cache-obliviously,</span> <span m='3479830'>because</span>
  <span m='3480010'>most</span> <span m='3480310'>of</span> <span m='3480370'>the</span>
  <span m='3480460'>time</span> <span m='3480760'>you'll</span> <span m='3480880'>be</span>
  <span m='3481030'>visiting</span> <span m='3481390'>a</span> <span m='3481450'>new</span>
  <span m='3481630'>block</span> <span m='3482470'>until</span> <span m='3482710'>the</span>
  <span m='3482800'>very</span> <span m='3483100'>end.</span> </p><p><span m='3484360'>So</span>
  <span m='3484540'>binary</span> <span m='3484930'>search--</span> <span m='3485440'>this</span>
  <span m='3485800'>is a</span> <span m='3486070'>fun</span> <span m='3486660'>exercise--</span>
  <span m='3487510'>is</span> <span m='3487780'>log</span> <span m='3488110'>N</span>
  <span m='3488290'>minus</span> <span m='3488770'>log</span> <span m='3489040'>B.</span>
  <span m='3489700'>We</span> <span m='3489820'>want</span> <span m='3490030'>log</span>
  <span m='3490300'>N</span> <span m='3490420'>divided</span> <span m='3490930'>by</span>
  <span m='3491110'>log</span> <span m='3491380'>B.</span> <span m='3492670'>So</span>
  <span m='3492760'>we</span> <span m='3492850'>can't</span> <span m='3493060'>use</span>
  <span m='3493210'>binary</span> <span m='3493510'>search.</span> </p><p><span m='3494290'>We</span>
  <span m='3494440'>need</span> <span m='3494620'>to</span> <span m='3494770'>use</span>
  <span m='3495680'>van Emde Boas</span> <span m='3496420'>layouts,</span> <span m='3496990'>this</span>
  <span m='3497170'>thing.</span> <span m='3498580'>So</span> <span m='3498820'>we</span>
  <span m='3498940'>just</span> <span m='3499090'>plug</span> <span m='3499360'>these</span>
  <span m='3499540'>together.</span> <span m='3500200'>We</span> <span m='3500320'>take</span>
  <span m='3500500'>this</span> <span m='3500650'>static</span> <span m='3501190'>search</span>
  <span m='3501520'>tree</span> <span m='3502210'>and</span> <span m='3502300'>stick</span>
  <span m='3502570'>it</span> <span m='3502690'>on</span> <span m='3502870'>top</span>
  <span m='3503290'>of</span> <span m='3503440'>an</span> <span m='3503530'>ordered</span>
  <span m='3503770'>file</span> <span m='3504040'>maintenance</span> <span m='3504430'>data</span>
  <span m='3504640'>structure.</span> <span m='3506000'>So</span> <span m='3506890'>here</span>
  <span m='3507070'>we</span> <span m='3507130'>have</span> <span m='3507340'>a</span>
  <span m='3507370'>van Emde Boas</span> <span m='3508920'>layout</span> <span m='3509530'>static</span>
  <span m='3510250'>tree</span> <span m='3512980'>on</span> <span m='3513160'>top</span>
  <span m='3513550'>of</span> <span m='3515410'>this</span> <span m='3515620'>thing,</span>
  <span m='3516700'>which</span> <span m='3516960'>is</span> <span m='3517120'>an</span>
  <span m='3517240'>ordered</span> <span m='3517570'>file.</span> <span m='3521980'>And</span>
  <span m='3522220'>we</span> <span m='3522310'>have</span> <span m='3522430'>cross-linking.</span>
  </p><p><span m='3527520'>Really</span> <span m='3528630'>here</span> <span m='3528900'>we</span>
  <span m='3528990'>have</span> <span m='3529170'>gaps.</span> <span m='3530580'>And</span>
  <span m='3530820'>we</span> <span m='3530940'>don't</span> <span m='3531390'>store</span>
  <span m='3531600'>the</span> <span m='3531690'>gaps</span> <span m='3532050'>up
  here.</span> <span m='3532590'>Or</span> <span m='3533040'>do</span> <span m='3533220'>we?</span>
  <span m='3533500'>Yeah,</span> <span m='3533690'>sure.</span> <span m='3533880'>We</span>
  <span m='3533970'>do,</span> <span m='3534180'>actually.</span> <span m='3534950'>Store</span>
  <span m='3535130'>them</span> <span m='3535230'>all.</span> <span m='3536010'>Put</span>
  <span m='3536160'>it</span> <span m='3536250'>all</span> <span m='3536430'>in</span>
  <span m='3536550'>there.</span> </p><p><span m='3537600'>All</span> <span m='3537660'>right.</span>
  <span m='3537860'>I'm</span> <span m='3537970'>going</span> <span m='3538110'>to</span>
  <span m='3538230'>have</span> <span m='3538530'>an</span> <span m='3538590'>actual</span>
  <span m='3538830'>example</span> <span m='3539280'>here.</span> <span m='3554100'>Let's</span>
  <span m='3554300'>do it</span> <span m='3556380'>3</span> <span m='3558319'>slash</span>
  <span m='3559770'>7,</span> <span m='3561186'>9</span> <span m='3563550'>slash</span>
  <span m='3564975'>16,</span> <span m='3568800'>21,</span> <span m='3570400'>42.</span>
  </p><p><span m='3586400'>OK.</span> <span m='3587850'>Cross-links</span> <span m='3588540'>between.</span>
  <span m='3589080'>I won't draw</span> <span m='3589490'>all</span> <span m='3589670'>of</span>
  <span m='3589770'>them.</span> <span m='3590250'>Then</span> <span m='3590670'>we</span>
  <span m='3590790'>store</span> <span m='3591500'>all</span> <span m='3591720'>the</span>
  <span m='3591810'>data</span> <span m='3592075'>up</span> <span m='3592340'>here</span>
  <span m='3592630'>as</span> <span m='3592770'>well.</span> </p><p><span m='3598860'>And</span>
  <span m='3598940'>then</span> <span m='3599750'>the</span> <span m='3599840'>internal</span>
  <span m='3600290'>nodes</span> <span m='3600620'>here</span> <span m='3601040'>are</span>
  <span m='3601130'>going</span> <span m='3601280'>to</span> <span m='3601340'>store</span>
  <span m='3601580'>the</span> <span m='3601700'>max</span> <span m='3602540'>of</span>
  <span m='3602810'>the</span> <span m='3602960'>whole</span> <span m='3603320'>subtree.</span>
  <span m='3603990'>So</span> <span m='3604130'>here</span> <span m='3604340'>the</span>
  <span m='3604430'>max</span> <span m='3604700'>is</span> <span m='3604820'>3.</span>
  <span m='3605565'>Here</span> <span m='3605870'>the</span> <span m='3605990'>max</span>
  <span m='3606290'>is</span> <span m='3606420'>9,</span> <span m='3607580'>16,</span>
  <span m='3609560'>42,</span> <span m='3612010'>42,</span> <span m='3614540'>and</span>
  <span m='3615050'>9.</span> <span m='3618040'>If</span> <span m='3618160'>I</span>
  <span m='3618220'>store</span> <span m='3618400'>the</span> <span m='3618520'>max</span>
  <span m='3619120'>of</span> <span m='3619270'>every</span> <span m='3619510'>subtree,</span>
  <span m='3619990'>then</span> <span m='3620200'>at</span> <span m='3620440'>the</span>
  <span m='3620530'>root.</span> <span m='3621110'>If</span> <span m='3621130'>I</span>
  <span m='3621220'>want</span> <span m='3621400'>to</span> <span m='3621460'>decide</span>
  <span m='3622000'>should</span> <span m='3622130'>I</span> <span m='3622210'>go</span>
  <span m='3622360'>left or should</span> <span m='3622810'>I</span> <span m='3622900'>go</span>
  <span m='3623020'>right,</span> <span m='3623350'>I</span> <span m='3623410'>look</span>
  <span m='3623620'>at</span> <span m='3623710'>the</span> <span m='3623800'>max</span>
  <span m='3624100'>of</span> <span m='3624190'>the</span> <span m='3624280'>left</span>
  <span m='3624490'>subtree</span> <span m='3625620'>and</span> <span m='3625780'>that</span>
  <span m='3625960'>will</span> <span m='3626170'>let</span> <span m='3626260'>me</span>
  <span m='3626350'>know</span> <span m='3626530'>whether</span> <span m='3626710'>I</span>
  <span m='3626740'>should</span> <span m='3626890'>go</span> <span m='3627040'>left</span>
  <span m='3627340'>or</span> <span m='3627400'>right.</span> </p><p><span m='3629020'>So</span>
  <span m='3629230'>now</span> <span m='3629590'>I</span> <span m='3629740'>can</span>
  <span m='3629890'>do</span> <span m='3630060'>binary</span> <span m='3630400'>search.</span>
  <span m='3631780'>I</span> <span m='3631870'>do</span> <span m='3631990'>a</span>
  <span m='3632050'>search</span> <span m='3632350'>up</span> <span m='3632500'>here.</span>
  <span m='3633870'>I</span> <span m='3633910'>want</span> <span m='3634060'>to</span>
  <span m='3634120'>do</span> <span m='3634210'>a</span> <span m='3634240'>search,</span>
  <span m='3634610'>I</span> <span m='3634710'>search</span> <span m='3634930'>the</span>
  <span m='3635050'>tree.</span> <span m='3635650'>This</span> <span m='3635830'>thing</span>
  <span m='3636010'>is</span> <span m='3636130'>laid</span> <span m='3636400'>out</span>
  <span m='3637150'>just</span> <span m='3637360'>like</span> <span m='3637570'>this.</span>
  <span m='3638620'>And</span> <span m='3638650'>so</span> <span m='3639070'>we</span>
  <span m='3639250'>pay</span> <span m='3640310'>log</span> <span m='3640590'>base</span>
  <span m='3640780'>B</span> <span m='3640960'>of N</span> <span m='3642780'>to</span>
  <span m='3642910'>search</span> <span m='3643210'>up</span> <span m='3643330'>here,</span>
  <span m='3646450'>plus</span> <span m='3646710'>1,</span> <span m='3646980'>if</span>
  <span m='3647110'>you</span> <span m='3647230'>want.</span> </p><p><span m='3648350'>And</span>
  <span m='3648490'>then</span> <span m='3648880'>we</span> <span m='3649210'>get</span>
  <span m='3649330'>to</span> <span m='3649460'>a</span> <span m='3649510'>key</span>
  <span m='3649810'>and</span> <span m='3650020'>we're</span> <span m='3650140'>done.</span>
  <span m='3651230'>That's</span> <span m='3651280'>all</span> <span m='3651400'>we</span>
  <span m='3651520'>wanted</span> <span m='3651760'>to</span> <span m='3651880'>know.</span>
  <span m='3652810'>So</span> <span m='3652950'>search</span> <span m='3653260'>is</span>
  <span m='3653350'>now</span> <span m='3653560'>good.</span> </p><p><span m='3655090'>Updates,</span>
  <span m='3657430'>two</span> <span m='3657580'>problems.</span> <span m='3658250'>One</span>
  <span m='3658360'>is</span> <span m='3658480'>that</span> <span m='3659440'>updating</span>
  <span m='3659830'>just</span> <span m='3660100'>this</span> <span m='3660250'>bottom</span>
  <span m='3660550'>part</span> <span m='3660790'>is</span> <span m='3660910'>slow.</span>
  <span m='3661930'>Second</span> <span m='3662260'>problem</span> <span m='3662530'>is</span>
  <span m='3662620'>if</span> <span m='3662770'>I</span> <span m='3662860'>change</span>
  <span m='3663220'>the</span> <span m='3663310'>bottom</span> <span m='3663580'>thing,</span>
  <span m='3663850'>now</span> <span m='3664030'>I</span> <span m='3664090'>have</span>
  <span m='3664210'>to</span> <span m='3664270'>change</span> <span m='3664570'>the</span>
  <span m='3664720'>top</span> <span m='3664990'>thing.</span> <span m='3666620'>But</span>
  <span m='3666850'>let's</span> <span m='3667420'>look</span> <span m='3667600'>at</span>
  <span m='3667660'>that</span> <span m='3667840'>part</span> <span m='3668170'>first.</span>
  <span m='3668500'>It's</span> <span m='3668620'>not</span> <span m='3668800'>so</span>
  <span m='3668950'>bad</span> <span m='3669580'>to</span> <span m='3669700'>update--</span>
  <span m='3670780'>I</span> <span m='3670840'>mean,</span> <span m='3671080'>this</span>
  <span m='3671260'>structure</span> <span m='3671740'>stays</span> <span m='3672100'>the</span>
  <span m='3672220'>same,</span> <span m='3672580'>unless</span> <span m='3672910'>N</span>
  <span m='3673300'>doubles.</span> <span m='3674330'>Then</span> <span m='3674380'>we</span>
  <span m='3674530'>rebuild</span> <span m='3675010'>the</span> <span m='3675100'>entire</span>
  <span m='3675430'>data</span> <span m='3675640'>structure.</span> </p><p><span m='3677020'>But</span>
  <span m='3677230'>basically,</span> <span m='3677590'>this</span> <span m='3677800'>thing</span>
  <span m='3678010'>will</span> <span m='3678100'>stay</span> <span m='3678280'>the</span>
  <span m='3678400'>same.</span> <span m='3679160'>It's</span> <span m='3679180'>just</span>
  <span m='3679360'>data</span> <span m='3679690'>is</span> <span m='3679810'>moving</span>
  <span m='3680110'>around</span> <span m='3680470'>in</span> <span m='3680560'>this</span>
  <span m='3680740'>array.</span> <span m='3681580'>And</span> <span m='3681670'>we</span>
  <span m='3681760'>have</span> <span m='3681880'>to</span> <span m='3682000'>update</span>
  <span m='3682630'>which</span> <span m='3682930'>values</span> <span m='3683620'>are</span>
  <span m='3683710'>stored</span> <span m='3684040'>in</span> <span m='3684160'>this</span>
  <span m='3684280'>structure.</span> <span m='3685060'>The</span> <span m='3685180'>layout</span>
  <span m='3685540'>of</span> <span m='3685630'>the</span> <span m='3685720'>structure,</span>
  <span m='3686170'>the</span> <span m='3686290'>order</span> <span m='3686560'>of</span>
  <span m='3686650'>the</span> <span m='3686740'>nodes,</span> <span m='3687070'>that</span>
  <span m='3687250'>all stays</span> <span m='3687630'>fixed.</span> <span m='3688290'>It's</span>
  <span m='3688560'>just</span> <span m='3688720'>the</span> <span m='3688870'>numbers</span>
  <span m='3689320'>that</span> <span m='3689410'>are</span> <span m='3689500'>being</span>
  <span m='3689680'>written</span> <span m='3689890'>in</span> <span m='3690010'>here</span>
  <span m='3690160'>that</span> <span m='3690310'>change.</span> <span m='3691360'>That's</span>
  <span m='3691750'>the</span> <span m='3691830'>cool</span> <span m='3692110'>idea.</span>
  </p><p><span m='3694300'>So</span> <span m='3699870'>that's</span> <span m='3700020'>step</span>
  <span m='3700290'>2.</span> <span m='3701490'>Let's</span> <span m='3701700'>go</span>
  <span m='3701850'>to</span> <span m='3701940'>step</span> <span m='3702180'>3.</span>
  <span m='3712650'>I</span> <span m='3712730'>actually</span> <span m='3712990'>kind</span>
  <span m='3713170'>of</span> <span m='3713230'>wanted</span> <span m='3713500'>that</span>
  <span m='3713650'>exact</span> <span m='3713980'>picture.</span> <span m='3714880'>That's</span>
  <span m='3715490'>OK.</span> </p><p><span m='3718940'>I</span> <span m='3719060'>need</span>
  <span m='3719240'>to</span> <span m='3719360'>specify</span> <span m='3720050'>how</span>
  <span m='3720740'>updates</span> <span m='3721130'>are</span> <span m='3721190'>done.</span>
  <span m='3725610'>So</span> <span m='3726650'>let's</span> <span m='3726830'>say</span>
  <span m='3727070'>I</span> <span m='3727100'>want</span> <span m='3727310'>to</span>
  <span m='3727370'>do</span> <span m='3727460'>an</span> <span m='3727550'>insertion.</span>
  <span m='3732070'>If</span> <span m='3732220'>I</span> <span m='3732280'>want</span>
  <span m='3732400'>to</span> <span m='3732490'>insert</span> <span m='3732790'>a</span>
  <span m='3732850'>new</span> <span m='3733000'>key,</span> <span m='3733720'>I</span>
  <span m='3733810'>search</span> <span m='3734170'>for</span> <span m='3734260'>the</span>
  <span m='3734350'>key.</span> <span m='3734950'>Maybe</span> <span m='3735220'>it</span>
  <span m='3735300'>fits</span> <span m='3735550'>between</span> <span m='3735910'>7</span>
  <span m='3736240'>and</span> <span m='3736330'>9.</span> <span m='3737830'>Then</span>
  <span m='3738160'>I</span> <span m='3738340'>do</span> <span m='3738640'>the</span>
  <span m='3738970'>insertion</span> <span m='3739570'>in</span> <span m='3739840'>the</span>
  <span m='3739960'>bottom</span> <span m='3740320'>structure</span> <span m='3740680'>in</span>
  <span m='3740800'>the</span> <span m='3740860'>ordered</span> <span m='3741160'>file.</span>
  <span m='3741835'>So</span> <span m='3742090'>we</span> <span m='3742180'>want</span>
  <span m='3742360'>to</span> <span m='3742420'>insert</span> <span m='3742710'>8.</span>
  </p><p><span m='3744190'>These</span> <span m='3744400'>guys</span> <span m='3744610'>move</span>
  <span m='3744820'>around.</span> <span m='3745960'>Then</span> <span m='3746080'>I</span>
  <span m='3746170'>have</span> <span m='3746320'>to</span> <span m='3746410'>propagate</span>
  <span m='3746950'>that</span> <span m='3747130'>information</span> <span m='3747700'>up</span>
  <span m='3747910'>here.</span> <span m='3749180'>And</span> <span m='3749260'>the</span>
  <span m='3749380'>key</span> <span m='3749560'>thing</span> <span m='3749770'>I</span>
  <span m='3749830'>want</span> <span m='3749980'>to</span> <span m='3750040'>specify</span>
  <span m='3751210'>is</span> <span m='3751630'>an</span> <span m='3751780'>update</span>
  <span m='3752680'>does</span> <span m='3752980'>a</span> <span m='3753040'>search.</span>
  <span m='3754950'>Then</span> <span m='3755350'>it</span> <span m='3755800'>updates</span>
  <span m='3756520'>the</span> <span m='3756880'>ordered</span> <span m='3757150'>file.</span>
  <span m='3759220'>That's</span> <span m='3759400'>going</span> <span m='3759520'>to</span>
  <span m='3759580'>take</span> <span m='3759790'>log</span> <span m='3760120'>squared</span>
  <span m='3761380'>N</span> <span m='3761580'>over</span> <span m='3761800'>B.</span>
  </p><p><span m='3764830'>And</span> <span m='3764980'>then</span> <span m='3765220'>we</span>
  <span m='3765370'>want</span> <span m='3765610'>to</span> <span m='3766600'>propagate</span>
  <span m='3767380'>changes</span> <span m='3767950'>into</span> <span m='3768220'>the</span>
  <span m='3768340'>tree</span> <span m='3777650'>in post-order,</span> <span m='3779800'>post-order</span>
  <span m='3780770'>traversal.</span> <span m='3782660'>That's</span> <span m='3782900'>the</span>
  <span m='3782990'>one</span> <span m='3783170'>thing</span> <span m='3783350'>I</span>
  <span m='3783440'>wanted</span> <span m='3783640'>to</span> <span m='3783700'>specify,</span>
  <span m='3785660'>because</span> <span m='3785840'>it</span> <span m='3785960'>actually</span>
  <span m='3786440'>matters</span> <span m='3787160'>in</span> <span m='3787310'>what</span>
  <span m='3787550'>order</span> <span m='3788300'>I</span> <span m='3788420'>update</span>
  <span m='3788780'>the</span> <span m='3788900'>item.</span> </p><p><span m='3789270'>So</span>
  <span m='3789320'>for</span> <span m='3789410'>example,</span> <span m='3790250'>suppose</span>
  <span m='3790610'>I</span> <span m='3790670'>move</span> <span m='3790880'>9</span>
  <span m='3791180'>to</span> <span m='3791300'>the</span> <span m='3791390'>right</span>
  <span m='3791820'>and</span> <span m='3791840'>then</span> <span m='3791960'>I</span>
  <span m='3792050'>insert</span> <span m='3792470'>8</span> <span m='3792890'>here.</span>
  <span m='3794720'>So</span> <span m='3794900'>then</span> <span m='3795680'>this</span>
  <span m='3795890'>thing--</span> <span m='3798440'>let's</span> <span m='3798650'>do</span>
  <span m='3798800'>it,</span> <span m='3800150'>what</span> <span m='3800300'>changes</span>
  <span m='3801110'>in</span> <span m='3801250'>that</span> <span m='3801380'>situation.</span>
  <span m='3802930'>9</span> <span m='3803630'>will</span> <span m='3803810'>change</span>
  <span m='3804290'>to</span> <span m='3804620'>an</span> <span m='3804830'>8</span>
  <span m='3805760'>here,</span> <span m='3806960'>which</span> <span m='3807140'>means</span>
  <span m='3807410'>this</span> <span m='3807590'>value</span> <span m='3807890'>has
  to</span> <span m='3808120'>change</span> <span m='3808460'>to</span> <span m='3808550'>an</span>
  <span m='3808640'>8</span> <span m='3809600'>and</span> <span m='3809870'>this</span>
  <span m='3810050'>value</span> <span m='3810440'>needs</span> <span m='3810650'>to</span>
  <span m='3810710'>change</span> <span m='3811010'>to</span> <span m='3811100'>an</span>
  <span m='3811190'>8.</span> </p><p><span m='3812630'>And</span> <span m='3813290'>this</span>
  <span m='3813500'>one</span> <span m='3814130'>I</span> <span m='3814700'>can't</span>
  <span m='3814910'>quite</span> <span m='3815120'>update</span> <span m='3815360'>yet,</span>
  <span m='3815570'>because</span> <span m='3815750'>I</span> <span m='3815810'>need</span>
  <span m='3815960'>to</span> <span m='3816140'>do</span> <span m='3816290'>the</span>
  <span m='3816470'>other</span> <span m='3816710'>tree.</span> <span m='3817460'>So</span>
  <span m='3817790'>here</span> <span m='3818270'>I</span> <span m='3818510'>change</span>
  <span m='3818840'>this</span> <span m='3819020'>value</span> <span m='3819440'>to</span>
  <span m='3819830'>a</span> <span m='3820900'>9.</span> <span m='3823010'>This</span>
  <span m='3823190'>one</span> <span m='3823400'>doesn't</span> <span m='3823700'>change,</span>
  <span m='3824180'>so</span> <span m='3824300'>this</span> <span m='3824450'>is</span>
  <span m='3824570'>OK.</span> <span m='3825470'>This</span> <span m='3825620'>is</span>
  <span m='3825740'>OK.</span> <span m='3826700'>This</span> <span m='3826880'>is</span>
  <span m='3827060'>OK.</span> <span m='3828000'>Just</span> <span m='3828150'>taking</span>
  <span m='3828410'>the</span> <span m='3828530'>maxes</span> <span m='3828795'>as</span>
  <span m='3829060'>I</span> <span m='3829160'>propagate</span> <span m='3829610'>up.</span>
  </p><p><span m='3830210'>So</span> <span m='3830390'>the</span> <span m='3830480'>red</span>
  <span m='3830690'>things</span> <span m='3830960'>are</span> <span m='3831050'>the</span>
  <span m='3831140'>nodes</span> <span m='3831350'>that</span> <span m='3831470'>I</span>
  <span m='3831590'>touch</span> <span m='3832940'>and</span> <span m='3833060'>compute</span>
  <span m='3833330'>the</span> <span m='3833420'>maxes</span> <span m='3833780'>of.
  And</span> <span m='3834020'>the</span> <span m='3834110'>order</span> <span m='3834470'>I</span>
  <span m='3834560'>did</span> <span m='3834740'>it</span> <span m='3834830'>was</span>
  <span m='3834980'>a post-order</span> <span m='3835500'>traversal.</span> <span
  m='3835910'>I</span> <span m='3836030'>need</span> <span m='3836240'>to</span> <span
  m='3836360'>do</span> <span m='3836480'>a post-order</span> <span m='3836960'>traversal</span>
  <span m='3837560'>in</span> <span m='3837650'>order</span> <span m='3837830'>to</span>
  <span m='3837950'>compute</span> <span m='3838250'>maxes.</span> <span m='3839270'>I</span>
  <span m='3839360'>need</span> <span m='3839540'>to</span> <span m='3839690'>know</span>
  <span m='3839870'>what</span> <span m='3840050'>the</span> <span m='3840170'>max</span>
  <span m='3840470'>of</span> <span m='3840560'>this subtree</span> <span m='3841130'>is</span>
  <span m='3841310'>and</span> <span m='3841520'>this subtree</span> <span m='3842030'>before</span>
  <span m='3842360'>I</span> <span m='3842420'>can re-compute</span> <span m='3843500'>the</span>
  <span m='3843590'>max</span> <span m='3843860'>of</span> <span m='3843920'>the</span>
  <span m='3844020'>root.</span> <span m='3846860'>So</span> <span m='3846970'>it's</span>
  <span m='3847180'>really</span> <span m='3847390'>the</span> <span m='3847510'>obvious</span>
  <span m='3847840'>algorithm.</span> </p><p><span m='3849100'>Now,</span> <span m='3849310'>the</span>
  <span m='3849460'>interesting</span> <span m='3849880'>part</span> <span m='3850120'>is</span>
  <span m='3850270'>the</span> <span m='3850390'>analysis.</span> <span m='3859590'>So</span>
  <span m='3860080'>searches</span> <span m='3860730'>we've</span> <span m='3860880'>already</span>
  <span m='3861150'>analyzed.</span> <span m='3861900'>We</span> <span m='3862050'>don't</span>
  <span m='3862200'>need</span> <span m='3862350'>to</span> <span m='3862440'>do</span>
  <span m='3862560'>anything</span> <span m='3862900'>there.</span> <span m='3863120'>That's</span>
  <span m='3863330'>log</span> <span m='3863570'>base B</span> <span m='3863950'>of
  N.</span> </p><p><span m='3869790'>But</span> <span m='3870120'>updates</span> <span
  m='3870570'>are</span> <span m='3870720'>the</span> <span m='3870840'>interesting</span>
  <span m='3871230'>thing</span> <span m='3871380'>to</span> <span m='3871470'>analyze.</span>
  <span m='3883860'>And</span> <span m='3884010'>again</span> <span m='3884940'>we're</span>
  <span m='3885060'>going</span> <span m='3885180'>to</span> <span m='3885270'>look</span>
  <span m='3885570'>at</span> <span m='3885770'>the</span> <span m='3886030'>level</span>
  <span m='3886320'>of</span> <span m='3886440'>detail</span> <span m='3889230'>that</span>
  <span m='3889380'>straddles</span> <span m='3890360'>B,</span> <span m='3892410'>just</span>
  <span m='3892620'>like</span> <span m='3892800'>before.</span> <span m='3901490'>So</span>
  <span m='3901890'>let</span> <span m='3901970'>me</span> <span m='3902090'>draw</span>
  <span m='3902870'>a good</span> <span m='3902930'>picture.</span> <span m='3920675'>I'm
  going to draw it</span> <span m='3921170'>slightly</span> <span m='3921470'>differently</span>
  <span m='3921890'>from</span> <span m='3922160'>how I drew it</span> <span m='3922580'>last</span>
  <span m='3922820'>time.</span> </p><p><span m='3940560'>OK.</span> <span m='3944940'>What</span>
  <span m='3945090'>I'm</span> <span m='3945180'>drawing</span> <span m='3945420'>here</span>
  <span m='3945570'>is</span> <span m='3945660'>actually</span> <span m='3945900'>the</span>
  <span m='3946020'>bottom</span> <span m='3946350'>of</span> <span m='3946470'>the</span>
  <span m='3946590'>tree.</span> <span m='3948510'>So</span> <span m='3948610'>a</span>
  <span m='3948710'>real</span> <span m='3948780'>tree</span> <span m='3948990'>is</span>
  <span m='3949110'>like</span> <span m='3949470'>this.</span> <span m='3950760'>And</span>
  <span m='3950910'>I'm</span> <span m='3951000'>looking</span> <span m='3951300'>at</span>
  <span m='3951480'>the</span> <span m='3952260'>bottom,</span> <span m='3952800'>where</span>
  <span m='3952920'>the</span> <span m='3953010'>leaves</span> <span m='3953370'>are,</span>
  <span m='3953580'>because</span> <span m='3953880'>I</span> <span m='3953940'>care</span>
  <span m='3954150'>about</span> <span m='3954390'>where</span> <span m='3954570'>I</span>
  <span m='3954660'>connect</span> <span m='3954990'>to</span> <span m='3955080'>this</span>
  <span m='3955230'>ordered</span> <span m='3955500'>file.</span> <span m='3956960'>So</span>
  <span m='3957090'>there's</span> <span m='3957330'>the</span> <span m='3957420'>ordered</span>
  <span m='3957630'>file</span> <span m='3957900'>at</span> <span m='3957990'>the</span>
  <span m='3958080'>bottom.</span> </p><p><span m='3959700'>And I'm</span> <span m='3959880'>refining</span>
  <span m='3960750'>each</span> <span m='3961080'>triangle</span> <span m='3961590'>recursively</span>
  <span m='3962190'>until</span> <span m='3962520'>they're</span> <span m='3962740'>size</span>
  <span m='3962960'>less</span> <span m='3963180'>than</span> <span m='3963300'>B.</span>
  <span m='3963480'>They're</span> <span m='3963570'>going</span> <span m='3963720'>to</span>
  <span m='3963780'>be</span> <span m='3963870'>somewhere</span> <span m='3964140'>between</span>
  <span m='3964440'>root</span> <span m='3964650'>B</span> <span m='3964980'>and</span>
  <span m='3965280'>B.</span> <span m='3966900'>These</span> <span m='3967110'>big</span>
  <span m='3967320'>triangles</span> <span m='3968340'>are</span> <span m='3968550'>bigger</span>
  <span m='3968820'>than</span> <span m='3968970'>B.</span> <span m='3971640'>OK.</span>
  <span m='3973344'>So</span> <span m='3973770'>that's</span> <span m='3974370'>where</span>
  <span m='3974490'>I</span> <span m='3974550'>want</span> <span m='3974670'>to</span>
  <span m='3974730'>look</span> <span m='3974880'>at</span> <span m='3974970'>things.</span>
  </p><p><span m='3975360'>Now,</span> <span m='3976530'>when</span> <span m='3976680'>we</span>
  <span m='3976950'>update</span> <span m='3977760'>in</span> <span m='3978000'>the</span>
  <span m='3978150'>ordered</span> <span m='3978480'>file,</span> <span m='3979260'>we</span>
  <span m='3979320'>have</span> <span m='3979440'>this</span> <span m='3979620'>theorem.</span>
  <span m='3979890'>It</span> <span m='3979950'>says</span> <span m='3980310'>you</span>
  <span m='3980520'>move</span> <span m='3980850'>elements</span> <span m='3981330'>in</span>
  <span m='3981450'>an</span> <span m='3981630'>interval.</span> <span m='3982990'>So</span>
  <span m='3983040'>what</span> <span m='3983190'>changes</span> <span m='3983670'>is</span>
  <span m='3983810'>an</span> <span m='3983980'>interval.</span> <span m='3984600'>The</span>
  <span m='3984750'>interval</span> <span m='3985140'>has</span> <span m='3985320'>size</span>
  <span m='3985650'>log</span> <span m='3985980'>squared</span> <span m='3986280'>N</span>
  <span m='3986430'>amortized.</span> </p><p><span m='3987960'>So</span> <span m='3989130'>we</span>
  <span m='3989460'>are</span> <span m='3989610'>updating</span> <span m='3991110'>some</span>
  <span m='3991560'>interval</span> <span m='3992130'>here,</span> <span m='3993900'>maybe</span>
  <span m='3994260'>something</span> <span m='3994650'>like</span> <span m='3994830'>this.</span>
  <span m='3999450'>And</span> <span m='3999630'>so</span> <span m='4000380'>all</span>
  <span m='4000710'>of</span> <span m='4000800'>these</span> <span m='4001010'>items</span>
  <span m='4003260'>change,</span> <span m='4004370'>let's</span> <span m='4004490'>say.</span>
  <span m='4004790'>Now,</span> <span m='4005000'>this</span> <span m='4005150'>is</span>
  <span m='4005210'>not</span> <span m='4005390'>going</span> <span m='4005510'>to</span>
  <span m='4005570'>be</span> <span m='4005660'>too</span> <span m='4005810'>big.</span>
  <span m='4006050'>It's</span> <span m='4006140'>going</span> <span m='4006290'>to</span>
  <span m='4006350'>be</span> <span m='4006410'>log</span> <span m='4006690'>square</span>
  <span m='4006870'>N</span> <span m='4007140'>amortized.</span> </p><p><span m='4013440'>And</span>
  <span m='4014040'>all</span> <span m='4014280'>of</span> <span m='4014370'>the</span>
  <span m='4014490'>ancestors</span> <span m='4015060'>of</span> <span m='4015120'>those</span>
  <span m='4015360'>nodes</span> <span m='4015660'>have</span> <span m='4015870'>to</span>
  <span m='4015990'>be</span> <span m='4016260'>updated,</span> <span m='4016980'>potentially.</span>
  <span m='4018090'>So</span> <span m='4018630'>all</span> <span m='4019080'>these</span>
  <span m='4019290'>guys</span> <span m='4019740'>are</span> <span m='4019800'>going</span>
  <span m='4019900'>to</span> <span m='4019980'>get</span> <span m='4020070'>updated.</span>
  <span m='4021150'>Some</span> <span m='4021510'>of</span> <span m='4021630'>this</span>
  <span m='4021900'>tree,</span> <span m='4023080'>this</span> <span m='4023280'>path,</span>
  <span m='4024870'>all</span> <span m='4025170'>of</span> <span m='4025260'>this</span>
  <span m='4025440'>stuff</span> <span m='4025770'>is</span> <span m='4025860'>going</span>
  <span m='4025980'>to</span> <span m='4026070'>get</span> <span m='4026160'>updated,</span>
  <span m='4027420'>some</span> <span m='4027720'>of</span> <span m='4027780'>this</span>
  <span m='4027990'>stuff,</span> <span m='4029070'>the</span> <span m='4029190'>path</span>
  <span m='4029550'>up</span> <span m='4029700'>to</span> <span m='4029790'>here.</span>
  <span m='4030930'>The</span> <span m='4031020'>path</span> <span m='4031290'>up</span>
  <span m='4031410'>to</span> <span m='4031500'>the</span> <span m='4031590'>root</span>
  <span m='4031920'>gets</span> <span m='4032130'>updated,</span> <span m='4033440'>in</span>
  <span m='4033510'>general,</span> <span m='4034760'>and</span> <span m='4034890'>all</span>
  <span m='4035190'>these</span> <span m='4035340'>nodes</span> <span m='4035580'>get</span>
  <span m='4035760'>touched.</span> </p><p><span m='4036220'>Now,</span> <span m='4036270'>I</span>
  <span m='4036360'>claim</span> <span m='4037230'>that's</span> <span m='4037730'>cheap,</span>
  <span m='4039240'>no</span> <span m='4039420'>more</span> <span m='4039600'>expensive</span>
  <span m='4040080'>than</span> <span m='4040230'>updating</span> <span m='4040680'>down</span>
  <span m='4040890'>here.</span> <span m='4043520'>Let's</span> <span m='4043670'>prove</span>
  <span m='4043910'>that.</span> </p><p><span m='4066440'>OK.</span> <span m='4066950'>First</span>
  <span m='4067650'>issue</span> <span m='4067920'>is,</span> <span m='4068340'>in</span>
  <span m='4068490'>what</span> <span m='4068670'>order</span> <span m='4068940'>do</span>
  <span m='4069090'>I</span> <span m='4069180'>visit</span> <span m='4069450'>the</span>
  <span m='4069540'>nodes</span> <span m='4069840'>here?</span> <span m='4070110'>I</span>
  <span m='4070170'>want</span> <span m='4070290'>to</span> <span m='4070500'>think</span>
  <span m='4070770'>about</span> <span m='4071100'>this post-order.</span> <span m='4072960'>Maybe</span>
  <span m='4073230'>I'll</span> <span m='4073350'>use</span> <span m='4074430'>another</span>
  <span m='4074700'>color</span> <span m='4075445'>to</span> <span m='4075770'>draw</span>
  <span m='4076080'>that.</span> </p><p><span m='4077170'>So</span> <span m='4078090'>let's</span>
  <span m='4078300'>say</span> <span m='4078450'>we</span> <span m='4078810'>start</span>
  <span m='4079020'>by</span> <span m='4079140'>updating</span> <span m='4079530'>this</span>
  <span m='4079740'>guy.</span> <span m='4080760'>We</span> <span m='4080940'>update</span>
  <span m='4081240'>this</span> <span m='4081390'>value.</span> <span m='4083000'>Then</span>
  <span m='4083130'>we</span> <span m='4083220'>go--</span> <span m='4083910'>I'm</span>
  <span m='4084030'>doing</span> <span m='4084180'>a</span> <span m='4084240'>post-order</span>
  <span m='4084750'>traversal,</span> <span m='4085710'>this</span> <span m='4085910'>tree.</span>
  </p><p><span m='4086220'>Once</span> <span m='4086400'>I've</span> <span m='4086520'>completely</span>
  <span m='4086940'>finished</span> <span m='4087330'>here,</span> <span m='4088050'>I</span>
  <span m='4088170'>can</span> <span m='4088350'>go</span> <span m='4088500'>up</span>
  <span m='4088650'>here,</span> <span m='4089610'>maybe</span> <span m='4089850'>go</span>
  <span m='4090100'>up</span> <span m='4090300'>here,</span> <span m='4091050'>visit</span>
  <span m='4091440'>over</span> <span m='4091710'>down</span> <span m='4091980'>this</span>
  <span m='4092190'>way,</span> <span m='4094350'>fix</span> <span m='4094620'>all</span>
  <span m='4094860'>the</span> <span m='4094980'>maxes</span> <span m='4095430'>here.</span>
  <span m='4096080'>Then</span> <span m='4096300'>I</span> <span m='4096359'>go</span>
  <span m='4096569'>up,</span> <span m='4096720'>fix</span> <span m='4096960'>all</span>
  <span m='4097109'>the</span> <span m='4097200'>maxes</span> <span m='4097560'>here,</span>
  <span m='4098220'>fix</span> <span m='4098520'>all</span> <span m='4098640'>the</span>
  <span m='4098700'>maxes,</span> <span m='4099779'>the</span> <span m='4099899'>maxes.</span>
  <span m='4100229'>When</span> <span m='4100350'>I</span> <span m='4100439'>come</span>
  <span m='4100649'>up,</span> <span m='4100830'>then</span> <span m='4101010'>I</span>
  <span m='4101069'>can</span> <span m='4101250'>fix</span> <span m='4101430'>the</span>
  <span m='4101520'>maxes</span> <span m='4101910'>up</span> <span m='4102029'>here,</span>
  <span m='4103290'>and</span> <span m='4103380'>so</span> <span m='4103560'>on.</span>
  </p><p><span m='4104460'>OK.</span> <span m='4104670'>Think</span> <span m='4104910'>about</span>
  <span m='4105120'>that</span> <span m='4105330'>order.</span> <span m='4106890'>If</span>
  <span m='4106979'>you</span> <span m='4107069'>just</span> <span m='4107220'>look</span>
  <span m='4107370'>at</span> <span m='4107460'>the</span> <span m='4107550'>big</span>
  <span m='4107760'>picture,</span> <span m='4108059'>which is</span> <span m='4108359'>which</span>
  <span m='4108660'>triangles</span> <span m='4109319'>are</span> <span m='4109399'>we</span>
  <span m='4109659'>visiting,</span> <span m='4110490'>what</span> <span m='4110670'>we</span>
  <span m='4110790'>do</span> <span m='4111060'>is</span> <span m='4111180'>we</span>
  <span m='4111270'>visit</span> <span m='4111540'>this</span> <span m='4111720'>triangle,</span>
  <span m='4112140'>then</span> <span m='4112319'>this</span> <span m='4112529'>one,</span>
  <span m='4112800'>then</span> <span m='4112920'>this</span> <span m='4113100'>triangle,</span>
  <span m='4113490'>then</span> <span m='4113670'>this</span> <span m='4113850'>one,</span>
  <span m='4114090'>then</span> <span m='4114240'>this</span> <span m='4114390'>triangle,</span>
  <span m='4114770'>then</span> <span m='4114870'>this</span> <span m='4115080'>one.</span>
  <span m='4116580'>I</span> <span m='4116670'>guess</span> <span m='4116819'>this</span>
  <span m='4117000'>is</span> <span m='4117100'>the</span> <span m='4117240'>better</span>
  <span m='4117450'>picture.</span> <span m='4118080'>This</span> <span m='4118260'>triangle,</span>
  <span m='4118649'>left</span> <span m='4118920'>one,</span> <span m='4119160'>this</span>
  <span m='4119310'>triangle,</span> <span m='4119720'>next</span> <span m='4120060'>child,</span>
  <span m='4120580'>this</span> <span m='4121590'>parent,</span> <span m='4122060'>next</span>
  <span m='4122240'>child,</span> <span m='4122569'>this</span> <span m='4122729'>parent,</span>
  <span m='4123000'>next</span> <span m='4123210'>child.</span> </p><p><span m='4123970'>And
  when</span> <span m='4124090'>we're</span> <span m='4124260'>done,</span> <span
  m='4124620'>we</span> <span m='4124710'>go</span> <span m='4124859'>over</span>
  <span m='4125040'>to</span> <span m='4125189'>the</span> <span m='4125310'>next</span>
  <span m='4125609'>big</span> <span m='4125850'>triangle.</span> <span m='4126990'>Within</span>
  <span m='4127290'>a</span> <span m='4127350'>big</span> <span m='4127529'>triangle,</span>
  <span m='4128550'>we</span> <span m='4128670'>alternate</span> <span m='4129240'>between</span>
  <span m='4129600'>two</span> <span m='4129840'>small</span> <span m='4130109'>triangles.</span>
  <span m='4131550'>As</span> <span m='4131670'>long</span> <span m='4131939'>as</span>
  <span m='4132060'>we</span> <span m='4132210'>have</span> <span m='4133620'>four</span>
  <span m='4135029'>blocks</span> <span m='4135540'>of</span> <span m='4135960'>cache,</span>
  <span m='4137279'>this</span> <span m='4137430'>will</span> <span m='4137550'>be</span>
  <span m='4137700'>good,</span> <span m='4138479'>because</span> <span m='4138689'>there's</span>
  <span m='4138899'>at</span> <span m='4138960'>most</span> <span m='4139200'>two</span>
  <span m='4139410'>blocks</span> <span m='4139830'>for</span> <span m='4139979'>this</span>
  <span m='4140880'>little</span> <span m='4141149'>triangle,</span> <span m='4141569'>at</span>
  <span m='4141660'>most</span> <span m='4141870'>two</span> <span m='4142050'>blocks</span>
  <span m='4142350'>for</span> <span m='4142439'>this</span> <span m='4142590'>little</span>
  <span m='4142770'>triangle.</span> <span m='4143100'>So</span> <span m='4143220'>jumping</span>
  <span m='4143640'>back</span> <span m='4143850'>and</span> <span m='4143939'>forth</span>
  <span m='4144210'>between</span> <span m='4144540'>these</span> <span m='4144750'>is</span>
  <span m='4144870'>basically</span> <span m='4145290'>free.</span> </p><p><span m='4147479'>So</span>
  <span m='4147870'>we</span> <span m='4148109'>assume--</span> <span m='4151720'>white</span>
  <span m='4152140'>chalk.</span> <span m='4157170'>We</span> <span m='4157260'>assume</span>
  <span m='4157590'>that</span> <span m='4157740'>we</span> <span m='4157890'>have</span>
  <span m='4158850'>at</span> <span m='4158939'>least</span> <span m='4159330'>four</span>
  <span m='4159720'>blocks</span> <span m='4160200'>of</span> <span m='4160290'>cache.</span>
  <span m='4162130'>Post-order</span> <span m='4163260'>traversal</span> <span m='4167010'>alternates</span>
  <span m='4171540'>between</span> <span m='4173580'>two</span> <span m='4174870'>little</span>
  <span m='4175200'>triangles.</span> <span m='4177840'>So</span> <span m='4178069'>this</span>
  <span m='4178609'>part</span> <span m='4178859'>is</span> <span m='4178979'>free.</span>
  </p><p><span m='4180460'>The</span> <span m='4180540'>only</span> <span m='4180810'>issue</span>
  <span m='4181020'>is,</span> <span m='4181140'>how</span> <span m='4181380'>many</span>
  <span m='4181620'>little</span> <span m='4181979'>triangles</span> <span m='4182609'>do</span>
  <span m='4182790'>I</span> <span m='4182880'>need</span> <span m='4183090'>to</span>
  <span m='4183390'>load</span> <span m='4184240'>overall?</span> <span m='4189540'>Sorry.</span>
  <span m='4189819'>I</span> <span m='4189960'>should</span> <span m='4190140'>say</span>
  <span m='4190390'>I'm</span> <span m='4190590'>just</span> <span m='4190830'>looking</span>
  <span m='4191160'>at</span> <span m='4191450'>the</span> <span m='4191520'>little</span>
  <span m='4191729'>triangles</span> <span m='4192149'>in</span> <span m='4192210'>the</span>
  <span m='4192330'>bottom</span> <span m='4192720'>two</span> <span m='4192930'>levels.</span>
  <span m='4194640'>So</span> <span m='4194760'>this</span> <span m='4195030'>is</span>
  <span m='4196170'>in</span> <span m='4196740'>the</span> <span m='4196860'>bottom</span>
  <span m='4199050'>two</span> <span m='4200190'>levels.</span> <span m='4202380'>Sorry.</span>
  <span m='4202540'>I</span> <span m='4202750'>forgot</span> <span m='4202920'>to</span>
  <span m='4202980'>mention</span> <span m='4203290'>that.</span> </p><p><span m='4203370'>As
  soon</span> <span m='4203580'>as</span> <span m='4203670'>you</span> <span m='4203730'>go</span>
  <span m='4203910'>outside</span> <span m='4204540'>the</span> <span m='4204630'>bottom</span>
  <span m='4205020'>big</span> <span m='4205200'>triangle,</span> <span m='4206880'>let's</span>
  <span m='4207090'>not</span> <span m='4207300'>think</span> <span m='4207510'>about</span>
  <span m='4207720'>it</span> <span m='4207840'>yet.</span> <span m='4208380'>Worry</span>
  <span m='4208530'>about</span> <span m='4208740'>that</span> <span m='4208860'>later.</span>
  </p><p><span m='4210610'>So</span> <span m='4210660'>just</span> <span m='4210900'>looking</span>
  <span m='4211140'>at</span> <span m='4211230'>these</span> <span m='4211410'>bottom</span>
  <span m='4211710'>two</span> <span m='4211860'>levels</span> <span m='4212160'>that</span>
  <span m='4212280'>I</span> <span m='4212370'>drew,</span> <span m='4212930'>we're</span>
  <span m='4213120'>just</span> <span m='4213270'>doing</span> <span m='4213450'>this</span>
  <span m='4213540'>alternation.</span> <span m='4214660'>And</span> <span m='4214770'>so</span>
  <span m='4214920'>the</span> <span m='4215040'>only</span> <span m='4215250'>issue</span>
  <span m='4215460'>is,</span> <span m='4215550'>how</span> <span m='4215820'>many</span>
  <span m='4216060'>little</span> <span m='4216270'>triangles</span> <span m='4216690'>do</span>
  <span m='4216810'>I</span> <span m='4216870'>have</span> <span m='4217080'>to</span>
  <span m='4217140'>load?</span> <span m='4218320'>So</span> <span m='4218880'>there</span>
  <span m='4219030'>could</span> <span m='4219210'>be</span> <span m='4220380'>these</span>
  <span m='4220680'>guys.</span> <span m='4222390'>These</span> <span m='4222600'>guys</span>
  <span m='4222780'>are</span> <span m='4222870'>good,</span> <span m='4223110'>because</span>
  <span m='4223890'>I'm</span> <span m='4224010'>touching</span> <span m='4224400'>all</span>
  <span m='4224520'>these</span> <span m='4224700'>nodes.</span> <span m='4225650'>The</span>
  <span m='4225750'>number</span> <span m='4225990'>of</span> <span m='4226080'>nodes</span>
  <span m='4226350'>here</span> <span m='4226470'>was</span> <span m='4226650'>bigger</span>
  <span m='4227010'>than</span> <span m='4227190'>B,</span> <span m='4228030'>so</span>
  <span m='4228180'>if</span> <span m='4228270'>I</span> <span m='4228330'>take</span>
  <span m='4229350'>this</span> <span m='4229590'>divided</span> <span m='4229920'>by</span>
  <span m='4230040'>B</span> <span m='4230280'>in</span> <span m='4230400'>the</span>
  <span m='4230490'>ceiling,</span> <span m='4230910'>the</span> <span m='4231000'>ceiling</span>
  <span m='4231360'>doesn't</span> <span m='4231600'>hurt</span> <span m='4231810'>me,</span>
  <span m='4232410'>because</span> <span m='4232620'>the</span> <span m='4232680'>overall</span>
  <span m='4233010'>size</span> <span m='4233310'>is</span> <span m='4233400'>bigger</span>
  <span m='4233610'>than</span> <span m='4233770'>B.</span> </p><p><span m='4235350'>These</span>
  <span m='4235530'>guys I</span> <span m='4235740'>have</span> <span m='4235860'>to</span>
  <span m='4235950'>be</span> <span m='4236040'>a</span> <span m='4236070'>little</span>
  <span m='4236280'>bit</span> <span m='4236400'>careful.</span> <span m='4236790'>Here</span>
  <span m='4237070'>the</span> <span m='4237170'>ceiling</span> <span m='4237420'>might</span>
  <span m='4237570'>hurt</span> <span m='4237750'>me,</span> <span m='4238710'>because</span>
  <span m='4238920'>I</span> <span m='4238980'>only</span> <span m='4239250'>read</span>
  <span m='4239490'>some</span> <span m='4239850'>of</span> <span m='4239940'>these</span>
  <span m='4240120'>nodes.</span> <span m='4240370'>It</span> <span m='4240450'>may
  be</span> <span m='4240720'>much</span> <span m='4240960'>less</span> <span m='4241210'>than</span>
  <span m='4241320'>B. It</span> <span m='4241500'>could</span> <span m='4241620'>be</span>
  <span m='4241860'>as</span> <span m='4241980'>low</span> <span m='4242190'>as</span>
  <span m='4242310'>root</span> <span m='4242510'>B.</span> <span m='4243570'>I</span>
  <span m='4243680'>divide</span> <span m='4243990'>by</span> <span m='4244110'>B,</span>
  <span m='4244290'>take</span> <span m='4244500'>the</span> <span m='4244620'>ceiling,</span>
  <span m='4244980'>I</span> <span m='4245070'>get</span> <span m='4245420'>1,</span>
  <span m='4246240'>so</span> <span m='4246420'>I</span> <span m='4246810'>have</span>
  <span m='4246930'>to</span> <span m='4247020'>pay</span> <span m='4247200'>1</span>
  <span m='4247410'>at</span> <span m='4247500'>the</span> <span m='4247590'>beginning,</span>
  <span m='4248490'>1</span> <span m='4248700'>at</span> <span m='4248790'>the</span>
  <span m='4248940'>end.</span> <span m='4249870'>But</span> <span m='4250020'>in</span>
  <span m='4250190'>between,</span> <span m='4250860'>I</span> <span m='4250950'>get</span>
  <span m='4251070'>to</span> <span m='4251190'>divide</span> <span m='4251490'>by</span>
  <span m='4251640'>B.</span> </p><p><span m='4253710'>So</span> <span m='4254010'>the</span>
  <span m='4254130'>number</span> <span m='4254910'>of</span> <span m='4255810'>little</span>
  <span m='4256080'>triangles</span> <span m='4257640'>in</span> <span m='4257790'>the</span>
  <span m='4257880'>bottom</span> <span m='4258240'>two</span> <span m='4258420'>levels</span>
  <span m='4260460'>that</span> <span m='4261850'>I</span> <span m='4262300'>visit</span>
  <span m='4263460'>is</span> <span m='4263670'>going</span> <span m='4263940'>to</span>
  <span m='4264090'>be</span> <span m='4267000'>1</span> <span m='4267600'>plus</span>
  <span m='4270330'>log</span> <span m='4270690'>squared</span> <span m='4271260'>N</span>
  <span m='4272340'>over</span> <span m='4272610'>B</span> <span m='4273720'>amortized.</span>
  <span m='4275140'>The</span> <span m='4275250'>size</span> <span m='4275580'>of</span>
  <span m='4275640'>the</span> <span m='4275730'>interval is</span> <span m='4276120'>log</span>
  <span m='4276360'>squared</span> <span m='4276600'>N</span> <span m='4276750'>amortized,</span>
  <span m='4278010'>so</span> <span m='4278820'>this</span> <span m='4279030'>would</span>
  <span m='4279120'>be</span> <span m='4279420'>if</span> <span m='4279590'>I'm</span>
  <span m='4279720'>perfect.</span> <span m='4280650'>But</span> <span m='4280800'>I</span>
  <span m='4280860'>get</span> <span m='4281040'>a</span> <span m='4281110'>plus</span>
  <span m='4281430'>1</span> <span m='4281700'>because</span> <span m='4282000'>of</span>
  <span m='4282660'>various</span> <span m='4282980'>ceilings.</span> </p><p><span
  m='4287070'>And</span> <span m='4287340'>also,</span> <span m='4289800'>the</span>
  <span m='4289920'>number</span> <span m='4290160'>of</span> <span m='4290220'>blocks</span>
  <span m='4291750'>is</span> <span m='4291900'>the</span> <span m='4291990'>same,</span>
  <span m='4294720'>because</span> <span m='4294930'>each</span> <span m='4295290'>of</span>
  <span m='4295410'>these</span> <span m='4295650'>little</span> <span m='4295890'>triangles</span>
  <span m='4296400'>fits</span> <span m='4297120'>inside</span> <span m='4299256'>at</span>
  <span m='4299670'>most</span> <span m='4299940'>two</span> <span m='4300180'>blocks.</span>
  <span m='4300780'>So</span> <span m='4300990'>it's</span> <span m='4301080'>going</span>
  <span m='4301200'>to</span> <span m='4301290'>be</span> <span m='4301410'>order</span>
  <span m='4301710'>1</span> <span m='4301920'>plus</span> <span m='4302190'>log</span>
  <span m='4302370'>squared</span> <span m='4302610'>N</span> <span m='4302730'>over</span>
  <span m='4302940'>B.</span> </p><p><span m='4303922'>OK.</span> <span m='4304330'>So</span>
  <span m='4304980'>I</span> <span m='4305070'>can</span> <span m='4305250'>touch</span>
  <span m='4305550'>all</span> <span m='4305640'>those</span> <span m='4305970'>in</span>
  <span m='4306180'>this</span> <span m='4306330'>much</span> <span m='4306540'>time,</span>
  <span m='4311940'>because</span> <span m='4312180'>I</span> <span m='4312300'>assume</span>
  <span m='4312600'>that</span> <span m='4312750'>I</span> <span m='4312840'>can</span>
  <span m='4313020'>alternate</span> <span m='4313470'>between</span> <span m='4313800'>two</span>
  <span m='4313980'>of</span> <span m='4314070'>them</span> <span m='4314610'>quickly.</span>
  <span m='4315630'>And</span> <span m='4315720'>once</span> <span m='4315960'>I</span>
  <span m='4316080'>finish</span> <span m='4316560'>one</span> <span m='4316740'>of</span>
  <span m='4316830'>these</span> <span m='4317040'>leaf</span> <span m='4317550'>blocks,</span>
  <span m='4318030'>I</span> <span m='4318090'>never</span> <span m='4318390'>touch</span>
  <span m='4318630'>it</span> <span m='4318720'>again,</span> <span m='4320670'>so</span>
  <span m='4320820'>I</span> <span m='4320880'>visit</span> <span m='4321120'>each</span>
  <span m='4321270'>block</span> <span m='4321540'>essentially</span> <span m='4321990'>only</span>
  <span m='4322230'>once</span> <span m='4324060'>as</span> <span m='4324180'>long</span>
  <span m='4324330'>as</span> <span m='4324390'>my</span> <span m='4324540'>cache</span>
  <span m='4324810'>is</span> <span m='4324910'>this</span> <span m='4325020'>big.</span>
  </p><p><span m='4326850'>Cool.</span> <span m='4327330'>So</span> <span m='4327480'>that</span>
  <span m='4327690'>deals</span> <span m='4327960'>with</span> <span m='4328050'>the</span>
  <span m='4328140'>bottom</span> <span m='4328470'>two</span> <span m='4328620'>levels.</span>
  <span m='4328980'>I</span> <span m='4329070'>claim</span> <span m='4329250'>the</span>
  <span m='4329340'>bottom</span> <span m='4329610'>two</span> <span m='4329760'>levels</span>
  <span m='4330210'>only</span> <span m='4330510'>pay</span> <span m='4330870'>this.</span>
  <span m='4331680'>And</span> <span m='4331890'>we</span> <span m='4331950'>were</span>
  <span m='4332040'>already</span> <span m='4332370'>paying</span> <span m='4332640'>that</span>
  <span m='4332820'>to</span> <span m='4332910'>update</span> <span m='4333240'>the</span>
  <span m='4333310'>ordered</span> <span m='4333570'>file,</span> <span m='4334200'>so</span>
  <span m='4334500'>it's</span> <span m='4334620'>no</span> <span m='4334800'>worse.</span>
  </p><p><span m='4336140'>Now,</span> <span m='4336480'>there's</span> <span m='4336690'>the</span>
  <span m='4336780'>levels</span> <span m='4337200'>above</span> <span m='4337590'>this</span>
  <span m='4337800'>one</span> <span m='4338040'>that</span> <span m='4338130'>we</span>
  <span m='4338250'>can't</span> <span m='4338460'>see.</span> <span m='4340620'>I</span>
  <span m='4340740'>claim</span> <span m='4341130'>that's</span> <span m='4341580'>also</span>
  <span m='4341880'>OK.</span> <span m='4344090'>Sorry.</span> <span m='4344960'>Also</span>
  <span m='4345090'>need</span> <span m='4345690'>number</span> <span m='4346050'>of</span>
  <span m='4346140'>memory</span> <span m='4346550'>transfers</span> <span m='4352100'>is</span>
  <span m='4352590'>equal</span> <span m='4352980'>to</span> <span m='4353160'>that.</span>
  </p><p><span m='4355330'>OK.</span> <span m='4355760'>One</span> <span m='4356090'>more</span>
  <span m='4356270'>part</span> <span m='4356510'>of</span> <span m='4356570'>the</span>
  <span m='4356660'>argument.</span> <span m='4371010'>Levels</span> <span m='4373530'>above</span>
  <span m='4375300'>the</span> <span m='4375390'>bottom</span> <span m='4375740'>two.</span>
  <span m='4379920'>Nice</span> <span m='4380130'>thing</span> <span m='4380280'>about</span>
  <span m='4380490'>the</span> <span m='4380580'>levels</span> <span m='4380880'>above</span>
  <span m='4381120'>the</span> <span m='4381240'>bottom</span> <span m='4381540'>two</span>
  <span m='4381930'>is</span> <span m='4382230'>there</span> <span m='4383880'>aren't</span>
  <span m='4384060'>too</span> <span m='4384300'>many</span> <span m='4384540'>triangles.</span>
  <span m='4387450'>All</span> <span m='4387540'>right.</span> <span m='4387780'>Well,</span>
  <span m='4387900'>there</span> <span m='4388020'>aren't</span> <span m='4388140'>too</span>
  <span m='4388230'>many</span> <span m='4388410'>nodes</span> <span m='4388740'>involved.</span>
  <span m='4389210'>Let's</span> <span m='4389490'>see.</span> </p><p><span m='4391260'>So</span>
  <span m='4393570'>down</span> <span m='4393810'>here,</span> <span m='4394230'>there</span>
  <span m='4394360'>were</span> <span m='4394440'>like</span> <span m='4394680'>log</span>
  <span m='4394950'>squared</span> <span m='4395250'>N</span> <span m='4395560'>nodes.</span>
  <span m='4395730'>There was</span> <span m='4395940'>a</span> <span m='4396000'>lot</span>
  <span m='4396210'>of</span> <span m='4396270'>nodes.</span> <span m='4397470'>Once</span>
  <span m='4397680'>I</span> <span m='4397740'>go</span> <span m='4397950'>up</span>
  <span m='4398190'>two</span> <span m='4398400'>levels,</span> <span m='4399540'>how</span>
  <span m='4399690'>many</span> <span m='4399870'>of</span> <span m='4399990'>these</span>
  <span m='4400230'>nodes</span> <span m='4400530'>can</span> <span m='4400680'>there</span>
  <span m='4400800'>be,</span> <span m='4401760'>these</span> <span m='4401960'>roots?</span>
  </p><p><span m='4405160'>Well,</span> <span m='4405560'>it was</span> <span m='4405850'>log</span>
  <span m='4406180'>squared</span> <span m='4406440'>N</span> <span m='4407190'>at</span>
  <span m='4407580'>the</span> <span m='4407700'>bottom.</span> <span m='4409020'>And</span>
  <span m='4409110'>then</span> <span m='4409230'>I</span> <span m='4409300'>basically</span>
  <span m='4409650'>shaved</span> <span m='4410190'>off</span> <span m='4410460'>a</span>
  <span m='4410520'>factor</span> <span m='4410910'>of</span> <span m='4411000'>B</span>
  <span m='4411300'>here,</span> <span m='4412300'>so</span> <span m='4412530'>the</span>
  <span m='4412620'>number</span> <span m='4412860'>of</span> <span m='4412950'>these</span>
  <span m='4413220'>roots</span> <span m='4414150'>is</span> <span m='4414270'>at</span>
  <span m='4414360'>most</span> <span m='4414600'>log</span> <span m='4414870'>squared</span>
  <span m='4415200'>N</span> <span m='4415380'>over</span> <span m='4415630'>B.</span>
  <span m='4417510'>That's</span> <span m='4417720'>small.</span> </p><p><span m='4420150'>For</span>
  <span m='4420330'>those</span> <span m='4420630'>nodes,</span> <span m='4420960'>I</span>
  <span m='4421020'>could</span> <span m='4421170'>afford</span> <span m='4421470'>to</span>
  <span m='4421560'>do</span> <span m='4421680'>an</span> <span m='4421770'>entire</span>
  <span m='4422310'>memory</span> <span m='4422610'>transfer</span> <span m='4423130'>for</span>
  <span m='4423270'>every</span> <span m='4423540'>single</span> <span m='4423810'>node.</span>
  <span m='4427150'>So</span> <span m='4427230'>the</span> <span m='4427350'>number</span>
  <span m='4427800'>of</span> <span m='4428130'>nodes</span> <span m='4430080'>that</span>
  <span m='4430470'>need</span> <span m='4430680'>updating--</span> <span m='4431950'>these</span>
  <span m='4432190'>are</span> <span m='4432360'>ancestors--</span> <span m='4440060'>is</span>
  <span m='4440520'>order</span> <span m='4441300'>log</span> <span m='4441660'>squared</span>
  <span m='4442110'>N</span> <span m='4442900'>over</span> <span m='4443230'>B.</span>
  <span m='4445320'>That's</span> <span m='4445650'>the</span> <span m='4445710'>number</span>
  <span m='4445920'>of</span> <span m='4445980'>leaves</span> <span m='4446370'>down</span>
  <span m='4446610'>there.</span> </p><p><span m='4447630'>At</span> <span m='4447750'>some</span>
  <span m='4447990'>point,</span> <span m='4448230'>you</span> <span m='4448350'>reach</span>
  <span m='4448560'>the</span> <span m='4448650'>common</span> <span m='4448950'>ancestor</span>
  <span m='4449340'>of</span> <span m='4449430'>those</span> <span m='4449640'>leaves.</span>
  <span m='4450390'>That</span> <span m='4450660'>tree--</span> <span m='4451170'>so</span>
  <span m='4451580'>here,</span> <span m='4451770'>draw</span> <span m='4452270'>a
  big</span> <span m='4452610'>picture.</span> <span m='4454390'>Here's</span> <span
  m='4454650'>the</span> <span m='4454770'>bottom</span> <span m='4457740'>two</span>
  <span m='4457920'>layers.</span> <span m='4461340'>We're</span> <span m='4461430'>shaving</span>
  <span m='4461790'>that</span> <span m='4461970'>off.</span> </p><p><span m='4465920'>Up</span>
  <span m='4466170'>here,</span> <span m='4468300'>the</span> <span m='4468510'>number</span>
  <span m='4468840'>of</span> <span m='4468960'>nodes</span> <span m='4469410'>here,</span>
  <span m='4470760'>these</span> <span m='4471060'>roots</span> <span m='4471390'>that</span>
  <span m='4471540'>we're</span> <span m='4471690'>dealing</span> <span m='4472020'>with,</span>
  <span m='4472730'>that's</span> <span m='4473040'>the</span> <span m='4473160'>log</span>
  <span m='4473460'>squared</span> <span m='4474660'>N</span> <span m='4474990'>over</span>
  <span m='4475320'>B.</span> <span m='4476340'>So</span> <span m='4476460'>if</span>
  <span m='4476550'>we</span> <span m='4476670'>build</span> <span m='4476930'>a</span>
  <span m='4477030'>tree</span> <span m='4477330'>on</span> <span m='4477480'>those</span>
  <span m='4477750'>nodes,</span> <span m='4478920'>total</span> <span m='4479220'>number</span>
  <span m='4479460'>of</span> <span m='4479520'>nodes</span> <span m='4479790'>in</span>
  <span m='4479910'>here</span> <span m='4480150'>is</span> <span m='4480330'>only</span>
  <span m='4481170'>log</span> <span m='4481440'>squared</span> <span m='4481730'>N</span>
  <span m='4481890'>over</span> <span m='4482100'>B</span> <span m='4482400'>times</span>
  <span m='4482850'>2,</span> <span m='4483330'>because it's</span> <span m='4483760'>a</span>
  <span m='4483840'>binary</span> <span m='4484200'>tree.</span> <span m='4485640'>But</span>
  <span m='4485760'>then</span> <span m='4485970'>there's</span> <span m='4486120'>also</span>
  <span m='4486420'>these</span> <span m='4486720'>nodes</span> <span m='4487050'>up
  here.</span> <span m='4487890'>This</span> <span m='4488160'>is</span> <span m='4488280'>potentially</span>
  <span m='4489600'>log N</span> <span m='4489920'>nodes.</span> </p><p><span m='4493240'>So</span>
  <span m='4493530'>number</span> <span m='4493770'>of</span> <span m='4493830'>nodes</span>
  <span m='4494030'>that</span> <span m='4494100'>need</span> <span m='4494250'>updating</span>
  <span m='4494640'>is</span> <span m='4494760'>at</span> <span m='4494820'>most</span>
  <span m='4495040'>this</span> <span m='4495330'>plus</span> <span m='4496500'>log</span>
  <span m='4496850'>N.</span> <span m='4499230'>So</span> <span m='4499770'>what's</span>
  <span m='4499980'>going</span> <span m='4500220'>on</span> <span m='4500370'>here</span>
  <span m='4500520'>is</span> <span m='4500970'>we</span> <span m='4501450'>first</span>
  <span m='4501870'>analyzed</span> <span m='4502410'>the</span> <span m='4502530'>bottom</span>
  <span m='4502860'>two</span> <span m='4503010'>layers.</span> <span m='4504330'>That</span>
  <span m='4504480'>was OK</span> <span m='4504660'>because</span> <span m='4505470'>of</span>
  <span m='4505590'>this</span> <span m='4506130'>ordering</span> <span m='4506640'>thing,</span>
  <span m='4507000'>that</span> <span m='4507500'>we're</span> <span m='4507660'>only</span>
  <span m='4507870'>dealing</span> <span m='4508110'>with</span> <span m='4508200'>two</span>
  <span m='4508380'>triangles</span> <span m='4508800'>at</span> <span m='4508890'>once</span>
  <span m='4509910'>and</span> <span m='4510030'>therefore</span> <span m='4510360'>we</span>
  <span m='4510510'>pay</span> <span m='4511020'>this</span> <span m='4511230'>size</span>
  <span m='4511650'>divided</span> <span m='4512040'>by</span> <span m='4512220'>B,</span>
  <span m='4513020'>log squared</span> <span m='4513300'>N</span> <span m='4513390'>over</span>
  <span m='4513570'>B.</span> </p><p><span m='4514320'>Then</span> <span m='4514590'>there's</span>
  <span m='4514830'>the</span> <span m='4515280'>common</span> <span m='4515730'>ancestors</span>
  <span m='4516330'>of</span> <span m='4516450'>those</span> <span m='4516660'>nodes.</span>
  <span m='4517290'>That</span> <span m='4517470'>forms</span> <span m='4517800'>a</span>
  <span m='4517860'>little</span> <span m='4518100'>binary</span> <span m='4518550'>tree</span>
  <span m='4518880'>of</span> <span m='4518940'>size</span> <span m='4519190'>log</span>
  <span m='4519440'>squared</span> <span m='4519710'>N</span> <span m='4519810'>over</span>
  <span m='4520020'>B.</span> <span m='4520790'>For</span> <span m='4520950'>these</span>
  <span m='4521340'>nodes,</span> <span m='4522480'>this</span> <span m='4522690'>triangle</span>
  <span m='4523110'>up</span> <span m='4523270'>here,</span> <span m='4524100'>we</span>
  <span m='4524220'>can</span> <span m='4524340'>afford</span> <span m='4524640'>to</span>
  <span m='4524700'>pay</span> <span m='4525030'>one</span> <span m='4525300'>memory</span>
  <span m='4525570'>transfer</span> <span m='4525990'>for</span> <span m='4526140'>every</span>
  <span m='4526440'>node,</span> <span m='4526740'>so</span> <span m='4526920'>we</span>
  <span m='4527040'>don't</span> <span m='4527220'>care</span> <span m='4528360'>that</span>
  <span m='4528480'>we're</span> <span m='4528620'>efficient</span> <span m='4528950'>up</span>
  <span m='4529140'>here,</span> <span m='4531100'>which</span> <span m='4531240'>is--</span>
  <span m='4531720'>I</span> <span m='4531780'>mean,</span> <span m='4532650'>well,</span>
  <span m='4533010'>let's</span> <span m='4533160'>not</span> <span m='4533280'>worry</span>
  <span m='4533460'>about</span> <span m='4533610'>whether</span> <span m='4533820'>we</span>
  <span m='4533940'>are. It</span> <span m='4534130'>doesn't</span> <span m='4534330'>matter.</span>
  </p><p><span m='4535125'>So</span> <span m='4535560'>for</span> <span m='4535680'>these</span>
  <span m='4535890'>nodes,</span> <span m='4538530'>we</span> <span m='4538650'>pay</span>
  <span m='4539240'>at</span> <span m='4539370'>most</span> <span m='4539820'>one</span>
  <span m='4541140'>memory</span> <span m='4541440'>transfer</span> <span m='4546510'>each.</span>
  <span m='4548100'>And</span> <span m='4548220'>so</span> <span m='4548370'>we</span>
  <span m='4548460'>pay</span> <span m='4548620'>at</span> <span m='4548690'>most</span>
  <span m='4548910'>log</span> <span m='4549150'>squared</span> <span m='4549240'>N</span>
  <span m='4549300'>over</span> <span m='4549600'>B</span> <span m='4549750'>for</span>
  <span m='4549870'>them.</span> <span m='4550410'>That's</span> <span m='4550590'>fine,</span>
  <span m='4550960'>because</span> <span m='4551070'>we</span> <span m='4551340'>already</span>
  <span m='4551700'>paid</span> <span m='4551880'>that</span> <span m='4552060'>much.</span>
  </p><p><span m='4553950'>And</span> <span m='4554070'>finally,</span> <span m='4554490'>we</span>
  <span m='4554640'>have</span> <span m='4554790'>to</span> <span m='4554910'>pay</span>
  <span m='4555120'>for</span> <span m='4555270'>these</span> <span m='4555540'>nodes</span>
  <span m='4555780'>up</span> <span m='4555960'>here,</span> <span m='4556720'>which</span>
  <span m='4556770'>are</span> <span m='4556830'>from</span> <span m='4557130'>the</span>
  <span m='4557310'>common</span> <span m='4557670'>ancestors</span> <span m='4558210'>of</span>
  <span m='4558330'>these</span> <span m='4558570'>guys</span> <span m='4559170'>up</span>
  <span m='4559320'>to</span> <span m='4559440'>the</span> <span m='4559560'>root.</span>
  <span m='4560310'>That</span> <span m='4560430'>has</span> <span m='4560610'>length</span>
  <span m='4560780'>at</span> <span m='4560910'>most</span> <span m='4561150'>log</span>
  <span m='4561450'>N.</span> <span m='4561630'>Could</span> <span m='4561780'>be</span>
  <span m='4561900'>smaller</span> <span m='4562170'>if</span> <span m='4562440'>this</span>
  <span m='4562620'>was</span> <span m='4562740'>a</span> <span m='4562800'>big</span>
  <span m='4563010'>interval.</span> </p><p><span m='4565120'>So</span> <span m='4565230'>for</span>
  <span m='4565380'>these</span> <span m='4565620'>guys,</span> <span m='4567600'>we</span>
  <span m='4567810'>pay</span> <span m='4569850'>order</span> <span m='4570180'>log</span>
  <span m='4570420'>base</span> <span m='4570900'>B of N.</span> <span m='4575250'>Why?</span>
  <span m='4575970'>Because</span> <span m='4576390'>this</span> <span m='4576690'>is</span>
  <span m='4576870'>a</span> <span m='4577020'>root</span> <span m='4577230'>to</span>
  <span m='4577380'>node</span> <span m='4577590'>path.</span> <span m='4578740'>And</span>
  <span m='4579030'>this</span> <span m='4579210'>is</span> <span m='4579300'>the</span>
  <span m='4579390'>static</span> <span m='4579750'>analysis.</span> <span m='4580260'>We</span>
  <span m='4580410'>already</span> <span m='4580620'>know</span> <span m='4580830'>that</span>
  <span m='4580950'>following</span> <span m='4581370'>a</span> <span m='4581430'>root</span>
  <span m='4581610'>to</span> <span m='4581760'>node</span> <span m='4581940'>path</span>
  <span m='4582720'>we</span> <span m='4582840'>pay</span> <span m='4583290'>at</span>
  <span m='4583410'>most</span> <span m='4583710'>log</span> <span m='4583940'>base</span>
  <span m='4584140'>B</span> <span m='4584280'>of N.</span> </p><p><span m='4585810'>So</span>
  <span m='4586020'>we</span> <span m='4586110'>pay</span> <span m='4586290'>log</span>
  <span m='4586570'>base</span> <span m='4586770'>B of N</span> <span m='4587230'>plus</span>
  <span m='4587950'>log</span> <span m='4588440'>squared</span> <span m='4588870'>N</span>
  <span m='4588990'>over</span> <span m='4589170'>B</span> <span m='4589380'>for</span>
  <span m='4589500'>this,</span> <span m='4590100'>plus</span> <span m='4590370'>log</span>
  <span m='4590610'>squared</span> <span m='4590730'>N</span> <span m='4590910'>over</span>
  <span m='4591060'>B for</span> <span m='4591300'>this,</span> <span m='4591810'>plus</span>
  <span m='4592110'>log</span> <span m='4592370'>squared</span> <span m='4592570'>N</span>
  <span m='4592870'>over</span> <span m='4593090'>B</span> <span m='4593380'>for</span>
  <span m='4593670'>the</span> <span m='4594660'>ordered</span> <span m='4594960'>file.</span>
  <span m='4596730'>So</span> <span m='4597270'>overall</span> <span m='4597660'>running</span>
  <span m='4597930'>time</span> <span m='4600270'>for</span> <span m='4600510'>an</span>
  <span m='4600600'>update</span> <span m='4601650'>is</span> <span m='4601980'>log</span>
  <span m='4602610'>base</span> <span m='4603435'>B</span> <span m='4603720'>of</span>
  <span m='4604260'>N</span> <span m='4605220'>plus</span> <span m='4606290'>log</span>
  <span m='4606750'>squared</span> <span m='4607530'>N</span> <span m='4608470'>over</span>
  <span m='4608750'>B.</span> </p><p><span m='4609780'>We</span> <span m='4609870'>actually</span>
  <span m='4610110'>paid</span> <span m='4610320'>log</span> <span m='4610530'>base
  B of</span> <span m='4610800'>N</span> <span m='4611040'>twice,</span> <span m='4611460'>once</span>
  <span m='4611790'>to</span> <span m='4611910'>do</span> <span m='4612030'>the</span>
  <span m='4612150'>initial</span> <span m='4612510'>search.</span> <span m='4613530'>I</span>
  <span m='4613640'>said</span> <span m='4613820'>an</span> <span m='4613890'>update</span>
  <span m='4614280'>first</span> <span m='4614560'>has to</span> <span m='4614820'>search</span>
  <span m='4615150'>for</span> <span m='4615270'>the</span> <span m='4615360'>key.</span>
  <span m='4616190'>Then</span> <span m='4616350'>it</span> <span m='4616410'>updates</span>
  <span m='4616770'>the</span> <span m='4616860'>order</span> <span m='4617100'>file.</span>
  <span m='4617490'>That's</span> <span m='4617700'>where</span> <span m='4617820'>we've</span>
  <span m='4618030'>paid</span> <span m='4618180'>the</span> <span m='4618270'>first</span>
  <span m='4618510'>log</span> <span m='4618720'>squared</span> <span m='4619500'>N</span>
  <span m='4619650'>over</span> <span m='4619830'>B.</span> <span m='4620160'>And</span>
  <span m='4620310'>then</span> <span m='4620580'>to</span> <span m='4620730'>propagate</span>
  <span m='4621300'>all</span> <span m='4621390'>the</span> <span m='4621510'>changes</span>
  <span m='4621900'>up</span> <span m='4622110'>the</span> <span m='4622230'>tree,</span>
  <span m='4622980'>we</span> <span m='4623160'>pay</span> <span m='4623670'>log</span>
  <span m='4623940'>squared</span> <span m='4624070'>N over</span> <span m='4624440'>B</span>
  <span m='4624660'>for</span> <span m='4624870'>this</span> <span m='4625050'>part,</span>
  <span m='4625710'>and</span> <span m='4625860'>then</span> <span m='4625980'>another</span>
  <span m='4626340'>log</span> <span m='4626610'>base B</span> <span m='4626970'>of
  N</span> <span m='4627270'>for</span> <span m='4627420'>this</span> <span m='4627600'>part.</span>
  </p><p><span m='4630560'>OK.</span> <span m='4630910'>That's</span> <span m='4631170'>updates</span>
  <span m='4632250'>with</span> <span m='4632390'>a</span> <span m='4632460'>bad</span>
  <span m='4632800'>bound.</span> <span m='4634080'>It</span> <span m='4634350'>turns</span>
  <span m='4634620'>out</span> <span m='4634710'>we're</span> <span m='4634860'>almost</span>
  <span m='4635190'>there.</span> <span m='4635890'>So</span> <span m='4635910'>at</span>
  <span m='4635970'>this</span> <span m='4636150'>point</span> <span m='4636390'>we</span>
  <span m='4636540'>have</span> <span m='4636720'>searches</span> <span m='4637420'>optimal,</span>
  <span m='4638090'>because</span> <span m='4638550'>searches</span> <span m='4639030'>are</span>
  <span m='4639120'>just</span> <span m='4639300'>searching</span> <span m='4639690'>through</span>
  <span m='4639840'>the</span> <span m='4639930'>van Emde Boas</span> <span m='4640600'>thing.</span>
  <span m='4640920'>That's log</span> <span m='4641140'>base</span> <span m='4641360'>B
  of</span> <span m='4641590'>N.</span> </p><p><span m='4642300'>Updates,</span> <span
  m='4642810'>not</span> <span m='4643080'>quite</span> <span m='4643440'>optimal.</span>
  <span m='4645180'>I</span> <span m='4645270'>mean</span> <span m='4646080'>not</span>
  <span m='4646380'>quite</span> <span m='4646680'>matching</span> <span m='4647040'>a</span>
  <span m='4647100'>B-tree,</span> <span m='4647520'>I</span> <span m='4647610'>should</span>
  <span m='4647760'>say,</span> <span m='4648060'>because</span> <span m='4648360'>it's</span>
  <span m='4648510'>not</span> <span m='4648670'>an</span> <span m='4648750'>optimal</span>
  <span m='4649200'>bound</span> <span m='4649520'>we're</span> <span m='4649600'>aiming</span>
  <span m='4649830'>for.</span> <span m='4650010'>We're</span> <span m='4650100'>just</span>
  <span m='4650280'>aiming</span> <span m='4650490'>for</span> <span m='4650580'>B-trees.</span>
  <span m='4652070'>We'd</span> <span m='4652500'>want</span> <span m='4652770'>to</span>
  <span m='4652830'>get</span> <span m='4652980'>this</span> <span m='4653160'>bound,</span>
  <span m='4653820'>same</span> <span m='4654120'>as</span> <span m='4654210'>searching.</span>
  <span m='4656010'>But</span> <span m='4657420'>we</span> <span m='4657540'>have</span>
  <span m='4657690'>this</span> <span m='4657840'>extra</span> <span m='4658140'>term,</span>
  <span m='4659500'>which</span> <span m='4659580'>if</span> <span m='4659670'>B</span>
  <span m='4659880'>is</span> <span m='4659970'>small,</span> <span m='4660540'>for</span>
  <span m='4660690'>example</span> <span m='4661110'>if</span> <span m='4661320'>B
  is</span> <span m='4661510'>log</span> <span m='4661865'>N,</span> <span m='4663690'>this</span>
  <span m='4664020'>term</span> <span m='4664290'>will</span> <span m='4664410'>be</span>
  <span m='4664530'>bigger</span> <span m='4664830'>than</span> <span m='4664980'>this</span>
  <span m='4665160'>one.</span> <span m='4666890'>The</span> <span m='4666980'>breakpoint</span>
  <span m='4667400'>is</span> <span m='4667460'>when</span> <span m='4667610'>B equals</span>
  <span m='4668000'>log</span> <span m='4668270'>n</span> <span m='4668390'>times</span>
  <span m='4668630'>log</span> <span m='4668840'>log</span> <span m='4668900'>N.</span>
  </p><p><span m='4670160'>So</span> <span m='4670400'>for</span> <span m='4670550'>small</span>
  <span m='4670790'>B,</span> <span m='4671060'>we're</span> <span m='4671150'>not</span>
  <span m='4671300'>happy.</span> <span m='4671700'>And</span> <span m='4671800'>we</span>
  <span m='4671810'>want</span> <span m='4671960'>to</span> <span m='4672020'>be</span>
  <span m='4672110'>happy</span> <span m='4672380'>for</span> <span m='4672590'>all</span>
  <span m='4672830'>B's</span> <span m='4673070'>simultaneously.</span> <span m='4674650'>So</span>
  <span m='4675580'>I</span> <span m='4675630'>want</span> <span m='4675770'>to</span>
  <span m='4675830'>fix</span> <span m='4676070'>this.</span> </p><p><span m='4677240'>We're</span>
  <span m='4677300'>going</span> <span m='4677420'>to</span> <span m='4677480'>fix</span>
  <span m='4677740'>it</span> <span m='4677840'>using</span> <span m='4678350'>a</span>
  <span m='4678440'>general</span> <span m='4678740'>technique,</span> <span m='4680990'>great</span>
  <span m='4681200'>technique,</span> <span m='4683450'>called</span> <span m='4683720'>indirection.</span>
  <span m='4684420'>So</span> <span m='4684590'>this</span> <span m='4684800'>is</span>
  <span m='4684920'>step</span> <span m='4685410'>5,</span> <span m='4688070'>indirection.</span>
  <span m='4692310'>The</span> <span m='4692410'>idea</span> <span m='4692540'>is</span>
  <span m='4692630'>simple.</span> </p><p><span m='4694800'>We</span> <span m='4694850'>want</span>
  <span m='4695060'>to</span> <span m='4695120'>use</span> <span m='4696560'>the</span>
  <span m='4697340'>previous</span> <span m='4697700'>data</span> <span m='4697910'>structure</span>
  <span m='4700880'>on</span> <span m='4702230'>N</span> <span m='4702740'>over</span>
  <span m='4703250'>log</span> <span m='4703550'>N</span> <span m='4703820'>items.</span>
  <span m='4706380'>And,</span> <span m='4706850'>well,</span> <span m='4707060'>we</span>
  <span m='4707180'>need</span> <span m='4707360'>to</span> <span m='4707420'>store</span>
  <span m='4707660'>N</span> <span m='4707840'>items,</span> <span m='4708380'>so</span>
  <span m='4708560'>where</span> <span m='4708650'>do</span> <span m='4708740'>we</span>
  <span m='4708800'>put</span> <span m='4708980'>them?</span> <span m='4709250'>On</span>
  <span m='4709400'>the</span> <span m='4709490'>bottom.</span> <span m='4711060'>So</span>
  <span m='4711100'>I'm</span> <span m='4711140'>going</span> <span m='4711260'>to</span>
  <span m='4711320'>have</span> <span m='4711860'>theta</span> <span m='4712760'>log</span>
  <span m='4713190'>N</span> <span m='4713420'>nodes</span> <span m='4713750'>down</span>
  <span m='4714020'>here,</span> <span m='4715370'>theta</span> <span m='4715940'>log</span>
  <span m='4716280'>N</span> <span m='4716750'>nodes</span> <span m='4716990'>next</span>
  <span m='4717260'>to</span> <span m='4717350'>them--</span> <span m='4719040'>or</span>
  <span m='4719240'>items,</span> <span m='4719660'>I</span> <span m='4719720'>should</span>
  <span m='4719870'>say.</span> <span m='4721550'>Theta</span> <span m='4722600'>log</span>
  <span m='4722980'>N.</span> </p><p><span m='4724500'>OK.</span> <span m='4725290'>And</span>
  <span m='4725480'>then</span> <span m='4726350'>one</span> <span m='4726650'>of</span>
  <span m='4726710'>these</span> <span m='4726860'>items,</span> <span m='4727130'>let's</span>
  <span m='4727250'>say</span> <span m='4727400'>the</span> <span m='4727550'>min</span>
  <span m='4727850'>item,</span> <span m='4728840'>gets</span> <span m='4729290'>stored</span>
  <span m='4729680'>in</span> <span m='4729800'>this</span> <span m='4729980'>tree.</span>
  <span m='4730310'>The</span> <span m='4730400'>min</span> <span m='4730580'>item</span>
  <span m='4730850'>over</span> <span m='4731060'>here</span> <span m='4731840'>gets</span>
  <span m='4732020'>stored</span> <span m='4732410'>in</span> <span m='4732590'>this</span>
  <span m='4732770'>tree.</span> <span m='4733730'>The</span> <span m='4733790'>min</span>
  <span m='4734030'>item</span> <span m='4734270'>here</span> <span m='4734510'>gets</span>
  <span m='4734690'>stored</span> <span m='4735930'>up</span> <span m='4736340'>here.</span>
  </p><p><span m='4738840'>OK.</span> <span m='4739360'>So</span> <span m='4739510'>this</span>
  <span m='4739720'>item</span> <span m='4739960'>only--</span> <span m='4740705'>the</span>
  <span m='4740970'>data</span> <span m='4741430'>structure</span> <span m='4741790'>we</span>
  <span m='4741940'>just</span> <span m='4742120'>developed,</span> <span m='4742810'>I</span>
  <span m='4742930'>only</span> <span m='4743200'>store</span> <span m='4743560'>N</span>
  <span m='4743710'>over</span> <span m='4743920'>log</span> <span m='4744160'>N</span>
  <span m='4744280'>of</span> <span m='4744370'>the</span> <span m='4744520'>items.</span>
  <span m='4745990'>The</span> <span m='4746110'>rest</span> <span m='4746900'>that</span>
  <span m='4746990'>fit</span> <span m='4747180'>in</span> <span m='4747310'>between</span>
  <span m='4747670'>those</span> <span m='4747850'>items</span> <span m='4748180'>are</span>
  <span m='4748270'>stored</span> <span m='4748930'>down</span> <span m='4749140'>here.</span>
  </p><p><span m='4749830'>Now I</span> <span m='4750130'>use</span> <span m='4750310'>standard</span>
  <span m='4750850'>B-tree</span> <span m='4751240'>tricks,</span> <span m='4751600'>actually.</span>
  <span m='4752800'>If</span> <span m='4753550'>I</span> <span m='4753610'>want</span>
  <span m='4753790'>to</span> <span m='4753850'>do</span> <span m='4753940'>an</span>
  <span m='4754030'>insertion,</span> <span m='4755020'>how</span> <span m='4755170'>do</span>
  <span m='4755290'>I</span> <span m='4755320'>do</span> <span m='4755440'>a</span>
  <span m='4755500'>search?</span> <span m='4756470'>I</span> <span m='4756610'>follow</span>
  <span m='4757000'>a</span> <span m='4757030'>root</span> <span m='4757180'>to</span>
  <span m='4757270'>leaf</span> <span m='4757440'>path.</span> <span m='4758200'>And</span>
  <span m='4758340'>then</span> <span m='4758470'>I do</span> <span m='4758650'>a</span>
  <span m='4758710'>linear</span> <span m='4759220'>scan</span> <span m='4759610'>of</span>
  <span m='4759700'>this</span> <span m='4759850'>entire</span> <span m='4760720'>structure.</span>
  </p><p><span m='4761500'>How</span> <span m='4761590'>much</span> <span m='4761750'>does</span>
  <span m='4761890'>it</span> <span m='4761950'>cost to do a</span> <span m='4762310'>linear</span>
  <span m='4762550'>scan</span> <span m='4762760'>of</span> <span m='4762850'>log</span>
  <span m='4763120'>N?</span> <span m='4763780'>Only</span> <span m='4764690'>log</span>
  <span m='4765160'>N</span> <span m='4765880'>divided</span> <span m='4766330'>by</span>
  <span m='4766520'>B.</span> <span m='4766780'>This</span> <span m='4766990'>is</span>
  <span m='4767080'>smaller</span> <span m='4767650'>than</span> <span m='4767860'>log</span>
  <span m='4768100'>base</span> <span m='4768310'>B</span> <span m='4768460'>of N,</span>
  <span m='4768770'>so</span> <span m='4768970'>the</span> <span m='4769180'>hard</span>
  <span m='4769420'>part</span> <span m='4769600'>of</span> <span m='4769660'>search</span>
  <span m='4769950'>is</span> <span m='4770110'>the</span> <span m='4770230'>log</span>
  <span m='4770410'>base</span> <span m='4770590'>B</span> <span m='4770740'>of N.</span>
  </p><p><span m='4772660'>OK.</span> <span m='4773050'>How</span> <span m='4773260'>do</span>
  <span m='4773320'>I</span> <span m='4773380'>do</span> <span m='4773500'>an</span>
  <span m='4773590'>update?</span> <span m='4773980'>Well,</span> <span m='4774100'>first,</span>
  <span m='4774370'>I</span> <span m='4774460'>search</span> <span m='4774700'>for</span>
  <span m='4774790'>the</span> <span m='4774880'>guy.</span> <span m='4775450'>I</span>
  <span m='4775540'>find</span> <span m='4775810'>the</span> <span m='4775930'>block</span>
  <span m='4776290'>that</span> <span m='4776380'>it</span> <span m='4776470'>fits</span>
  <span m='4776710'>into</span> <span m='4777520'>and</span> <span m='4777670'>just</span>
  <span m='4777850'>insert</span> <span m='4778210'>into</span> <span m='4778390'>that</span>
  <span m='4778570'>block.</span> <span m='4781180'>Done.</span> </p><p><span m='4782320'>As</span>
  <span m='4782470'>long</span> <span m='4782770'>as</span> <span m='4782890'>this</span>
  <span m='4783040'>block</span> <span m='4783340'>doesn't</span> <span m='4783550'>get</span>
  <span m='4783700'>too</span> <span m='4783850'>big,</span> <span m='4785170'>how</span>
  <span m='4785350'>do</span> <span m='4785470'>I</span> <span m='4785890'>insert</span>
  <span m='4786190'>into</span> <span m='4786370'>a</span> <span m='4786400'>block?</span>
  <span m='4787060'>Rewrite</span> <span m='4787540'>the</span> <span m='4787630'>entire</span>
  <span m='4787990'>block.</span> <span m='4788970'>It's</span> <span m='4789090'>a</span>
  <span m='4789160'>scan.</span> <span m='4789970'>It</span> <span m='4790060'>only</span>
  <span m='4790210'>takes</span> <span m='4790460'>log</span> <span m='4790810'>N</span>
  <span m='4790910'>over</span> <span m='4791385'>B,</span> <span m='4791860'>so</span>
  <span m='4792100'>it's</span> <span m='4792190'>basically</span> <span m='4792550'>free</span>
  <span m='4792850'>to</span> <span m='4793000'>rewrite</span> <span m='4793480'>this</span>
  <span m='4793630'>entire</span> <span m='4793960'>block</span> <span m='4794230'>every</span>
  <span m='4794440'>time</span> <span m='4794740'>as</span> <span m='4794830'>long</span>
  <span m='4795010'>as</span> <span m='4795100'>it</span> <span m='4795190'>has</span>
  <span m='4795310'>size</span> <span m='4796200'>at</span> <span m='4796360'>most</span>
  <span m='4796610'>log</span> <span m='4796890'>N.</span> <span m='4797620'>If</span>
  <span m='4797770'>it</span> <span m='4797860'>gets</span> <span m='4798130'>too</span>
  <span m='4798310'>full,</span> <span m='4799210'>then</span> <span m='4799480'>I</span>
  <span m='4799570'>split</span> <span m='4799990'>it</span> <span m='4800080'>into</span>
  <span m='4800350'>two</span> <span m='4800530'>parts</span> <span m='4800980'>that</span>
  <span m='4801190'>are</span> <span m='4801400'>half-full.</span> </p><p><span m='4803340'>So</span>
  <span m='4803500'>in</span> <span m='4803590'>general,</span> <span m='4804560'>each</span>
  <span m='4804670'>of</span> <span m='4804730'>these</span> <span m='4804940'>blocks</span>
  <span m='4806560'>will</span> <span m='4806710'>maintain</span> <span m='4807370'>the</span>
  <span m='4807460'>size</span> <span m='4808000'>to</span> <span m='4808150'>be</span>
  <span m='4808420'>between</span> <span m='4809410'>1/4</span> <span m='4810070'>log</span>
  <span m='4810370'>N</span> <span m='4811960'>and</span> <span m='4812260'>log</span>
  <span m='4812560'>N.</span> <span m='4814390'>So</span> <span m='4814510'>if</span>
  <span m='4814600'>it</span> <span m='4814690'>gets</span> <span m='4814840'>bigger</span>
  <span m='4815110'>than</span> <span m='4815260'>log</span> <span m='4815500'>N,</span>
  <span m='4815650'>I</span> <span m='4815710'>split</span> <span m='4816010'>into</span>
  <span m='4816310'>two</span> <span m='4816520'>guys</span> <span m='4816790'>of</span>
  <span m='4816910'>1/2</span> <span m='4817180'>size.</span> <span m='4817840'>If</span>
  <span m='4818000'>it</span> <span m='4818060'>gets</span> <span m='4818240'>smaller</span>
  <span m='4818620'>than</span> <span m='4818740'>1/4</span> <span m='4819340'>log</span>
  <span m='4819600'>N,</span> <span m='4820120'>then</span> <span m='4820270'>I'll</span>
  <span m='4820360'>merge</span> <span m='4820750'>it</span> <span m='4820840'>with</span>
  <span m='4820990'>one</span> <span m='4821140'>of</span> <span m='4821230'>its</span>
  <span m='4821380'>neighbors</span> <span m='4822430'>and</span> <span m='4822520'>then</span>
  <span m='4822640'>possibly</span> <span m='4823150'>have</span> <span m='4823270'>to
  re-split</span> <span m='4823840'>it.</span> <span m='4825860'>Or</span> <span m='4825970'>you</span>
  <span m='4826120'>can</span> <span m='4826260'>think</span> <span m='4826420'>of</span>
  <span m='4826480'>it</span> <span m='4826570'>as</span> <span m='4826630'>stealing</span>
  <span m='4827050'>neighbors</span> <span m='4827470'>from</span> <span m='4827680'>your</span>
  <span m='4828430'>siblings.</span> <span m='4829090'>That's</span> <span m='4829630'>what</span>
  <span m='4829810'>you</span> <span m='4829900'>do</span> <span m='4830020'>in</span>
  <span m='4830110'>B-trees.</span> </p><p><span m='4831190'>But</span> <span m='4831430'>with</span>
  <span m='4831580'>a</span> <span m='4831640'>constant</span> <span m='4832000'>number</span>
  <span m='4832180'>of</span> <span m='4832240'>merges</span> <span m='4832600'>and</span>
  <span m='4832690'>splits,</span> <span m='4833620'>you</span> <span m='4833770'>can</span>
  <span m='4833950'>restore</span> <span m='4834370'>the</span> <span m='4834460'>property</span>
  <span m='4834940'>that</span> <span m='4835090'>these</span> <span m='4835270'>guys</span>
  <span m='4835570'>have</span> <span m='4836000'>sizes</span> <span m='4836950'>very</span>
  <span m='4837160'>close</span> <span m='4837490'>to</span> <span m='4837580'>1/2</span>
  <span m='4837900'>log</span> <span m='4838150'>N.</span> <span m='4838870'>And</span>
  <span m='4838990'>so</span> <span m='4839110'>if</span> <span m='4839230'>they</span>
  <span m='4839800'>end</span> <span m='4839950'>up</span> <span m='4840070'>getting</span>
  <span m='4840310'>full,</span> <span m='4840670'>that</span> <span m='4840820'>means</span>
  <span m='4841030'>you</span> <span m='4841150'>inserted</span> <span m='4841690'>1/2</span>
  <span m='4841930'>log N</span> <span m='4842230'>items.</span> <span m='4842680'>If</span>
  <span m='4842830'>they</span> <span m='4842920'>ended</span> <span m='4843160'>up</span>
  <span m='4843280'>getting</span> <span m='4843490'>empty,</span> <span m='4843790'>that</span>
  <span m='4843940'>means</span> <span m='4844090'>you</span> <span m='4844150'>deleted</span>
  <span m='4846070'>1/4</span> <span m='4846430'>log</span> <span m='4846700'>N</span>
  <span m='4846820'>items.</span> <span m='4848170'>And</span> <span m='4848290'>so</span>
  <span m='4849040'>in</span> <span m='4849280'>both</span> <span m='4849520'>cases,</span>
  <span m='4849850'>you</span> <span m='4849940'>have</span> <span m='4850030'>log</span>
  <span m='4850240'>N</span> <span m='4850510'>items</span> <span m='4850780'>to</span>
  <span m='4850870'>charge</span> <span m='4851220'>to.</span> </p><p><span m='4851890'>Whenever</span>
  <span m='4852280'>you</span> <span m='4852400'>do</span> <span m='4852550'>an</span>
  <span m='4852700'>update</span> <span m='4853060'>up</span> <span m='4853210'>here--</span>
  <span m='4853870'>so</span> <span m='4854050'>we</span> <span m='4854140'>update</span>
  <span m='4854470'>up</span> <span m='4854620'>here</span> <span m='4854800'>every</span>
  <span m='4855040'>time</span> <span m='4855250'>we</span> <span m='4855340'>split</span>
  <span m='4855640'>or</span> <span m='4855730'>merge</span> <span m='4856000'>down</span>
  <span m='4856240'>here,</span> <span m='4856960'>because</span> <span m='4857200'>this</span>
  <span m='4857380'>guy</span> <span m='4857560'>has</span> <span m='4857740'>to</span>
  <span m='4857830'>keep</span> <span m='4857980'>track</span> <span m='4858310'>of</span>
  <span m='4858520'>the</span> <span m='4858610'>blocks,</span> <span m='4859120'>not</span>
  <span m='4859300'>the</span> <span m='4859420'>items</span> <span m='4859720'>in</span>
  <span m='4859840'>the</span> <span m='4859930'>blocks.</span> <span m='4861070'>So</span>
  <span m='4861220'>we</span> <span m='4861340'>effectively</span> <span m='4862780'>slow</span>
  <span m='4863200'>down</span> <span m='4865570'>the</span> <span m='4865870'>updates</span>
  <span m='4866320'>in</span> <span m='4866410'>the</span> <span m='4866530'>top</span>
  <span m='4866860'>structure</span> <span m='4872720'>by</span> <span m='4873170'>a</span>
  <span m='4873260'>factor</span> <span m='4874820'>log</span> <span m='4875090'>N,</span>
  <span m='4881210'>which</span> <span m='4881360'>is</span> <span m='4881450'>great,</span>
  <span m='4882170'>because</span> <span m='4882410'>we</span> <span m='4882500'>take</span>
  <span m='4882770'>this</span> <span m='4883310'>update</span> <span m='4883680'>bound</span>
  <span m='4884720'>and</span> <span m='4884810'>we</span> <span m='4884900'>get</span>
  <span m='4885020'>to</span> <span m='4885110'>divide</span> <span m='4885560'>it</span>
  <span m='4885650'>by</span> <span m='4885830'>log</span> <span m='4886100'>N,</span>
  <span m='4886250'>which</span> <span m='4886430'>removes</span> <span m='4886940'>this</span>
  <span m='4887120'>square.</span> </p><p><span m='4889070'>So</span> <span m='4889340'>we</span>
  <span m='4889490'>end</span> <span m='4889730'>up</span> <span m='4890630'>with--</span>
  <span m='4894410'>so</span> <span m='4894650'>we</span> <span m='4894740'>used</span>
  <span m='4894920'>to</span> <span m='4895010'>have</span> <span m='4895250'>log</span>
  <span m='4895580'>base</span> <span m='4895880'>B</span> <span m='4896240'>of</span>
  <span m='4896450'>N</span> <span m='4897140'>plus</span> <span m='4897530'>log</span>
  <span m='4898060'>squared</span> <span m='4898820'>N</span> <span m='4899730'>over</span>
  <span m='4900040'>B.</span> <span m='4900770'>We</span> <span m='4900860'>get</span>
  <span m='4900980'>to</span> <span m='4901070'>divide</span> <span m='4901580'>that</span>
  <span m='4901850'>by</span> <span m='4902090'>log</span> <span m='4902440'>N,</span>
  <span m='4904700'>plus</span> <span m='4905030'>we</span> <span m='4905150'>have</span>
  <span m='4905330'>to</span> <span m='4905480'>do</span> <span m='4907520'>this</span>
  <span m='4907760'>part</span> <span m='4908000'>at</span> <span m='4908120'>the</span>
  <span m='4908240'>bottom.</span> <span m='4910310'>Plus</span> <span m='4910760'>we're</span>
  <span m='4910910'>doing</span> <span m='4911840'>log</span> <span m='4912290'>N</span>
  <span m='4912430'>over</span> <span m='4912770'>B</span> <span m='4912980'>at</span>
  <span m='4913100'>the</span> <span m='4913190'>bottom.</span> </p><p><span m='4915650'>So</span>
  <span m='4916610'>basically,</span> <span m='4917750'>this</span> <span m='4917960'>log</span>
  <span m='4918410'>cancels</span> <span m='4918840'>with</span> <span m='4918910'>this</span>
  <span m='4919070'>square,</span> <span m='4919850'>so</span> <span m='4919970'>this</span>
  <span m='4920150'>is</span> <span m='4920210'>log</span> <span m='4920450'>N</span>
  <span m='4920510'>over</span> <span m='4920690'>B</span> <span m='4920840'>as</span>
  <span m='4920960'>well.</span> <span m='4921650'>This</span> <span m='4921800'>thing</span>
  <span m='4921950'>gets</span> <span m='4922130'>even</span> <span m='4922340'>smaller,</span>
  <span m='4923720'>so</span> <span m='4923900'>we</span> <span m='4924020'>end</span>
  <span m='4924140'>up</span> <span m='4924260'>being</span> <span m='4924440'>able</span>
  <span m='4924620'>to</span> <span m='4924680'>do</span> <span m='4924860'>updates</span>
  <span m='4925370'>in</span> <span m='4925550'>log</span> <span m='4925880'>N</span>
  <span m='4926110'>over</span> <span m='4926420'>B.</span> <span m='4927980'>Not</span>
  <span m='4928220'>really</span> <span m='4928670'>though,</span> <span m='4928910'>because</span>
  <span m='4929240'>at</span> <span m='4929330'>the</span> <span m='4929450'>beginning,</span>
  <span m='4929870'>we</span> <span m='4929960'>have</span> <span m='4930110'>to</span>
  <span m='4930200'>do</span> <span m='4930320'>a</span> <span m='4930380'>search</span>
  <span m='4930830'>to</span> <span m='4930920'>figure</span> <span m='4931160'>out</span>
  <span m='4931250'>where</span> <span m='4931460'>to</span> <span m='4931550'>do</span>
  <span m='4931670'>the</span> <span m='4931820'>update.</span> <span m='4932140'>If</span>
  <span m='4932330'>you</span> <span m='4932450'>knew</span> <span m='4932660'>where</span>
  <span m='4932810'>you</span> <span m='4932930'>had</span> <span m='4933050'>to</span>
  <span m='4933140'>update,</span> <span m='4933950'>you</span> <span m='4934040'>could</span>
  <span m='4934190'>update</span> <span m='4934430'>a</span> <span m='4934490'>little</span>
  <span m='4934670'>faster.</span> <span m='4935120'>You</span> <span m='4935180'>could</span>
  <span m='4935300'>update</span> <span m='4935570'>in</span> <span m='4935660'>log</span>
  <span m='4935900'>N</span> <span m='4935990'>divided</span> <span m='4936350'>by</span>
  <span m='4936470'>B.</span> <span m='4937270'>If</span> <span m='4937340'>you</span>
  <span m='4937430'>don't</span> <span m='4937640'>know</span> <span m='4937790'>where</span>
  <span m='4937880'>to</span> <span m='4938000'>update,</span> <span m='4938420'>you've</span>
  <span m='4938540'>got</span> <span m='4938660'>to</span> <span m='4938720'>spend</span>
  <span m='4938960'>log</span> <span m='4939170'>base B</span> <span m='4939470'>of</span>
  <span m='4939560'>N to</span> <span m='4939800'>search</span> <span m='4940670'>initially.</span>
  </p><p><span m='4943430'>But</span> <span m='4943580'>that's</span> <span m='4943850'>the</span>
  <span m='4943970'>fun</span> <span m='4944180'>part.</span> <span m='4945170'>We</span>
  <span m='4945290'>can</span> <span m='4945410'>now</span> <span m='4945770'>update</span>
  <span m='4946370'>this</span> <span m='4946550'>data</span> <span m='4946700'>structure</span>
  <span m='4947030'>fast,</span> <span m='4947300'>just</span> <span m='4947570'>with</span>
  <span m='4947690'>this</span> <span m='4947840'>one</span> <span m='4948560'>layer</span>
  <span m='4948830'>of</span> <span m='4948920'>indirection</span> <span m='4949430'>with</span>
  <span m='4949580'>log</span> <span m='4949910'>N</span> <span m='4950090'>chunks</span>
  <span m='4950420'>at</span> <span m='4950510'>the</span> <span m='4950600'>bottom,</span>
  <span m='4951530'>speeding</span> <span m='4952010'>this</span> <span m='4952220'>data</span>
  <span m='4952430'>structure</span> <span m='4952730'>up</span> <span m='4952850'>by</span>
  <span m='4952970'>a</span> <span m='4953000'>factor</span> <span m='4953240'>of</span>
  <span m='4953300'>log</span> <span m='4953540'>N</span> <span m='4953630'>for</span>
  <span m='4953750'>updates.</span> <span m='4954110'>Searches</span> <span m='4954560'>don't</span>
  <span m='4954740'>take</span> <span m='4954950'>any</span> <span m='4955100'>longer.</span>
  <span m='4955395'>You</span> <span m='4955690'>just</span> <span m='4955850'>pay</span>
  <span m='4956060'>this</span> <span m='4956240'>extra</span> <span m='4956960'>term,</span>
  <span m='4957230'>which</span> <span m='4957400'>was</span> <span m='4957500'>already</span>
  <span m='4957770'>much</span> <span m='4957950'>smaller</span> <span m='4958280'>than</span>
  <span m='4958400'>what</span> <span m='4958520'>we</span> <span m='4958610'>were</span>
  <span m='4958700'>paying</span> <span m='4958910'>before.</span> </p><p><span m='4960334'>Phew.</span>
  <span m='4961280'>That's</span> <span m='4961550'>cache-oblivious</span> <span m='4962250'>B-trees,</span>
  <span m='4963140'>other</span> <span m='4963410'>than</span> <span m='4964190'>ordered</span>
  <span m='4964460'>file</span> <span m='4964700'>maintenance,</span> <span m='4965120'>which</span>
  <span m='4965300'>we'll</span> <span m='4965450'>do</span> <span m='4965630'>next</span>
  <span m='4965870'>class.</span> </p>
type: course
uid: 8cc04b532bef43e124d2ae28b4bdcb3e

---
None